(function(W,S){typeof exports=="object"&&typeof module=="object"?module.exports=S():typeof define=="function"&&define.amd?define([],S):typeof exports=="object"?exports.GrafanaToWebComponent=S():W.GrafanaToWebComponent=S()})(this,()=>(()=>{"use strict";var J={},W={value:()=>{}};function S(){for(var t=0,n=arguments.length,e={},i;t<n;++t){if(!(i=arguments[t]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new Y(e)}function Y(t){this._=t}function ut(t,n){return t.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}Y.prototype=S.prototype={constructor:Y,on:function(t,n){var e=this._,i=ut(t+"",e),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=st(e[r],t.name)))return r;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(r=(t=i[o]).type)e[r]=K(e[r],t.name,n);else if(n==null)for(r in e)e[r]=K(e[r],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Y(t)},call:function(t,n){if((r=arguments.length-2)>0)for(var e=new Array(r),i=0,r,o;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)}};function st(t,n){for(var e=0,i=t.length,r;e<i;++e)if((r=t[e]).name===n)return r.value}function K(t,n,e){for(var i=0,r=t.length;i<r;++i)if(t[i].name===n){t[i]=W,t=t.slice(0,i).concat(t.slice(i+1));break}return e!=null&&t.push({name:n,value:e}),t}const at=S;var P=0,L=0,F=0,V=1e3,C,O,G=0,q=0,R=0,X=typeof performance=="object"&&performance.now?performance:Date,Z=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $(){return q||(Z(lt),q=X.now()+R)}function lt(){q=0}function H(){this._call=this._time=this._next=null}H.prototype=tt.prototype={constructor:H,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?$():+e)+(n==null?0:+n),!this._next&&O!==this&&(O?O._next=this:C=this,O=this),this._call=t,this._time=e,Q()},stop:function(){this._call&&(this._call=null,this._time=1/0,Q())}};function tt(t,n,e){var i=new H;return i.restart(t,n,e),i}function ht(){$(),++P;for(var t=C,n;t;)(n=q-t._time)>=0&&t._call.call(void 0,n),t=t._next;--P}function nt(){q=(G=X.now())+R,P=L=0;try{ht()}finally{P=0,gt(),q=0}}function ct(){var t=X.now(),n=t-G;n>V&&(R-=n,G=t)}function gt(){for(var t,n=C,e,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:C=e);O=t,Q(i)}function Q(t){if(!P){L&&(L=clearTimeout(L));var n=t-q;n>24?(t<1/0&&(L=setTimeout(nt,t-X.now()-R)),F&&(F=clearInterval(F))):(F||(G=X.now(),F=setInterval(ct,V)),P=1,Z(nt))}}const pt=1664525,yt=1013904223,et=4294967296;function vt(){let t=1;return()=>(t=(pt*t+yt)%et)/et}function Ht(t){return t.x}function Qt(t){return t.y}var xt=10,_t=Math.PI*(3-Math.sqrt(5));function wt(t){var n,e=1,i=.001,r=1-Math.pow(i,1/300),o=0,a=.6,s=new Map,p=tt(y),u=at("tick","end"),g=vt();t==null&&(t=[]);function y(){l(),u.call("tick",n),e<i&&(p.stop(),u.call("end",n))}function l(h){var f,c=t.length,x;h===void 0&&(h=1);for(var d=0;d<h;++d)for(e+=(o-e)*r,s.forEach(function(_){_(e)}),f=0;f<c;++f)x=t[f],x.fx==null?x.x+=x.vx*=a:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=a:(x.y=x.fy,x.vy=0);return n}function v(){for(var h=0,f=t.length,c;h<f;++h){if(c=t[h],c.index=h,c.fx!=null&&(c.x=c.fx),c.fy!=null&&(c.y=c.fy),isNaN(c.x)||isNaN(c.y)){var x=xt*Math.sqrt(.5+h),d=h*_t;c.x=x*Math.cos(d),c.y=x*Math.sin(d)}(isNaN(c.vx)||isNaN(c.vy))&&(c.vx=c.vy=0)}}function w(h){return h.initialize&&h.initialize(t,g),h}return v(),n={tick:l,restart:function(){return p.restart(y),n},stop:function(){return p.stop(),n},nodes:function(h){return arguments.length?(t=h,v(),s.forEach(w),n):t},alpha:function(h){return arguments.length?(e=+h,n):e},alphaMin:function(h){return arguments.length?(i=+h,n):i},alphaDecay:function(h){return arguments.length?(r=+h,n):+r},alphaTarget:function(h){return arguments.length?(o=+h,n):o},velocityDecay:function(h){return arguments.length?(a=1-h,n):1-a},randomSource:function(h){return arguments.length?(g=h,s.forEach(w),n):g},force:function(h,f){return arguments.length>1?(f==null?s.delete(h):s.set(h,w(f)),n):s.get(h)},find:function(h,f,c){var x=0,d=t.length,_,m,I,E,N;for(c==null?c=1/0:c*=c,x=0;x<d;++x)E=t[x],_=h-E.x,m=f-E.y,I=_*_+m*m,I<c&&(N=E,c=I);return N},on:function(h,f){return arguments.length>1?(u.on(h,f),n):u.on(h)}}}function j(t){return function(){return t}}function B(t){return(t()-.5)*1e-6}function dt(t){return t.index}function it(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function mt(t){var n=dt,e=y,i,r=j(30),o,a,s,p,u,g=1;t==null&&(t=[]);function y(f){return 1/Math.min(s[f.source.index],s[f.target.index])}function l(f){for(var c=0,x=t.length;c<g;++c)for(var d=0,_,m,I,E,N,T,A;d<x;++d)_=t[d],m=_.source,I=_.target,E=I.x+I.vx-m.x-m.vx||B(u),N=I.y+I.vy-m.y-m.vy||B(u),T=Math.sqrt(E*E+N*N),T=(T-o[d])/T*f*i[d],E*=T,N*=T,I.vx-=E*(A=p[d]),I.vy-=N*A,m.vx+=E*(A=1-A),m.vy+=N*A}function v(){if(a){var f,c=a.length,x=t.length,d=new Map(a.map((m,I)=>[n(m,I,a),m])),_;for(f=0,s=new Array(c);f<x;++f)_=t[f],_.index=f,typeof _.source!="object"&&(_.source=it(d,_.source)),typeof _.target!="object"&&(_.target=it(d,_.target)),s[_.source.index]=(s[_.source.index]||0)+1,s[_.target.index]=(s[_.target.index]||0)+1;for(f=0,p=new Array(x);f<x;++f)_=t[f],p[f]=s[_.source.index]/(s[_.source.index]+s[_.target.index]);i=new Array(x),w(),o=new Array(x),h()}}function w(){if(a)for(var f=0,c=t.length;f<c;++f)i[f]=+e(t[f],f,t)}function h(){if(a)for(var f=0,c=t.length;f<c;++f)o[f]=+r(t[f],f,t)}return l.initialize=function(f,c){a=f,u=c,v()},l.links=function(f){return arguments.length?(t=f,v(),l):t},l.id=function(f){return arguments.length?(n=f,l):n},l.iterations=function(f){return arguments.length?(g=+f,l):g},l.strength=function(f){return arguments.length?(e=typeof f=="function"?f:j(+f),w(),l):e},l.distance=function(f){return arguments.length?(r=typeof f=="function"?f:j(+f),h(),l):r},l}function Nt(t){var n=j(.1),e,i,r;typeof t!="function"&&(t=j(t==null?0:+t));function o(s){for(var p=0,u=e.length,g;p<u;++p)g=e[p],g.vx+=(r[p]-g.x)*i[p]*s}function a(){if(e){var s,p=e.length;for(i=new Array(p),r=new Array(p),s=0;s<p;++s)i[s]=isNaN(r[s]=+t(e[s],s,e))?0:+n(e[s],s,e)}}return o.initialize=function(s){e=s,a()},o.strength=function(s){return arguments.length?(n=typeof s=="function"?s:j(+s),a(),o):n},o.x=function(s){return arguments.length?(t=typeof s=="function"?s:j(+s),a(),o):t},o}function At(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return rt(this.cover(n,e),n,e,t)}function rt(t,n,e,i){if(isNaN(n)||isNaN(e))return t;var r,o=t._root,a={data:i},s=t._x0,p=t._y0,u=t._x1,g=t._y1,y,l,v,w,h,f,c,x;if(!o)return t._root=a,t;for(;o.length;)if((h=n>=(y=(s+u)/2))?s=y:u=y,(f=e>=(l=(p+g)/2))?p=l:g=l,r=o,!(o=o[c=f<<1|h]))return r[c]=a,t;if(v=+t._x.call(null,o.data),w=+t._y.call(null,o.data),n===v&&e===w)return a.next=o,r?r[c]=a:t._root=a,t;do r=r?r[c]=new Array(4):t._root=new Array(4),(h=n>=(y=(s+u)/2))?s=y:u=y,(f=e>=(l=(p+g)/2))?p=l:g=l;while((c=f<<1|h)===(x=(w>=l)<<1|v>=y));return r[x]=o,r[c]=a,t}function bt(t){var n,e,i=t.length,r,o,a=new Array(i),s=new Array(i),p=1/0,u=1/0,g=-1/0,y=-1/0;for(e=0;e<i;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(o=+this._y.call(null,n))||(a[e]=r,s[e]=o,r<p&&(p=r),r>g&&(g=r),o<u&&(u=o),o>y&&(y=o));if(p>g||u>y)return this;for(this.cover(p,u).cover(g,y),e=0;e<i;++e)rt(this,a[e],s[e],t[e]);return this}function Mt(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(e))r=(e=Math.floor(t))+1,o=(i=Math.floor(n))+1;else{for(var a=r-e||1,s=this._root,p,u;e>t||t>=r||i>n||n>=o;)switch(u=(n<i)<<1|t<e,p=new Array(4),p[u]=s,s=p,a*=2,u){case 0:r=e+a,o=i+a;break;case 1:e=r-a,o=i+a;break;case 2:r=e+a,i=o-a;break;case 3:e=r-a,i=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=i,this._x1=r,this._y1=o,this}function It(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function Et(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function b(t,n,e,i,r){this.node=t,this.x0=n,this.y0=e,this.x1=i,this.y1=r}function Tt(t,n,e){var i,r=this._x0,o=this._y0,a,s,p,u,g=this._x1,y=this._y1,l=[],v=this._root,w,h;for(v&&l.push(new b(v,r,o,g,y)),e==null?e=1/0:(r=t-e,o=n-e,g=t+e,y=n+e,e*=e);w=l.pop();)if(!(!(v=w.node)||(a=w.x0)>g||(s=w.y0)>y||(p=w.x1)<r||(u=w.y1)<o))if(v.length){var f=(a+p)/2,c=(s+u)/2;l.push(new b(v[3],f,c,p,u),new b(v[2],a,c,f,u),new b(v[1],f,s,p,c),new b(v[0],a,s,f,c)),(h=(n>=c)<<1|t>=f)&&(w=l[l.length-1],l[l.length-1]=l[l.length-1-h],l[l.length-1-h]=w)}else{var x=t-+this._x.call(null,v.data),d=n-+this._y.call(null,v.data),_=x*x+d*d;if(_<e){var m=Math.sqrt(e=_);r=t-m,o=n-m,g=t+m,y=n+m,i=v.data}}return i}function jt(t){if(isNaN(g=+this._x.call(null,t))||isNaN(y=+this._y.call(null,t)))return this;var n,e=this._root,i,r,o,a=this._x0,s=this._y0,p=this._x1,u=this._y1,g,y,l,v,w,h,f,c;if(!e)return this;if(e.length)for(;;){if((w=g>=(l=(a+p)/2))?a=l:p=l,(h=y>=(v=(s+u)/2))?s=v:u=v,n=e,!(e=e[f=h<<1|w]))return this;if(!e.length)break;(n[f+1&3]||n[f+2&3]||n[f+3&3])&&(i=n,c=f)}for(;e.data!==t;)if(r=e,!(e=e.next))return this;return(o=e.next)&&delete e.next,r?(o?r.next=o:delete r.next,this):n?(o?n[f]=o:delete n[f],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(i?i[c]=e:this._root=e),this):(this._root=o,this)}function zt(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function Dt(){return this._root}function kt(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function St(t){var n=[],e,i=this._root,r,o,a,s,p;for(i&&n.push(new b(i,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(i=e.node,o=e.x0,a=e.y0,s=e.x1,p=e.y1)&&i.length){var u=(o+s)/2,g=(a+p)/2;(r=i[3])&&n.push(new b(r,u,g,s,p)),(r=i[2])&&n.push(new b(r,o,g,u,p)),(r=i[1])&&n.push(new b(r,u,a,s,g)),(r=i[0])&&n.push(new b(r,o,a,u,g))}return this}function qt(t){var n=[],e=[],i;for(this._root&&n.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var r=i.node;if(r.length){var o,a=i.x0,s=i.y0,p=i.x1,u=i.y1,g=(a+p)/2,y=(s+u)/2;(o=r[0])&&n.push(new b(o,a,s,g,y)),(o=r[1])&&n.push(new b(o,g,s,p,y)),(o=r[2])&&n.push(new b(o,a,y,g,u)),(o=r[3])&&n.push(new b(o,g,y,p,u))}e.push(i)}for(;i=e.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Pt(t){return t[0]}function Lt(t){return arguments.length?(this._x=t,this):this._x}function Ft(t){return t[1]}function Ot(t){return arguments.length?(this._y=t,this):this._y}function ot(t,n,e){var i=new U(n??Pt,e??Ft,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function U(t,n,e,i,r,o){this._x=t,this._y=n,this._x0=e,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function ft(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var M=ot.prototype=U.prototype;M.copy=function(){var t=new U(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,i;if(!n)return t;if(!n.length)return t._root=ft(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var r=0;r<4;++r)(i=n.source[r])&&(i.length?e.push({source:i,target:n.target[r]=new Array(4)}):n.target[r]=ft(i));return t},M.add=At,M.addAll=bt,M.cover=Mt,M.data=It,M.extent=Et,M.find=Tt,M.remove=jt,M.removeAll=zt,M.root=Dt,M.size=kt,M.visit=St,M.visitAfter=qt,M.x=Lt,M.y=Ot;function Xt(t){return t.x+t.vx}function Yt(t){return t.y+t.vy}function Ct(t){var n,e,i,r=1,o=1;typeof t!="function"&&(t=j(t==null?1:+t));function a(){for(var u,g=n.length,y,l,v,w,h,f,c=0;c<o;++c)for(y=ot(n,Xt,Yt).visitAfter(s),u=0;u<g;++u)l=n[u],h=e[l.index],f=h*h,v=l.x+l.vx,w=l.y+l.vy,y.visit(x);function x(d,_,m,I,E){var N=d.data,T=d.r,A=h+T;if(N){if(N.index>l.index){var D=v-N.x-N.vx,k=w-N.y-N.vy,z=D*D+k*k;z<A*A&&(D===0&&(D=B(i),z+=D*D),k===0&&(k=B(i),z+=k*k),z=(A-(z=Math.sqrt(z)))/z*r,l.vx+=(D*=z)*(A=(T*=T)/(f+T)),l.vy+=(k*=z)*A,N.vx-=D*(A=1-A),N.vy-=k*A)}return}return _>v+A||I<v-A||m>w+A||E<w-A}}function s(u){if(u.data)return u.r=e[u.data.index];for(var g=u.r=0;g<4;++g)u[g]&&u[g].r>u.r&&(u.r=u[g].r)}function p(){if(n){var u,g=n.length,y;for(e=new Array(g),u=0;u<g;++u)y=n[u],e[y.index]=+t(y,u,n)}}return a.initialize=function(u,g){n=u,i=g,p()},a.iterations=function(u){return arguments.length?(o=+u,a):o},a.strength=function(u){return arguments.length?(r=+u,a):r},a.radius=function(u){return arguments.length?(t=typeof u=="function"?u:j(+u),p(),a):t},a}addEventListener("message",t=>{const{nodes:n,edges:e,config:i}=t.data;Gt(n,e,i),postMessage({nodes:n,edges:e})});function Gt(t,n,e){let{roots:i,secondLevelRoots:r}=Rt(t,n);[...i,...r].forEach((a,s)=>{a.fx=a.x});const o=wt(t).force("link",mt(n).id(a=>a.id).distance(e.linkDistance).strength(e.linkStrength)).force("x",Nt(e.forceX).strength(e.forceXStrength)).force("collide",Ct(e.forceCollide));o.tick(e.tick),o.stop(),Bt(t)}function Rt(t,n){const e={},i=t.reduce((y,l)=>(y[l.id]=l,y),{}),r=n.reduce((y,l)=>{const v=l.source;return y[v]=[...y[v]||[],l],y},{});let o=t.filter(y=>y.incoming===0);o.length||(o=[t[0]]);let a=o.reduce((y,l)=>(y.push(...r[l.id]?r[l.id].map(v=>i[v.target]):[]),y),[]);const s=300,p=200,u=200;let g=0;for(const y of o){let l=[y],v=0;for(;l.length>0;){const w=[];let h=g;for(const f of l)e[f.id]||(f.x=v,f.y=h,e[f.id]=!0,h+=p,r[f.id]&&w.push(...r[f.id].map(c=>i[c.target])));l=w,v+=u,h=g}g+=s}return{roots:o,secondLevelRoots:a}}function Bt(t){const n=Wt(t);for(let e of t)e.x=e.x-n.center.x,e.y=e.y-n.center.y}function Wt(t){if(t.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const n=t.reduce((r,o)=>(o.x>r.right&&(r.right=o.x),o.x<r.left&&(r.left=o.x),o.y>r.bottom&&(r.bottom=o.y),o.y<r.top&&(r.top=o.y),r),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),e=n.top+(n.bottom-n.top)/2,i=n.left+(n.right-n.left)/2;return{...n,center:{x:i,y:e}}}return J})());

//# sourceMappingURL=2509.js.map