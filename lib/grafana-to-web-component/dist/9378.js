(this.webpackChunkGrafanaToWebComponent=this.webpackChunkGrafanaToWebComponent||[]).push([[9378],{34265:(X,L,e)=>{"use strict";e.d(L,{n:()=>r});var t=e(39953),n=e(80938);function r(a){const{children:i,instanceSettings:y}=a,c=(0,t.useMemo)(()=>({instanceSettings:y,meta:y.meta}),[y]);return t.createElement(n._.Provider,{value:c},i)}},80938:(X,L,e)=>{"use strict";e.d(L,{_:()=>n});var t=e(39953);const n=(0,t.createContext)(void 0)},8651:(X,L,e)=>{"use strict";e.d(L,{b:()=>r});var t=e(39953),n=e(80938);function r(a){const{children:i,...y}=a;return t.createElement(n._.Provider,{value:y},i)}},74948:(X,L,e)=>{"use strict";e.d(L,{v:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},67093:(X,L,e)=>{"use strict";e.d(L,{g:()=>r});var t=e(39953),n=e(80938);function r(){const a=(0,t.useContext)(n._);if(!a)throw new Error("usePluginContext must be used within a PluginContextProvider");return a}},33975:(X,L,e)=>{"use strict";e.d(L,{P:()=>a,i:()=>r});var t=e(89591),n=e(53305);class r{constructor(c,l){return this.fields=[],this.length=0,a(c,l)}}function a(y,c){const l={fields:[],length:y.length};if(!y?.length)return l;if(c){for(const f of c)l.fields.push(i(f,y.map(m=>m[f])));return l}const d=y.find(f=>f!=null);return d!=null&&(typeof d=="object"?l.fields=Object.keys(d).map(f=>i(f,y.map(m=>m[f]))):l.fields.push(i(t.M5,y))),l}function i(y,c){const l={name:y,config:{},values:c,type:t.fS.other};return l.type=(0,n.fu)(l)??t.fS.other,l}},93648:(X,L,e)=>{"use strict";e.d(L,{a:()=>r});var t=e(68016),n=e(7906);class r extends n.v{constructor(i){super(void 0,y=>new t.d({...i,buffer:y}))}}},93313:(X,L,e)=>{"use strict";e.d(L,{Ib:()=>i,Jy:()=>a,Y:()=>l,vP:()=>c});var t=e(89591),n=e(53305);const r={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function a(d,f){for(const m in d){const u=r[m];for(const h of d[m])h<f.length&&(f[h]=u)}}function i(d,f){for(let m=0;m<f.length;m++)f[m]=d[f[m]]}function y(d,f){for(const m of f)if(m!=null)return(0,n._m)(d,m);return t.fS.other}function c(d){const{schema:f,data:m}=d;if(!f||!f.fields)throw new Error("JSON needs a fields definition");const u=m?m.values.reduce((C,x)=>Math.max(C,x.length),0):0,h=f.fields.map((C,x)=>{let b=m?m.values[x]:[],g=b.length,p=C.type;g!==u&&(b.length=u,b.fill(void 0,g));let v=m?.entities?.[x];v&&a(v,b);let E=m?.enums?.[x];E&&(i(E,b),p=t.fS.string);const P=m?.nanos?.[x],S={...C,type:p??y(C.name,b),config:C.config??{},values:b,entities:v??{}};return P!=null&&(S.nanos=P),S});return{...f,fields:h,length:u}}function l(d){const f={values:[]},m=[];let u=!1;const h={refId:d.refId,meta:d.meta,name:d.name,fields:d.fields.map(C=>{const{values:x,nanos:b,state:g,display:p,...v}=C;return delete v.entities,f.values.push(x),b!=null?(m.push(b),u=!0):m.push(null),v})};return u&&(f.nanos=m),{schema:h,data:f}}},98579:(X,L,e)=>{"use strict";e.d(L,{U:()=>n});var t=e(98975);class n extends t.G{constructor(a){super(),this.data=a,this.index=0;const i={},y={};for(let c=0;c<a.fields.length;c++){const l=a.fields[c];if(!l.name)continue;y[l.name]=l;const d=()=>l.values.get(this.index);i.hasOwnProperty(l.name)||Object.defineProperty(i,l.name,{enumerable:!0,get:d}),i.hasOwnProperty(c.toString())||Object.defineProperty(i,c,{enumerable:!1,get:d})}this.obj=i,this.fields=y}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(a){if(!this.dataFrame||!this.dataFrame.fields)return;const i=this.dataFrame.fields[a];if(!(!i||!i.display))return i.display}get(a){return this.index=a,this.obj}toArray(){return new Array(this.data.length).fill(0).map((a,i)=>({...this.get(i)}))}}},76892:(X,L,e)=>{"use strict";e.d(L,{N:()=>r});var t=e(89591),n=e(53305);class r{constructor(i){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=i.fields.map((y,c)=>({...y,index:c}));for(let y=0;y<i.fields.length;y++){const c=i.fields[y];if(c.type===t.fS.other){const l=(0,n.fu)(c);l&&(c.type=l)}this.fieldByType[c.type]||(this.fieldByType[c.type]=[]),this.fieldByType[c.type].push({...c,index:y}),this.fieldByName[c.name]?console.warn("Duplicate field names in DataFrame: ",c.name):this.fieldByName[c.name]={...c,index:y}}}getFields(i){if(!i)return[...this.fields];const y=this.fieldByType[i];return y?[...y]:[]}hasFieldOfType(i){const y=this.fieldByType[i];return y&&y.length>0}getFirstFieldOfType(i,y=!1){return this.fieldByType[i]?.find(d=>y||!d.config.custom?.hidden)}hasFieldNamed(i){return!!this.fieldByName[i]}hasFieldWithNameAndType(i,y){return!!this.fieldByName[i]&&this.fieldByType[y].filter(c=>c.name===i).length>0}getFieldByName(i){return this.fieldByName[i]}getFieldsByLabel(i,y){return Object.values(this.fieldByName).filter(c=>c.labels&&c.labels[i]===y)}}},7906:(X,L,e)=>{"use strict";e.d(L,{Y:()=>y,v:()=>c});var t=e(86832),n=e(89591),r=e(53305);function a(l,d){return d.type||(d.name==="time"||d.name==="Time"?d.type=n.fS.time:d.type=(0,r.LI)(l)),d.type===n.fS.number?f=>parseFloat(f):d.type===n.fS.boolean?f=>!(f[0]==="F"||f[0]==="f"||f[0]==="0"):f=>f}var i=e(98975);const y=void 0;class c extends i.G{constructor(d,f){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=f||(m=>m??[]),d){const{name:m,refId:u,meta:h,fields:C}=d;if(m&&(this.name=m),u&&(this.refId=u),h&&(this.meta=h),C)for(const x of C)this.addField(x)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(d,f){return this.addField({name:f||"",type:(0,r.LI)(d)})}addField(d,f){let m;d.values&&(m=d.values);let u=d.type;!u&&(d.name==="time"||d.name==="Time")?u=n.fS.time:(!u&&m&&m.length&&(u=(0,r.LI)(m[0])),u||(u=n.fS.other));let h=d.name;h||(h=`Field ${this.fields.length+1}`);const C={...d,name:h,type:u,config:d.config||{},values:this.creator(m)};if(u===n.fS.other&&(u=(0,r.fu)(C),u&&(C.type=u)),this.fields.push(C),this.first=this.fields[0].values,f)for(;C.values.length<f;)C.values.push(y);else this.validate();return C}validate(){const d=this.fields.reduce((f,m)=>Math.max(f,m.values.length),0);for(const f of this.fields)for(;f.values.length!==d;)f.values.push(y)}setParser(d,f){return this.parsers||(this.parsers=new Map),this.parsers.set(d,f),f}parseValue(d,f){let m=this.parsers?.get(d);return m||(m=this.setParser(d,a(f,d))),m(f)}appendRow(d){for(let f=this.fields.length;f<d.length;f++)this.addField({name:`Field ${f+1}`,type:(0,r.LI)(d[f])});if(this.length<1)for(let f=0;f<this.fields.length;f++){const m=this.fields[f];(!m.type||m.type===n.fS.other)&&(m.type=(0,r.LI)(d[f]))}for(let f=0;f<this.fields.length;f++){const m=this.fields[f];let u=d[f];m.type!==n.fS.string&&(0,t.isString)(u)&&(u=this.parseValue(m,u)),m.values.push(u)}}push(...d){for(const f of d)this.add(f);return this.length}reverse(){for(const d of this.fields)d.values.reverse();return this}add(d){const f=d;for(const m of this.fields){let u=f[m.name];m.type!==n.fS.string&&(0,t.isString)(u)&&(u=this.parseValue(m,u)),u===void 0&&(u=y),m.values.push(u)}}set(d,f){if(d>this.length)throw new Error("Unable to set value beyond current length");const m=f||{};for(const u of this.fields)u.values[d]=m[u.name]}get(d){const f={};for(const m of this.fields)f[m.name]=m.values[d];return f}toJSON(){return(0,r.og)(this)}}},26058:(X,L,e)=>{"use strict";e.d(L,{Av:()=>m,Ko:()=>C,MB:()=>b,T0:()=>c});var t=e(89591),n=e(36822),r=e(82837),a=e(72964),i=e(53305),y=e(93313),c=(P=>(P.Append="append",P.Replace="replace",P))(c||{});const l="__name__";var d=(P=>(P[P.wide=0]="wide",P[P.labels=1]="labels",P))(d||{});const f=class{constructor(P){this.options=P,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:"replace",length:0},this.serialize=(S,M,R)=>{const I=M?Object.assign({},{...this.options,...M}):this.options,A=(0,i.Aw)(this,S),O=v(A.fields.map(o=>o.values),typeof R?.maxLength=="number"?Math.min(R.maxLength,I.maxLength):I.maxLength,this.timeFieldIndex,I.maxDelta);A.fields=A.fields.map(o=>({...o,values:o.values.slice(O)}));const N=A.fields[0]?.values?.length??0;return{...A,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:N,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:I}},this.initFromSerialized=S=>{this.name=S.name,this.refId=S.refId,this.meta=S.meta,this.length=S.length,this.labels=S.labels,this.schemaFields=S.schemaFields,this.timeFieldIndex=S.timeFieldIndex,this.pushMode=S.pushMode,this.packetInfo.length=S.packetInfo.length,this.packetInfo.number=S.packetInfo.number,this.packetInfo.action="replace",this.packetInfo.schemaChanged=!0,this.fields=S.fields.map(M=>({...M,type:M.type??t.fS.other,config:M.config??{},values:M.values??[]})),p(this.fields.map(M=>M.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:S,maxDelta:M})=>{const R=S&&this.options.maxLength<S,I=M&&this.options.maxDelta<M,A=M&&this.options.maxDelta===1/0;return!!(R||I||A)},this.resize=({maxLength:S,maxDelta:M})=>{M&&(this.options.maxDelta===1/0?this.options.maxDelta=M:this.options.maxDelta=Math.max(M,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,S??0)},this.pushNewValues=S=>{if(!S?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=S[0].length,this.packetInfo.schemaChanged=!1,this.options.action==="append"?g(this.fields.map(R=>R.values),S,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(S.forEach((R,I)=>{this.fields[I]&&(this.fields[I].values=R)}),p(this.fields.map(R=>R.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const M=this.fields?.[0]?.values.length;M!==void 0&&(this.length=M)},this.resetStateCalculations=()=>{this.fields.forEach(S=>{S.state={...S.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=S=>this.fields.map((M,R)=>S(M)?R:void 0).filter(M=>M!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(S=>{const M=S.values;return M.slice(Math.max(M.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>!!this.packetInfo.length,this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action==="replace"}push(P){const{schema:S,data:M}=P;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,S){this.pushMode=0,this.timeFieldIndex=S.fields.findIndex(O=>O.type===t.fS.time);const R=S.fields[0];this.timeFieldIndex===1&&R.type===t.fS.string&&(R.name==="labels"||R.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const I=this.pushMode===1?S.fields.slice(1):S.fields;this.refId=S.refId,S.meta&&(this.meta={...S.meta});const{displayNameFormat:A}=this.options;if(E(this.schemaFields,I)){const O=I.length;this.fields.forEach((N,o)=>{const w=I[o%O];N.config=w.config??{},N.labels=w.labels}),A&&this.fields.forEach(N=>{const o={[l]:N.name,...N.labels};N.config.displayNameFromDS=(0,a.W)(A,o)})}else{this.packetInfo.schemaChanged=!0;const O=this.pushMode===0;this.fields=I.map(N=>{const o=N.config??{};if(A){const w={[l]:N.name,...N.labels};o.displayNameFromDS=(0,a.W)(A,w)}return{config:o,name:N.name,labels:N.labels,type:N.type??t.fS.other,values:O?this.fields.find(w=>w.name===N.name&&N.type===w.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=I}if(M&&M.values.length&&M.values[0].length){let{values:R,entities:I}=M;if(I&&I.forEach((O,N)=>{O&&(0,y.Jy)(O,R[N])}),this.pushMode===1){const O=h(R);for(const w of O.keys())this.labels.has(w)||(this.packetInfo.schemaChanged=!0,this.addLabel(w));let N=Array(this.schemaFields.length).fill([]),o=[];this.labels.forEach(w=>{o.push(O.get(w)??N)}),R=(0,r.v_)(o)}if(R.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${R.length} (labels=${this.pushMode===1})`);this.fields=R.map((O,N)=>{let o=`Field ${N}`,w=(0,i.LI)(O[0]);return N===0&&w===t.fS.number&&O[0]>1600016688632&&(w=t.fS.time,o="Time"),{name:o,type:w,config:{},values:[]}})}let A=R;this.packetInfo.length=R[0].length,this.alwaysReplace||!this.length?this.packetInfo.action="replace":(this.packetInfo.action="append",A=this.fields.map(O=>O.values),g(A,R,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),A.forEach((O,N)=>{const o=this.fields[N],{state:w}=o;o.values=O,w&&(w.calcs=void 0)}),this.length=A[0].length}return{...this.packetInfo}}addLabel(P){const{displayNameFormat:S}=this.options,M=this.labels.size,R=x(P);if(M===0)this.fields.forEach((I,A)=>{if(A>0&&(I.labels=R,S)){const O={[l]:I.name,...R};I.config.displayNameFromDS=(0,a.W)(S,O)}});else for(let I=1;I<this.schemaFields.length;I++){let A=this.schemaFields[I];const O=A.config??{};if(S){const N={[l]:A.name,...R};O.displayNameFromDS=(0,a.W)(S,N)}this.fields.push({...A,config:O,labels:R,values:Array(this.length).fill(void 0)})}this.labels.add(P)}};let m=f;m.deserialize=P=>{const S=new f(P.options);return S.initFromSerialized(P),S},m.empty=P=>new f(u(P)),m.fromDataFrameJSON=(P,S)=>{const M=new f(u(S));return M.push(P),M};function u(P){return{maxLength:P?.maxLength??1e3,maxDelta:P?.maxDelta??1/0,action:P?.action??"append",displayNameFormat:P?.displayNameFormat}}function h(P){let S=new Set(P[0]),M=new Map;S.forEach(R=>{let I=Array(P.length-1).fill(null).map(()=>[]);M.set(R,I)});for(let R=0;R<P[0].length;R++){let I=M.get(P[0][R]);for(let A=1;A<P.length;A++)I[A-1].push(P[A][R])}return M}function C(P,S,M,R){let I;M=M||0,R=R||S.length-1;let A=R<=2147483647;for(;R-M>1;)I=A?M+R>>1:Math.floor((M+R)/2),S[I]<P?M=I:R=I;return P-S[M]<=S[R]-P?M:R}function x(P){if(!P.length)return{};if(P.charAt(0)==="{")return(0,n.J8)(P);const S={};return P.split(",").forEach(M=>{const[R,I]=M.trim().split("=");S[R]=I}),S}function b(P){const S=P.packetInfo;return S?.action?S:void 0}function g(P,S,M=1/0,R=0,I=1/0){for(let A=0;A<P.length;A++)for(let O=0;O<S[A].length;O++)P[A].push(S[A][O]);return p(P,M,R,I)}function p(P,S=1/0,M=0,R=1/0){const I=v(P,S,M,R);if(I)for(let A=0;A<P.length;A++)P[A].splice(0,I);return I}function v(P,S=1/0,M=0,R=1/0){if(!P[0]?.length)return 0;const I=P[0].length;let A=0;if(I>S&&(A=I-S),R!==1/0&&M>=0){const O=P[M],N=O[A],o=O[I-1];o-N>R&&(A=C(o-R,O,A))}return A}function E(P,S){if(P?.length!==S.length)return!1;for(let M=0;M<P.length;M++){const R=P[M],I=S[M];if(R.name!==I.name||R.type!==I.type)return!1}return!0}},2906:(X,L,e)=>{"use strict";e.d(L,{$q:()=>r,GV:()=>n,YP:()=>y,jC:()=>a,q2:()=>t,r7:()=>i});const t=(c,l)=>({name:c,columns:l}),n=c=>c.columns,r=(c,l)=>c.columns[l],a=(c,l,d)=>c.columns[l].values[d],i=(c,l,d)=>c.columns.map(f=>f.values[d]),y=(c,l)=>c[l]},99977:(X,L,e)=>{"use strict";e.d(L,{Ch:()=>r,Vv:()=>y,nl:()=>a});var t=e(86832),n=e.n(t);function r(c,l,d){if(c===l)return!0;if(c?.fields?.length!==l?.fields?.length||c.name!==l.name)return!1;for(let f=0;f<c.fields.length;f++){const m=c.fields[f],u=l.fields[f];if(m.type!==u.type||m.name!==u.name)return!1;if(d)continue;if(m.labels&&u.labels&&!y(m.labels,u.labels))return!1;const h=m.config,C=u.config;let x=Object.keys(h),b=Object.keys(C);if(x.length!==b.length)return!1;for(const g of x){if(!(g in C))return!1;if(g!=="interval"&&!(0,t.isEqual)(h[g],C[g]))return!1}}return!0}function a(c,l,d){if(c===l)return!0;if(c?.length!==l?.length)return!1;for(let f=0;f<c.length;f++)if(!d(c[f],l[f]))return!1;return!0}const i=(c,l)=>c===l;function y(c,l,d=i){if(c===l)return!0;const f=Object.keys(c),m=Object.keys(l);if(f.length!==m.length)return!1;for(let u of f)if(!d(c[u],l[u]))return!1;return!0}},65423:(X,L,e)=>{"use strict";e.d(L,{$q:()=>y.$q,Av:()=>m.Av,Aw:()=>i.Aw,Ch:()=>d.Ch,DP:()=>i.DP,F9:()=>i.F9,GV:()=>y.GV,Ib:()=>l.Ib,Ji:()=>i.Ji,Jy:()=>l.Jy,LI:()=>i.LI,N:()=>n.N,Pc:()=>c.P,SX:()=>i.SX,T0:()=>m.T0,US:()=>t.U,Vv:()=>d.Vv,Y:()=>l.Y,Y6:()=>i.Y6,YP:()=>y.YP,Yi:()=>a.Y,Zr:()=>i.Zr,_m:()=>i._m,a2:()=>r.a,aK:()=>i.aK,aY:()=>i.aY,at:()=>i.at,fh:()=>i.fh,fu:()=>i.fu,g0:()=>i.g0,iB:()=>c.i,jC:()=>y.jC,m$:()=>f.m$,nl:()=>d.nl,og:()=>i.og,pP:()=>f.pP,q2:()=>y.q2,r7:()=>y.r7,sV:()=>i.sV,vA:()=>a.v,vP:()=>l.vP,xI:()=>f.xI,zR:()=>i.zR});var t=e(98579),n=e(76892),r=e(93648),a=e(7906),i=e(53305),y=e(2906),c=e(33975),l=e(93313),d=e(99977),f=e(65038),m=e(26058)},53305:(X,L,e)=>{"use strict";e.d(L,{Aw:()=>N,DP:()=>b,F9:()=>K,Ji:()=>E,LI:()=>g,SX:()=>v,Y6:()=>I,Zr:()=>M,_m:()=>x,aK:()=>R,aY:()=>P,at:()=>_,fh:()=>A,fu:()=>p,g0:()=>S,og:()=>O,sV:()=>o,zR:()=>V});var t=e(86832),n=e.n(t),r=e(92403),a=e(49372),i=e(69330),y=e(89591),c=e(10694),l=e(33975),d=e(93313);function f(U){const $=U.columns.map(k=>{const{text:H,type:j,...z}=k;return{name:H?.length?H:k,config:z||{},values:[],type:j&&Object.values(y.fS).includes(j)?j:y.fS.other}});if(!(0,t.isArray)(U.rows))throw new Error(`Expected table rows to be array, got ${typeof U.rows}.`);for(const k of U.rows)for(let H=0;H<$.length;H++)$[H].values.push(k[H]);for(const k of $)if(k.type===y.fS.other){const H=p(k);H&&(k.type=H)}return{fields:$,refId:U.refId,meta:U.meta,name:U.name,length:U.rows.length}}function m(U){const $=[],k=[],H=U.datapoints||U.points;for(const z of H)k.push(z[0]),$.push(z[1]);const j=[{name:y.Ls,type:y.fS.time,config:{},values:$},{name:y.M5,type:y.fS.number,config:{unit:U.unit},values:k,labels:U.tags}];return U.title&&(j[1].config.displayNameFromDS=U.title),{name:U.target||U.name,refId:U.refId,meta:U.meta,fields:j,length:k.length}}function u(U){const $=[],k=[];for(let H=0;H<U.data.length;H++){const j=U.data[H];$.push(j[1]),k.push(j[0])}return{name:U.label,fields:[{name:U.label||y.M5,type:y.fS.number,config:{},values:$},{name:y.Ls,type:y.fS.time,config:{unit:"dateTimeAsIso"},values:k}],length:$.length}}function h(U){const $=[{name:U.target,type:y.fS.other,labels:U.tags,config:{unit:U.unit,filterable:U.filterable},values:[]}];for(const k of U.datapoints)$[0].values.push(k);return{name:U.target,refId:U.target,meta:{json:!0},fields:$,length:U.datapoints.length}}const C=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function x(U,$){return U&&(U=U.toLowerCase(),U==="date"||U==="time")?y.fS.time:g($)}function b(U){return U instanceof Date||(0,r.v9)(U)?y.fS.time:(0,t.isNumber)(U)?y.fS.number:(0,t.isString)(U)?y.fS.string:(0,t.isBoolean)(U)?y.fS.boolean:y.fS.other}function g(U){return U instanceof Date||(0,r.v9)(U)?y.fS.time:(0,t.isNumber)(U)?y.fS.number:(0,t.isString)(U)?C.test(U)?y.fS.number:U==="true"||U==="TRUE"||U==="True"||U==="false"||U==="FALSE"||U==="False"?y.fS.boolean:y.fS.string:(0,t.isBoolean)(U)?y.fS.boolean:y.fS.other}function p(U){if(U.name){const $=U.name.toLowerCase();if($==="date"||$==="time")return y.fS.time}for(let $=0;$<U.values.length;$++){const k=U.values[$];if(k!=null)return g(k)}}const v=(U,$=!1)=>{for(const k of U.fields)if(!k.type||k.type===y.fS.other||$)return{...U,fields:U.fields.map(H=>H.type&&H.type!==y.fS.other&&!$?H:{...H,type:p(H)||y.fS.other})};return U},E=U=>!!(U&&U.hasOwnProperty("columns")),P=U=>!!(U&&U.hasOwnProperty("fields"));function S(U){if("fields"in U)return"length"in U&&U.fields[0]?.values?.get?U:_(U);if(U.hasOwnProperty("type")&&U.type==="docs")return h(U);if(U.hasOwnProperty("datapoints")||U.hasOwnProperty("points"))return m(U);if(U.hasOwnProperty("data"))return U.hasOwnProperty("schema")?(0,d.vP)(U):u(U);if(U.hasOwnProperty("columns"))return f(U);if(Array.isArray(U))return(0,l.P)(U);throw console.warn("Can not convert",U),new Error("Unsupported data format")}const M=U=>{const{fields:$}=U,k=U.length,H=[];if($.length===2){const{timeField:j,timeIndex:z}=o(U);if(j){const J=$[z===0?1:0],Q=$[z];for(let Z=0;Z<k;Z++)H.push([J.values[Z],Q.values[Z]]);return{alias:U.name,target:(0,i.CZ)(J,U),datapoints:H,unit:$[0].config?$[0].config.unit:void 0,refId:U.refId,meta:U.meta}}}for(let j=0;j<k;j++){const z=[];for(let F=0;F<$.length;F++)z.push($[F].values[j]);H.push(z)}return U.meta&&U.meta.json?{alias:$[0].name||U.name,target:$[0].name||U.name,datapoints:$[0].values,filterable:$[0].config?$[0].config.filterable:void 0,type:"docs"}:{columns:$.map(j=>{const{name:z,config:F}=j;if(F){const{...J}=F;return J.text=z,J}return{text:z}}),type:"table",refId:U.refId,meta:U.meta,rows:H}};function R(U,$,k=!1){const H=U.fields[$];if(!H)return U;const j=[];for(let F=0;F<U.length;F++)j.push(F);const z=(0,a.Mo)(H,k);return j.sort(z),{...U,fields:U.fields.map(F=>{const J={...F,values:F.values.map((Z,ne)=>F.values[j[ne]])},{nanos:Q}=F;return Q!==void 0&&(J.nanos=Q.map((Z,ne)=>Q[j[ne]])),J})}}function I(U){return{...U,fields:U.fields.map($=>{const k=[...$.values];k.reverse();const H={...$,values:k},{nanos:j}=$;if(j!==void 0){const z=[...j];z.reverse(),H.nanos=z}return H})}}function A(U,$){const k=[];for(const H of U.fields)k.push(H.values[$]);return k}function O(U){return N(U)}function N(U,$){return{fields:($?U.fields.filter($):U.fields).map(j=>{let z=j.values;return{name:j.name,type:j.type,config:j.config,values:z,labels:j.labels}}),refId:U.refId,meta:U.meta,name:U.name}}const o=U=>{for(let $=0;$<U.fields.length;$++)if(U.fields[$].type===y.fS.time)return{timeField:U.fields[$],timeIndex:$};return{}};function w(U){const $=v(S(U));if($.fields&&$.fields.length)for(const k of $.fields)k.state=null;return $}function K(U){return!U||!(0,t.isArray)(U)?[]:U.map($=>w($))}function V(U,$){const{series:k,annotations:H}=U;if(U.state===c.Gu.Loading&&k.length===0)return $||($=U),{...$,state:c.Gu.Loading,request:U.request};const j=performance.now(),z=k.map(Q=>w(Q)),F=K(H),J=performance.now();return{...U,series:z,annotations:F,timings:{dataProcessingTime:J-j}}}function _(U){let $=0;const k=U.fields.map((H,j)=>{const{state:z,...F}=H;return F.name||(F.name=`Field ${j+1}`),F.config||(F.config={}),F.values?F.values.length>$&&($=F.values.length):F.values=new Array($),F.type||(F.type=p(F)??y.fS.other),F});return{...U,fields:k,length:$}}},65038:(X,L,e)=>{"use strict";e.d(L,{m$:()=>i,pP:()=>r,xI:()=>a});var t=e(89591),n=e(53305);function r(y){return y.fields.length>2?!1:!!y.fields.find(c=>c.type===t.fS.time)}function a(y){return!y.find(c=>!r(c))}function i(y){for(let c=0;c<y.length;c++){const l=(0,n.sV)(y[c]);if(l.timeField!==void 0&&l.timeIndex!==void 0)return!0}return!1}},73:(X,L,e)=>{"use strict";e.d(L,{K:()=>r,Z:()=>a});var t=e(54554);let n=()=>t.Ys;const r=i=>{n=i??n},a=i=>i?.timeZone??n()??t.Ys},77877:(X,L,e)=>{"use strict";e.r(L),e.d(L,{isMathString:()=>i,isValid:()=>c,parse:()=>y,parseDateMath:()=>l,roundToFiscal:()=>d});var t=e(86832),n=e.n(t),r=e(92403);const a=["y","M","w","d","h","m","s","Q"];function i(f){return f?!!(typeof f=="string"&&(f.substring(0,3)==="now"||f.includes("||"))):!1}function y(f,m,u,h){if(f){if(typeof f!="string")return(0,r.v9)(f)?f:(0,t.isDate)(f)?(0,r.CQ)(f):void 0;{let C,x="",b,g;return f.substring(0,3)==="now"?(C=(0,r.GY)(u),x=f.substring(3)):(b=f.indexOf("||"),b===-1?(g=f,x=""):(g=f.substring(0,b),x=f.substring(b+2)),C=(0,r.CQ)(g,r.VJ)),x.length?l(x,C,m,h):C}}}function c(f){const m=y(f);return m&&(0,r.v9)(m)?m.isValid():!1}function l(f,m,u,h=0){const C=f.replace(/\s/g,""),x=(0,r.CQ)(m);let b=0;const g=C.length;for(;b<g;){const p=C.charAt(b++);let v,E,P,S=!1;if(p==="/")v=0;else if(p==="+")v=1;else if(p==="-")v=2;else return;if(isNaN(parseInt(C.charAt(b),10)))E=1;else if(C.length===2)E=parseInt(C.charAt(b),10);else{const R=b;for(;!isNaN(parseInt(C.charAt(b),10));)if(b++,b>10)return;E=parseInt(C.substring(R,b),10)}if(v===0&&E!==1)return;P=C.charAt(b++),P==="f"&&(P=C.charAt(b++),S=!0);const M=P;if((0,t.includes)(a,M))v===0?S?d(h,x,M,u):u?x.endOf(M):x.startOf(M):v===1?x.add(E,M):v===2&&x.subtract(E,M);else return}return x}function d(f,m,u,h){switch(u){case"y":return h?d(f,m,u,!1).add(11,"M").endOf("M"):m.subtract((m.month()-f+12)%12,"M").startOf("M"),m;case"Q":return h?d(f,m,u,!1).add(2,"M").endOf("M"):m.subtract((m.month()-f+12)%3,"M").startOf("M"),m;default:return}}},5195:(X,L,e)=>{"use strict";e.d(L,{IA:()=>m,Ks:()=>c,RA:()=>y,fI:()=>u,iX:()=>l,jO:()=>f,qb:()=>d,vT:()=>i});var t=e(92570),n=e(33689),r=e(10258);const a={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function i(C,x=!0){if((0,t.Z)(C.start,C.end))return"";const b=(0,r.Z)(C);return Object.entries(b).reduce((g,[p,v])=>v&&v!==0&&!(p==="seconds"&&!x&&g)?g+`${g!==""?" ":""}${v}${a[p][0]}`:g,"")}function y(C){return C.split(" ").reduce((x,b)=>{const g=b.match(/(\d+)(.+)/),p=g?.[1],v=g?.[2];if(!(p&&v))return x;const E=Object.entries(a).find(([S,M])=>M?.includes(g[2])),P=parseInt(p,10);return E?{...x,[E[0]]:P}:x},{})}function c(C,x){return(0,n.Z)(C,x)}function l(C){const x=new Date;return c(x,C).getTime()-x.getTime()}function d(C){return!isNaN(Date.parse(C))}function f(C){for(const x of C.trim().split(" ")){const b=x.match(/(\d+)(.+)/);if(b===null||b.length!==3||!Object.entries(a).find(([p,v])=>v?.includes(b[2]))?.[0])return!1}return!0}function m(C){return h(C,["h","m","s","ms","us","\xB5s","ns"])}function u(C){return h(C,["y","M","w","d","h","m","s","ms","us","\xB5s","ns"])}function h(C,x){for(const b of C.trim().split(" ")){const g=b.match(/([0-9]*[.]?[0-9]+)(.+)/);if(g===null||g.length!==3||!x.includes(g[2]))return!1}return!0}},47330:(X,L,e)=>{"use strict";e.d(L,{Ji:()=>a,U6:()=>i,zf:()=>r});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class r{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(l){this.fullDate=l.fullDate,this.interval=l.interval,l.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=a({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=a({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=a({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=a({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=a({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=a({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=a({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(l){return`time:${l?this.fullDateMS:this.fullDate}`}}function a(c,l,d){if(y())return d??t;!l&&navigator&&(l=[...navigator.languages]);const f=new Intl.DateTimeFormat(l||void 0,c),m=f.formatToParts(new Date),h={year:"YYYY",month:"MM",day:"DD",hour:f.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return m.map(C=>h[C.type]||C.value).join("")}const i=new r,y=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},48069:(X,L,e)=>{"use strict";e.d(L,{E8:()=>c,Fm:()=>l,Hk:()=>d,dq:()=>i,lf:()=>y});var t=e(21306),n=e.n(t),r=e(73),a=e(47330);const i=(u,h)=>m(u,(0,r.Z)(h)).format(f(h)),y=(u,h)=>m(u,(0,r.Z)(h)).format(),c=(u,h)=>m(u,(0,r.Z)(h)).fromNow(),l=(u,h)=>m(u,(0,r.Z)(h)).format(`${a.U6.fullDate} z`),d=(u,h)=>m(u,(0,r.Z)(h)).format("z"),f=u=>u?.defaultWithMS?u?.format??a.U6.fullDateMS:u?.format??a.U6.fullDate,m=(u,h)=>{const C=u,x=n().tz.zone(h);if(x&&x.name)return n().utc(C).tz(x.name);switch(h){case"utc":return n().utc(C);default:return n().utc(C).local()}}},39782:(X,L,e)=>{"use strict";e.d(L,{$8:()=>a.$8,CQ:()=>r.CQ,C_:()=>r.C_,D2:()=>r.D2,E8:()=>y.E8,Fm:()=>y.Fm,GY:()=>r.GY,Hk:()=>y.Hk,IA:()=>l.IA,J:()=>c.J,Ji:()=>i.Ji,K7:()=>d.K,Kd:()=>r.Kd,Ks:()=>l.Ks,Ls:()=>r.Ls,Pr:()=>a.Pr,RA:()=>l.RA,RQ:()=>a.RQ,Rn:()=>t,U6:()=>i.U6,VJ:()=>r.VJ,Vs:()=>a.Vs,ZV:()=>a.ZV,Ze:()=>d.Z,cT:()=>n,dq:()=>y.dq,fI:()=>l.fI,iX:()=>l.iX,i_:()=>r.i_,ig:()=>r.ig,jN:()=>r.jN,jO:()=>l.jO,k4:()=>r.k4,lf:()=>y.lf,nA:()=>a.nA,np:()=>r.Ks,qb:()=>l.qb,v9:()=>r.v9,vT:()=>l.vT,zf:()=>i.zf,zh:()=>r.zh});var t=e(77877),n=e(81626),r=e(92403),a=e(36602),i=e(47330),y=e(48069),c=e(26234),l=e(5195),d=e(73)},92403:(X,L,e)=>{"use strict";e.d(L,{CQ:()=>m,C_:()=>u,D2:()=>c,GY:()=>h,Kd:()=>i,Ks:()=>f,Ls:()=>b,VJ:()=>r,i_:()=>a,ig:()=>C,jN:()=>x,k4:()=>y,v9:()=>l,zh:()=>d});var t=e(52291),n=e.n(t);const r=n().ISO_8601,a=g=>{n().locale(g)},i=()=>n().locale(),y=()=>n().localeData(),c=g=>g===null||typeof g=="string"||typeof g=="number"||g instanceof Date||Array.isArray(g)&&g.every(p=>typeof p=="string"||typeof p=="number")||l(g),l=g=>n().isMoment(g),d=(g,p)=>n().utc(g,p),f=(g,p)=>n().duration(g,p),m=(g,p)=>n()(g,p),u=g=>m(g),h=(g,p,v)=>{if(g==="utc")return d(p,v);if(g&&g!=="browser"){let E;if(typeof p=="string"&&v?E=n().tz(p,v,g):E=n().tz(p,g),l(E))return E}return m(p,v)},C=g=>n().weekdays().findIndex(p=>p.toLowerCase()===g.toLowerCase()),x=g=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(p=>p.toLowerCase()===g.toLowerCase()),b=g=>{const p="-weekStart",v=i().replace(p,""),E=g?x(g):-1;E!==-1?n().locale(v+p,{parentLocale:v,week:{dow:E}}):a(v)}},26234:(X,L,e)=>{"use strict";e.d(L,{J:()=>d});var t=e(86832),n=e.n(t),r=e(21306),a=e.n(r),i=e(73),y=e(77877),c=e(47330),l=e(92403);const d=(u,h)=>(0,l.v9)(u)?u:typeof u=="string"?f(u,h):m(u,h),f=(u,h)=>{if(u.indexOf("now")!==-1)return(0,y.isValid)(u)&&(0,y.parse)(u,h?.roundUp,h?.timeZone,h?.fiscalYearStartMonth)||a()();const C=(0,i.Z)(h),x=a().tz.zone(C),b=h?.format??c.U6.fullDate;if(x&&x.name)return a().tz(u,b,x.name);switch((0,t.lowerCase)(C)){case"utc":return a().utc(u,b);default:return a()(u,b)}},m=(u,h)=>{const C=u,x=(0,i.Z)(h),b=a().tz.zone(x);if(b&&b.name)return a().tz(C,b.name);switch((0,t.lowerCase)(x)){case"utc":return a().utc(C);default:return a()(C)}}},81626:(X,L,e)=>{"use strict";e.r(L),e.d(L,{calculateInterval:()=>P,convertRawToRange:()=>x,describeInterval:()=>R,describeTextRange:()=>m,describeTimeRange:()=>u,describeTimeRangeAbbreviation:()=>C,intervalToMs:()=>A,intervalToSeconds:()=>I,isFiscal:()=>g,isRelativeTimeRange:()=>p,isValidTimeSpan:()=>h,msRangeToTimeString:()=>E,relativeToTimeRange:()=>o,roundInterval:()=>O,secondsToHms:()=>v,timeRangeToRelative:()=>N});var t=e(86832),n=e.n(t),r=e(77877),a=e(48069),i=e(92403),y=e(26234);const c={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},l=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],d=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],f={};(0,t.each)(l,w=>{f[w.from+" to "+w.to]=w}),(0,t.each)(d,w=>{f[w.from+" to "+w.to]=w});function m(w){const K=w.indexOf("+")!==0;w.indexOf("now")===-1&&(w=(K?"now-":"now")+w);let V=f[w+" to now"];if(V)return V;K?V={from:w,to:"now",display:""}:V={from:"now",to:w,display:""};const _=/^now([-+])(\d+)(\w)/.exec(w);if(_){const U=_[3],$=parseInt(_[2],10),k=c[U];k&&(V.display=K?"Last ":"Next ",V.display+=$+" "+k.display,V.section=k.section,$>1&&(V.display+="s"))}else V.display=V.from+" to "+V.to,V.invalid=!0;return V}function u(w,K){const V=f[w.from.toString()+" to "+w.to.toString()];if(V)return V.display;const _={timeZone:K};if((0,i.v9)(w.from)&&(0,i.v9)(w.to))return(0,a.dq)(w.from,_)+" to "+(0,a.dq)(w.to,_);if((0,i.v9)(w.from)){const U=r.parse(w.to,!0,"utc");return U?(0,a.dq)(w.from,_)+" to "+(0,a.E8)(U,_):""}if((0,i.v9)(w.to)){const U=r.parse(w.from,!1,"utc");return U?(0,a.E8)(U,_)+" to "+(0,a.dq)(w.to,_):""}return w.to.toString()==="now"?m(w.from).display:w.from.toString()+" to "+w.to.toString()}const h=w=>w.indexOf("$")===0||w.indexOf("+$")===0?!0:m(w).invalid!==!0,C=(w,K)=>{if((0,i.v9)(w.from))return(0,a.Hk)(w.from,{timeZone:K});const V=r.parse(w.from,!0);return V?(0,a.Hk)(V,{timeZone:K}):""},x=(w,K,V,_)=>{const U=(0,y.J)(w.from,{roundUp:!1,timeZone:K,fiscalYearStartMonth:V,format:_}),$=(0,y.J)(w.to,{roundUp:!0,timeZone:K,fiscalYearStartMonth:V,format:_});return r.isMathString(w.from)||r.isMathString(w.to)?{from:U,to:$,raw:w}:{from:U,to:$,raw:{from:U,to:$}}};function b(w){return typeof w=="string"?w.indexOf("now")>=0:!1}function g(w){return typeof w.raw.from=="string"&&w.raw.from.indexOf("f")>0?!0:typeof w.raw.to=="string"&&w.raw.to.indexOf("f")>0}function p(w){return b(w.from)||b(w.to)}function v(w){const K=Math.floor(w/31536e3);if(K)return K+"y";const V=Math.floor(w%31536e3/86400);if(V)return V+"d";const _=Math.floor(w%31536e3%86400/3600);if(_)return _+"h";const U=Math.floor(w%31536e3%86400%3600/60);if(U)return U+"m";const $=Math.floor(w%31536e3%86400%3600%60);if($)return $+"s";const k=Math.floor(w*1e3);return k?k+"ms":"less than a millisecond"}function E(w){const K=Number((w/1e3).toFixed()),V=Math.floor(K/60/60),_=Math.floor(K/60)-V*60,U=Number((K%60).toFixed());let $=V?V+"h":"",k=_?_+"min":"",H=U?U+"sec":"";return $&&k?$=$+" ":$=$,(k||$)&&H?k=k+" ":k=k,$+k+H||"less than 1sec"}function P(w,K,V){let _=1;V&&(_=A(V));let U=O((w.to.valueOf()-w.from.valueOf())/K);return _>U&&(U=_),{intervalMs:U,interval:v(U/1e3)}}const S=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,M={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function R(w){if(Number(w))return{sec:M.s,type:"s",count:parseInt(w,10)};const K=w.match(S);if(!K||!(0,t.has)(M,K[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(M).join(", ")}"`);return{sec:M[K[2]],type:K[2],count:parseInt(K[1],10)}}function I(w){const K=R(w);return K.sec*K.count}function A(w){const K=R(w);return K.sec*1e3*K.count}function O(w){switch(!0){case w<10:return 1;case w<15:return 10;case w<35:return 20;case w<75:return 50;case w<150:return 100;case w<350:return 200;case w<750:return 500;case w<1500:return 1e3;case w<3500:return 2e3;case w<7500:return 5e3;case w<12500:return 1e4;case w<17500:return 15e3;case w<25e3:return 2e4;case w<45e3:return 3e4;case w<9e4:return 6e4;case w<21e4:return 12e4;case w<45e4:return 3e5;case w<75e4:return 6e5;case w<105e4:return 9e5;case w<15e5:return 12e5;case w<27e5:return 18e5;case w<54e5:return 36e5;case w<9e6:return 72e5;case w<162e5:return 108e5;case w<324e5:return 216e5;case w<864e5:return 432e5;case w<6048e5:return 864e5;case w<18144e5:return 6048e5;case w<36288e5:return 2592e6;default:return 31536e6}}function N(w,K=(0,i.CQ)()){const V=K.unix()-w.from.unix(),_=K.unix()-w.to.unix();return{from:V,to:_}}function o(w,K=(0,i.CQ)()){const V=(0,i.CQ)(K).subtract(w.from,"s"),_=w.to===0?(0,i.CQ)(K):(0,i.CQ)(K).subtract(w.to,"s");return{from:V,to:_,raw:{from:V,to:_}}}},36602:(X,L,e)=>{"use strict";e.d(L,{$8:()=>m,Pr:()=>d,RQ:()=>y,Vs:()=>c,ZV:()=>f,nA:()=>l});var t=e(86832),n=e.n(t),r=e(21306),a=e.n(r),i=e(73),y=(g=>(g.default="",g.localBrowserTime="browser",g.utc="utc",g))(y||{});const c=g=>{switch((0,i.Z)({timeZone:g})){case"browser":return"Local browser time";case"utc":return"UTC";default:return g}},l=g=>a().tz.zone(g),d=(g,p)=>{const v=u(g,p);return v||C(g,p)},f=(0,t.memoize)((g=!1)=>{const p=[];return g===!0?p.push("","browser","utc"):g&&p.push(...g),a().tz.names().reduce((v,E)=>{const P=b[E];return!Array.isArray(P)||P.length===0||v.push(E),v},p)}),m=(0,t.memoize)((g=!1)=>{const v=f(g).reduce((E,P)=>{const S=P.indexOf("/");if(S===-1){const R="";return E[R]=E[R]??[],E[R].push(P),E}const M=P.slice(0,S);return E[M]=E[M]??[],E[M].push(P),E},{});return Object.keys(v).map(E=>({name:E,zones:v[E]}))}),u=(g,p)=>{switch(g){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:g,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const v=(0,i.Z)(),P=v==="browser"||v==="utc"?u(v,p):C(v,p);return{countries:b[v]??[],abbreviation:"",offsetInMins:0,...P,ianaName:P?.ianaName??"",name:"Default",zone:g}}case"browser":{const v=a().tz.guess(!0),E=C(v,p);return{countries:b[v]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...E,name:"Browser Time",ianaName:E?.ianaName??"",zone:g}}default:return}},h=g=>/^(\+|\-).+/.test(g)?"":g,C=(g,p)=>{const v=a().tz.zone(g);if(v)return{name:g,ianaName:v.name,zone:g,countries:b[g]??[],abbreviation:h(v.abbr(p)),offsetInMins:v.utcOffset(p)}},x={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},b=(()=>a().tz.countries().reduce((g,p)=>a().tz.zonesForCountry(p).reduce((E,P)=>{E[P]||(E[P]=[]);const S=x[p];return S&&E[P].push({code:p,name:S}),E},g),{}))()},91395:(X,L,e)=>{"use strict";e.d(L,{F:()=>a});var t=e(67738),n=e(36497),r=e(81595);class a{constructor(){this.subscribers=new Map,this.emitter=new t.Z}publish(c){this.emitter.emit(c.type,c)}subscribe(c,l){return this.getStream(c).subscribe({next:l})}getStream(c){return new n.y(l=>{const d=f=>{l.next(f)};return this.emitter.on(c.type,d),this.subscribers.set(d,l),()=>{this.emitter.off(c.type,d),this.subscribers.delete(d)}})}newScopedBus(c,l){return new i([c],this,l)}emit(c,l){typeof c=="string"?this.emitter.emit(c,{type:c,payload:l}):this.emitter.emit(c.name,{type:c.name,payload:l})}on(c,l,d){if(l.wrapper=f=>{l(f.payload)},typeof c=="string"?this.emitter.on(c,l.wrapper):this.emitter.on(c.name,l.wrapper),d){const f=d.$on("$destroy",()=>{this.off(c,l),f()})}}off(c,l){if(typeof c=="string"){this.emitter.off(c,l.wrapper);return}this.emitter.off(c.name,l.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[c,l]of this.subscribers)l.complete(),this.subscribers.delete(c)}}class i{constructor(c,l,d){this.path=c,this.eventBus=l,this.filterConfig=d??{onlyLocal:!1}}publish(c){c.origin||(c.origin=this),this.eventBus.publish(c)}filter(c){return this.filterConfig.onlyLocal?c.origin===this:!0}getStream(c){return this.eventBus.getStream(c).pipe((0,r.h)(this.filter.bind(this)))}subscribe(c,l){return this.getStream(c).subscribe({next:l})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(c,l){return new i([...this.path,c],this,l)}}},36316:(X,L,e)=>{"use strict";e.d(L,{Ix:()=>c,Pl:()=>y,U6:()=>l,_m:()=>d,es:()=>n,n1:()=>i,v9:()=>a,xH:()=>r});var t=e(45276);class n extends t.R{}n.type="data-hover";class r extends t.m{}r.type="data-hover-clear";class a extends t.R{}a.type="data-select";class i extends t.R{}i.type="annotation-event";class y extends t.R{}y.type="dashboard-loaded";class c extends t.m{}c.type="datasource-updated-successfully";class l extends t.m{}l.type="datasource-test-succeeded";class d extends t.m{}d.type="datasource-test-failed"},71054:(X,L,e)=>{"use strict";e.d(L,{X:()=>n});const t=new Set;function n(r){if(t.has(r))throw new Error(`There is already an event defined with type '${r}'`);return t.add(r),{name:r}}},7593:(X,L,e)=>{"use strict";e.d(L,{Fb:()=>r.F,Ix:()=>a.Ix,Pl:()=>a.Pl,R_:()=>n.R,U6:()=>a.U6,Xw:()=>t.X,_m:()=>a._m,es:()=>a.es,mA:()=>n.m,n1:()=>a.n1,v9:()=>a.v9,xH:()=>a.xH});var t=e(71054),n=e(45276),r=e(91395),a=e(36316)},45276:(X,L,e)=>{"use strict";e.d(L,{R:()=>n,m:()=>t});class t{constructor(){this.type=this.__proto__.constructor.type}}class n extends t{constructor(a){super(),this.payload=a}}},24369:(X,L,e)=>{"use strict";e.d(L,{Z:()=>n});var t=e(77663);class n extends t.B{}},94123:(X,L,e)=>{"use strict";e.d(L,{U:()=>u,g:()=>C});var t=e(86832),n=e.n(t),r=e(53305),a=e(26234),i=e(92403),y=e(89591),c=e(97253),l=e(38450),d=e(83502),f=e(10124);const m={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function u(b){if(!b||(0,t.isEmpty)(b)||!b.field)return h;const g=b.field,p=g.config??{},{palette:v}=b.theme.visualization;let E=p.unit,P=E&&(m[E]||E.startsWith("time:")),S=!1;if(g.type===y.fS.time&&!P){if(E="dateTimeAsSystem",P=!0,g.values&&g.values.length>1){let w=g.values[0],K=g.values[g.values.length-1];typeof w=="string"?(w=(0,a.J)(w).unix(),K=(0,a.J)(K).unix()):(w/=1e3,K/=1e3),S=Math.abs(K-w)<60}}else g.type===y.fS.boolean?(0,d.br)(E)||(E="bool"):!E&&g.type===y.fS.string&&(E="string");const M=E?.startsWith("currency"),R=(0,d.br)(E),I=g.type===y.fS.number,O=!P&&!M&&!R&&!(E==="locale")&&I&&p.decimals==null,N=(0,d.Cf)(E||"none"),o=(0,f.NI)(g,b.theme);return(w,K)=>{const{mappings:V}=p,_=E==="string";P&&typeof w=="string"&&(w=(0,i.zh)(w).valueOf());let U=_?NaN:(0,c.I)(w),$,k,H,j,z,F;if(V&&V.length>0){const Q=(0,l.vh)(V,w);Q&&(Q.text!=null&&($=Q.text),Q.color!=null&&(j=b.theme.visualization.getColorByName(Q.color)),Q.icon!=null&&(z=Q.icon))}else if(g.type===y.fS.enum){if(w==null)return{text:"",numeric:NaN};const Q=+w;if(p&&p.type&&p.type.enum){const{text:Z,color:ne}=p.type.enum;if($=Z?Z[Q]:`${w}`,j=ne?ne[Q]:void 0,j==null){const ee=v[Q%v.length];j=b.theme.visualization.getColorByName(ee)}}}if(!Number.isNaN(U)){if($==null&&!(0,t.isBoolean)(w)){let Q;O&&K!=null?(Q=N(U,K,null,b.timeZone,S),Q.text=+Q.text+""):Q=N(U,p.decimals,null,b.timeZone,S),$=Q.text,H=Q.suffix,k=Q.prefix}if(j==null){const Q=o(U);j=Q.color,F=Q.percent}}if($==null&&(0,t.isArray)(w)&&($=(0,t.join)(w,", ")),$==null&&($=(0,t.toString)(w),$||(p.noValue?$=p.noValue:$="")),!j){const Q=o(-1/0);j=Q.color,F=Q.percent}const J={text:$,numeric:U,prefix:k,suffix:H,color:j};return z!=null&&(J.icon=z),F!=null&&(J.percent=F),J}}function h(b){return{text:(0,t.toString)(b),numeric:(0,c.I)(b)}}function C(){return b=>({text:(0,r.DP)(b)==="other"?`${JSON.stringify(b,x())}`:`${b}`,numeric:null})}const x=()=>{const b=new WeakSet;return(g,p)=>{if(typeof p=="object"&&p!==null){if(b.has(p))return;b.add(p)}return p}}},73254:(X,L,e)=>{"use strict";e.d(L,{QY:()=>C,WO:()=>m,YO:()=>x,fD:()=>h});var t=e(64714),n=e(28643),r=e.n(n),a=e(63374),i=e(91249),y=e(53470),c=e(97898),l=e(77663),d=e(10124),f=e(49231);const m=new l.B(()=>[{id:c.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:b},{id:c.S.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:g},{id:c.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(p,v)=>(E,P,S)=>{const M=S??f.yM;return v.visualization.getColorByName(M.color)}},new u({id:c.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:p=>p.visualization.palette}),new u({id:c.S.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:p=>p.visualization.palette.filter(v=>i.getContrastRatio(p.visualization.getColorByName(v),p.colors.background.primary)>=p.colors.contrastThreshold)}),new u({id:c.S.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:p=>["green","yellow","red"]}),new u({id:c.S.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:p=>["red","yellow","green"]}),new u({id:c.S.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:p=>["dark-blue","super-light-yellow","dark-red"]}),new u({id:c.S.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:p=>["super-light-yellow","dark-red"]}),new u({id:c.S.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:p=>["blue","purple"]}),new u({id:c.S.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:p=>["super-light-yellow","dark-blue"]}),new u({id:c.S.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:p=>["panel-bg","dark-blue"]}),new u({id:c.S.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:p=>["panel-bg","dark-red"]}),new u({id:c.S.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:p=>["panel-bg","dark-green"]}),new u({id:c.S.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:p=>["panel-bg","dark-purple"]})]);class u{constructor(v){this.id=v.id,this.name=v.name,this.description=v.description,this.getNamedColors=v.getColors,this.isContinuous=v.isContinuous,this.isByValue=v.isByValue,this.useSeriesName=v.useSeriesName}getColors(v){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===v?this.colorCache:(this.colorCache=this.getNamedColors(v).map(v.visualization.getColorByName),this.colorCacheTheme=v,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.hD)(this.colorCache)),this.interpolator}getCalculator(v,E){const P=this.getColors(E);return this.isByValue?this.isContinuous?(S,M,R)=>this.getInterpolator()(M):(S,M,R)=>P[M*(P.length-1)]:this.useSeriesName?(S,M,R)=>P[Math.abs(r()(v.name))%P.length]:(S,M,R)=>{const I=v.state?.seriesIndex??0;return P[I%P.length]}}}function h(p){return m.get(p.config.color?.mode??c.S.Thresholds)}function C(p){return m.get(p??c.S.Thresholds)}function x(p,v){const E=h(p);if(!E.isByValue)return{color:E.getCalculator(p,v)(0,0),threshold:f.yM,percent:1};const P=(0,d.NI)(p,v),S=p.config.color?.seriesBy??"last",R=(0,y.Kx)({field:p,reducers:[S]})[S]??0;return P(R)}function b(p,v){return()=>v.visualization.getColorByName(p.config.color?.fixedColor??c.R)}function g(p,v){return()=>{const E=v.visualization.getColorByName(p.config.color?.fixedColor??c.R),P=[E],S=6,M=10,R=35,I=35;for(let O=1;O<S;O++)P.push((0,a.Z)(E).spin(O/S*M).brighten(O/S*R).toHexString()),P.push((0,a.Z)(E).spin(-(O/S)*M).darken(O/S*I).toHexString());const A=p.state?.seriesIndex??0;return P[A%P.length]}}},49372:(X,L,e)=>{"use strict";e.d(L,{Mo:()=>i});var t=e(86832),n=e.n(t),r=e(92403),a=e(89591);const i=(g,p=!1)=>{const v=g.values;switch(g.type){case a.fS.number:return C(v,p);case a.fS.string:return x(v,p);case a.fS.boolean:return h(v,p);case a.fS.time:return typeof g.values[0]=="number"?m(v,p):u(v,p);default:return b(p)}},y=(g,p)=>{if(!g||!p)return f(g,p);if((0,t.isNumber)(g)&&(0,t.isNumber)(p))return c(g,p);if((0,r.D2)(g)&&(0,r.D2)(p)){if((0,r.CQ)(g).isBefore(p))return-1;if((0,r.CQ)(p).isBefore(g))return 1}return 0},c=(g,p)=>g-p,l=(g,p)=>!g||!p?f(g,p):g.localeCompare(p),d=(g,p)=>f(g,p),f=(g,p)=>!g&&p?1:g&&!p?-1:0,m=(g,p)=>{let v=p?-1:1;return(E,P)=>v*(g[E]-g[P])},u=(g,p)=>(v,E)=>{const P=g[v],S=g[E];return p?y(S,P):y(P,S)},h=(g,p)=>(v,E)=>{const P=g[v],S=g[E];return p?d(S,P):d(P,S)},C=(g,p)=>(v,E)=>{const P=g[v],S=g[E];return p?c(S,P):c(P,S)},x=(g,p)=>(v,E)=>{const P=g[v],S=g[E];return p?l(S,P):l(P,S)},b=g=>(p,v)=>g?c(v,p):c(p,v)},52366:(X,L,e)=>{"use strict";e.d(L,{E1:()=>h,HU:()=>m,cB:()=>b,dE:()=>x,gG:()=>P,nG:()=>g,n_:()=>u,pZ:()=>C,r5:()=>I,sg:()=>S});var t=e(86832),n=e.n(t),r=e(98579),a=e(53305),i=e(47125),y=e(53470),c=e(86981),l=e(89591),d=e(94123),f=e(69330);const m="__series.name",u="__field.displayName",h="__field.labels",C="__calc",x="__cell_",b=25,g=O=>{const{replaceVariables:N,reduceOptions:o,timeZone:w,theme:K}=O,V=o.calcs.length?o.calcs:[y.gz.last],_=[],U=(0,i.sq)(o.fields?{id:c.mi.byRegexp,options:o.fields}:{id:c.mi.numeric}),$=O.data??[],k=o.limit?o.limit:b;let H=!1;for(let j=0;j<$.length&&!H;j++){const z=$[j],{timeField:F}=(0,a.sV)(z),J=new r.U(z);for(let Q=0;Q<z.fields.length&&!H;Q++){const Z=z.fields[Q],ne=Z.getLinks;if(!U(Z,z,$))continue;let ee=Z.config;Z.state?.range&&(ee={...ee,...Z.state?.range});let de=Z.config.displayName??"";const Pe=Z.display??(0,d.U)({field:Z,theme:O.theme,timeZone:w});if(o.values)for(let ye=0;ye<Z.values.length;ye++){Z.state=v(Z,_.length);const he=A(Z,ye),me=Pe(Z.values[ye]),De=p(z,Z,ye,N,he),le=E(De,O.fieldConfig,K);if(_.push({name:"",field:ee,display:{...me,title:De,color:le??me.color},view:J,colIndex:Q,rowIndex:ye,getLinks:ne?()=>ne({valueRowIndex:ye}):()=>[],hasLinks:P(Z)}),_.length>=k){H=!0;break}}else{const ye=(0,y.Kx)({field:Z,reducers:V});for(const he of V){const me=Z.state?.scopedVars??{};me[C]={value:he,text:he};const De=Pe(ye[he]);de!==""?De.title=N(de,me):De.title=(0,f.CZ)(Z,z,$);let le;O.sparkline&&(le={y:z.fields[Q],x:F},he===y.gz.last?le.highlightIndex=le.y.values.length-1:he===y.gz.first&&(le.highlightIndex=0)),_.push({name:he,field:ee,display:De,sparkline:le,view:J,colIndex:Q,getLinks:ne?()=>ne({calculatedValue:De}):()=>[],hasLinks:P(Z)})}}}}return _.length===0&&_.push(M(O)),_};function p(O,N,o,w,K){const V=N.config.displayName;if(V)return V.indexOf(x)?w(I(V),K):w(V,K);let _=[],U=0;for(const $ of O.fields)if($!==N)if($.type===l.fS.string){const k=$.values[o]??"",H=$.display?$.display(k).text:k;H.length>0&&_.push(H)}else $.type===l.fS.number&&U++;return(U||_.length===0)&&_.push((0,f.CZ)(N,O)),_.join(" ")}function v(O,N){return{...O.state,seriesIndex:N}}function E(O,N,o){for(const w of N.overrides)if(w.matcher.id==="byName"&&w.matcher.options===O){for(const K of w.properties)if(K.id==="color"&&K.value)return o.visualization.getColorByName(K.value.fixedColor)}return null}function P(O){return O.config?.links?.length?O.config.links.length>0:!1}function S(O){let N="",o="",w="",K="";for(let V=0;V<O.length;V++){const _=O[V].display;_.text&&_.text.length>o.length&&(o=_.text),_.title&&_.title.length>N.length&&(N=_.title),_.prefix&&_.prefix.length>w.length&&(w=_.prefix),_.suffix&&_.suffix.length>K.length&&(K=_.suffix)}return{text:o,title:N,suffix:K,prefix:w}}function M(O){const N="No data",{fieldConfig:o,timeZone:w}=O,{defaults:K}=o,_=(0,d.U)({field:{type:l.fS.other,config:K},theme:O.theme,timeZone:w})(null),U=R(_,N);return{name:N,field:{...K,max:K.max??0,min:K.min??0},display:{text:U,numeric:0,color:_.color},hasLinks:!1}}function R(O,N){return!O||(0,t.isEmpty)(O.text)?N:O.text}function I(O){return O.replace(/\${__cell_(\d+)(.*?)}|\[\[__cell_(\d+)(.*?)\]\]|\$__cell_(\d+)(\S*)/g,(N,o,w,K,V,_,U)=>`\${__data.fields[${o??K??_}]${w??V??U}}`)}function A(O,N){return O.state?.scopedVars?.__dataContext?{...O.state?.scopedVars,__dataContext:{value:{...O.state?.scopedVars?.__dataContext.value,rowIndex:N}}}:O.state?.scopedVars}},52716:(X,L,e)=>{"use strict";e.d(L,{Cc:()=>O,Of:()=>A,SM:()=>p,Xu:()=>g,gb:()=>M,oB:()=>I});var t=e(86832),n=e.n(t),r=e(39953),a=e(92418),i=e(34547),y=e(53305),c=e(99977),l=e(91249),d=e(53470),f=e(47125),m=e(89591),u=e(97898),h=e(57837),C=e(24824),x=e(94123),b=e(18985);function g(o){let w=null,K=null;const V=[d.gz.min,d.gz.max];for(const _ of o)for(const U of _.fields)if(U.type===m.fS.number){const $=(0,d.Kx)({field:U,reducers:V}),k=$[d.gz.min],H=$[d.gz.max];(w===null||k<w)&&(w=k),(K===null||H>K)&&(K=H)}return{min:w,max:K,delta:(K??0)-(w??0)}}function p(o){if(!o.data)return[];const w=o.fieldConfig;if(!w)return o.data;const K=o.fieldConfigRegistry??b.N;let V=0,_;const U=[];if(w.overrides)for(const $ of w.overrides){const k=f.Ls.get($.matcher.id);k&&U.push({match:k.get($.matcher.options),properties:$.properties})}return o.data.map(($,k)=>{const H={...$};H.fields=H.fields.map(j=>({...j,config:(0,t.cloneDeep)(j.config),state:{...j.state}}));for(const j of H.fields){const z=j.config;j.state.scopedVars={__dataContext:{value:{data:o.data,frame:H,frameIndex:k,field:j}}};const F={field:j,data:o.data,dataFrameIndex:k,replaceVariables:o.replaceVariables,fieldConfigRegistry:K};P(z,w.defaults,F);for(const Z of U)if(Z.match(j,H,o.data))for(const ne of Z.properties)E(z,ne,F);let J=j.type;if(!J||J===m.fS.other){const Z=(0,y.fu)(j);Z&&(J=Z)}let Q;if(j.type===m.fS.number){!_&&(!(0,t.isNumber)(z.min)||!(0,t.isNumber)(z.max))&&(_=g(o.data));const Z=z.min??_.min,ne=z.max??_.max;Q={min:Z,max:ne,delta:ne-Z}}if(j.state.seriesIndex=V,j.state.range=Q,j.type=J,j.type!==m.fS.time&&V++,j.display=(0,x.U)({field:j,theme:o.theme,timeZone:o.timeZone}),j.config.unit!=="dateTimeFromNow"&&(j.display=v(j.display,2500)),j.getLinks=I(H,j,j.state.scopedVars,F.replaceVariables,o.timeZone,o.dataLinkPostProcessor),j.type===m.fS.nestedFrames)for(const Z of j.values)for(let ne=0;ne<Z.length;ne++)for(const ee of Z[ne].fields)ee.state={scopedVars:{__dataContext:{value:{data:Z,frame:Z[ne],frameIndex:ne,field:ee}}}},ee.getLinks=I(Z[ne],ee,ee.state.scopedVars,F.replaceVariables,o.timeZone,o.dataLinkPostProcessor)}return H})}function v(o,w=2500){const K=new Map;for(let V=-1;V<=15;V++)K.set(V,new Map);return(V,_)=>{let U=K.get(_??-1),$=U.get(V);return $||(U.size===w&&U.clear(),$=o(V,_),$.color&&($.color=(0,l.asHexString)($.color)),U.set(V,$)),$}}function E(o,w,K){const _=K.fieldConfigRegistry.getIfExists(w.id);if(!_)return;const U=_.process(w.value,K,_.settings);U==null?_.isCustom&&o.custom?(0,t.unset)(o.custom,_.path):(0,t.unset)(o,_.path):_.isCustom?(o.custom||(o.custom={}),(0,t.set)(o.custom,_.path,U)):(0,t.set)(o,_.path,U)}function P(o,w,K){o.links&&w.links&&(o.links=[...o.links,...w.links]);for(const V of K.fieldConfigRegistry.list())V.isCustom&&!o.custom&&(o.custom={}),S(V.isCustom?o.custom:o,V.isCustom?w.custom:w,V,K);M(o)}function S(o,w,K,V){const _=(0,t.get)(o,K.path);if(_==null){const U=V.fieldConfigRegistry.getIfExists(K.id);if(!U)return;if(U&&U.shouldApply(V.field)){const $=U.process((0,t.get)(w,U.path),V,U.settings);$!=null&&(0,t.set)(o,U.path,$)}}}function M(o){const{thresholds:w}=o;if(o.color?o.color.mode||delete o.color:w&&(o.color={mode:u.S.Thresholds}),o.hasOwnProperty("min")&&o.hasOwnProperty("max")&&o.min>o.max){const K=o.max;o.max=o.min,o.min=K}}const R=o=>{const{link:w,linkModel:K,dataLinkScopedVars:V,field:_,replaceVariables:U}=o;return w.internal?(0,C._)({link:w,internalLink:w.internal,scopedVars:V,field:_,range:w.internal.range,replaceVariables:U}):K},I=(o,w,K,V,_,U)=>$=>!w.config.links||w.config.links.length===0?[]:w.config.links.map(H=>{const j=N(o,w,K),z={...K,__dataContext:j},F=(Q,Z,ne)=>V(Q,{...z,...Z},ne);$.valueRowIndex!==void 0&&!isNaN($.valueRowIndex)?j.value.rowIndex=$.valueRowIndex:j.value.calculatedValue=$.calculatedValue;let J;if(H.onClick)J={href:H.url,title:V(H.title||"",z),target:H.targetBlank?"_blank":void 0,onClick:(Q,Z)=>{H.onClick({origin:Z??w,e:Q,replaceVariables:F})},origin:w};else{let Q=H.onBuildUrl?H.onBuildUrl({origin:w,replaceVariables:F}):H.url;Q&&(Q=h.u.assureBaseUrl(Q.replace(/\n/g,"")),Q=V(Q,z,i.b8.UriEncode),Q=h.u.processUrl(Q)),J={href:Q,title:V(H.title||"",z),target:H.targetBlank?"_blank":void 0,origin:w}}return(U||R)({frame:o,field:w,dataLinkScopedVars:z,replaceVariables:V,config:$,link:H,linkModel:J})}).filter(H=>!!H);function A(o){if(!o||o.length===0)return[];const w=[...o],K=(0,x.g)();for(let V=0;V<w.length;V++){const _={...w[V]},U=[..._.fields];for(let $=0;$<U.length;$++)U[$]={...U[$],display:K};w[V]={..._,fields:U}}return w}function O(o,w,K,V,_,U,$){const k=o?.fieldConfigRegistry,H=(0,r.useRef)(0),j=(0,a.Z)(K?.series);return(0,r.useMemo)(()=>{if(!k||!w||!K)return;const z=K?.series;K.structureRev==null&&z&&j&&!(0,c.nl)(z,j,c.Ch)&&H.current++;const F={structureRev:H.current,...K,series:p({data:z,fieldConfig:w,fieldConfigRegistry:k,replaceVariables:U,theme:_,timeZone:V,dataLinkPostProcessor:$})};return K.annotations&&K.annotations.length>0&&(F.annotations=p({data:K.annotations,fieldConfig:{defaults:{},overrides:[]},replaceVariables:U,theme:_,timeZone:V,dataLinkPostProcessor:$})),F},[k,w,K,j,V,_,U,$])}function N(o,w,K){return K?.__dataContext?{value:{...K.__dataContext.value}}:{value:{frame:o,field:w,data:[o]}}}},69330:(X,L,e)=>{"use strict";e.d(L,{$w:()=>y,CZ:()=>i,UY:()=>a,nf:()=>r});var t=e(89591),n=e(36822);function r(d,f){if(d.name)return d.name;const m=[];for(const u of d.fields)if(u.type!==t.fS.time){if(m.length>1)break;m.push(i(u,d))}return m.length===1?m[0]:f===void 0?d.fields.filter(u=>u.type!==t.fS.time).map(u=>i(u,d)).join(", "):d.refId?`Series (${d.refId})`:`Series (${f})`}function a(d){d.forEach(f=>{f.fields.forEach(m=>{i(m,f,d)})})}function i(d,f,m){const u=d.state?.displayName,h=!!(m&&m.length>1);if(u&&h===d.state?.multipleFrames)return u;const C=y(d,f,m);return d.state=d.state||{},d.state.displayName=C,d.state.multipleFrames=h,C}function y(d,f,m){const u=d.config?.displayName&&d.config?.displayName.length,h=!!f?.meta?.timeCompare?.isTimeShiftQuery;let C=u?d.config.displayName:d.name;if(u)return h?`${C} (comparison)`:C;if(f&&d.config?.displayNameFromDS)return h?`${d.config.displayNameFromDS} (comparison)`:d.config.displayNameFromDS;if(d.type===t.fS.time&&!d.labels)return C??t.Ls;let x=[],b=!1;if(m&&m.length>1){for(let v=1;v<m.length;v++)if(m[v].name!==m[v-1].name){b=!0;break}}let g=!1,p=!1;if(b&&f?.name&&(x.push(f.name),g=!0),d.name&&d.name!==t.M5&&x.push(d.name),d.labels&&f){let v=l(m??[f]);if(v)d.labels[v]&&(x.push(d.labels[v]),p=!0);else{let E=(0,n.aA)(d.labels);E&&(x.push(E),p=!0)}}return f&&!g&&!p&&d.name===t.M5&&f.name&&f.name.length>0&&(x.push(f.name),g=!0),x.length?C=x.join(" "):d.name?C=d.name:C=t.M5,C===d.name&&(C=c(d,f)),h&&(C=`${C} (comparison)`),C}function c(d,f){let m=0,u=!1;if(f)for(let h=0;h<f.fields.length;h++){const C=f.fields[h];if(d===C){if(u=!0,m>0){m++;break}}else if(d.name===C.name&&(m++,u))break}return m?`${d.name} ${m}`:d.name}function l(d){let f=null;for(let m=0;m<d.length;m++){const u=d[m];for(const h of u.fields)if(h.labels){for(const C in h.labels)if(f===null)f=C;else if(C!==f)return null}}return f}},86127:(X,L,e)=>{"use strict";e.d(L,{z:()=>i});var t=e(86832),n=e.n(t),r=e(83502),a=e(94123);function i(y){return new Proxy({},{get:(c,l)=>{let d=y.frame.fields.find(h=>l===h.name);if(!d){const h=(0,t.toNumber)(l);d=y.frame.fields[h]}if(d||(d=y.frame.fields.find(h=>l===h.config.displayName)),d||(d=y.frame.fields.find(h=>h.labels?l===h.labels.name:!1)),!d)return;const f=d.display??(0,a.U)(),m=d.values[y.rowIndex],u=f(m);return u.toString=()=>(0,r.zc)(u),u}})}},32811:(X,L,e)=>{"use strict";e.d(L,{AE:()=>a.AE,CZ:()=>f.CZ,Cc:()=>l.Cc,E1:()=>t.E1,HU:()=>t.HU,N6:()=>r.N,NI:()=>m.NI,NN:()=>a.NN,Of:()=>l.Of,Oh:()=>a.Oh,QY:()=>i.QY,SM:()=>l.SM,SO:()=>r.S,UY:()=>f.UY,U_:()=>n.U,VB:()=>a.VB,W0:()=>a.W0,W4:()=>a.W4,WO:()=>i.WO,YO:()=>i.YO,ZD:()=>y.Z,ZN:()=>a.ZN,bP:()=>c.bP,cB:()=>t.cB,dE:()=>t.dE,dz:()=>m.dz,fD:()=>i.fD,gE:()=>n.g,gG:()=>t.gG,gb:()=>l.gb,kG:()=>a.kG,m1:()=>c.m1,nG:()=>t.nG,n_:()=>t.n_,nf:()=>f.nf,op:()=>a.op,pZ:()=>t.pZ,r5:()=>t.r5,sg:()=>t.sg,uj:()=>a.uj,xD:()=>m.xD,zv:()=>d.z});var t=e(52366),n=e(94123),r=e(18985),a=e(63671),i=e(73254),y=e(24369),c=e(49231),l=e(52716),d=e(86127),f=e(69330),m=e(10124)},63671:(X,L,e)=>{"use strict";e.d(L,{AE:()=>y,NN:()=>a,Oh:()=>n,VB:()=>d,W0:()=>r,W4:()=>f,ZN:()=>l,kG:()=>t,op:()=>c,uj:()=>i});const t=(m,u,h)=>m,n=(m,u,h)=>{if(m!=null)return parseFloat(m)},r=(m,u,h)=>(delete u.field?.state?.displayName,c(m,u,h)),a=(m,u,h)=>m,i=(m,u,h)=>m,y=(m,u,h)=>m,c=(m,u,h)=>m==null?m:h&&h.expandTemplateVars&&u.replaceVariables?u.replaceVariables(m,u.field.state.scopedVars):`${m}`,l=(m,u,h)=>m,d=(m,u,h)=>m,f=(m,u,h)=>m},10124:(X,L,e)=>{"use strict";e.d(L,{NI:()=>c,dz:()=>d,xD:()=>f});var t=e(86832),n=e.n(t),r=e(53470),a=e(89591),i=e(73254),y=e(49231);function c(m,u){if(m.type===a.fS.boolean)return l(m,u);const C=(0,i.fD)(m).getCalculator(m,u),x=m.state?.range??d(m);return b=>{let g=0;b!==-1/0&&(g=(b-x.min)/x.delta,Number.isNaN(g)&&(g=0));const p=(0,y.pD)(m,b,g);return{percent:g,threshold:p,color:C(b,g,p)}}}function l(m,u){const h={color:u.visualization.getColorByName("green"),percent:1,threshold:void 0},C={color:u.visualization.getColorByName("red"),percent:0,threshold:void 0},x=(0,i.fD)(m);if(x.isContinuous&&x.getColors){const b=x.getColors(u);h.color=b[b.length-1],C.color=b[0]}return b=>b?h:C}function d(m){if(m.type!==a.fS.number)return{min:0,max:100,delta:100};let u=m.config.min,h=m.config.max;if(!(0,t.isNumber)(u)||!(0,t.isNumber)(h))if(m.values&&m.values.length){const C=(0,r.Kx)({field:m,reducers:[r.gz.min,r.gz.max]});(0,t.isNumber)(u)||(u=C[r.gz.min]),(0,t.isNumber)(h)||(h=C[r.gz.max])}else u=0,h=100;return{min:u,max:h,delta:h-u}}function f(m,u){const{config:h}=m;let{min:C,max:x}=h;return(0,t.isNumber)(C)&&(0,t.isNumber)(x)?h:u||!m.state?.range?{...h,...d(m)}:{...h,...m.state.range}}},18985:(X,L,e)=>{"use strict";e.d(L,{N:()=>r,S:()=>a});var t=e(77663),n=e(24369);const r=new n.Z,a=new t.B},49231:(X,L,e)=>{"use strict";e.d(L,{bP:()=>y,m1:()=>a,pD:()=>i,yM:()=>r});var t=e(97898),n=e(60695);const r={value:0,color:t.R};function a(c,l){if(!l||l.length===0)return r;let d=l[0];for(const f of l)if(c>=f.value)d=f;else break;return d}function i(c,l,d){const{thresholds:f}=c.config;return f?.mode===n.H.Percentage?a(d*100,f?.steps):a(l,f?.steps)}function y(c){return c.sort((l,d)=>l.value-d.value)}},12779:(X,L,e)=>{"use strict";e.d(L,{q:()=>t.q1});var t=e(34547)},9744:(X,L,e)=>{"use strict";e.r(L),e.d(L,{AnnotationChangeEvent:()=>m.n1,AppendedVectors:()=>a.l$,ArrayDataFrame:()=>i.iB,ArrayVector:()=>a.Gt,AsNumberVector:()=>a.sq,BinaryOperationID:()=>t.LH,BinaryOperationVector:()=>a.rM,BusEventBase:()=>m.mA,BusEventWithPayload:()=>m.R_,ByNamesMatcherMode:()=>y.Ys,CSVHeaderStyle:()=>t.x5,CSVReader:()=>t.QM,CircularDataFrame:()=>i.a2,CircularVector:()=>a.dV,ConstantVector:()=>a.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>f.cB,DashboardLoadedEvent:()=>m.Pl,DataFrameView:()=>i.US,DataHoverClearEvent:()=>m.xH,DataHoverEvent:()=>m.es,DataLinkBuiltInVars:()=>t.WC,DataSelectEvent:()=>m.v9,DataSourcePluginContextProvider:()=>E.n,DataSourceTestFailed:()=>m._m,DataSourceTestSucceeded:()=>m.U6,DataSourceUpdatedSuccessfully:()=>m.Ix,DataTransformerID:()=>y.Wk,DocsId:()=>t.xV,EventBusSrv:()=>m.Fb,FieldCache:()=>i.N,FieldConfigEditorBuilder:()=>t.vo,FieldConfigOptionsRegistry:()=>f.ZD,FieldMatcherID:()=>y.mi,FormattedVector:()=>a.$Y,FrameGeometrySourceMode:()=>C.q,FrameMatcherID:()=>y.E4,ISO_8601:()=>c.VJ,IndexVector:()=>a.rm,InternalTimeZones:()=>c.RQ,LayoutModes:()=>x.l,LegacyMappingType:()=>t.HU,MISSING_VALUE:()=>i.Yi,MatcherID:()=>y.Ff,MutableDataFrame:()=>i.vA,NodeGraphDataFrameFieldNames:()=>t.zG,PanelOptionsEditorBuilder:()=>t.rt,PanelPlugin:()=>b.c,PluginContextProvider:()=>v.b,ReducerID:()=>y.gz,Registry:()=>t.Bz,SortedVector:()=>a.oH,StreamingDataFrame:()=>i.Av,StreamingFrameAction:()=>i.T0,SystemDateFormatsState:()=>c.zf,TransformerCategory:()=>y.wf,VAR_CALC:()=>f.pZ,VAR_CELL_PREFIX:()=>f.dE,VAR_FIELD_LABELS:()=>f.E1,VAR_FIELD_NAME:()=>f.n_,VAR_SERIES_NAME:()=>f.HU,ValueMatcherID:()=>y.mE,addDurationToDate:()=>c.Ks,anySeriesWithTimeField:()=>i.m$,anyToNumber:()=>t.IX,applyFieldOverrides:()=>f.SM,applyRawFieldOverrides:()=>f.Of,arrayToDataFrame:()=>i.Pc,arrayUtils:()=>t.sq,binaryOperators:()=>t.nk,booleanOverrideProcessor:()=>f.W4,booleanValueFormatter:()=>d.IR,buildHistogram:()=>y.gY,cacheFieldDisplayNames:()=>f.UY,classicColors:()=>t.ZC,colorManipulator:()=>u.r8,compareArrayValues:()=>i.nl,compareDataFrameStructures:()=>i.Ch,containsSearchFilter:()=>t.bf,convertOldAngularValueMappings:()=>t.Jb,createDataFrame:()=>i.at,createDimension:()=>i.q2,createFieldConfigRegistry:()=>p.j,createTheme:()=>u.jG,dataFrameFromJSON:()=>i.vP,dataFrameToJSON:()=>i.Y,dataLinksOverrideProcessor:()=>f.NN,dateMath:()=>c.Rn,dateTime:()=>c.CQ,dateTimeAsMoment:()=>c.C_,dateTimeForTimeZone:()=>c.GY,dateTimeFormat:()=>c.dq,dateTimeFormatISO:()=>c.lf,dateTimeFormatTimeAgo:()=>c.E8,dateTimeFormatWithAbbrevation:()=>c.Fm,dateTimeParse:()=>c.J,decodeFieldValueEntities:()=>i.Jy,decodeFieldValueEnums:()=>i.Ib,deprecationWarning:()=>t.d9,displayNameOverrideProcessor:()=>f.W0,doStandardCalcs:()=>y.uP,durationToMilliseconds:()=>c.iX,ensureTimeField:()=>y.J_,escapeRegex:()=>l.yI,escapeStringForRegex:()=>l.GE,eventFactory:()=>m.Xw,fieldColorModeRegistry:()=>f.WO,fieldMatchers:()=>y.Ls,fieldReducers:()=>y.TB,filterFieldConfigOverrides:()=>g.aS,findCommonLabels:()=>t.FT,findHighlightChunksInText:()=>l.Xt,findMatchesInText:()=>l.lu,findUniqueLabels:()=>t.IU,fixCellTemplateExpressions:()=>f.r5,formatLabels:()=>t.aA,formattedValueToString:()=>d.zc,frameMatchers:()=>y.Ac,getActiveThreshold:()=>f.m1,getAllValuesFromDimension:()=>i.r7,getBuiltInThemes:()=>u.d5,getColumnFromDimension:()=>i.$q,getColumnsFromDimension:()=>i.GV,getDataFrameRow:()=>i.fh,getDataSourceRef:()=>t.iU,getDataSourceUID:()=>t.BT,getDimensionByName:()=>i.YP,getDisplayProcessor:()=>f.U_,getDisplayValueAlignmentFactors:()=>f.sg,getFieldColorMode:()=>f.QY,getFieldColorModeForField:()=>f.fD,getFieldConfigWithMinMax:()=>f.xD,getFieldDisplayName:()=>f.CZ,getFieldDisplayValues:()=>f.nG,getFieldDisplayValuesProxy:()=>f.zv,getFieldMatcher:()=>y.sq,getFieldSeriesColor:()=>f.YO,getFieldTypeFromValue:()=>i.DP,getFlotPairs:()=>t.k8,getFlotPairsConstant:()=>t.HE,getFrameDisplayName:()=>f.nf,getFrameMatchers:()=>y.b9,getHistogramFields:()=>y.qr,getLinksSupplier:()=>M.oB,getLocale:()=>c.Kd,getLocaleData:()=>c.k4,getMinMaxAndDelta:()=>f.dz,getPanelOptionsWithDefaults:()=>g.d4,getProcessedDataFrames:()=>i.F9,getRawDisplayProcessor:()=>f.gE,getScaleCalculator:()=>f.NI,getSearchFilterScopedVar:()=>t._6,getSeriesTimeStep:()=>t.e4,getThemeById:()=>u.jY,getTimeField:()=>i.sV,getTimeZone:()=>c.Ze,getTimeZoneGroups:()=>c.$8,getTimeZoneInfo:()=>c.Pr,getTimeZones:()=>c.ZV,getValueFormat:()=>d.Cf,getValueFormats:()=>d.QW,getValueFormatterIndex:()=>d.Td,getValueFromDimension:()=>i.jC,getValueMatcher:()=>y.IG,getWeekdayIndex:()=>c.ig,getWeekdayIndexByEnglishName:()=>c.jN,getZone:()=>c.nA,guessDecimals:()=>t.dP,guessFieldTypeForField:()=>i.fu,guessFieldTypeFromNameAndValue:()=>i._m,guessFieldTypeFromValue:()=>i.LI,guessFieldTypes:()=>i.SX,hasLinks:()=>f.gG,hasMsResolution:()=>t.fp,histogramBucketSizes:()=>y.Zi,histogramFieldInfo:()=>y.py,histogramFieldsToFrame:()=>y.zM,histogramFrameBucketMaxFieldName:()=>y.cO,histogramFrameBucketMinFieldName:()=>y.wL,histogramTransformer:()=>y.Op,identityOverrideProcessor:()=>f.kG,incrRound:()=>y.Jz,incrRoundDn:()=>y.mB,incrRoundUp:()=>y.UO,intervalToAbbreviatedDurationString:()=>c.vT,isBooleanUnit:()=>d.br,isCustomFieldProp:()=>g.Lc,isDataFrame:()=>i.aY,isDataSourcePluginContext:()=>S.v,isDataSourceRef:()=>t.cv,isDateTime:()=>c.v9,isDateTimeInput:()=>c.D2,isEmptyObject:()=>t.Qr,isHistogramFrameBucketMaxFieldName:()=>y.kl,isHistogramFrameBucketMinFieldName:()=>y.Ok,isLikelyAscendingVector:()=>y.lP,isStandardFieldProp:()=>g._k,isTableData:()=>i.Ji,isTimeSeriesFrame:()=>i.pP,isTimeSeriesFrames:()=>i.xI,isValidDate:()=>c.qb,isValidDuration:()=>c.jO,isValidGoDuration:()=>c.IA,isValidGrafanaDuration:()=>c.fI,localTimeFormat:()=>c.Ji,locale:()=>d.SP,locationUtil:()=>t.uT,makeClassES5Compatible:()=>t.s2,mapInternalLinkToExplore:()=>t._N,matchAllLabels:()=>t.VS,monacoLanguageRegistry:()=>h.F,numberOverrideProcessor:()=>f.Oh,objRemoveUndefined:()=>t.Hh,onUpdateDatasourceJsonDataOption:()=>t._R,onUpdateDatasourceJsonDataOptionChecked:()=>t.hz,onUpdateDatasourceJsonDataOptionSelect:()=>t.nx,onUpdateDatasourceOption:()=>t.z_,onUpdateDatasourceResetOption:()=>t.HD,onUpdateDatasourceSecureJsonDataOption:()=>t.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.TX,outerJoinDataFrames:()=>y.JP,parseDuration:()=>c.RA,parseFlags:()=>l.TL,parseLabels:()=>t.J8,preProcessPanelData:()=>i.zR,rangeUtil:()=>c.cT,readCSV:()=>t.uP,reduceField:()=>y.Kx,renderLegendFormat:()=>t.Wn,renderMarkdown:()=>l.ap,renderTextPanelMarkdown:()=>l.xH,restoreCustomOverrideRules:()=>g.__,reverseDataFrame:()=>i.Y6,roundDecimals:()=>t.O9,scaledUnits:()=>d.Qj,selectOverrideProcessor:()=>f.AE,serializeStateToUrlParam:()=>t.S,setLocale:()=>c.i_,setTimeZoneResolver:()=>c.K7,setWeekStart:()=>c.Ls,shallowCompare:()=>i.Vv,simpleCountUnit:()=>d.SR,sortDataFrame:()=>i.aK,sortThresholds:()=>f.bP,standardEditorsRegistry:()=>f.SO,standardFieldConfigEditorRegistry:()=>f.N6,standardTransformers:()=>y.YR,standardTransformersRegistry:()=>y.Ze,stringFormater:()=>d.vb,stringOverrideProcessor:()=>f.op,stringStartsAsRegEx:()=>l.oH,stringToJsRegex:()=>l.jO,stringToMs:()=>l.e0,systemDateFormats:()=>c.U6,textUtil:()=>l.QX,thresholdsOverrideProcessor:()=>f.ZN,timeZoneAbbrevation:()=>c.Hk,timeZoneFormatUserFriendly:()=>c.Vs,toCSV:()=>t.MJ,toDataFrame:()=>i.g0,toDataFrameDTO:()=>i.og,toDuration:()=>c.np,toFilteredDataFrameDTO:()=>i.Aw,toFixed:()=>d.FH,toFixedScaled:()=>d.bn,toFixedUnit:()=>d.q2,toFloatOrUndefined:()=>l.dz,toIntegerOrUndefined:()=>l.By,toLegacyResponseData:()=>i.Zr,toNumberString:()=>l.PF,toOption:()=>t.Er,toPascalCase:()=>l.Mh,toURLRange:()=>t.R_,toUtc:()=>c.zh,transformDataFrame:()=>y.Hz,unEscapeStringFromRegex:()=>l.x6,unitOverrideProcessor:()=>f.VB,updateDatasourcePluginJsonDataOption:()=>t.tp,updateDatasourcePluginOption:()=>t.fd,updateDatasourcePluginResetOption:()=>t.Mf,updateDatasourcePluginSecureJsonDataOption:()=>t.uw,urlUtil:()=>t.Cj,useFieldOverrides:()=>f.Cc,usePluginContext:()=>P.g,validateFieldConfig:()=>f.gb,valueMappingsOverrideProcessor:()=>f.uj,valueMatchers:()=>y.U8,vectorator:()=>a.sD,withLoadingIndicator:()=>t.xc});var t=e(60061),n=e(92199),r={};for(const R in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","anyToNumber","arrayUtils","binaryOperators","classicColors","containsSearchFilter","convertOldAngularValueMappings","deprecationWarning","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getSearchFilterScopedVar","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","isEmptyObject","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","renderLegendFormat","roundDecimals","serializeStateToUrlParam","toCSV","toOption","toURLRange","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(R)<0&&(r[R]=()=>n[R]);e.d(L,r);var a=e(67757),i=e(65423),y=e(63950),c=e(39782),l=e(28425),d=e(75172),f=e(32811),m=e(7593),u=e(30582),h=e(93464),C=e(12779),x=e(94562),b=e(40530),g=e(58103),p=e(51761),v=e(8651),E=e(34265),P=e(67093),S=e(74948),M=e(52716)},93464:(X,L,e)=>{"use strict";e.d(L,{F:()=>t.F});var t=e(23619)},23619:(X,L,e)=>{"use strict";e.d(L,{F:()=>n});var t=e(77663);const n=new t.B},40530:(X,L,e)=>{"use strict";e.d(L,{c:()=>l});var t=e(86832),n=e.n(t),r=e(24369),a=e(30670),i=e(14255),y=e(98458),c=e(51761);class l extends a.Sg{constructor(f){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new r.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=f}get defaults(){let f=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const m=new y.rt;this.optionsSupplier(m,{data:[]});for(const u of m.getItems())u.defaultValue!=null&&(0,t.set)(f,u.path,u.defaultValue)}return f}get fieldConfigDefaults(){const f=this._fieldConfigDefaults.defaults;f.custom={};for(const m of this.fieldConfigRegistry.list())m.defaultValue!==void 0&&(0,t.set)(f,m.id,m.defaultValue);return{defaults:{...f},overrides:this._fieldConfigDefaults.overrides}}setDefaults(f){return(0,i.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=f,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(f){return(0,i.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=f,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(f){return this.onPanelMigration=f,this}setPanelChangeHandler(f){return this.onPanelTypeChanged=f,this}setPanelOptions(f){return this.optionsSupplier=f,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(f){return this.dataSupport={...this.dataSupport,...f},this}useFieldConfig(f={}){return this._initConfigRegistry=()=>(0,c.j)(f,this.meta.name),this}setSuggestionsSupplier(f){return this.suggestionsSupplier=f,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(f){return this.meta.id===f}}},58103:(X,L,e)=>{"use strict";e.d(L,{Lc:()=>C,__:()=>h,_k:()=>x,aS:()=>d,d4:()=>c});var t=e(86832),n=e.n(t),r=e(73254),a=e(97898),i=e(82909),y=e(60695);function c({plugin:b,currentOptions:g,currentFieldConfig:p,isAfterPluginChange:v}){const E=(0,t.mergeWith)({},b.defaults,g||{},(M,R)=>{if((0,t.isArray)(R))return R}),P=l(p,b),S=m(b,P,v);return{options:E,fieldConfig:S}}function l(b,g){const p=g.fieldConfigDefaults,v={defaults:(0,t.mergeWith)({},p.defaults,b?b.defaults:{},(E,P)=>{if((0,t.isArray)(P))return P}),overrides:b?.overrides??[]};f(v.defaults,"",g.fieldConfigRegistry),v.defaults.thresholds&&u(v.defaults.thresholds),v.overrides=d(v.overrides,E=>g.fieldConfigRegistry.getIfExists(E.id)!==void 0);for(const E of v.overrides)for(const P of E.properties)P.id==="thresholds"&&u(P.value);return v}function d(b,g){return b.map(p=>{const v=p.properties.filter(g);return{...p,properties:v}}).filter(p=>p.properties.length>0)}function f(b,g,p){let v=!1;for(const E of Object.keys(b)){const P=b[E],S=`${g}${E}`,M=!!p.getIfExists(S);if(M){v=!0;continue}(0,t.isArray)(P)||!(0,t.isObject)(P)?M||(0,t.unset)(b,E):f(P,`${S}.`,p)||(0,t.unset)(b,E)}return v}function m(b,g,p){if(!p)return g;const v=b.fieldConfigRegistry.getIfExists(i.qb.Color);if(v&&v.settings){const E=v.settings,P=r.WO.getIfExists(g.defaults.color?.mode);if(!E.byValueSupport&&(!P||P.isByValue))return g.defaults.color={mode:a.S.PaletteClassic},g;if(E.byValueSupport&&E.preferThresholdsMode&&P?.id!==a.S.Fixed&&(!P||!P.isByValue))return g.defaults.color={mode:a.S.Thresholds},g;if(E.bySeriesSupport&&P?.isByValue)return g.defaults.color={mode:a.S.PaletteClassic},g}return g}function u(b){b.mode||(b.mode=y.H.Absolute),b.steps?b.steps.length&&(b.steps[0].value=-1/0):b.steps=[]}function h(b,g){const p={defaults:{...b.defaults,custom:g.defaults.custom},overrides:[...b.overrides]};for(const v of g.overrides)for(const E of v.properties)if(C(E)){const P=p.overrides.find(S=>(0,t.isEqual)(S.matcher,v.matcher));P?P!==v&&P.properties.push(E):p.overrides.push(v)}return p}function C(b){return b.id.startsWith("custom.")}function x(b){return!C(b)}},51761:(X,L,e)=>{"use strict";e.d(L,{j:()=>a});var t=e(24369),n=e(18985),r=e(98458);function a(y={},c){const l=new t.Z,d=n.N.list(),f={};if(y.useCustomConfig){const m=new r.vo;y.useCustomConfig(m);for(const u of m.getRegistry().list())if(u.isCustom=!0,u.id="custom."+u.id,i(u,d)){const h=f[u.category[0]]??[];h.push(u),f[u.category[0]]=h}else l.register(u)}for(let m of d)if(!(y.disableStandardOptions&&y.disableStandardOptions.indexOf(m.id)>-1)){if(y.standardOptions){const u=y.standardOptions[m.id]?.hideFromDefaults,h=y.standardOptions[m.id]?.defaultValue,C=y.standardOptions[m.id]?.settings;u&&(m={...m,hideFromDefaults:u}),h&&(m={...m,defaultValue:h}),C&&(m={...m,settings:m.settings?{...m.settings,...C}:C})}if(l.register(m),m.category&&f[m.category[0]])for(let u of f[m.category[0]])l.register(u)}for(const m of l.list())if(m.path.indexOf("[")>0)throw new Error(`[${c}] Field config paths do not support arrays: ${m.id}`);return l}function i(y,c){return!!c.find(l=>y.category&&l.category&&y.category[0]===l.category[0])}},28425:(X,L,e)=>{"use strict";e.d(L,{By:()=>t.By,GE:()=>t.GE,Mh:()=>t.Mh,PF:()=>t.PF,QX:()=>i,TL:()=>r.TL,Xt:()=>r.Xt,ap:()=>n.a,dz:()=>t.dz,e0:()=>t.e0,jO:()=>t.jO,lu:()=>r.lu,oH:()=>t.oH,x6:()=>t.x6,xH:()=>n.x,yI:()=>t.yI});var t=e(55705),n=e(52807),r=e(68495),a=e(69159);const i={escapeHtml:a.Xv,hasAnsiCodes:a.oT,sanitize:a.Nw,sanitizeTextPanelContent:a.he,sanitizeUrl:a.Nm,sanitizeSVGContent:a.Is,sanitizeTrustedTypes:a.cd,sanitizeTrustedTypesRSS:a.pQ}},52807:(X,L,e)=>{"use strict";e.d(L,{a:()=>y,x:()=>c});var t=e(45300),n=e(38336),r=e(69159);let a=!1;const i={headerIds:!1,pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function y(l,d){a||(t.TU.use((0,n.d)()),t.TU.setOptions({...i}),a=!0);let f;d?.breaks&&(f={...i,breaks:!0});const m=(0,t.TU)(l||"",f);return d?.noSanitize?m:(0,r.he)(m)}function c(l,d){a||(t.TU.use((0,n.d)()),t.TU.setOptions({...i}),a=!0);const f=(0,t.TU)(l||"");return d?.noSanitize?f:(0,r.he)(f)}},69159:(X,L,e)=>{"use strict";e.d(L,{Is:()=>u,Nm:()=>h,Nw:()=>l,Xv:()=>x,cd:()=>f,he:()=>m,oT:()=>C,pQ:()=>d});var t=e(99568),n=e(97639),r=e.n(n),a=e(4664),i=e.n(a);const y=Object.keys(a.whiteList).reduce((b,g)=>(b[g]=a.whiteList[g]?.concat(["class","style"]),b),{}),c=new a.FilterXSS({whiteList:y,css:{whiteList:{...a.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function l(b){try{return r().sanitize(b,{USE_PROFILES:{html:!0},FORBID_TAGS:["form","input"]})}catch{return console.error("String could not be sanitized",b),x(b)}}function d(b){return r().sanitize(b,{RETURN_TRUSTED_TYPE:!0,ADD_ATTR:["xmlns:atom","version","property","content"],ADD_TAGS:["rss","meta","channel","title","link","description","atom:link","item","pubDate","guid"],PARSER_MEDIA_TYPE:"application/xhtml+xml"})}function f(b){return r().sanitize(b,{RETURN_TRUSTED_TYPE:!0})}function m(b){try{return c.process(b)}catch{return console.error("String could not be sanitized",b),"Text string could not be sanitized"}}function u(b){return r().sanitize(b,{USE_PROFILES:{svg:!0,svgFilters:!0}})}function h(b){return(0,t.N)(b)}function C(b){return/\u001b\[\d{1,2}m/.test(b)}function x(b){return String(b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},55705:(X,L,e)=>{"use strict";e.d(L,{By:()=>h,GE:()=>c,Mh:()=>x,PF:()=>u,dz:()=>C,e0:()=>m,jO:()=>f,oH:()=>d,x6:()=>l,yI:()=>b});var t=e(86832),n=e.n(t);const a="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",i=new RegExp(a,"g"),y=new RegExp("(\\\\)"+a,"g");function c(g){return g&&g.replace(i,"\\$1")}function l(g){return g&&g.replace(y,"$2")}function d(g){return g?g[0]==="/":!1}function f(g){if(!d(g))return new RegExp(`^${g}$`);const p=g.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!p)throw new Error(`'${g}' is not a valid regular expression.`);return new RegExp(p[1],p[2])}function m(g){if(!g)return 0;const p=parseInt(g,10),v=g.slice(String(p).length),E=1e3,P=E*60,S=P*60,M=S*24;switch(v){case"s":return p*E;case"m":return p*P;case"h":return p*S;case"d":return p*M;default:if(!v)return isNaN(p)?0:p;throw new Error("Not supported unit: "+v)}}function u(g){return g!=null&&Number.isFinite(g)?g.toString():""}function h(g){if(!g)return;const p=parseInt(g,10);return isNaN(p)?void 0:p}function C(g){if(!g)return;const p=parseFloat(g);return isNaN(p)?void 0:p}function x(g){const p=(0,t.camelCase)(g);return p.charAt(0).toUpperCase()+p.substring(1)}function b(g){return g.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},68495:(X,L,e)=>{"use strict";e.d(L,{TL:()=>y,Xt:()=>t,lu:()=>r});function t({searchWords:c,textToHighlight:l}){const d=[];for(const f of c)typeof f=="string"&&d.push(...r(l,f));return d}const n=c=>c.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function r(c,l){if(!c||!l)return[];const d=[],{cleaned:f,flags:m}=y(n(l));let u;try{u=new RegExp(`(?:${f})`,m)}catch{return d}return c.replace(u,(h,...C)=>{if(h){const x=C[C.length-2];d.push({text:h,start:x,length:h.length,end:x+h.length})}return""}),d}const a="-",i=/\(\?([ims-]+)\)/g;function y(c){const l=new Set(["g"]);return{cleaned:c.replace(i,(f,m)=>{const u=m.startsWith(a);for(let h=0;h<m.length;++h){const C=m.charAt(h);u||m.charAt(h-1)===a?l.delete(C):C!==a&&l.add(C)}return""}),flags:Array.from(l).join("")}}},91249:(X,L,e)=>{"use strict";e.r(L),e.d(L,{alpha:()=>C,asHexString:()=>y,asRgbString:()=>c,darken:()=>x,decomposeColor:()=>d,emphasize:()=>h,getContrastRatio:()=>m,getLuminance:()=>u,hexToRgb:()=>r,hslToRgb:()=>l,lighten:()=>b,recomposeColor:()=>f,rgbToHex:()=>i});var t=e(63374);function n(g,p=0,v=1){return Math.min(Math.max(p,g),v)}function r(g){g=g.slice(1);const p=new RegExp(`.{1,${g.length>=6?2:1}}`,"g");let v=g.match(p);return v&&v[0].length===1&&(v=v.map(E=>E+E)),v?`rgb${v.length===4?"a":""}(${v.map((E,P)=>P<3?parseInt(E,16):Math.round(parseInt(E,16)/255*1e3)/1e3).join(", ")})`:""}function a(g){const p=g.toString(16);return p.length===1?`0${p}`:p}function i(g){if(g.indexOf("#")===0)return g;const{values:p}=d(g);return`#${p.map(v=>a(v)).join("")}`}function y(g){if(g[0]==="#")return g;const p=(0,t.Z)(g);return p.getAlpha()===1?p.toHexString():p.toHex8String()}function c(g){return g.startsWith("rgb")?g:(0,t.Z)(g).toRgbString()}function l(g){const p=d(g),{values:v}=p,E=v[0],P=v[1]/100,S=v[2]/100,M=P*Math.min(S,1-S),R=(O,N=(O+E/30)%12)=>S-M*Math.max(Math.min(N-3,9-N,1),-1);let I="rgb";const A=[Math.round(R(0)*255),Math.round(R(8)*255),Math.round(R(4)*255)];return p.type==="hsla"&&(I+="a",A.push(v[3])),f({type:I,values:A})}function d(g){if(typeof g!="string")return g;if(g.charAt(0)==="#")return d(r(g));const p=g.indexOf("("),v=g.substring(0,p);if(["rgb","rgba","hsl","hsla","color"].indexOf(v)===-1)throw new Error(`Unsupported '${g}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let E=g.substring(p+1,g.length-1),P;if(v==="color"){if(E=E.split(" "),P=E.shift(),E.length===4&&E[3].charAt(0)==="/"&&(E[3]=E[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(P)===-1)throw new Error(`Unsupported ${P} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else E=E.split(",");return E=E.map(S=>parseFloat(S)),{type:v,values:E,colorSpace:P}}function f(g){const{type:p,colorSpace:v}=g;let E=g.values;return p.indexOf("rgb")!==-1?E=E.map((P,S)=>S<3?parseInt(P,10):P):p.indexOf("hsl")!==-1&&(E[1]=`${E[1]}%`,E[2]=`${E[2]}%`),p.indexOf("color")!==-1?E=`${v} ${E.join(" ")}`:E=`${E.join(", ")}`,`${p}(${E})`}function m(g,p,v){const E=u(g),P=u(p,v);return(Math.max(E,P)+.05)/(Math.min(E,P)+.05)}function u(g,p){const v=d(g);let E=v.type==="hsl"?d(l(g)).values:v.values;if(p&&v.type==="rgba"){const S=d(p),M=E[3];E[0]=E[0]*M+S.values[0]*(1-M),E[1]=E[1]*M+S.values[1]*(1-M),E[2]=E[2]*M+S.values[2]*(1-M)}const P=E.map(S=>(v.type!=="color"&&(S/=255),S<=.03928?S/12.92:((S+.055)/1.055)**2.4));return Number((.2126*P[0]+.7152*P[1]+.0722*P[2]).toFixed(3))}function h(g,p=.15){return u(g)>.5?x(g,p):b(g,p)}function C(g,p){if(g==="")return"#000000";if(p=n(p),g[0]==="#"){if(g.length===9)g=g.substring(0,7);else if(g.length<=5){let E="#";for(let P=1;P<4;P++)E+=g[P]+g[P];g=E}return g+Math.round(p*255).toString(16).padStart(2,"0")}else{if(g[3]==="(")return g.replace(")",`, ${p})`);if(g[4]==="(")return g.substring(0,g.lastIndexOf(","))+`, ${p})`}const v=d(g);return v.type==="color"?v.values[3]=`/${p}`:v.values[3]=p,f(v)}function x(g,p){const v=d(g);if(p=n(p),v.type.indexOf("hsl")!==-1)v.values[2]*=1-p;else if(v.type.indexOf("rgb")!==-1||v.type.indexOf("color")!==-1)for(let E=0;E<3;E+=1)v.values[E]*=1-p;return f(v)}function b(g,p){const v=d(g);if(p=n(p),v.type.indexOf("hsl")!==-1)v.values[2]+=(100-v.values[2])*p;else if(v.type.indexOf("rgb")!==-1)for(let E=0;E<3;E+=1)v.values[E]+=(255-v.values[E])*p;else if(v.type.indexOf("color")!==-1)for(let E=0;E<3;E+=1)v.values[E]+=(1-v.values[E])*p;return f(v)}},48706:(X,L,e)=>{"use strict";e.d(L,{j:()=>V});function t(){const U=["xs","sm","md","lg","xl","xxl"],$="px",k={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function H(z){return`@media (min-width:${typeof z=="number"?z:k[z]}${$})`}function j(z){return`@media (max-width:${(typeof z=="number"?z:k[z])-5/100}${$})`}return{values:k,up:H,down:j,keys:U,unit:$}}var n=e(86832),r=e(91249);const a={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#FF9900",orangeDarkText:"#fbad37",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FF9900",orangeLightText:"#B5510D"};class i{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.12)`,medium:`rgba(${this.whiteBase}, 0.20)`,strong:`rgba(${this.whiteBase}, 0.30)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:a.blueDarkText,maxContrast:a.white},this.primary={main:a.blueDarkMain,text:a.blueDarkText,border:a.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.10)`,shade:`rgba(${this.whiteBase}, 0.14)`,transparent:`rgba(${this.whiteBase}, 0.08)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:`rgba(${this.whiteBase}, 0.08)`},this.info=this.primary,this.error={main:a.redDarkMain,text:a.redDarkText},this.success={main:a.greenDarkMain,text:a.greenDarkText},this.warning={main:a.orangeDarkMain,text:a.orangeDarkText},this.background={canvas:a.gray05,primary:a.gray10,secondary:a.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,selectedBorder:a.orangeDarkMain,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class y{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:a.blueLightMain,border:a.blueLightText,text:a.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:a.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.08)`,shade:`rgba(${this.blackBase}, 0.15)`,transparent:`rgba(${this.blackBase}, 0.08)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.weak},this.info={main:a.blueLightMain,text:a.blueLightText},this.error={main:a.redLightMain,text:a.redLightText,border:a.redLightText},this.success={main:a.greenLightMain,text:a.greenLightText},this.warning={main:a.orangeLightMain,text:a.orangeLightText},this.background={canvas:a.gray90,primary:a.white,secondary:a.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,selectedBorder:a.orangeLightMain,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function c(_){const U=new i,$=new y,k=(_.mode??"dark")==="dark"?U:$,{primary:H=k.primary,secondary:j=k.secondary,info:z=k.info,warning:F=k.warning,success:J=k.success,error:Q=k.error,tonalOffset:Z=k.tonalOffset,hoverFactor:ne=k.hoverFactor,contrastThreshold:ee=k.contrastThreshold,...de}=_;function Pe(he,me=ee){return(0,r.getContrastRatio)(U.text.maxContrast,he,k.background.primary)>=me?U.text.maxContrast:$.text.maxContrast}const ye=({color:he,name:me})=>{if(he={...he,name:me},!he.main)throw new Error(`Missing main color for ${me}`);return he.text||(he.text=he.main),he.border||(he.border=he.text),he.shade||(he.shade=k.mode==="light"?(0,r.darken)(he.main,Z):(0,r.lighten)(he.main,Z)),he.transparent||(he.transparent=(0,r.alpha)(he.main,.15)),he.contrastText||(he.contrastText=Pe(he.main)),he.borderTransparent||(he.borderTransparent=(0,r.alpha)(he.border,.25)),he};return(0,n.merge)({...k,primary:ye({color:H,name:"primary"}),secondary:ye({color:j,name:"secondary"}),info:ye({color:z,name:"info"}),error:ye({color:Q,name:"error"}),success:ye({color:J,name:"success"}),warning:ye({color:F,name:"warning"}),getContrastText:Pe,emphasize:(he,me)=>(0,r.emphasize)(he,me??ne)},de)}function l(_,U){const $={padding:1,headerHeight:4,background:_.background.primary,borderColor:_.border.weak,boxShadow:"none"},k={borderColor:_.border.medium,borderHover:_.border.strong,text:_.text.primary,background:_.mode==="dark"?_.background.canvas:_.background.primary};return{height:{sm:3,md:4,lg:6},input:k,panel:$,dropdown:{background:k.background},tooltip:{background:_.background.secondary,text:_.text.primary},dashboard:{background:_.background.canvas,padding:1},overlay:{background:_.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:42},textHighlight:{text:_.warning.contrastText,background:_.warning.main},horizontalDrawer:{defaultHeight:400},table:{rowHoverBackground:_.emphasize(_.background.primary,.03)}}}function d(_){return _.mode==="dark"?{z1:"0px 1px 2px rgba(1, 4, 9, 0.75)",z2:"0px 4px 8px rgba(1, 4, 9, 0.75)",z3:"0px 8px 24px rgb(1, 4, 9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function f(_){const U=_.borderRadius??2;return{radius:{default:"2px",pill:"9999px",circle:"100%"},borderRadius:H=>`${(H??1)*U}px`}}function m(_={}){const{gridSize:U=8}=_,$=H=>typeof H=="string"?H:H*U,k=(...H)=>(H.length===0&&(H[0]=1),H.map(j=>{const z=$(j);return typeof z=="number"?`${z}px`:z}).join(" "));return k.gridSize=U,k.x0="0px",k.x0_25="2px",k.x0_5="4px",k.x1="8px",k.x1_5="12px",k.x2="16px",k.x2_5="20px",k.x3="24px",k.x4="32px",k.x5="40px",k.x6="48px",k.x8="64px",k.x10="80px",k}const u={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},h={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function C(_=["all"],U={}){const{duration:$=h.standard,easing:k=u.easeInOut,delay:H=0}=U;return(Array.isArray(_)?_:[_]).map(j=>`${j} ${typeof $=="string"?$:b($)} ${k} ${typeof H=="string"?H:b(H)}`).join(",")}function x(_){if(!_)return 0;const U=_/36;return Math.round((4+15*U**.25+U/5)*10)}function b(_){return`${Math.round(_)}ms`}function g(){return{create:C,duration:h,easing:u,getAutoHeightDuration:x}}const p='"Inter", "Helvetica", "Arial", sans-serif',v="'Roboto Mono', monospace";function E(_,U={}){const{fontFamily:$=p,fontFamilyMonospace:k=v,fontSize:H=14,fontWeightLight:j=300,fontWeightRegular:z=400,fontWeightMedium:F=500,fontWeightBold:J=500,htmlFontSize:Q=14}=U,Z=H/14,ne=ye=>`${ye/Q*Z}rem`,ee=(ye,he,me,De,le)=>{if(me%2!==0||he%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:$,fontWeight:ye,fontSize:ne(he),lineHeight:me/he,...$===p?{letterSpacing:`${P(De/he)}em`}:{},...le}},de={h1:ee(z,28,32,-.25),h2:ee(z,24,28,0),h3:ee(z,22,24,0),h4:ee(z,18,22,.25),h5:ee(z,16,22,0),h6:ee(F,14,22,.15),body:ee(z,H,22,.15),bodySmall:ee(z,12,18,.15)};return{htmlFontSize:Q,pxToRem:ne,fontFamily:$,fontFamilyMonospace:k,fontSize:H,fontWeightLight:j,fontWeightRegular:z,fontWeightMedium:F,fontWeightBold:J,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...de}}function P(_){return Math.round(_*1e5)/1e5}var S=e(89647);function M(_){const U={name:"Grafana Default",typography:{fontFamily:{sansSerif:_.typography.fontFamily,monospace:_.typography.fontFamilyMonospace},size:{base:`${_.typography.fontSize}px`,xs:_.typography.size.xs,sm:_.typography.size.sm,md:_.typography.size.md,lg:_.typography.size.lg},heading:{h1:_.typography.h1.fontSize,h2:_.typography.h2.fontSize,h3:_.typography.h3.fontSize,h4:_.typography.h4.fontSize,h5:_.typography.h5.fontSize,h6:_.typography.h6.fontSize},weight:{light:_.typography.fontWeightLight,regular:_.typography.fontWeightRegular,semibold:_.typography.fontWeightMedium,bold:_.typography.fontWeightBold},lineHeight:{xs:_.typography.bodySmall.lineHeight,sm:_.typography.bodySmall.lineHeight,md:_.typography.body.lineHeight,lg:_.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${_.breakpoints.values.xs}px`,sm:`${_.breakpoints.values.sm}px`,md:`${_.breakpoints.values.md}px`,lg:`${_.breakpoints.values.lg}px`,xl:`${_.breakpoints.values.xl}px`,xxl:`${_.breakpoints.values.xxl}px`},spacing:{base:_.spacing.gridSize,insetSquishMd:_.spacing(.5,1),d:_.spacing(2),xxs:_.spacing(.25),xs:_.spacing(.5),sm:_.spacing(1),md:_.spacing(2),lg:_.spacing(3),xl:_.spacing(4),gutter:_.spacing(4),formSpacingBase:_.spacing.gridSize,formMargin:`${_.spacing.gridSize*4}px`,formFieldsetMargin:`${_.spacing.gridSize*2}px`,formInputHeight:_.spacing.gridSize*4,formButtonHeight:_.spacing.gridSize*4,formInputPaddingHorizontal:`${_.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${_.spacing.gridSize/2}px`,formInputMargin:`${_.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${_.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:_.shape.borderRadius(1),md:_.shape.borderRadius(2),lg:_.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:_.spacing.gridSize*_.components.height.sm,md:_.spacing.gridSize*_.components.height.md,lg:_.spacing.gridSize*_.components.height.lg},panelPadding:_.components.panel.padding*_.spacing.gridSize,panelHeaderHeight:_.spacing.gridSize*_.components.panel.headerHeight,zIndex:_.zIndex},$={...R,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},k={bg1:_.colors.background.primary,bg2:_.colors.background.secondary,bg3:_.colors.action.hover,dashboardBg:_.colors.background.canvas,bgBlue1:_.colors.primary.main,bgBlue2:_.colors.primary.shade},H={border1:_.colors.border.weak,border2:_.colors.border.medium,border3:_.colors.border.strong},j={textStrong:_.colors.text.maxContrast,textHeading:_.colors.text.primary,text:_.colors.text.primary,textSemiWeak:_.colors.text.secondary,textWeak:_.colors.text.secondary,textFaint:_.colors.text.disabled,textBlue:_.colors.primary.text},z={formLabel:_.colors.text.primary,formDescription:_.colors.text.secondary,formInputBg:_.components.input.background,formInputBgDisabled:_.colors.action.disabledBackground,formInputBorder:_.components.input.borderColor,formInputBorderHover:_.components.input.borderHover,formInputBorderActive:_.colors.primary.border,formInputBorderInvalid:_.colors.error.border,formInputPlaceholderText:_.colors.text.disabled,formInputText:_.components.input.text,formInputDisabledText:_.colors.action.disabledText,formFocusOutline:_.colors.primary.main,formValidationMessageText:_.colors.error.contrastText,formValidationMessageBg:_.colors.error.main};return{...U,type:_.colors.mode==="dark"?S.Q.Dark:S.Q.Light,isDark:_.isDark,isLight:_.isLight,name:_.name,palette:{...$,brandPrimary:$.orange,brandSuccess:_.colors.success.main,brandWarning:_.colors.warning.main,brandDanger:_.colors.error.main,queryRed:_.colors.error.text,queryGreen:_.colors.success.text,queryPurple:"#fe85fc",queryOrange:$.orange,online:_.colors.success.main,warn:_.colors.success.main,critical:_.colors.success.main},colors:{...k,...H,...z,...j,bodyBg:_.colors.background.canvas,panelBg:_.components.panel.background,panelBorder:_.components.panel.borderColor,pageHeaderBg:_.colors.background.canvas,pageHeaderBorder:_.colors.background.canvas,dropdownBg:z.formInputBg,dropdownShadow:$.black,dropdownOptionHoverBg:k.bg2,link:_.colors.text.primary,linkDisabled:_.colors.text.disabled,linkHover:_.colors.text.maxContrast,linkExternal:_.colors.text.link},shadows:{listItem:"none"},visualization:_.visualization}}const R={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var I=e(97898);function A(_){const U=_.mode==="light"?N():O(),$={};for(const j of U)for(const z of j.shades)if($[z.name]=z.color,z.aliases)for(const F of z.aliases)$[F]=z.color;$.transparent="rgba(0,0,0,0)",$["panel-bg"]=_.background.primary,$.text=_.text.primary;const k=j=>{if(!j)return I.R;const z=$[j];if(z)return z;if(j[0]==="#"||j.indexOf("rgb")>-1)return j;const F=w[j.toLowerCase()];return F?($[j]=F,F):j},H=o();return{hues:U,palette:H,getColorByName:k}}function O(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function N(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function o(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const w={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},K={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function V(_={}){const{colors:U={},spacing:$={},shape:k={},typography:H={}}=_,j=c(U),z=t(),F=m($),J=f(k),Q=E(j,H),Z=d(j),ne=g(),ee=l(j,Z),de=A(j),Pe={name:j.mode==="dark"?"Dark":"Light",isDark:j.mode==="dark",isLight:j.mode==="light",colors:j,breakpoints:z,spacing:F,shape:J,components:ee,typography:Q,shadows:Z,transitions:ne,visualization:de,zIndex:{...K},flags:{}};return{...Pe,v1:M(Pe)}}},30582:(X,L,e)=>{"use strict";e.d(L,{d5:()=>n.d,jG:()=>t.j,jY:()=>n.j,r8:()=>r});var t=e(48706),n=e(54112),r=e(91249)},54112:(X,L,e)=>{"use strict";e.d(L,{d:()=>a,j:()=>r});var t=e(77663),n=e(48706);function r(d){return(i.getIfExists(d)??i.get("dark")).build()}function a(d){return i.list().filter(f=>d?!0:!f.isExtra)}const i=new t.B(()=>[{id:"system",name:"System preference",build:y},{id:"dark",name:"Dark",build:()=>(0,n.j)({colors:{mode:"dark"}})},{id:"light",name:"Light",build:()=>(0,n.j)({colors:{mode:"light"}})},{id:"blue-night",name:"Blue night",build:l,isExtra:!0},{id:"midnight",name:"Midnight",build:c,isExtra:!0}]);function y(){const f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return r(f)}function c(){const d="204, 204, 220";return(0,n.j)({name:"Midnight",colors:{mode:"dark",background:{canvas:"#000000",primary:"#000000",secondary:"#181818"},border:{weak:`rgba(${d}, 0.17)`,medium:`rgba(${d}, 0.25)`,strong:`rgba(${d}, 0.35)`}}})}function l(){return(0,n.j)({name:"Blue night",colors:{mode:"dark",background:{canvas:"#15161d",primary:"#15161d",secondary:"#1d1f2e"},border:{weak:"#2e304f",medium:"#2e304f",strong:"#2e304f"}}})}},53470:(X,L,e)=>{"use strict";e.d(L,{Kx:()=>c,TB:()=>l,gz:()=>y,uP:()=>d});var t=e(86832),n=e.n(t),r=e(10694),a=e(89591),i=e(77663),y=(g=>(g.sum="sum",g.max="max",g.min="min",g.logmin="logmin",g.mean="mean",g.variance="variance",g.stdDev="stdDev",g.last="last",g.first="first",g.count="count",g.range="range",g.diff="diff",g.diffperc="diffperc",g.delta="delta",g.step="step",g.firstNotNull="firstNotNull",g.lastNotNull="lastNotNull",g.changeCount="changeCount",g.distinctCount="distinctCount",g.allIsZero="allIsZero",g.allIsNull="allIsNull",g.allValues="allValues",g.uniqueValues="uniqueValues",g))(y||{});function c(g){const{field:p,reducers:v}=g;if(!p||!v||v.length<1)return{};if(p.state?.calcs){const A=[];for(const O of v)p.state.calcs.hasOwnProperty(O)||A.push(O);if(A.length<1)return{...p.state.calcs}}p.state||(p.state={});const E=l.list(v);if(p.values.length<1){const A={...p.state.calcs};for(const O of E)A[O.id]=O.emptyInputResult!==null?O.emptyInputResult:null;return p.state.calcs=A}const{nullValueMode:S=r.Gl.Ignore}=p.config,M=S===r.Gl.Ignore,R=S===r.Gl.AsZero;if(E.length===1&&E[0].reduce){const A=E[0].reduce(p,M,R);return p.state.calcs={...p.state.calcs,...A},A}let I=d(p,M,R);for(const A of E)!I.hasOwnProperty(A.id)&&A.reduce&&(I={...I,...A.reduce(p,M,R)});return p.state.calcs={...p.state.calcs,...I},I}const l=new i.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:h},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:u},{id:"firstNotNull",name:"First *",description:"First non-null value",standard:!0,reduce:m},{id:"first",name:"First",description:"First Value",standard:!0,reduce:f},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:C},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:C},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:x},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:b},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:g=>({allValues:[...g.values]})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:g=>({uniqueValues:[...new Set(g.values)]})}]);function d(g,p,v){const E={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},P=g.values,S=g.type===a.fS.number||g.type===a.fS.time;for(let M=0;M<P.length;M++){let R=P[M];if(M===0&&(E.first=R),E.last=R,R==null){if(p)continue;v&&(R=0)}if(E.count++,R!=null){const I=E.firstNotNull===null;if(I&&(E.firstNotNull=R),S){if(E.sum+=R,E.allIsNull=!1,E.nonNullCount++,!I){const A=R-E.lastNotNull;E.step>A&&(E.step=A),E.lastNotNull>R?(E.previousDeltaUp=!1,M===P.length-1&&(E.delta+=R)):(E.previousDeltaUp?E.delta+=A:E.delta+=R,E.previousDeltaUp=!0)}R>E.max&&(E.max=R),R<E.min&&(E.min=R),R<E.logmin&&R>0&&(E.logmin=R)}R!==0&&(E.allIsZero=!1),E.lastNotNull=R}}return E.max===-Number.MAX_VALUE&&(E.max=null),E.min===Number.MAX_VALUE&&(E.min=null),E.step===Number.MAX_VALUE&&(E.step=null),E.nonNullCount>0&&(E.mean=E.sum/E.nonNullCount),E.allIsNull&&(E.allIsZero=!1),E.max!==null&&E.min!==null&&(E.range=E.max-E.min),(0,t.isNumber)(E.firstNotNull)&&(0,t.isNumber)(E.lastNotNull)&&(E.diff=E.lastNotNull-E.firstNotNull),(0,t.isNumber)(E.firstNotNull)&&(0,t.isNumber)(E.diff)&&(E.diffperc=E.diff/E.firstNotNull),E}function f(g,p,v){return{first:g.values[0]}}function m(g,p,v){const E=g.values;for(let P=0;P<E.length;P++){const S=E[P];if(S!=null&&S!==void 0)return{firstNotNull:S}}return{firstNotNull:null}}function u(g,p,v){const E=g.values;return{last:E[E.length-1]}}function h(g,p,v){const E=g.values;let P=E.length-1;for(;P>=0;){const S=E[P--];if(S!=null&&S!==void 0)return{lastNotNull:S}}return{lastNotNull:null}}function C(g,p,v){if(!(g.type===a.fS.number||g.type===a.fS.time))return{variance:0,stdDev:0};let E=0,P=0,S=0;const M=g.values;for(let R=0;R<M.length;R++){const I=M[R];if(I!=null){S++;let A=P;P+=(I-A)/S,E+=(I-A)*(I-P)}}if(S>0){const R=E/S;return{variance:R,stdDev:Math.sqrt(R)}}return{variance:0,stdDev:0}}function x(g,p,v){const E=g.values;let P=0,S=!0,M=null;for(let R=0;R<E.length;R++){let I=E[R];if(I===null){if(p)continue;v&&(I=0)}!S&&M!==I&&P++,S=!1,M=I}return{changeCount:P}}function b(g,p,v){const E=g.values,P=new Set;for(let S=0;S<E.length;S++){let M=E[S];if(M===null){if(p)continue;v&&(M=0)}P.add(M)}return{distinctCount:P.size}}},63950:(X,L,e)=>{"use strict";e.d(L,{Ac:()=>r.Ac,E4:()=>t.E4,Ff:()=>t.Ff,Hz:()=>y.H,IG:()=>r.IG,JP:()=>d._9,J_:()=>m.J_,Jz:()=>f.Jz,Kx:()=>i.Kx,Ls:()=>r.Ls,Ok:()=>f.Ok,Op:()=>f.Op,TB:()=>i.TB,U8:()=>r.U8,UO:()=>f.UO,Wk:()=>n.W,YR:()=>a.Y,Ys:()=>l.Ys,Ze:()=>c.Z,Zi:()=>f.Zi,b9:()=>r.b9,cO:()=>f.cO,gY:()=>f.gY,gz:()=>i.gz,kl:()=>f.kl,lP:()=>d.lP,mB:()=>f.mB,mE:()=>t.mE,mi:()=>t.mi,py:()=>f.py,qr:()=>f.qr,sq:()=>r.sq,uP:()=>i.uP,wL:()=>f.wL,wf:()=>c.w,zM:()=>f.zM});var t=e(86981),n=e(7959),r=e(47125),a=e(23738),i=e(53470),y=e(60593),c=e(34177),l=e(66654),d=e(82837),f=e(80742),m=e(26204)},47125:(X,L,e)=>{"use strict";e.d(L,{Ls:()=>H,Ac:()=>j,sq:()=>F,b9:()=>J,IG:()=>Q,U8:()=>z});var t=e(77663),n=e(89591),r=e(86981);const a={id:r.mi.byType,name:"Field Type",description:"match based on the field type",defaultOptions:n.fS.number,get:Z=>(ne,ee,de)=>Z===ne.type,getOptionsDisplayText:Z=>`Field type: ${Z}`},i={id:r.mi.byTypes,name:"Field Type",description:"match based on the field types",defaultOptions:new Set,get:Z=>(ne,ee,de)=>Z.has(ne.type),getOptionsDisplayText:Z=>`Field types: ${[...Z].join(" | ")}`},y={id:r.mi.numeric,name:"Numeric Fields",description:"Fields with type number",get:()=>a.get(n.fS.number),getOptionsDisplayText:()=>"Numeric Fields"},c={id:r.mi.time,name:"Time Fields",description:"Fields with type time",get:()=>a.get(n.fS.time),getOptionsDisplayText:()=>"Time Fields"};function l(){return[a,i,y,c]}var d=e(34547),f=e(53470),m=e(34352);function u(Z){return Z===f.gz.allIsNull||Z===f.gz.allIsZero}const h={id:r.mi.byValue,name:"By value (reducer)",description:"Reduce a field to a single value and test for inclusion",defaultOptions:{reducer:f.gz.allIsZero,op:d.Bd.GTE,value:0},get:Z=>{if(!Z||!Z.reducer)return()=>!1;let{reducer:ne,op:ee,value:de}=Z;const Pe=u(ne);return ee||(ee=d.Bd.EQ),(ye,he,me)=>{const De=(0,f.Kx)({field:ye,reducers:[ne]})[ne];return Pe?!!De:(0,m.f)(De,ee,de)}},getOptionsDisplayText:Z=>`By value (${Z.reducer})`};var C=e(66654),x=e(73550),b=e(55705);const g={id:r.E4.byRefId,name:"Query refId",description:"match the refId",defaultOptions:"A",get:Z=>{const ne=(0,b.jO)(Z);return ee=>ne.test(ee.refId||"")},getOptionsDisplayText:Z=>`RefID: ${Z}`};function p(){return[g]}const v={id:r.mi.first,name:"First Field",description:"The first field in the frame",get:Z=>(ne,ee,de)=>ne===ee.fields[0],getOptionsDisplayText:()=>"First field"},E={id:r.mi.firstTimeField,name:"First time field",description:"The first field of type time in a frame",get:Z=>(ne,ee,de)=>ne.type===n.fS.time&&ne===ee.fields.find(Pe=>Pe.type===n.fS.time),getOptionsDisplayText:()=>"First time field"};function P(){return[v,E]}const S={id:r.mE.equal,name:"Is equal",description:"Match where value for given field is equal to options value.",get:Z=>(ne,ee)=>ee.values[ne]==Z.value,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},M={id:r.mE.notEqual,name:"Is not equal",description:"Match where value for given field is not equal to options value.",get:Z=>(ne,ee)=>ee.values[ne]!=Z.value,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},R=()=>[S,M],I={id:r.mE.isNull,name:"Is null",description:"Match where value for given field is null.",get:()=>(Z,ne)=>ne.values[Z]==null,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},A={id:r.mE.isNotNull,name:"Is not null",description:"Match where value for given field is not null.",get:()=>(Z,ne)=>ne.values[Z]!=null,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},O=()=>[I,A],N={id:r.mE.greater,name:"Is greater",description:"Match when field value is greater than option.",get:Z=>(ne,ee)=>{const de=ee.values[ne];return isNaN(de)?!1:de>Z.value},getOptionsDisplayText:Z=>`Matches all rows where field value is greater than: ${Z.value}.`,isApplicable:Z=>Z.type===n.fS.number,getDefaultOptions:()=>({value:0})},o={id:r.mE.greaterOrEqual,name:"Is greater or equal",description:"Match when field value is greater than or equal to option.",get:Z=>(ne,ee)=>{const de=ee.values[ne];return isNaN(de)?!1:de>=Z.value},getOptionsDisplayText:Z=>`Matches all rows where field value is greater than or equal to: ${Z.value}.`,isApplicable:Z=>Z.type===n.fS.number,getDefaultOptions:()=>({value:0})},w={id:r.mE.lower,name:"Is lower",description:"Match when field value is lower than option.",get:Z=>(ne,ee)=>{const de=ee.values[ne];return isNaN(de)?!1:de<Z.value},getOptionsDisplayText:Z=>`Matches all rows where field value is lower than: ${Z.value}.`,isApplicable:Z=>Z.type===n.fS.number,getDefaultOptions:()=>({value:0})},K={id:r.mE.lowerOrEqual,name:"Is lower or equal",description:"Match when field value is lower or equal than option.",get:Z=>(ne,ee)=>{const de=ee.values[ne];return isNaN(de)?!1:de<=Z.value},getOptionsDisplayText:Z=>`Matches all rows where field value is lower or equal than: ${Z.value}.`,isApplicable:Z=>Z.type===n.fS.number,getDefaultOptions:()=>({value:0})},V=()=>[N,o,w,K],_={id:r.mE.between,name:"Is between",description:"Match when field value is between given option values.",get:Z=>(ne,ee)=>{const de=ee.values[ne];return isNaN(de)?!1:de>Z.from&&de<Z.to},getOptionsDisplayText:Z=>`Matches all rows where field value is between ${Z.from} and ${Z.to}.`,isApplicable:Z=>Z.type===n.fS.number,getDefaultOptions:()=>({from:0,to:100})},U=()=>[_],$={id:r.mE.regex,name:"Regex",description:"Match when field value is matching regex.",get:Z=>{const ne=new RegExp(Z.value);return(ee,de)=>{const Pe=de.values[ee];return ne.test(Pe)}},getOptionsDisplayText:Z=>`Matches all rows where field value is matching regex: ${Z.value}`,isApplicable:()=>!0,getDefaultOptions:()=>({value:".*"})},k=()=>[$],H=new t.B(()=>[...(0,x.Ty)(),...l(),...(0,C.Lk)(),...P(),h]),j=new t.B(()=>[...(0,x.fX)(),...(0,C.cC)(),...p()]),z=new t.B(()=>[...O(),...V(),...R(),...U(),...k()]);function F(Z){const ne=H.get(Z.id);if(!ne)throw new Error("Unknown field matcher: "+Z.id);return ne.get(Z.options)}function J(Z){const ne=j.get(Z.id);if(!ne)throw new Error("Unknown frame matcher: "+Z.id);return ne.get(Z.options)}function Q(Z){const ne=z.get(Z.id);if(!ne)throw new Error("Unknown value matcher: "+Z.id);return ne.get(Z.options)}},34352:(X,L,e)=>{"use strict";e.d(L,{f:()=>n});var t=e(34547);function n(r,a,i){switch((r==null||i==null)&&(r==null&&(r="null"),i==null&&(i="null"),(a===t.Bd.GTE||a===t.Bd.LTE)&&(a=t.Bd.EQ)),a){case t.Bd.EQ:return`${r}`==`${i}`;case t.Bd.NEQ:return`${r}`!=`${i}`;case t.Bd.GT:return r>i;case t.Bd.GTE:return r>=i;case t.Bd.LT:return r<i;case t.Bd.LTE:return r<=i;default:return!1}}},86981:(X,L,e)=>{"use strict";e.d(L,{E4:()=>r,Ff:()=>t,mE:()=>a,mi:()=>n});var t=(i=>(i.anyMatch="anyMatch",i.allMatch="allMatch",i.invertMatch="invertMatch",i.alwaysMatch="alwaysMatch",i.neverMatch="neverMatch",i))(t||{}),n=(i=>(i.numeric="numeric",i.time="time",i.first="first",i.firstTimeField="firstTimeField",i.byType="byType",i.byTypes="byTypes",i.byName="byName",i.byNames="byNames",i.byRegexp="byRegexp",i.byRegexpOrNames="byRegexpOrNames",i.byFrameRefID="byFrameRefID",i.byValue="byValue",i))(n||{}),r=(i=>(i.byName="byName",i.byRefId="byRefId",i.byIndex="byIndex",i))(r||{}),a=(i=>(i.regex="regex",i.isNull="isNull",i.isNotNull="isNotNull",i.greater="greater",i.greaterOrEqual="greaterOrEqual",i.lower="lower",i.lowerOrEqual="lowerOrEqual",i.equal="equal",i.notEqual="notEqual",i.between="between",i))(a||{})},66654:(X,L,e)=>{"use strict";e.d(L,{Lk:()=>C,Ys:()=>i,cC:()=>x});var t=e(69330),n=e(55705),r=e(89591),a=e(86981),i=(b=>(b.exclude="exclude",b.include="include",b))(i||{});const y={id:a.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:b=>{const p=l(new Set([b]));return(v,E,P)=>b===v.name||b===(0,t.CZ)(v,E,P)||!!(p&&p(v,E,P))},getOptionsDisplayText:b=>`Field name: ${b}`},c={id:a.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:b=>{const{names:g,mode:p="include"}=b,v=new Set(g??[]),E=l(v),P=(S,M,R)=>v.has(S.name)||v.has((0,t.CZ)(S,M,R))||!!(E&&E(S,M,R));return p==="exclude"?(S,M,R)=>!P(S,M,R):P},getOptionsDisplayText:b=>{const{names:g,mode:p}=b,v=(g??[]).join(", ");return p==="exclude"?`All except: ${v}`:`All of: ${v}`}};function l(b){let g;return window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(b.has(r.M5)?g=(v,E)=>!!v.labels&&v.labels?.__name__===v.name:(b.has("Time")||b.has("time"))&&(g=(v,E)=>E.meta?.typeVersion==null&&v.type===r.fS.time)),g}const d={id:a.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:b=>{const g=u(b);return(p,v,E)=>{const P=(0,t.CZ)(p,v,E);return!!g&&g.test(P)}},getOptionsDisplayText:b=>`Field name by pattern: ${b}`},f={id:a.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:b=>(g,p,v)=>p.refId===b,getOptionsDisplayText:b=>`Math all fields returned by query with reference ID: ${b}`},m={id:a.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:b=>{const g=d.get(b?.pattern||""),p=c.get({mode:"include",names:b?.names??[]});return(v,E,P)=>p(v,E,P)||g(v,E,P)},getOptionsDisplayText:b=>{const g=b?.pattern??"",p=b?.names?.join(",")??"";return`Field name by pattern: ${g} or names: ${p}`}},u=b=>{if(b)try{return(0,n.jO)(b)}catch(g){console.error(g);return}},h={id:a.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:b=>{const g=(0,n.jO)(b);return p=>g.test(p.name||"")},getOptionsDisplayText:b=>`Frame name: ${b}`};function C(){return[y,d,c,m,f]}function x(){return[h]}},73550:(X,L,e)=>{"use strict";e.d(L,{Qw:()=>h,Ty:()=>v,fX:()=>E,m3:()=>f});var t=e(89591),n=e(47125),r=e(86981);const a={id:r.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const S=P.map(M=>(0,n.sq)(M));return(M,R,I)=>{for(const A of S)if(A(M,R,I))return!0;return!1}},getOptionsDisplayText:P=>{let S="";for(const M of P){S.length>0&&(S+=" OR ");const R=n.Ls.get(M.id);S+=R.getOptionsDisplayText?R.getOptionsDisplayText(M):R.name}return S}},i={id:r.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const S=P.map(M=>(0,n.b9)(M));return M=>{for(const R of S)if(R(M))return!0;return!1}},getOptionsDisplayText:P=>{let S="";for(const M of P){S.length>0&&(S+=" OR ");const R=n.Ac.get(M.id);S+=R.getOptionsDisplayText?R.getOptionsDisplayText(M):R.name}return S}},y={id:r.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const S=P.map(M=>(0,n.sq)(M));return(M,R,I)=>{for(const A of S)if(!A(M,R,I))return!1;return!0}},getOptionsDisplayText:P=>{let S="";for(const M of P){S.length>0&&(S+=" AND ");const R=n.Ls.get(M.id);S+=R.getOptionsDisplayText?R.getOptionsDisplayText(M):R.name}return S}},c={id:r.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const S=P.map(M=>(0,n.b9)(M));return M=>{for(const R of S)if(!R(M))return!1;return!0}},getOptionsDisplayText:P=>{let S="";for(const M of P){S.length>0&&(S+=" AND ");const R=n.Ac.get(M.id);S+=R.getOptionsDisplayText?R.getOptionsDisplayText(M):R.name}return S}},l={id:r.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:P=>{const S=(0,n.sq)(P);return(M,R,I)=>!S(M,R,I)},getOptionsDisplayText:P=>{const S=n.Ls.get(P.id);return"NOT "+(S.getOptionsDisplayText?S.getOptionsDisplayText(P.options):S.name)}},d={id:r.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:P=>{const S=(0,n.b9)(P);return M=>!S(M)},getOptionsDisplayText:P=>{const S=n.Ac.get(P.id);return"NOT "+(S.getOptionsDisplayText?S.getOptionsDisplayText(P.options):S.name)}},f=P=>!0,m=P=>!0,u=P=>!1,h=P=>P.type!==t.fS.time,C=P=>!1,x={id:r.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:P=>f,getOptionsDisplayText:P=>"Always"},b={id:r.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:P=>m,getOptionsDisplayText:P=>"Always"},g={id:r.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:P=>u,getOptionsDisplayText:P=>"Never"},p={id:r.Ff.neverMatch,name:"No Frames",description:"Never Match",get:P=>C,getOptionsDisplayText:P=>"Never"};function v(){return[a,y,l,x,g]}function E(){return[i,c,d,b,p]}},34177:(X,L,e)=>{"use strict";e.d(L,{Z:()=>r,w:()=>n});var t=e(77663),n=(a=>(a.Combine="combine",a.CalculateNewFields="calculateNewFields",a.CreateNewVisualization="createNewVisualization",a.Filter="filter",a.PerformSpatialOperations="performSpatialOperations",a.Reformat="reformat",a.ReorderAndRename="reorderAndRename",a))(n||{});const r=new t.B},60593:(X,L,e)=>{"use strict";e.d(L,{H:()=>d});var t=e(63302),n=e(84289),r=e(71476),a=e(47125),i=e(34177);const y=(m,u)=>h=>{const C=i.Z.get(m.id);if(!C)return h;const b={...C.transformation.defaultOptions??{},...m.options},g=m.filter?.options?(0,a.b9)(m.filter):void 0;return h.pipe((0,n.z)(p=>(0,t.of)(c(p,g)).pipe(C.transformation.operator(b,u),l(p,C,g))))};function c(m,u){return u?m.filter(h=>u(h)):m}const l=(m,u,h)=>C=>C.pipe((0,r.U)(x=>{if(x===m)return x;for(const b of x)b.meta||(b.meta={}),b.meta.transformations?b.meta.transformations=[...b.meta.transformations,u.id]:b.meta.transformations=[u.id];if(h){let b=0;const g=m.filter((p,v)=>{const E=!h(p);return E&&!b&&(b=v),E});g.length&&x.splice(b,0,...g)}return x}));function d(m,u,h){const C=(0,t.of)(u);if(!m.length)return C;const x=[],b=h??{interpolate:g=>g};for(let g=0;g<m.length;g++){const p=m[g];if(f(p))x.push(p(b));else{if(p.disabled)continue;x.push(y(p,b))}}return C.pipe.apply(C,x)}function f(m){return typeof m=="function"}},23738:(X,L,e)=>{"use strict";e.d(L,{Y:()=>Re});var t=e(86832),n=e(71476),r=e(53305),a=e(69330),i=e(89591),y=e(10694),c=e(35648),l=e(53470),d=e(47125),f=e(86981),m=e(7959),u=e(18605);const h={id:m.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(ae,ve)=>xe=>xe.pipe((0,n.U)(Ge=>h.transformer(ae,ve)(Ge))),transformer:(ae,ve)=>xe=>{const Ge=C(xe);return xe.length>1&&Ge?u.M.transformer({byField:Ge},ve)(xe):xe}};function C(ae){let ve;for(const xe of ae){const{timeField:Ge}=(0,r.sV)(xe);if(!Ge)return;if(!ve)ve=Ge.name;else if(ve!==Ge.name)return}return ve}const x={id:m.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:ae=>ve=>ve,transformer:ae=>ve=>ve};var b=(ae=>(ae.ReduceRow="reduceRow",ae.BinaryOperation="binary",ae.Index="index",ae))(b||{});const g={reducer:l.gz.sum},p={left:"",operator:c.L.Add,right:""},v={id:m.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:l.gz.sum}},operator:(ae,ve)=>xe=>{const Ge=ae&&ae.timeSeries!==!1?h.operator(null,ve):x.operator({},ve);return ae.alias!=null&&(ae.alias=ve.interpolate(ae.alias)),xe.pipe(Ge,(0,n.U)(at=>{const dt=ae.mode??"reduceRow";let st;if(dt==="reduceRow")st=E((0,t.defaults)(ae.reduce,g),at);else if(dt==="binary"){const Pt={...ae.binary,left:ve.interpolate(ae.binary?.left),right:ve.interpolate(ae.binary?.right)};st=S((0,t.defaults)(Pt,p),at)}else if(dt==="index")return at.map(Pt=>{const we=[...Array(Pt.length).keys()];if(ae.index?.asPercentile)for(let Ke=0;Ke<we.length;Ke++)we[Ke]=we[Ke]/we.length;const Le={name:ae.alias??"Row",type:i.fS.number,values:we,config:ae.index?.asPercentile?{unit:"percentunit"}:{}};return{...Pt,fields:ae.replaceFields?[Le]:[...Pt.fields,Le]}});return st?at.map(Pt=>{const we=st(Pt);if(!we)return Pt;const Le={name:M(ae),type:i.fS.number,config:{},values:we};let Ke=[];if(ae.replaceFields){const{timeField:ht}=(0,r.sV)(Pt);ht&&ae.timeSeries!==!1?Ke=[ht,Le]:Ke=[Le]}else Ke=[...Pt.fields,Le];return{...Pt,fields:Ke}}):at}))}};function E(ae,ve){let xe=(0,d.sq)({id:f.mi.numeric});ae.include&&ae.include.length&&(xe=(0,d.sq)({id:f.mi.byNames,options:{names:ae.include}}));const Ge=l.TB.get(ae.reducer);if(!Ge)throw new Error(`Unknown reducer: ${ae.reducer}`);const at=Ge.reduce??l.uP,dt=ae.nullValueMode===y.Gl.Ignore,st=ae.nullValueMode===y.Gl.AsZero;return Pt=>{const we=[];for(const xt of Pt.fields)xe(xt,Pt,ve)&&we.push(xt.values);const Le=we.length,Ke={name:"temp",values:new Array(Le),type:i.fS.number,config:{}},ht=[];for(let xt=0;xt<Pt.length;xt++){for(let lt=0;lt<Le;lt++)Ke.values[lt]=we[lt][xt];ht.push(at(Ke,dt,st)[ae.reducer])}return ht}}function P(ae,ve,xe){if(!ve)return;for(const at of ae.fields)if(ve===(0,a.CZ)(at,ae,xe))return at.type===i.fS.boolean?at.values.map(dt=>dt?1:0):at.values;const Ge=parseFloat(ve);if(!isNaN(Ge))return new Array(ae.length).fill(Ge)}function S(ae,ve){const xe=c.n.getIfExists(ae.operator);return Ge=>{const at=P(Ge,ae.left,ve),dt=P(Ge,ae.right,ve);if(!at||!dt||!xe)return;const st=new Array(at.length);for(let Pt=0;Pt<st.length;Pt++)st[Pt]=xe.operation(at[Pt],dt[Pt]);return st}}function M(ae){if(ae.alias?.length)return ae.alias;switch(ae.mode){case"binary":{const{binary:ve}=ae;return`${ve?.left??""} ${ve?.operator??""} ${ve?.right??""}`}case"reduceRow":{const ve=l.TB.getIfExists(ae.reduce?.reducer);if(ve)return ve.name}break;case"index":return"Row"}return"math"}var R=(ae=>(ae.Drop="drop",ae.FieldName="field",ae.Label="label",ae))(R||{});const I={id:m.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:ae=>ve=>ve.pipe((0,n.U)(xe=>!Array.isArray(xe)||xe.length<2?xe:[A(xe,ae)]))};function A(ae,ve){let xe=!0,Ge=ae[0].length;const at=ve.frameNameLabel??"frame";let dt=[];for(const st of ae){Ge!==st.length&&(xe=!1,Ge=Math.max(Ge,st.length));for(const Pt of st.fields){const we={...Pt};we.state=void 0,st.name&&(ve.frameNameMode==="drop"||(ve.frameNameMode==="label"?(we.labels={...Pt.labels},we.labels[at]=st.name):!we.name||we.name===i.M5?we.name=st.name:we.name=`${st.name} \xB7 ${Pt.name}`)),dt.push(we)}}return xe||(dt=dt.map(st=>{if(st.values.length===Ge)return st;const Pt=st.values;return Pt.length=Ge,{...st,values:Pt}})),{fields:dt,length:Ge}}var O=e(26204);const N={id:m.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(ae,ve)=>xe=>!ae.include&&!ae.exclude?xe.pipe(x.operator({},ve)):(typeof ae.include?.options=="string"?ae.include.options=ve.interpolate(ae.include?.options):typeof ae.include?.options?.pattern=="string"&&(ae.include.options.pattern=ve.interpolate(ae.include?.options.pattern)),typeof ae.exclude?.options=="string"?ae.exclude.options=ve.interpolate(ae.exclude?.options):typeof ae.exclude?.options?.pattern=="string"&&(ae.exclude.options.pattern=ve.interpolate(ae.exclude?.options.pattern)),xe.pipe((0,n.U)(Ge=>{const at=ae.include?(0,d.sq)(ae.include):null,dt=ae.exclude?(0,d.sq)(ae.exclude):null,st=[];for(const Pt of Ge){const we=[];for(let Ke=0;Ke<Pt.fields.length;Ke++){const ht=Pt.fields[Ke];if(dt){if(dt(ht,Pt,Ge))continue;at||we.push(ht)}at&&at(ht,Pt,Ge)&&we.push(ht)}if(!we.length)continue;const Le={...Pt,fields:we};st.push(Le)}return st})))},o={id:m.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(ae,ve)=>xe=>!ae.include&&!ae.exclude?xe.pipe(x.operator({},ve)):xe.pipe((0,n.U)(Ge=>{const at=ae.include?(0,d.b9)(ae.include):null,dt=ae.exclude?(0,d.b9)(ae.exclude):null,st=[];for(const Pt of Ge){if(dt){if(dt(Pt))continue;at||st.push(Pt)}at&&at(Pt)&&st.push(Pt)}return st}))},w={id:m.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(ae,ve)=>xe=>xe.pipe(N.operator({include:K(ae.include),exclude:K(ae.exclude)},ve))},K=ae=>{if(!ae)return;const{names:ve,pattern:xe}=ae;if(!((!Array.isArray(ve)||ve.length===0)&&!xe))return xe?!Array.isArray(ve)||ve.length===0?{id:f.mi.byRegexp,options:xe}:{id:f.mi.byRegexpOrNames,options:ae}:{id:f.mi.byNames,options:{names:ve}}},V={id:m.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(ae,ve)=>xe=>{const Ge={};return ae.include&&(Ge.include={id:f.E4.byRefId,options:ae.include}),ae.exclude&&(Ge.exclude={id:f.E4.byRefId,options:ae.exclude}),xe.pipe(o.operator(Ge,ve))}};var _=(ae=>(ae.exclude="exclude",ae.include="include",ae))(_||{}),U=(ae=>(ae.all="all",ae.any="any",ae))(U||{});const $={id:m.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(ae,ve)=>xe=>{const Ge=ae.filters,at=ae.match==="all",dt=ae.type==="include";return!Array.isArray(Ge)||Ge.length===0?xe.pipe(x.operator({},ve)):xe.pipe((0,n.U)(st=>{if(!Array.isArray(st)||st.length===0)return st;const Pt=new Set;for(const Ke of st){const ht=H(Ke,st),xt=k(Ge,ht);for(let lt=0;lt<Ke.length;lt++){if(Pt.has(lt))continue;let Rt=!0;for(const Ut of xt){const Xt=Ut(lt,Ke,st);if(!at&&Xt){Rt=!0;break}if(at&&!Xt){Rt=!1;break}Rt=Xt}Rt&&Pt.add(lt)}}const we=[],Le=dt?Pt.size:st[0].length-Pt.size;for(const Ke of st){const ht=[];for(const xt of Ke.fields){const lt=[];for(let Rt=0;Rt<Ke.length;Rt++){if(dt&&Pt.has(Rt)){lt.push(xt.values[Rt]);continue}if(!dt&&!Pt.has(Rt)){lt.push(xt.values[Rt]);continue}}ht.push({...xt,values:lt,state:{}})}we.push({...Ke,fields:ht,length:Le})}return we}))}},k=(ae,ve)=>{const xe=()=>!1;return ae.map(Ge=>{const at=ve[Ge.fieldName]??-1;if(at<0)return console.warn(`[FilterByValue] Could not find index for field name: ${Ge.fieldName}`),xe;const dt=(0,d.IG)(Ge.config);return(st,Pt,we)=>dt(st,Pt.fields[at],Pt,we)})},H=(ae,ve)=>ae.fields.reduce((xe,Ge,at)=>{const dt=(0,a.CZ)(Ge,ae,ve);return xe[dt]=at,xe},{});var j=e(21306),z=e.n(j),F=e(73),J=e(36602);const Q={id:m.W.formatTime,name:"Format Time",description:"Set the output format of a time field",defaultOptions:{timeField:"",outputFormat:"",useTimezone:!0},operator:ae=>ve=>ve.pipe((0,n.U)(xe=>{const Ge=Z(ae.timeField,ae.outputFormat,ae.useTimezone);return!Array.isArray(xe)||xe.length===0?xe:xe.map(at=>({...at,fields:Ge(at.fields)}))}))},Z=(ae,ve,xe)=>Ge=>{const at=(0,F.Z)();return Ge.map(dt=>{if(dt.name===ae){const st=dt.values.map(Pt=>{const we=z()(Pt);if(xe){const Le=(0,J.Pr)(at,Pt),Ke=Le!==void 0?Le.ianaName:"UTC";return we.tz(Ke).format(ve)}else return we.format(ve)});return{...dt,type:i.fS.string,values:st}}return dt})};var ne=(ae=>(ae.aggregate="aggregate",ae.groupBy="groupby",ae))(ne||{});const ee={id:m.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group.",defaultOptions:{fields:{}},operator:ae=>ve=>ve.pipe((0,n.U)(xe=>{if(!Object.keys(ae.fields).find(dt=>ae.fields[dt].operation==="groupby"))return xe;const at=[];for(const dt of xe){const st=[];for(const Le of dt.fields)de(Le,ae)&&st.push(Le);if(st.length===0)continue;const Pt=new Map;for(let Le=0;Le<dt.length;Le++){const Ke=String(st.map(xt=>xt.values[Le])),ht=Pt.get(Ke)??{};Pt.has(Ke)||Pt.set(Ke,ht);for(let xt of dt.fields){const lt=(0,a.CZ)(xt);ht[lt]||(ht[lt]={name:lt,type:xt.type,config:{...xt.config},values:[]}),ht[lt].values.push(xt.values[Le])}}const we=[];for(const Le of st){const Ke=[],ht=(0,a.CZ)(Le);Pt.forEach(xt=>{Ke.push(xt[ht].values[0])}),we.push({name:Le.name,type:Le.type,config:{...Le.config},values:Ke})}for(const Le of dt.fields){if(!Pe(Le,ae))continue;const Ke=(0,a.CZ)(Le),ht=ae.fields[Ke].aggregations,xt={};Pt.forEach(lt=>{const Rt=lt[Ke],Ut=(0,l.Kx)({field:Rt,reducers:ht});for(const Xt of ht)Array.isArray(xt[Xt])||(xt[Xt]=[]),xt[Xt].push(Ut[Xt])});for(const lt of ht){const Rt={name:`${Ke} (${lt})`,values:xt[lt]??[],type:i.fS.other,config:{}};Rt.type=ye(lt,Le,Rt),we.push(Rt)}}at.push({fields:we,length:Pt.size})}return at}))},de=(ae,ve)=>{const xe=(0,a.CZ)(ae);return ve?.fields[xe]?.operation==="groupby"},Pe=(ae,ve)=>{const xe=(0,a.CZ)(ae);return ve?.fields[xe]?.operation==="aggregate"&&Array.isArray(ve?.fields[xe].aggregations)&&ve?.fields[xe].aggregations.length>0},ye=(ae,ve,xe)=>{switch(ae){case l.gz.allIsNull:return i.fS.boolean;case l.gz.last:case l.gz.lastNotNull:case l.gz.first:case l.gz.firstNotNull:return ve.type;default:return(0,r.fu)(xe)??i.fS.string}};var he=e(36604);const me="Time",De="Time",le="Value",Ee=he.U.Empty,be=window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,ge={id:m.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:me,rowField:De,valueField:le},operator:ae=>ve=>ve.pipe((0,n.U)(xe=>{const Ge=ae.columnField||me,at=ae.rowField||De,dt=ae.valueField||le,st=ae.emptyValue||Ee;if(xe.length!==1)return xe;const Pt=xe[0],we=Ie(Pt,Ge),Le=Ie(Pt,at),Ke=Ie(Pt,dt),ht=`${at}\\${Ge}`;if(!we||!Le||!Ke)return xe;const xt=ue(we.values),lt=ue(Le.values),Rt={};for(let Xt=0;Xt<Ke.values.length;Xt++){const $n=we.values[Xt],Mt=Le.values[Xt],yt=Ke.values[Xt];Rt[$n]||(Rt[$n]={}),Rt[$n][Mt]=yt}const Ut=[{name:ht,values:lt,type:i.fS.string,config:{}}];for(const Xt of xt){let $n=[];for(const Mt of lt){const yt=Rt[Xt][Mt]??ot(st);$n.push(yt)}be&&typeof Xt=="number"&&(Ke.config={...Ke.config,displayNameFromDS:void 0}),Ut.push({name:Xt.toString(),values:$n,config:Ke.config,type:Ke.type})}return[{fields:Ut,length:lt.length}]}))};function ue(ae){const ve=new Set;for(let xe=0;xe<ae.length;xe++)ve.add(ae[xe]);return Array.from(ve)}function Ie(ae,ve){for(let xe=0;xe<ae.fields.length;xe++){const Ge=ae.fields[xe];let at;if(be?at=d.Ls.get(f.mi.byName).get(ve)(Ge,ae,[ae]):at=ve===(0,a.CZ)(Ge),at)return Ge}return null}function ot(ae){switch(ae){case he.U.False:return!1;case he.U.True:return!0;case he.U.Null:return null;case he.U.Empty:default:return""}}var Qe=e(80742),Me=e(20788);const Ne=10,qe={id:m.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:Ne},operator:ae=>ve=>ve.pipe((0,n.U)(xe=>{const Ge=ae.limitField||Ne;return xe.map(at=>at.length>Ge?{...at,fields:at.fields.map(dt=>({...dt,values:dt.values.slice(0,Ge)})),length:Ge}:at)}))};var bt=e(55971);const Fe={id:m.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:ae=>ve=>ve.pipe((0,n.U)(xe=>{const Ge=Ue(ae.indexByName);return!Array.isArray(xe)||xe.length===0?xe:xe.map(at=>({...at,fields:Ge(at.fields,xe,at)}))}))},Ve=ae=>(ve,xe)=>it(ve,ae)-it(xe,ae),Ue=ae=>(ve,xe,Ge)=>{if(!Array.isArray(ve)||ve.length===0||!ae||Object.keys(ae).length===0)return ve;const at=Ve(ae);return(0,t.clone)(ve).sort((dt,st)=>at((0,a.CZ)(dt,Ge,xe),(0,a.CZ)(st,Ge,xe)))},it=(ae,ve)=>Number.isInteger(ve[ae])?ve[ae]:Number.MAX_SAFE_INTEGER,ze={id:m.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:ae=>ve=>ve.pipe((0,n.U)(xe=>{const Ge=Xe(ae.renameByName);return!Array.isArray(xe)||xe.length===0?xe:xe.map(at=>({...at,fields:Ge(at)}))}))},Xe=ae=>ve=>!ae||Object.keys(ae).length===0?ve.fields:ve.fields.map(xe=>{const Ge=(0,a.CZ)(xe,ve),at=ae[Ge];return typeof at!="string"||at.length===0?xe:{...xe,config:{...xe.config,displayName:at},state:{...xe.state,displayName:at}}}),St={id:m.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},operator:(ae,ve)=>xe=>xe.pipe(w.operator({exclude:{names:Bt(ae.excludeByName)}},ve),Fe.operator(ae,ve),ze.operator(ae,ve))},Bt=ae=>ae?Object.keys(ae).filter(ve=>ae[ve]):[];var zt=e(73550),qt=(ae=>(ae.SeriesToRows="seriesToRows",ae.ReduceFields="reduceFields",ae))(qt||{});const Qt={id:m.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last.",defaultOptions:{reducers:[l.gz.max]},operator:ae=>ve=>ve.pipe((0,n.U)(xe=>{if(!ae?.reducers?.length)return xe;const Ge=ae.fields?(0,d.sq)(ae.fields):ae.includeTimeField&&ae.mode==="reduceFields"?zt.m3:zt.Qw;if(ae.mode==="reduceFields")return Te(xe,Ge,ae.reducers);const at=yn(xe,Ge,ae.reducers,ae.labelsToFields);return at?[at]:[]}))};function yn(ae,ve,xe,Ge){const at=l.TB.list(xe),dt=at.map(we=>we.id),st=[],Pt=Ge?Zt(ae):[];for(const we of ae){const Le=we.fields.filter(Ut=>ve(Ut,we,ae)),Ke=Le.length,ht=[],xt=new Array(Ke);ht.push({name:"Field",type:i.fS.string,values:xt,config:{}});const lt={};if(Ge)for(const Ut of Pt)lt[Ut]=new Array(Ke),ht.push({name:Ut,type:i.fS.string,values:lt[Ut],config:{}});const Rt={};for(const Ut of at)Rt[Ut.id]=new Array(Ke),ht.push({name:Ut.name,type:i.fS.other,values:Rt[Ut.id],config:{}});for(let Ut=0;Ut<Le.length;Ut++){const Xt=Le[Ut],$n=(0,l.Kx)({field:Xt,reducers:dt});if(Ge){if(xt[Ut]=Xt.name,Xt.labels)for(const Mt of Object.keys(Xt.labels))lt[Mt][Ut]=Xt.labels[Mt]}else xt[Ut]=(0,a.CZ)(Xt,we,ae);for(const Mt of at){const yt=$n[Mt.id];Rt[Mt.id][Ut]=yt}}for(const Ut of ht)if(Ut.type===i.fS.other){const Xt=(0,r.fu)(Ut);Xt&&(Ut.type=Xt)}st.push({...we,fields:ht,length:Ke})}return re(st)}function Zt(ae){const ve=new Set;for(const xe of ae)for(const Ge of xe.fields)if(Ge.labels)for(const at of Object.keys(Ge.labels))ve.add(at);return[...ve]}function re(ae){if(!ae?.length)return;const ve=ae[0];for(let xe=1;xe<ae.length;xe++){const Ge=ae[xe];for(let at=0;at<ve.fields.length;at++){const dt=ve.fields[at];for(let st=0;st<Ge.fields.length;st++){const Pt=Ge.fields[st],we=at===0&&st===0,Le=dt.type===Pt.type&&dt.name===Pt.name;if(we||Le){const Ke=dt.values,ht=Pt.values;dt.values=Ke.concat(ht)}}}}return ve.name=void 0,ve.length=ve.fields[0].values.length,ve}function Te(ae,ve,xe){const at=l.TB.list(xe).map(st=>st.id),dt=[];for(const st of ae){const Pt=[];for(const we of st.fields)if(ve(we,st,ae)){const Le=(0,l.Kx)({field:we,reducers:at});for(const Ke of at){const ht=Le[Ke],xt={...we,values:[ht]};xt.state=void 0,at.length>1&&(xt.labels||(xt.labels={}),xt.labels.reducer=l.TB.get(Ke).name),Pt.push(xt)}}Pt.length&&dt.push({...st,fields:Pt,length:1})}return dt}var We=e(55705);const Je={id:m.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:ae=>ve=>ve.pipe((0,n.U)(xe=>!Array.isArray(xe)||xe.length===0?xe:xe.map(je(ae))))},je=ae=>ve=>{const xe=(0,We.jO)(ae.regex),Ge=ve.fields.map(at=>{const dt=(0,a.CZ)(at,ve);if(!xe.test(dt))return at;const st=dt.replace(xe,ae.renamePattern);return{...at,config:{...at.config,displayName:st},state:{...at.state,displayName:st}}});return{...ve,fields:Ge}};var pt=e(7906),ft=e(65038);const Tt={id:m.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:ae=>ve=>ve.pipe((0,n.U)(xe=>{if(!Array.isArray(xe)||xe.length<=1||(xe=xe.filter(Pt=>Pt.length>0),!(0,ft.xI)(xe)))return xe;const Ge={},at=new Set,dt=new pt.v,st={name:i.rN,values:[],config:{},type:i.fS.string};for(let Pt=0;Pt<xe.length;Pt++){const we=xe[Pt];for(let Le=0;Le<we.fields.length;Le++){const Ke=we.fields[Le];if(Ke.type===i.fS.time){Ge[Pt]=Le,at.has(i.Ls)||(dt.addField(Ye(Ke,i.Ls)),dt.addField(st),at.add(i.Ls));continue}at.has(i.M5)||(dt.addField(Ye(Ke,i.M5)),at.add(i.M5))}}for(let Pt=0;Pt<xe.length;Pt++){const we=xe[Pt];for(let Le=0;Le<we.length;Le++){const Ke=Ge[Pt],ht=Ke===0?1:0;dt.add({[i.Ls]:we.fields[Ke].values[Le],[i.rN]:(0,a.nf)(we),[i.M5]:we.fields[ht].values[Le]})}}return[(0,r.aK)(dt,0,!0)]}))},Ye=(ae,ve)=>({...(0,t.omit)(ae,["values","state","labels","config","name"]),name:ve,values:[],config:{...(0,t.omit)(ae.config,["displayName","displayNameFromDS"])}}),Ce={id:m.W.sortBy,name:"Sort by",description:"Sort fields in a frame.",defaultOptions:{fields:{}},operator:ae=>ve=>ve.pipe((0,n.U)(xe=>!Array.isArray(xe)||xe.length===0||!ae?.sort?.length?xe:oe(xe,ae.sort)))};function oe(ae,ve){return ae.map(xe=>{const Ge=pe(xe,ve);return Ge.length&&Ge[0].index!=null?(0,r.aK)(xe,Ge[0].index,Ge[0].desc):xe})}function pe(ae,ve){return ve.map(xe=>xe.index!=null?xe:{...xe,index:ae.fields.findIndex(Ge=>xe.field===(0,a.CZ)(Ge,ae))})}const Re={noopTransformer:x,filterFieldsTransformer:N,filterFieldsByNameTransformer:w,filterFramesTransformer:o,filterFramesByRefIdTransformer:V,filterByValueTransformer:$,formatTimeTransformer:Q,orderFieldsTransformer:Fe,organizeFieldsTransformer:St,reduceTransformer:Qt,concatenateTransformer:I,calculateFieldTransformer:v,joinByFieldTransformer:u.M,seriesToColumnsTransformer:u.M,seriesToRowsTransformer:Tt,renameFieldsTransformer:ze,labelsToFieldsTransformer:Me.r,ensureColumnsTransformer:h,groupByTransformer:ee,sortByTransformer:Ce,mergeTransformer:bt.R,renameByRegexTransformer:Je,histogramTransformer:Qe.Op,convertFieldTypeTransformer:O.mg,groupingToMatrixTransformer:ge,limitTransformer:qe}},26204:(X,L,e)=>{"use strict";e.d(L,{J_:()=>b,mg:()=>c,p8:()=>d});var t=e(71476),n=e(26234),r=e(89591),a=e(47125),i=e(86981),y=e(7959);const c={id:y.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:(p,v)=>E=>E.pipe((0,t.U)(P=>c.transformer(p,v)(P))),transformer:p=>v=>!Array.isArray(v)||v.length===0?v:l(p,v)??[]};function l(p,v){if(!p.conversions.length)return v;const E=v.map(P=>({...P}));for(const P of p.conversions){if(!P.targetField)continue;const S=a.Ls.get(i.mi.byName).get(P.targetField);for(const M of E)M.fields=M.fields.map(R=>S(R,M,E)?d(R,P):R)}return E}function d(p,v){switch(v.destinationType){case r.fS.time:return b(p,v.dateFormat);case r.fS.number:return u(p);case r.fS.string:return C(p,v.dateFormat);case r.fS.boolean:return h(p);case r.fS.enum:return g(p,v.enumConfig);case r.fS.other:return x(p);default:return p}}const f=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function m(p,v){let E=v?{format:v}:void 0;const P=p.values.slice();let S=P.find(R=>R!=null),M=typeof S=="string"&&f.test(S);for(let R=0;R<P.length;R++)if(P[R]){let I=M?Date.parse(P[R]):(0,n.J)(P[R],E).valueOf();P[R]=Number.isFinite(I)?I:null}else P[R]=null;return{...p,type:r.fS.time,values:P}}function u(p){const v=p.values.slice(),E=v.some(P=>typeof P=="string");for(let P=0;P<v.length;P++){let S=v[P];E&&S!=null&&typeof S=="string"&&(S=S.replace(/,/g,""));const M=+S;v[P]=Number.isFinite(M)?M:null}return{...p,type:r.fS.number,values:v}}function h(p){const v=p.values.slice();for(let E=0;E<v.length;E++)v[E]=!!v[E];return{...p,type:r.fS.boolean,values:v}}function C(p,v){let E=p.values;switch(p.type){case r.fS.time:E=E.map(P=>(0,n.J)(P).format(v));break;case r.fS.other:E=E.map(P=>JSON.stringify(P));break;default:E=E.map(P=>`${P}`)}return{...p,type:r.fS.string,values:E}}function x(p){const v=p.values.slice();for(let E=0;E<v.length;E++)try{v[E]=JSON.parse(v[E])}catch{v[E]=null}return{...p,type:r.fS.other,values:v}}function b(p,v){const E=typeof p.values[0]=="number";return p.type===r.fS.time&&E?p:E?{...p,type:r.fS.time}:m(p,v)}function g(p,v){const E={...v},P=p.values.slice(),S=new Map;if(E.text)for(let M=0;M<E.text.length;M++)S.set(E.text[M],M);else E.text=[];for(let M=0;M<P.length;M++){const R=P[M];S.has(R)||(E.text[S.size]=R,S.set(R,S.size)),P[M]=S.get(R)}return{...p,config:{...p.config,type:{enum:E}},type:r.fS.enum,values:P}}},80742:(X,L,e)=>{"use strict";e.d(L,{Jz:()=>P,Ok:()=>x,Op:()=>h,UO:()=>S,Zi:()=>d,cO:()=>b,gY:()=>E,kl:()=>g,mB:()=>M,py:()=>u,qr:()=>p,wL:()=>C,zM:()=>I});var t=e(71476),n=e(94123),r=e(48706),a=e(51226),i=e(89591),y=e(99331),c=e(7959),l=e(82837);const d=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],f=[null],m=(A,O)=>A-O,u={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},h={id:c.W.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(A,O)=>N=>N.pipe((0,t.U)(o=>h.transformer(A,O)(o))),transformer:A=>O=>{if(!Array.isArray(O)||O.length===0)return O;const N=E(O,A);return N==null?[]:[I(N)]}},C="xMin";function x(A){return A===C||A==="BucketMin"}const b="xMax";function g(A){return A===b||A==="BucketMax"}function p(A){let O,N;const o=[];for(const w of A.fields)x(w.name)?O=w:g(w.name)?N=w:w.type===i.fS.number&&o.push(w);if(!N&&O&&O.values.length>1){let w=O.values,K=(0,y.O)(w[1]-w[0],6);N={...O,name:b,values:w.map(V=>V+K)}}if(!O&&N&&N?.values.length>1){let w=N.values,K=(0,y.O)(w[1]-w[0],6);O={...N,name:C,values:w.map(V=>V-K)}}if(O&&N&&o.length)return{xMin:O,xMax:N,counts:o}}const v=20;function E(A,O){let N=O?.bucketSize,o=O?.bucketOffset??0;if(!N||N<0){let j=[];for(const ne of A)for(const ee of ne.fields)ee.type===i.fS.number&&(j=j.concat(ee.values));j=j.filter(ne=>ne!=null),j.sort((ne,ee)=>ne-ee);let z=1/0;if(j.length===1)z=1;else for(let ne=1;ne<j.length;ne++){let ee=j[ne]-j[ne-1];ee!==0&&(z=Math.min(z,ee))}let F=j[0];const Z=(j[j.length-1]-F)/v;for(let ne=0;ne<d.length;ne++){let ee=d[ne];if(Z<ee&&ee>=z){N=ee;break}}}const w=j=>M(j-o,N)+o;let K=((""+N).match(/\.\d+$/)??["."])[0].length-1,V=[],_=[],U;for(const j of A)for(const z of j.fields)if(z.type===i.fS.number){let F=R(z.values,w,f,m);V.push(F),_.push({...z,config:{...z.config,unit:z.config.unit==="short"?"short":void 0}}),!U&&z.config.unit&&(U=z.config)}if(!_.length)return null;let $=(0,l.v_)(V);for(let j=1;j<$.length;j++){let z=$[j];for(let F=0;F<z.length;F++)z[F]==null&&(z[F]=0)}const k={name:C,values:$[0],type:i.fS.number,state:void 0,config:K===0?U??{}:{...U,decimals:K}},H={...k,name:b,values:$[0].map(j=>j+N)};if(O?.combine){const j=new Array($[0].length).fill(0);for(let z=1;z<$.length;z++)for(let F=0;F<j.length;F++)j[F]+=$[z][F];_=[{..._[0],name:"count",values:j,type:i.fS.number,state:void 0}]}else _.forEach((j,z)=>{j.values=$[z+1]});return{xMin:k,xMax:H,counts:_}}function P(A,O){return Math.round(A/O)*O}function S(A,O){return Math.ceil(A/O)*O}function M(A,O){return Math.floor(A/O)*O}function R(A,O,N,o){let w=new Map;for(let U=0;U<A.length;U++){let $=A[U];$!=null&&($=O($));let k=w.get($);k?k.count++:w.set($,{value:$,count:1})}N&&N.forEach(U=>w.delete(U));let K=[...w.values()];o&&K.sort((U,$)=>o(U.value,$.value));let V=Array(K.length),_=Array(K.length);for(let U=0;U<K.length;U++)V[U]=K[U].value,_[U]=K[U].count;return[V,_]}function I(A,O){if(!A.xMin.display){const N=(0,n.U)({field:A.xMin,theme:O??(0,r.j)()});A.xMin.display=N,A.xMax.display=N}return A.counts[0].display=(0,n.U)({field:A.counts[0],theme:O??(0,r.j)()}),{length:A.xMin.values.length,meta:{type:a.P.Histogram},fields:[A.xMin,A.xMax,...A.counts]}}},7959:(X,L,e)=>{"use strict";e.d(L,{W:()=>t});var t=(n=>(n.append="append",n.reduce="reduce",n.order="order",n.organize="organize",n.rename="rename",n.calculateField="calculateField",n.seriesToColumns="seriesToColumns",n.seriesToRows="seriesToRows",n.merge="merge",n.concatenate="concatenate",n.labelsToFields="labelsToFields",n.filterFields="filterFields",n.filterFieldsByName="filterFieldsByName",n.filterFrames="filterFrames",n.filterByRefId="filterByRefId",n.renameByRegex="renameByRegex",n.filterByValue="filterByValue",n.noop="noop",n.ensureColumns="ensureColumns",n.groupBy="groupBy",n.sortBy="sortBy",n.histogram="histogram",n.configFromData="configFromData",n.rowsToFields="rowsToFields",n.prepareTimeSeries="prepareTimeSeries",n.convertFieldType="convertFieldType",n.fieldLookup="fieldLookup",n.heatmap="heatmap",n.spatial="spatial",n.joinByField="joinByField",n.joinByLabels="joinByLabels",n.extractFields="extractFields",n.groupingToMatrix="groupingToMatrix",n.limit="limit",n.partitionByValues="partitionByValues",n.timeSeriesTable="timeSeriesTable",n.formatTime="formatTime",n))(t||{})},18605:(X,L,e)=>{"use strict";e.d(L,{M:()=>c,c:()=>y});var t=e(71476),n=e(47125),r=e(86981),a=e(7959),i=e(82837),y=(l=>(l.outer="outer",l.inner="inner",l.outerTabular="outerTabular",l))(y||{});const c={id:a.W.joinByField,aliasIds:[a.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(l,d)=>f=>f.pipe((0,t.U)(m=>c.transformer(l,d)(m))),transformer:l=>{let d;return f=>{if(f.length>1){l.byField&&!d&&(d=n.Ls.get(r.mi.byName).get(l.byField));const m=(0,i._9)({frames:f,joinBy:d,mode:l.mode});if(m)return[m]}return f}}}},82837:(X,L,e)=>{"use strict";e.d(L,{Y3:()=>d,_9:()=>f,lP:()=>g,v_:()=>b});var t=e(27392),n=e(53305),r=e(89591),a=e(47125),i=e(86981),y=e(18605);function c(p){const{timeField:v}=(0,n.sV)(p[0]);if(v)return a.Ls.get(i.mi.firstTimeField).get({});let E=[];for(const P of p[0].fields)P.type===r.fS.number&&E.push(P.name);for(let P=1;P<p.length;P++){const S=[];for(const M of p[0].fields)M.type===r.fS.number&&S.push(M.name);E=E.filter(M=>!S.includes(M))}return a.Ls.get(i.mi.byName).get(E[0])}function l(p){return p.joinBy??c(p.frames)}function d(p,v){if(v>=0){let E=p.fields[v];E.type!==r.fS.string&&!g(E.values)&&(p=(0,n.aK)(p,v))}return p}function f(p){if(!p.frames?.length)return;if(p.frames.length===1){let A=p.frames[0],O=A;const N=l(p);let o=O.fields.findIndex(w=>N(w,O,p.frames));if(p.keepOriginIndices&&(O={...A,fields:A.fields.map((w,K)=>{const V={...w},_={frameIndex:0,fieldIndex:K};return V.state?V.state.origin=_:V.state={origin:_},V})},o>0)){const w=O.fields[o],K=O.fields.filter((V,_)=>_!==o);K.unshift(w),O.fields=K,o=0}if(o>=0&&(O=d(O,o)),p.keep){let w=O.fields.filter((K,V)=>V===o||p.keep(K,O,p.frames));A!==O?O.fields=w:O={...A,fields:w}}return O}const v=[],E=[],P=[],S=[];let M=1;const R=l(p);for(let A=0;A<p.frames.length;A++){const O=p.frames[A];if(!O||!O.fields?.length)continue;const N=[u];let o,w=[],K=[];for(let _=0;_<O.fields.length;_++){const U=O.fields[_];if(U.state=U.state||{},!o&&R(U,O,p.frames))o=U;else{if(p.keep&&!p.keep(U,O,p.frames))continue;let $=U.config.custom?.spanNulls;N.push($===!0?u:$===-1?h:C);let k=U.labels??{},H=U.name;O.name&&(U.name===r.M5?H=O.name:k={...k,name:O.name}),w.push({...U,name:H,labels:k})}p.keepOriginIndices&&(U.state.origin={frameIndex:A,fieldIndex:_})}if(!o)continue;P.length===0&&P.push(o),v.push(N);const V=[o.values];for(const _ of w)V.push(_.values),P.push(_),delete _.state?.displayName,K.push(M),M++;S.push(K),E.push(V)}let I=[];return p.mode===y.c.outerTabular?I=m(E,S,P.length,v):I=b(E,v,p.mode),{length:I[0].length,fields:P.map((A,O)=>({...A,values:I[O]}))}}function m(p,v,E,P){let S={};for(let R=0;R<p.length;R++){let I=p[R],A=I[0];for(let O=0;O<p.length;O++){if(O===R)continue;let N=p[O],o=N[0];for(let w=0;w<A.length;w++){const K=A[w],V=E-1;let _=[K].concat(new Array(V)),U=0;for(let $=1;$<I.length;$++){const k=v[R][U];_[k]=I[$][w],U++}for(let $=0;$<o.length;$++)if(A[w]===o[$]){let k=0;for(let H=1;H<N.length;H++){const j=v[O][k];_[j]=N[H][$],k++}break}S[JSON.stringify(_)]=_}}}let M=[];for(let R=0;R<E;R++)M.push(new Array(0));for(let R in S){const I=S[R];for(let A=0;A<I.length;A++)M[A].push(I[A])}return M}const u=0,h=1,C=2;function x(p,v,E){for(let P=0,S,M=-1;P<v.length;P++){let R=v[P];if(R>M){for(S=R-1;S>=0&&p[S]==null;)p[S--]=null;for(S=R+1;S<E&&p[S]==null;)p[M=S++]=null}}}function b(p,v,E=y.c.outer){let P;if(E===y.c.inner)P=new Set((0,t.Z)(p.map(I=>I[0])));else{P=new Set;for(let I=0;I<p.length;I++){let O=p[I][0],N=O.length;for(let o=0;o<N;o++)P.add(O[o])}}let S=[Array.from(P).sort((I,A)=>I-A)],M=S[0].length,R=new Map;for(let I=0;I<M;I++)R.set(S[0][I],I);for(let I=0;I<p.length;I++){let A=p[I],O=A[0];for(let N=1;N<A.length;N++){let o=A[N],w=Array(M).fill(void 0),K=v?v[I][N]:h,V=[];for(let _=0;_<o.length;_++){let U=o[_],$=R.get(O[_]);U===null?K!==u&&(w[$]=U,K===C&&V.push($)):w[$]=U}x(w,V,M),S.push(w)}}return S}function g(p,v=50){const E=p.length;if(E<=1)return!0;let P=0,S=E-1;for(;P<=S&&p[P]==null;)P++;for(;S>=P&&p[S]==null;)S--;if(S<=P)return!0;const M=Math.max(1,Math.floor((S-P+1)/v));for(let R=p[P],I=P+M;I<=S;I+=M){const A=p[I];if(A!=null){if(A<=R)return!1;R=A}}return!0}},20788:(X,L,e)=>{"use strict";e.d(L,{r:()=>y});var t=e(71476),n=e(69330),r=e(89591),a=e(7959),i=(l=>(l.Columns="columns",l.Rows="rows",l))(i||{});const y={id:a.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(l,d)=>f=>f.pipe((0,t.U)(m=>y.transformer(l,d)(m))),transformer:l=>d=>{if(l.mode==="rows")return c(d,l.keepLabels);const f=[],m=l.keepLabels?.length?new Set(l.keepLabels):void 0;for(const u of d){const h=[],C={};for(const x of u.fields){if(!x.labels){h.push(x);continue}const b={...x,config:{...x.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};h.push(b);for(const g of Object.keys(x.labels)){if(m&&!m.has(g))continue;if(l.valueLabel===g){b.name=x.labels[g];continue}(C[g]??(C[g]=new Set)).add(x.labels[g])}}for(const x in C)for(const b of C[x]){const g=new Array(u.length).fill(b);h.push({name:x,type:r.fS.string,values:g,config:{}})}f.push({...u,fields:h,length:u.length})}return f}};function c(l,d){const f=[];for(const m of l)for(const u of m.fields)if(u.labels){const h=[],C=[];if(d)for(const x of d)h.push(x),C.push(u.labels[x]);else for(const[x,b]of Object.entries(u.labels))h.push(x),C.push(b);C.length&&f.push({...m,name:(0,n.CZ)(u,m,l),fields:[{name:"label",type:r.fS.string,config:{},values:h},{name:"value",type:r.fS.string,config:{},values:C}],length:C.length})}return f}},55971:(X,L,e)=>{"use strict";e.d(L,{R:()=>y});var t=e(86832),n=e.n(t),r=e(71476),a=e(7906),i=e(7959);const y={id:i.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},operator:h=>C=>C.pipe((0,r.U)(x=>{if(!Array.isArray(x)||x.length<=1)return x;const b=x.filter(I=>I.fields.length>0);if(b.length===0)return[x[0]];const g=new Set,p={},v=[],E=new a.v;for(let I=0;I<b.length;I++){const A=b[I];for(let O=0;O<A.fields.length;O++){const N=A.fields[O];g.has(N.name)||(E.addField(c(N)),g.add(N.name)),p[N.name]=p[N.name]||{},p[N.name][I]=O,b.length-1===I&&m(p,N,b)&&v.push(N.name)}}if(v.length===0)return x;const P={},S=[],M=l(b,p,v),R=d(b,g,p);for(let I=0;I<b.length;I++){const A=b[I];for(let O=0;O<A.length;O++){const N=M(I,O),o=R(I,O);if(!Array.isArray(P[N])){P[N]=[o],S.push(u(N,P));continue}let w=!1;P[N]=P[N].map(K=>f(K,o)?(w=!0,{...K,...o}):K),w||(P[N].push(o),S.push(u(N,P)))}}for(const I of S){const A=P[I.key][I.index];A&&E.add(A)}return[E]}))},c=h=>({...(0,t.omit)(h,["values","state","labels","config"]),values:[],config:{...(0,t.omit)(h.config,"displayName")}}),l=(h,C,x)=>{const b=x.reduce((g,p)=>Object.keys(C[p]).reduce((v,E)=>(v[E]=v[E]||[],v[E].push(C[p][E]),v),g),{});return(g,p)=>b[g].reduce((v,E)=>v+h[g].fields[E].values[p],"")},d=(h,C,x)=>(b,g)=>{const p={},v=Array.from(C);for(const E of v){const P=x[E];if(!P)continue;const S=P[b];if(typeof S!="number")continue;const M=h[b];if(!M||!M.fields)continue;const R=M.fields[S];!R||!R.values||(p[E]=R.values[g])}return p},f=(h,C)=>{let x=!0;for(const b in C)if(!(typeof h[b]>"u")&&h[b]!==null&&h[b]!==C[b]){x=!1;break}return x},m=(h,C,x)=>Object.keys(h[C.name]).length===x.length,u=(h,C)=>({key:h,index:C[h].length-1})},69906:()=>{},83927:()=>{},41560:(X,L,e)=>{"use strict";e.d(L,{Z:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},19353:(X,L,e)=>{"use strict";e.d(L,{L:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},96083:(X,L,e)=>{"use strict";e.d(L,{CQ:()=>i,k8:()=>a,zj:()=>r});var t=e(30670),n=e(41175),r=(y=>(y.CloudAlerting="cloud-alerting",y.UnifiedAlerting="unified-alerting",y.Dashboard="dashboard",y.Explore="explore",y.Correlations="correlations",y.Unknown="unknown",y.PanelEditor="panel-editor",y.PanelViewer="panel-viewer",y))(r||{});class a extends t.Sg{constructor(){super(...arguments),this._extensionConfigs=[]}init(c){}setRootPage(c){return this.root=c,this}setComponentsFromLegacyExports(c){if(c.ConfigCtrl&&(this.angularConfigCtrl=c.ConfigCtrl),this.meta&&this.meta.includes){for(const l of this.meta.includes)if(l.type===t.$_.page&&l.component&&!c[l.component]){console.warn("App Page uses unknown component: ",l.component,this.meta);continue}}}get extensionConfigs(){return this._extensionConfigs}configureExtensionLink(c){return this._extensionConfigs.push({...c,type:n.D.link}),this}configureExtensionComponent(c){return this._extensionConfigs.push({...c,type:n.D.component}),this}}var i=(y=>(y.alpha="alpha",y.beta="beta",y))(i||{})},35664:(X,L,e)=>{"use strict";e.d(L,{Hx:()=>t,Z3:()=>n,bm:()=>r});const t=0,n=100,r="SAML"},40793:(X,L,e)=>{"use strict";e.d(L,{m:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},10694:(X,L,e)=>{"use strict";e.d(L,{Gl:()=>r,Gu:()=>t,dC:()=>n,fQ:()=>a});var t=(i=>(i.NotStarted="NotStarted",i.Loading="Loading",i.Streaming="Streaming",i.Done="Done",i.Error="Error",i))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var r=(i=>(i.Null="null",i.Ignore="connected",i.AsZero="null as zero",i))(r||{});const a=i=>!!i},89591:(X,L,e)=>{"use strict";e.d(L,{Ls:()=>r,M5:()=>n,fS:()=>t,rN:()=>a});var t=(i=>(i.time="time",i.number="number",i.string="string",i.boolean="boolean",i.trace="trace",i.geo="geo",i.enum="enum",i.other="other",i.frame="frame",i.nestedFrames="nestedFrames",i))(t||{});const n="Value",r="Time",a="Metric"},51226:(X,L,e)=>{"use strict";e.d(L,{P:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.NumericWide="numeric-wide",n.NumericMulti="numeric-multi",n.NumericLong="numeric-long",n.LogLines="log-lines",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},69733:(X,L,e)=>{"use strict";e.d(L,{L8:()=>r,n1:()=>t,o3:()=>a,sN:()=>n});var t=(i=>(i.Datasource="Datasource",i.Correlations="Correlations",i))(t||{}),n=(i=>(i.Regex="regex",i.Logfmt="logfmt",i))(n||{}),r=(i=>(i.Series="series",i.Field="field",i.Fields="fields",i.Value="value",i.BuiltIn="built-in",i.Template="template",i))(r||{}),a=(i=>(i.Values="values",i))(a||{})},54721:(X,L,e)=>{"use strict";e.d(L,{MF:()=>a,Ru:()=>i,eA:()=>y,hf:()=>r,iL:()=>c});var t=e(20510),n=e(30670);class r extends n.Sg{constructor(d){super(),this.DataSourceClass=d,this.components={}}setConfigEditor(d){return this.components.ConfigEditor=d,this}setConfigCtrl(d){return this.angularConfigCtrl=d,this}setQueryCtrl(d){return this.components.QueryCtrl=d,this}setAnnotationQueryCtrl(d){return this.components.AnnotationsQueryCtrl=d,this}setQueryEditor(d){return this.components.QueryEditor=d,this}setExploreQueryField(d){return this.components.ExploreQueryField=d,this}setExploreMetricsQueryField(d){return this.components.ExploreMetricsQueryField=d,this}setExploreLogsQueryField(d){return this.components.ExploreLogsQueryField=d,this}setQueryEditorHelp(d){return this.components.QueryEditorHelp=d,this}setExploreStartPage(d){return this.setQueryEditorHelp(d)}setVariableQueryEditor(d){return this.components.VariableQueryEditor=d,this}setMetadataInspector(d){return this.components.MetadataInspector=d,this}setComponentsFromLegacyExports(d){this.angularConfigCtrl=d.ConfigCtrl,this.components.QueryCtrl=d.QueryCtrl,this.components.AnnotationsQueryCtrl=d.AnnotationsQueryCtrl,this.components.ExploreQueryField=d.ExploreQueryField,this.components.QueryEditor=d.QueryEditor,this.components.QueryEditorHelp=d.QueryEditorHelp,this.components.VariableQueryEditor=d.VariableQueryEditor}}class a{constructor(d){this.name=d.name,this.id=d.id,this.type=d.type,this.meta=d.meta,this.cachingConfig=d.cachingConfig,this.uid=d.uid}getRef(){return{type:this.type,uid:this.uid}}}var i=(l=>(l.Logs="Logs",l.Metrics="Metrics",l.Tracing="Tracing",l))(i||{}),y=(l=>(l.Cancelled="cancelled",l.Timeout="timeout",l.Unknown="unknown",l))(y||{});class c{}c=(0,t.s)(c),a=(0,t.s)(a)},91866:()=>{},81266:()=>{},97898:(X,L,e)=>{"use strict";e.d(L,{R:()=>n,S:()=>t});var t=(r=>(r.Thresholds="thresholds",r.PaletteClassic="palette-classic",r.PaletteClassicByName="palette-classic-by-name",r.PaletteSaturated="palette-saturated",r.ContinuousGrYlRd="continuous-GrYlRd",r.ContinuousRdYlGr="continuous-RdYlGr",r.ContinuousBlYlRd="continuous-BlYlRd",r.ContinuousYlRd="continuous-YlRd",r.ContinuousBlPu="continuous-BlPu",r.ContinuousYlBl="continuous-YlBl",r.ContinuousBlues="continuous-blues",r.ContinuousReds="continuous-reds",r.ContinuousGreens="continuous-greens",r.ContinuousPurples="continuous-purples",r.Fixed="fixed",r.Shades="shades",r))(t||{});const n="#808080"},82909:(X,L,e)=>{"use strict";e.d(L,{Y4:()=>t,qb:()=>r,v3:()=>n});function t(a){return i=>i.__systemRef===a}const n=a=>typeof a?.__systemRef=="string";var r=(a=>(a.Unit="unit",a.Min="min",a.Max="max",a.Decimals="decimals",a.DisplayName="displayName",a.NoValue="noValue",a.Thresholds="thresholds",a.Mappings="mappings",a.Links="links",a.Color="color",a.Filterable="filterable",a))(r||{})},18401:()=>{},58278:()=>{},32627:()=>{},17393:(X,L,e)=>{"use strict";e.d(L,{Mo:()=>n,_S:()=>t,iJ:()=>r});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,discord:!0,hipchat:!0,amazon:!0,"google-hangouts-alt":!0,pagerduty:!0,line:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,"align-left":!0,"align-right":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,"expand-arrows":!0,at:!0,ai:!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,"calendar-slash":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"corner-down-right-alt":!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,"file-landscape-alt":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-ml":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,"gf-pin":!0,"gf-prometheus":!0,"gf-traces":!0,grafana:!0,"graph-bar":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"layers-alt":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,"list-ol":!0,lock:!0,"map-marker":!0,"map-marker-plus":!0,"map-marker-minus":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,stopwatch:!0,"stopwatch-slash":!0,sync:!0,"sync-slash":!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"wrap-text":!0,rss:!0,x:!0};function n(a){return!a||typeof a!="string"?!1:a in t}function r(a){if(n(a))return a}},92199:(X,L,e)=>{"use strict";e.r(L),e.d(L,{AbstractLabelOperator:()=>c.K2,AlertState:()=>ee.Z,AnnotationEventFieldSource:()=>l.L,AppEvents:()=>z.SI,AppPlugin:()=>I.k8,CoreApp:()=>I.zj,CustomVariableSupport:()=>J.Mg,DEFAULT_SAML_NAME:()=>t.bm,DashboardCursorSync:()=>y.m,DataFrameType:()=>a.P,DataLinkConfigOrigin:()=>i.n1,DataQueryErrorType:()=>A.eA,DataSourceApi:()=>A.MF,DataSourcePlugin:()=>A.hf,DataSourceVariableSupport:()=>J.gv,DataTopic:()=>c.w5,DefaultTimeZone:()=>h.Ys,ExploreMode:()=>A.Ru,FALLBACK_COLOR:()=>w.R,FeatureState:()=>I.CQ,FieldColorModeId:()=>w.S,FieldConfigProperty:()=>M.qb,FieldType:()=>r.fS,GAUGE_DEFAULT_MAXIMUM:()=>t.Z3,GAUGE_DEFAULT_MINIMUM:()=>t.Hx,GrafanaPlugin:()=>N.Sg,GrafanaThemeType:()=>K.Q,LanguageProvider:()=>A.iL,LegacyGraphHoverClearEvent:()=>z.oi,LegacyGraphHoverEvent:()=>z.IA,LiveChannelConnectionState:()=>F.yS,LiveChannelEventType:()=>F.FU,LiveChannelScope:()=>F.z,LiveChannelType:()=>F.SK,LoadingState:()=>n.Gu,LogLevel:()=>d.in,LogRowContextQueryDirection:()=>d.M4,LogsDedupDescription:()=>d.Uv,LogsDedupStrategy:()=>d.Y4,LogsMetaKind:()=>d.Ku,LogsSortOrder:()=>d.UV,LogsVolumeType:()=>d.o8,MappingType:()=>x.H,NullValueMode:()=>n.Gl,OrgRole:()=>V.B,PageLayoutType:()=>f.Q,PanelEvents:()=>z.Kh,PluginErrorCode:()=>N.w2,PluginExtensionPoints:()=>le.y,PluginExtensionTypes:()=>le.D,PluginIncludeType:()=>N.$_,PluginSignatureStatus:()=>N.Xy,PluginSignatureType:()=>N._Z,PluginState:()=>N.BV,PluginType:()=>N.zV,SpecialValue:()=>S.U,SpecialValueMatch:()=>x.e,StandardVariableSupport:()=>J.v6,SupplementaryQueryType:()=>d.v8,SupportedTransformationType:()=>i.sN,TIME_FORMAT:()=>h.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>r.rN,TIME_SERIES_TIME_FIELD_NAME:()=>r.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>r.M5,ThresholdsMode:()=>C.H,VariableHide:()=>o.bU,VariableOrigin:()=>i.L8,VariableRefresh:()=>o.Bd,VariableSort:()=>o.$U,VariableSuggestionsScope:()=>i.o3,VariableSupportBase:()=>J.Tq,VariableSupportType:()=>J.j2,VisualizationSuggestionScore:()=>O._,VisualizationSuggestionsBuilder:()=>O.mi,VisualizationSuggestionsListAppender:()=>O.sf,VizOrientation:()=>O.wm,availableIconsIndex:()=>De._S,getDefaultRelativeTimeRange:()=>h.Rr,getDefaultTimeRange:()=>h.JK,hasLogsContextSupport:()=>d.Q4,hasLogsContextUiSupport:()=>d.xW,hasQueryExportSupport:()=>c.p,hasQueryImportSupport:()=>c.CZ,hasSupplementaryQuerySupport:()=>d.mN,hasToggleableQueryFiltersSupport:()=>d.Vw,isIconName:()=>De.Mo,isLiveChannelJoinEvent:()=>F.mx,isLiveChannelLeaveEvent:()=>F.gH,isLiveChannelMessageEvent:()=>F.RL,isLiveChannelStatusEvent:()=>F.se,isSystemOverride:()=>M.v3,isSystemOverrideWithRef:()=>M.Y4,isTruthy:()=>n.fQ,isUnsignedPluginSignature:()=>ne.x,isValidLiveChannelAddress:()=>F.nU,makeArrayIndexableVector:()=>R.U,parseLiveChannelAddress:()=>F.H7,preferredVisualizationTypes:()=>n.dC,toIconName:()=>De.iJ,toLiveChannelId:()=>F.Aj});var t=e(35664),n=e(10694),r=e(89591),a=e(51226),i=e(69733),y=e(40793),c=e(30976),l=e(19353),d=e(69323),f=e(15750),m=e(89047),u=e.n(m),me={};for(const Ee in m)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType"].indexOf(Ee)<0&&(me[Ee]=()=>m[Ee]);e.d(L,me);var h=e(54554),C=e(60695),x=e(23955),b=e(91866),g=e.n(b),me={};for(const Ee in b)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(Ee)<0&&(me[Ee]=()=>b[Ee]);e.d(L,me);var p=e(32627),v=e.n(p),me={};for(const Ee in p)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(Ee)<0&&(me[Ee]=()=>p[Ee]);e.d(L,me);var E=e(69906),P=e.n(E),me={};for(const Ee in E)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(Ee)<0&&(me[Ee]=()=>E[Ee]);e.d(L,me);var S=e(36604),M=e(82909),R=e(11574),I=e(96083),A=e(54721),O=e(64943),N=e(30670),o=e(12699),w=e(97898),K=e(89647),V=e(24275),_=e(18401),U=e.n(_),me={};for(const Ee in _)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(Ee)<0&&(me[Ee]=()=>_[Ee]);e.d(L,me);var $=e(87516),k=e.n($),me={};for(const Ee in $)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(Ee)<0&&(me[Ee]=()=>$[Ee]);e.d(L,me);var H=e(81266),j=e.n(H),me={};for(const Ee in H)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(Ee)<0&&(me[Ee]=()=>H[Ee]);e.d(L,me);var z=e(71519),F=e(48614),J=e(95405),Q=e(58278),Z=e.n(Q),me={};for(const Ee in Q)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(Ee)<0&&(me[Ee]=()=>Q[Ee]);e.d(L,me);var ne=e(88227),ee=e(41560),de=e(41614),Pe=e.n(de),me={};for(const Ee in de)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(Ee)<0&&(me[Ee]=()=>de[Ee]);e.d(L,me);var ye=e(83927),he=e.n(ye),me={};for(const Ee in ye)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(Ee)<0&&(me[Ee]=()=>ye[Ee]);e.d(L,me);var De=e(17393),le=e(41175)},94562:(X,L,e)=>{"use strict";e.d(L,{l:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},71519:(X,L,e)=>{"use strict";e.d(L,{IA:()=>i,Kh:()=>a,SI:()=>r,oi:()=>y});var t=e(71054),n=e(45276);const r={alertSuccess:(0,t.X)("alert-success"),alertWarning:(0,t.X)("alert-warning"),alertError:(0,t.X)("alert-error")},a={refresh:(0,t.X)("refresh"),componentDidMount:(0,t.X)("component-did-mount"),dataReceived:(0,t.X)("data-received"),dataError:(0,t.X)("data-error"),dataFramesReceived:(0,t.X)("data-frames-received"),dataSnapshotLoad:(0,t.X)("data-snapshot-load"),editModeInitialized:(0,t.X)("init-edit-mode"),initPanelActions:(0,t.X)("init-panel-actions"),initialized:(0,t.X)("panel-initialized"),panelTeardown:(0,t.X)("panel-teardown"),render:(0,t.X)("render")};class i extends n.R{}i.type="graph-hover";class y extends n.m{constructor(){super(...arguments),this.payload={point:{}}}}y.type="graph-hover-clear"},48614:(X,L,e)=>{"use strict";e.d(L,{Aj:()=>m,FU:()=>a,H7:()=>d,RL:()=>l,SK:()=>n,gH:()=>c,mx:()=>y,nU:()=>f,se:()=>i,yS:()=>r,z:()=>t});var t=(u=>(u.DataSource="ds",u.Plugin="plugin",u.Grafana="grafana",u.Stream="stream",u))(t||{}),n=(u=>(u.DataStream="stream",u.DataFrame="frame",u.JSON="json",u))(n||{}),r=(u=>(u.Pending="pending",u.Connected="connected",u.Connecting="connecting",u.Disconnected="disconnected",u.Shutdown="shutdown",u.Invalid="invalid",u))(r||{}),a=(u=>(u.Status="status",u.Join="join",u.Leave="leave",u.Message="message",u))(a||{});function i(u){return u.type==="status"}function y(u){return u.type==="join"}function c(u){return u.type==="leave"}function l(u){return u.type==="message"}function d(u){if(u?.length){let h=u.trim().split("/");if(h.length>=3)return{scope:h[0],namespace:h[1],path:h.slice(2).join("/")}}}function f(u){return!!(u?.path&&u.namespace&&u.scope)}function m(u){if(!u.scope)return"";let h=u.scope;return!u.namespace||(h+="/"+u.namespace,!u.path)?h:h+"/"+u.path}},69323:(X,L,e)=>{"use strict";e.d(L,{Ku:()=>r,M4:()=>i,Q4:()=>y,UV:()=>t.UV,Uv:()=>a,Vw:()=>m,Y4:()=>t.Y4,in:()=>n,mN:()=>d,o8:()=>l,v8:()=>c,xW:()=>f});var t=e(34547),n=(u=>(u.emerg="critical",u.fatal="critical",u.alert="critical",u.crit="critical",u.critical="critical",u.warn="warning",u.warning="warning",u.err="error",u.eror="error",u.error="error",u.info="info",u.information="info",u.informational="info",u.notice="info",u.dbug="debug",u.debug="debug",u.trace="trace",u.unknown="unknown",u))(n||{}),r=(u=>(u[u.Number=0]="Number",u[u.String=1]="String",u[u.LabelsMap=2]="LabelsMap",u[u.Error=3]="Error",u))(r||{}),a=(u=>(u.none="No de-duplication",u.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",u.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",u.signature="De-duplication of successive lines that have identical punctuation and whitespace.",u))(a||{}),i=(u=>(u.Backward="BACKWARD",u.Forward="FORWARD",u))(i||{});const y=u=>u?"getLogRowContext"in u&&"showContextToggle"in u:!1;var c=(u=>(u.LogsVolume="LogsVolume",u.LogsSample="LogsSample",u))(c||{}),l=(u=>(u.FullRange="FullRange",u.Limited="Limited",u))(l||{});const d=(u,h)=>{if(!u)return!1;const C=u;return C.getDataProvider!==void 0&&C.getSupplementaryQuery!==void 0&&C.getSupportedSupplementaryQueryTypes().includes(h)},f=u=>u?"getLogRowContextUi"in u:!1,m=u=>u!==null&&typeof u=="object"&&"toggleQueryFilter"in u&&"queryHasFilter"in u},15750:(X,L,e)=>{"use strict";e.d(L,{Q:()=>t});var t=(n=>(n[n.Standard=0]="Standard",n[n.Canvas=1]="Canvas",n[n.Custom=2]="Custom",n))(t||{})},24275:(X,L,e)=>{"use strict";e.d(L,{B:()=>t});var t=(n=>(n.None="None",n.Viewer="Viewer",n.Editor="Editor",n.Admin="Admin",n))(t||{})},64943:(X,L,e)=>{"use strict";e.d(L,{_:()=>i,mi:()=>y,sf:()=>c,wm:()=>a});var t=e(86832),n=e.n(t),r=e(89591),a=(l=>(l.Auto="auto",l.Vertical="vertical",l.Horizontal="horizontal",l))(a||{}),i=(l=>(l[l.Best=100]="Best",l[l.Good=70]="Good",l[l.OK=50]="OK",l))(i||{});class y{constructor(d,f){this.list=[],this.data=d,this.panel=f,this.dataSummary=this.computeDataSummary()}getListAppender(d){return new c(this.list,d)}computeDataSummary(){const d=this.data?.series||[];let f=0,m=0,u=0,h=0,C=0,x=0,b;for(const g of d){h+=g.length,g.meta?.preferredVisualisationType&&(b=g.meta.preferredVisualisationType);for(const p of g.fields)switch(x++,p.type){case r.fS.number:f+=1;break;case r.fS.time:m+=1;break;case r.fS.string:u+=1;break}g.length>C&&(C=g.length)}return{numberFieldCount:f,timeFieldCount:m,stringFieldCount:u,rowCountTotal:h,rowCountMax:C,fieldCount:x,preferredVisualisationType:b,frameCount:d.length,hasData:h>0,hasTimeField:m>0,hasNumberField:f>0,hasStringField:u>0}}getList(){return this.list}}class c{constructor(d,f){this.list=d,this.defaults=f}append(d){this.list.push((0,t.defaultsDeep)(d,this.defaults))}}},30670:(X,L,e)=>{"use strict";e.d(L,{$_:()=>y,BV:()=>t,Sg:()=>c,Xy:()=>r,_Z:()=>a,w2:()=>i,zV:()=>n});var t=(l=>(l.alpha="alpha",l.beta="beta",l.stable="stable",l.deprecated="deprecated",l))(t||{}),n=(l=>(l.panel="panel",l.datasource="datasource",l.app="app",l.renderer="renderer",l.secretsmanager="secretsmanager",l))(n||{}),r=(l=>(l.internal="internal",l.valid="valid",l.invalid="invalid",l.modified="modified",l.missing="missing",l))(r||{}),a=(l=>(l.grafana="grafana",l.commercial="commercial",l.community="community",l.private="private",l.core="core",l))(a||{}),i=(l=>(l.missingSignature="signatureMissing",l.invalidSignature="signatureInvalid",l.modifiedSignature="signatureModified",l))(i||{}),y=(l=>(l.dashboard="dashboard",l.page="page",l.panel="panel",l.datasource="datasource",l))(y||{});class c{addConfigPage(d){return this.configPages||(this.configPages=[]),this.configPages.push(d),this}setChannelSupport(d){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},41175:(X,L,e)=>{"use strict";e.d(L,{D:()=>t,y:()=>n});var t=(r=>(r.link="link",r.component="component",r))(t||{}),n=(r=>(r.DashboardPanelMenu="grafana/dashboard/panel/menu",r.DataSourceConfig="grafana/datasources/config",r.ExploreToolbarAction="grafana/explore/toolbar/action",r))(n||{})},88227:(X,L,e)=>{"use strict";e.d(L,{x:()=>n});var t=e(30670);function n(r){return r&&r!==t.Xy.valid&&r!==t.Xy.internal}},30976:(X,L,e)=>{"use strict";e.d(L,{CZ:()=>r,K2:()=>n,p:()=>a,w5:()=>t});var t=(i=>(i.Annotations="annotations",i))(t||{}),n=(i=>(i.Equal="Equal",i.NotEqual="NotEqual",i.EqualRegEx="EqualRegEx",i.NotEqualRegEx="NotEqualRegEx",i))(n||{});const r=i=>i?"importFromAbstractQueries"in i:!1,a=i=>i?"exportToAbstractQueries"in i:!1},89047:()=>{},41614:()=>{},12699:(X,L,e)=>{"use strict";e.d(L,{$U:()=>n,Bd:()=>t,bU:()=>r});var t=(a=>(a[a.never=0]="never",a[a.onDashboardLoad=1]="onDashboardLoad",a[a.onTimeRangeChanged=2]="onTimeRangeChanged",a))(t||{}),n=(a=>(a[a.disabled=0]="disabled",a[a.alphabeticalAsc=1]="alphabeticalAsc",a[a.alphabeticalDesc=2]="alphabeticalDesc",a[a.numericalAsc=3]="numericalAsc",a[a.numericalDesc=4]="numericalDesc",a[a.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",a[a.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",a))(n||{}),r=(a=>(a[a.dontHide=0]="dontHide",a[a.hideLabel=1]="hideLabel",a[a.hideVariable=2]="hideVariable",a))(r||{})},89647:(X,L,e)=>{"use strict";e.d(L,{Q:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},60695:(X,L,e)=>{"use strict";e.d(L,{H:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},54554:(X,L,e)=>{"use strict";e.d(L,{JK:()=>i,Rr:()=>y,T_:()=>a,Ys:()=>r});var t=e(34547),n=e(92403);const r=t.iT,a="YYYY-MM-DD HH:mm:ss";function i(){const c=(0,n.CQ)();return{from:(0,n.CQ)(c).subtract(6,"hour"),to:c,raw:{from:"now-6h",to:"now"}}}function y(){return{from:600,to:0}}},87516:()=>{},36604:(X,L,e)=>{"use strict";e.d(L,{U:()=>t});var t=(n=>(n.True="true",n.False="false",n.Null="null",n.Empty="empty",n))(t||{})},23955:(X,L,e)=>{"use strict";e.d(L,{H:()=>t,e:()=>n});var t=(r=>(r.ValueToText="value",r.RangeToText="range",r.RegexToText="regex",r.SpecialValue="special",r))(t||{}),n=(r=>(r.True="true",r.False="false",r.Null="null",r.NaN="nan",r.NullAndNaN="null+nan",r.Empty="empty",r))(n||{})},95405:(X,L,e)=>{"use strict";e.d(L,{Mg:()=>a,Tq:()=>n,gv:()=>i,j2:()=>t,v6:()=>r});var t=(y=>(y.Legacy="legacy",y.Standard="standard",y.Custom="custom",y.Datasource="datasource",y))(t||{});class n{}class r extends n{getType(){return"standard"}}class a extends n{getType(){return"custom"}}class i extends n{getType(){return"datasource"}}},11574:(X,L,e)=>{"use strict";e.d(L,{U:()=>t}),Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(n){return this[n]},writable:!0,enumerable:!1,configurable:!0},set:{value:function(n,r){this[n]=r},writable:!0,enumerable:!1,configurable:!0},add:{value:function(n){this.push(n)},writable:!0,enumerable:!1,configurable:!0},toArray:{value:function(){return this},writable:!0,enumerable:!1,configurable:!0}});function t(n){return new Proxy(n,{get(r,a,i){if(typeof a!="symbol"){const y=+a;if(String(y)===a)return r.get(y)}return Reflect.get(r,a,i)},set(r,a,i,y){if(typeof a!="symbol"){const c=+a;if(String(c)===a)return r.set(c,i),!0}return Reflect.set(r,a,i,y)}})}},98458:(X,L,e)=>{"use strict";e.d(L,{vo:()=>i,rt:()=>l,j:()=>c});var t=e(18985),n=e(63671),r=e(77663);class a{constructor(){this.properties=[]}addCustomEditor(f){return this.properties.push(f),this}getRegistry(){return new r.B(()=>this.properties)}getItems(){return this.properties}}class i extends a{addNumberInput(f){return this.addCustomEditor({...f,id:f.path,override:t.S.get("number").editor,editor:t.S.get("number").editor,process:n.Oh,shouldApply:f.shouldApply??(()=>!0),settings:f.settings||{}})}addSliderInput(f){return this.addCustomEditor({...f,id:f.path,override:t.S.get("slider").editor,editor:t.S.get("slider").editor,process:n.Oh,shouldApply:f.shouldApply??(()=>!0),settings:f.settings||{}})}addTextInput(f){return this.addCustomEditor({...f,id:f.path,override:t.S.get("text").editor,editor:t.S.get("text").editor,process:n.op,shouldApply:f.shouldApply??(()=>!0),settings:f.settings||{}})}addSelect(f){return this.addCustomEditor({...f,id:f.path,override:t.S.get("select").editor,editor:t.S.get("select").editor,process:n.AE,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{options:[]}})}addRadio(f){return this.addCustomEditor({...f,id:f.path,override:t.S.get("radio").editor,editor:t.S.get("radio").editor,process:n.AE,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{options:[]}})}addBooleanSwitch(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("boolean").editor,override:t.S.get("boolean").editor,process:n.W4,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{}})}addColorPicker(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("color").editor,override:t.S.get("color").editor,process:n.kG,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{}})}addUnitPicker(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("unit").editor,override:t.S.get("unit").editor,process:n.VB,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{}})}addFieldNamePicker(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("field-name").editor,override:t.S.get("field-name").editor,process:n.kG,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{}})}addGenericEditor(f,m){return this.addCustomEditor({...f,id:f.path,editor:m,override:m,process:n.kG,shouldApply:f.shouldApply?f.shouldApply:()=>!0,settings:f.settings||{}})}}class y{constructor(f){this.cfg=f,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=m=>{const u=this.cfg.values;return u?u(m):{getValue:h=>m.getValue(`${this.path}.${h}`),onChange:(h,C)=>m.onChange(`${this.path}.${h}`,C)}},this.path=f.path,this.category=f.category,this.defaultValue=f.defaultValue}}function c(d){return d.id==="nested-panel-options"}class l extends a{addNestedOptions(f){const m=new y(f);return this.addCustomEditor(m)}addNumberInput(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("number").editor})}addSliderInput(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("slider").editor})}addTextInput(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("text").editor})}addStringArray(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("strings").editor})}addSelect(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("select").editor})}addMultiSelect(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("multi-select").editor})}addRadio(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("radio").editor})}addBooleanSwitch(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("boolean").editor})}addColorPicker(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("color").editor,settings:f.settings||{}})}addTimeZonePicker(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("timezone").editor,settings:f.settings||{}})}addUnitPicker(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("unit").editor})}addFieldNamePicker(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("field-name").editor})}addDashboardPicker(f){return this.addCustomEditor({...f,id:f.path,editor:t.S.get("dashboard-uid").editor})}}},77663:(X,L,e)=>{"use strict";e.d(L,{B:()=>n});var t=e(30670);class n{constructor(a){this.init=a,this.ordered=[],this.byId=new Map,this.initialized=!1,this.setInit=i=>{if(this.initialized)throw new Error("Registry already initialized");this.init=i},this.init=a}getIfExists(a){if(this.initialized||this.initialize(),a)return this.byId.get(a)}initialize(){if(this.init)for(const a of this.init())this.register(a);this.sort(),this.initialized=!0}get(a){const i=this.getIfExists(a);if(!i)throw new Error(`"${a}" not found in: ${this.list().map(y=>y.id)}`);return i}selectOptions(a,i){this.initialized||this.initialize();const y={options:[],current:[]},c={};if(a)for(const l of a)c[l]={};for(const l of this.ordered){if(l.excludeFromPicker||i&&!i(l))continue;const d={value:l.id,label:l.name,description:l.description};l.state===t.BV.alpha&&(d.label+=" (alpha)"),y.options.push(d),c[l.id]&&(c[l.id]=d)}return a&&(y.current=Object.values(c)),y}list(a){if(this.initialized||this.initialize(),a){const i=[];for(const y of a){const c=this.getIfExists(y);c&&i.push(c)}return i}return this.ordered}isEmpty(){return this.initialized||this.initialize(),this.ordered.length===0}register(a){if(this.byId.has(a.id))throw new Error("Duplicate Key:"+a.id);if(this.byId.set(a.id,a),this.ordered.push(a),a.aliasIds)for(const i of a.aliasIds)this.byId.has(i)||this.byId.set(i,a);this.initialized&&this.sort()}sort(){}}},97253:(X,L,e)=>{"use strict";e.d(L,{I:()=>r});var t=e(86832),n=e.n(t);function r(a){return typeof a=="number"?a:a===""||a===null||a===void 0||Array.isArray(a)?NaN:typeof a=="boolean"?a?1:0:(0,t.toNumber)(a)}},24571:(X,L,e)=>{"use strict";e.r(L),e.d(L,{moveItemImmutably:()=>n,sortValues:()=>i});var t=e(34547);function n(y,c,l){const d=[...y];return Array.prototype.splice.call(d,l,0,Array.prototype.splice.call(d,c,1)[0]),d}const r=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),a=(y,c)=>y-c;function i(y){return(c,l)=>{if(c===l)return 0;if(l==null||typeof l=="string"&&l.trim()==="")return-1;if(c==null||typeof c=="string"&&c?.trim()==="")return 1;let d=r.compare;return typeof c=="number"&&typeof l=="number"&&(d=a),y===t.As.Descending?d(l,c):d(c,l)}}},35648:(X,L,e)=>{"use strict";e.d(L,{L:()=>n,n:()=>r});var t=e(77663),n=(a=>(a.Add="+",a.Subtract="-",a.Divide="/",a.Multiply="*",a))(n||{});const r=new t.B(()=>[{id:"+",name:"Add",operation:(a,i)=>a+i},{id:"-",name:"Subtract",operation:(a,i)=>a-i},{id:"*",name:"Multiply",operation:(a,i)=>a*i},{id:"/",name:"Divide",operation:(a,i)=>a/i}])},29710:(X,L,e)=>{"use strict";e.d(L,{MJ:()=>p,QM:()=>h,uP:()=>m,x5:()=>f});var t=e(86832),n=e.n(t),r=e(30795),a=e.n(r),i=e(7906),y=e(53305),c=e(69330),l=e(89591),d=e(83502),f=(v=>(v[v.full=0]="full",v[v.name=1]="name",v[v.none=2]="none",v))(f||{});function m(v,E){return new h(E).readCSV(v)}var u=(v=>(v[v.Starting=0]="Starting",v[v.InHeader=1]="InHeader",v[v.ReadingRows=2]="ReadingRows",v))(u||{});class h{constructor(E){this.chunk=(P,S)=>{for(let M=0;M<P.data.length;M++){const R=P.data[M];if(R.length<1)continue;const I=R[0];if(I){if(I.startsWith("#")){const A=I.indexOf("#",2);if(A>0){const O=I.slice(1,A),N=O==="name";if(N||{unit:"#"}.hasOwnProperty(O)){this.state===2&&(this.current=new i.v({fields:[]}),this.data.push(this.current));const w=I.slice(A+1);if(N){this.current.addFieldFor(void 0,w);for(let K=1;K<R.length;K++)this.current.addFieldFor(void 0,R[K])}else{const{fields:K}=this.current;for(let V=0;V<K.length;V++){K[V].config||(K[V].config={});const _=K[V].config;_[O]=V===0?w:R[V]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,y.LI)(I)===l.fS.string){for(const O of R)this.current.addFieldFor(void 0,O);this.state=1;continue}this.state=1}}if(this.state,this.state=2,R.length>this.current.fields.length){const{fields:A}=this.current;for(let O=A.length;O<R.length;O++)this.current.addFieldFor(R[O]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(R),this.callback&&this.callback.onRow(R)}},E||(E={}),this.config=E.config||{},this.callback=E.callback,this.current=new i.v({fields:[]}),this.state=0,this.data=[]}readCSV(E){this.current=new i.v({fields:[]}),this.data=[this.current];const P={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return a().parse(E,P),this.data}}function C(v,E){if(v==null)return"";const P=v.toString();return P.includes('"')?E.quoteChar+P.replace(/"/gi,'""')+E.quoteChar:P.includes(`
`)||E.delimiter&&P.includes(E.delimiter)?E.quoteChar+P+E.quoteChar:P}function x(v,E){return v.display?P=>{const S=v.display(P);return C((0,d.zc)(S),E)}:P=>C(P,E)}function b(v,E,P){const S=v==="name",M=v==="type";for(const R of E){const I=R.config;if(S||M||I&&I.hasOwnProperty(v)){let A="#"+v+"#";for(let O=0;O<E.length;O++){O>0&&(A=A+P.delimiter);let N=E[O].name;M?N=E[O].type:S||(N=E[O].config[v]),N&&(A=A+C(N,P))}return A+P.newline}}return""}function g(){const v=["x","y"];return v.toLocaleString?v.toLocaleString().charAt(1):","}function p(v,E){if(!v)return"";E=(0,t.defaults)(E,{delimiter:g(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let P=E.useExcelHeader?`sep=${E.delimiter}${E.newline}`:"";for(let S=0;S<v.length;S++){const M=v[S],{fields:R}=M;if(R.length===0)continue;if(E.headerStyle===0)P=P+b("name",R,E)+b("type",R,E)+b("unit",R,E)+b("dateFormat",R,E);else if(E.headerStyle===1){for(let A=0;A<R.length;A++)A>0&&(P+=E.delimiter),P+=`"${(0,c.CZ)(R[A],M).replace(/"/g,'""')}"`;P+=E.newline}const I=R[0].values.length;if(I>0){const A=R.map(O=>x(O,E));for(let O=0;O<I;O++){for(let N=0;N<R.length;N++){N>0&&(P=P+E.delimiter);const o=R[N].values[O];o!==null&&(P=P+A[N](o))}O!==I-1&&(P=P+E.newline)}}S!==v.length-1&&(P=P+E.newline)}return P}},24824:(X,L,e)=>{"use strict";e.d(L,{W:()=>r,_:()=>a});var t=e(57837),n=e(69307);const r={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function a(l){const{onClickFn:d,replaceVariables:f,link:m,scopedVars:u,range:h,field:C,internalLink:x}=l,b=y(m.internal?.query,u,f),g=y(m.internal?.panelsState,u,f),p=m.title?m.title:x.datasourceName;return{title:f(p,u),href:i(x.datasourceUid,b,h,g),onClick:d?v=>{v.preventDefault(),d({datasourceUid:x.datasourceUid,queries:[b],panelsState:g,range:h})}:void 0,target:m?.targetBlank?"_blank":"_self",origin:C}}function i(l,d,f,m){return t.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.S)({...f?.raw?{range:(0,n.R_)(f.raw)}:{},datasource:l,queries:[d],panelsState:m}))}`)}function y(l,d,f){if(!l)return l;if(typeof l=="string")return f(l,d);const m=JSON.parse(JSON.stringify(l));return c(m,d,f)}function c(l,d,f){for(const m of Object.keys(l))typeof l[m]=="string"?l[m]=f(l[m],d):typeof l[m]=="object"&&l[m]!==null&&(l[m]=c(l[m],d,f));return l}},47635:(X,L,e)=>{"use strict";e.d(L,{BT:()=>i,HD:()=>u,Mf:()=>b,TX:()=>m,_R:()=>c,cv:()=>a,fd:()=>h,fi:()=>l,hz:()=>f,iU:()=>r,nx:()=>d,tp:()=>C,uw:()=>x,z_:()=>y});var t=e(86832),n=e.n(t);function r(g){return{uid:g.uid,type:g.type}}function a(g){return typeof g=="object"&&typeof g?.uid=="string"}function i(g){if(a(g))return g.uid;if((0,t.isString)(g))return g}const y=(g,p)=>v=>{h(g,p,v.currentTarget.value)},c=(g,p)=>v=>{C(g,p,v.currentTarget.value)},l=(g,p)=>v=>{x(g,p,v.currentTarget.value)},d=(g,p)=>v=>{C(g,p,v.value)},f=(g,p)=>v=>{C(g,p,v.currentTarget.checked)},m=(g,p)=>v=>{x(g,p,v.value)},u=(g,p)=>v=>{b(g,p)};function h(g,p,v){const E=g.options;g.onOptionsChange({...E,[p]:v})}const C=(g,p,v)=>{const E=g.options;g.onOptionsChange({...E,jsonData:{...E.jsonData,[p]:v}})},x=(g,p,v)=>{const E=g.options;g.onOptionsChange({...E,secureJsonData:{...E.secureJsonData?E.secureJsonData:{},[p]:v}})},b=(g,p)=>{const v=g.options;g.onOptionsChange({...v,secureJsonData:{...v.secureJsonData?v.secureJsonData:{},[p]:""},secureJsonFields:{...v.secureJsonFields,[p]:!1}})}},14255:(X,L,e)=>{"use strict";e.d(L,{d:()=>n});const t={},n=(r,a,i)=>{let y=`[Deprecation warning] ${r}: ${a} is deprecated`;i&&(y+=`. Use ${i} instead`);const c=Date.now(),l=t[y];(!l||c-l>1e4)&&(console.warn(y),t[y]=c)}},69240:(X,L,e)=>{"use strict";e.d(L,{H:()=>r,k:()=>n});var t=e(10694);function n({xField:a,yField:i,nullValueMode:y}){const c=a.values,l=i.values,d=c.length;if(l.length!==d)throw new Error("Unexpected field length");const f=y===t.Gl.Ignore,m=y===t.Gl.AsZero,u=[];for(let h=0;h<d;h++){const C=c[h];let x=l[h];if(x===null){if(f)continue;m&&(x=0)}C!==null&&u.push([C,x])}return u}function r(a,i){if(!i.from||!i.to||!a||a.length===0)return[];const y=i.from.valueOf(),c=i.to.valueOf(),l=a[0][1];return[[y,l],[c,l]]}},60061:(X,L,e)=>{"use strict";e.d(L,{LH:()=>u.L,x5:()=>i.x5,QM:()=>i.QM,WC:()=>v.W,xV:()=>E,vo:()=>x.vo,HU:()=>N.HU,zG:()=>h.z,rt:()=>x.rt,Bz:()=>n.B,IX:()=>S.I,sq:()=>t,nk:()=>u.n,ZC:()=>d,bf:()=>o.b,Jb:()=>N.Jb,d9:()=>a.d,FT:()=>y.FT,IU:()=>y.IU,aA:()=>y.aA,iU:()=>r.iU,BT:()=>r.BT,k8:()=>b.k,HE:()=>b.H,_6:()=>o._,e4:()=>f,dP:()=>c.d,fp:()=>m,cv:()=>r.cv,Qr:()=>l.Q,uT:()=>g.u,s2:()=>P.s,_N:()=>v._,VS:()=>y.VS,Hh:()=>l.H,_R:()=>r._R,hz:()=>r.hz,nx:()=>r.nx,z_:()=>r.z_,HD:()=>r.HD,fi:()=>r.fi,TX:()=>r.TX,J8:()=>y.J8,uP:()=>i.uP,Wn:()=>w.W,O9:()=>c.O,S:()=>p.S,MJ:()=>i.MJ,Er:()=>C.E,R_:()=>p.R_,tp:()=>r.tp,fd:()=>r.fd,Mf:()=>r.Mf,uw:()=>r.uw,Cj:()=>p.Cj,xc:()=>O});var t=e(24571),n=e(77663),r=e(47635),a=e(14255),i=e(29710),y=e(36822),c=e(99331),l=e(69084);const d=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],f=K=>{let V,_,U=Number.MAX_VALUE;for(let $=0;$<K.values.length;$++){const k=K.values[$];if(V!==void 0){const H=k-V;_===void 0&&(U=H),H<U&&(U=H)}V=k}return U},m=K=>{for(let V=0;V<K.values.length;V++){const _=K.values[V];if(_!=null){const U=_.toString();if(U.length===13&&U%1e3!==0)return!0}}return!1};var u=e(35648),h=e(2221),C=e(99456),x=e(98458),b=e(69240),g=e(57837),p=e(69307),v=e(24824),E=(K=>(K[K.Transformations=0]="Transformations",K[K.FieldConfig=1]="FieldConfig",K[K.FieldConfigOverrides=2]="FieldConfigOverrides",K))(E||{}),P=e(20510),S=e(97253),M=e(3195),R=e(46514),I=e(66453),A=e(79947);function O({whileLoading:K,source:V}){return(0,M.T)((0,R.H)(200).pipe((0,I.h)(K),(0,A.R)(V)),V)}var N=e(38450),o=e(40729),w=e(72964)},36822:(X,L,e)=>{"use strict";e.d(L,{FT:()=>r,IU:()=>a,J8:()=>n,VS:()=>i,aA:()=>y});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(c){const l={};return c.replace(t,(d,f,m,u)=>(l[f]=u,"")),l}function r(c){return c.reduce((l,d)=>{if(!d)throw new Error("Need parsed labels to find common labels.");return Object.keys(d).forEach(f=>{(l[f]===void 0||l[f]!==d[f])&&delete l[f]}),Object.keys(l).forEach(f=>{d[f]===void 0&&delete l[f]}),l},{...c[0]})}function a(c,l){const d={...c};return Object.keys(l).forEach(f=>{delete d[f]}),d}function i(c,l){if(!c)return!0;for(const[d,f]of Object.entries(c))if(!l||l[d]!==f)return!1;return!0}function y(c,l="",d){if(!c||Object.keys(c).length===0)return l;const m=Object.keys(c).sort().map(u=>`${u}="${c[u]}"`).join(", ");return d?m:["{",m,"}"].join("")}},72964:(X,L,e)=>{"use strict";e.d(L,{W:()=>t});function t(n,r){const a=/\{\{\s*(.+?)\s*\}\}/g;return n.replace(a,(i,y)=>r[y]?r[y]:y)}},57837:(X,L,e)=>{"use strict";e.d(L,{u:()=>m});var t=e(28425),n=e(69307);let r={appSubUrl:""},a,i;const y=u=>{try{return new URL(u)}catch{return}},c=u=>{const h=y(u);if(h&&h.origin!==window.location.origin)return u;const C=r.appSubUrl??"",x=C.endsWith("/")?1:0,b=u.startsWith("http");let g=C;return(!u.startsWith("/")||b)&&(g=`${window.location.origin}${C}`),u.length>0&&(u.indexOf(g+"/")===0||u===g)?u.slice(g.length-x):u},l=u=>u.startsWith("/")?`${r.appSubUrl}${c(u)}`:u,m={initialize:u=>{r=u.config,a=u.getTimeRangeForUrl,i=u.getVariablesUrlParams},stripBaseFromUrl:c,assureBaseUrl:l,updateSearchParams:(u,h)=>{const C=new URLSearchParams(h);try{const x=new URL(u);return C.forEach((b,g)=>x.searchParams.set(g,b)),x.href}catch{const x=new URLSearchParams(u);return C.forEach((b,g)=>{x.set(g,b)}),"?"+x.toString()}},getTimeRangeUrlParams:()=>a?n.Cj.toUrlParams(a()):null,getVariablesUrlParams:u=>{if(!i)return null;const h=i(u);return n.Cj.toUrlParams(h)},getUrlForPartial:(u,h)=>{const C=n.Cj.parseKeyValue(u.search.startsWith("?")?u.search.substring(1):u.search);for(const x of Object.keys(h))h[x]===null||h[x]===void 0?delete C[x]:C[x]=h[x];return l(n.Cj.renderUrl(u.pathname,C))},processUrl:u=>r.disableSanitizeHtml?u:t.QX.sanitizeUrl(u)}},20510:(X,L,e)=>{"use strict";e.d(L,{s:()=>t});function t(n){return new Proxy(n,{apply(r,a,i){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(r,i,a.constructor)}})}},2221:(X,L,e)=>{"use strict";e.d(L,{z:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.arc="arc__",n.icon="icon",n.color="color",n.source="source",n.target="target",n.detail="detail__",n.nodeRadius="noderadius",n))(t||{})},99331:(X,L,e)=>{"use strict";e.d(L,{O:()=>t,d:()=>n});function t(r,a=0){if(Number.isInteger(r))return r;let i=10**a,y=r*i*(1+Number.EPSILON);return Math.round(y)/i}function n(r){return((""+r).split(".")[1]||"").length}},69084:(X,L,e)=>{"use strict";e.d(L,{H:()=>t,Q:()=>n});const t=r=>Object.keys(r).reduce((a,i)=>(r[i]!==void 0&&(a[i]=r[i]),a),{}),n=r=>typeof r=="object"&&r!==null&&Object.keys(r).length===0},99456:(X,L,e)=>{"use strict";e.d(L,{E:()=>t});const t=n=>({label:n,value:n})},69307:(X,L,e)=>{"use strict";e.d(L,{Cj:()=>d,R_:()=>m,S:()=>f});var t=e(92403);/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function n(u,h){return h&&Object.keys(h).length>0&&(u+="?"+a(h)),u}function r(u,h){return encodeURIComponent(u).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,h?"%20":"+").replace(/[!'()*]/g,function(C){return"%"+C.charCodeAt(0).toString(16).toUpperCase()})}function a(u){const h=[],C=/\[\]$/,x=p=>Object.prototype.toString.call(p)==="[object Array]",b=(p,v)=>{if(v=typeof v=="function"?v():v===null||v===void 0?"":v,typeof v!="boolean")h[h.length]=r(p,!0)+"="+r(v,!0);else{const E=v?"":"="+r("false",!0);h[h.length]=r(p,!0)+E}},g=(p,v)=>{let E,P,S;if(p)if(x(v))for(E=0,P=v.length;E<P;E++)C.test(p)?b(p,v[E]):g(p,v[E]);else if(v&&String(v)==="[object Object]")for(S in v)g(p+"["+S+"]",v[S]);else b(p,v);else if(x(v))for(E=0,P=v.length;E<P;E++)b(v[E].name,v[E].value);else for(S in v)g(S,v[S]);return h};return g("",u).join("&")}function i(u,h){if(h!=null&&h!==""){const C=u.indexOf("?");C!==-1?u.length-C>1&&(u+="&"):u+="?",u+=h}return u}function y(){const h=window.location.search.substring(1).split("&"),C={};for(const x of h){const b=x.split("=");if(b.length>1){const g=decodeURIComponent(b[0]),p=decodeURIComponent(b[1]);g in C?C[g]=[...C[g],p]:C[g]=[p]}else if(b.length===1){const g=decodeURIComponent(b[0]);C[g]=!0}}return C}function c(u){const h={},C=(u||"").split("&");for(let x of C){let b,g,p;if(x&&(g=x=x.replace(/\+/g,"%20"),b=x.indexOf("="),b!==-1&&(g=x.substring(0,b),p=x.substring(b+1)),g=l(g),g!==void 0)){p=p!==void 0?l(p):!0;let v;typeof p=="string"&&p!==""?v=p==="true"||p==="false"?p==="true":p:v=p,h.hasOwnProperty(g)?Array.isArray(h[g])?h[g].push(p):h[g]=[h[g],isNaN(v)?p:v]:h[g]=isNaN(v)?p:v}}return h}function l(u){try{return decodeURIComponent(u)}catch{return}}const d={renderUrl:n,toUrlParams:a,appendQueryToUrl:i,getUrlSearchParams:y,parseKeyValue:c};function f(u,h){return h!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(u)}const m=u=>{let h=u.from;(0,t.v9)(h)&&(h=h.valueOf().toString());let C=u.to;return(0,t.v9)(C)&&(C=C.valueOf().toString()),{from:h,to:C}}},38450:(X,L,e)=>{"use strict";e.d(L,{HU:()=>y,Jb:()=>c,vh:()=>a});var t=e(49231),n=e(55705),r=e(23955);function a(d,f){for(const m of d)switch(m.type){case r.H.ValueToText:if(f==null)continue;const u=m.options[f];if(u)return u;break;case r.H.RangeToText:if(f==null)continue;const h=parseFloat(f);if(isNaN(h)||!isNaN(m.options.from)&&h<m.options.from||!isNaN(m.options.to)&&h>m.options.to)continue;return m.options.result;case r.H.RegexToText:if(f==null||typeof f!="string")continue;const b=(0,n.jO)(m.options.pattern);if(f.match(b)){const g={...m.options.result};return g.text!=null&&(g.text=f.replace(b,m.options.result.text||"")),g}case r.H.SpecialValue:switch(m.options.match){case r.e.Null:{if(f==null)return m.options.result;break}case r.e.NaN:{if(typeof f=="number"&&isNaN(f))return m.options.result;break}case r.e.NullAndNaN:{if(typeof f=="number"&&isNaN(f)||f==null)return m.options.result;break}case r.e.True:{if(f===!0||f==="true")return m.options.result;break}case r.e.False:{if(f===!1||f==="false")return m.options.result;break}case r.e.Empty:{if(f==="")return m.options.result;break}}}return null}function i(d){return(typeof d=="number"||typeof d=="string"&&d.trim()!=="")&&!isNaN(d)}var y=(d=>(d[d.ValueToText=1]="ValueToText",d[d.RangeToText=2]="RangeToText",d))(y||{});function c(d,f){const m=[];let u=d.mappingType;if(d.mappingType||(d.valueMaps&&d.valueMaps.length?u=1:d.rangeMaps&&d.rangeMaps.length&&(u=2)),u===1)for(let h=0;h<d.valueMaps.length;h++){const C=d.valueMaps[h];m.push(l({...C,id:h,type:r.H.ValueToText},d.fieldConfig?.defaults?.thresholds||f))}else if(u===2)for(let h=0;h<d.rangeMaps.length;h++){const C=d.rangeMaps[h];m.push(l({...C,id:h,type:r.H.RangeToText},d.fieldConfig?.defaults?.thresholds||f))}return m}function l(d,f){const m={type:r.H.ValueToText,options:{}},u=[];let h;const C=parseFloat(d.text);if(f&&!isNaN(C)){const x=(0,t.m1)(C,f.steps);x&&x.color&&(h=x.color)}switch(d.type){case 1:case r.H.ValueToText:d.value!=null&&(d.value==="null"?u.push({type:r.H.SpecialValue,options:{match:r.e.Null,result:{text:d.text,color:h}}}):m.options[String(d.value)]={text:d.text,color:h});break;case 2:case r.H.RangeToText:d.from==="null"||d.to==="null"?u.push({type:r.H.SpecialValue,options:{match:r.e.Null,result:{text:d.text,color:h}}}):u.push({type:r.H.RangeToText,options:{from:+d.from,to:+d.to,result:{text:d.text,color:h}}});break}return Object.keys(m.options).length>0&&u.unshift(m),u[0]}},40729:(X,L,e)=>{"use strict";e.d(L,{_:()=>r,b:()=>n});const t="__searchFilter",n=a=>a&&typeof a=="string"?a.indexOf(t)!==-1:!1,r=a=>{const{query:i,wildcardChar:y}=a;if(!n(i))return{};let{options:c}=a;return c=c||{searchFilter:""},{__searchFilter:{value:c.searchFilter?`${c.searchFilter}${y}`:`${y}`,text:""}}}},75172:(X,L,e)=>{"use strict";e.d(L,{Cf:()=>t.Cf,FH:()=>t.FH,IR:()=>t.IR,QW:()=>t.QW,Qj:()=>t.Qj,SP:()=>t.SP,SR:()=>t.SR,Td:()=>t.Td,bn:()=>t.bn,br:()=>t.br,q2:()=>t.q2,vb:()=>t.vb,zc:()=>t.zc});var t=e(83502)},6787:(X,L,e)=>{"use strict";e.d(L,{Aq:()=>n,Yh:()=>c,dT:()=>i,i7:()=>l});var t=e(83502);function n(d,f){const m=["","K","M","B","T"],u=(0,t.Qj)(1e3,m);return(h,C,x)=>{if(h==null)return{text:""};const b=h<0;b&&(h=Math.abs(h));const g=u(h,C,x);return f?g.suffix=g.suffix!==void 0?`${g.suffix}${d}`:void 0:g.prefix=d,b&&(g.prefix=`-${g.prefix?.length?g.prefix:""}`),g}}const r=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],a=r.indexOf("");function i(d){const f=r.findIndex(m=>m.normalize("NFKD")===d.normalize("NFKD"));return f<0?0:f-a}const y=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function c(d,f=0){const m=y.map(u=>" "+u+d);return(0,t.Qj)(1024,m,f)}function l(d,f=0){const m=r.map(u=>" "+u+d);return(0,t.Qj)(1e3,m,a+f)}},83502:(X,L,e)=>{"use strict";e.d(L,{IR:()=>me,zc:()=>J,Cf:()=>Ie,QW:()=>Qe,Td:()=>ot,br:()=>he,SP:()=>Ee,Qj:()=>le,SR:()=>be,vb:()=>ge,FH:()=>ee,bn:()=>Pe,q2:()=>ye});var t=e(86832);function n(Me,Ne){return Me===null?{text:""}:{text:ee(Me,Ne),suffix:"%"}}function r(Me,Ne){return Me===null?{text:""}:{text:ee(100*Me,Ne),suffix:"%"}}function a(Me,Ne){if(Me==null)return{text:""};const qe=i(Me,Ne);return qe.text.substring(0,1)==="-"?qe.text="-0x"+qe.text.substring(1):qe.text="0x"+qe.text,qe}function i(Me,Ne){return Me==null?{text:""}:{text:parseFloat(ee(Me,Ne)).toString(16).toUpperCase()}}function y(Me,Ne){return Me==null?{text:""}:{text:Me.toExponential(Ne??void 0)}}var c=e(48069),l=e(47330),d=e(92403),f=(Me=>(Me.Year="year",Me.Month="month",Me.Week="week",Me.Day="day",Me.Hour="hour",Me.Minute="minute",Me.Second="second",Me.Millisecond="millisecond",Me))(f||{});const m=["year","month","week","day","hour","minute","second","millisecond"],u={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function h(Me,Ne){return Me===null?{text:""}:Math.abs(Me)<1e3?{text:ee(Me,Ne),suffix:" ns"}:Math.abs(Me)<1e6?Pe(Me/1e3,Ne," \xB5s"):Math.abs(Me)<1e9?Pe(Me/1e6,Ne," ms"):Math.abs(Me)<6e10?Pe(Me/1e9,Ne," s"):Math.abs(Me)<36e11?Pe(Me/6e10,Ne," min"):Math.abs(Me)<864e11?Pe(Me/36e11,Ne," hour"):Pe(Me/864e11,Ne," day")}function C(Me,Ne){return Me===null?{text:""}:Math.abs(Me)<1e3?{text:ee(Me,Ne),suffix:" \xB5s"}:Math.abs(Me)<1e6?Pe(Me/1e3,Ne," ms"):Pe(Me/1e6,Ne," s")}function x(Me,Ne,qe){return Me===null?{text:""}:Math.abs(Me)<1e3?{text:ee(Me,Ne),suffix:" ms"}:Math.abs(Me)<6e4?Pe(Me/1e3,Ne," s"):Math.abs(Me)<36e5?Pe(Me/6e4,Ne," min"):Math.abs(Me)<864e5?Pe(Me/36e5,Ne," hour"):Math.abs(Me)<31536e6?Pe(Me/864e5,Ne," day"):Pe(Me/31536e6,Ne," year")}function b(Me,Ne){if(Me!=null&&Ne!==null&&Ne!==void 0)return Me-Ne}function g(Me,Ne){return Me===null?{text:""}:Me===0?{text:"0",suffix:" s"}:Math.abs(Me)<1e-6?Pe(Me*1e9,Ne," ns"):Math.abs(Me)<.001?Pe(Me*1e6,Ne," \xB5s"):Math.abs(Me)<1?Pe(Me*1e3,Ne," ms"):Math.abs(Me)<60?{text:ee(Me,Ne),suffix:" s"}:Math.abs(Me)<3600?Pe(Me/60,Ne," min"):Math.abs(Me)<86400?Pe(Me/3600,Ne," hour"):Math.abs(Me)<604800?Pe(Me/86400,Ne," day"):Math.abs(Me)<31536e3?Pe(Me/604800,Ne," week"):Pe(Me/31556900,Ne," year")}function p(Me,Ne){return Me===null?{text:""}:Math.abs(Me)<60?{text:ee(Me,Ne),suffix:" min"}:Math.abs(Me)<1440?Pe(Me/60,Ne," hour"):Math.abs(Me)<10080?Pe(Me/1440,Ne," day"):Math.abs(Me)<604800?Pe(Me/10080,Ne," week"):Pe(Me/525948,Ne," year")}function v(Me,Ne){return Me===null?{text:""}:Math.abs(Me)<24?{text:ee(Me,Ne),suffix:" hour"}:Math.abs(Me)<168?Pe(Me/24,Ne," day"):Math.abs(Me)<8760?Pe(Me/168,Ne," week"):Pe(Me/8760,Ne," year")}function E(Me,Ne){return Me===null?{text:""}:Math.abs(Me)<7?{text:ee(Me,Ne),suffix:" day"}:Math.abs(Me)<365?Pe(Me/7,Ne," week"):Pe(Me/365,Ne," year")}function P(Me,Ne,qe){if(Me===null)return{text:""};if(Me===0)return{text:"0",suffix:" "+qe+"s"};if(Me<0){const Ue=P(-Me,Ne,qe);return Ue.suffix||(Ue.suffix=""),Ue.suffix+=" ago",Ue}Me*=u[qe]*1e3;const bt=[];let Fe=!1,Ve=0;Ne!=null&&(Ve=Ne);for(let Ue=0;Ue<m.length&&Ve>=0;Ue++){const it=u[m[Ue]]*1e3,ze=Me/it;if(ze>=1||Fe){Fe=!0;const Xe=Math.floor(ze),St=m[Ue]+(Xe!==1?"s":"");bt.push(Xe+" "+St),Me=Me%it,Ve--}}return{text:bt.join(", ")}}function S(Me,Ne){if(Me===null)return{text:""};if(Me<1e3)return{text:(0,d.zh)(Me).format("SSS\\m\\s")};if(Me<6e4){let Ve="ss\\s:SSS\\m\\s";return Ne===0&&(Ve="ss\\s"),{text:(0,d.zh)(Me).format(Ve)}}if(Me<36e5){let Ve="mm\\m:ss\\s:SSS\\m\\s";return Ne===0?Ve="mm\\m":Ne===1&&(Ve="mm\\m:ss\\s"),{text:(0,d.zh)(Me).format(Ve)}}let qe="mm\\m:ss\\s:SSS\\m\\s";const bt=`${("0"+Math.floor((0,d.Ks)(Me,"milliseconds").asHours())).slice(-2)}h`;return Ne===0?qe="":Ne===1?qe="mm\\m":Ne===2&&(qe="mm\\m:ss\\s"),{text:qe?`${bt}:${(0,d.zh)(Me).format(qe)}`:bt}}function M(Me,Ne){return P(Me,Ne,"millisecond")}function R(Me,Ne){return P(Me,Ne,"second")}function I(Me){if(Me<0){const Ve=I(-Me);return Ve.suffix||(Ve.suffix=""),Ve.suffix+=" ago",Ve}const Ne=[],qe=Math.floor(Me/3600),bt=Math.floor(Me%3600/60),Fe=Math.floor(Me%3600%60);return qe>9?Ne.push(""+qe):Ne.push("0"+qe),bt>9?Ne.push(""+bt):Ne.push("0"+bt),Fe>9?Ne.push(""+Fe):Ne.push("0"+Fe),{text:Ne.join(":")}}function A(Me){if(Me<0){const Fe=A(-Me);return Fe.suffix||(Fe.suffix=""),Fe.suffix+=" ago",Fe}let Ne="";const qe=Math.floor(Me/(24*3600));qe>0&&(Ne=qe+" d ");const bt=I(Me-qe*24*3600);return{text:Ne+bt.text}}function O(Me,Ne){return g(Me/100,Ne)}function N(Me,Ne){return S(Me,Ne)}function o(Me,Ne){return S(Me*1e3,Ne)}function w(Me,Ne){return(qe,bt,Fe,Ve)=>Ne&&(0,d.CQ)().isSame(qe,"day")?{text:(0,c.dq)(qe,{format:Ne,timeZone:Ve})}:{text:(0,c.dq)(qe,{format:Me,timeZone:Ve})}}const K=w("YYYY-MM-DD HH:mm:ss"),V=w("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),_=w("MM/DD/YYYY h:mm:ss a"),U=w("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function $(){return w((0,l.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function k(){return w((0,l.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,l.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function H(Me,Ne,qe,bt,Fe){return{text:(0,c.dq)(Me,{format:Fe?l.U6.fullDateMS:l.U6.fullDate,timeZone:bt})}}function j(Me,Ne,qe,bt){return{text:(0,c.E8)(Me,{timeZone:bt})}}var z=e(6787);const F=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:ye("")},{name:"String",id:"string",fn:ge},{name:"short",id:"short",fn:le(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:r},{name:"Humidity (%H)",id:"humidity",fn:ye("%H")},{name:"Decibel",id:"dB",fn:ye("dB")},{name:"Candela (cd)",id:"candela",fn:(0,z.i7)("cd")},{name:"Hexadecimal (0x)",id:"hex0x",fn:a},{name:"Hexadecimal",id:"hex",fn:i},{name:"Scientific notation",id:"sci",fn:y},{name:"Locale format",id:"locale",fn:Ee},{name:"Pixels",id:"pixel",fn:ye("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:ye("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:ye("f/sec\xB2")},{name:"G unit",id:"accG",fn:ye("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:ye("\xB0")},{name:"Radians",id:"radian",fn:ye("rad")},{name:"Gradian",id:"grad",fn:ye("grad")},{name:"Arc Minutes",id:"arcmin",fn:ye("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:ye("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:ye("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:ye("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:ye("mi\xB2")},{name:"Acres (ac)",id:"acres",fn:ye("ac")},{name:"Hectares (ha)",id:"hectares",fn:ye("ha")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,z.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,z.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,z.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,z.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,z.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,z.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,z.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,z.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:ye("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:ye("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:ye("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:ye("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:ye("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:ye("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:ye("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:ye("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:ye("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:ye("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:ye("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:ye("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,z.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,z.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,z.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,z.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,z.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,z.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,z.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,z.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,z.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,z.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,z.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,z.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,z.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,z.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,z.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,z.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,z.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,z.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,z.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,z.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,z.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,z.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,z.Aq)("\u0111",!0)},{name:"Turkish Lira (\u20BA)",id:"currencyTRY",fn:(0,z.Aq)("\u20BA",!0)},{name:"Malaysian Ringgit (RM)",id:"currencyMYR",fn:(0,z.Aq)("RM")},{name:"CFP franc (XPF)",id:"currencyXPF",fn:(0,z.Aq)("XPF")}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,z.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,z.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,z.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,z.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,z.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,z.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,z.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,z.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,z.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,z.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,z.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,z.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,z.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,z.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,z.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,z.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,z.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,z.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,z.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,z.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,z.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,z.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,z.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,z.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,z.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,z.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,z.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,z.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,z.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,z.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,z.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,z.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,z.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,z.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,z.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,z.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,z.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,z.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,z.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:K},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:V},{name:"Datetime US",id:"dateTimeAsUS",fn:_},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:U},{name:"Datetime local",id:"dateTimeAsLocal",fn:$()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:k()},{name:"Datetime default",id:"dateTimeAsSystem",fn:H},{name:"From Now",id:"dateTimeFromNow",fn:j}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,z.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,z.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,z.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,z.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,z.i7)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:ye("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,z.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,z.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,z.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,z.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,z.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,z.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,z.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,z.i7)("W-Min",1)},{name:"Megawatt-hour (MWh)",id:"mwatth",fn:(0,z.i7)("Wh",2)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,z.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,z.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,z.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,z.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,z.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,z.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,z.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,z.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,z.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,z.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,z.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,z.i7)("dBm")},{name:"Milliohm (m\u03A9)",id:"mohm",fn:(0,z.i7)("\u03A9",-1)},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,z.i7)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,z.i7)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,z.i7)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,z.i7)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,z.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,z.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,z.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,z.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,z.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,z.i7)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,z.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,z.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:ye("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:ye("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:ye("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:ye("cfm")},{name:"Litre/hour",id:"litreh",fn:ye("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:ye("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:ye("mL/min")},{name:"Lux (lx)",id:"lux",fn:ye("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,z.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,z.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,z.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,z.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,z.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,z.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,z.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,z.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,z.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,z.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,z.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,z.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,z.i7)("g")},{name:"pound (lb)",id:"masslb",fn:ye("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,z.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:ye("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,z.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:ye("in")},{name:"feet (ft)",id:"lengthft",fn:ye("ft")},{name:"meter (m)",id:"lengthm",fn:(0,z.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,z.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:ye("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,z.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,z.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,z.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,z.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:ye("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:ye("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:ye('"Hg')},{name:"PSI",id:"pressurepsi",fn:le(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,z.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,z.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,z.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,z.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,z.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,z.i7)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,z.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,z.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,z.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,z.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,z.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,z.i7)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,z.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:ye("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,z.i7)("Hz")},{name:"Kilohertz (kHz)",id:"rotkhz",fn:(0,z.i7)("Hz",1)},{name:"Megahertz (MHz)",id:"rotmhz",fn:(0,z.i7)("Hz",2)},{name:"Gigahertz (GHz)",id:"rotghz",fn:(0,z.i7)("Hz",3)},{name:"Radians per second (rad/s)",id:"rotrads",fn:ye("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:ye("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:ye("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:ye("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:ye("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,z.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:h},{name:"microseconds (\xB5s)",id:"\xB5s",fn:C},{name:"milliseconds (ms)",id:"ms",fn:x},{name:"seconds (s)",id:"s",fn:g},{name:"minutes (m)",id:"m",fn:p},{name:"hours (h)",id:"h",fn:v},{name:"days (d)",id:"d",fn:E},{name:"duration (ms)",id:"dtdurationms",fn:M},{name:"duration (s)",id:"dtdurations",fn:R},{name:"duration (hh:mm:ss)",id:"dthms",fn:I},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:A},{name:"Timeticks (s/100)",id:"timeticks",fn:O},{name:"clock (ms)",id:"clockms",fn:N},{name:"clock (s)",id:"clocks",fn:o}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:be("c/s")},{name:"ops/sec (ops)",id:"ops",fn:be("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:be("req/s")},{name:"reads/sec (rps)",id:"rps",fn:be("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:be("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:be("io/s")},{name:"events/sec (eps)",id:"eps",fn:be("evt/s")},{name:"messages/sec (mps)",id:"mps",fn:be("msg/s")},{name:"records/sec (rps)",id:"recps",fn:be("rec/s")},{name:"rows/sec (rps)",id:"rowsps",fn:be("rows/s")},{name:"counts/min (cpm)",id:"cpm",fn:be("c/m")},{name:"ops/min (opm)",id:"opm",fn:be("ops/m")},{name:"requests/min (rpm)",id:"reqpm",fn:be("req/m")},{name:"reads/min (rpm)",id:"rpm",fn:be("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:be("wr/m")},{name:"events/min (epm)",id:"epm",fn:be("evts/m")},{name:"messages/min (mpm)",id:"mpm",fn:be("msgs/m")},{name:"records/min (rpm)",id:"recpm",fn:be("rec/m")},{name:"rows/min (rpm)",id:"rowspm",fn:be("rows/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:ye("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:ye("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:ye("mph")},{name:"knot (kn)",id:"velocityknot",fn:ye("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,z.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,z.i7)("L")},{name:"cubic meter",id:"m3",fn:ye("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:ye("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:ye("dm\xB3")},{name:"gallons",id:"gallons",fn:ye("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:me("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:me("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:me("On","Off")}]}];function J(Me){return`${Me.prefix??""}${Me.text}${Me.suffix??""}`}let Q=[];const Z={};let ne=!1;function ee(Me,Ne){if(Me===null)return"";if(Me===Number.NEGATIVE_INFINITY||Me===Number.POSITIVE_INFINITY)return Me.toLocaleString();if(Ne==null&&(Ne=de(Me)),Me===0)return Me.toFixed(Ne);const qe=Ne?Math.pow(10,Math.max(0,Ne)):1,bt=String(Math.round(Me*qe)/qe);if(bt.indexOf("e")!==-1||Me===0)return bt;const Fe=bt.indexOf("."),Ve=Fe===-1?0:bt.length-Fe-1;return Ve<Ne?(Ve?bt:bt+".")+String(qe).slice(1,Ne-Ve+1):bt}function de(Me){const Ne=Math.abs(Me);let bt=-Math.floor(Math.log(Ne)/Math.LN10)+1;const Fe=Math.pow(10,-bt);return Ne/Fe>2.25&&++bt,Me%1===0&&(bt=0),Math.max(0,bt)}function Pe(Me,Ne,qe){return{text:ee(Me,Ne),suffix:qe}}function ye(Me,Ne){return(qe,bt)=>{if(qe===null)return{text:""};const Fe=ee(qe,bt);return Me?Ne?{text:Fe,prefix:Me}:{text:Fe,suffix:" "+Me}:{text:Fe}}}function he(Me){return Me&&Me.startsWith("bool")}function me(Me,Ne){return qe=>({text:qe?Me:Ne})}const De=(Me,Ne)=>Math.log10(Ne)/Math.log10(Me);function le(Me,Ne,qe=0){return(bt,Fe)=>{if(bt==null)return{text:""};if(bt===Number.NEGATIVE_INFINITY||bt===Number.POSITIVE_INFINITY||isNaN(bt))return{text:bt.toLocaleString()};const Ve=bt===0?0:Math.floor(De(Me,Math.abs(bt))),Ue=Ne[(0,t.clamp)(qe+Ve,0,Ne.length-1)];return{text:ee(bt/Me**(0,t.clamp)(Ve,-qe,Ne.length-qe-1),Fe),suffix:Ue}}}function Ee(Me,Ne){return Me==null?{text:""}:{text:Me.toLocaleString(void 0,{maximumFractionDigits:Ne??void 0})}}function be(Me){const qe=le(1e3,["","K","M","B","T"]);return(bt,Fe,Ve)=>{if(bt===null)return{text:""};const Ue=qe(bt,Fe,Ve);return Ue.suffix+=" "+Me,Ue}}function ge(Me){return{text:`${Me}`}}function ue(){Q=F();for(const Me of Q)for(const Ne of Me.formats)Z[Ne.id]=Ne.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(Me=>{const Ne=Z[Me.to];Ne&&(Z[Me.from]=Ne)}),ne=!0}function Ie(Me){if(!Me)return ye("");ne||ue();const Ne=Z[Me];if(!Ne&&Me){let qe=Me.indexOf(":");if(qe>0){const bt=Me.substring(0,qe),Fe=Me.substring(qe+1);if(bt==="prefix")return ye(Fe,!0);if(bt==="suffix")return ye(Fe,!1);if(bt==="time")return w(Fe);if(bt==="si"){const Ve=(0,z.dT)(Fe.charAt(0)),Ue=Ve===0?Fe:Fe.substring(1);return(0,z.i7)(Ue,Ve)}if(bt==="count")return be(Fe);if(bt==="currency")return(0,z.Aq)(Fe);if(bt==="bool"){if(qe=Fe.indexOf("/"),qe>=0){const Ve=Fe.substring(0,qe),Ue=Fe.substring(qe+1);return me(Ve,Ue)}return me(Fe,"-")}}return ye(Me)}return Ne}function ot(){return ne||ue(),Z}function Qe(){return ne||ue(),Q.map(Me=>({text:Me.name,submenu:Me.formats.map(Ne=>({text:Ne.name,value:Ne.id}))}))}},86756:(X,L,e)=>{"use strict";e.d(L,{G:()=>r});const t="ArrayVector is deprecated and will be removed in Grafana 11. Please use plain arrays for field.values.";let n=!1;class r extends Array{get buffer(){return this}set buffer(i){this.length=0;const y=i?.length;if(y){let c=65e3,l=Math.ceil(y/c);for(let d=0;d<l;d++)this.push.apply(this,i.slice(d*c,(d+1)*c))}}constructor(i){super(),this.buffer=i??[],n||(console.warn(t),n=!0)}toJSON(){return[...this]}}},68016:(X,L,e)=>{"use strict";e.d(L,{d:()=>r});var t=e(11574),n=e(98975);class r extends n.G{constructor(i){return super(),this.buffer=i.buffer||[],this.capacity=this.buffer.length,this.tail=i.append!=="head",this.index=0,this.add=this.getAddFunction(),i.capacity&&this.setCapacity(i.capacity),(0,t.U)(this)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?i=>{this.buffer.push(i),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:i=>{this.buffer.unshift(i),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?i=>{this.buffer[this.index]=i,this.index=(this.index+1)%this.buffer.length}:i=>{let y=this.index-1;y<0&&(y=this.buffer.length-1),this.buffer[y]=i,this.index=y}}setCapacity(i){if(this.capacity===i)return;const y=this.toArray();if(i>this.length)this.buffer=y;else if(i<this.capacity){const c=this.length-i;this.tail?this.buffer=y.slice(c,y.length):this.buffer=y.slice(0,y.length-c)}this.capacity=i,this.index=0,this.add=this.getAddFunction()}setAppendMode(i){const y=i!=="head";y!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=y,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(i){return this.buffer[(i+this.index)%this.buffer.length]}set(i,y){this.buffer[(i+this.index)%this.buffer.length]=y}get length(){return this.buffer.length}}},98975:(X,L,e)=>{"use strict";e.d(L,{G:()=>n,s:()=>a});var t=e(15679);class n{*iterator(){for(let y=0;y<this.length;y++)yield this.get(y)}set(y,c){throw"unsupported operation"}add(y){throw"unsupported operation"}push(...y){for(const c of y)this.add(c);return this.length}[Symbol.iterator](){return this.iterator()}forEach(y){return a(this).forEach(y)}map(y){return a(this).map(y)}filter(y){return a(this).filter(y)}at(y){return this.get(y)}toArray(){return(0,t.n)(this)}join(y){return this.toArray().join(y)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...y){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(y){throw new Error("Method not implemented.")}splice(y,c,...l){throw new Error("Method not implemented.")}unshift(...y){throw new Error("Method not implemented.")}fill(y,c,l){throw new Error("Method not implemented.")}copyWithin(y,c,l){throw new Error("Method not implemented.")}[Symbol.unscopables](){throw new Error("Method not implemented.")}slice(y,c){return this.toArray().slice(y,c)}indexOf(y,c){return this.toArray().indexOf(y,c)}lastIndexOf(y,c){return this.toArray().lastIndexOf(y,c)}every(y,c){return this.toArray().every(y,c)}some(y,c){return this.toArray().some(y,c)}reduce(y,c){throw new Error("Method not implemented.")}reduceRight(y,c){throw new Error("Method not implemented.")}find(y,c){return this.toArray().find(y,c)}findIndex(y,c){return this.toArray().findIndex(y,c)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(y,c){return this.toArray().includes(y,c)}flatMap(y,c){return this.toArray().flatMap(y,c)}flat(y){throw new Error("Method not implemented.")}}const r=[];function a(i){return{*[Symbol.iterator](){for(let y=0;y<i.length;y++)yield i.get(y)},forEach(y){for(let c=0;c<i.length;c++)y(i.get(c),c,r)},map(y){const c=[];for(let l=0;l<i.length;l++)c.push(y(i.get(l),l,r));return c},filter(y){const c=[];let l=0;for(const d of this)y(d,l++,r)&&c.push(d);return c}}}},88350:(X,L,e)=>{"use strict";e.d(L,{o:()=>a});var t=e(11574),n=e(98975),r=e(15679);class a extends n.G{constructor(y,c){return super(),this.source=y,this.order=c,(0,t.U)(this)}get length(){return this.source.length}get(y){return this.source.get(this.order[y])}toArray(){return(0,r.n)(this)}toJSON(){return(0,r.n)(this)}getOrderArray(){return this.order}}},67757:(X,L,e)=>{"use strict";e.d(L,{l$:()=>a,Gt:()=>i.G,sq:()=>C,rM:()=>l,dV:()=>y.d,uI:()=>c,$Y:()=>m,rm:()=>h,oH:()=>d.o,sD:()=>n.s});var t=e(11574),n=e(98975),r=e(15679);class a extends n.G{constructor(b=0){return super(),this.length=0,this.source=[],this.length=b,(0,t.U)(this)}setLength(b){if(b>this.length)this.length=b;else if(b<this.length){const g=[];for(const p of this.source)if(g.push(p),p.end>b){p.end=b;break}this.source=g,this.length=b}}append(b){const g={start:this.length,end:this.length+b.length,values:b};return this.length=g.end,this.source.push(g),g}get(b){for(let g=0;g<this.source.length;g++){const p=this.source[g];if(b>=p.start&&b<p.end)return p.values[b-p.start]}}toArray(){return(0,r.n)(this)}toJSON(){return(0,r.n)(this)}}var i=e(86756),y=e(68016);class c extends Array{constructor(b,g){return super(),new Array(g).fill(b)}}class l extends Array{constructor(b,g,p){super();const v=new Array(b.length);for(let E=0;E<v.length;E++)v[E]=p(b[E],g[E]);return v}}var d=e(88350),f=e(83502);class m extends Array{constructor(b,g){return super(),b.map(p=>(0,f.zc)(g(p)))}}var u=e(89591);class h extends Array{constructor(b){super();const g=new Array(b);for(let p=0;p<b;p++)g[p]=p;return g}static newField(b){return{name:"",values:new h(b),type:u.fS.number,config:{min:0,max:b-1}}}}class C extends Array{constructor(b){return super(),b.map(g=>+g)}}},15679:(X,L,e)=>{"use strict";e.d(L,{n:()=>t});function t(n){const r=Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.get(a);return r}},39060:(X,L,e)=>{"use strict";e.d(L,{I:()=>n,i:()=>r});var t=e(32688);function n(a){return{grafana_version:t.config.buildInfo.version,plugin_type:String(a.type),plugin_version:a.info.version,plugin_id:a.id,plugin_name:a.name}}function r(a){return{...n(a.meta),datasource_uid:a.uid}}},32822:(X,L,e)=>{"use strict";e.d(L,{Q:()=>c});var t=e(39953),n=e(67093),r=e(74948),a=e(72639),i=e(39060);const y="grafana_plugin_";function c(){const d=(0,n.g)();return(0,t.useMemo)(()=>{const f=(0,r.v)(d)?(0,i.i)(d.instanceSettings):(0,i.I)(d.meta);return(m,u)=>{if(!l(m))throw new Error(`Interactions reported in plugins should start with: "${y}".`);return(0,a.ff)(m,{...u,...f})}},[d])}function l(d){return d.startsWith(y)&&d.length>y.length}},4651:(X,L,e)=>{"use strict";e.d(L,{Si:()=>n,ct:()=>t,fV:()=>r,mR:()=>a});var t=(i=>(i.DashboardView="dashboard-view",i.DataRequest="data-request",i))(t||{});const n=i=>!!i.payload.page,r=i=>!!i.payload.interactionName,a=i=>!!i.payload.experimentId},72639:(X,L,e)=>{"use strict";e.d(L,{SZ:()=>c,ff:()=>y,r_:()=>a,sm:()=>i});var t=e(32688),n=e(13601),r=e(30281);const a=l=>{(0,r.RP)().addEvent({type:r.ee.MetaAnalytics,payload:l})},i=()=>{const l=n.E1.getLocation(),d=`${t.config.appSubUrl??""}${l.pathname}${l.search}${l.hash}`;(0,r.RP)().addEvent({type:r.ee.Pageview,payload:{page:d}})},y=(l,d)=>{(0,r.RP)().addEvent({type:r.ee.Interaction,payload:{interactionName:l,properties:d}})},c=(l,d,f)=>{(0,r.RP)().addEvent({type:r.ee.ExperimentView,payload:{experimentId:l,experimentGroup:d,experimentVariant:f}})}},39458:(X,L,e)=>{"use strict";e.d(L,{q:()=>f});var t=e(39953),n=e(47635),r=e(88227),a=e(75766),i=e(9558),y=e(12223),c=e(45802),l=e(26205),d=e(92743);class f extends t.PureComponent{constructor(u){super(u),this.dataSourceSrv=(0,l.F)(),this.state={},this.onChange=(h,C)=>{if(C.action==="clear"&&this.props.onClear){this.props.onClear();return}const x=this.dataSourceSrv.getInstanceSettings(h.value);x&&(this.props.onChange(x),this.setState({error:void 0}))}}componentDidMount(){const{current:u}=this.props;this.dataSourceSrv.getInstanceSettings(u)||this.setState({error:"Could not find data source "+u})}getCurrentValue(){const{current:u,hideTextValue:h,noDefault:C}=this.props;if(!u&&C)return;const x=this.dataSourceSrv.getInstanceSettings(u);if(x)return{label:x.name.slice(0,37),value:x.uid,imgUrl:x.meta.info.logos.small,hideText:h,meta:x.meta};const b=(0,n.BT)(u);return b===d.hr.uid||b===d.hr.name?{label:b,value:b,hideText:h}:{label:(b??"no name")+" - not found",value:b??void 0,imgUrl:"",hideText:h}}getDataSourceOptions(){const{alerting:u,tracing:h,metrics:C,mixed:x,dashboard:b,variables:g,annotations:p,pluginId:v,type:E,filter:P,logs:S}=this.props;return this.dataSourceSrv.getList({alerting:u,tracing:h,metrics:C,logs:S,dashboard:b,mixed:x,variables:g,annotations:p,pluginId:v,filter:P,type:E}).map(R=>({value:R.name,label:`${R.name}${R.isDefault?" (default)":""}`,imgUrl:R.meta.info.logos.small,meta:R.meta}))}render(){const{autoFocus:u,onBlur:h,onClear:C,openMenuOnFocus:x,placeholder:b,width:g,inputId:p,disabled:v=!1,isLoading:E=!1}=this.props,{error:P}=this.state,S=this.getDataSourceOptions(),M=this.getCurrentValue(),R=typeof C=="function";return t.createElement("div",{"aria-label":"Data source picker select container","data-testid":a.wl.components.DataSourcePicker.container},t.createElement(i.Ph,{isLoading:E,disabled:v,"aria-label":"Select a data source","data-testid":a.wl.components.DataSourcePicker.inputV2,inputId:p||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:R,backspaceRemovesValue:!1,onChange:this.onChange,options:S,autoFocus:u,onBlur:h,width:g,openMenuOnFocus:x,maxMenuHeight:500,placeholder:b,noOptionsMessage:"No datasources found",value:M??null,invalid:!!P||!!this.props.invalid,getOptionLabel:I=>I.meta&&(0,r.x)(I.meta.signature)&&I!==M?t.createElement(y.Lh,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,I.label)," ",t.createElement(c.o,{status:I.meta.signature})):I.label||""}))}}f.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},30639:(X,L,e)=>{"use strict";e.d(L,{Z:()=>n});var t=e(39953);let n=({message:a})=>t.createElement("div",null,"Unable to render data: ",a,".");function r(a){n=a}},3799:(X,L,e)=>{"use strict";e.d(L,{T:()=>n});var t=e(39953);let n=({children:a})=>t.createElement("div",null,a);function r(a){n=a}},32688:(X,L,e)=>{"use strict";e.d(L,{O:()=>y,config:()=>m});var t=e(86832),n=e.n(t),r=e(47330),a=e(54112),i=e(83311);class y{constructor(h){this.snapshotEnabled=!0,this.datasources={},this.panels={},this.apps={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.newsFeedEnabled=!0,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.secureSocksDSProxyEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.trustedTypesDefaultPolicyEnabled=!1,this.cspReportOnlyEnabled=!1,this.liveEnabled=!0,this.featureToggles={},this.anonymousEnabled=!1,this.licenseInfo={},this.rendererAvailable=!1,this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1,workloadIdentityEnabled:!1,userIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:"",alertStateHistoryBackend:void 0,alertStateHistoryPrimary:void 0},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.sqlConnectionLimits={maxOpenConns:100,maxIdleConns:100,connMaxLifetime:14400},this.disableFrontendSandboxForPlugins=[],this.bootData=h.bootData;const C={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,C,h),this.buildInfo=h.buildInfo||C.buildInfo,this.dateFormats&&r.U6.update(this.dateFormats),this.buildInfo.env==="development"&&l(this),c(this),this.featureToggles.disableAngular&&(this.angularSupportEnabled=!1),this.theme2=(0,a.j)(this.bootData.user.theme),this.bootData.user.lightTheme=this.theme2.isLight,this.theme=this.theme2.v1}}function c(u){const h=u.featureToggles,C="grafana.featureToggles",x=window.localStorage.getItem(C);if(x){const b=x.split(",");for(const g of b){const[p,v]=g.split("="),E=v==="true"||v==="1";h[p]=E,console.log(`Setting feature toggle ${p} = ${E} via localstorage`)}}}function l(u){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((C,x)=>{if(x.startsWith("__feature.")){const b=u.featureToggles,g=x.substring(10),p=C==="true"||C==="";p!==b[x]&&(b[g]=p,console.log(`Setting feature toggle ${g} = ${p} via url`))}})}const d=window.grafanaBootData||{settings:{panels:i},user:{},navTree:[]},f=d.settings;f.bootData=d;const m=new y(f)},79281:(X,L,e)=>{"use strict";e.r(L),e.d(L,{CopyPanelEvent:()=>u.EK,DataSourcePicker:()=>w.q,DataSourceWithBackend:()=>P.CK,EchoEventType:()=>c.ee,FakeEchoSrv:()=>c.rX,GrafanaBootConfig:()=>x.O,HealthCheckError:()=>P.ZA,HealthStatus:()=>P.QO,HistoryWrapper:()=>m._i,MetaAnalyticsEventName:()=>b.ct,PanelDataErrorView:()=>A.Z,PanelRenderer:()=>R,PluginPage:()=>o.T,RefreshEvent:()=>u.U5,StreamingFrameAction:()=>f.T0,SystemJS:()=>g.i3,ThemeChangedEvent:()=>u.hD,TimeRangeUpdatedEvent:()=>u.md,config:()=>x.config,createDataSourcePluginEventProperties:()=>K.i,createPluginEventProperties:()=>K.I,createQueryRunner:()=>N.AQ,featureEnabled:()=>v.v,frameToMetricFindValue:()=>S.S9,getAngularLoader:()=>n.w,getAppEvents:()=>u.N$,getBackendSrv:()=>t.i,getDataSourceSrv:()=>r.F,getEchoSrv:()=>c.RP,getGrafanaLiveSrv:()=>f.gj,getLegacyAngularInjector:()=>d.V,getLocationSrv:()=>y,getPluginComponentExtensions:()=>h.QK,getPluginExtensions:()=>h.I4,getPluginImportUtils:()=>g.bP,getPluginLinkExtensions:()=>h.dj,getRunRequest:()=>N.Pl,getTemplateSrv:()=>l.J,isExperimentViewEvent:()=>b.mR,isFetchError:()=>t.kW,isInteractionEvent:()=>b.fV,isPageviewEvent:()=>b.Si,isPluginExtensionComponent:()=>C.M,isPluginExtensionLink:()=>C.c,loadPluginCss:()=>g.iS,locationSearchToObject:()=>m.Ox,locationService:()=>m.E1,logDebug:()=>E.o7,logError:()=>E.H,logInfo:()=>E.PN,logWarning:()=>E.KE,navigationLogger:()=>m.GQ,registerEchoBackend:()=>c.e6,reportExperimentView:()=>p.SZ,reportInteraction:()=>p.ff,reportMetaAnalytics:()=>p.r_,reportPageview:()=>p.sm,setAngularLoader:()=>n.W,setAppEvents:()=>u.Xw,setBackendSrv:()=>t.jW,setDataSourceSrv:()=>r.w,setEchoSrv:()=>c.tz,setGrafanaLiveSrv:()=>f.cA,setLegacyAngularInjector:()=>d.t,setLocationService:()=>m.ZG,setLocationSrv:()=>i,setPluginExtensionGetter:()=>h.oI,setPluginImportUtils:()=>g.Qf,setQueryRunnerFactory:()=>N.pD,setRunRequest:()=>N.Iw,setTemplateSrv:()=>l.l,toDataQueryError:()=>O.P,toDataQueryResponse:()=>S.z1,usePluginInteractionReporter:()=>V.Q});var t=e(4148),n=e(52275),r=e(26205);let a;function i(_){a=_}function y(){return a}var c=e(30281),l=e(79059),d=e(12384),f=e(16843),m=e(13601),u=e(77014),h=e(44076),C=e(64654),x=e(32688),b=e(4651),g=e(2292),p=e(72639),v=e(13475),E=e(54538),P=e(92743),S=e(4649),M=e(39953);let R=()=>M.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function I(_){R=_}var A=e(30639),O=e(43882),N=e(14338),o=e(3799),w=e(39458),K=e(39060),V=e(32822)},52275:(X,L,e)=>{"use strict";e.d(L,{W:()=>n,w:()=>r});let t;function n(a){t=a}function r(){return t}},30281:(X,L,e)=>{"use strict";e.d(L,{RP:()=>a,e6:()=>i,ee:()=>t,rX:()=>y,tz:()=>r});var t=(c=>(c.Performance="performance",c.MetaAnalytics="meta-analytics",c.Pageview="pageview",c.Interaction="interaction",c.ExperimentView="experimentview",c.GrafanaJavascriptAgent="grafana-javascript-agent",c))(t||{});let n;function r(c){if(n instanceof y)for(const l of n.buffer)c.addEvent(l.event,l.meta);n=c}function a(){return n||(n=new y),n}const i=c=>{a().addBackend(c)};class y{constructor(){this.buffer=[]}flush(){this.buffer=[]}addBackend(l){}addEvent(l,d){this.buffer.push({event:l,meta:d})}}},13601:(X,L,e)=>{"use strict";e.d(L,{E1:()=>d,GQ:()=>u,Ox:()=>l,ZG:()=>f,_i:()=>c});var t=e(42801),n=e(69307),r=e(14255),a=e(42851),i=e(66841),y=e(32688);class c{constructor(C){this.history=C||t.lX({basename:y.config.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(C,x){const b=this.history.location,g=this.getSearchObject();for(const v of Object.keys(C))C[v]===null||C[v]===void 0?delete g[v]:g[v]=C[v];const p=n.Cj.renderUrl(b.pathname,g);x?this.history.replace(p,this.history.location.state):this.history.push(p,this.history.location.state)}push(C){this.history.push(C)}replace(C){this.history.replace(C)}reload(){const C=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:C?C+1:1}})}getLocation(){return this.history.location}getSearchObject(){return l(this.history.location.search)}update(C){if((0,r.d)("LocationSrv","update","partial, push or replace"),C.partial&&C.query)this.partial(C.query,C.partial);else{const x={pathname:C.path};C.query&&(x.search=n.Cj.toUrlParams(C.query)),C.replace?this.replace(x):this.push(x)}}}function l(h){let C=typeof h=="number"?String(h):h;return C.length>0?C.startsWith("?")?n.Cj.parseKeyValue(C.substring(1)):n.Cj.parseKeyValue(C):{}}let d=new c;const f=h=>{throw new Error("locationService can be only overriden in test environment")},m=(0,a.h)("Router"),u=m.logger;(0,i.x)("location",d,m)},14338:(X,L,e)=>{"use strict";e.d(L,{AQ:()=>r,Iw:()=>i,Pl:()=>y,pD:()=>n});let t;const n=c=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=c},r=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let a;function i(c){if(a)throw new Error("runRequest function should only be set once, when Grafana is starting.");a=c}function y(){if(!a)throw new Error("getRunRequest can only be used after Grafana instance has started.");return a}},77014:(X,L,e)=>{"use strict";e.d(L,{EK:()=>i,N$:()=>l,U5:()=>n,Xw:()=>c,hD:()=>r,md:()=>a});var t=e(45276);class n extends t.m{}n.type="refresh";class r extends t.R{}r.type="theme-changed";class a extends t.R{}a.type="time-range-updated";class i extends t.R{}i.type="copy-panel";let y;function c(d){y=d}function l(){return y}},4148:(X,L,e)=>{"use strict";e.d(L,{i:()=>a,jW:()=>r,kW:()=>t});function t(i){return typeof i=="object"&&i!==null&&"status"in i&&"data"in i}let n;const r=i=>{n=i},a=()=>n},26205:(X,L,e)=>{"use strict";e.d(L,{F:()=>r,w:()=>n});let t;function n(a){t=a}function r(){return t}},12384:(X,L,e)=>{"use strict";e.d(L,{V:()=>r,t:()=>n});let t;const n=a=>{t=a},r=()=>t},16843:(X,L,e)=>{"use strict";e.d(L,{T0:()=>t.T0,cA:()=>r,gj:()=>a});var t=e(26058);let n;const r=i=>{n=i},a=()=>n},44076:(X,L,e)=>{"use strict";e.d(L,{I4:()=>i,QK:()=>c,dj:()=>y,oI:()=>r});var t=e(64654);let n;function r(l){if(n)throw new Error("setPluginExtensionGetter() function should only be called once, when Grafana is starting.");n=l}function a(){if(!n)throw new Error("getPluginExtensionGetter() can only be used after the Grafana instance has started.");return n}const i=l=>a()(l),y=l=>{const{extensions:d}=i(l);return{extensions:d.filter(t.c)}},c=l=>{const{extensions:d}=i(l);return{extensions:d.filter(t.M)}}},64654:(X,L,e)=>{"use strict";e.d(L,{M:()=>r,c:()=>n});var t=e(41175);function n(a){return a?a.type===t.D.link&&("path"in a||"onClick"in a):!1}function r(a){return a?a.type===t.D.component&&"component"in a:!1}},79059:(X,L,e)=>{"use strict";e.d(L,{J:()=>r,l:()=>n});let t;const n=a=>{t=a},r=()=>t},92743:(X,L,e)=>{"use strict";e.d(L,{CK:()=>M,hr:()=>p,ZA:()=>E,QO:()=>P,Pr:()=>v});var t=e(63302),n=e(31312),r=e(3195),a=e(61782),i=e(10752),y=e(54721),c=e(47635),l=e(48614),d=e(93313),f=e(20510),m=e(32688),u=e(26205),h=e(16843),C=e(4148),x=e(26058),b=e(4649);function g(A){const{intervalMs:O,maxDataPoints:N,requestId:o,panelId:w,queryCachingTTL:K,range:{from:V,to:_}}=A;if(!A.targets.length)return(0,t.of)({data:[]});const U={intervalMs:O,maxDataPoints:N,queryCachingTTL:K,timeRange:{from:V.valueOf().toString(),to:_.valueOf().toString(),timezone:A.timezone}};return(0,C.i)().fetch({url:`/api/public/dashboards/${m.config.publicDashboardAccessToken}/panels/${w}/query`,method:"POST",data:U,requestId:o}).pipe((0,a.w)($=>(0,t.of)((0,b.z1)($,A.targets))),(0,i.K)($=>(0,t.of)((0,b.z1)($))))}const p=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function v(A){if(!A)return!1;const O=typeof A=="string"?A:A.type;return O===p.type||O===p.name||O==="-100"}class E extends Error{constructor(O,N){super(O),this.details=N,this.name="HealthCheckError"}}var P=(A=>(A.Unknown="UNKNOWN",A.OK="OK",A.Error="ERROR",A))(P||{}),S=(A=>(A.PluginID="X-Plugin-Id",A.DatasourceUID="X-Datasource-Uid",A.DashboardUID="X-Dashboard-Uid",A.PanelID="X-Panel-Id",A.QueryGroupID="X-Query-Group-Id",A.FromExpression="X-Grafana-From-Expr",A))(S||{});class M extends y.MF{constructor(O){super(O),this.streamOptionsProvider=I}query(O){if(m.config.publicDashboardAccessToken)return g(O);const{intervalMs:N,maxDataPoints:o,queryCachingTTL:w,range:K,requestId:V,hideFromInspector:_=!1}=O;let U=O.targets;this.filterQuery&&(U=U.filter(Q=>this.filterQuery(Q)));let $=!1;const k=new Set,H=new Set,j=U.map(Q=>{let Z=this.getRef(),ne=this.id,ee=!0;if(v(Q.datasource))return $=!0,{...Q,datasource:p};if(Q.datasource){const de=(0,u.F)().getInstanceSettings(Q.datasource,O.scopedVars);if(!de)throw new Error(`Unknown Datasource: ${JSON.stringify(Q.datasource)}`);const Pe=de.rawRef??(0,c.iU)(de),ye=de.id;(Pe.uid!==Z.uid||ne!==ye)&&(Z=Pe,ne=ye,ee=!1)}return Z.type?.length&&k.add(Z.type),Z.uid?.length&&H.add(Z.uid),{...ee?this.applyTemplateVariables(Q,O.scopedVars):Q,datasource:Z,datasourceId:ne,intervalMs:N,maxDataPoints:o,queryCachingTTL:w}});if(!j.length)return(0,t.of)({data:[]});const z={queries:j};if(K&&(z.from=K.from.valueOf().toString(),z.to=K.to.valueOf().toString()),m.config.featureToggles.queryOverLive)return(0,h.gj)().getQueryData({request:O,body:z});const F={};F["X-Plugin-Id"]=Array.from(k).join(", "),F["X-Datasource-Uid"]=Array.from(H).join(", ");let J="/api/ds/query?ds_type="+this.type;return $&&(F["X-Grafana-From-Expr"]="true",J+="&expression=true"),V&&(J+=`&requestId=${V}`),O.dashboardUID&&(F["X-Dashboard-Uid"]=O.dashboardUID),O.panelId&&(F["X-Panel-Id"]=`${O.panelId}`),O.queryGroupId&&(F["X-Query-Group-Id"]=`${O.queryGroupId}`),(0,C.i)().fetch({url:J,method:"POST",data:z,requestId:V,hideFromInspector:_,headers:F}).pipe((0,a.w)(Q=>{const Z=(0,b.z1)(Q,j);return Z.data?.length&&Z.data.find(ne=>ne.meta?.channel)?R(Z,O,this.streamOptionsProvider):(0,t.of)(Z)}),(0,i.K)(Q=>(0,t.of)((0,b.z1)(Q))))}getRequestHeaders(){const O={};return O["X-Plugin-Id"]=this.type,O["X-Datasource-Uid"]=this.uid,O}interpolateVariablesInQueries(O,N,o){return O.map(w=>this.applyTemplateVariables(w,N,o))}applyTemplateVariables(O,N,o){return O}async getResource(O,N,o){const w=this.getRequestHeaders();return(await(0,n.n)((0,C.i)().fetch({...o,method:"GET",headers:o?.headers?{...o.headers,...w}:w,params:N??o?.params,url:`/api/datasources/uid/${this.uid}/resources/${O}`}))).data}async postResource(O,N,o){const w=this.getRequestHeaders();return(await(0,n.n)((0,C.i)().fetch({...o,method:"POST",headers:o?.headers?{...o.headers,...w}:w,data:N??{...N},url:`/api/datasources/uid/${this.uid}/resources/${O}`}))).data}async callHealthCheck(){return(0,n.n)((0,C.i)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(O=>O.data).catch(O=>O.data)}async testDatasource(){return this.callHealthCheck().then(O=>O.status==="OK"?{status:"success",message:O.message}:Promise.reject({status:"error",message:O.message,error:new E(O.message,O.details)}))}}function R(A,O,N){const o=(0,h.gj)();if(!o)return(0,t.of)(A);const w=[],K=[];for(const V of A.data){const _=(0,l.H7)(V.meta?.channel);if(_){const U=V;K.push(o.getDataStream({addr:_,buffer:N(O,U),frame:(0,d.Y)(V)}))}else w.push(V)}return w.length&&K.push((0,t.of)({...A,data:w})),K.length===1?K[0]:(0,r.T)(...K)}const I=(A,O)=>{const N={maxLength:A.maxDataPoints??500,action:x.T0.Append};return A.rangeRaw?.to==="now"&&(N.maxDelta=A.range.to.valueOf()-A.range.from.valueOf()),N};M=(0,f.s)(M)},13475:(X,L,e)=>{"use strict";e.d(L,{v:()=>n});var t=e(32688);const n=r=>{const{enabledFeatures:a}=t.config.licenseInfo;return a&&a[r]}},54538:(X,L,e)=>{"use strict";e.d(L,{H:()=>c,KE:()=>i,PN:()=>a,o7:()=>y});var t=e(46563),n=e(60450),r=e(32688);function a(l,d){r.config.grafanaJavascriptAgent.enabled&&t.s.api.pushLog([l],{level:n.in.INFO,context:d})}function i(l,d){r.config.grafanaJavascriptAgent.enabled&&t.s.api.pushLog([l],{level:n.in.WARN,context:d})}function y(l,d){r.config.grafanaJavascriptAgent.enabled&&t.s.api.pushLog([l],{level:n.in.DEBUG,context:d})}function c(l,d){r.config.grafanaJavascriptAgent.enabled&&t.s.api.pushError(l)}},2292:(X,L,e)=>{"use strict";e.d(L,{Qf:()=>m,bP:()=>u,i3:()=>l,iS:()=>d});var t=e(62407),n=e.n(t),r=e(41226),a=e.n(r),i=e(15639),y=e.n(i),c=e(32688);const l=window.System;async function d(h){try{const C=c.config.bootData.user.theme==="light"?h.light:h.dark;return await l.import(C)}catch(C){console.error(C)}}let f;function m(h){if(f)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");f=h}function u(){if(!f)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return f}window.__grafana_amd_define=window.define,window.define=void 0},4649:(X,L,e)=>{"use strict";e.d(L,{S9:()=>m,z1:()=>c});var t=e(10694),n=e(93313),r=e(53305),a=e(89591),i=e(43882);const y={severity:"info",text:"Cached response"};function c(u,h){const C={data:[],state:t.Gu.Done},x="traceId"in u?u.traceId:void 0;if(x!=null&&(C.traceIds=[x]),u.data?.results){const b=u.data.results,g=h?.length?h.map(E=>E.refId):Object.keys(b),p=l(u),v=[];for(const E of g){const P=b[E];P&&(P.refId=E,v.push(P))}for(const E of v){if(E.error){const P={refId:E.refId,message:E.error,status:E.status};x!=null&&(P.traceId=x),C.error||(C.error={...P}),C.errors?C.errors.push({...P}):C.errors=[{...P}],C.state=t.Gu.Error}if(E.frames?.length){for(let P of E.frames){p&&(P=d(P));const S=(0,n.vP)(P);S.refId||(S.refId=E.refId),C.data.push(S)}continue}if(E.series?.length)for(const P of E.series)P.refId||(P.refId=E.refId),C.data.push((0,r.g0)(P));if(E.tables?.length)for(const P of E.tables)P.refId||(P.refId=E.refId),C.data.push((0,r.g0)(P))}}return u.status&&u.status!==200&&(C.state!==t.Gu.Error&&(C.state=t.Gu.Error),C.error||(C.error=(0,i.P)(u))),C}function l(u){const h=u?.headers;return!h||!h.get?!1:h.get("X-Cache")==="HIT"}function d(u){return{...u,schema:{...u.schema,fields:[...u.schema?.fields??[]],meta:{...u.schema?.meta,notices:[...u.schema?.meta?.notices??[],y],isCachedResponse:!0}}}}function f(u){const h=c(u);if(h.error?.data?.message)return{status:"error",message:h.error.data.message,details:h.error?.data?.error?{message:h.error.data.error}:void 0};if(h.error?.refId&&h.error?.message)return{status:"error",message:h.error.message};throw u}function m(u){if(!u||!u.length)return[];const h=[];let C=u.fields.find(x=>x.type===a.fS.string);if(C||(C=u.fields.find(x=>x.type!==a.fS.time)),C)for(let x=0;x<C.values.length;x++)h.push({text:""+C.values[x]});return h}},43882:(X,L,e)=>{"use strict";e.d(L,{P:()=>t});function t(n){const r=n||{};if(!r.message){if(typeof n=="string")return{message:n};let a="Query error";r.message?a=r.message:r.data&&r.data.message&&r.data?.message!=="Query data error"?a=r.data.message:r?.data?.message==="Query data error"&&r?.data?.error||r.data&&r.data.error?a=r.data.error:r.status&&(a=`Query error: ${r.status} ${r.statusText}`),r.message=a}return r}},33155:(X,L,e)=>{"use strict";e.d(L,{b:()=>d});var t=e(41407),n=e(39953),r=e(75766),a=e(82803),i=e(4919),y=e(39285),c=e(71974),l=e(98632);const d=n.forwardRef(({title:u,onRemove:h,children:C,buttonContent:x,elevated:b,bottomSpacing:g,topSpacing:p,className:v,severity:E="error",...P},S)=>{const M=(0,a.l4)(),I=m(M,E,!!u,b,g,p),A={error:"alert",warning:"alert",info:"status",success:"status"},O=P.role||A[E],N=P["aria-label"]||u;return n.createElement("div",{ref:S,className:(0,t.cx)(I.wrapper,v),"data-testid":r.wl.components.Alert.alertV2(E),role:O,"aria-label":N,...P},n.createElement(c.x,{display:"flex",backgroundColor:E,borderRadius:"default",paddingY:1,paddingX:2,borderStyle:"solid",borderColor:E,alignItems:"stretch",boxShadow:b?"z3":void 0},n.createElement(c.x,{paddingTop:1,paddingRight:2},n.createElement("div",{className:I.icon},n.createElement(y.J,{size:"xl",name:f(E)}))),n.createElement(c.x,{paddingY:1,grow:1},n.createElement(l.x,{weight:"medium"},u),C&&n.createElement("div",{className:I.content},C)),h&&!x&&n.createElement("div",{className:I.close},n.createElement(i.zx,{"aria-label":"Close alert",icon:"times",onClick:h,type:"button",fill:"text",variant:"secondary"})),h&&x&&n.createElement(c.x,{marginLeft:1,display:"flex",alignItems:"center"},n.createElement(i.zx,{"aria-label":"Close alert",variant:"secondary",onClick:h,type:"button"},x))))});d.displayName="Alert";const f=u=>{switch(u){case"error":return"exclamation-circle";case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},m=(u,h,C,x,b,g)=>{const p=u.colors[h];return{wrapper:(0,t.css)({flexGrow:1,marginBottom:u.spacing(b??2),marginTop:u.spacing(g??0),position:"relative","&:before":{content:'""',position:"absolute",top:0,left:0,bottom:0,right:0,background:u.colors.background.primary,zIndex:-1}}),icon:(0,t.css)({color:p.text}),content:(0,t.css)({paddingTop:C?u.spacing(.5):0,maxHeight:"50vh",overflowY:"auto"}),close:(0,t.css)({position:"relative",color:u.colors.text.secondary,background:"none",display:"flex",top:"-6px",right:"-14px"})}}},63528:(X,L,e)=>{"use strict";e.d(L,{h:()=>h});var t=e(41407),n=e(86832),r=e(39953),a=e(82803),i=e(96227),y=e(99560);const c=r.memo(()=>{const x=(0,a.wW)(l);return r.createElement("div",{className:x.ellipsis},r.createElement("span",{className:x.firstDot},"."),r.createElement("span",{className:x.secondDot},"."),r.createElement("span",{className:x.thirdDot},"."))});c.displayName="EllipsisAnimated";const l=()=>({ellipsis:(0,t.css)({display:"inline"}),firstDot:(0,t.css)({animation:`${d} 2s linear infinite`}),secondDot:(0,t.css)({animation:`${f} 2s linear infinite`}),thirdDot:(0,t.css)({animation:`${m} 2s linear infinite`})}),d=(0,t.keyframes)`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,f=(0,t.keyframes)`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,m=(0,t.keyframes)`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,u=2*1e3;function h(x){const{invalid:b,loading:g,onFinishChange:p,saveErrorMessage:v="Error saving this value",error:E,children:P,disabled:S,...M}=x,[R,I]=r.useState({isLoading:!1,showSuccess:!1,showError:b}),A=(0,r.useRef)(null);r.useEffect(()=>{let K;if(R.showSuccess){const V=R.showError?0:u;K=setTimeout(()=>{I({...R,showSuccess:!1})},V)}return()=>{window.clearTimeout(K)}},[R]);const O=(0,r.useCallback)(K=>{b||(I({...R,isLoading:!0,showSuccess:!1}),p(K).then(()=>{I({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{I({...R,isLoading:!1,showError:!0})}))},[b,R,p]),N=(0,r.useMemo)(()=>(0,n.debounce)(O,600,{leading:!1}),[O]),o=b||R.showError||void 0,w=(0,a.wW)(C);return r.createElement(r.Fragment,null,r.createElement(i.g,{...M,loading:g||void 0,invalid:o,disabled:S,error:E||R.showError&&v,ref:A,className:w.widthFitContent},r.cloneElement(P(K=>{N(K)}))),R.isLoading&&r.createElement(y.K,{referenceElement:A.current,placement:"right",alternativePlacement:"bottom"},"Saving ",r.createElement(c,null)),R.showSuccess&&r.createElement(y.K,{suffixIcon:"check",referenceElement:A.current,placement:"right",alternativePlacement:"bottom"},"Saved!"))}h.displayName="AutoSaveField";const C=()=>({widthFitContent:(0,t.css)({width:"fit-content"})})},12608:(X,L,e)=>{"use strict";e.d(L,{C:()=>c});var t=e(41407),n=e(39953),r=e(63374),a=e(82803),i=e(39285),y=e(69865);const c=n.memo(({icon:d,color:f,text:m,tooltip:u,className:h,...C})=>{const x=(0,a.wW)(l,f),b=n.createElement("div",{className:(0,t.cx)(x.wrapper,h),...C},d&&n.createElement(i.J,{name:d,size:"sm"}),m);return u?n.createElement(y.u,{content:u,placement:"auto"},b):b});c.displayName="Badge";const l=(d,f)=>{let m=d.visualization.getColorByName(f),u="",h="",C="";return d.isDark?(h=(0,r.Z)(m).setAlpha(.15).toString(),u=(0,r.Z)(m).setAlpha(.25).toString(),C=(0,r.Z)(m).lighten(15).toString()):(h=(0,r.Z)(m).setAlpha(.15).toString(),u=(0,r.Z)(m).setAlpha(.25).toString(),C=(0,r.Z)(m).darken(20).toString()),{wrapper:(0,t.css)({display:"inline-flex",padding:"1px 4px",borderRadius:d.shape.radius.default,background:h,border:`1px solid ${u}`,color:C,fontWeight:d.typography.fontWeightRegular,gap:"2px",fontSize:d.typography.bodySmall.fontSize,lineHeight:d.typography.bodySmall.lineHeight,alignItems:"center"})}}},24300:(X,L,e)=>{"use strict";e.d(L,{xf:()=>P});var t=e(41407),n=e(39953),r=e(63374),a=e(35664),i=e(64943),y=e(60695),c=e(83502),l=e(97898),d=e(73254),f=e(75766),m=e(34547),u=e(76297),h=e(4919),C=e(6430);const x=18,b=50,g=150,p=1.5,v=1,E=10;class P extends n.PureComponent{render(){const{onClick:_,className:U,theme:$}=this.props,{title:k}=this.props.value,H=R(this.props);return _?n.createElement("button",{type:"button",style:H.wrapper,onClick:_,className:(0,t.cx)((0,h.gN)($),U)},n.createElement("div",{style:H.title},k),this.renderBarAndValue()):n.createElement("div",{style:H.wrapper,className:U},k&&n.createElement("div",{style:H.title},k),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:_,showUnfilled:U,valueDisplayMode:$}=this.props,k=N(this.props);return n.createElement("div",{style:k.wrapper},$!==m.M8.Hidden&&n.createElement(C.W,{"data-testid":f.wl.components.Panels.Visualization.BarGauge.valueV2,value:_,style:k.value}),U&&n.createElement("div",{style:k.emptyBar}),n.createElement("div",{style:k.bar}))}renderRetroBars(){const{display:_,field:U,value:$,itemSpacing:k,alignmentFactors:H,orientation:j,lcdCellWidth:z,text:F,valueDisplayMode:J,theme:Q}=this.props,{valueHeight:Z,valueWidth:ne,maxBarHeight:ee,maxBarWidth:de,wrapperWidth:Pe,wrapperHeight:ye}=I(this.props),he=U.min??a.Hx,me=U.max??a.Z3,De=S(j),le=me-he,Ee=De?ee:de,be=k,ge=Math.floor(Ee/z),ue=Math.floor((Ee-be*ge)/ge),Ie=w(this.props),Qe=K(H||$,Ie,ne,Z,j,F),Me={width:`${Pe}px`,height:`${ye}px`,display:"flex"};De?(Me.flexDirection="column-reverse",Me.alignItems="center"):(Me.flexDirection="row",Me.alignItems="center",Qe.justifyContent="flex-end");const Ne=[];for(let qe=0;qe<ge;qe++){const bt=he+le/ge*qe,Fe=A(bt,$,_),Ve={borderRadius:Q.shape.radius.default};Fe.isLit?Ve.backgroundImage=`radial-gradient(${Fe.background} 10%, ${Fe.backgroundShade})`:Ve.backgroundColor=Fe.background,De?(Ve.height=`${ue}px`,Ve.width=`${de}px`,Ve.marginTop=`${be}px`):(Ve.width=`${ue}px`,Ve.height=`${ee}px`,Ve.marginRight=`${be}px`),Ne.push(n.createElement("div",{key:qe.toString(),style:Ve}))}return n.createElement("div",{style:Me},Ne,J!==m.M8.Hidden&&n.createElement(C.W,{"data-testid":f.wl.components.Panels.Visualization.BarGauge.valueV2,value:$,style:Qe}))}}P.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:m.QH.Gradient,orientation:i.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:y.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function S(V){return V===i.wm.Vertical}function M(V){const{height:_,width:U,alignmentFactors:$,orientation:k,text:H}=V,j=$?$.title:V.value.title;if(!j)return{fontSize:0,width:0,height:0,placement:"above"};if(S(k)){const ne=H?.titleSize??14;return{fontSize:ne,width:U,height:ne*p,placement:"below"}}if(_>40){if(H?.titleSize)return{fontSize:H?.titleSize,width:0,height:H.titleSize*p,placement:"above"};const ee=Math.max(Math.min(_*.45,b),17);return{fontSize:ee/p,width:0,height:ee,placement:"above"}}const J=Math.max(_*.6,x)/p,Q=(0,u.X1)(j,J),Z=Math.min(Q.width+15,U*.4);return{fontSize:H?.titleSize??J,height:0,width:Z,placement:"left"}}function R(V){const _={display:"flex",overflow:"hidden",width:"100%"},U=M(V),$={fontSize:`${U.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return S(V.orientation)?(_.flexDirection="column-reverse",$.textAlign="center"):U.placement==="above"?_.flexDirection="column":(_.flexDirection="row",$.width=`${U.width}px`,$.textAlign="right",$.paddingRight="10px"),{wrapper:_,title:$}}function I(V){const{height:_,width:U,orientation:$,text:k,alignmentFactors:H,valueDisplayMode:j}=V,z=M(V),F=H??V.value,J=(0,c.zc)(F);let Q=0,Z=0,ne=0,ee=0,de=0,Pe=0;const ye=k?.valueSize??Math.max(z.fontSize,12),me=(0,u.X1)(J,ye).width+E*2;return S($)?(k?.valueSize?ne=k.valueSize*v:ne=Math.min(Math.max(_*.1,x),b),ee=U,j===m.M8.Hidden&&(ne=0,ee=0),Q=_-(z.height+ne),Z=U,de=U,Pe=_-z.height):(j===m.M8.Hidden?(ne=0,ee=0):(ne=_-z.height,ee=Math.max(Math.min(U*.2,g),me)),Q=_-z.height,Z=U-ee-z.width,z.placement==="above"?(de=U,Pe=_-z.height):(de=U-z.width,Pe=_)),{valueWidth:ee,valueHeight:ne,maxBarWidth:Z,maxBarHeight:Q,wrapperHeight:Pe,wrapperWidth:de}}function A(V,_,U){if(V===null)return{background:l.R,border:l.R};const $=U?U(V).color:null;return $?_===null||isNaN(_.numeric)||V!==null&&V>_.numeric?{background:(0,r.Z)($).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,r.Z)($).setAlpha(.95).toRgbString(),backgroundShade:(0,r.Z)($).setAlpha(.55).toRgbString(),border:(0,r.Z)($).setAlpha(.9).toRgbString(),isLit:!0}:{background:l.R,border:l.R}}function O(V,_,U){const $=Math.min((V-_)/(U-_),1);return isNaN($)?0:$}function N(V){const{displayMode:_,field:U,value:$,alignmentFactors:k,orientation:H,theme:j,text:z}=V,{valueWidth:F,valueHeight:J,maxBarHeight:Q,maxBarWidth:Z}=I(V),ne=U.min??a.Hx,ee=U.max??a.Z3,de=O($.numeric,ne,ee),Pe=w(V),ye=$.color??l.R,me=K(k||$,Pe,F,J,H,z),De=_==="basic",le={display:"flex",flexGrow:1},Ee={borderRadius:j.shape.radius.default,position:"relative",zIndex:1},be={background:j.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:j.shape.radius.default,position:"relative"};if(S(H)){const ge=Math.max(de*Q,1);le.flexDirection="column",le.justifyContent="flex-end",Ee.transition="height 1s",Ee.height=`${ge}px`,Ee.width=`${Z}px`,be.bottom="-3px",be.width=`${F}px`,De?(Ee.background=`${(0,r.Z)(ye).setAlpha(.35).toRgbString()}`,Ee.borderTop=`2px solid ${ye}`):Ee.background=o(V,Q)}else{const ge=Math.max(de*Z,1);le.flexDirection="row-reverse",le.justifyContent="flex-end",le.alignItems="stretch",Ee.transition="width 1s",Ee.height=`${Q}px`,Ee.width=`${ge}px`,be.left="-3px",be.height=`${J}px`,De?(Ee.background=`${(0,r.Z)(ye).setAlpha(.35).toRgbString()}`,Ee.borderRight=`2px solid ${ye}`):Ee.background=o(V,Z)}return{wrapper:le,bar:Ee,value:me,emptyBar:be}}function o(V,_){const{field:U,value:$,orientation:k,theme:H}=V,j=S(k)?"0deg":"90deg",z=U.min,F=U.max;let J="",Q=0,Z=(0,d.QY)(U.color?.mode);if(Z.id===l.S.Thresholds){const ne=U.thresholds;for(let ee=0;ee<ne.steps.length;ee++){const de=ne.steps[ee],Pe=V.theme.visualization.getColorByName(de.color),ye=ne.mode===y.H.Percentage?de.value/100:O(de.value,z,F),he=ye*_,me=Math.round(he-(he-Q)/2),De=ne.mode===y.H.Percentage?z+(F-z)*ye:de.value;if(J==="")J=`linear-gradient(${j}, ${Pe}, ${Pe}`;else{if($.numeric<De)break;Q=he,J+=` ${me}px, ${Pe}`}}return J+")"}if(Z.isContinuous&&Z.getColors){const ne=Z.getColors(H);for(let ee=0;ee<ne.length;ee++){const de=ne[ee];if(J==="")J=`linear-gradient(${j}, ${de} 0px`;else{const ye=ee/(ne.length-1)*_;J+=`, ${de} ${ye}px`}}return J+")"}return $.color??l.R}function w(V){if(V.valueDisplayMode==="text")return V.theme.colors.text.primary;const{value:_}=V;return _.color?_.color:l.R}function K(V,_,U,$,k,H){const j={color:_,height:`${$}px`,width:`${U}px`,display:"flex",alignItems:"center",lineHeight:v};let z=U;const F=(0,c.zc)(V);return S(k)?(j.fontSize=H?.valueSize??(0,u.MX)(F,z,$,v),j.justifyContent="center"):(j.fontSize=H?.valueSize??(0,u.MX)(F,z-E*2,$,v),j.justifyContent="flex-end",j.paddingLeft=`${E}px`,j.paddingRight=`${E}px`,z-=E),j}},26753:(X,L,e)=>{"use strict";e.d(L,{w6:()=>N,pc:()=>R,IG:()=>I,ap:()=>A,jG:()=>O});var t=e(41407),n=e(39953),r=e(4919),a=e(6430),i=e(63374),y=e(64943),c=e(89591),l=e(83502),d=e(34547),f=e(59561),m=e(76297),u=e(52542);const h=1.2,C=30,x=500;class b{constructor(w){this.props=w;const{width:K,height:V,value:_,text:U}=w;this.valueColor=_.color??"gray",this.panelPadding=V>100?12:8,this.textValues=M(w),this.justifyCenter=S(w.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=K-this.panelPadding*2,this.maxTextHeight=V-this.panelPadding*2,U&&(U.titleSize&&(this.titleFontSize=U.titleSize,this.titleToAlignTo=void 0),U.valueSize&&(this.valueFontSize=U.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const w={fontSize:`${this.titleFontSize}px`,lineHeight:h};return this.props.parentOrientation===y.wm.Horizontal&&this.justifyCenter&&(w.paddingRight="0.75ch"),(this.props.colorMode===R.Background||this.props.colorMode===R.BackgroundSolid)&&(w.color=(0,f.bM)(this.valueColor,this.props.theme.isDark)),w}getValueStyles(){const w={fontSize:this.valueFontSize,fontWeight:x,lineHeight:h,position:"relative",zIndex:1};switch(this.justifyCenter&&(w.textAlign="center"),this.props.colorMode){case R.Value:w.color=this.valueColor;break;case R.Background:case R.BackgroundSolid:w.color=(0,f.bM)(this.valueColor,this.props.theme.isDark);break;case R.None:w.color=this.props.theme.colors.text.primary;break}return w}getValueAndTitleContainerStyles(){const w={display:"flex"};return this.justifyCenter&&(w.alignItems="center",w.justifyContent="center",w.flexGrow=1),w}getPanelStyles(){const{width:w,height:K,theme:V,colorMode:_}=this.props,U={width:`${w}px`,height:`${K}px`,padding:`${this.panelPadding}px`,borderRadius:V.shape.radius.default,position:"relative",display:"flex"},$=V.isDark?1:-.7;switch(_){case R.Background:const k=(0,i.Z)(this.valueColor).darken(15*$).spin(8).toRgbString(),H=(0,i.Z)(this.valueColor).darken(5*$).spin(-8).toRgbString();U.background=`linear-gradient(120deg, ${k}, ${H})`;break;case R.BackgroundSolid:U.background=(0,i.Z)(this.valueColor).toString();break;case R.Value:U.background="transparent";break}return this.justifyCenter&&(U.alignItems="center",U.flexDirection="row"),U}renderChart(){const{sparkline:w,colorMode:K}=this.props;if(!w||w.y?.type!==c.fS.number)return null;let V,_;switch(K){case R.Background:case R.BackgroundSolid:V="rgba(255,255,255,0.4)",_=(0,i.Z)(this.valueColor).brighten(40).toRgbString();break;case R.None:case R.Value:default:_=this.valueColor,V=(0,i.Z)(this.valueColor).setAlpha(.2).toRgbString();break}const U={custom:{drawStyle:d.l8.Line,lineWidth:1,fillColor:V,lineColor:_}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(u.b,{height:this.chartHeight,width:this.chartWidth,sparkline:w,config:U,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class g extends b{constructor(w){super(w);const K=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,m.MX)(this.valueToAlignTo,this.maxTextWidth*K,this.maxTextHeight,h,void 0,x)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,m.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,h,C),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const w=super.getValueAndTitleContainerStyles();return w.flexDirection="row",w.alignItems="center",w.flexGrow=1,this.justifyCenter||(w.justifyContent="space-between"),w}renderChart(){return null}getPanelStyles(){const w=super.getPanelStyles();return w.alignItems="center",w}}class p extends b{constructor(w){super(w);const{width:K,height:V}=w,_=.5,U=.6,$=1-U,k=.4;this.chartWidth=K,this.chartHeight=V*_,this.titleToAlignTo?.length&&(this.titleFontSize=(0,m.MX)(this.titleToAlignTo,this.maxTextWidth*U,this.maxTextHeight*k,h,C)),this.valueToAlignTo.length&&(this.valueFontSize=(0,m.MX)(this.valueToAlignTo,this.maxTextWidth*$,this.maxTextHeight*_,h,void 0,x))}getValueAndTitleContainerStyles(){const w=super.getValueAndTitleContainerStyles();return w.flexDirection="row",w.flexGrow=1,this.justifyCenter||(w.justifyContent="space-between"),w}getPanelStyles(){const w=super.getPanelStyles();return w.flexDirection="row",w.justifyContent="space-between",w}}class v extends b{constructor(w){super(w);const{width:K,height:V}=w,_=.15,U=.25;let $=0;this.chartHeight=V*U,this.chartWidth=K,this.titleToAlignTo?.length&&(this.titleFontSize=(0,m.MX)(this.titleToAlignTo,this.maxTextWidth,V*_,h,C),$=this.titleFontSize*h),this.valueToAlignTo.length&&(this.valueFontSize=(0,m.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-$,h,void 0,x)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=V-this.titleFontSize*h-this.valueFontSize*h}getValueAndTitleContainerStyles(){const w=super.getValueAndTitleContainerStyles();return w.flexDirection="column",w.justifyContent="center",w}getPanelStyles(){const w=super.getPanelStyles();return w.flexDirection="column",w}}class E extends b{constructor(w){super(w);const{height:K}=w,V=.15;let _=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,m.MX)(this.titleToAlignTo,this.maxTextWidth,K*V,h,C),_=this.titleFontSize*h),this.valueToAlignTo.length&&(this.valueFontSize=(0,m.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-_,h,void 0,x)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const w=super.getValueAndTitleContainerStyles();return w.flexDirection="column",w.flexGrow=1,w}renderChart(){return null}getPanelStyles(){const w=super.getPanelStyles();return w.alignItems="center",w}}function P(o){const{width:w,height:K,sparkline:V}=o;return w/K>2.5?K>50&&V&&V.y.values.length>1?new p(o):new g(o):K>100&&V&&V.y.values.length>1?new v(o):new E(o)}function S(o,w){return o===A.Center?!0:(w??"").length===0}function M(o){const{value:w,alignmentFactors:K,count:V}=o;let{textMode:_}=o;const U=K?K.title:w.title,$=(0,l.zc)(K||w);switch(_===O.Auto&&(V??1)===1&&(_=O.Value),_){case O.Name:return{...w,title:void 0,prefix:void 0,suffix:void 0,text:w.title||"",titleToAlignTo:void 0,valueToAlignTo:U??"",tooltip:(0,l.zc)(w)};case O.Value:return{...w,title:void 0,titleToAlignTo:void 0,valueToAlignTo:$,tooltip:w.title};case O.None:return{numeric:w.numeric,color:w.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${w.title}
Value: ${(0,l.zc)(w)}`};case O.ValueAndName:default:return{...w,titleToAlignTo:U,valueToAlignTo:$}}}var R=(o=>(o.Background="background",o.BackgroundSolid="background_solid",o.None="none",o.Value="value",o))(R||{}),I=(o=>(o.None="none",o.Line="line",o.Area="area",o))(I||{}),A=(o=>(o.Auto="auto",o.Center="center",o))(A||{}),O=(o=>(o.Auto="auto",o.Value="value",o.ValueAndName="value_and_name",o.Name="name",o.None="none",o))(O||{});class N extends n.PureComponent{render(){const{onClick:w,className:K,hasLinks:V,theme:_}=this.props,U=P(this.props),$=U.getPanelStyles(),k=U.getValueAndTitleContainerStyles(),H=U.getValueStyles(),j=U.getTitleStyles(),z=U.textValues,F=V?void 0:z.tooltip;return w?n.createElement("button",{type:"button",className:(0,t.cx)((0,r.gN)(_),K),style:$,onClick:w,title:F},n.createElement("div",{style:k},z.title&&n.createElement("div",{style:j},z.title),n.createElement(a.W,{value:z,style:H})),U.renderChart()):n.createElement("div",{className:K,style:$,title:F},n.createElement("div",{style:k},z.title&&n.createElement("div",{style:j},z.title),n.createElement(a.W,{value:z,style:H})),U.renderChart())}}N.defaultProps={justifyMode:"auto"}},52499:(X,L,e)=>{"use strict";e.d(L,{_:()=>c});var t=e(41407),n=e(39953),r=e(90135),a=e.n(r),i=e(82803),y=e(93021);const c=(0,n.forwardRef)(({name:d,value:f,hidden:m,facets:u,onClick:h,className:C,loading:x,searchTerm:b,active:g,style:p,title:v,highlightParts:E,...P},S)=>{const M=(0,i.l4)(),R=l(M),I=b?[b]:[],A=(0,n.useCallback)(N=>{h&&!m&&h(d,f,N)},[h,d,m,f]);let O=f||d;return u&&(O=`${O} (${u})`),n.createElement("button",{key:O,ref:S,onClick:A,style:p,title:v||O,type:"button",role:"option","aria-selected":!!g,className:(0,t.cx)(R.base,g&&R.active,x&&R.loading,m&&R.hidden,C,h&&!m&&R.hover),...P},E!==void 0?n.createElement(y.H,{text:O,highlightClassName:R.matchHighLight,highlightParts:E}):n.createElement(a(),{textToHighlight:O,searchWords:I,autoEscape:!0,highlightClassName:R.matchHighLight}))});c.displayName="Label";const l=d=>({base:(0,t.css)({display:"inline-block",cursor:"pointer",fontSize:d.typography.size.sm,lineHeight:d.typography.bodySmall.lineHeight,backgroundColor:d.colors.background.secondary,color:d.colors.text.primary,whiteSpace:"nowrap",textShadow:"none",padding:d.spacing(.5),borderRadius:d.shape.radius.default,border:"none",marginRight:d.spacing(1),marginBottom:d.spacing(.5)}),loading:(0,t.css)({fontWeight:d.typography.fontWeightMedium,backgroundColor:d.colors.primary.shade,color:d.colors.text.primary,animation:"pulse 3s ease-out 0s infinite normal forwards","@keyframes pulse":{"0%":{color:d.colors.text.primary},"50%":{color:d.colors.text.secondary},"100%":{color:d.colors.text.disabled}}}),active:(0,t.css)({fontWeight:d.typography.fontWeightMedium,backgroundColor:d.colors.primary.main,color:d.colors.primary.contrastText}),matchHighLight:(0,t.css)({background:"inherit",color:d.components.textHighlight.text,backgroundColor:d.components.textHighlight.background}),hidden:(0,t.css)({opacity:.6,cursor:"default",border:"1px solid transparent"}),hover:(0,t.css)({["&:hover"]:{opacity:.85,cursor:"pointer"}})})},4919:(X,L,e)=>{"use strict";e.d(L,{Qj:()=>m,_7:()=>g,c9:()=>x,fW:()=>u,gN:()=>b,zx:()=>f});var t=e(41407),n=e(39953),r=e(82803),a=e(53039),i=e(15530),y=e(39285),c=e(69865);const l=null,d=null,f=n.forwardRef(({variant:p="primary",size:v="md",fill:E="solid",icon:P,fullWidth:S,children:M,className:R,type:I="button",tooltip:A,tooltipPlacement:O,...N},o)=>{const w=(0,r.l4)(),K=u({theme:w,size:v,variant:p,fill:E,fullWidth:S,iconOnly:!M}),V=n.createElement("button",{className:(0,t.cx)(K.button,R),type:I,...N,ref:A?void 0:o},P&&n.createElement(y.J,{name:P,size:v,className:K.icon}),M&&n.createElement("span",{className:K.content},M));return A?n.createElement(c.u,{ref:o,content:A,placement:O},V):V});f.displayName="Button";const m=n.forwardRef(({variant:p="primary",size:v="md",fill:E="solid",icon:P,fullWidth:S,children:M,className:R,onBlur:I,onFocus:A,disabled:O,tooltip:N,tooltipPlacement:o,...w},K)=>{const V=(0,r.l4)(),_=u({theme:V,fullWidth:S,size:v,variant:p,fill:E,iconOnly:!M}),U=(0,t.cx)(_.button,{[(0,t.css)(_.disabled,{pointerEvents:"none"})]:O},R),$=n.createElement("a",{className:U,...w,tabIndex:O?-1:0,"aria-disabled":O,ref:N?void 0:K},P&&n.createElement(y.J,{name:P,size:v,className:_.icon}),M&&n.createElement("span",{className:_.content},M));return N?n.createElement(c.u,{ref:K,content:N,placement:o},$):$});m.displayName="LinkButton";const u=p=>{const{theme:v,variant:E,fill:P="solid",size:S,iconOnly:M,fullWidth:R}=p,{height:I,padding:A,fontSize:O}=(0,i.iL)(S,v),N=x(v,E,P),o=C(v,E,P),w=(0,a.getFocusStyles)(v),K=v.spacing.gridSize*A-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:O,fontWeight:v.typography.fontWeightMedium,fontFamily:v.typography.fontFamily,padding:`0 ${K}px`,height:v.spacing(I),lineHeight:`${v.spacing.gridSize*I-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:v.shape.radius.default,"&:focus":w,"&:focus-visible":w,"&:focus:not(:focus-visible)":(0,a.getMouseFocusStyles)(v),...R&&{flexGrow:1,justifyContent:"center"},...N,":disabled":o,"&[disabled]":o}),disabled:(0,t.css)(o),img:(0,t.css)({width:"16px",height:"16px",margin:v.spacing(0,1,0,.5)}),icon:M?(0,t.css)({marginRight:v.spacing(-A/2),marginLeft:v.spacing(-A/2)}):(0,t.css)({marginRight:v.spacing(A/2)}),content:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",height:"100%"})}};function h(p,v,E){let P=v.border,S="transparent",M="transparent";return v.name==="secondary"&&(S=v.border,M=p.colors.emphasize(v.border,.25),P=p.colors.border.strong),E==="outline"?{background:"transparent",color:v.text,border:`1px solid ${P}`,transition:p.transitions.create(["background-color","border-color","color"],{duration:p.transitions.duration.short}),"&:hover":{background:v.transparent,borderColor:p.colors.emphasize(P,.25),color:v.text}}:E==="text"?{background:"transparent",color:v.text,border:"1px solid transparent",transition:p.transitions.create(["background-color","color"],{duration:p.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:v.transparent,textDecoration:"none"}}:{background:v.main,color:v.contrastText,border:`1px solid ${S}`,transition:p.transitions.create(["background-color","box-shadow","border-color","color"],{duration:p.transitions.duration.short}),"&:hover":{background:v.shade,color:v.contrastText,boxShadow:p.shadows.z1,borderColor:M}}}function C(p,v,E){const P={cursor:"not-allowed",boxShadow:"none",color:p.colors.text.disabled,transition:"none"};return E==="text"?{...P,background:"transparent",border:"1px solid transparent"}:E==="outline"?{...P,background:"transparent",border:`1px solid ${p.colors.border.weak}`}:{...P,background:p.colors.action.disabledBackground,border:"1px solid transparent"}}function x(p,v,E){switch(v){case"secondary":return h(p,p.colors.secondary,E);case"destructive":return h(p,p.colors.error,E);case"success":return h(p,p.colors.success,E);case"primary":default:return h(p,p.colors.primary,E)}}const b=p=>(0,t.css)({background:"transparent",color:p.colors.text.primary,border:"none",padding:0}),g=p=>(0,t.css)({background:"transparent",border:"none",padding:0,fontFamily:"inherit",color:"inherit",height:"100%","&:hover":{background:"transparent",color:"inherit"}})},48824:(X,L,e)=>{"use strict";e.d(L,{h:()=>a});var t=e(41407),n=e(39953),r=e(82803);const a=(0,n.forwardRef)(({className:y,children:c,...l},d)=>{const f=(0,r.wW)(i);return n.createElement("div",{ref:d,className:(0,t.cx)("button-group",f.wrapper,y),...l},c)});a.displayName="ButtonGroup";const i=y=>({wrapper:(0,t.css)({display:"flex","> .button-group:not(:first-child) > button, > button:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"> .button-group:not(:last-child) > button, > button:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRightWidth:0}})})},95502:(X,L,e)=>{"use strict";e.d(L,{f:()=>a});var t=e(41407),n=e(39953),r=e(64084);const a=({className:y,children:c})=>{const l=i();return n.createElement("div",{className:(0,t.cx)(l,y)},c)},i=(0,r.B)(()=>(0,t.css)({display:"flex",button:{flexGrow:1,justifyContent:"center"},"> *":{flexGrow:1},label:{flexGrow:1,textAlign:"center"}}))},97725:(X,L,e)=>{"use strict";e.d(L,{O:()=>f});var t=e(41407),n=e(62584),r=e(39953),a=e(64084),i=e(82803),y=e(4919),c=e(62427),l=e(39285);const d=(0,a.B)(m=>({popup:(0,t.css)({label:"popup",zIndex:m.zIndex.dropdown}),icons:{right:(0,t.css)({margin:"1px 0 0 4px"}),left:(0,t.css)({margin:"-1px 4px 0 0"})}})),f=m=>{const{onChange:u,className:h,loadData:C,icon:x,buttonProps:b,hideDownIcon:g,variant:p,disabled:v,...E}=m,P=(0,i.l4)(),S=d(P);let M=m.children;return g||(M=[m.children,r.createElement(l.J,{key:"down-icon",name:"angle-down",className:S.icons.right})]),r.createElement(n.Z,{onChange:(0,c.K)(u),loadData:(0,c.p)(C),dropdownClassName:S.popup,...E,expandIcon:null},r.createElement(y.zx,{icon:x,disabled:v,variant:p,...b??{}},M))};f.displayName="ButtonCascader"},80318:(X,L,e)=>{"use strict";e.d(L,{_:()=>a});var t=e(41407),n=e(39953),r=e(82803);const a=({message:y,callToActionElement:c,footer:l,className:d})=>{const f=(0,r.wW)(i);return n.createElement("div",{className:(0,t.cx)([f.wrapper,d])},y&&n.createElement("div",{className:f.message},y),c,l&&n.createElement("div",{className:f.footer},l))},i=y=>({wrapper:(0,t.css)({label:"call-to-action-card",background:y.colors.background.secondary,borderRadius:y.shape.radius.default,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,padding:y.spacing(3),[y.breakpoints.down("sm")]:{padding:y.spacing(3,1)}}),message:(0,t.css)({marginBottom:y.spacing(3),fontStyle:"italic"}),footer:(0,t.css)({marginTop:y.spacing(3)})})},4236:(X,L,e)=>{"use strict";e.d(L,{L:()=>S,Z:()=>c});var t=e(41407),n=e(39953),r=e(82803),a=e(53039),i=e(78020);const y=n.createContext(null),c=({disabled:M,href:R,onClick:I,children:A,isSelected:O,className:N,...o})=>{const w=(0,n.useMemo)(()=>n.Children.toArray(A).some($=>n.isValidElement($)&&$.type===l),[A]),K=M||!I&&!R,V=I&&!M?I:void 0,_=(0,r.l4)(),U=(0,i.$)(_,M,K,O);return n.createElement(i._,{disableEvents:M,disableHover:K,isSelected:O,className:(0,t.cx)(U.container,N),...o},n.createElement(y.Provider,{value:{href:R,onClick:V,disabled:M,isSelected:O}},!w&&n.createElement(l,null),A))},l=({children:M,className:R,"aria-label":I})=>{const A=(0,n.useContext)(y),O=(0,r.wW)(d),{href:N,onClick:o,isSelected:w}=A??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(O.heading,R)},N?n.createElement("a",{href:N,className:O.linkHack,"aria-label":I,onClick:o},M):o?n.createElement("button",{onClick:o,className:O.linkHack,"aria-label":I,type:"button"},M):n.createElement(n.Fragment,null,M),w!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:w}))};l.displayName="Heading";const d=M=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:M.typography.size.md,letterSpacing:"inherit",lineHeight:M.typography.body.lineHeight,color:M.colors.text.primary,fontWeight:M.typography.fontWeightMedium}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:M.shape.radius.default},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,a.getFocusStyles)(M),zIndex:1}}})}),f=({children:M,className:R})=>{const I=(0,r.wW)(m);return n.createElement("div",{className:(0,t.cx)(I.tagList,R)},M)};f.displayName="Tags";const m=M=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),u=({children:M,className:R})=>{const I=(0,r.wW)(h);return n.createElement("p",{className:(0,t.cx)(I.description,R)},M)};u.displayName="Description";const h=M=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:M.spacing(1,0,0),color:M.colors.text.secondary,lineHeight:M.typography.body.lineHeight})}),C=({children:M,align:R="start",className:I})=>{const A=(0,r.wW)(x);return n.createElement("div",{className:(0,t.cx)(A.media,I,(0,t.css)({alignSelf:R}))},M)};C.displayName="Figure";const x=M=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:M.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),b=(0,n.memo)(({children:M,className:R,separator:I="|"})=>{const A=(0,r.wW)(g);let O=M;const N=n.Children.toArray(M).filter(Boolean);return N.length?(O=N.map((o,w)=>n.createElement("div",{key:`element_${w}`,className:A.metadataItem},o)),N.length>1&&I&&(O=N.reduce((o,w,K)=>[o,n.createElement("span",{key:`separator_${K}`,className:A.separator},I),w])),n.createElement("div",{className:(0,t.cx)(A.metadata,R)},O)):null});b.displayName="Meta";const g=M=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:M.typography.size.sm,color:M.colors.text.secondary,margin:M.spacing(.5,0,0),lineHeight:M.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${M.spacing(1)}`})}),p=({children:M,disabled:R,variant:I,className:A})=>{const O=(0,r.wW)(v),o=(0,n.useContext)(y)?.disabled||R,w=I==="primary"?O.actions:O.secondaryActions;return n.createElement("div",{className:(0,t.cx)(w,A)},n.Children.map(M,K=>n.isValidElement(K)?(0,n.cloneElement)(K,{disabled:o,...K.props}):null))},v=M=>({actions:(0,t.css)({gridArea:"Actions",marginTop:M.spacing(2),"& > *":{marginRight:M.spacing(1)}}),secondaryActions:(0,t.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:M.colors.text.secondary,marginTtop:M.spacing(2),"& > *":{marginRight:`${M.spacing(1)} !important`}})}),E=({children:M,disabled:R,className:I})=>n.createElement(p,{variant:"primary",disabled:R,className:I},M);E.displayName="Actions";const P=({children:M,disabled:R,className:I})=>n.createElement(p,{variant:"secondary",disabled:R,className:I},M);P.displayName="SecondaryActions";const S=M=>({inner:(0,t.css)({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap"}),...d(M),...g(M),...h(M),...x(M),...v(M),...m(M)});c.Heading=l,c.Tags=f,c.Figure=C,c.Meta=b,c.Actions=E,c.SecondaryActions=P,c.Description=u},78020:(X,L,e)=>{"use strict";e.d(L,{$:()=>d,_:()=>l});var t=e(41407),n=e(39953),r=e(82803),a=e(64084),i=e(53039);const y=({children:f,href:m})=>{const{inner:u}=(0,r.wW)(c);return m?n.createElement("a",{className:u,href:m},f):n.createElement(n.Fragment,null,f)},c=f=>({inner:(0,t.css)({display:"flex",width:"100%",padding:f.spacing(2)})}),l=({children:f,disableEvents:m,disableHover:u,isSelected:h,className:C,href:x,...b})=>{const g=(0,r.l4)(),{oldContainer:p}=d(g,m,u,h);return n.createElement("div",{...b,className:(0,t.cx)(p,C)},n.createElement(y,{href:x},f))},d=(0,a.B)((f,m=!1,u=!1,h)=>{const C=h!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:f.spacing(2),background:f.colors.background.secondary,borderRadius:f.shape.radius.default,marginBottom:"8px",pointerEvents:m?"none":"auto",transition:f.transitions.create(["background-color","box-shadow","border-color","color"],{duration:f.transitions.duration.short}),...!u&&{"&:hover":{background:f.colors.emphasize(f.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":i.getFocusStyles(f)},...C&&{cursor:"pointer"},...h&&{outline:`solid 2px ${f.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:f.colors.background.secondary,borderRadius:f.shape.radius.default,position:"relative",pointerEvents:m?"none":"auto",marginBottom:f.spacing(1),transition:f.transitions.create(["background-color","box-shadow","border-color","color"],{duration:f.transitions.duration.short}),...!u&&{"&:hover":{background:f.colors.emphasize(f.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":i.getFocusStyles(f)}})}})},52895:(X,L,e)=>{"use strict";e.d(L,{v:()=>u});var t=e(41407),n=e(80172),r=e.n(n),a=e(62584),i=e(39953),y=e(39285),c=e(38637),l=e(9558),d=e(62427);const f=(0,t.css)({"&:focus":{outline:"none"}}),m=" / ";class u extends i.PureComponent{constructor(C){super(C),this.flattenOptions=(p,v=[])=>{let E=[];for(const P of p){const S=[...v];S.push(P),P.items?E=[...E,...this.flattenOptions(P.items,S)]:E.push({singleLabel:S[S.length-1].label,label:S.map(M=>M.label).join(this.props.separator||m),value:S.map(M=>M.value)})}return E},this.getSearchableOptions=r()(p=>this.flattenOptions(p)),this.onChange=(p,v)=>{const E=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?v.map(P=>P.label).join(this.props.separator||m):v[v.length-1].label;this.setState({rcValue:p,focusCascade:!0,activeLabel:E}),this.props.onSelect(v[v.length-1].value)},this.onSelect=p=>{const v=p.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?p.label:p.singleLabel||"",rcValue:v,isSearching:!1}),this.props.onSelect(v[v.length-1])},this.onCreateOption=p=>{this.setState({activeLabel:p,rcValue:[],isSearching:!1}),this.props.onSelect(p)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=p=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(p.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=p=>{p===""&&this.setState({isSearching:!1})};const x=this.getSearchableOptions(C.options),{rcValue:b,activeLabel:g}=this.setInitialValue(x,C.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:b,activeLabel:g}}setInitialValue(C,x){if(!x)return{rcValue:[],activeLabel:""};for(const b of C){const g=b.value||[];if(g[g.length-1]===x)return{rcValue:g,activeLabel:this.props.displayAllSelectedLevels?b.label:b.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:x}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:C,formatCreateLabel:x,placeholder:b,width:g,changeOnSelect:p,options:v}=this.props,{focusCascade:E,isSearching:P,rcValue:S,activeLabel:M}=this.state,R=this.getSearchableOptions(v);return i.createElement("div",null,P?i.createElement(l.Ph,{allowCustomValue:C,placeholder:b,autoFocus:!E,onChange:this.onSelect,onBlur:this.onBlur,options:R,onCreateOption:this.onCreateOption,formatCreateLabel:x,width:g,onInputChange:this.onSelectInputChange}):i.createElement(a.Z,{onChange:(0,d.K)(this.onChange),options:v,changeOnSelect:p,value:S.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},i.createElement("div",{className:f},i.createElement(c.I,{autoFocus:this.props.autoFocus,width:g,placeholder:b,onBlur:this.onBlurCascade,value:M,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:E?i.createElement(y.J,{name:"angle-up"}):i.createElement(y.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}u.defaultProps={changeOnSelect:!0}},62427:(X,L,e)=>{"use strict";e.d(L,{K:()=>t,p:()=>n});const t=i=>(y,c)=>{i&&i(y.map(l=>String(l)),r(c))},n=i=>y=>{i&&i(r(y))},r=i=>i.map(a),a=i=>({value:i.value??"",label:i.label})},846:(X,L,e)=>{"use strict";e.d(L,{L:()=>n});var t=e(39953);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=a=>{const i=this.myRef.current;(!i||a.target instanceof Node&&!i.contains(a.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}n.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:void 0,useCapture:!1}},36210:(X,L,e)=>{"use strict";e.d(L,{m:()=>d});var t=e(41407),n=e(39953),r=e(28384),a=e(82803),i=e(4919),y=e(39285),c=e(99560);const l=2*1e3;function d({onClipboardCopy:u,onClipboardError:h,children:C,getText:x,icon:b,variant:g,...p}){const v=(0,a.wW)(m),[E,P]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let R;return E&&(R=setTimeout(()=>{P(!1)},l)),()=>{window.clearTimeout(R)}},[E]);const S=(0,n.useRef)(null),M=(0,n.useCallback)(async()=>{const R=x();try{await f(R,S),P(!0),u?.(R)}catch(I){h?.(R,I)}},[x,u,h]);return n.createElement(n.Fragment,null,E&&n.createElement(c.K,{placement:"top",referenceElement:S.current},n.createElement(r.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(i.zx,{onClick:M,icon:b,variant:E?"success":g,"aria-label":E?"Copied":void 0,...p,className:(0,t.cx)(v.button,E&&v.successButton,p.className),ref:S},C,E&&n.createElement("div",{className:v.successOverlay},n.createElement(y.J,{name:"check"}))))}const f=async(u,h)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(u);{const C=document.createElement("textarea");h.current?.appendChild(C),C.value=u,C.focus(),C.select(),document.execCommand("copy"),C.remove()}},m=u=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},4516:(X,L,e)=>{"use strict";e.d(L,{s:()=>d});var t=e(41407),n=e(86832),r=e.n(n),a=e(39953),i=e(28409),y=e(39285),c=e(82803),l=e(53039);const d=({label:m,isOpen:u,onToggle:h,className:C,contentClassName:x,children:b,labelId:g,loading:p=!1,headerDataTestId:v,contentDataTestId:E})=>{const[P,S]=(0,a.useState)(u),M=(0,c.wW)(f),R=O=>{O.target instanceof HTMLElement&&O.target.tagName==="A"||(O.preventDefault(),O.stopPropagation(),h?.(!P),S(!P))},{current:I}=(0,a.useRef)((0,n.uniqueId)()),A=g??`collapse-label-${I}`;return a.createElement(a.Fragment,null,a.createElement("div",{onClick:R,className:(0,t.cx)(M.header,C)},a.createElement("button",{type:"button",id:`collapse-button-${I}`,className:M.button,onClick:R,"aria-expanded":P&&!p,"aria-controls":`collapse-content-${I}`,"aria-labelledby":A},p?a.createElement(i.$,{className:M.spinner}):a.createElement(y.J,{name:P?"angle-up":"angle-down",className:M.icon})),a.createElement("div",{className:M.label,id:`collapse-label-${I}`,"data-testid":v},m)),P&&a.createElement("div",{id:`collapse-content-${I}`,className:(0,t.cx)(M.content,x),"data-testid":E},b))},f=m=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:m.typography.size.lg,padding:`${m.spacing(.5)} 0`,"&:focus-within":(0,l.getFocusStyles)(m)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:m.colors.text.secondary}),content:(0,t.css)({padding:`${m.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:m.spacing(2)}),label:(0,t.css)({display:"flex"})})},62818:(X,L,e)=>{"use strict";e.d(L,{U:()=>l,y:()=>c});var t=e(41407),n=e(39953),r=e(82803),a=e(4919),i=e(39285);const y=d=>({collapse:(0,t.css)({label:"collapse",marginBottom:d.spacing(1),backgroundColor:d.colors.background.primary,border:`1px solid ${d.colors.border.weak}`,position:"relative",borderRadius:d.shape.radius.default,width:"100%",display:"flex",flexDirection:"column",flex:"1 1 0"}),collapseBody:(0,t.css)({label:"collapse__body",padding:d.spacing(d.components.panel.padding),paddingTop:0,flex:1,overflow:"hidden",display:"flex",flexDirection:"column"}),bodyContentWrapper:(0,t.css)({label:"bodyContentWrapper",flex:1,overflow:"hidden"}),loader:(0,t.css)({label:"collapse__loader",height:"2px",position:"relative",overflow:"hidden",background:"none",margin:d.spacing(.5)}),loaderActive:(0,t.css)({label:"collapse__loader_active","&:after":{content:"' '",display:"block",width:"25%",top:0,height:"250%",position:"absolute",animation:"loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms",animationIterationCount:100,left:"-25%",background:d.colors.primary.main},"@keyframes loader":{from:{left:"-25%",opacity:.1},to:{left:"100%",opacity:1}}}),header:(0,t.css)({label:"collapse__header",padding:d.spacing(1,2,1,2),display:"flex",transition:"all 0.1s linear"}),headerCollapsed:(0,t.css)({label:"collapse__header--collapsed",padding:d.spacing(1,2,1,2)}),headerLabel:(0,t.css)({label:"collapse__header-label",fontWeight:d.typography.fontWeightMedium,marginRight:d.spacing(1),fontSize:d.typography.size.md,display:"flex",flex:"0 0 100%"}),icon:(0,t.css)({label:"collapse__icon",margin:d.spacing(.25,1,0,-1)})}),c=({isOpen:d,onToggle:f,...m})=>{const[u,h]=(0,n.useState)(d);return n.createElement(l,{isOpen:u,collapsible:!0,...m,onToggle:()=>{h(!u),f&&f(!u)}})},l=({isOpen:d,label:f,loading:m,collapsible:u,onToggle:h,className:C,children:x})=>{const b=(0,r.wW)(a.gN),g=(0,r.wW)(y),p=()=>{h&&h(!d)},v=(0,t.cx)([g.collapse,C]),E=m?(0,t.cx)([g.loader,g.loaderActive]):(0,t.cx)([g.loader]),P=u?(0,t.cx)([g.header]):(0,t.cx)([g.headerCollapsed]);return n.createElement("div",{className:v},n.createElement("button",{type:"button",className:(0,t.cx)(b,P),onClick:p},u&&n.createElement(i.J,{className:g.icon,name:d?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([g.headerLabel])},f)),d&&n.createElement("div",{className:(0,t.cx)([g.collapseBody])},n.createElement("div",{className:E}),n.createElement("div",{className:g.bodyContentWrapper},x)))};l.displayName="Collapse"},35605:(X,L,e)=>{"use strict";e.d(L,{Z:()=>d});var t=e(41407),n=e(86832),r=e.n(n),a=e(39953),i=e(63374),y=e(82803),c=e(38637);const l=(0,a.forwardRef)(({color:u,onChange:h,isClearable:C=!1,onClick:x,onBlur:b,disabled:g,buttonAriaLabel:p,...v},E)=>{const[P,S]=(0,a.useState)(u),[M,R]=(0,a.useState)(u),I=(0,a.useMemo)(()=>(0,n.debounce)(h,100),[]);(0,a.useEffect)(()=>{const N=(0,i.Z)(u);N.isValid()&&u!==M&&(S(N.toString()),R(u))},[u,M]);const A=N=>{const{value:o}=N.currentTarget;if(S(o),o===""&&C){I(o);return}const w=(0,i.Z)(o);w.isValid()&&I(w.toString())},O=N=>{(0,i.Z)(P).isValid()||S(u),b?.(N)};return a.createElement(c.I,{...v,value:P,onChange:A,disabled:g,onClick:x,onBlur:O,addonBefore:a.createElement(f,{onClick:x,ariaLabel:p,disabled:g,color:u}),ref:E})});l.displayName="ColorInput";const d=l,f=({color:u,onClick:h,disabled:C,ariaLabel:x})=>{const b=(0,y.wW)(m);return a.createElement("button",{type:"button",onClick:h,"aria-label":x,disabled:C||!h,className:(0,t.cx)(b,(0,t.css)({backgroundColor:u}))})},m=u=>(0,t.css)({height:"100%",width:`${u.spacing.gridSize*4}px`,borderRadius:`${u.shape.radius.default} 0 0 ${u.shape.radius.default}`,border:`1px solid ${u.colors.border.medium}`})},69360:(X,L,e)=>{"use strict";e.d(L,{sp:()=>h,zH:()=>u});var t=e(41407),n=e(39953),r=e(82803),a=e(64084),i=e(58842),y=e(55407),c=e(66557),l=e(15057),d=e(5205),f=e(33312);const m=(x,b="ColorPicker")=>{var g;return g=class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}render(){const{theme:p,children:v,onChange:E,color:P}=this.props,S=C(p),M=n.createElement(x,{...this.props,children:null,onChange:E});return n.createElement(c.D,{content:M,hideAfter:300},(R,I,A)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(y.J,{...A,referenceElement:this.pickerTriggerRef.current,wrapperClassName:S.colorPicker,onMouseLeave:I,onMouseEnter:R,onKeyDown:O=>(0,i.i)(O,I)}),v?v({ref:this.pickerTriggerRef,showColorPicker:R,hideColorPicker:I}):n.createElement(d.b,{ref:this.pickerTriggerRef,onClick:R,onMouseLeave:I,color:p.visualization.getColorByName(P||"#000000"),"aria-label":P})))}},g.displayName=b,g},u=(0,r.HE)(m(l.h,"ColorPicker")),h=(0,r.HE)(m(f.j,"SeriesColorPicker")),C=(0,a.B)(x=>({colorPicker:(0,t.css)({position:"absolute",zIndex:x.zIndex.tooltip,color:x.colors.text.primary,maxWidth:"400px",fontSize:x.typography.size.sm,padding:"15px !important",'& [data-placement^="top"]':{paddingLeft:"0 !important",paddingRight:"0 !important"},'& [data-placement^="bottom"]':{paddingLeft:"0 !important",paddingRight:"0 !important"},'& [data-placement^="left"]':{paddingTop:"0 !important"},'& [data-placement^="right"]':{paddingTop:"0 !important"}})}))},81573:(X,L,e)=>{"use strict";e.d(L,{T:()=>f});var t=e(41407),n=e(39953),r=e(8776),a=e(62271),i=e(91249),y=e(82803),c=e(846),l=e(35605),d=e(91797);const f=(0,n.forwardRef)(({value:u="",onChange:h,returnColorAs:C="rgb",...x},b)=>{const[g,p]=(0,n.useState)(u),[v,E]=(0,n.useState)(!1),P=(0,y.l4)(),S=(0,y.wW)(m),M=(0,y.wW)(d.W);return(0,a.Z)(R=>{if(R===u)return;if(!R){h("");return}const I=P.visualization.getColorByName(R);h(C==="rgb"?i.asRgbString(I):i.asHexString(I))},500,[g]),n.createElement(c.L,{onClick:()=>E(!1)},n.createElement("div",{className:S.wrapper},v&&!x.disabled&&n.createElement(r.ef,{"data-testid":"color-popover",color:g,onChange:p,className:(0,t.cx)(M.root,S.picker)}),n.createElement(l.Z,{...x,theme:P,color:g,onChange:p,buttonAriaLabel:"Open color picker",onClick:()=>E(!0),onBlur:()=>E(!1),ref:b,isClearable:!0})))});f.displayName="ColorPickerInput";const m=u=>({wrapper:(0,t.css)({position:"relative"}),picker:(0,t.css)({"&.react-colorful":{position:"absolute",width:"100%",zIndex:11,bottom:"36px"}}),inner:(0,t.css)({position:"absolute"})})},15057:(X,L,e)=>{"use strict";e.d(L,{h:()=>g});var t=e(41407),n=e(30064),r=e(39953),a=e(91249),i=e(82803),y=e(64084),c=e(5205),l=e(86832);function d(v,E){const P=new Array(v.length);for(let S=0;S<v.length;S++){const M=v.length-1-S;P[S]=E(v[M],M,v)}return P}const m=({hue:v,selectedColor:E,onColorSelect:P,...S})=>{const M=(0,l.upperFirst)(v.name),R=(0,i.wW)(u);return r.createElement("div",{className:R.colorRow},r.createElement("div",{className:R.colorLabel},M),r.createElement("div",{...S,className:R.swatchRow},d(v.shades,I=>r.createElement(c.b,{key:I.name,"aria-label":I.name,variant:I.primary?c.$.Large:c.$.Small,isSelected:I.name===E,color:I.color,onClick:()=>P(I.name)}))))},u=v=>({colorRow:(0,t.css)({display:"grid",gridTemplateColumns:"25% 1fr",gridColumnGap:v.spacing(2),padding:v.spacing(.5,0),"&:hover":{background:v.colors.background.secondary}}),colorLabel:(0,t.css)({paddingLeft:v.spacing(2),display:"flex",alignItems:"center"}),swatchRow:(0,t.css)({display:"flex",gap:v.spacing(1),alignItems:"center",justifyContent:"space-around",flexDirection:"row"})}),h=({color:v,onChange:E})=>{const P=(0,i.l4)(),S=(0,i.wW)(C),M=[];for(const R of P.visualization.hues)M.push(r.createElement(m,{key:R.name,selectedColor:v,hue:R,onColorSelect:E}));return r.createElement(r.Fragment,null,r.createElement("div",{className:S.swatches},M),r.createElement("div",{className:S.extraColors},r.createElement(c.b,{isSelected:v==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>E("transparent")}),r.createElement(c.b,{isSelected:v==="text",color:P.colors.text.primary,label:"Text color",onClick:()=>E("text")})))},C=v=>({container:(0,t.css)({display:"flex",flexDirection:"column"}),extraColors:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-around",gap:v.spacing(1),padding:v.spacing(1,0)}),swatches:(0,t.css)({display:"grid",flexGrow:1})});var x=e(91797);class b extends r.Component{constructor(E){super(E),this.getTabClassName=P=>{const{activePicker:S}=this.state;return`ColorPickerPopover__tab ${S===P&&"ColorPickerPopover__tab--active"}`},this.handleChange=P=>{const{onChange:S,enableNamedColors:M,theme:R}=this.props;if(M)return S(P);S(a.asHexString(R.visualization.getColorByName(P)))},this.onTabChange=P=>()=>this.setState({activePicker:P}),this.renderPicker=()=>{const{activePicker:P}=this.state,{color:S}=this.props;switch(P){case"spectrum":return r.createElement(x.Z,{color:S,onChange:this.handleChange});case"palette":return r.createElement(h,{color:S,onChange:this.handleChange});default:return this.renderCustomPicker(P)}},this.renderCustomPicker=P=>{const{customPickers:S,color:M,theme:R}=this.props;return S?r.createElement(S[P].tabComponent,{color:M,theme:R,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:P}=this.props;return P?r.createElement(r.Fragment,null,Object.keys(P).map(S=>r.createElement("button",{className:this.getTabClassName(S),onClick:this.onTabChange(S),key:S,type:"button"},P[S].name))):null},this.state={activePicker:"palette"}}render(){const{theme:E}=this.props,P=p(E);return r.createElement(n.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},r.createElement("div",{tabIndex:-1,className:P.colorPickerPopover},r.createElement("div",{className:P.colorPickerPopoverTabs},r.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette"),type:"button"},"Colors"),r.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum"),type:"button"},"Custom"),this.renderCustomPickerTabs()),r.createElement("div",{className:P.colorPickerPopoverContent},this.renderPicker())))}}const g=(0,i.HE)(b);g.displayName="ColorPickerPopover";const p=(0,y.B)(v=>({colorPickerPopover:(0,t.css)({borderRadius:v.shape.radius.default,boxShadow:v.shadows.z3,background:v.colors.background.primary,border:`1px solid ${v.colors.border.weak}`,".ColorPickerPopover__tab":{width:"50%",textAlign:"center",padding:v.spacing(1,0),background:v.colors.background.secondary,color:v.colors.text.secondary,fontSize:v.typography.bodySmall.fontSize,cursor:"pointer",border:"none","&:focus:not(:focus-visible)":{outline:"none",boxShadow:"none"},":focus-visible":{position:"relative"}},".ColorPickerPopover__tab--active":{color:v.colors.text.primary,fontWeight:v.typography.fontWeightMedium,background:v.colors.background.primary}}),colorPickerPopoverContent:(0,t.css)({width:"246px",fontSize:v.typography.bodySmall.fontSize,minHeight:"184px",padding:v.spacing(1),display:"flex",flexDirection:"column"}),colorPickerPopoverTabs:(0,t.css)({display:"flex",width:"100%",borderRadius:`${v.shape.radius.default} ${v.shape.radius.default} 0 0`})}))},5205:(X,L,e)=>{"use strict";e.d(L,{$:()=>c,b:()=>l});var t=e(41407),n=e(30064),r=e(39953),a=e(63374),i=e(75766),y=e(82803),c=(f=>(f.Small="small",f.Large="large",f))(c||{});const l=r.forwardRef(({color:f,label:m,variant:u="small",isSelected:h,"aria-label":C,...x},b)=>{const g=(0,y.l4)(),{isFocusVisible:p,focusProps:v}=(0,n.Fx)(),E=d(g,u,f,p,h),P=!!m,S=C||m;return r.createElement("div",{ref:b,className:E.wrapper,"data-testid":i.wl.components.ColorSwatch.name,...x},P&&r.createElement("span",{className:E.label},m),r.createElement("button",{className:E.swatch,...v,"aria-label":S?`${S} color`:"Pick a color",type:"button"}))}),d=(f,m,u,h,C)=>{const x=(0,a.Z)(u),g=m==="small"?"16px":"32px";let p="none";return x.getAlpha()<.1&&(p=`2px solid ${f.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:f.spacing(1)}),swatch:(0,t.css)({width:g,height:g,background:`${u}`,border:p,borderRadius:f.shape.radius.circle,outlineOffset:"1px",outline:h?`2px solid  ${f.colors.primary.main}`:"none",boxShadow:C?`inset 0 0 0 2px ${u}, inset 0 0 0 4px ${f.colors.getContrastText(u)}`:"none",transition:f.transitions.create(["transform"],{duration:f.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"},"@media (forced-colors: active)":{forcedColorAdjust:"none"}})}};l.displayName="ColorSwatch"},33312:(X,L,e)=>{"use strict";e.d(L,{j:()=>y,q:()=>c});var t=e(41407),n=e(39953),r=e(82803),a=e(35829),i=e(15057);const y=d=>{const f=(0,r.wW)(l),{yaxis:m,onToggleAxis:u,color:h,...C}=d,x=u?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(a.r,{key:"yaxisSwitch",label:"Use right y-axis",className:f.colorPickerAxisSwitch,labelClass:f.colorPickerAxisSwitchLabel,checked:m===2,onChange:()=>{u&&u()}})}}}:void 0;return n.createElement(i.h,{...C,color:h||"#000000",customPickers:x})},c=(0,r.HE)(y),l=()=>({colorPickerAxisSwitch:(0,t.css)({width:"100%"}),colorPickerAxisSwitchLabel:(0,t.css)({display:"flex",flexGrow:1})})},91797:(X,L,e)=>{"use strict";e.d(L,{W:()=>f,Z:()=>m});var t=e(41407),n=e(39953),r=e(8776),a=e(62271),i=e(63374),y=e(91249),c=e(82803),l=e(35605);const d=({color:u,onChange:h})=>{const[C,x]=(0,n.useState)(u);(0,a.Z)(v=>{h(y.asHexString(b.visualization.getColorByName(v)))},500,[C]);const b=(0,c.l4)(),g=(0,c.wW)(f),p=(0,n.useMemo)(()=>C.startsWith("rgba")?C:(0,i.Z)(b.visualization.getColorByName(u)).toRgbString(),[C,b,u]);return n.createElement("div",{className:g.wrapper},n.createElement(r.ef,{className:g.root,color:p,onChange:x}),n.createElement(l.Z,{theme:b,color:p,onChange:x,className:g.colorInput}))},f=u=>({wrapper:(0,t.css)({flexGrow:1}),root:(0,t.css)({"&.react-colorful":{width:"auto"},".react-colorful":{"&__saturation":{borderRadius:`${u.shape.radius.default} ${u.shape.radius.default} 0 0`},"&__alpha":{borderRadius:`0 0 ${u.shape.radius.default} ${u.shape.radius.default}`},"&__alpha, &__hue":{height:u.spacing(2),position:"relative"},"&__pointer":{height:u.spacing(2),width:u.spacing(2)}}}),colorInput:(0,t.css)({marginTop:u.spacing(2)})}),m=d},85387:(X,L,e)=>{"use strict";e.d(L,{p:()=>c});var t=e(41407),n=e(39953),r=e(82803),a=e(64084),i=e(4919);class y extends n.PureComponent{constructor(){super(...arguments),this.mainButtonRef=n.createRef(),this.confirmButtonRef=n.createRef(),this.state={showConfirm:!1},this.onClickButton=f=>{f&&f.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=f=>{f&&f.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=f=>{f&&f.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:f,className:m,size:u,disabled:h,confirmText:C,confirmVariant:x,children:b}=this.props,g=l(f),p=(0,t.cx)(m,this.state.showConfirm?g.buttonHide:g.buttonShow,h&&g.buttonDisabled),v=(0,t.cx)(g.confirmButton,this.state.showConfirm?g.confirmButtonShow:g.confirmButtonHide),E=h?()=>{}:this.onClickButton;return n.createElement("span",{className:g.buttonContainer},n.createElement("div",{className:(0,t.cx)(h&&g.disabled)},n.createElement("span",{className:p},typeof b=="string"?n.createElement(i.zx,{size:u,fill:"text",onClick:E,ref:this.mainButtonRef},b):n.cloneElement(b,{onClick:E,ref:this.mainButtonRef}))),n.createElement("span",{className:v},n.createElement(i.zx,{size:u,variant:x,onClick:this.onConfirm,ref:this.confirmButtonRef},C),n.createElement(i.zx,{size:u,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const c=(0,r.HE)(y),l=(0,a.B)(d=>({buttonContainer:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"flex-end"}),buttonDisabled:(0,t.css)({textDecoration:"none",color:d.colors.text.primary,opacity:.65,pointerEvents:"none"}),buttonShow:(0,t.css)({opacity:1,transition:"opacity 0.1s ease",zIndex:2}),buttonHide:(0,t.css)({opacity:0,transition:"opacity 0.1s ease, visibility 0 0.1s",visibility:"hidden",zIndex:0}),confirmButton:(0,t.css)({alignItems:"flex-start",background:d.colors.background.primary,display:"flex",position:"absolute",pointerEvents:"none"}),confirmButtonShow:(0,t.css)({zIndex:1,opacity:1,transition:"opacity 0.08s ease-out, transform 0.1s ease-out",transform:"translateX(0)",pointerEvents:"all"}),confirmButtonHide:(0,t.css)({opacity:0,visibility:"hidden",transition:"opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s",transform:"translateX(100px)"}),disabled:(0,t.css)({cursor:"not-allowed"})}));c.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},c.displayName="ConfirmButton"},51932:(X,L,e)=>{"use strict";e.d(L,{m:()=>a});var t=e(39953),n=e(4919),r=e(85387);const a=({size:i,disabled:y,onConfirm:c,"aria-label":l,closeOnConfirm:d})=>t.createElement(r.p,{confirmText:"Delete",confirmVariant:"destructive",size:i||"md",disabled:y,onConfirm:c,closeOnConfirm:d},t.createElement(n.zx,{"aria-label":l,variant:"destructive",icon:"times",size:i||"sm"}))},32840:(X,L,e)=>{"use strict";e.d(L,{s:()=>d});var t=e(41407),n=e(39953),r=e(75766),a=e(12223),i=e(38637),y=e(82803),c=e(4919),l=e(73075);const d=({isOpen:m,title:u,body:h,description:C,confirmText:x,confirmVariant:b="destructive",confirmationText:g,dismissText:p="Cancel",dismissVariant:v="secondary",alternativeText:E,modalClass:P,icon:S="exclamation-triangle",onConfirm:M,onDismiss:R,onAlternative:I,confirmButtonVariant:A="destructive"})=>{const[O,N]=(0,n.useState)(!!g),o=(0,y.wW)(f),w=(0,n.useRef)(null),K=_=>{N(g?.toLowerCase().localeCompare(_.currentTarget.value.toLowerCase())!==0)};(0,n.useEffect)(()=>{m&&w.current?.focus()},[m]),(0,n.useEffect)(()=>{m&&N(!!g)},[m,g]);const V=async()=>{N(!0);try{await M()}finally{N(!1)}};return n.createElement(l.u,{className:(0,t.cx)(o.modal,P),title:u,icon:S,isOpen:m,onDismiss:R},n.createElement("div",{className:o.modalText},h,C?n.createElement("div",{className:o.modalDescription},C):null,g?n.createElement("div",{className:o.modalConfirmationInput},n.createElement(a.Lh,null,n.createElement(i.I,{placeholder:`Type "${g}" to confirm`,onChange:K}))):null),n.createElement(l.u.ButtonRow,null,n.createElement(c.zx,{variant:v,onClick:R,fill:"outline"},p),n.createElement(c.zx,{variant:A,onClick:V,disabled:O,ref:w,"data-testid":r.wl.pages.ConfirmModal.delete},x),I?n.createElement(c.zx,{variant:"primary",onClick:I},E):null))},f=m=>({modal:(0,t.css)({width:"500px"}),modalText:(0,t.css)({fontSize:m.typography.h5.fontSize,color:m.colors.text.primary}),modalDescription:(0,t.css)({fontSize:m.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:m.spacing(1)})})},53790:(X,L,e)=>{"use strict";e.d(L,{x:()=>y});var t=e(39953),n=e(17639),r=e(75766),a=e(13767),i=e(70393);const y=t.memo(({x:c,y:l,onClose:d,focusOnOpen:f=!0,renderMenuItems:m,renderHeader:u})=>{const h=(0,t.useRef)(null),[C,x]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const E=h.current;if(E){const P=E.getBoundingClientRect(),S=5,M={right:window.innerWidth<c+P.width,bottom:window.innerHeight<l+P.height+S};x({position:"fixed",left:M.right?c-P.width-S:c-S,top:M.bottom?l-P.height-S:l+S})}},[c,l]),(0,n.Z)(h,()=>{d?.()});const b=u?.(),g=m?.(),p=E=>{f&&E(0)},v=E=>{E.key==="Escape"&&(E.preventDefault(),E.stopPropagation(),d?.())};return t.createElement(i.h_,null,t.createElement(a.v,{header:b,ref:h,style:C,ariaLabel:r.wl.components.Menu.MenuComponent("Context"),onOpen:p,onClick:d,onKeyDown:v},g))});y.displayName="ContextMenu"},43867:(X,L,e)=>{"use strict";e.d(L,{z:()=>r});var t=e(39953),n=e(53790);const r=({children:a,renderMenuItems:i,focusOnOpen:y=!0})=>{const[c,l]=(0,t.useState)(!1),[d,f]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,a({openMenu:m=>{l(!0),f({x:m.pageX,y:m.pageY})}}),c&&t.createElement(n.x,{onClose:()=>l(!1),x:d.x,y:d.y,renderMenuItems:i,focusOnOpen:y}))}},64447:(X,L,e)=>{"use strict";e.d(L,{$:()=>f,Z:()=>m});var t=e(41407),n=e(39953),r=e(98211),a=e(82803),i=e(77814),y=e.n(i),c=e(39285);const l=({children:h})=>{const[C,x]=(0,n.useState)(!1),[b,g]=(0,n.useState)(!1),p=(0,n.useRef)(null),v=(0,n.useRef)(null),E=(0,a.wW)(d);return(0,n.useEffect)(()=>{const P=new IntersectionObserver(S=>{S.forEach(M=>{M.target===p.current?x(!M.isIntersecting):M.target===v.current&&g(!M.isIntersecting)})});return[p,v].forEach(S=>{S.current&&P.observe(S.current)}),()=>P.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(E.scrollIndicator,E.scrollTopIndicator,{[E.scrollIndicatorVisible]:C})},n.createElement(c.J,{className:y()(E.scrollIcon,E.scrollTopIcon),name:"angle-up"})),n.createElement("div",{className:E.scrollContent},n.createElement("div",{ref:p}),h,n.createElement("div",{ref:v})),n.createElement("div",{className:(0,t.cx)(E.scrollIndicator,E.scrollBottomIndicator,{[E.scrollIndicatorVisible]:b})},n.createElement(c.J,{className:y()(E.scrollIcon,E.scrollBottomIcon),name:"angle-down"})))},d=h=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:h.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:h.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${h.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${h.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1}),scrollIcon:(0,t.css)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,t.css)({top:0}),scrollBottomIcon:(0,t.css)({bottom:0})}),f=({autoHide:h=!1,autoHideTimeout:C=200,setScrollTop:x,className:b,testId:g,autoHeightMin:p="0",autoHeightMax:v="100%",hideTracksWhenNotNeeded:E=!1,hideHorizontalTrack:P,hideVerticalTrack:S,scrollRefCallback:M,showScrollIndicators:R=!1,updateAfterMountMs:I,scrollTop:A,onScroll:O,children:N})=>{const o=(0,n.useRef)(null),w=(0,a.wW)(u);(0,n.useEffect)(()=>{o.current&&M&&M(o.current.view)},[o,M]),(0,n.useEffect)(()=>{o.current&&A!=null&&o.current.scrollTop(A)},[A]),(0,n.useEffect)(()=>{I&&setTimeout(()=>{const j=o.current;j?.update&&j.update()},I)},[I]);function K(j,z,F){return F.style&&z&&(F.style.display="none"),n.createElement("div",{...F,className:j})}const V=(0,n.useCallback)(j=>K("track-horizontal",P,j),[P]),_=(0,n.useCallback)(j=>K("track-vertical",S,j),[S]),U=(0,n.useCallback)(j=>n.createElement("div",{...j,className:"thumb-horizontal"}),[]),$=(0,n.useCallback)(j=>n.createElement("div",{...j,className:"thumb-vertical"}),[]),k=(0,n.useCallback)(j=>(j.style&&j.style.WebkitOverflowScrolling==="touch"&&(j.style.WebkitOverflowScrolling="auto"),n.createElement("div",{...j,className:"scrollbar-view"})),[]),H=(0,n.useCallback)(()=>{o.current&&x&&x(o.current.getValues())},[x]);return n.createElement(r.ZP,{"data-testid":g,ref:o,className:(0,t.cx)(w.customScrollbar,b,{[w.scrollbarWithScrollIndicators]:R}),onScrollStop:H,autoHeight:!0,autoHide:h,autoHideTimeout:C,hideTracksWhenNotNeeded:E,autoHeightMax:v,autoHeightMin:p,renderTrackHorizontal:V,renderTrackVertical:_,renderThumbHorizontal:U,renderThumbVertical:$,renderView:k,onScroll:O},R?n.createElement(l,null,N):N)},m=f,u=h=>({customScrollbar:(0,t.css)({display:"flex",flexGrow:1,".scrollbar-view":{display:"flex",flexGrow:1,flexDirection:"column"},".track-vertical":{borderRadius:h.shape.borderRadius(2),width:`${h.spacing(1)} !important`,right:0,bottom:h.spacing(.25),top:h.spacing(.25)},".track-horizontal":{borderRadius:h.shape.borderRadius(2),height:`${h.spacing(1)} !important`,right:h.spacing(.25),bottom:h.spacing(.25),left:h.spacing(.25)},".thumb-vertical":{background:h.colors.action.focus,borderRadius:h.shape.borderRadius(2),opacity:0},".thumb-horizontal":{background:h.colors.action.focus,borderRadius:h.shape.borderRadius(2),opacity:0},"&:hover":{".thumb-vertical, .thumb-horizontal":{opacity:1,transition:"opacity 0.3s ease-in-out"}}}),scrollbarWithScrollIndicators:(0,t.css)({".scrollbar-view":{position:"static !important"}})})},39960:(X,L,e)=>{"use strict";e.d(L,{k:()=>r});var t=e(39953),n=e(4919);function r({link:a,buttonProps:i}){return t.createElement("a",{href:a.href,target:a.target,rel:"noreferrer",onClick:a.onClick?y=>{!(y.ctrlKey||y.metaKey||y.shiftKey)&&a.onClick&&(y.preventDefault(),a.onClick(y))}:void 0},t.createElement(n.zx,{icon:a.target==="_blank"?"external-link-alt":void 0,variant:"primary",size:"sm",...i},a.title))}},76480:(X,L,e)=>{"use strict";e.d(L,{v:()=>N});var t=e(41407),n=e(10963),r=e.n(n),a=e(39953),i=e(46378),y=e(92418),c=e(76485),l=e(19661),d=e(69733),f=e(24824),m=e(64225),u=e(59608),h=e(82803),C=e(64447),x=e(38637),b=e(70393),g=e(86832),p=e(40920),v=e(38696);const E=w=>({list:(0,t.css)({borderBottom:`1px solid ${w.colors.border.weak}`,"&:last-child":{border:"none"}}),wrapper:(0,t.css)({background:w.colors.background.primary,width:"250px"}),item:(0,t.css)({background:"none",padding:"2px 8px",color:w.colors.text.primary,cursor:"pointer","&:hover":{background:w.colors.action.hover}}),label:(0,t.css)({color:w.colors.text.secondary}),activeItem:(0,t.css)({background:w.colors.background.secondary,"&:hover":{background:w.colors.background.secondary}}),itemValue:(0,t.css)({fontFamily:w.typography.fontFamilyMonospace,fontSize:w.typography.size.sm})}),P=({suggestions:w,...K})=>{const V=(0,a.useRef)(null);(0,p.Z)(V,()=>{K.onClose&&K.onClose()});const _=(0,a.useMemo)(()=>(0,g.groupBy)(w,$=>$.origin),[w]),U=(0,h.wW)(E);return a.createElement("div",{role:"menu",ref:V,className:U.wrapper},Object.keys(_).map(($,k)=>{const H=k===0?0:Object.keys(_).reduce((j,z,F)=>F>=k?j:j+_[z].length,0);return a.createElement(S,{...K,suggestions:_[$],label:`${(0,g.capitalize)($)}`,activeIndex:K.activeIndex,activeIndexOffset:H,key:$})}))};P.displayName="DataLinkSuggestions";const S=a.memo(({activeIndex:w,activeIndexOffset:K,label:V,onClose:_,onSuggestionSelect:U,suggestions:$,activeRef:k})=>{const H=(0,h.wW)(E);return a.createElement(a.Fragment,null,a.createElement(v.a,{className:H.list,items:$,renderItem:(j,z)=>{const F=z+K===w;return a.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(H.item,F&&H.activeItem),ref:F?k:void 0,onClick:()=>{U(j)},title:j.documentation},a.createElement("span",{className:H.itemValue},a.createElement("span",{className:H.label},V)," ",j.label))}}))});S.displayName="DataLinkSuggestionsList";class M{getBoundingClientRect(){const K=window.getSelection(),V=K&&K.anchorNode;return V&&V.parentElement?V.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const R=(w,K)=>w-K*Math.floor(w/K),I={builtInVariable:{pattern:/(\${\S+?})/}},A=[(0,u.Z)({onlyIn:w=>"type"in w&&w.type==="code_block",getSyntax:()=>"links"},{...r().languages,links:I})],O=w=>({input:(0,x.H)({theme:w,invalid:!1}).input,editor:(0,t.css)({".token.builtInVariable":{color:w.colors.success.text},".token.variable":{color:w.colors.primary.text}}),suggestionsWrapper:(0,t.css)({boxShadow:w.shadows.z2}),wrapperOverrides:(0,t.css)({width:"100%","> .slate-query-field__wrapper":{padding:0,backgroundColor:"transparent",border:"none"}})}),N=(0,a.memo)(({value:w,onChange:K,suggestions:V,placeholder:_="http://your-grafana.com/d/000000010/annotations"})=>{const U=(0,a.useRef)(null),$=(0,h.wW)(O),[k,H]=(0,a.useState)(!1),[j,z]=(0,a.useState)(0),[F,J]=(0,a.useState)((0,m.l1)(w)),Q=(0,y.Z)(F),[Z,ne]=(0,a.useState)(0),ee=(0,a.useRef)({showingSuggestions:k,suggestions:V,suggestionsIndex:j,linkUrl:F,onChange:K});ee.current={showingSuggestions:k,suggestions:V,suggestionsIndex:j,linkUrl:F,onChange:K};const de=(0,a.useRef)(null);(0,a.useEffect)(()=>{ne(o(de.current,j))},[j]);const Pe=(0,a.useMemo)(()=>new M,[]),ye=a.useCallback((le,Ee)=>{if(!ee.current.showingSuggestions)return le.key==="="||le.key==="$"||le.keyCode===32&&le.ctrlKey?H(!0):Ee();switch(le.key){case"Backspace":case"Escape":return H(!1),z(0);case"Enter":return le.preventDefault(),me(ee.current.suggestions[ee.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":le.preventDefault();const be=le.key==="ArrowDown"?1:-1;return z(ge=>R(ge+be,ee.current.suggestions.length));default:return Ee()}},[]);(0,a.useEffect)(()=>{Q&&Q.selection.isFocused&&!F.selection.isFocused&&ee.current.onChange(c.Z.serialize(F))},[F,Q]);const he=a.useCallback(({value:le})=>{J(le)},[]),me=(le,Ee=U.current)=>{const ge=De()==="$";le.origin!==d.L8.Template||le.value===f.W.includeVars?Ee.insertText(`${ge?"":"$"}{${le.value}}`):Ee.insertText(`${ge?"":"$"}{${le.value}:queryparam}`),J(Ee.value),H(!1),z(0),ee.current.onChange(c.Z.serialize(Ee.value))},De=()=>{const le=document.getElementById("data-link-input");let Ee="",be,ge;return window.getSelection&&(be=window.getSelection(),be&&be.rangeCount>0&&(ge=be.getRangeAt(0).cloneRange(),ge.collapse(!0),ge.setStart(le,0),Ee=ge.toString().slice(-1))),Ee};return a.createElement("div",{className:$.wrapperOverrides},a.createElement("div",{className:"slate-query-field__wrapper"},a.createElement("div",{id:"data-link-input",className:"slate-query-field"},k&&a.createElement(b.h_,null,a.createElement(i.r,{referenceElement:Pe,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:le,style:Ee,placement:be})=>a.createElement("div",{ref:le,style:Ee,"data-placement":be,className:$.suggestionsWrapper},a.createElement(C.Z,{scrollTop:Z,autoHeightMax:"300px",setScrollTop:({scrollTop:ge})=>ne(ge)},a.createElement(P,{activeRef:de,suggestions:ee.current.suggestions,onSuggestionSelect:me,onClose:()=>H(!1),activeIndex:j}))))),a.createElement(l.ML,{schema:m.Yi,ref:U,placeholder:_,value:ee.current.linkUrl,onChange:he,onKeyDown:(le,Ee,be)=>ye(le,be),plugins:A,className:(0,t.cx)($.editor,$.input,(0,t.css)({padding:"3px 8px"}))}))))});N.displayName="DataLinkInput";function o(w,K){return(w?.clientHeight??0)*K}},22785:(X,L,e)=>{"use strict";e.d(L,{V:()=>l});var t=e(41407),n=e(39953),r=e(75766),a=e(71972),i=e(43867),y=e(43078),c=e(85001);const l=({children:d,links:f,style:m})=>{const u=[{items:(0,a.R)(f),label:"Data links"}],h=u[0].items.length,C=()=>u.map((b,g)=>n.createElement(y.k,{key:`${b.label}${g}`,label:b.label},(b.items||[]).map(p=>n.createElement(c.s,{key:p.label,url:p.url,label:p.label,target:p.target,icon:p.icon,active:p.active,onClick:p.onClick})))),x=(0,t.css)({cursor:"context-menu"});if(h>1)return n.createElement(i.z,{renderMenuItems:C},({openMenu:b})=>d({openMenu:b,targetClassName:x}));{const b=f()[0];return n.createElement("a",{href:b.href,onClick:b.onClick,target:b.target,title:b.title,style:{...m,overflow:"hidden",display:"flex"},"aria-label":r.wl.components.DataLinksContextMenu.singleLink},d({}))}}},86467:(X,L,e)=>{"use strict";e.d(L,{d:()=>E});var t=e(41407),n=e(86832),r=e(39953),a=e(82803),i=e(64084),y=e(4919),c=e(73075),l=e(71972),d=e(96227),f=e(38637),m=e(26286),u=e(76480);const h=S=>({listItem:(0,t.css)({marginBottom:S.spacing()}),infoText:(0,t.css)({paddingBottom:S.spacing(2),marginLeft:"66px",color:S.colors.text.secondary})}),C=r.memo(({index:S,value:M,onChange:R,suggestions:I,isLast:A})=>{const O=(0,a.wW)(h),N=(K,V)=>{R(S,{...M,url:K},V)},o=K=>{R(S,{...M,title:K.target.value})},w=()=>{R(S,{...M,targetBlank:!M.targetBlank})};return r.createElement("div",{className:O.listItem},r.createElement(d.g,{label:"Title"},r.createElement(f.I,{value:M.title,onChange:o,placeholder:"Show details"})),r.createElement(d.g,{label:"URL",invalid:(0,l.g)(M.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},r.createElement(u.v,{value:M.url,onChange:N,suggestions:I})),r.createElement(d.g,{label:"Open in new tab"},r.createElement(m.r,{value:M.targetBlank||!1,onChange:w})),A&&r.createElement("div",{className:O.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});C.displayName="DataLinkEditor";const x=({link:S,index:M,getSuggestions:R,onSave:I,onCancel:A})=>{const[O,N]=(0,r.useState)(S);return r.createElement(r.Fragment,null,r.createElement(C,{value:O,index:M,isLast:!1,suggestions:R(),onChange:(o,w)=>{N(w)}}),r.createElement(c.u.ButtonRow,null,r.createElement(y.zx,{variant:"secondary",onClick:()=>A(M),fill:"outline"},"Cancel"),r.createElement(y.zx,{onClick:()=>{I(M,O)}},"Save")))};var b=e(43324),g=e(68497);const p=({link:S,onEdit:M,onRemove:R})=>{const I=(0,a.l4)(),A=v(I),{title:O="",url:N=""}=S,o=O.trim()!=="",w=N.trim()!=="",K=(0,l.g)(N);return r.createElement("div",{className:A.wrapper},r.createElement("div",{className:A.titleWrapper},r.createElement("div",{className:(0,t.cx)(A.url,!w&&A.notConfigured,K&&A.errored)},o?O:"Data link title not provided"),r.createElement("div",{className:A.actionButtons},r.createElement(g.h,{name:"pen",onClick:M,tooltip:"Edit data link title"}),r.createElement(g.h,{name:"times",onClick:R,tooltip:"Remove data link title"}))),r.createElement("div",{className:(0,t.cx)(A.url,!w&&A.notConfigured,K&&A.errored),title:N},w?N:"Data link url not provided"),K&&r.createElement(b.S,null,"Explore data link may not work in the future. Please edit."))},v=(0,i.B)(S=>({wrapper:(0,t.css)({marginBottom:S.spacing(2),width:"100%","&:last-child":{marginBottom:0},display:"flex",flexDirection:"column"}),titleWrapper:(0,t.css)({label:"data-links-list-item-title",justifyContent:"space-between",display:"flex",width:"100%",alignItems:"center"}),actionButtons:(0,t.css)({marginLeft:S.spacing(1),display:"flex"}),errored:(0,t.css)({color:S.colors.error.text,fontStyle:"italic"}),notConfigured:(0,t.css)({fontStyle:"italic"}),title:(0,t.css)({color:S.colors.text.primary,fontSize:S.typography.size.sm,fontWeight:S.typography.fontWeightMedium}),url:(0,t.css)({color:S.colors.text.secondary,fontSize:S.typography.size.sm,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"90%"})})),E=({links:S,onChange:M,getSuggestions:R,data:I})=>{const A=(0,a.l4)(),[O,N]=(0,r.useState)(null),[o,w]=(0,r.useState)(!1),K=P(A),V=S??[],_=O!==null,U=(j,z)=>{if(o)if(z.title.trim()===""&&z.url.trim()===""){w(!1),N(null);return}else N(null),w(!1);const F=(0,n.cloneDeep)(V);F[j]=z,M(F),N(null)},$=()=>{let j=(0,n.cloneDeep)(V);N(j.length),w(!0)},k=j=>{o&&w(!1),N(null)},H=j=>{const z=(0,n.cloneDeep)(V);z.splice(j,1),M(z)};return r.createElement(r.Fragment,null,V.length>0&&r.createElement("div",{className:K.wrapper},V.map((j,z)=>r.createElement(p,{key:`${j.title}/${z}`,index:z,link:j,onChange:U,onEdit:()=>N(z),onRemove:()=>H(z),data:I}))),_&&O!==null&&r.createElement(c.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{k(O)}},r.createElement(x,{index:O,link:o?{title:"",url:""}:V[O],data:I,onSave:U,onCancel:k,getSuggestions:R})),r.createElement(y.zx,{size:"sm",icon:"plus",onClick:$,variant:"secondary"},"Add link"))},P=(0,i.B)(S=>({wrapper:(0,t.css)({marginBottom:S.spacing(2)})}))},63544:(X,L,e)=>{"use strict";e.d(L,{Z:()=>y});var t=e(41407),n=e(39953),r=e(82803),a=e(39285),i=e(39960);function y({links:l}){const d=(0,r.wW)(c);if(l.length===1)return n.createElement(i.k,{link:l[0]});const f=l.filter(u=>u.target==="_blank"),m=l.filter(u=>u.target==="_self");return n.createElement(n.Fragment,null,m.map((u,h)=>n.createElement(i.k,{key:h,link:u})),n.createElement("div",{className:d.wrapper},n.createElement("p",{className:d.externalLinksHeading},"External links"),f.map((u,h)=>n.createElement("a",{key:h,href:u.href,target:u.target,className:d.externalLink},n.createElement(a.J,{name:"external-link-alt"}),u.title))))}const c=l=>({wrapper:(0,t.css)({flexBasis:"150px",width:"100px",marginTop:l.spacing(1)}),externalLinksHeading:(0,t.css)({color:l.colors.text.secondary,fontWeight:l.typography.fontWeightRegular,fontSize:l.typography.size.sm,margin:0}),externalLink:(0,t.css)({color:l.colors.text.link,fontWeight:l.typography.fontWeightRegular,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:hover":{textDecoration:"underline"},div:{marginRight:l.spacing(1)}})})},23333:(X,L,e)=>{"use strict";e.d(L,{O:()=>a});var t=e(39953),n=e(26286),r=e(69171);function a({options:i,onOptionsChange:y}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(r._,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:i.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},t.createElement(n.x,{value:i.jsonData.manageAlerts!==!1,onChange:c=>y({...i,jsonData:{...i.jsonData,manageAlerts:c.currentTarget.checked}})}))))))}},44062:(X,L,e)=>{"use strict";e.d(L,{W:()=>c});var t=e(39953),n=e(4919),r=e(69171),a=e(74661),i=e(38637),y=e(68421);const c=({hasCert:l,label:d,onChange:f,onClick:m,placeholder:u})=>t.createElement(a.Z,null,t.createElement(r._,{label:d,labelWidth:14,disabled:l},l?t.createElement(i.I,{type:"text",value:"configured",width:24}):t.createElement(y.K,{rows:7,onChange:f,placeholder:u,required:!0})),l&&t.createElement(n.zx,{variant:"secondary",onClick:m,style:{marginLeft:4}},"Reset"))},81177:(X,L,e)=>{"use strict";e.d(L,{H:()=>u});var t=e(41407),n=e(86832),r=e.n(n),a=e(39953),i=e(64084),y=e(4919),c=e(12392),l=e(39285),d=e(16557);const f=(0,i.B)(()=>({layout:(0,t.css)({display:"flex",alignItems:"center",marginBottom:"4px","> *":{marginLeft:"4px",marginBottom:0,height:"100%","&:first-child, &:last-child":{marginLeft:0}}})})),m=({header:C,onBlur:x,onChange:b,onRemove:g,onReset:p})=>{const v=f();return a.createElement("div",{className:v.layout},a.createElement(c.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:C.name||"",onChange:E=>b({...C,name:E.target.value}),onBlur:x}),a.createElement(d.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:C.configured,value:C.value,labelWidth:5,inputWidth:C.configured?11:12,placeholder:"Header Value",onReset:()=>p(C.id),onChange:E=>b({...C,value:E.target.value}),onBlur:x}),a.createElement(y.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:E=>g(C.id)},a.createElement(l.J,{name:"trash-alt"})))};m.displayName="CustomHeaderRow";class u extends a.PureComponent{constructor(x){super(x),this.state={headers:[]},this.updateSettings=()=>{const{headers:v}=this.state,E=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([S,M])=>!S.startsWith("httpHeaderName"))),P=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([S,M])=>!S.startsWith("httpHeaderValue")));for(const[S,M]of v.entries())E[`httpHeaderName${S+1}`]=M.name,M.configured||(P[`httpHeaderValue${S+1}`]=M.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:E,secureJsonData:P})},this.onHeaderAdd=()=>{this.setState(v=>({headers:[...v.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(v,E)=>{this.setState(({headers:P})=>({headers:P.map((S,M)=>v!==M?S:{...E})}))},this.onHeaderReset=v=>{this.setState(({headers:E})=>({headers:E.map((P,S)=>P.id!==v?P:{...P,value:"",configured:!1})}))},this.onHeaderRemove=v=>{this.setState(({headers:E})=>({headers:E.filter(P=>P.id!==v)}),this.updateSettings)};const{jsonData:b,secureJsonData:g,secureJsonFields:p}=this.props.dataSourceConfig;this.state={headers:Object.keys(b).sort().filter(v=>v.startsWith("httpHeaderName")).map((v,E)=>({id:(0,n.uniqueId)(),name:b[v],value:g!==void 0?g[v]:"",configured:p&&p[`httpHeaderValue${E+1}`]||!1}))}}render(){const{headers:x}=this.state,{dataSourceConfig:b}=this.props;return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("h6",null,"Custom HTTP Headers")),a.createElement("div",null,x.map((g,p)=>a.createElement(m,{key:g.id,header:g,onChange:v=>{this.onHeaderChange(p,v)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!b.readOnly&&a.createElement("div",{className:"gf-form"},a.createElement(y.zx,{variant:"secondary",icon:"plus",type:"button",onClick:g=>{this.onHeaderAdd()}},"Add header")))}}var h=null},3782:(X,L,e)=>{"use strict";e.d(L,{E:()=>R});var t=e(41407),n=e(39953),r=e(75766),a=e(82803),i=e(12392),y=e(56921),c=e(69171),l=e(27325),d=e(39285),f=e(9558),m=e(26286),u=e(97250),h=e(16557);const C=({dataSourceConfig:I,onChange:A})=>{const O=I.secureJsonData?I.secureJsonData.basicAuthPassword:"",N=()=>{A({...I,secureJsonData:{...I.secureJsonData,basicAuthPassword:""},secureJsonFields:{...I.secureJsonFields,basicAuthPassword:!1}})},o=w=>{A({...I,secureJsonData:{...I.secureJsonData,basicAuthPassword:w.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(c._,{disabled:I.readOnly},n.createElement(i.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:I.basicAuthUser,onChange:w=>A({...I,basicAuthUser:w.currentTarget.value})})),n.createElement(c._,{disabled:I.readOnly},n.createElement(h.c,{isConfigured:!!(I.secureJsonFields&&I.secureJsonFields.basicAuthPassword),value:O||"",inputWidth:18,labelWidth:10,onReset:N,onChange:o})))};var x=e(81177);const b=26,g=({dataSourceConfig:I,onChange:A,showForwardOAuthIdentityOption:O=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(c._,{label:"TLS Client Auth",labelWidth:b,disabled:I.readOnly},n.createElement(m.x,{id:"http-settings-tls-client-auth",value:I.jsonData.tlsAuth||!1,onChange:N=>A({...I.jsonData,tlsAuth:N.currentTarget.checked})})),n.createElement(c._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:b,disabled:I.readOnly},n.createElement(m.x,{id:"http-settings-ca-cert",value:I.jsonData.tlsAuthWithCACert||!1,onChange:N=>A({...I.jsonData,tlsAuthWithCACert:N.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(c._,{label:"Skip TLS Verify",labelWidth:b,disabled:I.readOnly},n.createElement(m.x,{id:"http-settings-skip-tls-verify",value:I.jsonData.tlsSkipVerify||!1,onChange:N=>A({...I.jsonData,tlsSkipVerify:N.currentTarget.checked})}))),O&&n.createElement("div",{className:"gf-form-inline"},n.createElement(c._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:b,disabled:I.readOnly},n.createElement(m.x,{id:"http-settings-forward-oauth",value:I.jsonData.oauthPassThru||!1,onChange:N=>A({...I.jsonData,oauthPassThru:N.currentTarget.checked})}))));var p=e(47169),v=e(40108);const E=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],P={label:"Server (default)",value:"proxy"},S=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),M=26,R=I=>{const{defaultUrl:A,dataSourceConfig:O,onChange:N,showAccessOptions:o,sigV4AuthToggleEnabled:w,showForwardOAuthIdentityOption:K,azureAuthSettings:V,renderSigV4Editor:_,secureSocksDSProxyEnabled:U,urlLabel:$,urlDocs:k}=I,[H,j]=(0,n.useState)(!1),[z,F]=(0,n.useState)(!1),J=(0,a.l4)();let Q;const Z=(0,n.useCallback)(he=>{const me=V?.azureAuthSupported&&V.getAzureAuthEnabled(O)||!1;if(F(me),me){const De=O.jsonData.oauthPassThru!==void 0?O.jsonData.oauthPassThru:!1;he={...he,jsonData:{...O.jsonData,oauthPassThru:me?!1:De}}}N({...O,...he})},[V,O,N]);switch(O.access){case"direct":Q=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",k);break;case"proxy":Q=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",k);break;default:Q=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",k)}const ne=n.createElement(f.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:E,value:E.filter(he=>he.value===O.access)[0]||P,onChange:he=>Z({access:he.value}),disabled:O.readOnly}),ee=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(O.url),de=(0,t.css)({boxShadow:`inset 0 0px 5px ${J.v1.palette.red}`}),Pe=(0,t.cx)({["width-20"]:!0,[de]:!ee}),ye=n.createElement(l.I,{className:Pe,placeholder:A,value:O.url,"aria-label":r.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:he=>Z({url:he.currentTarget.value}),disabled:O.readOnly});return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(i.W,{interactive:!!k,label:$??"URL",labelWidth:13,tooltip:Q,inputEl:ye})),o&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:ne})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>j(he=>!he)},"Help\xA0",n.createElement(d.J,{name:H?"angle-down":"angle-right",style:{marginBottom:0}})))),H&&n.createElement(S,null)),O.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(y.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(u.B,{tags:O.jsonData.keepCookies,width:40,onChange:he=>Z({jsonData:{...O.jsonData,keepCookies:he}}),disabled:O.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:O.jsonData.timeout,onChange:he=>{Z({jsonData:{...O.jsonData,timeout:parseInt(he.currentTarget.value,10)}})},disabled:O.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(c._,{label:"Basic auth",labelWidth:M,disabled:O.readOnly},n.createElement(m.x,{id:"http-settings-basic-auth",value:O.basicAuth,onChange:he=>{Z({basicAuth:he.currentTarget.checked})}})),n.createElement(c._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:M,disabled:O.readOnly},n.createElement(m.x,{id:"http-settings-with-credentials",value:O.withCredentials,onChange:he=>{Z({withCredentials:he.currentTarget.checked})}}))),V?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(c._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:M,disabled:O.readOnly},n.createElement(m.x,{id:"http-settings-azure-auth",value:z,onChange:he=>{Z(V.setAzureAuthEnabled(O,he.currentTarget.checked))}}))),w&&n.createElement("div",{className:"gf-form-inline"},n.createElement(c._,{label:"SigV4 auth",labelWidth:M,disabled:O.readOnly},n.createElement(m.x,{id:"http-settings-sigv4-auth",value:O.jsonData.sigV4Auth||!1,onChange:he=>{Z({jsonData:{...O.jsonData,sigV4Auth:he.currentTarget.checked}})}}))),O.access==="proxy"&&n.createElement(g,{dataSourceConfig:O,onChange:he=>Z({jsonData:he}),showForwardOAuthIdentityOption:z?!1:K})),O.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(C,{...I}))),V?.azureAuthSupported&&z&&V.azureSettingsUI&&n.createElement(V.azureSettingsUI,{dataSourceConfig:O,onChange:N}),O.jsonData.sigV4Auth&&w&&_,(O.jsonData.tlsAuth||O.jsonData.tlsAuthWithCACert)&&n.createElement(v.s,{dataSourceConfig:O,onChange:N}),O.access==="proxy"&&n.createElement(x.H,{dataSourceConfig:O,onChange:N})),U&&n.createElement(p.i,{options:O,onOptionsChange:N}))}},47169:(X,L,e)=>{"use strict";e.d(L,{i:()=>a});var t=e(39953),n=e(26286),r=e(69171);function a({options:i,onOptionsChange:y}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(r._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.x,{value:i.jsonData.enableSecureSocksProxy??!1,onChange:c=>y({...i,jsonData:{...i.jsonData,enableSecureSocksProxy:c.currentTarget.checked}})}))))))}},40108:(X,L,e)=>{"use strict";e.d(L,{s:()=>c});var t=e(41407),n=e(39953),r=e(12392),a=e(39285),i=e(69865),y=e(44062);const c=({dataSourceConfig:l,onChange:d})=>{const f=l.secureJsonFields&&l.secureJsonFields.tlsCACert,m=l.secureJsonFields&&l.secureJsonFields.tlsClientCert,u=l.secureJsonFields&&l.secureJsonFields.tlsClientKey,h=l.jsonData&&l.jsonData.serverName,C=g=>p=>{p.preventDefault();const v={...l.secureJsonFields};v[g]=!1,d({...l,secureJsonFields:v})},x=g=>p=>{const v={...l.secureJsonData};v[g]=p.currentTarget.value,d({...l,secureJsonData:v})},b=g=>{const p={...l.jsonData,serverName:g.currentTarget.value};d({...l,jsonData:p})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",(0,t.css)({alignItems:"baseline"}))},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(i.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement(a.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}}))),n.createElement("div",null,l.jsonData.tlsAuthWithCACert&&n.createElement(y.W,{hasCert:!!f,onChange:x("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:C("tlsCACert")}),l.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(r.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:h&&l.jsonData.serverName,onChange:b})),n.createElement(y.W,{hasCert:!!m,label:"Client Cert",onChange:x("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:C("tlsClientCert")}),n.createElement(y.W,{hasCert:!!u,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:x("tlsClientKey"),onClick:C("tlsClientKey")}))))}},90838:(X,L,e)=>{"use strict";e.d(L,{M:()=>l});var t=e(41407),n=e(39953),r=e(57925),a=e(82803),i=e(846),y=e(39285),c=e(18852);const l=(0,n.memo)(m=>{const u=(0,a.wW)(f),{isOpen:h,onClose:C}=m;return h?n.createElement(i.L,{useCapture:!0,includeButtonPress:!1,onClick:C},n.createElement("div",{className:u.modal,"data-testid":"date-picker"},n.createElement(d,{...m}))):null});l.displayName="DatePicker";const d=(0,n.memo)(({value:m,minDate:u,maxDate:h,onChange:C})=>{const x=(0,a.wW)(c.mg);return n.createElement(r.ZP,{className:x.body,tileClassName:x.title,value:m||new Date,minDate:u,maxDate:h,nextLabel:n.createElement(y.J,{name:"angle-right"}),prevLabel:n.createElement(y.J,{name:"angle-left"}),onChange:b=>{b&&!Array.isArray(b)&&C(b)},locale:"en"})});d.displayName="Body";const f=m=>({modal:(0,t.css)({zIndex:m.zIndex.modal,position:"absolute",boxShadow:m.shadows.z3,backgroundColor:m.colors.background.primary,border:`1px solid ${m.colors.border.weak}`,borderTopLeftRadius:m.shape.radius.default,borderBottomLeftRadius:m.shape.radius.default,"button:disabled":{color:m.colors.text.disabled}})})},16991:(X,L,e)=>{"use strict";e.d(L,{d:()=>l});var t=e(41407),n=e(39953),r=e(92403),a=e(82803),i=e(38637),y=e(90838);const c=f=>(0,r.CQ)(f).format("L"),l=({value:f,minDate:m,maxDate:u,onChange:h,closeOnSelect:C,placeholder:x="Date",...b})=>{const[g,p]=n.useState(!1),v=(0,a.wW)(d);return n.createElement("div",{className:v.container},n.createElement(i.I,{type:"text",autoComplete:"off",placeholder:x,value:f&&c(f),onClick:()=>p(!0),onChange:E=>{E.target.value===""&&h("")},className:v.input,...b}),n.createElement(y.M,{isOpen:g,value:f&&typeof f!="string"?f:(0,r.CQ)().toDate(),minDate:m,maxDate:u,onChange:E=>{h(E),C&&p(!1)},onClose:()=>p(!1)}))},d=()=>({container:(0,t.css)({position:"relative"}),input:(0,t.css)({"input[type='date']::-webkit-inner-spin-button, input[type='date']::-webkit-calendar-picker-indicator":{display:"none",WebkitAppearance:"none"}})})},67823:(X,L,e)=>{"use strict";e.d(L,{x:()=>S});var t=e(41407),n=e(41056),r=e(30064),a=e(17037),i=e(39953),y=e(57925),c=e(76941),l=e(15138),d=e(48069),f=e(92403),m=e(70393),u=e(4919),h=e(69171),C=e(38637),x=e(39285),b=e(12223),g=e(82803),p=e(75250),v=e(63930),E=e(18852),P=e(78911);const S=({date:A,maxDate:O,minDate:N,label:o,onChange:w,disabledHours:K,disabledMinutes:V,disabledSeconds:_,showSeconds:U=!0})=>{const[$,k]=(0,i.useState)(!1),H=(0,i.useRef)(null),{overlayProps:j,underlayProps:z}=(0,a.Ir)({onClose:()=>k(!1),isDismissable:!0,isOpen:$,shouldCloseOnInteractOutside:le=>{const Ee=document.getElementsByClassName(v.F)[0];return!(Ee&&Ee.contains(le))}},H),{dialogProps:F}=(0,n.R)({},H),J=(0,g.l4)(),{modalBackdrop:Q}=(0,p.J)(J),Z=(0,l.Z)(`(min-width: ${J.breakpoints.values.lg}px)`),ne=(0,g.wW)(I),[ee,de]=(0,i.useState)(),[Pe,ye]=(0,i.useState)(),he=(0,c.D)(ee,Pe,{placement:"bottom-start"}),me=(0,i.useCallback)(le=>{k(!1),w(le)},[w]),De=(0,i.useCallback)(le=>{le.preventDefault(),k(!0)},[k]);return i.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},i.createElement(M,{date:A,onChange:w,isFullscreen:Z,onOpen:De,label:o,ref:de,showSeconds:U}),$?Z?i.createElement(m.h_,null,i.createElement(r.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:H,...j,...F},i.createElement(R,{date:A,onChange:me,isFullscreen:!0,onClose:()=>k(!1),maxDate:O,minDate:N,ref:ye,style:he.styles.popper,showSeconds:U,disabledHours:K,disabledMinutes:V,disabledSeconds:_})))):i.createElement(m.h_,null,i.createElement("div",{className:Q,...z}),i.createElement(r.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:H,...j,...F},i.createElement("div",{className:ne.modal},i.createElement(R,{date:A,maxDate:O,minDate:N,onChange:me,isFullscreen:!1,onClose:()=>k(!1),showSeconds:U,disabledHours:K,disabledMinutes:V,disabledSeconds:_}))))):null)},M=i.forwardRef(({date:A,label:O,onChange:N,onOpen:o,showSeconds:w=!0},K)=>{const V=w?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[_,U]=(0,i.useState)(()=>({value:A?(0,d.dq)(A):(0,d.dq)((0,f.CQ)()),invalid:!1}));(0,i.useEffect)(()=>{A&&U({invalid:!(0,P.J)((0,d.dq)(A,{format:V})),value:(0,f.v9)(A)?(0,d.dq)(A,{format:V}):A})},[A,V]);const $=(0,i.useCallback)(j=>{const z=!(0,P.J)(j.currentTarget.value);U({value:j.currentTarget.value,invalid:z})},[]),k=(0,i.useCallback)(()=>{if(!_.invalid){const j=(0,f.CQ)(_.value);N(j)}},[_,N]),H=i.createElement(u.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:o});return i.createElement(h._,{label:O,invalid:!!(_.value&&_.invalid),className:(0,t.css)({marginBottom:0})},i.createElement(C.I,{onChange:$,addonAfter:H,value:_.value,onBlur:k,"data-testid":"date-time-input",placeholder:"Select date/time",ref:K}))});M.displayName="DateTimeInput";const R=i.forwardRef(({date:A,onClose:O,onChange:N,isFullscreen:o,maxDate:w,minDate:K,style:V,showSeconds:_=!0,disabledHours:U,disabledMinutes:$,disabledSeconds:k},H)=>{const j=(0,g.wW)(E.mg),z=(0,g.wW)(I),[F,J]=(0,i.useState)(()=>A&&A.isValid()?A.toDate():new Date),Q=(0,i.useCallback)(ne=>{ne&&!Array.isArray(ne)&&J(ee=>(ne.setHours(ee.getHours()),ne.setMinutes(ee.getMinutes()),ne.setSeconds(ee.getSeconds()),ne))},[]),Z=(0,i.useCallback)(ne=>{J(ne.toDate())},[]);return i.createElement("div",{className:(0,t.cx)(z.container,{[z.fullScreen]:o}),style:V,ref:H},i.createElement(y.ZP,{next2Label:null,prev2Label:null,value:F,nextLabel:i.createElement(x.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:i.createElement(x.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:Q,locale:"en",className:j.body,tileClassName:j.title,maxDate:w,minDate:K}),i.createElement("div",{className:z.time},i.createElement(v.y,{showSeconds:_,onChange:Z,value:(0,f.CQ)(F),disabledHours:U,disabledMinutes:$,disabledSeconds:k})),i.createElement(b.Lh,null,i.createElement(u.zx,{type:"button",onClick:()=>N((0,f.CQ)(F))},"Apply"),i.createElement(u.zx,{variant:"secondary",type:"button",onClick:O},"Cancel")))});R.displayName="DateTimeCalendar";const I=A=>({container:(0,t.css)({padding:A.spacing(1),border:`1px ${A.colors.border.weak} solid`,borderRadius:A.shape.radius.default,backgroundColor:A.colors.background.primary,zIndex:A.zIndex.modal}),fullScreen:(0,t.css)({position:"absolute"}),time:(0,t.css)({marginBottom:A.spacing(2)}),modal:(0,t.css)({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:A.zIndex.modal,maxWidth:"280px"})})},24325:(X,L,e)=>{"use strict";e.d(L,{x:()=>O});var t=e(41407),n=e(41056),r=e(30064),a=e(17037),i=e(39953),y=e(76941),c=e(82803),l=e(28384),d=e(4919),f=e(64447),m=e(96227),u=e(39285),h=e(38637),C=e(69865),x=e(89860),b=e(10781),g=e(58682);const p=/^now$|^now\-(\d{1,10})([wdhms])$/,v=V=>({from:M(V.from),to:M(V.to)}),E=V=>{const _=I(V.from),U=I(V.to);return{from:_,to:U,display:`${_} to ${U}`}},P=(V,_=Date.now())=>S(V)?M(V)>Math.ceil(_/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},S=V=>p.test(V),M=V=>{const _=p.exec(V);if(!_||_.length!==3)return 0;const[,U,$]=_,k=parseInt(U,10);return isNaN(k)?0:k*R[$]},R={w:604800,d:86400,h:3600,m:60,s:1},I=V=>V<=0?"now":V>=R.w&&V%R.w===0?`now-${V/R.w}w`:V>=R.d&&V%R.d===0?`now-${V/R.d}d`:V>=R.h&&V%R.h===0?`now-${V/R.h}h`:V>=R.m&&V%R.m===0?`now-${V/R.m}m`:`now-${V}s`,A=g.r.filter(V=>S(V.from));function O(V){const{timeRange:_,onChange:U}=V,[$,k]=(0,i.useState)(!1),H=(0,i.useCallback)(()=>k(!1),[]),j=E(_),[z,F]=(0,i.useState)({value:j.from,validation:P(j.from)}),[J,Q]=(0,i.useState)({value:j.to,validation:P(j.to)}),Z=(0,i.useRef)(null),{overlayProps:ne,underlayProps:ee}=(0,a.Ir)({onClose:()=>k(!1),isDismissable:!0,isOpen:$},Z),{dialogProps:de}=(0,n.R)({},Z),[Pe,ye]=(0,i.useState)(null),[he,me]=(0,i.useState)(null),De=(0,y.D)(Pe,he,{placement:"auto-start"}),le=(0,c.wW)(w(z.validation.errorMessage,J.validation.errorMessage)),Ee=ue=>{const Ie=v(ue);Ie&&(H(),F({...z,value:ue.from}),Q({...J,value:ue.to}),U(Ie))},be=(0,i.useCallback)(ue=>{ue.stopPropagation(),ue.preventDefault(),k(!$)},[$]),ge=ue=>{if(ue.preventDefault(),!J.validation.isValid||!z.validation.isValid)return;const Ie=v({from:z.value,to:J.value,display:""});Ie&&(U(Ie),k(!1))};return i.createElement("div",{className:le.container,ref:ye},i.createElement("button",{className:le.pickerInput,type:"button",onClick:be},i.createElement("span",{className:le.clockIcon},i.createElement(u.J,{name:"clock-nine"})),i.createElement("span",null,j.from," to ",j.to),i.createElement("span",{className:le.caretIcon},i.createElement(u.J,{name:$?"angle-up":"angle-down",size:"lg"}))),$&&i.createElement("div",null,i.createElement("div",{role:"presentation",className:le.backdrop,...ee}),i.createElement(r.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:Z,...ne,...de},i.createElement("div",{className:le.content,ref:me,style:De.styles.popper,...De.attributes},i.createElement("div",{className:le.body},i.createElement(f.Z,{className:le.leftSide,hideHorizontalTrack:!0},i.createElement(b.V,{title:(0,l.t)("time-picker.time-range.example-title","Example time ranges"),options:A,onChange:Ee,value:j})),i.createElement("div",{className:le.rightSide},i.createElement("div",{className:le.title},i.createElement(x.r,null,i.createElement(C.u,{content:i.createElement(N,null),placement:"bottom",theme:"info"},i.createElement("div",null,i.createElement(l.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",i.createElement(u.J,{name:"info-circle"})))))),i.createElement(m.g,{label:"From",invalid:!z.validation.isValid,error:z.validation.errorMessage},i.createElement(h.I,{onClick:ue=>ue.stopPropagation(),onBlur:()=>F({...z,validation:P(z.value)}),onChange:ue=>F({...z,value:ue.currentTarget.value}),value:z.value})),i.createElement(m.g,{label:"To",invalid:!J.validation.isValid,error:J.validation.errorMessage},i.createElement(h.I,{onClick:ue=>ue.stopPropagation(),onBlur:()=>Q({...J,validation:P(J.value)}),onChange:ue=>Q({...J,value:ue.currentTarget.value}),value:J.value})),i.createElement(d.zx,{"aria-label":"TimePicker submit button",onClick:ge},"Apply time range"))))))))}const N=()=>{const V=(0,c.wW)(o);return i.createElement(i.Fragment,null,i.createElement("div",{className:V.supported},"Supported formats: ",i.createElement("code",{className:V.tooltip},"now-[digit]s/m/h/d/w")),i.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),i.createElement("code",{className:V.tooltip},"From: now-10m To: now"),i.createElement("div",{className:V.link},"For more information see"," ",i.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",i.createElement(u.J,{name:"external-link-alt"})),"."))},o=V=>({supported:(0,t.css)({marginBottom:V.spacing(1)}),tooltip:(0,t.css)({margin:0}),link:(0,t.css)({marginTop:V.spacing(1)})}),w=(V,_)=>U=>{const $=(0,h.H)({theme:U,invalid:!1}),H=250+K(U,V)+K(U,_);return{backdrop:(0,t.css)({position:"fixed",zIndex:U.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0}),container:(0,t.css)({display:"flex",position:"relative"}),pickerInput:(0,t.cx)($.input,$.wrapper,(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,paddingLeft:0,lineHeight:`${U.spacing.gridSize*U.components.height.md-2}px`})),caretIcon:(0,t.cx)($.suffix,(0,t.css)({position:"relative",marginLeft:U.spacing(.5)})),clockIcon:(0,t.cx)($.prefix,(0,t.css)({position:"relative",marginRight:U.spacing(.5)})),content:(0,t.css)({background:U.colors.background.primary,boxShadow:U.shadows.z3,position:"absolute",zIndex:U.zIndex.modal,width:"500px",top:"100%",borderRadius:U.shape.radius.default,border:`1px solid ${U.colors.border.weak}`,left:0,whiteSpace:"normal"}),body:(0,t.css)({display:"flex",height:`${H}px`}),description:(0,t.css)({color:U.colors.text.secondary,fontSize:U.typography.size.sm}),leftSide:(0,t.css)({width:"50% !important",borderRight:`1px solid ${U.colors.border.medium}`}),rightSide:(0,t.css)({width:"50%",padding:U.spacing(1)}),title:(0,t.css)({marginBottom:U.spacing(1)})}};function K(V,_){return _?_.length>34?V.spacing.gridSize*6.5:V.spacing.gridSize*4:0}},63930:(X,L,e)=>{"use strict";e.d(L,{F:()=>d,y:()=>f});var t=e(41407),n=e(74292),r=e(39953),a=e(92403),i=e(82803),y=e(39285),c=e(53039),l=e(15530);const d="time-of-day-picker-panel",f=({minuteStep:h=1,showHour:C=!0,showSeconds:x=!1,onChange:b,value:g,size:p="auto",disabled:v,disabledHours:E,disabledMinutes:P,disabledSeconds:S})=>{const M=(0,i.wW)(u);return r.createElement(n.Z,{className:(0,t.cx)((0,l.ht)()[p],M.input),popupClassName:(0,t.cx)(M.picker,d),defaultValue:(0,a.C_)(),onChange:R=>{if((0,a.D2)(R))return b((0,a.CQ)(R))},allowEmpty:!1,showSecond:x,value:(0,a.C_)(g),showHour:C,minuteStep:h,inputIcon:r.createElement(m,{wrapperStyle:M.caretWrapper}),disabled:v,disabledHours:E,disabledMinutes:P,disabledSeconds:S})},m=({wrapperStyle:h=""})=>r.createElement("div",{className:h},r.createElement(y.J,{name:"angle-down"})),u=h=>{const C=h.components.input.background,x=h.v1.palette.black,b=h.colors.background.secondary,g=h.shape.radius.default,p=h.components.input.borderColor;return{caretWrapper:(0,t.css)({position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",display:"inline-block",textAlign:"right",color:h.colors.text.secondary}),picker:(0,t.css)({".rc-time-picker-panel-select":{fontSize:"14px",backgroundColor:C,borderColor:p,li:{outlineWidth:"2px","&.rc-time-picker-panel-select-option-selected":{backgroundColor:"inherit",border:`1px solid ${h.v1.palette.orange}`,borderRadius:g},"&:hover":{background:b},"&.rc-time-picker-panel-select-option-disabled":{color:h.colors.action.disabledText}}},".rc-time-picker-panel-inner":{boxShadow:`0px 4px 4px ${x}`,backgroundColor:C,borderColor:p,borderRadius:g,marginTop:"3px",".rc-time-picker-panel-input-wrap":{marginRight:"2px","&, .rc-time-picker-panel-input":{backgroundColor:C,paddingTop:"2px"}},".rc-time-picker-panel-combobox":{display:"flex"}}}),input:(0,t.css)({".rc-time-picker-input":{backgroundColor:C,borderRadius:g,borderColor:p,height:h.spacing(4),"&:focus":(0,c.getFocusStyles)(h),"&:disabled":{backgroundColor:h.colors.action.disabledBackground,color:h.colors.action.disabledText,border:`1px solid ${h.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}}})}}},88252:(X,L,e)=>{"use strict";e.d(L,{K:()=>b});var t=e(41407),n=e(39953),r=e(92403),a=e(54554),i=e(75766),y=e(64084),c=e(82803),l=e(846),d=e(39285),f=e(38637),m=e(49954),u=e(48408),h=e(58682),C=e(78911);const x=()=>{},b=({value:p,onChange:v,onChangeTimeZone:E=x,clearable:P,hideTimeZone:S=!0,timeZone:M="browser",placeholder:R="Select time range",isReversed:I=!0,hideQuickRanges:A=!1,disabled:O=!1,showIcon:N=!1})=>{const[o,w]=(0,n.useState)(!1),K=(0,c.l4)(),V=g(K,O),_=H=>{H.stopPropagation(),H.preventDefault(),!O&&w(!o)},U=()=>{w(!1)},$=H=>{U(),v(H)},k=H=>{H.stopPropagation();const j=(0,r.CQ)(null),z=(0,r.CQ)(null);v({from:j,to:z,raw:{from:j,to:z}})};return n.createElement("div",{className:V.container},n.createElement("button",{type:"button",className:V.pickerInput,"aria-label":i.wl.components.TimePicker.openButton,onClick:_},N&&n.createElement(d.J,{name:"clock-nine",size:"sm",className:V.icon}),n.createElement(u.q,{value:p,timeZone:M,placeholder:R}),!O&&n.createElement("span",{className:V.caretIcon},(0,C.v)(p)&&P&&n.createElement(d.J,{className:V.clearIcon,name:"times",size:"lg",onClick:k}),n.createElement(d.J,{name:o?"angle-up":"angle-down",size:"lg"}))),o&&n.createElement(l.L,{includeButtonPress:!1,onClick:U},n.createElement(m.x,{timeZone:M,value:(0,C.v)(p)?p:(0,a.JK)(),onChange:$,quickOptions:h.r,onChangeTimeZone:E,className:V.content,hideTimeZone:S,isReversed:I,hideQuickRanges:A})))},g=(0,y.B)((p,v=!1)=>{const E=(0,f.H)({theme:p,invalid:!1});return{container:(0,t.css)({display:"flex",position:"relative"}),content:(0,t.css)({marginLeft:0,position:"absolute",top:"116%",zIndex:p.zIndex.dropdown}),pickerInput:(0,t.cx)(E.input,v&&E.inputDisabled,E.wrapper,(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,lineHeight:`${p.spacing.gridSize*4-2}px`})),caretIcon:(0,t.cx)(E.suffix,(0,t.css)({position:"relative",top:"-1px",marginLeft:p.spacing(.5)})),clearIcon:(0,t.css)({marginRight:p.spacing(.5),"&:hover":{color:p.colors.text.maxContrast}}),placeholder:(0,t.css)({color:p.colors.text.disabled,opacity:1}),icon:(0,t.css)({marginRight:p.spacing(.5)})}})},56064:(X,L,e)=>{"use strict";e.d(L,{IF:()=>S,Xc:()=>E,sU:()=>M});var t=e(41407),n=e(41056),r=e(30064),a=e(17037),i=e(39953),y=e(92403),c=e(48069),l=e(36602),d=e(81626),f=e(77877),m=e(75766),u=e(82803),h=e(28384),C=e(48824),x=e(75250),b=e(3839),g=e(69865),p=e(49954),v=e(58682);function E(O){const[N,o]=(0,i.useState)(!1),{value:w,onMoveBackward:K,onMoveForward:V,onZoom:_,timeZone:U,fiscalYearStartMonth:$,timeSyncButton:k,isSynced:H,history:j,onChangeTimeZone:z,onChangeFiscalYearStartMonth:F,hideQuickRanges:J,widthOverride:Q,isOnCanvas:Z}=O,ne=Ie=>{O.onChange(Ie),o(!1)},ee=Ie=>{Ie.stopPropagation(),Ie.preventDefault(),o(!N)},de=()=>{o(!1)},Pe=(0,i.createRef)(),{overlayProps:ye,underlayProps:he}=(0,a.Ir)({onClose:de,isDismissable:!0,isOpen:N},Pe),{dialogProps:me}=(0,n.R)({},Pe),De=(0,u.l4)(),le=(0,u.wW)(I),{modalBackdrop:Ee}=(0,x.J)(De),be=(0,y.v9)(w.raw.from)||(0,y.v9)(w.raw.to),ge=H?"active":Z?"canvas":"default",ue=R(w,U);return i.createElement(C.h,{className:le.container},be&&i.createElement(b.h,{"aria-label":(0,h.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:ge,onClick:K,icon:"angle-left",narrow:!0}),i.createElement(g.u,{content:i.createElement(S,{timeRange:w,timeZone:U}),placement:"bottom",interactive:!0},i.createElement(b.h,{"data-testid":m.wl.components.TimePicker.openButton,"aria-label":(0,h.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:ue}),"aria-controls":"TimePickerContent",onClick:ee,icon:"clock-nine",isOpen:N,variant:ge},i.createElement(M,{...O}))),N&&i.createElement("div",null,i.createElement("div",{role:"presentation",className:(0,t.cx)(Ee,le.backdrop),...he}),i.createElement(r.MT,{contain:!0,autoFocus:!0},i.createElement("section",{className:le.content,ref:Pe,...ye,...me},i.createElement(p.x,{timeZone:U,fiscalYearStartMonth:$,value:w,onChange:ne,quickOptions:v.r,history:j,showHistory:!0,widthOverride:Q,onChangeTimeZone:z,onChangeFiscalYearStartMonth:F,hideQuickRanges:J})))),k,be&&i.createElement(b.h,{"aria-label":(0,h.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:V,icon:"angle-right",narrow:!0,variant:ge}),i.createElement(g.u,{content:P,placement:"bottom"},i.createElement(b.h,{"aria-label":(0,h.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:_,icon:"search-minus",variant:ge})))}E.displayName="TimeRangePicker";const P=()=>i.createElement(i.Fragment,null,i.createElement(h.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",i.createElement("br",null)," CTRL+Z")),S=({timeRange:O,timeZone:N})=>{const o=(0,u.wW)(A);return i.createElement(i.Fragment,null,(0,c.dq)(O.from,{timeZone:N}),i.createElement("div",{className:"text-center"},i.createElement(h.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,c.dq)(O.to,{timeZone:N}),i.createElement("div",{className:"text-center"},i.createElement("span",{className:o.utc},(0,l.Vs)(N))))},M=(0,i.memo)(({hideText:O,value:N,timeZone:o})=>{const w=(0,u.wW)(A);return O?null:i.createElement("span",{className:w.container},i.createElement("span",null,R(N,o)),i.createElement("span",{className:w.utc},d.describeTimeRangeAbbreviation(N,o)))});M.displayName="TimePickerButtonLabel";const R=(O,N)=>{const o={to:f.isMathString(O.raw.to)?O.raw.to:O.to,from:f.isMathString(O.raw.from)?O.raw.from:O.from};return d.describeTimeRange(o,N)},I=O=>({container:(0,t.css)({position:"relative",display:"flex",verticalAlign:"middle"}),backdrop:(0,t.css)({display:"none",[O.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:O.zIndex.dropdown,[O.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:O.zIndex.modal}})}),A=O=>({container:(0,t.css)({display:"flex",alignItems:"center",whiteSpace:"nowrap"}),utc:(0,t.css)({color:O.v1.palette.orange,fontSize:O.typography.size.sm,paddingLeft:"6px",lineHeight:"28px",verticalAlign:"bottom",fontWeight:O.typography.fontWeightMedium})})},18852:(X,L,e)=>{"use strict";e.d(L,{mg:()=>h,uT:()=>l});var t=e(41407),n=e(39953),r=e(57925),a=e(36602),i=e(26234),y=e(82803),c=e(39285);function l({onChange:C,from:x,to:b,timeZone:g}){const p=d(x,b,new Date,g),v=m(C,g),E=(0,y.wW)(h);return n.createElement(r.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:E.body,tileClassName:E.title,value:p,nextLabel:n.createElement(c.J,{name:"angle-right"}),prevLabel:n.createElement(c.J,{name:"angle-left"}),onChange:v,locale:"en"})}l.displayName="Body";function d(C,x,b=new Date,g){let p=C.isValid()?C.toDate():b,v=x.isValid()?x.toDate():b;return g&&([p,v]=f(p,v,g)),p>v?[v,p]:[p,v]}function f(C,x,b){const g=(0,a.nA)(b);if(!g)return[C,x];const p=g.utcOffset(C.getTime()),v=g.utcOffset(x.getTime()),E=C.getTimezoneOffset(),P=x.getTimezoneOffset(),S=p-E,M=v-P,R=new Date(C.getTime()-S*1e3*60),I=new Date(x.getTime()-M*1e3*60);return[R,I]}function m(C,x){return(0,n.useCallback)(b=>{if(!Array.isArray(b))return console.error("onCalendarChange: should be run in selectRange={true}");if(b[0]&&b[1]){const g=(0,i.J)(u(b[0]),{timeZone:x}),p=(0,i.J)(u(b[1]),{timeZone:x});C(g,p)}},[C,x])}function u(C){return[C.getFullYear(),C.getMonth(),C.getDate(),C.getHours(),C.getMinutes(),C.getSeconds()]}const h=C=>{const x=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:(0,t.css)({color:C.colors.text.primary,backgroundColor:C.colors.background.primary,fontSize:C.typography.size.md,border:"1px solid transparent","&:hover":{position:"relative"},"&:disabled":{color:C.colors.action.disabledText}}),body:(0,t.css)({zIndex:C.zIndex.modal,backgroundColor:C.colors.background.primary,width:"268px",".react-calendar__navigation":{display:"flex"},".react-calendar__navigation__label, .react-calendar__navigation__arrow, .react-calendar__navigation":{paddingTop:"4px",backgroundColor:"inherit",color:C.colors.text.primary,border:0,fontWeight:C.typography.fontWeightMedium},".react-calendar__month-view__weekdays":{backgroundColor:"inherit",textAlign:"center",color:C.colors.primary.text,abbr:{border:0,textDecoration:"none",cursor:"default",display:"block",padding:"4px 0 4px 0"}},".react-calendar__month-view__days":{backgroundColor:"inherit"},".react-calendar__tile, .react-calendar__tile--now":{marginBottom:"4px",backgroundColor:"inherit",height:"26px"},".react-calendar__navigation__label, .react-calendar__navigation > button:focus, .time-picker-calendar-tile:focus":{outline:0},[`${x}, .react-calendar__tile--active, .react-calendar__tile--active:hover`]:{color:C.colors.primary.contrastText,fontWeight:C.typography.fontWeightMedium,background:C.colors.primary.main,boxShadow:"none",border:"0px"},".react-calendar__tile--rangeEnd, .react-calendar__tile--rangeStart":{padding:0,border:"0px",color:C.colors.primary.contrastText,fontWeight:C.typography.fontWeightMedium,background:C.colors.primary.main,abbr:{backgroundColor:C.colors.primary.main,borderRadius:"100px",display:"block",paddingTop:"2px",height:"26px"}},[`${x}, .react-calendar__tile--rangeStart`]:{borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px"},[`${x}, .react-calendar__tile--rangeEnd`]:{borderTopRightRadius:"20px",borderBottomRightRadius:"20px"}})}}},49954:(X,L,e)=>{"use strict";e.d(L,{x:()=>be});var t=e(41407),n=e(39953),r=e(92403),a=e(81626),i=e(75766),y=e(41245),c=e(82803),l=e(64084),d=e(53039),f=e(28384),m=e(64447),u=e(39285),h=e(86832),C=e(36602),x=e(20454),b=e(96227),g=e(9558),p=e(4919),v=e(87783),E=e(93992),P=e(54332),S=e(4190),M=e(58682);const R=Fe=>{const{timeZone:Ve,fiscalYearStartMonth:Ue,timestamp:it=Date.now(),onChangeTimeZone:ze,onChangeFiscalYearStartMonth:Xe}=Fe,[St,Bt]=(0,n.useState)(!1),[zt,qt]=(0,n.useState)("tz"),Qt=(0,n.useCallback)(Te=>{Te&&Te.stopPropagation(),Bt(!St)},[St,Bt]),yn=(0,c.l4)(),Zt=I(yn);if(!(0,h.isString)(Ve))return null;const re=(0,C.Pr)(Ve,it);return re?n.createElement("div",null,n.createElement("section",{"aria-label":(0,f.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:Zt.container},n.createElement("div",{className:Zt.timeZoneContainer},n.createElement("div",{className:Zt.timeZone},n.createElement(S.d,{title:re.name}),n.createElement("div",{className:Zt.spacer}),n.createElement(E.K,{info:re})),n.createElement(P.v,{timeZone:Ve,timestamp:it})),n.createElement("div",{className:Zt.spacer}),n.createElement(p.zx,{variant:"secondary",onClick:Qt,size:"sm"},n.createElement(f.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),St?n.createElement("div",{className:Zt.editContainer},n.createElement("div",null,n.createElement(x.S,{value:zt,options:[{label:(0,f.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,f.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:qt})),zt==="tz"?n.createElement("section",{"data-testid":i.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(Zt.timeZoneContainer,Zt.timeSettingContainer)},n.createElement(v.O,{includeInternal:!0,onChange:Te=>{Qt(),(0,h.isString)(Te)&&ze(Te)},onBlur:Qt,menuShouldPortal:!1})):n.createElement("section",{"aria-label":i.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(Zt.timeZoneContainer,Zt.timeSettingContainer)},n.createElement(b.g,{className:Zt.fiscalYearField,label:(0,f.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(g.Ph,{value:Ue,menuShouldPortal:!1,options:M.E,onChange:Te=>{Xe&&Xe(Te.value??0)}})))):null):null},I=(0,l.B)(Fe=>({container:(0,t.css)({borderTop:`1px solid ${Fe.colors.border.weak}`,padding:"11px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),editContainer:(0,t.css)({borderTop:`1px solid ${Fe.colors.border.weak}`,padding:"11px",justifyContent:"space-between",alignItems:"center"}),spacer:(0,t.css)({marginLeft:"7px"}),timeSettingContainer:(0,t.css)({paddingTop:Fe.spacing(1)}),fiscalYearField:(0,t.css)({marginBottom:0}),timeZoneContainer:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1}),timeZone:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"baseline",flexGrow:1})}));var A=e(89860),O=e(26234),N=e(48069),o=e(69865),w=e(38637),K=e(78911),V=e(41056),_=e(30064),U=e(17037),$=e(75250),k=e(18852);function H({onClose:Fe,onApply:Ve}){const Ue=(0,c.wW)(j);return n.createElement("div",{className:Ue.container},n.createElement(p.zx,{className:Ue.apply,onClick:Ve},n.createElement(f.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")),n.createElement(p.zx,{variant:"secondary",onClick:Fe},n.createElement(f.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")))}H.displayName="Footer";const j=Fe=>({container:(0,t.css)({backgroundColor:Fe.colors.background.primary,display:"flex",justifyContent:"center",padding:"10px",alignItems:"stretch"}),apply:(0,t.css)({marginRight:"4px",width:"100%",justifyContent:"center"})});function z({onClose:Fe}){const Ve=(0,c.wW)(F);return n.createElement("div",{className:Ve.container},n.createElement(A.r,null,n.createElement(f.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(p.zx,{"aria-label":i.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:Fe}))}z.displayName="Header";const F=Fe=>({container:(0,t.css)({backgroundColor:Fe.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"7px"})}),J=(Fe,Ve=!1)=>({container:(0,t.css)({top:0,position:"absolute",[`${Ve?"left":"right"}`]:"544px",boxShadow:Fe.shadows.z3,backgroundColor:Fe.colors.background.primary,zIndex:-1,border:`1px solid ${Fe.colors.border.weak}`,borderTopLeftRadius:Fe.shape.radius.default,borderBottomLeftRadius:Fe.shape.radius.default,"&:after":{display:"block",backgroundColor:Fe.colors.background.primary,width:"19px",height:"100%",content:`${Ve?'""':'" "'}`,position:"absolute",top:0,right:"-19px",borderLeft:`1px solid ${Fe.colors.border.weak}`}}),modal:(0,t.css)({boxShadow:Fe.shadows.z3,left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)",zIndex:Fe.zIndex.modal}),content:(0,t.css)({margin:"0 auto",width:"268px"})});function Q(Fe){const Ve=(0,c.l4)(),{modalBackdrop:Ue}=(0,$.J)(Ve),it=J(Ve,Fe.isReversed),{isOpen:ze,isFullscreen:Xe,onClose:St}=Fe,Bt=n.createRef(),{dialogProps:zt}=(0,V.R)({"aria-label":i.wl.components.TimePicker.calendar.label},Bt),{overlayProps:qt}=(0,U.Ir)({isDismissable:!0,isOpen:ze,onClose:St},Bt);return ze?Xe?n.createElement(_.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("section",{className:it.container,ref:Bt,...qt,...zt},n.createElement(z,{...Fe}),n.createElement(k.uT,{...Fe}))):n.createElement(U.Xj,null,n.createElement("div",{className:Ue}),n.createElement(_.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("section",{className:it.modal,ref:Bt,...qt,...zt},n.createElement("div",{className:it.content,"aria-label":i.wl.components.TimePicker.calendar.label},n.createElement(z,{...Fe}),n.createElement(k.uT,{...Fe}),n.createElement(H,{...Fe}))))):null}const Z=(0,n.memo)(Q);Q.displayName="TimePickerCalendar";const ne={default:()=>(0,f.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,f.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},ee=Fe=>{const{value:Ve,isFullscreen:Ue=!1,timeZone:it,onApply:ze,isReversed:Xe,fiscalYearStartMonth:St}=Fe,[Bt,zt]=Pe(Ve.raw.from,Ve.raw.to,it),qt=(0,c.wW)(he),[Qt,yn]=(0,n.useState)(Bt),[Zt,re]=(0,n.useState)(zt),[Te,We]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const[pe,Re]=Pe(Ve.raw.from,Ve.raw.to,it);yn(pe),re(Re)},[Ve.raw.from,Ve.raw.to,it]);const Je=(0,n.useCallback)(pe=>{pe.preventDefault(),We(!0)},[We]),je=(0,n.useCallback)(()=>{if(Zt.invalid||Qt.invalid)return;const pe={from:Qt.value,to:Zt.value},Re=a.convertRawToRange(pe,it,St);ze(Re)},[Qt.invalid,Qt.value,ze,it,Zt.invalid,Zt.value,St]),pt=(0,n.useCallback)((pe,Re)=>{const[ae,ve]=Pe(pe,Re,it);yn(ae),re(ve)},[it]),ft=pe=>{pe.key==="Enter"&&je()},Tt=a.convertRawToRange({from:"now/fy",to:"now/fy"},it,St),Ye=(0,f.t)("time-picker.range-content.fiscal-year","Fiscal year"),Ce=n.createElement("div",{className:qt.tooltip},a.isFiscal(Ve)?n.createElement(o.u,{content:`${Ye}: ${Tt.from.format("MMM-DD")} - ${Tt.to.format("MMM-DD")}`},n.createElement(u.J,{name:"info-circle"})):null),oe=n.createElement(p.zx,{"aria-label":i.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:Je});return n.createElement("div",null,n.createElement("div",{className:qt.fieldContainer},n.createElement(b.g,{label:(0,f.t)("time-picker.range-content.from-input","From"),invalid:Qt.invalid,error:Qt.errorMessage},n.createElement(w.I,{onClick:pe=>pe.stopPropagation(),onChange:pe=>pt(pe.currentTarget.value,Zt.value),addonAfter:oe,onKeyDown:ft,"aria-label":i.wl.components.TimePicker.fromField,value:Qt.value})),Ce),n.createElement("div",{className:qt.fieldContainer},n.createElement(b.g,{label:(0,f.t)("time-picker.range-content.to-input","To"),invalid:Zt.invalid,error:Zt.errorMessage},n.createElement(w.I,{onClick:pe=>pe.stopPropagation(),onChange:pe=>pt(Qt.value,pe.currentTarget.value),addonAfter:oe,onKeyDown:ft,"aria-label":i.wl.components.TimePicker.toField,value:Zt.value})),Ce),n.createElement(p.zx,{"data-testid":i.wl.components.TimePicker.applyTimeRange,type:"button",onClick:je},n.createElement(f.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),n.createElement(Z,{isFullscreen:Ue,isOpen:Te,from:(0,O.J)(Qt.value,{timeZone:it}),to:(0,O.J)(Zt.value,{timeZone:it}),onApply:je,onClose:()=>We(!1),onChange:pt,timeZone:it,isReversed:Xe}))};function de(Fe,Ve,Ue){const it={from:Fe,to:Ve},ze=a.convertRawToRange(it,Ue);return!(ze.from.isSame(ze.to)||ze.from.isBefore(ze.to))}function Pe(Fe,Ve,Ue){const it=ye(Fe,Ue),ze=ye(Ve,Ue),Xe=!(0,K.J)(it,!1,Ue),St=!(0,K.J)(ze,!0,Ue),Bt=de(it,ze,Ue)&&!St;return[{value:it,invalid:Xe||Bt,errorMessage:Bt&&!Xe?ne.range():ne.default()},{value:ze,invalid:St,errorMessage:ne.default()}]}function ye(Fe,Ve){return(0,r.v9)(Fe)?(0,N.dq)(Fe,{timeZone:Ve}):Fe}function he(Fe){return{fieldContainer:(0,t.css)({display:"flex"}),tooltip:(0,t.css)({paddingLeft:Fe.spacing(1),paddingTop:Fe.spacing(3)})}}var me=e(10781);const De=(Fe,Ve)=>a.convertRawToRange({from:Fe.from,to:Fe.to},Ve),le=(Fe,Ve)=>{const Ue=(0,N.dq)(Fe.from,{timeZone:Ve}),it=(0,N.dq)(Fe.to,{timeZone:Ve});return{from:Ue,to:it,display:`${Ue} to ${it}`}},Ee=Fe=>{const{quickOptions:Ve=[],isReversed:Ue,isFullscreen:it,hideQuickRanges:ze,timeZone:Xe,fiscalYearStartMonth:St,value:Bt,onChange:zt,history:qt,showHistory:Qt,className:yn,hideTimeZone:Zt,onChangeTimeZone:re,onChangeFiscalYearStartMonth:Te}=Fe,We=!qt?.length,Je=it&&Qt||!it&&(Qt&&!We||!ze),je=(0,c.l4)(),pt=Me(je,Ue,ze,Je,it),ft=ot(qt,Xe),Tt=Qe(Bt.raw,Ve),[Ye,Ce]=(0,n.useState)(""),oe=Ve.filter(Re=>Re.display.toLowerCase().includes(Ye.toLowerCase())),pe=Re=>zt(De(Re));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(pt.container,yn)},n.createElement("div",{className:pt.body},(!it||!ze)&&n.createElement("div",{className:pt.rightSide},n.createElement("div",{className:pt.timeRangeFilter},n.createElement(y.H,{width:0,autoFocus:!0,value:Ye,onChange:Ce,placeholder:(0,f.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(m.$,null,!it&&n.createElement(ge,{...Fe,historyOptions:ft}),!ze&&n.createElement(me.V,{options:oe,onChange:pe,value:Tt}))),it&&n.createElement("div",{className:pt.leftSide},n.createElement(ue,{...Fe,historyOptions:ft}))),!Zt&&it&&n.createElement(R,{timeZone:Xe,fiscalYearStartMonth:St,onChangeTimeZone:re,onChangeFiscalYearStartMonth:Te}))},be=Fe=>{const{widthOverride:Ve}=Fe,Ue=(0,c.l4)(),it=(Ve||window.innerWidth)>=Ue.breakpoints.values.lg;return n.createElement(Ee,{...Fe,isFullscreen:it})},ge=Fe=>{const{value:Ve,hideQuickRanges:Ue,onChange:it,timeZone:ze,historyOptions:Xe=[],showHistory:St}=Fe,Bt=(0,c.l4)(),zt=Ne(Bt),qt=(0,r.v9)(Ve.raw.from)||(0,r.v9)(Ve.raw.to),[Qt,yn]=(0,n.useState)(!qt),Zt=Ue?!1:Qt,re=Te=>it(De(Te,ze));return n.createElement("fieldset",null,n.createElement("div",{className:zt.header},n.createElement("button",{type:"button",className:zt.expandButton,onClick:()=>{Ue||yn(!Zt)},"data-testid":i.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!Zt,"aria-controls":"expanded-timerange"},n.createElement(A.r,null,n.createElement(f.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!Ue&&n.createElement(u.J,{name:Zt?"angle-down":"angle-up"}))),!Zt&&n.createElement("div",{className:zt.body,id:"expanded-timerange"},n.createElement("div",{className:zt.form},n.createElement(ee,{value:Ve,onApply:it,timeZone:ze,isFullscreen:!1})),St&&n.createElement(me.V,{title:(0,f.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:Xe,onChange:re,placeholderEmpty:null})))},ue=Fe=>{const{onChange:Ve,value:Ue,timeZone:it,fiscalYearStartMonth:ze,isReversed:Xe,historyOptions:St}=Fe,Bt=(0,c.l4)(),zt=qe(Bt,Fe.hideQuickRanges),qt=Qt=>Ve(De(Qt,it));return n.createElement(n.Fragment,null,n.createElement("div",{className:zt.container},n.createElement("div",{className:zt.title,"data-testid":i.wl.components.TimePicker.absoluteTimeRangeTitle},n.createElement(A.r,null,n.createElement(f.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(ee,{value:Ue,timeZone:it,fiscalYearStartMonth:ze,onApply:Ve,isFullscreen:!0,isReversed:Xe})),Fe.showHistory&&n.createElement("div",{className:zt.recent},n.createElement(me.V,{title:(0,f.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:St||[],onChange:qt,placeholderEmpty:n.createElement(Ie,null)})))},Ie=(0,n.memo)(()=>{const Fe=(0,c.l4)(),Ve=bt(Fe),Ue=(0,f.t)("time-picker.content.empty-recent-list-info","It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.");return n.createElement("div",{className:Ve.container},n.createElement("div",null,n.createElement("span",null,Ue)),n.createElement(f.c,{i18nKey:"time-picker.content.empty-recent-list-docs"},n.createElement("div",null,n.createElement("a",{className:Ve.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function ot(Fe,Ve){return!Array.isArray(Fe)||Fe.length===0?[]:Fe.map(Ue=>le(Ue,Ve))}Ie.displayName="EmptyRecentList";const Qe=(Fe,Ve)=>(0,n.useMemo)(()=>{if(a.isRelativeTimeRange(Fe))return Ve.find(Ue=>Ue.from===Fe.from&&Ue.to===Fe.to)},[Fe,Ve]),Me=(0,l.B)((Fe,Ve,Ue,it,ze)=>({container:(0,t.css)({background:Fe.colors.background.primary,boxShadow:Fe.shadows.z3,width:`${ze?"546px":"262px"}`,borderRadius:Fe.shape.radius.default,border:`1px solid ${Fe.colors.border.weak}`,[`${Ve?"left":"right"}`]:0}),body:(0,t.css)({display:"flex",flexDirection:"row-reverse",height:`${it?"381px":"217px"}`,maxHeight:"100vh"}),leftSide:(0,t.css)({display:"flex",flexDirection:"column",borderRight:`${Ve?"none":`1px solid ${Fe.colors.border.weak}`}`,width:`${Ue?"100%":"60%"}`,overflow:"hidden",order:Ve?1:0}),rightSide:(0,t.css)({width:`${ze?"40%":"100%"}; !important`,borderRight:Ve?`1px solid ${Fe.colors.border.weak}`:"none",display:"flex",flexDirection:"column"}),timeRangeFilter:(0,t.css)({padding:Fe.spacing(1)}),spacing:(0,t.css)({marginTop:"16px"})})),Ne=(0,l.B)(Fe=>({header:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${Fe.colors.border.weak}`,padding:"7px 9px 7px 9px"}),expandButton:(0,t.css)({backgroundColor:"transparent",border:"none",display:"flex",width:"100%","&:focus-visible":(0,d.getFocusStyles)(Fe)}),body:(0,t.css)({borderBottom:`1px solid ${Fe.colors.border.weak}`}),form:(0,t.css)({padding:"7px 9px 7px 9px"})})),qe=(0,l.B)((Fe,Ve)=>({container:(0,t.css)({paddingTop:"9px",paddingLeft:"11px",paddingRight:Ve?"11px":"20%"}),title:(0,t.css)({marginBottom:"11px"}),recent:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-end",paddingTop:Fe.spacing(1)})})),bt=(0,l.B)(Fe=>({container:(0,t.css)({padding:"12px",margin:"12px","a, span":{fontSize:"13px"}}),link:(0,t.css)({color:Fe.colors.text.link})}))},89860:(X,L,e)=>{"use strict";e.d(L,{r:()=>i});var t=e(41407),n=e(39953),r=e(82803);const a=y=>({text:(0,t.css)({fontSize:y.typography.size.md,fontWeight:y.typography.fontWeightMedium,color:y.colors.text.primary,margin:0,display:"flex"})}),i=(0,n.memo)(({children:y})=>{const c=(0,r.wW)(a);return n.createElement("h3",{className:c.text},y)});i.displayName="TimePickerTitle"},48408:(X,L,e)=>{"use strict";e.d(L,{q:()=>y});var t=e(41407),n=e(39953),r=e(82803),a=e(56064),i=e(78911);const y=(0,n.memo)(function({hideText:d,value:f,timeZone:m="browser",placeholder:u="No time range selected",className:h}){const C=(0,r.wW)(c);return d?null:n.createElement("span",{className:h},(0,i.v)(f)?n.createElement(a.sU,{value:f,timeZone:m}):n.createElement("span",{className:C.placeholder},u))}),c=l=>({placeholder:(0,t.css)({color:l.colors.text.disabled,opacity:1})})},10781:(X,L,e)=>{"use strict";e.d(L,{V:()=>h});var t=e(41407),n=e(39953),r=e(64084),a=e(28384),i=e(89860),y=e(34032),c=e(82803),l=e(53039);const d=g=>({container:(0,t.css)({display:"flex",alignItems:"center",flexDirection:"row-reverse",justifyContent:"space-between"}),selected:(0,t.css)({background:g.colors.action.selected,fontWeight:g.typography.fontWeightMedium}),radio:(0,t.css)({opacity:0,width:"0 !important","&:focus-visible + label":(0,l.getFocusStyles)(g)}),label:(0,t.css)({cursor:"pointer",flex:1,padding:"7px 9px 7px 9px","&:hover":{background:g.colors.action.hover,cursor:"pointer"}})}),f=(0,n.memo)(({value:g,onSelect:p,selected:v=!1,name:E})=>{const P=(0,c.wW)(d),S=(0,y.Z)();return n.createElement("li",{className:(0,t.cx)(P.container,v&&P.selected)},n.createElement("input",{className:P.radio,checked:v,name:E,type:"checkbox",id:S,onChange:()=>p(g)}),n.createElement("label",{className:P.label,htmlFor:S},g.display))});f.displayName="TimeRangeOption";const m=(0,r.B)(()=>({title:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px 5px 9px"})})),u=(0,r.B)(()=>({grow:(0,t.css)({flexGrow:1,alignItems:"flex-start"})})),h=g=>{const p=m(),{title:v,options:E,placeholderEmpty:P}=g;return typeof P<"u"&&E.length<=0?n.createElement(n.Fragment,null,P):v?n.createElement("section",{"aria-label":v},n.createElement("fieldset",null,n.createElement("div",{className:p.title},n.createElement(i.r,null,v)),n.createElement(C,{...g}))):n.createElement(C,{...g})},C=({options:g,value:p,onChange:v,title:E})=>{const P=u();return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,a.t)("time-picker.time-range.aria-role","Time range selection")},g.map((S,M)=>n.createElement(f,{key:x(S,M),value:S,selected:b(S,p),onSelect:v,name:E??(0,a.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:P.grow}))};function x(g,p){return`${g.from}-${g.to}-${p}`}function b(g,p){return!p||!g?!1:p.from===g.from&&p.to===g.to}},87783:(X,L,e)=>{"use strict";e.d(L,{O:()=>v});var t=e(86832),n=e(39953),r=e(36602),a=e(28384),i=e(9558),y=e(41407),c=e(82803);const l=I=>{const{children:A,label:O}=I,N=(0,c.wW)(d);return O?n.createElement("div",null,n.createElement("div",{className:N.header},n.createElement("span",{className:N.label},O)),A):n.createElement("div",null,A)},d=I=>({header:(0,y.css)({padding:"7px 10px",width:"100%",borderTop:`1px solid ${I.colors.border.weak}`,textTransform:"capitalize"}),label:(0,y.css)({fontSize:I.typography.size.sm,color:I.colors.text.secondary,fontWeight:I.typography.fontWeightMedium})});var f=e(54332),m=e(64084),u=e(39285),h=e(93992),C=e(4190);const x="tz-utc-offset",b=I=>{const{children:A,innerProps:O,innerRef:N,data:o,isSelected:w,isFocused:K}=I,V=(0,c.l4)(),_=p(V),U=Date.now(),$=(0,y.cx)(_.container,K&&_.containerFocused);if(!(0,t.isString)(o.value))return null;const k=(0,r.Pr)(o.value,U);return n.createElement("div",{className:$,...O,ref:N,"aria-label":"Select option"},n.createElement("div",{className:(0,y.cx)(_.leftColumn,_.row)},n.createElement("div",{className:(0,y.cx)(_.leftColumn,_.wideRow)},n.createElement(C.d,{title:A}),n.createElement("div",{className:_.spacer}),n.createElement(h.K,{info:k})),n.createElement("div",{className:_.rightColumn},n.createElement(f.v,{timeZone:k?.ianaName||o.value,timestamp:U,className:x}),w&&n.createElement("span",null,n.createElement(u.J,{name:"check"})))))},g=I=>{const{children:A,innerProps:O,innerRef:N,data:o,isSelected:w,isFocused:K}=I,V=(0,c.l4)(),_=p(V),U=Date.now(),$=(0,y.cx)(_.container,K&&_.containerFocused);if(!(0,t.isString)(o.value))return null;const k=(0,r.Pr)(o.value,U);return n.createElement("div",{className:$,...O,ref:N,"aria-label":"Select option"},n.createElement("div",{className:_.body},n.createElement("div",{className:_.row},n.createElement("div",{className:_.leftColumn},n.createElement(C.d,{title:A})),n.createElement("div",{className:_.rightColumn},w&&n.createElement("span",null,n.createElement(u.J,{name:"check"})))),n.createElement("div",{className:_.row},n.createElement("div",{className:_.leftColumn},n.createElement(h.K,{info:k})),n.createElement("div",{className:_.rightColumn},n.createElement(f.v,{timestamp:U,timeZone:k?.ianaName||o.value,className:x})))))},p=(0,m.B)(I=>({container:(0,y.css)({display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",padding:"6px 8px 4px","&:hover":{background:I.colors.action.hover}}),containerFocused:(0,y.css)({background:I.colors.action.hover}),body:(0,y.css)({display:"flex",fontWeight:I.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),row:(0,y.css)({display:"flex",flexDirection:"row"}),leftColumn:(0,y.css)({flexGrow:1,textOverflow:"ellipsis"}),rightColumn:(0,y.css)({justifyContent:"flex-end",alignItems:"center"}),wideRow:(0,y.css)({display:"flex",flexDirection:"row",alignItems:"baseline"}),spacer:(0,y.css)({marginLeft:"6px"})})),v=I=>{const{onChange:A,width:O,autoFocus:N=!1,onBlur:o,value:w,includeInternal:K=!1,disabled:V=!1,inputId:_,menuShouldPortal:U=!0,openMenuOnFocus:$=!0}=I,k=E(K),H=P(k,w),j=M(),z=O&&O<=45?g:b,F=(0,n.useCallback)(J=>{if(!J||!(0,t.isString)(J.value))return A(w);A(J.value)},[A,w]);return n.createElement(i.Ph,{inputId:_,value:H,placeholder:(0,a.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:N,menuShouldPortal:U,openMenuOnFocus:$,width:O,filterOption:j,options:k,onChange:F,onBlur:o,components:{Option:z,Group:l},disabled:V,"aria-label":(0,a.t)("time-picker.zone.select-aria-label","Time zone picker")})},E=I=>{const A=Date.now();return(0,r.$8)(I).map(N=>{const o=N.zones.reduce((w,K)=>{const V=(0,r.Pr)(K,A);return V&&w.push({label:V.name,value:V.zone,searchIndex:R(V,A)}),w},[]);return{label:N.name,options:o}})},P=(I,A)=>(0,n.useMemo)(()=>{if(A===void 0)return;const O=(0,t.toLower)(A);return I.find(o=>o.label?O.startsWith((0,t.toLower)(o.label)):S(O))?.options.find(o=>(0,t.isEmpty)(O)?o.value===r.RQ.default:(0,t.toLower)(o.value)===O)},[I,A]),S=I=>{switch(I){case r.RQ.default:case r.RQ.localBrowserTime:case r.RQ.utc:return!0;default:return!1}},M=()=>(0,n.useCallback)((I,A)=>!A||!I.data||!I.data.searchIndex?!0:I.data.searchIndex.indexOf((0,t.toLower)(A))>-1,[]),R=(I,A)=>{const O=[(0,t.toLower)(I.name),(0,t.toLower)(I.abbreviation),(0,t.toLower)((0,f.k)(A,I.zone))];for(const N of I.countries)O.push((0,t.toLower)(N.name)),O.push((0,t.toLower)(N.code));return O.join("|")}},93992:(X,L,e)=>{"use strict";e.d(L,{K:()=>a});var t=e(41407),n=e(39953),r=e(82803);const a=({info:c})=>{const l=(0,r.wW)(y),d=i(c);return c?n.createElement("div",{className:l.description},d):null},i=c=>(0,n.useMemo)(()=>{const l=[];if(!c)return"";if(c.name==="Europe/Simferopol")return"Ukraine, EEST";if(c.countries.length>0){const d=c.countries[0];l.push(d.name)}return c.abbreviation&&l.push(c.abbreviation),l.join(", ")},[c]),y=c=>({description:(0,t.css)({fontWeight:"normal",fontSize:c.typography.size.sm,color:c.colors.text.secondary,whiteSpace:"normal",textOverflow:"ellipsis"})})},54332:(X,L,e)=>{"use strict";e.d(L,{k:()=>l,v:()=>c});var t=e(41407),n=e(86832),r=e.n(n),a=e(39953),i=e(48069),y=e(82803);const c=f=>{const{timestamp:m,timeZone:u,className:h}=f,C=(0,y.wW)(d);return(0,n.isString)(u)?a.createElement(a.Fragment,null,a.createElement("span",{className:(0,t.cx)(C.offset,h)},l(m,u))):null},l=(f,m)=>{const u=(0,i.dq)(f,{timeZone:m,format:"Z"});return u==="+00:00"?"UTC":`UTC${u}`},d=f=>{const m=(0,t.css)({fontWeight:"normal",fontSize:f.typography.size.sm,color:f.colors.text.secondary,whiteSpace:"normal"});return{offset:(0,t.css)(m,{color:f.colors.text.primary,background:f.colors.background.secondary,padding:"2px 5px",borderRadius:f.shape.radius.default,marginLeft:"4px"})}}},4190:(X,L,e)=>{"use strict";e.d(L,{d:()=>a});var t=e(41407),n=e(39953),r=e(82803);const a=({title:y})=>{const c=(0,r.wW)(i);return y?n.createElement("span",{className:c.title},y):null},i=y=>({title:(0,t.css)({fontWeight:y.typography.fontWeightRegular,textOverflow:"ellipsis"})})},76843:(X,L,e)=>{"use strict";e.d(L,{z:()=>i});var t=e(39953),n=e(75766),r=e(9558);const a=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],i=y=>{const{onChange:c,width:l,autoFocus:d=!1,onBlur:f,value:m,disabled:u=!1,inputId:h}=y,C=(0,t.useCallback)(x=>{x.value!==void 0&&c(x.value)},[c]);return t.createElement(r.Ph,{inputId:h,value:a.find(x=>x.value===m)?.value,placeholder:n.wl.components.WeekStartPicker.placeholder,autoFocus:d,openMenuOnFocus:!0,width:l,options:a,onChange:C,onBlur:f,disabled:u})}},58682:(X,L,e)=>{"use strict";e.d(L,{E:()=>n,r:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},78911:(X,L,e)=>{"use strict";e.d(L,{J:()=>a,v:()=>i});var t=e(92403),n=e(77877),r=e(26234);function a(y,c,l){return(0,t.v9)(y)?y.isValid():n.isMathString(y)?n.isValid(y):(0,r.J)(y,{roundUp:c,timeZone:l}).isValid()}function i(y){return n.isValid(y.from)&&n.isValid(y.to)}},68832:(X,L,e)=>{"use strict";e.d(L,{i:()=>a});var t=e(41407),n=e(39953),r=e(82803);const a=({direction:y="horizontal",spacing:c=2})=>{const l=(0,r.wW)((0,n.useCallback)(d=>i(d,c),[c]));return y==="vertical"?n.createElement("div",{className:l.verticalDivider}):n.createElement("hr",{className:l.horizontalDivider})};a.displayName="Divider";const i=(y,c)=>({horizontalDivider:(0,t.css)({borderTop:`1px solid ${y.colors.border.weak}`,margin:y.spacing(c,0),width:"100%"}),verticalDivider:(0,t.css)({borderRight:`1px solid ${y.colors.border.weak}`,margin:y.spacing(0,c),height:"100%"})})},87722:(X,L,e)=>{"use strict";e.d(L,{d:()=>u});var t=e(41407),n=e(41056),r=e(30064),a=e(17037),i=e(47406),y=e(39953),c=e(75766),l=e(82803),d=e(4919),f=e(64447),m=e(98632);function u({children:x,onClose:b,closeOnMaskClick:g=!0,scrollableContent:p=!0,title:v,subtitle:E,width:P,size:S="md",tabs:M}){const R=(0,l.wW)(C),I=y.useRef(null),{dialogProps:A,titleProps:O}=(0,n.R)({},I),{overlayProps:N}=(0,a.Ir)({isDismissable:!1,isOpen:!0,onClose:b},I);h();const o=(0,t.cx)(R.drawer,!P&&R.sizes[S]),w=y.createElement("div",{className:R.content},x);return y.createElement(i.Z,{open:!0,onClose:b,placement:"right",width:P??"",getContainer:".main-view",className:R.drawerContent,rootClassName:o,motion:{motionAppear:!0,motionName:R.drawerMotion},maskClassName:R.mask,maskClosable:g,maskMotion:{motionAppear:!0,motionName:R.maskMotion}},y.createElement(r.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},y.createElement("div",{"aria-label":typeof v=="string"?c.wl.components.Drawer.General.title(v):c.wl.components.Drawer.General.title("no title"),className:R.container,...N,...A,ref:I},typeof v=="string"&&y.createElement("div",{className:(0,t.cx)(R.header,!!M&&R.headerWithTabs)},y.createElement("div",{className:R.actions},y.createElement(d.zx,{icon:"times",variant:"secondary",fill:"text",onClick:b,"aria-label":c.wl.components.Drawer.General.close})),y.createElement("div",{className:R.titleWrapper},y.createElement(m.x,{element:"h3",...O},v),E&&y.createElement("div",{className:R.subtitle},E),M&&y.createElement("div",{className:R.tabsWrapper},M))),typeof v!="string"&&v,y.createElement("div",{className:R.contentScroll},p?y.createElement(f.$,{autoHeightMin:"100%"},w):w))))}function h(){(0,y.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const C=x=>({container:(0,t.css)({display:"flex",flexDirection:"column",height:"100%",flex:"1 1 0",minHeight:"100%"}),drawer:(0,t.css)({".main-view &":{top:81},".main-view--search-bar-hidden &":{top:41},".main-view--chrome-hidden &":{top:0},".rc-drawer-content-wrapper":{boxShadow:x.shadows.z3,[x.breakpoints.down("sm")]:{width:`calc(100% - ${x.spacing(2)}) !important`,minWidth:"0 !important"}}}),sizes:{sm:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-sm",width:"25vw",minWidth:x.spacing(48)}}),md:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-md",width:"50vw",minWidth:x.spacing(60)}}),lg:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-lg",width:"75vw",minWidth:x.spacing(93),[x.breakpoints.down("md")]:{width:`calc(100% - ${x.spacing(2)}) !important`,minWidth:0}}})},drawerContent:(0,t.css)({backgroundColor:`${x.colors.background.primary} !important`,display:"flex",flexDirection:"column",overflow:"hidden",zIndex:x.zIndex.dropdown}),drawerMotion:(0,t.css)({"&-appear":{transform:"translateX(100%)",transition:"none !important","&-active":{transition:`${x.transitions.create("transform")} !important`,transform:"translateX(0)"}}}),mask:(0,t.css)({backgroundColor:"transparent",position:"fixed","&:before":{backgroundColor:`${x.components.overlay.background} !important`,backdropFilter:"blur(1px)",bottom:0,content:'""',left:0,position:"fixed",right:0,".main-view &":{top:81},".main-view--search-bar-hidden &":{top:41},".main-view--chrome-hidden &":{top:0}}}),maskMotion:(0,t.css)({"&-appear":{opacity:0,"&-active":{opacity:1,transition:x.transitions.create("opacity")}}}),header:(0,t.css)({label:"drawer-header",flexGrow:0,padding:x.spacing(2,2,3),borderBottom:`1px solid ${x.colors.border.weak}`}),headerWithTabs:(0,t.css)({borderBottom:"none"}),actions:(0,t.css)({position:"absolute",right:x.spacing(1),top:x.spacing(1)}),titleWrapper:(0,t.css)({label:"drawer-title",overflowWrap:"break-word"}),subtitle:(0,t.css)({label:"drawer-subtitle",color:x.colors.text.secondary,paddingTop:x.spacing(1)}),content:(0,t.css)({padding:x.spacing(2),height:"100%",flexGrow:1}),contentScroll:(0,t.css)({label:"drawer-content",flex:1}),tabsWrapper:(0,t.css)({label:"drawer-tabs",paddingLeft:x.spacing(2),margin:x.spacing(0,-1,-3,-3)})})},5222:(X,L,e)=>{"use strict";e.d(L,{d:()=>C});var t=e(41407),n=e(41626),r=e(30064),a=e(52904),i=e(33589),y=e(39953),c=e(82803),l=e(48824),d=e(846),f=e(13767),m=e(85001),u=e(3839);const h=b=>{const{className:g,options:p,value:v,onChange:E,narrow:P,variant:S,...M}=b,R=(0,c.wW)(x),I=(0,i.W)({}),A=y.useRef(null),{menuTriggerProps:O,menuProps:N}=(0,a.u4)({},I,A),{buttonProps:o}=(0,n.U)(O,A),w=K=>{E(K),I.close()};return y.createElement(l.h,{className:R.wrapper},y.createElement(u.h,{className:g,isOpen:I.isOpen,narrow:P,variant:S,ref:A,...o,...M},v?.label||(v?.value!=null?String(v?.value):null)),I.isOpen&&y.createElement("div",{className:R.menuWrapper},y.createElement(d.L,{onClick:I.close,parent:document,includeButtonPress:!1},y.createElement(r.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},y.createElement(f.v,{tabIndex:-1,onClose:I.close,...N,autoFocus:!!N.autoFocus},p.map(K=>y.createElement(m.s,{key:`${K.value}`,label:K.label??String(K.value),onClick:()=>w(K),active:K.value===v?.value,ariaChecked:K.value===v?.value,ariaLabel:K.ariaLabel||K.label,role:"menuitemradio"})))))))};h.displayName="ButtonSelect";const C=y.memo(h),x=b=>({wrapper:(0,t.css)({position:"relative",display:"inline-flex"}),menuWrapper:(0,t.css)({position:"absolute",zIndex:b.zIndex.dropdown,top:b.spacing(4),right:0})})},58047:(X,L,e)=>{"use strict";e.d(L,{L:()=>l});var t=e(41407),n=e(30064),r=e(39953),a=e(13172),i=e(17088),y=e(82360),c=e(70393);const l=r.memo(({children:f,overlay:m,placement:u,offset:h,onVisibleChange:C})=>{const[x,b]=(0,r.useState)(!1),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{C?.(x)},[C,x]);const{getArrowProps:p,getTooltipProps:v,setTooltipRef:E,setTriggerRef:P,visible:S}=(0,a.O)({visible:x,placement:u,onVisibleChange:b,interactive:!0,delayHide:0,delayShow:0,offset:h??[0,8],trigger:["click"]}),M=150,R=d(M),I=()=>{b(!1)},A=O=>{(O.key==="Escape"||O.key==="Tab")&&b(!1)};return r.createElement(r.Fragment,null,r.cloneElement(f,{ref:P}),S&&r.createElement(c.h_,null,r.createElement(n.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},r.createElement("div",{ref:E,...v(),onClick:I,onKeyDown:A},r.createElement("div",{...p({className:"tooltip-arrow"})}),r.createElement(i.Z,{nodeRef:g,appear:!0,in:!0,timeout:{appear:M,exit:0,enter:0},classNames:R},r.createElement("div",{ref:g},y.renderOrCallToRender(m,{})))))))});l.displayName="Dropdown";const d=f=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${f}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${f}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},16708:(X,L,e)=>{"use strict";e.d(L,{K:()=>a});var t=e(41407),n=e(39953),r=e(82803);const a=({children:y})=>{const c=(0,r.wW)(i);return n.createElement("div",{className:c.container},y)},i=y=>({container:(0,t.css)({borderLeft:`3px solid ${y.colors.info.main}`,backgroundColor:`${y.colors.background.secondary}`,padding:y.spacing(2),minWidth:"350px",borderRadius:y.shape.radius.default,marginBottom:y.spacing(4)})})},41393:(X,L,e)=>{"use strict";e.d(L,{Pf:()=>c,SV:()=>i,z4:()=>y});var t=e(39953),n=e(46563),r=e(33155),a=e(35521);class i extends t.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(d,f){n.s?.api?.pushError(d),this.setState({error:d,errorInfo:f}),this.props.onError&&this.props.onError(d)}componentDidUpdate(d){const{dependencies:f,onRecover:m}=this.props;if(this.state.error&&f&&d.dependencies){for(let u=0;u<f.length;u++)if(f[u]!==d.dependencies[u]){this.setState({error:null,errorInfo:null}),m&&m();break}}}render(){const{children:d}=this.props,{error:f,errorInfo:m}=this.state;return d({error:f,errorInfo:m})}}class y extends t.PureComponent{render(){const{title:d,children:f,style:m,dependencies:u}=this.props;return t.createElement(i,{dependencies:u},({error:h,errorInfo:C})=>C?m==="alertbox"?t.createElement(r.b,{title:d||""},t.createElement("details",{style:{whiteSpace:"pre-wrap"}},h&&h.toString(),t.createElement("br",null),C.componentStack)):t.createElement(a.X,{title:d||"",error:h,errorInfo:C}):f)}}y.defaultProps={title:"An unexpected error happened",style:"alertbox"};function c(l,d={}){const f=m=>t.createElement(y,{...d},t.createElement(l,{...m}));return f.displayName="WithErrorBoundary",f}},35521:(X,L,e)=>{"use strict";e.d(L,{X:()=>i});var t=e(41407),n=e(39953),r=e(64084);const a=(0,r.B)(()=>(0,t.css)({width:"500px",margin:"64px auto"})),i=({error:y,errorInfo:c,title:l})=>n.createElement("div",{className:a()},n.createElement("h2",null,l),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},y&&y.toString(),n.createElement("br",null),c&&c.componentStack));i.displayName="ErrorWithStack"},17789:(X,L,e)=>{"use strict";e.d(L,{A_:()=>x,Yo:()=>u});var t=e(41407),n=e(86832),r=e.n(n),a=e(39953),i=e(64290),y=e(98965),c=e(83502),l=e(82803),d=e(33155),f=e(39285),m=e(65800);function u({options:E,children:P,readAs:S,onLoad:M,fileListRenderer:R,onFileRemove:I}){const[A,O]=(0,a.useState)([]),[N,o]=(0,a.useState)([]),w=(0,c.Cf)("decbytes")(E?.maxSize?E?.maxSize:0),K=(0,a.useCallback)((Z,ne)=>{O(ee=>ee.map(de=>(de.id===Z.id&&ne(de),de)))},[]),V=(0,a.useCallback)((Z,ne,ee)=>{let de=Z.map(p);if(E?.multiple===!1?O(de):O(Pe=>[...Pe,...de]),F(ne),E?.onDrop)E.onDrop(Z,ne,ee);else for(const Pe of de){const ye=new FileReader,he=()=>{S?ye[S](Pe.file):ye.readAsText(Pe.file)};K(Pe,me=>{me.abortUpload=()=>{ye.abort()},me.retryUpload=()=>{K(Pe,De=>{De.error=null,De.progress=void 0}),he()}}),ye.onabort=()=>{K(Pe,me=>{me.error=new DOMException("Aborted")})},ye.onprogress=me=>{K(Pe,De=>{De.progress=me.loaded})},ye.onload=()=>{M?.(ye.result)},ye.onerror=()=>{K(Pe,me=>{me.error=ye.error})},he()}},[M,E,S,K]),_=Z=>{const ne=A.filter(ee=>Z.id!==ee.id);O(ne),I?.(Z)},{getRootProps:U,getInputProps:$,isDragActive:k}=(0,i.uI)({...E,useFsAccessApi:!1,onDrop:V,accept:C(E?.accept)}),H=(0,l.l4)(),j=v(H,k),z=A.map(Z=>R?R(Z,_):a.createElement(m.K,{key:Z.id,file:Z,removeFile:_})),F=Z=>{let ne=[];Z.map(ee=>{ee.errors.map(de=>{ne.findIndex(Pe=>Pe.code===de.code&&Pe.message===de.message)===-1&&ne.push(de)})}),o(ne)},J=Z=>a.createElement("div",{className:j.errorAlert},a.createElement(d.b,{title:"Upload failed",severity:"error",onRemove:Q},Z.map(ne=>{switch(ne.code){case y.jK.FileTooLarge:return a.createElement("div",{key:ne.message+ne.code},"File is larger than ",(0,c.zc)(w));default:return a.createElement("div",{key:ne.message+ne.code},ne.message)}}))),Q=()=>{o([])};return a.createElement("div",{className:j.container},a.createElement("div",{"data-testid":"dropzone",...U({className:j.dropzone})},a.createElement("input",{...$()}),P??a.createElement(x,{primaryText:b(A,E)})),N.length>0&&J(N),a.createElement("small",{className:(0,t.cx)(j.small,j.acceptContainer)},E?.maxSize&&`Max file size: ${(0,c.zc)(w)}`,E?.maxSize&&E?.accept&&a.createElement("span",{className:j.acceptSeparator},"|"),E?.accept&&g(E.accept)),z)}function h(E){return["txt","json","csv","xls","yml"].some(P=>E.match(P))?"text/plain":"application/octet-stream"}function C(E){return(0,n.isString)(E)?{[h(E)]:[E]}:Array.isArray(E)?E.reduce((P,S)=>{const M=h(S);return P[M]=P[M]?[...P[M],S]:[S],P},{}):E}function x({primaryText:E="Drop file here or click to upload",secondaryText:P=""}){const S=(0,l.l4)(),M=v(S);return a.createElement("div",{className:(0,t.cx)(M.defaultDropZone),"data-testid":"file-drop-zone-default-children"},a.createElement(f.J,{className:(0,t.cx)(M.icon),name:"upload",size:"xl"}),a.createElement("h6",{className:(0,t.cx)(M.primaryText)},E),a.createElement("small",{className:M.small},P))}function b(E,P){return P?.multiple===void 0||P?.multiple?"Upload file":E.length?"Replace file":"Upload file"}function g(E){return(0,n.isString)(E)?`Accepted file type: ${E}`:Array.isArray(E)?`Accepted file types: ${E.join(", ")}`:`Accepted file types: ${Object.values(E).flat().join(", ")}`}function p(E){return{id:(0,n.uniqueId)("file"),file:E,error:null}}function v(E,P){return{container:(0,t.css)({display:"flex",flexDirection:"column",width:"100%",padding:E.spacing(2),borderRadius:E.shape.radius.default,border:`1px dashed ${E.colors.border.strong}`,backgroundColor:P?E.colors.background.secondary:E.colors.background.primary,cursor:"pointer",alignItems:"center",justifyContent:"center"}),dropzone:(0,t.css)({height:"100%",width:"100%",display:"flex",flexDirection:"column"}),defaultDropZone:(0,t.css)({textAlign:"center"}),icon:(0,t.css)({marginBottom:E.spacing(1)}),primaryText:(0,t.css)({marginBottom:E.spacing(1)}),acceptContainer:(0,t.css)({textAlign:"center",margin:0}),acceptSeparator:(0,t.css)({margin:`0 ${E.spacing(1)}`}),small:(0,t.css)({color:E.colors.text.secondary}),errorAlert:(0,t.css)({paddingTop:"10px"})}}},65800:(X,L,e)=>{"use strict";e.d(L,{K:()=>f});var t=e(41407),n=e(39953),r=e(83502),a=e(82803),i=e(96754),y=e(4919),c=e(39285),l=e(68497);const d="Remove file";function f({file:u,removeFile:h}){const C=(0,a.wW)(m),{file:x,progress:b,error:g,abortUpload:p,retryUpload:v}=u,E=()=>g?n.createElement(n.Fragment,null,n.createElement("span",{className:C.error},g.message),v&&n.createElement(l.h,{name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:v}),h&&n.createElement(l.h,{className:v?C.marginLeft:"",name:"trash-alt",onClick:()=>h(u),tooltip:d})):b&&x.size>b?n.createElement(n.Fragment,null,n.createElement("progress",{className:C.progressBar,max:x.size,value:b}),n.createElement("span",{className:C.paddingLeft},Math.round(b/x.size*100),"%"),p&&n.createElement(y.zx,{variant:"secondary",type:"button",fill:"text",onClick:p},"Cancel upload")):h&&n.createElement(l.h,{name:"trash-alt",onClick:()=>h(u),tooltip:d,tooltipPlacement:"top"}),P=(0,r.Cf)("decbytes")(x.size);return n.createElement("div",{className:C.fileListContainer},n.createElement("span",{className:C.fileNameWrapper},n.createElement(c.J,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:C.padding},(0,i.O)(x.name)),n.createElement("span",null,(0,r.zc)(P))),n.createElement("div",{className:C.fileNameWrapper},E()))}function m(u){return{fileListContainer:(0,t.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:u.spacing(2),border:`1px dashed ${u.colors.border.medium}`,backgroundColor:`${u.colors.background.secondary}`,marginTop:u.spacing(1)}),fileNameWrapper:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center"}),padding:(0,t.css)({padding:u.spacing(0,1)}),paddingLeft:(0,t.css)({paddingLeft:u.spacing(2)}),marginLeft:(0,t.css)({marginLeft:u.spacing(1)}),error:(0,t.css)({paddingRight:u.spacing(2),color:u.colors.error.text}),progressBar:(0,t.css)({borderRadius:u.shape.radius.default,height:"4px","::-webkit-progress-bar":{backgroundColor:u.colors.border.weak,borderRadius:u.shape.radius.default},"::-webkit-progress-value":{backgroundColor:u.colors.primary.main,borderRadius:u.shape.radius.default}})}}},86320:(X,L,e)=>{"use strict";e.d(L,{A_:()=>t.A_,K$:()=>n.K,Yo:()=>t.Yo});var t=e(17789),n=e(65800)},72939:(X,L,e)=>{"use strict";e.d(L,{p:()=>f});var t=e(41407),n=e(39953),r=e(34032),a=e(75766),i=e(82803),y=e(53039),c=e(96754),l=e(4919),d=e(39285);const f=({onFileUpload:u,className:h,children:C="Upload file",accept:x="*",size:b="md",showFileName:g})=>{const p=(0,i.wW)(m(b)),[v,E]=(0,n.useState)(""),P=(0,r.Z)(),S=(0,n.useCallback)(M=>{const R=M.currentTarget?.files?.[0];R&&E(R.name??""),u(M)},[u]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:P,className:p.fileUpload,onChange:S,multiple:!1,accept:x,"data-testid":a.wl.components.FileUpload.inputField}),n.createElement("label",{htmlFor:P,className:(0,t.cx)(p.labelWrapper,h)},n.createElement(d.J,{name:"upload",className:p.icon}),C),g&&v&&n.createElement("span",{"aria-label":"File name",className:p.fileName,"data-testid":a.wl.components.FileUpload.fileNameSpan},(0,c.O)(v)))},m=u=>h=>{const C=(0,l.fW)({theme:h,variant:"primary",size:u,iconOnly:!1}),x=(0,y.getFocusStyles)(h);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":x,"&:focus-visible + label":x}),labelWrapper:C.button,icon:C.icon,fileName:(0,t.css)({marginLeft:h.spacing(.5)})}}},41245:(X,L,e)=>{"use strict";e.d(L,{H:()=>c});var t=e(39953),n=e(55705);function r(...l){const d=t.useRef(null);return t.useEffect(()=>{l.forEach(f=>{f&&(typeof f=="function"?f(d.current):f.current=d.current)})},[l]),d}var a=e(4919),i=e(39285),y=e(38637);const c=t.forwardRef(({value:l,width:d,onChange:f,escapeRegex:m=!0,...u},h)=>{const C=t.useRef(null),x=r(h,C),b=l!==""?t.createElement(a.zx,{icon:"times",fill:"text",size:"sm",onClick:g=>{C.current?.focus(),f(""),g.stopPropagation()}},"Clear"):null;return t.createElement(y.I,{prefix:t.createElement(i.J,{name:"search"}),suffix:b,width:d,type:"text",value:m?(0,n.x6)(l??""):l,onChange:g=>f(m?(0,n.GE)(g.currentTarget.value):g.currentTarget.value),...u,ref:x})});c.displayName="FilterInput"},13868:(X,L,e)=>{"use strict";e.d(L,{B:()=>y});var t=e(41407),n=e(39953),r=e(82803),a=e(4919),i=e(39285);const y=({label:l,selected:d,onClick:f,icon:m="check"})=>{const u=(0,r.wW)(c),h=(0,r.wW)(a.gN);return n.createElement("button",{type:"button",className:(0,t.cx)(h,u.wrapper,d&&u.selected),onClick:f},n.createElement("span",null,l),d&&n.createElement(i.J,{name:m,className:u.icon}))},c=l=>({wrapper:(0,t.css)({background:l.colors.background.secondary,borderRadius:l.shape.radius.pill,padding:l.spacing(0,2),fontSize:l.typography.bodySmall.fontSize,fontWeight:l.typography.fontWeightMedium,lineHeight:l.typography.bodySmall.lineHeight,color:l.colors.text.secondary,display:"flex",alignItems:"center",height:"32px",position:"relative",border:`1px solid ${l.colors.background.secondary}`,whiteSpace:"nowrap","&:hover":{background:l.colors.action.hover,color:l.colors.text.primary}}),selected:(0,t.css)({color:l.colors.text.primary,background:l.colors.action.selected,"&:hover":{background:l.colors.action.focus}}),icon:(0,t.css)({marginLeft:l.spacing(.5)})})},12392:(X,L,e)=>{"use strict";e.d(L,{W:()=>i});var t=e(41407),n=e(39953),r=e(56921);const a={labelWidth:6,inputWidth:12},i=({label:c,tooltip:l,labelWidth:d,inputWidth:f,inputEl:m,className:u,interactive:h,...C})=>{const x=y();return n.createElement("div",{className:(0,t.cx)(x.formField,u)},n.createElement(r.c,{width:d,tooltip:l,interactive:h},c),m||n.createElement("input",{type:"text",className:`gf-form-input ${f?`width-${f}`:""}`,...C,disabled:C.disabled}))};i.displayName="FormField",i.defaultProps=a;const y=()=>({formField:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative"})})},56921:(X,L,e)=>{"use strict";e.d(L,{c:()=>c});var t=e(77814),n=e.n(t),r=e(39953),a=e(39285),i=e(69865);const c=({children:l,isFocused:d,isInvalid:f,className:m,htmlFor:u,tooltip:h,width:C,interactive:x,...b})=>{const g=n()(m,`gf-form-label width-${C||"10"}`,{"gf-form-label--is-focused":d,"gf-form-label--is-invalid":f});return r.createElement("label",{className:g,...b,htmlFor:u},l,h&&r.createElement(i.u,{placement:"top",content:h,theme:"info",interactive:x},r.createElement(a.J,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},6430:(X,L,e)=>{"use strict";e.d(L,{W:()=>r});var t=e(39953);function n(a){return a<20?.9:a<26?.8:.6}const r=({value:a,className:i,style:y,...c})=>{const l=(a.prefix??"").length>0,d=(a.suffix??"").length>0;let f;if(y&&y.fontSize&&typeof y.fontSize=="number"){const m=y.fontSize,u=n(m);f={fontSize:m*u}}return t.createElement("div",{className:i,style:y,...c},t.createElement("div",null,l&&t.createElement("span",null,a.prefix),t.createElement("span",null,a.text),d&&t.createElement("span",{style:f},a.suffix)))};r.displayName="FormattedDisplayValue"},13026:(X,L,e)=>{"use strict";e.d(L,{X:()=>y});var t=e(41407),n=e(39953),r=e(82803),a=e(53039),i=e(36495);const y=n.forwardRef(({label:l,description:d,value:f,htmlValue:m,onChange:u,disabled:h,className:C,indeterminate:x,invalid:b,...g},p)=>{const v=(0,n.useCallback)(M=>{u&&u(M)},[u]),E=(0,r.l4)(),P=c(E,b),S=x?"mixed":void 0;return n.createElement("label",{className:(0,t.cx)(P.wrapper,C)},n.createElement("div",{className:P.checkboxWrapper},n.createElement("input",{type:"checkbox",className:(0,t.cx)(P.input,x&&P.inputIndeterminate),checked:f,disabled:h,onChange:v,value:m,"aria-checked":S,...g,ref:p}),n.createElement("span",{className:P.checkmark})),l&&n.createElement("span",{className:P.label},l),d&&n.createElement("span",{className:P.description},d))}),c=(l,d=!1)=>{const f=(0,i.F)(l),m=2,u=1,h=C=>d?l.colors.error.border:C;return{wrapper:(0,t.css)({display:"inline-grid",alignItems:"center",columnGap:l.spacing(u),gridAutoRows:"max-content",position:"relative",verticalAlign:"middle"}),input:(0,t.css)({position:"absolute",zIndex:1,top:0,left:0,width:"100% !important",height:"100%",opacity:0,"&:focus + span, &:focus-visible + span":(0,a.getFocusStyles)(l),"&:focus:not(:focus-visible) + span":(0,a.getMouseFocusStyles)(l),"&:checked + span":{background:l.colors.primary.main,border:`1px solid ${h(l.colors.primary.main)}`,"&:hover":{background:l.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"4px",top:0,width:"6px",height:"12px",border:`solid ${l.colors.primary.contrastText}`,borderWidth:"0 3px 3px 0",transform:"rotate(45deg)"}},"&:disabled + span":{backgroundColor:l.colors.action.disabledBackground,cursor:"not-allowed",border:`1px solid ${h(l.colors.action.disabledBackground)}`,"&:hover":{backgroundColor:l.colors.action.disabledBackground},"&:after":{borderColor:l.colors.action.disabledText}}}),inputIndeterminate:(0,t.css)({"&[aria-checked='mixed'] + span":{border:`1px solid ${h(l.colors.primary.main)}`,background:l.colors.primary.main,"&:hover":{background:l.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"2px",right:"2px",top:"calc(50% - 1.5px)",height:"3px",border:`1.5px solid ${l.colors.primary.contrastText}`,backgroundColor:l.colors.primary.contrastText,width:"auto",transform:"none"}},"&:disabled[aria-checked='mixed'] + span":{backgroundColor:l.colors.action.disabledBackground,border:`1px solid ${h(l.colors.error.transparent)}`,"&:after":{borderColor:l.colors.action.disabledText}}}),checkboxWrapper:(0,t.css)({display:"flex",alignItems:"center",gridColumnStart:1,gridRowStart:1}),checkmark:(0,t.css)({position:"relative",zIndex:2,display:"inline-block",width:l.spacing(m),height:l.spacing(m),borderRadius:l.shape.radius.default,background:l.components.input.background,border:`1px solid ${h(l.components.input.borderColor)}`,"&:hover":{cursor:"pointer",borderColor:h(l.components.input.borderHover)}}),label:(0,t.cx)(f.label,(0,t.css)({gridColumnStart:2,gridRowStart:1,position:"relative",zIndex:2,cursor:"pointer",maxWidth:"fit-content",lineHeight:l.typography.bodySmall.lineHeight,marginBottom:0})),description:(0,t.cx)(f.description,(0,t.css)({gridColumnStart:2,gridRowStart:2,lineHeight:l.typography.bodySmall.lineHeight,marginTop:0}))}};y.displayName="Checkbox"},96227:(X,L,e)=>{"use strict";e.d(L,{g:()=>d});var t=e(41407),n=e(39953),r=e(64084),a=e(82803),i=e(82360),y=e(43324),c=e(36495);const l=(0,r.B)(m=>({field:(0,t.css)({display:"flex",flexDirection:"column",marginBottom:m.spacing(2)}),fieldHorizontal:(0,t.css)({flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),fieldValidationWrapper:(0,t.css)({marginTop:m.spacing(.5)}),fieldValidationWrapperHorizontal:(0,t.css)({flex:"1 1 100%"}),validationMessageHorizontalOverflow:(0,t.css)({width:0,overflowX:"visible","& > *":{whiteSpace:"nowrap"}})})),d=n.forwardRef(({label:m,description:u,horizontal:h,invalid:C,loading:x,disabled:b,required:g,error:p,children:v,className:E,validationMessageHorizontalOverflow:P,htmlFor:S,...M},R)=>{const I=(0,a.l4)(),A=l(I),O=S??(0,i.getChildId)(v),N=typeof m=="string"?n.createElement(c._,{htmlFor:O,description:u},`${m}${g?" *":""}`):m,o=f({invalid:C,disabled:b,loading:x});return n.createElement("div",{className:(0,t.cx)(A.field,h&&A.fieldHorizontal,E),...M},N,n.createElement("div",null,n.createElement("div",{ref:R},n.cloneElement(v,o)),C&&p&&!h&&n.createElement("div",{className:(0,t.cx)(A.fieldValidationWrapper,{[A.validationMessageHorizontalOverflow]:!!P})},n.createElement(y.S,null,p))),C&&p&&h&&n.createElement("div",{className:(0,t.cx)(A.fieldValidationWrapper,A.fieldValidationWrapperHorizontal,{[A.validationMessageHorizontalOverflow]:!!P})},n.createElement(y.S,null,p)))});d.displayName="Field";function f(m){for(const u in m)m[u]===void 0&&delete m[u];return m}},58464:(X,L,e)=>{"use strict";e.d(L,{F:()=>n});var t=e(14058);const n=({name:r,control:a,children:i,...y})=>{const{fields:c,append:l,prepend:d,remove:f,swap:m,move:u,insert:h}=(0,t.Dq)({control:a,name:r,...y});return i({fields:c,append:l,prepend:d,remove:f,swap:m,move:u,insert:h})}},2827:(X,L,e)=>{"use strict";e.d(L,{C:()=>y});var t=e(41407),n=e(39953),r=e(82803),a=e(64084),i=e(96276);const y=({label:l,children:d,className:f,...m})=>{const u=(0,r.l4)(),h=c(u);return n.createElement("fieldset",{className:(0,t.cx)(h.wrapper,f),...m},l&&n.createElement(i.D,null,l),d)},c=(0,a.B)(l=>({wrapper:(0,t.css)({marginBottom:l.spacing(4),"&:last-child":{marginBottom:0}})}))},43324:(X,L,e)=>{"use strict";e.d(L,{S:()=>c});var t=e(41407),n=e(39953),r=e(64084),a=e(82803),i=e(39285);const y=(0,r.B)(l=>{const d=`
      font-size: ${l.typography.size.sm};
      font-weight: ${l.typography.fontWeightMedium};
      padding: ${l.spacing(.5,1)};
      color: ${l.colors.error.contrastText};
      background: ${l.colors.error.main};
      border-radius: ${l.shape.radius.default};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${l.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:(0,t.css)(d,{margin:l.spacing(.5,0,0,0),"&:before":{content:'""',position:"absolute",left:"9px",top:"-5px",width:0,height:0,borderWidth:"0 4px 5px 4px",borderColor:`transparent transparent ${l.colors.error.main} transparent`,borderStyle:"solid"}}),horizontal:(0,t.css)(d,{marginLeft:"10px","&:before":{content:'""',position:"absolute",left:"-5px",top:"9px",width:0,height:0,borderWidth:"4px 5px 4px 0",borderColor:"transparent #e02f44 transparent transparent",borderStyle:"solid"}}),fieldValidationMessageIcon:(0,t.css)({marginRight:l.spacing()})}}),c=({children:l,horizontal:d,className:f})=>{const m=(0,a.l4)(),u=y(m),h=(0,t.cx)(d?u.horizontal:u.vertical,f);return n.createElement("div",{role:"alert",className:h},n.createElement(i.J,{className:u.fieldValidationMessageIcon,name:"exclamation-triangle"}),l)}},85830:(X,L,e)=>{"use strict";e.d(L,{l:()=>a});var t=e(41407),n=e(39953),r=e(14058);function a({defaultValues:i,onSubmit:y,validateOnMount:c=!1,validateFieldsOnMount:l,children:d,validateOn:f="onSubmit",maxWidth:m=600,...u}){const{handleSubmit:h,trigger:C,formState:x,...b}=(0,r.cI)({mode:f,defaultValues:i});return(0,n.useEffect)(()=>{c&&C(l)},[C,l,c]),n.createElement("form",{className:(0,t.css)({maxWidth:m!=="none"?m+"px":m,width:"100%"}),onSubmit:h(y),...u},d({errors:x.errors,formState:x,trigger:C,...b}))}},69171:(X,L,e)=>{"use strict";e.d(L,{_:()=>c});var t=e(41407),n=e(39953),r=e(82803),a=e(82360),i=e(43324),y=e(99491);const c=({children:d,label:f,tooltip:m,labelWidth:u="auto",invalid:h,loading:C,disabled:x,required:b,className:g,htmlFor:p,grow:v,shrink:E,error:P,transparent:S,interactive:M,...R})=>{const I=(0,r.l4)(),A=l(I,v,E),O=p??(0,a.getChildId)(d),N=typeof f=="string"?n.createElement(y.W,{interactive:M,width:u,tooltip:m,htmlFor:O,transparent:S},`${f}${b?" *":""}`):f;return n.createElement("div",{className:(0,t.cx)(A.container,g),...R},N,n.createElement("div",{className:A.childContainer},n.cloneElement(d,{invalid:h,disabled:x,loading:C}),h&&P&&n.createElement("div",{className:(0,t.cx)(A.fieldValidationWrapper)},n.createElement(i.S,null,P))))};c.displayName="InlineField";const l=(d,f,m)=>({container:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${f?1:0} ${m?1:0} auto`,margin:`0 ${d.spacing(.5)} ${d.spacing(.5)} 0`}),childContainer:(0,t.css)({flex:`${f?1:0} ${m?1:0} auto`}),fieldValidationWrapper:(0,t.css)({marginTop:d.spacing(.5)})})},74661:(X,L,e)=>{"use strict";e.d(L,{Z:()=>a});var t=e(41407),n=e(39953),r=e(82803);const a=({children:y,className:c,...l})=>{const d=(0,r.wW)(i);return n.createElement("div",{className:(0,t.cx)(d.container,c),...l},y)},i=y=>({container:(0,t.css)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:y.spacing(.5)})})},99491:(X,L,e)=>{"use strict";e.d(L,{W:()=>y});var t=e(41407),n=e(39953),r=e(82803),a=e(39285),i=e(69865);const y=({children:l,className:d,tooltip:f,width:m,transparent:u,interactive:h,as:C="label",...x})=>{const b=(0,r.wW)((0,n.useCallback)(g=>c(g,u,m),[u,m]));return n.createElement(C,{className:(0,t.cx)(b.label,d),...x},l,f&&n.createElement(i.u,{interactive:h,placement:"top",content:f,theme:"info"},n.createElement(a.J,{tabIndex:0,name:"info-circle",size:"sm",className:b.icon})))},c=(l,d=!1,f)=>({label:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:l.spacing(0,1),fontWeight:l.typography.fontWeightMedium,fontSize:l.typography.size.sm,backgroundColor:d?"transparent":l.colors.background.secondary,height:l.spacing(l.components.height.md),lineHeight:l.spacing(l.components.height.md),marginRight:l.spacing(.5),borderRadius:l.shape.radius.default,border:"none",width:f?f!=="auto"?`${8*f}px`:f:"100%",color:l.colors.text.primary}),icon:(0,t.css)({color:l.colors.text.secondary,marginLeft:"10px",":hover":{color:l.colors.text.primary}})})},27303:(X,L,e)=>{"use strict";e.d(L,{m:()=>a});var t=e(41407),n=e(39953),r=e(82803);const a=({children:y,className:c,grow:l,...d})=>{const f=(0,r.wW)(m=>i(m,l));return n.createElement("div",{className:(0,t.cx)(f.container,c),...d},y)};a.displayName="InlineSegmentGroup";const i=(y,c)=>({container:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${c?1:0} 0 auto`,marginBottom:y.spacing(.5)})})},36495:(X,L,e)=>{"use strict";e.d(L,{F:()=>y,_:()=>c});var t=e(41407),n=e(39953),r=e(64084),a=e(82803),i=e(39285);const y=(0,r.B)(l=>({label:(0,t.css)({label:"Label",fontSize:l.typography.size.sm,fontWeight:l.typography.fontWeightMedium,lineHeight:1.25,marginBottom:l.spacing(.5),color:l.colors.text.primary,maxWidth:"480px"}),labelContent:(0,t.css)({display:"flex",alignItems:"center"}),description:(0,t.css)({label:"Label-description",color:l.colors.text.secondary,fontSize:l.typography.size.sm,fontWeight:l.typography.fontWeightRegular,marginTop:l.spacing(.25),display:"block"}),categories:(0,t.css)({label:"Label-categories",display:"inline-flex",alignItems:"center"}),chevron:(0,t.css)({margin:l.spacing(0,.25)})})),c=({children:l,description:d,className:f,category:m,...u})=>{const h=(0,a.l4)(),C=y(h),x=m?.map((b,g)=>n.createElement("span",{className:C.categories,key:`${b}/${g}`},n.createElement("span",null,b),n.createElement(i.J,{name:"angle-right",className:C.chevron})));return n.createElement("div",{className:(0,t.cx)(C.label,f)},n.createElement("label",{...u},n.createElement("div",{className:C.labelContent},x,l),d&&n.createElement("span",{className:C.description},d)))}},27325:(X,L,e)=>{"use strict";e.d(L,{G:()=>i,I:()=>y});var t=e(77814),n=e.n(t),r=e(39953),a=e(73201),i=(c=>(c.Invalid="invalid",c.Valid="valid",c))(i||{});class y extends r.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=l=>d=>{const f=(0,a.Gu)(d.target.value,l);this.setState(m=>({...m,error:f?f[0]:null}))},this.populateEventPropsWithStatus=(l,d)=>{const f={...l};return d&&Object.keys(a.JU).forEach(m=>{((0,a.z3)(m,d)||l[m])&&(f[m]=async u=>{u.persist(),(0,a.z3)(m,d)&&await this.validatorAsync(d[m]).apply(this,[u]),l[m]&&l[m].apply(null,[u,this.status])})}),f}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:l,className:d,hideErrorMessage:f,inputRef:m,...u}=this.props,{error:h}=this.state,C=n()("gf-form-input",{invalid:this.isInvalid},d),x=this.populateEventPropsWithStatus(u,l);return r.createElement("div",{style:{flexGrow:1}},r.createElement("input",{...x,ref:m,className:C}),h&&!f&&r.createElement("span",null,h))}}y.defaultProps={className:""}},43377:(X,L,e)=>{"use strict";e.d(L,{B:()=>a,Z:()=>i});var t=e(39953),n=e(6413),r=e(39285);const a=y=>{const c=y.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...y},t.createElement(r.J,{name:c?"angle-up":"angle-down",style:{marginTop:"7px"}}))},i=a},80010:(X,L,e)=>{"use strict";e.d(L,{P:()=>r,Z:()=>a});var t=e(39953),n=e(6413);const r=i=>{const{children:y}=i;return t.createElement(n.c.NoOptionsMessage,{...i},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},y)))},a=r},81425:(X,L,e)=>{"use strict";e.d(L,{qb:()=>S,Ph:()=>P});var t=e(77814),n=e.n(t),r=e(39953),a=e(6413),i=e(39427),y=e(4294),c=e(65183),l=e(82803),d=e(64447),f=e(39592),m=e(77503),u=e(65435),h=e(69865),C=e(43377),x=e(80010),b=e(39285);const g=I=>{const{children:A,isSelected:O,data:N}=I;return r.createElement(a.c.Option,{...I},r.createElement("div",{className:"gf-form-select-box__desc-option"},N.imgUrl&&r.createElement("img",{className:"gf-form-select-box__desc-option__img",src:N.imgUrl,alt:""}),r.createElement("div",{className:"gf-form-select-box__desc-option__body"},r.createElement("div",null,A),N.description&&r.createElement("div",{className:"gf-form-select-box__desc-option__desc"},N.description)),O&&r.createElement(b.J,{name:"check","aria-hidden":"true"})))},p=null,v=I=>r.createElement(a.c.MenuList,{...I},r.createElement(d.$,{autoHide:!1,autoHeightMax:"inherit"},I.children)),E=class extends r.PureComponent{render(){const{defaultValue:I,getOptionLabel:A,getOptionValue:O,onChange:N,options:o,placeholder:w,width:K,value:V,className:_,isDisabled:U,isLoading:$,isSearchable:k,isClearable:H,backspaceRemovesValue:j,isMulti:z,autoFocus:F,openMenuOnFocus:J,onBlur:Q,maxMenuHeight:Z,noOptionsMessage:ne,isOpen:ee,components:de,tooltipContent:Pe,tabSelectsValue:ye,onCloseMenu:he,onOpenMenu:me,allowCustomValue:De,formatCreateLabel:le,"aria-label":Ee}=this.props;let be="";K&&(be="width-"+K);let ge=i.ZP;const ue={};De&&(ge=c.Z,ue.formatCreateLabel=le??(Qe=>Qe));const Ie=n()("gf-form-input","gf-form-input--form-dropdown",be,_),ot={...E.defaultProps.components,...de};return r.createElement(M,{onCloseMenu:he,onOpenMenu:me,tooltipContent:Pe,isOpen:ee},(Qe,Me)=>r.createElement(ge,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Ie,components:ot,defaultValue:I,value:V,getOptionLabel:A,getOptionValue:O,menuShouldScrollIntoView:!1,isSearchable:k,onChange:N,options:o,placeholder:w||"Choose",styles:(0,u.Z)(this.context),isDisabled:U,isLoading:$,isClearable:H,autoFocus:F,onBlur:Q,openMenuOnFocus:J,maxMenuHeight:Z,noOptionsMessage:ne,isMulti:z,backspaceRemovesValue:j,menuIsOpen:ee,onMenuOpen:Qe,onMenuClose:Me,tabSelectsValue:ye,"aria-label":Ee,...ue}))}};let P=E;P.contextType=l.Ni,P.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:g,SingleValue:m.P,IndicatorsContainer:C.Z,MenuList:v,Group:f.n}};class S extends r.PureComponent{render(){const{defaultValue:A,getOptionLabel:O,getOptionValue:N,onChange:o,placeholder:w,width:K,value:V,className:_,loadOptions:U,defaultOptions:$,isLoading:k,loadingMessage:H,noOptionsMessage:j,isDisabled:z,isSearchable:F,isClearable:J,backspaceRemovesValue:Q,autoFocus:Z,onBlur:ne,openMenuOnFocus:ee,maxMenuHeight:de,isMulti:Pe,tooltipContent:ye,onCloseMenu:he,onOpenMenu:me,isOpen:De}=this.props;let le="";K&&(le="width-"+K);const Ee=n()("gf-form-input","gf-form-input--form-dropdown",le,_);return r.createElement(M,{onCloseMenu:he,onOpenMenu:me,tooltipContent:ye,isOpen:De},(be,ge)=>r.createElement(y.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Ee,components:{Option:g,SingleValue:m.P,IndicatorsContainer:C.Z,NoOptionsMessage:x.Z},defaultValue:A,value:V,getOptionLabel:O,getOptionValue:N,menuShouldScrollIntoView:!1,onChange:o,loadOptions:U,isLoading:k,defaultOptions:$,placeholder:w||"Choose",styles:(0,u.Z)(this.context),loadingMessage:H,noOptionsMessage:j,isDisabled:z,isSearchable:F,isClearable:J,autoFocus:Z,onBlur:ne,openMenuOnFocus:ee,maxMenuHeight:de,isMulti:Pe,backspaceRemovesValue:Q}))}}S.contextType=l.Ni,S.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class M extends r.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:A}=this.props;A&&A(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:A}=this.props;A&&A(),this.setState({isOpenInternal:!1})}}render(){const{children:A,isOpen:O,tooltipContent:N}=this.props,{isOpenInternal:o}=this.state;let w;return(o||O)&&(w=!1),N?r.createElement(h.u,{show:w,content:N,placement:"bottom"},r.createElement("div",null,A(this.onOpenMenu,this.onCloseMenu))):r.createElement("div",null,A(this.onOpenMenu,this.onCloseMenu))}}const R=null},35829:(X,L,e)=>{"use strict";e.d(L,{r:()=>y});var t=e(86832),n=e.n(t),r=e(39953),a=e(39285),i=e(69865);class y extends r.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=l=>{l.stopPropagation(),this.props.onChange(l)}}render(){const{labelClass:l="",switchClass:d="",label:f,checked:m,disabled:u,transparent:h,className:C,tooltip:x,tooltipPlacement:b}=this.props,g=this.state.id,p=`gf-form-label ${l} ${h?"gf-form-label--transparent":""} pointer`,v=`gf-form-switch ${d} ${h?"gf-form-switch--transparent":""}`;return r.createElement("div",{className:"gf-form-switch-container-react"},r.createElement("label",{htmlFor:g,className:`gf-form gf-form-switch-container ${C||""}`},f&&r.createElement("div",{className:p},f,x&&r.createElement(i.u,{placement:b||"auto",content:x,theme:"info"},r.createElement(a.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}}))),r.createElement("div",{className:v},r.createElement("input",{disabled:u,id:g,type:"checkbox",checked:m,onChange:this.internalOnChange}),r.createElement("span",{className:"gf-form-switch__slider"}))))}}},96276:(X,L,e)=>{"use strict";e.d(L,{D:()=>i});var t=e(41407),n=e(39953),r=e(82803);const a=y=>({legend:(0,t.css)({fontSize:y.typography.h3.fontSize,fontWeight:y.typography.fontWeightRegular,margin:y.spacing(0,0,2,0)})}),i=({children:y,className:c,...l})=>{const d=(0,r.wW)(a);return n.createElement("legend",{className:(0,t.cx)(d.legend,c),...l},y)}},20454:(X,L,e)=>{"use strict";e.d(L,{S:()=>u});var t=e(41407),n=e(86832),r=e(39953),a=e(17393),i=e(82803),y=e(39285),c=e(64084),l=e(53039),d=e(15530);const f=r.forwardRef(({children:C,active:x=!1,disabled:b=!1,size:g="md",onChange:p,onClick:v,id:E,name:P=void 0,description:S,fullWidth:M,"aria-label":R},I)=>{const A=(0,i.l4)(),O=m(A,g,M);return r.createElement(r.Fragment,null,r.createElement("input",{type:"radio",className:O.radio,onChange:p,onClick:v,disabled:b,id:E,checked:x,name:P,"aria-label":R||S,ref:I}),r.createElement("label",{className:O.radioLabel,htmlFor:E,title:S||R},C))});f.displayName="RadioButton";const m=(0,c.B)((C,x,b)=>{const{fontSize:g,height:p,padding:v}=(0,d.iL)(x,C),E=C.colors.text.secondary,P=C.colors.text.primary,S=p*C.spacing.gridSize-4-2;return{radio:(0,t.css)({position:"absolute",opacity:0,zIndex:-1e3,"&:checked + label":{color:C.colors.text.primary,fontWeight:C.typography.fontWeightMedium,background:C.colors.action.selected,zIndex:3},"&:focus + label, &:focus-visible + label":(0,l.getFocusStyles)(C),"&:focus:not(:focus-visible) + label":(0,l.getMouseFocusStyles)(C),"&:disabled + label":{color:C.colors.text.disabled,cursor:"not-allowed"}}),radioLabel:(0,t.css)({display:"inline-block",position:"relative",fontSize:g,height:`${S}px`,lineHeight:`${S}px`,color:E,padding:C.spacing(0,v),borderRadius:C.shape.radius.default,background:C.colors.background.primary,cursor:"pointer",zIndex:1,flex:b?"1 0 0":"none",textAlign:"center",userSelect:"none",whiteSpace:"nowrap","&:hover":{color:P}})}});function u({options:C,value:x,onChange:b,onClick:g,disabled:p,disabledOptions:v,size:E="md",id:P,className:S,fullWidth:M=!1,autoFocus:R=!1,"aria-label":I,invalid:A=!1}){const O=(0,r.useCallback)(_=>()=>{b&&b(_.value)},[b]),N=(0,r.useCallback)(_=>()=>{g&&g(_.value)},[g]),o=P??(0,n.uniqueId)("radiogroup-"),w=(0,r.useRef)(o),K=(0,i.wW)(h),V=(0,r.useRef)(null);return(0,r.useEffect)(()=>{R&&V.current&&V.current.focus()},[R]),r.createElement("div",{role:"radiogroup","aria-label":I,className:(0,t.cx)(K.radioGroup,M&&K.fullWidth,S)},C.map((_,U)=>{const $=v&&_.value&&v.includes(_.value),k=_.icon?(0,a.iJ)(_.icon):void 0,H=!!(_.imgUrl||_.label||_.component);return r.createElement(f,{size:E,disabled:$||p,active:x===_.value,key:`o.label-${U}`,"aria-label":_.ariaLabel,onChange:O(_),onClick:N(_),id:`option-${_.value}-${o}`,name:w.current,description:_.description,fullWidth:M,ref:x===_.value?V:void 0},k&&r.createElement(y.J,{name:k,className:(0,t.cx)(H&&K.icon)}),_.imgUrl&&r.createElement("img",{src:_.imgUrl,alt:_.label,className:K.img}),_.label," ",_.component?r.createElement(_.component,null):null)}))}u.displayName="RadioButtonGroup";const h=C=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${C.components.input.borderColor}`,borderRadius:C.shape.radius.default,padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:(0,t.css)({marginRight:"6px"}),img:(0,t.css)({width:C.spacing(2),height:C.spacing(2),marginRight:C.spacing(1)}),invalid:(0,t.css)({border:`1px solid ${C.colors.error.border}`})})},41641:(X,L,e)=>{"use strict";e.d(L,{x:()=>c});var t=e(41407),n=e(86832),r=e(39953),a=e(82803);const i=({id:d,name:f,label:m,checked:u,value:h,disabled:C,description:x,onChange:b})=>{const g=(0,a.wW)(y);return r.createElement("label",{title:x,className:g.label},r.createElement("input",{id:d,name:f,type:"radio",checked:u,value:h,disabled:C,className:g.input,onChange:()=>b&&b(d)}),r.createElement("div",null,m,x&&r.createElement("div",{className:g.description},x)))},y=d=>({input:(0,t.css)({position:"relative",appearance:"none",outline:"none",backgroundColor:d.colors.background.canvas,width:`${d.spacing(2)} !important`,height:d.spacing(2),border:`1px solid ${d.colors.border.medium}`,borderRadius:d.shape.radius.circle,margin:"3px 0",":checked":{backgroundColor:d.v1.palette.white,border:`5px solid ${d.colors.primary.main}`},":disabled":{backgroundColor:`${d.colors.action.disabledBackground} !important`,borderColor:d.colors.border.weak},":disabled:checked":{border:`1px solid ${d.colors.border.weak}`},":disabled:checked::after":{content:'""',width:"6px",height:"6px",backgroundColor:d.colors.text.disabled,borderRadius:d.shape.radius.circle,display:"inline-block",position:"absolute",top:"4px",left:"4px"},":focus":{outline:"none !important",boxShadow:`0 0 0 1px ${d.colors.background.canvas}, 0 0 0 3px ${d.colors.primary.main}`}}),label:(0,t.css)({fontSize:d.typography.fontSize,lineHeight:"22px",display:"grid",gridTemplateColumns:`${d.spacing(2)} auto`,gap:d.spacing(1)}),description:(0,t.css)({fontSize:d.typography.size.sm,color:d.colors.text.secondary})});function c({name:d,id:f,options:m,value:u,onChange:h,className:C,disabled:x,disabledOptions:b=[]}){const g=(0,a.wW)(l),p=f??(0,n.uniqueId)("radiogroup-list-");return r.createElement("div",{id:f,className:(0,t.cx)(g.container,C),role:"radiogroup"},m.map((v,E)=>{const P=`${p}-${E}`,S=u&&u===v.value,M=x||b.some(I=>I===v.value),R=()=>h&&v.value&&h(v.value);return r.createElement(i,{key:E,id:P,name:d,label:v.label,description:v.description,checked:S,value:v.value,disabled:M,onChange:R})}))}const l=d=>({container:(0,t.css)({display:"grid",gap:d.spacing(1)})})},15530:(X,L,e)=>{"use strict";e.d(L,{GL:()=>r,RK:()=>a,ht:()=>y,iL:()=>l,nf:()=>i});var t=e(41407),n=e(53039);const r=d=>(0,t.css)({"&:focus":(0,n.getFocusStyles)(d)}),a=(d,f=!1)=>{const m=f?d.colors.error.border:d.components.input.borderColor,u=f?d.colors.error.shade:d.components.input.borderHover,h=d.components.input.background,C=d.components.input.text,x=d.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(i(d),(0,t.css)({background:h,lineHeight:d.typography.body.lineHeight,fontSize:d.typography.size.md,color:C,border:`1px solid ${m}`,"&:-webkit-autofill, &:-webkit-autofill:hover":{boxShadow:`inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${h}!important`,WebkitTextFillColor:`${C} !important`,borderColor:x},"&:-webkit-autofill:focus":{boxShadow:`0 0 0 2px ${d.colors.background.primary}, 0 0 0px 4px ${d.colors.primary.main}, inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${h}!important`,WebkitTextFillColor:`${C} !important`},"&:hover":{borderColor:u},"&:focus":{outline:"none"},"&:disabled":{backgroundColor:d.colors.action.disabledBackground,color:d.colors.action.disabledText,border:`1px solid ${d.colors.action.disabledBackground}`,"&:hover":{borderColor:m}},"&::placeholder":{color:d.colors.text.disabled,opacity:1}}))},i=d=>(0,t.css)({padding:d.spacing(0,1,0,1)}),y=()=>({sm:(0,t.css)({width:c("sm")}),md:(0,t.css)({width:c("md")}),lg:(0,t.css)({width:c("lg")}),auto:(0,t.css)({width:c("auto")})}),c=d=>{switch(d){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function l(d,f){switch(d){case"sm":return{padding:1,fontSize:f.typography.size.sm,height:f.components.height.sm};case"lg":return{padding:3,fontSize:f.typography.size.lg,height:f.components.height.lg};case"md":default:return{padding:2,fontSize:f.typography.size.md,height:f.components.height.md}}}},78031:(X,L,e)=>{"use strict";e.d(L,{a:()=>x});var t=e(6033),n=e.n(t),r=e(39953),a=e(83502),i=e(35664),y=e(60695),c=e(34547),l=e(76297),d=e(4919),f=e(97898),m=e(49231);const u={mode:y.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function h(b,g,p,v){const E=p!=null,P=v===c.wm.Vertical?g:b,S=Math.min(P*.15/1.5,20),M=S*1.5,R=E?g-M:g,I=Math.min(R,b);return{showLabel:E,gaugeHeight:I,titleFontSize:S}}function C(b,g,p,v){if(g.color?.mode!==f.S.Thresholds)return[{value:g.min??i.Hx,color:p.color??f.R}];const E=g.thresholds??u,P=E.mode===y.H.Percentage,S=E.steps;let M=g.min??i.Hx,R=g.max??i.Z3;P&&(M=0,R=100);const I=(0,m.m1)(M,S),A=(0,m.m1)(R,S),O=[{value:+M.toFixed(b),color:v.visualization.getColorByName(I.color)}];let N=!0;for(let o=0;o<S.length;o++){const w=S[o];if(N){I===w&&(N=!1);continue}const K=S[o-1];if(O.push({value:w.value,color:v.visualization.getColorByName(K.color)}),w===A)break}return O.push({value:+R.toFixed(b),color:v.visualization.getColorByName(A.color)}),O}class x extends r.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:g,value:p,height:v,onClick:E,text:P,theme:S,orientation:M}=this.props,R=h(g,v,p.title,M),I=M===c.wm.Vertical?`${R.gaugeHeight}px`:"100%",A=r.createElement("div",{style:{height:`${R.gaugeHeight}px`,width:I},ref:O=>this.canvasElement=O});return r.createElement(r.Fragment,null,E?r.createElement("button",{className:(0,d.gN)(S),type:"button",onClick:E},A):A,R.showLabel&&r.createElement("div",{style:{textAlign:"center",fontSize:P?.titleSize??R.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:I,top:"-4px",cursor:"default"}},p.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:g,showThresholdLabels:p,showThresholdMarkers:v,width:E,height:P,theme:S,value:M,orientation:R}=this.props,I=h(E,P,M.title),A=R===c.wm.Vertical?I.gaugeHeight:E,O=Math.min(A,I.gaugeHeight),N=S.colors.background.secondary,o=p?1.5:1,w=Math.min(O/5.5,40)/o,K=w/5,V=(0,a.zc)(M),U=Math.min(A,O*1.3)*.9-((w+(v?K:0)+(p?10:0))*2+10),$=this.props.text?.valueSize??(0,l.MX)(V,U,O,1,w*1.7),k=Math.max($/2.5,12);let H=g.min??i.Hx,j=g.max??i.Z3,z=M.numeric;g.thresholds?.mode===y.H.Percentage&&(H=0,j=100,M.percent===void 0?z=(z-H)/(j-H)*100:z=M.percent*100);const F=g.decimals===void 0?2:g.decimals;v&&(H=+H.toFixed(F),j=+j.toFixed(F));const J={series:{gauges:{gauge:{min:H,max:j,neutralValue:g.custom?.neutral,background:{color:N},border:{color:null},shadow:{show:!1},width:w},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:C(F,g,M,S),label:{show:p,margin:K+1,font:{size:k}},show:v,width:K},value:{color:M.color,formatter:()=>V,font:{size:$,family:S.typography.fontFamily}},show:!0}}},Q={data:[[0,z]],label:M.title};try{this.canvasElement&&n().plot(this.canvasElement,[Q],J)}catch(Z){console.error("Gauge rendering error",Z,J,M)}}render(){return r.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}x.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:u}}},27199:(X,L,e)=>{"use strict";e.d(L,{k:()=>b});var t=e(6033),n=e.n(t),r=e(86832),a=e(39953),i=e(2906),y=e(34547),c=e(49621),l=e(84415),d=e(55987),f=e(38913);const m=({dimensions:p,activeDimensions:v,pos:E,timeZone:P})=>{let S=null;if(v.xAxis===null)return null;v.yAxis&&(S=v.yAxis[0]);const M=v.xAxis[1]?(0,i.jC)(p.xAxis,v.xAxis[0],v.xAxis[1]):E.x,R=(0,f.wu)(p.yAxis.columns,p.xAxis.columns,M,P),I=R.time,A=R.results.map((O,N)=>({color:O.color,label:O.label,value:O.value,isActive:S===N}));return a.createElement(d.c,{series:A,timestamp:I})};m.displayName="MultiModeGraphTooltip";var u=e(83502),h=e(69330);const C=({dimensions:p,activeDimensions:v,timeZone:E})=>{if(v.yAxis===null||v.yAxis[1]===void 0||v.xAxis===null||v.xAxis[1]===void 0)return null;const P=(0,i.jC)(p.xAxis,v.xAxis[0],v.xAxis[1]),S=(0,i.$q)(p.xAxis,v.xAxis[0]),M=S.display?(0,u.zc)(S.display(P)):P,R=(0,i.$q)(p.yAxis,v.yAxis[0]),I=(0,i.jC)(p.yAxis,v.yAxis[0],v.yAxis[1]),A=R.display,O=A(I);return a.createElement(d.c,{series:[{color:O.color,label:(0,h.CZ)(R),value:(0,u.zc)(O)}],timestamp:M})};C.displayName="SingleModeGraphTooltip";const x=({mode:p=y.f3.Single,dimensions:v,activeDimensions:E,pos:P,timeZone:S})=>!E||!E.xAxis?null:p==="single"?a.createElement(C,{dimensions:v,activeDimensions:E,timeZone:S}):a.createElement(m,{dimensions:v,activeDimensions:E,pos:P,timeZone:S});x.displayName="GraphTooltip";class b extends a.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.$element=null,this.onPlotSelected=(v,E)=>{const{onHorizontalRegionSelected:P}=this.props;P&&P(E.xaxis.from,E.xaxis.to)},this.onPlotHover=(v,E,P)=>{this.setState({isTooltipVisible:!0,activeItem:P,pos:E})},this.onPlotClick=(v,E,P)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:P,contextPos:E})},this.renderTooltip=()=>{const{children:v,series:E,timeZone:P}=this.props,{pos:S,activeItem:M,isTooltipVisible:R}=this.state;let I;if(!R||!S||E.length===0||(a.Children.forEach(v,U=>{if(I)return;(U&&U.type&&(U.type.displayName||U.type.name))===c.I.displayName&&(I=U)}),!I))return null;const A=I.props,O=A.mode||"single";if(!M&&O==="single")return null;const N=A.tooltipComponent||x,o=M?M.series.seriesIndex:0,w=M?M.dataIndex:void 0,K={xAxis:[o,w],yAxis:M?[M.series.seriesIndex,M.dataIndex]:null},V={dimensions:{xAxis:(0,i.q2)("xAxis",E.map(U=>U.timeField)),yAxis:(0,i.q2)("yAxis",E.map(U=>U.valueField))},activeDimensions:K,pos:S,mode:A.mode||y.f3.Single,timeZone:P},_=a.createElement(N,{...V});return a.cloneElement(I,{content:_,position:{x:S.pageX,y:S.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:v}=this.props,{contextPos:E,contextItem:P,isContextVisible:S}=this.state;if(!S||!E||!P||v.length===0)return null;const M=P?P.series.seriesIndex:0,R=P?P.dataIndex:void 0,I={xAxis:[M,R],yAxis:P?[P.series.seriesIndex,P.dataIndex]:null},A={xAxis:(0,i.q2)("xAxis",v.map(w=>w.timeField)),yAxis:(0,i.q2)("yAxis",v.map(w=>w.valueField))},O=()=>this.setState({isContextVisible:!1}),N=()=>({datapoint:P.datapoint,dataIndex:P.dataIndex,series:P.series,seriesIndex:P.series.seriesIndex,pageX:E.pageX,pageY:E.pageY}),o={x:E.pageX,y:E.pageY,onClose:O,getContextMenuSource:N,timeZone:this.props.timeZone,dimensions:A,contextDimensions:I};return a.createElement(l.w,{...o})},this.getBarWidth=()=>{const{series:v}=this.props;return Math.min(...v.map(E=>E.timeStep))}}componentDidUpdate(v,E){v!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(v){return v.length===0?[{show:!0,min:-1,max:1}]:(0,r.uniqBy)(v.map(E=>{const P=E.yAxis?E.yAxis.index:1,S=E.yAxis&&E.yAxis.min&&!isNaN(E.yAxis.min)?E.yAxis.min:null,M=E.yAxis&&E.yAxis.tickDecimals&&!isNaN(E.yAxis.tickDecimals)?E.yAxis.tickDecimals:null;return{show:!0,index:P,position:P===1?"left":"right",min:S,tickDecimals:M}}),E=>E.index)}draw(){if(this.element===null)return;const{width:v,series:E,timeRange:P,showLines:S,showBars:M,showPoints:R,isStacked:I,lineWidth:A,timeZone:O,onHorizontalRegionSelected:N}=this.props;if(!v)return;const o=v/100,w=P.from.valueOf(),K=P.to.valueOf(),V=this.getYAxes(E),_={legend:{show:!1},series:{stack:I,lines:{show:S,lineWidth:A,zero:!1},points:{show:R,fill:1,fillColor:!1,radius:2},bars:{show:M,fill:1,barWidth:M?this.getBarWidth()/1.5:1,zero:!1,lineWidth:A},shadowSize:0},xaxis:{timezone:O,show:!0,mode:"time",min:w,max:K,label:"Datetime",ticks:o,timeformat:(0,f.mc)(o,w,K),tickFormatter:f.sV},yaxes:V,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:N?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,E.filter(U=>U.isVisible),_)}catch(U){throw console.error("Graph rendering error",U,_,E),new Error("Error rendering panel")}}render(){const{ariaLabel:v,height:E,width:P,series:S}=this.props,M=S.length===0,R=this.renderTooltip(),I=this.renderContextMenu();return a.createElement("div",{className:"graph-panel","aria-label":v},a.createElement("div",{className:"graph-panel__chart",ref:A=>this.element=A,style:{height:E,width:P},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),M&&a.createElement("div",{className:"datapoints-warning"},"No data"),R,I)}}b.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const g=null},84415:(X,L,e)=>{"use strict";e.d(L,{b:()=>h,w:()=>u});var t=e(41407),n=e(39953),r=e(2906),a=e(48069),i=e(82803),y=e(53790),c=e(6430),l=e(12223),d=e(43078),f=e(85001),m=e(67611);const u=({getContextMenuSource:x,timeZone:b,itemsGroup:g,dimensions:p,contextDimensions:v,...E})=>{const P=x(),S=g?g.map(I=>({...I,items:I.items?.filter(A=>A.label)})):[],M=()=>{if(!P)return null;let I;if(p?.yAxis&&v?.yAxis?.[1]){const O=(0,r.jC)(p.yAxis,v.yAxis[0],v.yAxis[1]),N=P.series.valueField.display;I=N(O)}const A=(0,a.dq)(P.datapoint[0],{defaultWithMS:P.series.hasMsResolution,timeZone:b});return n.createElement(h,{timestamp:A,seriesColor:P.series.color,displayName:P.series.alias||P.series.label,displayValue:I})},R=()=>S?.map((I,A)=>n.createElement(d.k,{key:`${I.label}${A}`,label:I.label},(I.items||[]).map(O=>n.createElement(f.s,{key:`${O.label}`,url:O.url,label:O.label,target:O.target,icon:O.icon,active:O.active,onClick:O.onClick}))));return n.createElement(y.x,{...E,renderMenuItems:R,renderHeader:M})},h=({timestamp:x,seriesColor:b,displayName:g,displayValue:p})=>{const v=(0,i.wW)(C);return n.createElement("div",{className:v.wrapper},n.createElement("strong",null,x),n.createElement(l.Lh,null,n.createElement("div",null,n.createElement(m.F,{color:b}),n.createElement("span",{className:v.displayName},g)),p&&n.createElement(c.W,{value:p})))};function C(x){return{wrapper:(0,t.css)({padding:x.spacing(.5,1),fontSize:x.typography.size.sm,zIndex:x.zIndex.tooltip}),displayName:(0,t.css)({whiteSpace:"nowrap",paddingLeft:x.spacing(.5)})}}},85574:(X,L,e)=>{"use strict";e.d(L,{U:()=>a});var t=e(86832),n=e.n(t),r=e(39953);class a extends r.Component{constructor(y){super(y),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:y.series}}componentDidUpdate(y){const{series:c}=this.props;(0,t.isEqual)(y.series,c)||this.setState({hiddenSeries:[],toggledSeries:c})}onSeriesToggle(y,c){const{series:l,onHiddenSeriesChanged:d}=this.props,{hiddenSeries:f}=this.state;if(c.ctrlKey||c.metaKey||c.shiftKey){const C=f.indexOf(y)>-1?f.filter(b=>b!==y):f.concat([y]),x=l.map(b=>({...b,isVisible:C.indexOf(b.label)===-1}));this.setState({hiddenSeries:C,toggledSeries:x},()=>d?d(C):void 0);return}const m=l.map(C=>C.label),u=f.length+1===m.length?[]:(0,t.difference)(m,[y]),h=l.map(C=>({...C,isVisible:u.indexOf(C.label)===-1}));this.setState({hiddenSeries:u,toggledSeries:h},()=>d?d(u):void 0)}render(){const{children:y}=this.props,{toggledSeries:c}=this.state;return y({onSeriesToggle:this.onSeriesToggle,toggledSeries:c})}}},19032:(X,L,e)=>{"use strict";e.d(L,{U:()=>d});var t=e(41407),n=e(39953),r=e(64084),a=e(64447),i=e(78832),y=e(27199);const c=(0,r.B)(({placement:f})=>({wrapper:(0,t.css)({display:"flex",flexDirection:f==="bottom"?"column":"row"}),graphContainer:(0,t.css)({minHeight:"65%",flexGrow:1}),legendContainer:(0,t.css)({padding:"10px 0",maxHeight:f==="bottom"?"35%":"none"})})),l=(f,m=!1,u=!1)=>{const h=f.reduce((x,b)=>x+(b[1]||0),0)===0,C=!f.reduce((x,b)=>x&&b[1]!==null,!0);return m&&C||u&&h},d=f=>{const{series:m,timeRange:u,width:h,height:C,showBars:x,showLines:b,showPoints:g,sortLegendBy:p,sortLegendDesc:v,legendDisplayMode:E,legendVisibility:P,placement:S,onSeriesToggle:M,onToggleSort:R,hideEmpty:I,hideZero:A,isStacked:O,lineWidth:N,onHorizontalRegionSelected:o,timeZone:w,children:K,ariaLabel:V}=f,{graphContainer:_,wrapper:U,legendContainer:$}=c(f),k=m.reduce((H,j)=>l(j.data,I,A)?H:H.concat([{label:j.label,color:j.color||"",disabled:!j.isVisible,yAxis:j.yAxis.index,getDisplayValues:()=>j.info||[]}]),[]);return n.createElement("div",{className:U,"aria-label":V},n.createElement("div",{className:_},n.createElement(y.k,{series:m,timeRange:u,timeZone:w,showLines:b,showPoints:g,showBars:x,width:h,height:C,isStacked:O,lineWidth:N,onHorizontalRegionSelected:o},K)),P&&n.createElement("div",{className:$},n.createElement(a.$,{hideHorizontalTrack:!0},n.createElement(i.l,{items:k,displayMode:E,placement:S,sortBy:p,sortDesc:v,onLabelClick:(H,j)=>{M&&M(H.label,j)},onToggleSort:R}))))}},38913:(X,L,e)=>{"use strict";e.d(L,{mc:()=>l,sV:()=>c,wu:()=>y});var t=e(83502),n=e(69330),r=e(48069),a=e(47330);const i=(d,f)=>{let m=0,u=d.values.length-1,h;for(;;){if(m>u)return Math.max(u,0);h=Math.floor((m+u)/2);const C=d.values[h];if(C===f)return h;C&&C<f?m=h+1:u=h-1}},y=(d,f,m,u)=>{let h,C,x,b,g;const p=[];let v,E;for(h=0;h<d.length;h++){C=d[h];const P=f[h];x=i(P,m),b=m-P.values[x],g=P.values[x],(v===void 0||b>=0&&(b<v||v<0)||b<0&&b>v)&&(v=b,E=P.display?(0,t.zc)(P.display(g)):g);const S=C.display(C.values[x]);p.push({value:(0,t.zc)(S),datapointIndex:x,seriesIndex:h,color:S.color,label:(0,n.CZ)(C),time:P.display?(0,t.zc)(P.display(g)):g})}return{results:p,time:E}},c=(d,f)=>(0,r.dq)(d,{format:f?.options?.timeformat,timeZone:f?.options?.timezone}),l=(d,f,m)=>{if(f&&m&&d){const u=m-f,h=u/d/1e3,C=86400010,x=31536e6;return h<=10?a.U6.interval.millisecond:h<=45?a.U6.interval.second:u<=C?a.U6.interval.minute:h<=8e4?a.U6.interval.hour:u<=x?a.U6.interval.day:h<=31536e3?a.U6.interval.month:a.U6.interval.year}return a.U6.interval.minute}},42626:(X,L,e)=>{"use strict";e.d(L,{d:()=>b,j:()=>C});var t=e(39953),n=e(31544),r=e(63646),a=e(47125),i=e(86981),y=e(89591),c=e(36316),l=e(71519),d=e(31276),f=e(96248),m=e(79469),u=e(95966),h=e(76685);const C="__fixed";function x(g,p,v=[]){for(const E of v)if(typeof E=="function"){if(!E(g,p))return!1}else if(p[E]!==g[E])return!1;return!0}class b extends t.Component{constructor(p){super(p),this.panelContext={},this.subscription=new n.w0,this.getTimeRange=()=>this.props.timeRange;let v=this.prepState(p);v.alignedData=v.config.prepData([v.alignedFrame]),this.state=v,this.plotInstance=t.createRef()}prepState(p,v=!0){let E=null;const{frames:P,fields:S,preparePlotFrame:M}=p,I=(M||h.Rn)(P,S||{x:a.Ls.get(i.mi.firstTimeField).get({}),y:a.Ls.get(i.mi.byTypes).get(new Set([y.fS.number,y.fS.enum]))},p.timeRange);if((0,u.Zp)("GraphNG",!1,"data aligned",I),I){let A=this.state?.config;v&&(A=p.prepConfig(I,this.props.frames,this.getTimeRange),(0,u.Zp)("GraphNG",!1,"config prepared",A)),E={alignedFrame:I,config:A},(0,u.Zp)("GraphNG",!1,"data prepared",E.alignedData)}return E}handleCursorUpdate(p){const v=p.payload?.point?.time,E=this.plotInstance.current;if(E&&v){const P=E.valToPos(v,"x");let S;if(P&&(S=(0,u.ah)(E,E.posToIdx(P))),!S||!P)return;E.setCursor({left:P,top:S})}}componentDidMount(){this.panelContext=this.context;const{eventBus:p}=this.panelContext;this.subscription.add(p.getStream(c.es).pipe((0,r.p)(50)).subscribe({next:v=>{p!==v.origin&&this.handleCursorUpdate(v)}})),this.subscription.add(p.getStream(l.IA).pipe((0,r.p)(50)).subscribe({next:v=>this.handleCursorUpdate(v)})),this.subscription.add(p.getStream(c.xH).pipe((0,r.p)(50)).subscribe({next:()=>{const v=this.plotInstance?.current;v&&!v.cursor._lock&&v.setCursor({left:-10,top:-10})}}))}componentDidUpdate(p){const{frames:v,structureRev:E,timeZone:P,propsToDiff:S}=this.props,M=!x(p,this.props,S);if(v!==p.frames||M||P!==p.timeZone){let R=this.prepState(this.props,!1);R&&((this.state.config===void 0||P!==p.timeZone||E!==p.structureRev||!E||M)&&(R.config=this.props.prepConfig(R.alignedFrame,this.props.frames,this.getTimeRange),(0,u.Zp)("GraphNG",!1,"config recreated",R.config)),R.alignedData=R.config.prepData([R.alignedFrame]),this.setState(R))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:p,height:v,children:E,renderLegend:P}=this.props,{config:S,alignedFrame:M,alignedData:R}=this.state;return S?t.createElement(f.AY,{width:p,height:v,legend:P(S)},(I,A)=>t.createElement(m.N,{config:S,data:R,width:I,height:A,plotRef:O=>this.plotInstance.current=O},E?E(S,M):null)):null}}b.contextType=d.bb},71170:(X,L,e)=>{"use strict";e.d(L,{z:()=>r});var t=e(39953);const n=t.createContext({}),r=()=>{const{data:a,dimFields:i,mapSeriesIndexToDataFrameFieldIndex:y}=(0,t.useContext)(n),c=(0,t.useCallback)(()=>{const l=i.x;let d=null;for(let f=0;f<a.fields.length;f++)if(l(a.fields[f],a,[a])){d=a.fields[f];break}return d},[a,i]);return{dimFields:i,mapSeriesIndexToDataFrameFieldIndex:y,getXAxisField:c,alignedData:a}}},12714:(X,L,e)=>{"use strict";e.d(L,{w:()=>r});var t=e(76685);const n={threshold:(i,y,c)=>i+c,midpoint:(i,y,c)=>(i+y)/2,plusone:(i,y,c)=>i+1};function r(i){if(i.frame.length===0)return i.frame;let y=!0,{frame:c,refFieldName:l,refFieldPseudoMax:d,refFieldPseudoMin:f,insertMode:m}=i;m||(m=n.threshold);const u=(0,t.N$)(c,l);if(u==null)return c;u.state={...u.state,nullThresholdApplied:!0};const h=c.fields.map(x=>x.config.custom?.insertNulls||u.config.interval||null),C=new Set(h);if(C.delete(null),C.size===0)return c;if(C.size===1){const x=C.values().next().value;if(x<=0)return c;const b=u.values,g=c.fields.map(v=>v.values),p=a(b,g,x,f,d,m,y);return p===g?c:{...c,length:p[0].length,fields:c.fields.map((v,E)=>({...v,values:p[E]}))}}return c}function a(i,y,c,l=null,d=null,f,m){const u=i.length,h=[];if(l!=null&&l<i[0]){let g=Math.ceil((i[0]-l)/c),p=i[0]-g*c;for(;p<i[0];)h.push(f(p-c,p,c)),p+=c}h.push(i[0]);let C=i[0];for(let g=1;g<u;g++){const p=i[g];for(;p-C>c&&(h.push(f(C,p,c)),C+=c,!!m););h.push(p),C=p}if(d!=null&&d>C)for(;C+c<d;)h.push(f(C,d,c)),C+=c;const x=h.length;if(x===u)return y;const b=[];for(let g of y){let p;if(g!==i){p=Array(x);for(let v=0,E=0;v<x;v++)p[v]=i[E]===h[v]?g[E++]:null}else p=h;b.push(p)}return b}},69994:(X,L,e)=>{"use strict";e.d(L,{I:()=>t});function t(n){return{...n,fields:n.fields.map(r=>{const a=+r.config?.noValue;if(Number.isNaN(a))return r;{const i=r.values.slice();for(let y=0;y<i.length;y++)i[y]===null&&(i[y]=a);return{...r,values:i}}})}}},76685:(X,L,e)=>{"use strict";e.d(L,{z1:()=>m,N$:()=>l,Rn:()=>f});var t=e(89591),n=e(82837),r=e(34547),a=e(42626),i=e(12714);function y(h,C,x){let b,g;for(let p=0;p<C.length;p++)if(C[p]==null)g==null&&b!=null&&(g=p);else{if(g!=null){if(h[p]-b<x)for(;g<p;)C[g++]=void 0;g=null}b=h[p]}return C}function c(h){return h.type===t.fS.number&&h.config.custom?.drawStyle===r.l8.Bars&&!h.config.custom?.hideFrom?.viz}function l(h,C){return h.fields.find(x=>C!=null?x.name===C:x.type===t.fS.time)}function d(h,C){const x=l(h,C);let b=x?.values;for(let g=0;g<h.fields.length;g++){let p=h.fields[g];if(p===x||c(p))continue;let v=p.config.custom?.spanNulls;typeof v=="number"&&v!==-1&&b&&(p.values=y(b,p.values,v))}return h}function f(h,C,x){let b;e:for(let E of h)for(let P of E.fields)if(C.x(P,E,h)){b=P;break e}h=h.map(E=>b?.state?.nullThresholdApplied?E:(0,i.w)({frame:E,refFieldName:b.name,refFieldPseudoMin:x?.from.valueOf(),refFieldPseudoMax:x?.to.valueOf()}));let g=0;h.forEach(E=>{E.fields.forEach(P=>{c(P)&&(P.config.custom={...P.config.custom,spanNulls:-1},g++)})});let p=1/0;g>1&&h.forEach(E=>{if(!E.fields.some(c))return;const P=b.values;for(let S=0;S<P.length;S++)S>0&&(p=Math.min(p,P[S]-P[S-1]))});let v=(0,n._9)({frames:h,joinBy:C.x,keep:C.y,keepOriginIndices:!0});return v?(v=d(v,b.name),p!==1/0&&(v.fields.forEach((E,P)=>{let S=E.values;if(P===0){let M=S[S.length-1];S.push(M+p,M+2*p)}else c(E)?S.push(null,null):S.push(void 0,void 0)}),v.length+=2),v):null}function m(h,C){const x="na",b=`${h.min!==void 0?h.min:x}-${h.max!==void 0?h.max:x}`,g=`${h.custom?.axisSoftMin!==void 0?h.custom.axisSoftMin:x}-${h.custom?.axisSoftMax!==void 0?h.custom.axisSoftMax:x}`,p=`${h.custom?.axisPlacement!==void 0?h.custom?.axisPlacement:r.LB.Auto}`,v=h.unit??a.j,E=h.custom?.scaleDistribution?u(h.custom.scaleDistribution):r.wf.Linear,P=h.custom?.axisLabel?h.custom.axisLabel:x;return`${v}/${b}/${g}/${p}/${E}/${P}/${C}`}function u(h){return h.type===r.wf.Log?`${h.type}${h.log}`:h.type}},39285:(X,L,e)=>{"use strict";e.d(L,{J:()=>er});var t=e(41407),n=e(39953),r=e(66883),a=e(17393),i=e(82803),y=e(79161),c=e(94654),l=e(92431),d=e(62504),f=e(70726),m=e(30735),u=e(97048),h=e(43053),C=e(85295),x=e(41477),b=e(25173),g=e(89833),p=e(59658),v=e(85429),E=e(26925),P=e(22346),S=e(85334),M=e(10958),R=e(84060),I=e(92270),A=e(7803),O=e(26183),N=e(94526),o=e(49893),w=e(79691),K=e(35644),V=e(47255),_=e(76375),U=e(88921),$=e(59622),k=e(35988),H=e(63536),j=e(65976),z=e(69343),F=e(38958),J=e(95e3),Q=e(53505),Z=e(45299),ne=e(65774),ee=e(39239),de=e(53516),Pe=e(94149),ye=e(62373),he=e(42601),me=e(39295),De=e(19570),le=e(369),Ee=e(71942),be=e(97623),ge=e(7955),ue=e(41429),Ie=e(88447),ot=e(61501),Qe=e(47069),Me=e(48509),Ne=e(43305),qe=e(16584),bt=e(42644),Fe=e(79603),Ve=e(65291),Ue=e(45230),it=e(7835),ze=e(63050),Xe=e(62216),St=e(49024),Bt=e(67226),zt=e(49162),qt=e(88297),Qt=e(70973),yn=e(26055),Zt=e(56271),re=e(5810),Te=e(3408),We=e(67628),Je=e(50778),je=e(7274),pt=e(70471),ft=e(75603),Tt=e(21142),Ye=e(91196),Ce=e(48411),oe=e(16243),pe=e(78372),Re=e(8380),ae=e(48578),ve=e(83143),xe=e(18625),Ge=e(91157),at=e(24062),dt=e(35548),st=e(26407),Pt=e(23841),we=e(19827),Le=e(5386),Ke=e(60093),ht=e(69980),xt=e(50319),lt=e(67743),Rt=e(27207),Ut=e(7532),Xt=e(6127),$n=e(61449),Mt=e(79748),yt=e(80384),At=e(51164),Ht=e(58929),tn=e(98723),gn=e(90577),mn=e(52677),Tn=e(98851),ln=e(20323),Wn=e(2533),On=e(51284),Nn=e(63742),ia=e(35398),da=e(57710),Da=e(91290),ja=e(27714),Na=e(42148),Ha=e(1316),gt=e(39423),Ft=e(31277),jt=e(71580),an=e(71171),cn=e(98790),hn=e(36746),rn=e(4403),un=e(80579),nt=e(3802),Be=e(22465),et=e(11774),kt=e(98361),nn=e(45453),Pn=e(99703),pn=e(52370),In=e(34924),Qn=e(40159),Fn=e(76419),Ea=e(26216),ut=e(96864),vt=e(83507),Et=e(25119),It=e(95428),en=e(37917),Gt=e(72461),Ln=e(39228),jn=e(59619),zn=e(43743),qn=e(24099),Ia=e(55054),va=e(8),aa=e(3265),ta=e(13965),ha=e(6666),ma=e(38132),_a=e(97091),Qa=e(34604),Xa=e(75864),ts=e(28122),ga=e(48491),es=e(97612),bs=e(32411),vs=e(36319),Za=e(96861),cs=e(25169),ds=e(34052),gr=e(88175),Vs=e(36277),Xs=e(62695),rr=e(65023),qs=e(51433),or=e(46558);let oa=!1,Ra="public/img/icons/";function $t(ws,lr){r.V[Ra+lr]={content:ws,status:"loaded"}}function Ya(){oa=!0;const ws=typeof window<"u"&&window.__grafana_public_path__;ws&&(Ra=ws+"img/icons/"),$t(y,"unicons/at.svg"),$t(c,"unicons/adjust-circle.svg"),$t(l,"unicons/align-left.svg"),$t(d,"unicons/align-right.svg"),$t(f,"unicons/angle-double-down.svg"),$t(m,"unicons/angle-double-right.svg"),$t(u,"unicons/angle-down.svg"),$t(h,"unicons/angle-left.svg"),$t(C,"unicons/angle-right.svg"),$t(x,"unicons/angle-up.svg"),$t(b,"unicons/apps.svg"),$t(g,"unicons/arrow.svg"),$t(p,"unicons/arrow-down.svg"),$t(v,"unicons/arrow-from-right.svg"),$t(E,"unicons/arrow-left.svg"),$t(P,"unicons/arrow-random.svg"),$t(S,"unicons/arrow-right.svg"),$t(M,"unicons/arrow-to-right.svg"),$t(R,"unicons/arrow-up.svg"),$t(I,"unicons/arrows-h.svg"),$t(A,"unicons/backward.svg"),$t(O,"unicons/bars.svg"),$t(N,"unicons/bell.svg"),$t(o,"unicons/bell-slash.svg"),$t(w,"unicons/bolt.svg"),$t(K,"unicons/book.svg"),$t(V,"unicons/book-open.svg"),$t(_,"unicons/brackets-curly.svg"),$t(U,"unicons/bug.svg"),$t($,"unicons/building.svg"),$t(k,"unicons/calculator-alt.svg"),$t(H,"unicons/calendar-alt.svg"),$t(j,"unicons/calendar-slash.svg"),$t(z,"unicons/camera.svg"),$t(F,"unicons/channel-add.svg"),$t(J,"unicons/chart-line.svg"),$t(Q,"unicons/check.svg"),$t(Z,"unicons/check-circle.svg"),$t(ne,"unicons/circle.svg"),$t(ee,"unicons/clipboard-alt.svg"),$t(de,"unicons/clock-nine.svg"),$t(Pe,"unicons/cloud.svg"),$t(ye,"unicons/cloud-download.svg"),$t(he,"unicons/code-branch.svg"),$t(me,"unicons/cog.svg"),$t(De,"unicons/columns.svg"),$t(le,"unicons/comment-alt.svg"),$t(Ee,"unicons/comment-alt-share.svg"),$t(be,"unicons/comments-alt.svg"),$t(ge,"unicons/compass.svg"),$t(ue,"unicons/copy.svg"),$t(Ie,"unicons/corner-down-right-alt.svg"),$t(ot,"unicons/cube.svg"),$t(Qe,"unicons/dashboard.svg"),$t(Me,"unicons/database.svg"),$t(Ne,"unicons/document-info.svg"),$t(qe,"unicons/download-alt.svg"),$t(bt,"unicons/draggabledots.svg"),$t(Fe,"unicons/edit.svg"),$t(Ve,"unicons/ellipsis-v.svg"),$t(Ue,"unicons/ellipsis-h.svg"),$t(it,"unicons/envelope.svg"),$t(ze,"unicons/exchange-alt.svg"),$t(Xe,"unicons/exclamation-circle.svg"),$t(St,"unicons/exclamation-triangle.svg"),$t(Bt,"unicons/external-link-alt.svg"),$t(zt,"unicons/eye.svg"),$t(qt,"unicons/eye-slash.svg"),$t(Qt,"unicons/file-alt.svg"),$t(yn,"unicons/file-blank.svg"),$t(Zt,"unicons/filter.svg"),$t(re,"unicons/folder.svg"),$t(Te,"unicons/folder-open.svg"),$t(We,"unicons/folder-plus.svg"),$t(Je,"unicons/folder-upload.svg"),$t(je,"unicons/forward.svg"),$t(pt,"unicons/graph-bar.svg"),$t(ft,"unicons/history.svg"),$t(Tt,"unicons/history-alt.svg"),$t(Ye,"unicons/home-alt.svg"),$t(Ce,"unicons/import.svg"),$t(oe,"unicons/info.svg"),$t(pe,"unicons/info-circle.svg"),$t(Re,"unicons/k6.svg"),$t(ae,"unicons/key-skeleton-alt.svg"),$t(ve,"unicons/keyboard.svg"),$t(xe,"unicons/link.svg"),$t(Ge,"unicons/list-ul.svg"),$t(at,"unicons/lock.svg"),$t(dt,"unicons/minus.svg"),$t(st,"unicons/minus-circle.svg"),$t(Pt,"unicons/mobile-android.svg"),$t(we,"unicons/monitor.svg"),$t(Le,"unicons/pause.svg"),$t(Ke,"unicons/pen.svg"),$t(ht,"unicons/play.svg"),$t(xt,"unicons/plug.svg"),$t(lt,"unicons/plus.svg"),$t(Rt,"unicons/plus-circle.svg"),$t(Ut,"unicons/power.svg"),$t(Xt,"unicons/presentation-play.svg"),$t($n,"unicons/process.svg"),$t(Mt,"unicons/question-circle.svg"),$t(yt,"unicons/repeat.svg"),$t(At,"unicons/rocket.svg"),$t(Ht,"unicons/rss.svg"),$t(tn,"unicons/save.svg"),$t(gn,"unicons/search.svg"),$t(mn,"unicons/search-minus.svg"),$t(Tn,"unicons/search-plus.svg"),$t(ln,"unicons/share-alt.svg"),$t(Wn,"unicons/shield.svg"),$t(On,"unicons/signal.svg"),$t(Nn,"unicons/signin.svg"),$t(ia,"unicons/signout.svg"),$t(da,"unicons/sitemap.svg"),$t(Da,"unicons/slack.svg"),$t(ja,"unicons/sliders-v-alt.svg"),$t(Na,"unicons/sort-amount-down.svg"),$t(Ha,"unicons/sort-amount-up.svg"),$t(gt,"unicons/square-shape.svg"),$t(Ft,"unicons/star.svg"),$t(jt,"unicons/step-backward.svg"),$t(an,"unicons/sync.svg"),$t(cn,"unicons/stopwatch.svg"),$t(hn,"unicons/table.svg"),$t(rn,"unicons/tag-alt.svg"),$t(un,"unicons/times.svg"),$t(nt,"unicons/trash-alt.svg"),$t(Be,"unicons/unlock.svg"),$t(et,"unicons/upload.svg"),$t(kt,"unicons/user.svg"),$t(nn,"unicons/users-alt.svg"),$t(Pn,"unicons/wrap-text.svg"),$t(pn,"unicons/cloud-upload.svg"),$t(In,"unicons/credit-card.svg"),$t(Qn,"unicons/file-copy-alt.svg"),$t(Fn,"unicons/fire.svg"),$t(Ea,"unicons/hourglass.svg"),$t(ut,"unicons/layer-group.svg"),$t(vt,"unicons/layers-alt.svg"),$t(Et,"unicons/line-alt.svg"),$t(It,"unicons/list-ui-alt.svg"),$t(en,"unicons/message.svg"),$t(Gt,"unicons/palette.svg"),$t(Ln,"unicons/percentage.svg"),$t(jn,"unicons/shield-exclamation.svg"),$t(zn,"unicons/plus-square.svg"),$t(qn,"unicons/x.svg"),$t(Ia,"unicons/capture.svg"),$t(va,"custom/gf-grid.svg"),$t(aa,"custom/gf-landscape.svg"),$t(ta,"custom/gf-layout-simple.svg"),$t(ha,"custom/gf-portrait.svg"),$t(ma,"custom/gf-show-context.svg"),$t(_a,"custom/gf-bar-alignment-after.svg"),$t(Qa,"custom/gf-bar-alignment-before.svg"),$t(Xa,"custom/gf-bar-alignment-center.svg"),$t(ts,"custom/gf-interpolation-linear.svg"),$t(ga,"custom/gf-interpolation-smooth.svg"),$t(es,"custom/gf-interpolation-step-after.svg"),$t(bs,"custom/gf-interpolation-step-before.svg"),$t(vs,"custom/gf-logs.svg"),$t(Za,"custom/gf-movepane-left.svg"),$t(cs,"custom/gf-movepane-right.svg"),$t(ds,"mono/favorite.svg"),$t(gr,"mono/grafana.svg"),$t(Vs,"mono/heart.svg"),$t(Xs,"mono/heart-break.svg"),$t(rr,"mono/panel-add.svg"),$t(qs,"mono/library-panel.svg"),$t(or,"unicons/record-audio.svg")}var Ks=e(99268);const As=ws=>({container:(0,t.css)({label:"Icon",display:"inline-block",lineHeight:0}),icon:(0,t.css)({verticalAlign:"middle",display:"inline-block",fill:"currentColor"}),orange:(0,t.css)({fill:ws.v1.palette.orange})}),er=n.forwardRef(({size:ws="md",type:lr="default",name:Ls,className:Vr,style:Xr,title:Or="",...Nt},Jt)=>{const Yt=(0,i.wW)(As);if(Ls?.startsWith("fa fa-"))return n.createElement("i",{className:ir(Ls,Vr),...Nt,style:Xr});if(oa||Ya(),(0,a.Mo)(Ls)||console.warn("Icon component passed an invalid icon name",Ls),!Ls||Ls.includes(".."))return n.createElement("div",{ref:Jt},"invalid icon name");const vn=(0,Ks.B)(ws),An=vn,xn=Ls.startsWith("gf-bar-align")?16:Ls.startsWith("gf-interp")?30:vn,Un=(0,Ks.y)(Ls,lr),xa=`${Ra}${Un}/${Ls}.svg`;return n.createElement("div",{className:Yt.container,...Nt,ref:Jt},n.createElement(r.Z,{src:xa,width:xn,height:An,title:Or,className:(0,t.cx)(Yt.icon,Vr,lr==="mono"?{[Yt.orange]:Ls==="favorite"}:""),style:Xr}))});er.displayName="Icon";function ir(ws,lr){return(0,t.cx)(ws,{"fa-spin":ws==="fa fa-spinner"},lr)}},99268:(X,L,e)=>{"use strict";e.d(L,{B:()=>r,y:()=>n});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(a,i){return a?.startsWith("gf-")?"custom":t.includes(a)?"mono":i==="default"?"unicons":i==="solid"?"solid":"mono"}function r(a){switch(a){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},68497:(X,L,e)=>{"use strict";e.d(L,{h:()=>m});var t=e(41407),n=e(39953),r=e(14255),a=e(91249),i=e(82803),y=e(64084),c=e(53039),l=e(39285),d=e(99268),f=e(69865);const m=n.forwardRef((h,C)=>{const{size:x="md",variant:b="secondary"}=h,g=(0,i.l4)();let p;x==="xxl"||x==="xxxl"?((0,r.d)("IconButton",'size="xxl" and size="xxxl"','size="xl"'),p="xl"):p=x;const v=u(g,p,b);let E,P;if("tooltip"in h){const{tooltip:S}=h;E=typeof S=="string"?S:void 0}else if("ariaLabel"in h||"aria-label"in h){const{ariaLabel:S,["aria-label"]:M}=h;E=M||S,P=C}if("tooltip"in h){const{name:S,iconType:M,className:R,tooltip:I,tooltipPlacement:A,...O}=h;return n.createElement(f.u,{ref:C,content:I,placement:A},n.createElement("button",{...O,ref:P,"aria-label":E,className:(0,t.cx)(v.button,R),type:"button"},n.createElement(l.J,{name:S,size:p,className:v.icon,type:M})))}else{const{name:S,iconType:M,className:R,...I}=h;return n.createElement("button",{...I,ref:P,"aria-label":E,className:(0,t.cx)(v.button,R),type:"button"},n.createElement(l.J,{name:S,size:p,className:v.icon,type:M}))}});m.displayName="IconButton";const u=(0,y.B)((h,C,x)=>{const b=(0,d.B)(C)+h.spacing.gridSize;let g=h.colors.text.primary;return x==="primary"?g=h.colors.primary.text:x==="destructive"&&(g=h.colors.error.text),{button:(0,t.css)({zIndex:0,position:"relative",margin:`0 ${h.spacing.x0_5} 0 0`,boxShadow:"none",border:"none",display:"inline-flex",background:"transparent",justifyContent:"center",alignItems:"center",padding:0,color:g,"&[disabled], &:disabled":{cursor:"not-allowed",color:h.colors.action.disabledText,opacity:.65},"&:before":{zIndex:-1,position:"absolute",opacity:0,width:`${b}px`,height:`${b}px`,borderRadius:h.shape.radius.default,content:'""',transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionProperty:"opacity"},"&:focus, &:focus-visible":(0,c.getFocusStyles)(h),"&:focus:not(:focus-visible)":(0,c.getMouseFocusStyles)(h),"&:hover":{"&:before":{backgroundColor:x==="secondary"?h.colors.action.hover:a.alpha(g,.12),opacity:1}}}),icon:(0,t.css)({verticalAlign:"baseline"})}})},5217:(X,L,e)=>{"use strict";e.d(L,{Z:()=>c,a:()=>d});var t=e(41407),n=e(39953),r=e(96083),a=e(82803),i=e(12608),y=e(7429);const c=n.memo(n.forwardRef(({title:m,featureState:u,...h},C)=>{const x=(0,a.wW)(l),b=u?n.createElement(n.Fragment,null,n.createElement("div",{className:x.badge},n.createElement(d,{featureState:u})),n.createElement("h3",null,m)):n.createElement("h3",null,m);return n.createElement(y.v,{branded:!0,title:b,urlTitle:"Read documentation",ref:C,...h})}));c.displayName="FeatureInfoBox";const l=m=>({badge:(0,t.css)({marginBottom:m.spacing(1)})}),d=({featureState:m,tooltip:u})=>{const h=f(m);return n.createElement(i.C,{text:h.text,color:h.color,icon:h.icon,tooltip:u})};function f(m){switch(m){case r.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},7429:(X,L,e)=>{"use strict";e.d(L,{v:()=>c});var t=e(41407),n=e(39953),r=e(82803),a=e(64084),i=e(33155),y=e(39285);const c=n.memo(n.forwardRef(({title:d,className:f,children:m,branded:u,url:h,urlTitle:C,onDismiss:x,severity:b="info",...g},p)=>{const v=(0,r.wW)(l);return n.createElement(i.b,{severity:b,className:f,...g,ref:p,title:d},n.createElement("div",null,m),h&&n.createElement("a",{href:h,className:(0,t.cx)("external-link",v.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(y.J,{name:"book"})," ",C||"Read more"))}));c.displayName="InfoBox";const l=(0,a.B)(d=>({docsLink:(0,t.css)({display:"inline-block",marginTop:d.spacing(2)})}))},99560:(X,L,e)=>{"use strict";e.d(L,{K:()=>c});var t=e(41407),n=e(39953),r=e(76941),a=e(82803),i=e(39285),y=e(70393);function c({referenceElement:u,children:h,suffixIcon:C,placement:x,alternativePlacement:b}){const[g,p]=(0,n.useState)(null),[v,E]=(0,n.useState)(x),P=(0,r.D)(u,g,{placement:v}),S=(0,a.wW)(l),M=(0,a.wW)(m);return n.useEffect(()=>{b&&d(x,g,u)&&E(b)},[b,x,g,u]),n.createElement(y.h_,null,n.createElement("div",{style:{display:"inline-block",...P.styles.popper},...P.attributes.popper,ref:p,"aria-live":"polite"},n.createElement("span",{className:(0,t.cx)(S.root,M[v])},h&&n.createElement("span",null,h),C&&n.createElement(i.J,{name:C}))))}const l=u=>({root:(0,t.css)({...u.typography.bodySmall,willChange:"transform",background:u.components.tooltip.background,color:u.components.tooltip.text,padding:u.spacing(.5,1.5),borderRadius:u.shape.radius.pill,display:"inline-flex",gap:u.spacing(.5),alignItems:"center"})}),d=(u,h,C)=>{const x=h?.getBoundingClientRect(),b=C?.getBoundingClientRect();if(!x||!b)return!1;switch(u){case"right":return x.width+b.right>window.innerWidth;case"bottom":return x.height+b.bottom>window.innerHeight;case"left":return b.left-x.width<0;case"top":return b.top-x.height<0;default:return!1}},f=(u,h)=>(0,t.keyframes)({from:{opacity:0,transform:`translate(${u}, ${h})`},to:{opacity:1,transform:"translate(0, 0px)"}}),m=u=>{const C=f(0,u.spacing(1)),x=f(0,u.spacing(1*-1)),b=f(u.spacing(1),0),g=f(u.spacing(1*-1),0);return{top:(0,t.css)({marginBottom:u.spacing(1),animation:`${C} ease-out 100ms`}),bottom:(0,t.css)({marginTop:u.spacing(1),animation:`${x} ease-out 100ms`}),left:(0,t.css)({marginRight:u.spacing(1),animation:`${b} ease-out 100ms`}),right:(0,t.css)({marginLeft:u.spacing(1),animation:`${g} ease-out 100ms`})}}},28448:(X,L,e)=>{"use strict";e.d(L,{H:()=>a});var t=e(39953),n=e(76297),r=e(38637);const a=t.forwardRef((y,c)=>{const{defaultValue:l="",minWidth:d=10,maxWidth:f,onCommitChange:m,onKeyDown:u,onBlur:h,...C}=y,[x,b]=t.useState(l),[g,p]=t.useState(d);return(0,t.useEffect)(()=>{p(i(x.toString(),d,f))},[x,f,d]),t.createElement(r.I,{...C,ref:c,value:x.toString(),onChange:v=>{b(v.currentTarget.value)},width:g,onBlur:v=>{h?h(v):m&&m(v)},onKeyDown:v=>{u?u(v):v.key==="Enter"&&m&&m(v)},"data-testid":"autosize-input"})});function i(y,c,l){if(!y)return c;const d=3,f=(0,n.X1)(y.toString(),14).width/8+d;return c&&f<c?c:l&&f>l?l:f}a.displayName="AutoSizeInput"},38637:(X,L,e)=>{"use strict";e.d(L,{H:()=>d,I:()=>l});var t=e(41407),n=e(39953),r=e(15262),a=e(82803),i=e(64084),y=e(15530),c=e(28409);const l=n.forwardRef((f,m)=>{const{className:u,addonAfter:h,addonBefore:C,prefix:x,suffix:b,invalid:g,loading:p,width:v=0,...E}=f,[P,S]=(0,r.Z)(),[M,R]=(0,r.Z)(),I=(0,a.l4)(),A=d({theme:I,invalid:!!g,width:v});return n.createElement("div",{className:(0,t.cx)(A.wrapper,u),"data-testid":"input-wrapper"},!!C&&n.createElement("div",{className:A.addon},C),n.createElement("div",{className:A.inputWrapper},x&&n.createElement("div",{className:A.prefix,ref:P},x),n.createElement("input",{ref:m,className:A.input,...E,style:{paddingLeft:x?S.width+12:void 0,paddingRight:b||p?R.width+12:void 0}}),(b||p)&&n.createElement("div",{className:A.suffix,ref:M},p&&n.createElement(c.$,{className:A.loadingIndicator,inline:!0}),b)),!!h&&n.createElement("div",{className:A.addon},h))});l.displayName="Input";const d=(0,i.B)(({theme:f,invalid:m=!1,width:u})=>{const h="28px",C=(0,t.css)({position:"absolute",top:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,fontSize:f.typography.size.md,height:"100%",minWidth:h,color:f.colors.text.secondary});return{wrapper:(0,t.cx)((0,t.css)({label:"input-wrapper",display:"flex",width:u?f.spacing(u):"100%",height:f.spacing(f.components.height.md),borderRadius:f.shape.radius.default,"&:hover":{"> .prefix, .suffix, .input":{borderColor:m?f.colors.error.border:f.colors.primary.border},"input[type='number']":{appearance:"textfield"},"input[type='number']::-webkit-inner-spin-button, input[type='number']::-webkit-outer-spin-button":{WebkitAppearance:"inner-spin-button !important",opacity:1}}})),inputWrapper:(0,t.css)({label:"input-inputWrapper",position:"relative",flexGrow:1,zIndex:1,"&:not(:first-child):last-child":{"> input":{borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0}},"&:first-child:not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0}},"&:not(:first-child):not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderBottomLeftRadius:0}},input:{"&:not(:first-child)":{paddingLeft:h},"&:not(:last-child)":{paddingRight:h},"&[readonly]":{cursor:"default"}}}),input:(0,t.cx)((0,y.GL)(f),(0,y.RK)(f,m),(0,t.css)({label:"input-input",position:"relative",zIndex:0,flexGrow:1,borderRadius:f.shape.radius.default,height:"100%",width:"100%"})),inputDisabled:(0,t.css)({backgroundColor:f.colors.action.disabledBackground,color:f.colors.action.disabledText,border:`1px solid ${f.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}),addon:(0,t.css)({label:"input-addon",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:0,flexShrink:0,position:"relative","&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0,"> :last-child":{borderTopRightRadius:0,borderBottomRightRadius:0}},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0,"> :first-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"> *:focus":{zIndex:2}}),prefix:(0,t.cx)(C,(0,t.css)({label:"input-prefix",paddingLeft:f.spacing(1),paddingRight:f.spacing(.5),borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0})),suffix:(0,t.cx)(C,(0,t.css)({label:"input-suffix",paddingLeft:f.spacing(1),paddingRight:f.spacing(1),marginBottom:"-2px",borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0,right:0})),loadingIndicator:(0,t.css)({"& + *":{marginLeft:f.spacing(.5)}})}})},9006:(X,L,e)=>{"use strict";e.d(L,{g:()=>n});var t=e(14058);const n=t.Qr},94696:(X,L,e)=>{"use strict";e.d(L,{e:()=>b});var t=e(41407),n=e(86832),r=e(39953),a=e(41655),i=e(10694),y=e(82803),c=e(39285),l=e(39017),d=e(69865),f=e(68497);const m=(0,t.css)({display:"flex",alignItems:"center",height:"100%"});function u({row:E,__rowID:P}){return r.createElement("div",{className:m},r.createElement(f.h,{tooltip:"toggle row expanded","aria-controls":P,name:E.isExpanded?"angle-down":"angle-right","aria-expanded":E.isExpanded,...E.getToggleRowExpandedProps(),size:"lg"}))}const h="__expander";function C(E){return[{id:h,Cell:u,disableSortBy:!0,width:0},...E.map(P=>({id:P.id,accessor:P.id,Header:P.header||(()=>null),sortType:P.sortType||"alphanumeric",disableSortBy:!P.sortType,width:P.disableGrow?0:void 0,visible:P.visible,...P.cell&&{Cell:P.cell}}))]}const x=E=>{const P=E.colors.emphasize(E.colors.background.primary,.03);return{container:(0,t.css)({display:"flex",gap:E.spacing(2),flexDirection:"column",width:"100%",overflowX:"auto"}),table:(0,t.css)({borderRadius:E.shape.radius.default,width:"100%",td:{padding:E.spacing(1)},"td, th":{minWidth:E.spacing(3)}}),disableGrow:(0,t.css)({width:0}),header:(0,t.css)({borderBottom:`1px solid ${E.colors.border.weak}`,"&, & > button":{position:"relative",whiteSpace:"nowrap",padding:E.spacing(1)},"& > button":{"&:after":{content:'"\\00a0"'},width:"100%",height:"100%",background:"none",border:"none",paddingRight:E.spacing(2.5),textAlign:"left",fontWeight:E.typography.fontWeightMedium}}),row:(0,t.css)({label:"row",borderBottom:`1px solid ${E.colors.border.weak}`,"&:hover":{backgroundColor:P},"&:last-child":{borderBottom:0}}),expandedRow:(0,t.css)({label:"expanded-row-content",borderBottom:"none"}),expandedContentRow:(0,t.css)({label:"expanded-row-content",td:{borderBottom:`1px solid ${E.colors.border.weak}`,position:"relative",padding:E.spacing(2,2,2,5),"&:before":{content:'""',position:"absolute",width:"1px",top:0,left:"16px",bottom:E.spacing(2),background:E.colors.border.medium}}}),sortableHeader:(0,t.css)({"&&":{padding:0}})}};function b({className:E,columns:P,data:S,getRowId:M,headerTooltips:R,pageSize:I=0,renderExpandedRow:A,fetchData:O}){const N=(0,y.wW)(x),o=(0,r.useMemo)(()=>C(P),[P]),w=g(),K=(0,r.useCallback)(F=>`${w}-${F.id}`.replace(/\s/g,""),[w]),V=[a.useSortBy,a.useExpanded],_=I>0;_&&V.push(a.usePagination);const U=(0,a.useTable)({columns:o,data:S,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,manualSortBy:!!O,getRowId:M,initialState:{hiddenColumns:[!A&&h,...o.filter(F=>!(!F.visible||F.visible(S))).map(F=>F.id).filter(i.fQ)].filter(i.fQ)}},...V),{getTableProps:$,getTableBodyProps:k,headerGroups:H,prepareRow:j}=U,{sortBy:z}=U.state;return(0,r.useEffect)(()=>{O&&O({sortBy:z})},[z,O]),(0,r.useEffect)(()=>{_&&U.setPageSize(I)},[_,I,U.setPageSize,U]),r.createElement("div",{className:N.container},r.createElement("table",{...$(),className:(0,t.cx)(N.table,E)},r.createElement("thead",null,H.map(F=>{const{key:J,...Q}=F.getHeaderGroupProps();return r.createElement("tr",{key:J,...Q},F.headers.map(Z=>{const{key:ne,...ee}=Z.getHeaderProps(),de=R?.[Z.id];return r.createElement("th",{key:ne,className:(0,t.cx)(N.header,{[N.disableGrow]:Z.width===0,[N.sortableHeader]:Z.canSort}),...ee,...Z.isSorted&&{"aria-sort":Z.isSortedDesc?"descending":"ascending"}},r.createElement(v,{column:Z,headerTooltip:de}))}))})),r.createElement("tbody",{...k()},(_?U.page:U.rows).map(F=>{j(F);const{key:J,...Q}=F.getRowProps(),Z=K(F),ne=F.isExpanded;return r.createElement(r.Fragment,{key:J},r.createElement("tr",{...Q,className:(0,t.cx)(N.row,ne&&N.expandedRow)},F.cells.map(ee=>{const{key:de,...Pe}=ee.getCellProps();return r.createElement("td",{key:de,...Pe},ee.render("Cell",{__rowID:Z}))})),ne&&A&&r.createElement("tr",{...Q,id:Z,className:N.expandedContentRow},r.createElement("td",{colSpan:F.cells.length},A(F.original))))}))),_&&r.createElement("span",null,r.createElement(l.t,{currentPage:U.state.pageIndex+1,numberOfPages:U.pageOptions.length,onNavigate:F=>U.gotoPage(F-1)})))}const g=()=>(0,r.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),p=E=>({sortIcon:(0,t.css)({position:"absolute",top:E.spacing(1)}),headerTooltipIcon:(0,t.css)({marginLeft:E.spacing(.5)})});function v({column:{canSort:E,render:P,isSorted:S,isSortedDesc:M,getSortByToggleProps:R},headerTooltip:I}){const A=(0,y.wW)(p),{onClick:O}=R(),N=r.createElement(r.Fragment,null,P("Header"),I&&r.createElement(d.u,{theme:"info-alt",content:I.content,placement:"top-end"},r.createElement(c.J,{className:A.headerTooltipIcon,name:I.iconName||"info-circle","data-testid":"header-tooltip-icon"})),S&&r.createElement("span",{"aria-hidden":"true",className:A.sortIcon},r.createElement(c.J,{name:M?"angle-down":"angle-up"})));return E?r.createElement("button",{type:"button",onClick:O},N):N}},19649:(X,L,e)=>{"use strict";e.d(L,{g:()=>r});var t=e(39953),n=e(72202);class r extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:i,config:y,open:c,onDidRender:l}=this.props,d=this.wrapperRef.current,f=new n.u(i,c,y);d.hasChildNodes()?d.replaceChild(f.render(),d.lastChild):d.appendChild(f.render()),l&&l(f.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:i}=this.props;return t.createElement("div",{className:i,ref:this.wrapperRef})}}r.defaultProps={open:3,config:{animateOpen:!0}}},72202:(X,L,e)=>{"use strict";e.d(L,{u:()=>g});var t=e(86832);function n(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function r(p){return!!p&&typeof p==="object"}function a(p){if(p===void 0)return"";if(p===null||typeof p=="object"&&!p.constructor)return"Object";const E=/function ([^(]*)/.exec(p.constructor.toString());return E&&E.length>1?E[1]:""}function i(p){return p===null?"null":typeof p}function y(p,v){const E=i(p);return E==="null"||E==="undefined"?E:(E==="string"&&(v='"'+n(v)+'"'),E==="function"?p.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":v)}let c="";function l(p){return r(p)?(c=a(p),Array.isArray(p)&&(c+="["+p.length+"]")):c=y(p,p.toString()),c}function d(p){return`json-formatter-${p}`}function f(p,v,E){const P=document.createElement(p);return v&&P.classList.add(d(v)),E!==void 0&&(E instanceof Node?P.appendChild(E):P.appendChild(document.createTextNode(String(E)))),P}const m=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,u=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,h=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,C=10,x=typeof window<"u"&&window.requestAnimationFrame||(p=>(p(),0)),b={animateOpen:!0,animateClose:!0};class g{constructor(v,E=1,P=b,S){this.json=v,this.open=E,this.config=P,this.key=S,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(v){this._isOpen=v}get isDate(){return this.type==="string"&&(m.test(this.json)||h.test(this.json)||u.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return r(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return a(this.json)}get type(){return i(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(v=>v||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(d("open")))}openAtDepth(v=1){v<0||(this.open=v,this.isOpen=v!==0,this.element&&(this.removeChildren(!1),v===0?this.element.classList.remove(d("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(d("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const v=f("span");return v.appendChild(f("span","bracket","[")),this.isNumberArray()?(this.json.forEach((E,P)=>{P>0&&v.appendChild(f("span","array-comma",",")),v.appendChild(f("span","number",E))}),this.skipChildren=!0):v.appendChild(f("span","number",this.json.length)),v.appendChild(f("span","bracket","]")),v}render(v=!1){this.element=f("div","row");const E=f("a","toggler-link"),P=f("span","toggler");if(this.isObject&&E.appendChild(P),this.hasKey&&E.appendChild(f("span","key",`${this.key}:`)),this.isObject){const M=f("span","value"),R=f("span"),I=f("span","constructor-name",this.constructorName);if(R.appendChild(I),this.isArray){const A=this.renderArray();R.appendChild(A)}M.appendChild(R),E.appendChild(M)}else{const M=this.isUrl?f("a"):f("span");M.classList.add(d(this.type)),this.isDate&&M.classList.add(d("date")),this.isUrl&&(M.classList.add(d("url")),M.setAttribute("href",this.json));const R=y(this.json,this.json);M.appendChild(document.createTextNode(R)),E.appendChild(M)}const S=f("div","children");return this.isObject&&S.classList.add(d("object")),this.isArray&&S.classList.add(d("array")),this.isEmpty&&S.classList.add(d("empty")),this.config&&this.config.theme&&this.element.classList.add(d(this.config.theme)),this.isOpen&&this.element.classList.add(d("open")),v||this.element.appendChild(E),this.skipChildren?E.removeChild(P):this.element.appendChild(S),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&E.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(v=!1){const E=this.element&&this.element.querySelector(`div.${d("children")}`);if(!(!E||this.isEmpty))if(v){let P=0;const S=()=>{const M=this.keys[P],R=new g(this.json[M],this.open-1,this.config,M);E.appendChild(R.render()),P+=1,P<this.keys.length&&(P>C?S():x(S))};x(S)}else this.keys.forEach(P=>{const S=new g(this.json[P],this.open-1,this.config,P);E.appendChild(S.render())})}removeChildren(v=!1){const E=this.element&&this.element.querySelector(`div.${d("children")}`);if(v){let P=0;const S=()=>{E&&E.children.length&&(E.removeChild(E.children[0]),P+=1,P>C?S():x(S))};x(S)}else E&&(E.innerHTML="")}}},71974:(X,L,e)=>{"use strict";e.d(L,{x:()=>i});var t=e(41407),n=e(39953),r=e(82803),a=e(7894);const i=({children:d,margin:f,marginX:m,marginY:u,marginTop:h,marginBottom:C,marginLeft:x,marginRight:b,padding:g,paddingX:p,paddingY:v,paddingTop:E,paddingBottom:P,paddingLeft:S,paddingRight:M,display:R,backgroundColor:I,grow:A,shrink:O,borderColor:N,borderStyle:o,borderRadius:w,justifyContent:K,alignItems:V,boxShadow:_,element:U})=>{const $=(0,r.wW)(l,f,m,u,h,C,x,b,g,p,v,E,P,S,M,R,I,A,O,N,o,w,K,V,_),k=U??"div";return n.createElement(k,{className:$.root},d)};i.displayName="Box";const y=(d,f)=>{switch(d){case"error":case"success":case"info":case"warning":return f.colors[d].borderTransparent;default:return d?f.colors.border[d]:void 0}},c=(d,f)=>{switch(d){case"error":case"success":case"info":case"warning":return f.colors[d].transparent;default:return d?f.colors.background[d]:void 0}},l=(d,f,m,u,h,C,x,b,g,p,v,E,P,S,M,R,I,A,O,N,o,w,K,V,_)=>({root:(0,t.css)([(0,a.U)(d,f,U=>({margin:d.spacing(U)})),(0,a.U)(d,m,U=>({marginLeft:d.spacing(U),marginRight:d.spacing(U)})),(0,a.U)(d,u,U=>({marginTop:d.spacing(U),marginBottom:d.spacing(U)})),(0,a.U)(d,h,U=>({marginTop:d.spacing(U)})),(0,a.U)(d,C,U=>({marginBottom:d.spacing(U)})),(0,a.U)(d,x,U=>({marginLeft:d.spacing(U)})),(0,a.U)(d,b,U=>({marginRight:d.spacing(U)})),(0,a.U)(d,g,U=>({padding:d.spacing(U)})),(0,a.U)(d,p,U=>({paddingLeft:d.spacing(U),paddingRight:d.spacing(U)})),(0,a.U)(d,v,U=>({paddingTop:d.spacing(U),paddingBottom:d.spacing(U)})),(0,a.U)(d,E,U=>({paddingTop:d.spacing(U)})),(0,a.U)(d,P,U=>({paddingBottom:d.spacing(U)})),(0,a.U)(d,S,U=>({paddingLeft:d.spacing(U)})),(0,a.U)(d,M,U=>({paddingRight:d.spacing(U)})),(0,a.U)(d,R,U=>({display:U})),(0,a.U)(d,I,U=>({backgroundColor:c(U,d)})),(0,a.U)(d,A,U=>({flex:U})),(0,a.U)(d,O,U=>({flexShrink:U})),(0,a.U)(d,o,U=>({borderStyle:U})),(0,a.U)(d,N,U=>({borderColor:y(U,d)})),(o||N)&&{borderWidth:"1px"},(0,a.U)(d,K,U=>({justifyContent:U})),(0,a.U)(d,V,U=>({alignItems:U})),(0,a.U)(d,w,U=>({borderRadius:d.shape.radius[U]})),(0,a.U)(d,_,U=>({boxShadow:d.shadows[U]}))])})},12223:(X,L,e)=>{"use strict";e.d(L,{Ar:()=>i,Lh:()=>y,W2:()=>l,wc:()=>c});var t=e(41407),n=e(39953),r=e(82803),a=(u=>(u[u.Horizontal=0]="Horizontal",u[u.Vertical=1]="Vertical",u))(a||{});const i=({children:u,orientation:h=0,spacing:C="sm",justify:x="flex-start",align:b="normal",wrap:g=!1,width:p="100%",height:v="100%",...E})=>{const P=(0,r.wW)((0,n.useCallback)(S=>d(S,h,C,x,b,g),[b,x,h,C,g]));return n.createElement("div",{className:P.layout,style:{width:p,height:v},...E},n.Children.toArray(u).filter(Boolean).map((S,M)=>n.createElement("div",{className:P.childWrapper,key:M},S)))},y=({children:u,spacing:h,justify:C,align:x="center",wrap:b,width:g,height:p})=>n.createElement(i,{spacing:h,justify:C,orientation:0,align:x,width:g,height:p,wrap:b},u),c=({children:u,spacing:h,justify:C,align:x,width:b,height:g})=>n.createElement(i,{spacing:h,justify:C,orientation:1,align:x,width:b,height:g},u),l=({children:u,padding:h,margin:C,grow:x,shrink:b})=>{const g=(0,r.wW)((0,n.useCallback)(p=>m(p,h,C),[h,C]));return n.createElement("div",{className:(0,t.cx)(g.wrapper,x!==void 0&&(0,t.css)({flexGrow:x}),b!==void 0&&(0,t.css)({flexShrink:b}))},u)},d=(u,h,C,x,b,g)=>{const p=C!=="none"?u.spacing(f[C]):0,v=h===0&&!g||h===1?0:`-${p}`,E=h===1?"vertical-group":"horizontal-group";return{layout:(0,t.css)({label:E,display:"flex",flexDirection:h===1?"column":"row",flexWrap:g?"wrap":"nowrap",justifyContent:x,alignItems:b,height:"100%",maxWidth:"100%",marginBottom:v}),childWrapper:(0,t.css)({label:"layoutChildrenWrapper",marginBottom:h===0&&!g?0:p,marginRight:h===0?p:0,display:"flex",alignItems:b,"&:last-child":{marginBottom:h===1?0:void 0,marginRight:h===0?0:void 0}})}},f={none:0,xs:.5,sm:1,md:2,lg:3},m=(u,h,C)=>{const x=h&&h!=="none"&&u.spacing(f[h])||0,b=C&&C!=="none"&&u.spacing(f[C])||0;return{wrapper:(0,t.css)({label:"container",margin:b,padding:x})}}},7894:(X,L,e)=>{"use strict";e.d(L,{U:()=>n});function t(r,a,i,y){const c=a[y];if(c!=null)return{[r.breakpoints.up(y)]:i(c)}}function n(r,a,i){return a==null?null:typeof a!="object"||!("xs"in a)?i(a):[t(r,a,i,"xs"),t(r,a,i,"sm"),t(r,a,i,"md"),t(r,a,i,"lg"),t(r,a,i,"xl"),t(r,a,i,"xxl")]}},18950:(X,L,e)=>{"use strict";e.d(L,{r:()=>i});var t=e(39953),n=e(17716),r=e(57837),a=e(28425);const i=(0,t.forwardRef)(({href:y,children:c,...l},d)=>{const f=r.u.stripBaseFromUrl(a.QX.sanitizeUrl(y??""));return t.createElement(n.Link,{ref:d,to:f,...l},c)});i.displayName="Link"},66729:(X,L,e)=>{"use strict";e.d(L,{h:()=>f});var t=e(41407),n=e(39953),r=e(57837),a=e(28425),i=e(82803),y=e(39285),c=e(77229),l=e(18950);const d={h1:"xl",h2:"xl",h3:"lg",h4:"lg",h5:"md",h6:"md",body:"md",bodySmall:"xs"},f=(0,n.forwardRef)(({href:u,color:h="link",external:C=!1,inline:x=!0,variant:b="body",weight:g,icon:p,children:v,...E},P)=>{const S=r.u.stripBaseFromUrl(a.QX.sanitizeUrl(u??"")),M=(0,i.l4)(),R=m(M,x,b,g,h),I=p||"external-link-alt";return C?n.createElement("a",{href:S,ref:P,...E,target:"_blank",rel:"noreferrer",className:R},v,n.createElement(y.J,{size:d[b]||"md",name:I})):n.createElement(l.r,{ref:P,href:S,...E,className:R},v,p&&n.createElement(y.J,{name:p,size:d[b]||"md"}))});f.displayName="TextLink";const m=(u,h,C,x,b)=>(0,t.css)([C&&{...u.typography[C]},x&&{fontWeight:(0,c.RC)(x,u)},b&&{color:u.colors.text[b]},{alignItems:"center",gap:"0.25em",display:"inline-flex",textDecoration:"none","&:hover":{textDecoration:"underline",color:u.colors.text.link}},h&&{textDecoration:"underline","&:hover":{textDecoration:"none"}}])},25870:(X,L,e)=>{"use strict";e.d(L,{L:()=>i});var t=e(41407),n=e(39953),r=e(64084);const a=(0,r.B)((y=!1)=>({list:(0,t.css)({listStyleType:"none",margin:0,padding:0}),item:(0,t.css)({display:y&&"inline-block"||"block"})}));class i extends n.PureComponent{constructor(c){super(c)}render(){const{items:c,renderItem:l,getItemKey:d,className:f,inline:m}=this.props,u=a(m);return n.createElement("ul",{className:(0,t.cx)(u.list,f)},c.map((h,C)=>n.createElement("li",{className:u.item,key:d?d(h):C},l(h,C))))}}},28471:(X,L,e)=>{"use strict";e.d(L,{Y:()=>r});var t=e(39953),n=e(25870);class r extends t.PureComponent{render(){return t.createElement(n.L,{inline:!0,...this.props})}}},38696:(X,L,e)=>{"use strict";e.d(L,{a:()=>r});var t=e(39953),n=e(25870);class r extends t.PureComponent{render(){return t.createElement(n.L,{...this.props})}}},94615:(X,L,e)=>{"use strict";e.d(L,{F:()=>f});var t=e(41407),n=e(39953),r=e(82803);const a=28,i=2.4,y=500,c=4e3,l=300,d=100/a*100;function f({width:u,delay:h=l,ariaLabel:C="Loading bar"}){const x=Math.min(Math.max(Math.round(u*i),y),c),b=(0,r.wW)(p=>m(p,h,x)),g={overflow:"hidden"};return n.createElement("div",{style:g},n.createElement("div",{"aria-label":C,className:b.bar}))}const m=(u,h,C)=>{const x=(0,t.keyframes)({"0%":{transform:"translateX(-100%)"},"85%, 100%":{transform:`translateX(${d}%)`}});return{bar:(0,t.css)({width:a+"%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)",transform:"translateX(-100%)",animationName:x,animationDelay:`${h}ms`,animationDuration:`${C}ms`,animationTimingFunction:"linear",animationIterationCount:"infinite",willChange:"transform"})}}},84766:(X,L,e)=>{"use strict";e.d(L,{u:()=>i});var t=e(41407),n=e(39953),r=e(82803),a=e(28409);const i=({text:c,className:l,...d})=>{const f=(0,r.wW)(y);return n.createElement("div",{className:(0,t.cx)(f.container,l),...d},c," ",n.createElement(a.$,{inline:!0}))},y=c=>({container:(0,t.css)({marginBottom:c.spacing(4)})})},57669:(X,L,e)=>{"use strict";e.d(L,{b:()=>a});var t=e(39953),n=e(9558),r=e(29711);const a=({value:i,onChange:y,context:c,item:l})=>{const d=l.settings??{},f=(0,r.IX)(c.data,d?.filter),m=(0,r.nw)(f,i),u=(0,t.useCallback)(C=>{if(!(C&&!(0,r.w3)(C.value,f)))return y(C?.value)},[f,y]),h=m.find(C=>C.value===i);return t.createElement(t.Fragment,null,t.createElement(n.Ph,{value:h,placeholder:d.placeholderText??"Select field",options:m,onChange:u,noOptionsMessage:d.noFieldsMessage,width:d.width,isClearable:d.isClearable!==!1}))}},20:(X,L,e)=>{"use strict";e.d(L,{J8:()=>f,fN:()=>C});var t=e(41407),n=e(39953),r=e(53470),a=e(86981),i=e(47125),y=e(34547),c=e(82803),l=e(38637),d=e(9558);const f=[{label:"==",value:y.Bd.EQ},{label:"!=",value:y.Bd.NEQ},{label:">",value:y.Bd.GT},{label:">=",value:y.Bd.GTE},{label:"<",value:y.Bd.LT},{label:"<=",value:y.Bd.LTE}];function m(x){return x===r.gz.allIsNull||x===r.gz.allIsZero}const u=({options:x,onChange:b})=>{const g=(0,c.wW)(h),p=(0,n.useMemo)(()=>r.TB.selectOptions([x?.reducer]),[x?.reducer]),v=(0,n.useCallback)(R=>b({...x,reducer:R.value}),[x,b]),E=(0,n.useCallback)(R=>b({...x,op:R.value}),[x,b]),P=(0,n.useCallback)(R=>{const I=R.currentTarget.valueAsNumber;return b({...x,value:I})},[x,b]),S=x??{},M=m(x.reducer);return n.createElement("div",{className:g.spot},n.createElement(d.Ph,{value:p.current,options:p.options,onChange:v,placeholder:"Select field reducer"}),S.reducer&&!M&&n.createElement(n.Fragment,null,n.createElement(d.Ph,{value:f.find(R=>R.value===S.op),options:f,onChange:E,"aria-label":"Comparison operator",width:19}),n.createElement(l.I,{type:"number",value:S.value,onChange:P})))},h=x=>({spot:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end",gap:"4px"})}),C={id:a.mi.byValue,component:u,matcher:i.Ls.get(a.mi.byValue),name:"Fields with values",description:"Set properties for fields with reducer condition",optionsToLabel:x=>`${x?.reducer} ${x?.op} ${x?.value}`}},77834:(X,L,e)=>{"use strict";e.d(L,{O:()=>c,S:()=>f});var t=e(39953),n=e(69330),r=e(86981),a=e(47125),i=e(9558);const y=(m,u,h)=>{if(!h)return;let C=m.find(x=>!u.some(b=>x===b));if(C)return C};function c({value:m,data:u,onChange:h,placeholder:C}){const x=(0,t.useMemo)(()=>l(u),[u]),[b,g]=(0,t.useState)({refIds:[],value:void 0}),p=(0,t.useMemo)(()=>x.find(E=>E.value===m)??y(x,b.refIds,b.value),[m,x,b]),v=(0,t.useCallback)(E=>{h(E?.value)},[h]);return(x!==b.refIds||p?.value!==b.value)&&g({refIds:x,value:p?.value}),t.createElement(i.Ph,{options:x,onChange:v,isClearable:!0,placeholder:C??"Select query refId",value:p})}function l(m){const u=new Map;for(const C of m){const x=C.refId??"",b=u.get(x)??[];b.length===0&&u.set(x,b),b.push(C)}const h=[];for(const[C,x]of u.entries())h.push({value:C,label:`Query: ${C??"(missing refId)"}`,description:d(x)});return h}function d(m){return`Frames (${m.length}):
    ${m.slice(0,Math.min(3,m.length)).map(u=>(0,n.nf)(u)).join(", ")} ${m.length>3?"...":""}`}const f={id:r.mi.byFrameRefID,component:m=>t.createElement(c,{value:m.options,data:m.data,onChange:m.onChange}),matcher:a.Ls.get(r.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:m=>m}},7023:(X,L,e)=>{"use strict";e.d(L,{i:()=>M});var t=e(77663),n=e(39953),r=e(86981),a=e(47125),i=e(38637);const y=(0,n.memo)(R=>{const{options:I,onChange:A}=R,O=(0,n.useCallback)(N=>A(N.target.value),[A]);return n.createElement(i.I,{placeholder:"Enter regular expression",defaultValue:I,onBlur:O})});y.displayName="FieldNameByRegexMatcherEditor";const c={id:r.mi.byRegexp,component:y,matcher:a.Ls.get(r.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:R=>R};var l=e(9558),d=e(29711);const f=(0,n.memo)(R=>{const{data:I,options:A,onChange:O,id:N}=R,o=(0,d.IX)(I),w=(0,d.nw)(o,A),K=(0,n.useCallback)(_=>{if((0,d.w3)(_.value,o))return O(_.value)},[o,O]),V=w.find(_=>_.value===A);return n.createElement(l.Ph,{value:V,options:w,onChange:K,inputId:N})});f.displayName="FieldNameMatcherEditor";const m={id:r.mi.byName,component:f,matcher:a.Ls.get(r.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:R=>R},u=(0,n.memo)(R=>{const{data:I,options:A,onChange:O}=R,{readOnly:N,prefix:o}=A,w=(0,d.IX)(I),K=(0,d.nw)(w,void 0),V=(0,n.useCallback)(_=>{if(Array.isArray(_))return O({...A,names:_.reduce((U,$)=>((0,d.w3)($.value,w)&&U.push($.value),U),[])})},[w,O,A]);if(N){const _=(A.names??[]).join(", ");return n.createElement(i.I,{value:_,readOnly:!0,disabled:!0,prefix:o})}return n.createElement(l.NU,{value:A.names,options:K,onChange:V})});u.displayName="FieldNameMatcherEditor";const h={id:r.mi.byNames,component:u,matcher:a.Ls.get(r.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:R=>(R.names??[]).join(", "),excludeFromPicker:!0};var C=e(89591),x=e(72305);const b=(0,n.memo)(R=>{const{data:I,options:A,onChange:O,id:N}=R,o=p(I),w=v(o,A),K=(0,n.useCallback)(_=>O(_.value),[O]),V=w.find(_=>_.value===A);return n.createElement(l.Ph,{inputId:N,value:V,options:w,onChange:K})});b.displayName="FieldTypeMatcherEditor";const g=[{value:C.fS.number,label:"Number",icon:(0,x.WZ)(C.fS.number)},{value:C.fS.string,label:"String",icon:(0,x.WZ)(C.fS.string)},{value:C.fS.time,label:"Time",icon:(0,x.WZ)(C.fS.time)},{value:C.fS.boolean,label:"Boolean",icon:(0,x.WZ)(C.fS.boolean)},{value:C.fS.trace,label:"Traces",icon:(0,x.WZ)(C.fS.trace)},{value:C.fS.enum,label:"Enum",icon:(0,x.WZ)(C.fS.enum)},{value:C.fS.other,label:"Other",icon:(0,x.WZ)(C.fS.other)}],p=R=>(0,n.useMemo)(()=>{const I=new Map;for(const A of g)I.set(A.value,0);for(const A of R)for(const O of A.fields){const N=O.type||C.fS.other;let o=I.get(N);o||(o=0),I.set(N,o+1)}return I},[R]),v=(R,I)=>(0,n.useMemo)(()=>{let A=!1;const O=[];for(const N of g){const o=R.get(N.value),w=I===N.value;(o||w)&&O.push({...N,label:`${N.label} (${R.get(N.value)})`}),w&&(A=!0)}return I&&!A&&O.push({value:I,label:`${I} (No matches)`}),O},[R,I]),E={id:r.mi.byType,component:b,matcher:a.Ls.get(r.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:R=>R};var P=e(20),S=e(77834);const M=new t.B(()=>[m,c,E,S.S,h,P.fN])},29711:(X,L,e)=>{"use strict";e.d(L,{IX:()=>y,g2:()=>i,nw:()=>c,w3:()=>a});var t=e(39953),n=e(69330),r=e(72305);function a(l,d){return l?d.display.has(l)||d.raw.has(l):!1}function i(l,d){const f={display:new Set,raw:new Set,fields:new Map};for(const m of l)for(const u of m.fields){if(d&&!d(u))continue;const h=(0,n.CZ)(u,m,l);f.display.add(h),f.fields.set(h,u),u.name&&h!==u.name&&(f.raw.add(u.name),f.fields.set(u.name,u))}return f}function y(l,d){return(0,t.useMemo)(()=>i(l,d),[l,d])}function c(l,d,f,m){return(0,t.useMemo)(()=>{let u=!1;const h=[];f&&h.push(f);for(const C of l.display){!u&&C===d&&(u=!0);const x=l.fields.get(C);(!m||m===x?.type)&&h.push({value:C,label:C,icon:x?(0,r.e7)(x):void 0})}for(const C of l.raw)l.display.has(C)||(!u&&C===d&&(u=!0),h.push({value:C,label:`${C} (base field name)`}));return d&&!u&&h.push({value:d,label:`${d} (not found)`}),h},[l,d,f,m])}},13767:(X,L,e)=>{"use strict";e.d(L,{v:()=>d});var t=e(41407),n=e(39953),r=e(82803),a=e(12727),i=e(43078),y=e(85001),c=e(31157);const l=n.forwardRef(({header:m,children:u,ariaLabel:h,onOpen:C,onClose:x,onKeyDown:b,...g},p)=>{const v=(0,r.wW)(f),E=(0,n.useRef)(null);(0,n.useImperativeHandle)(p,()=>E.current);const[P]=(0,c.d)({localRef:E,onOpen:C,onClose:x,onKeyDown:b});return n.createElement("div",{...g,tabIndex:-1,ref:E,className:v.wrapper,role:"menu","aria-label":h,onKeyDown:P},m&&n.createElement("div",{className:(0,t.cx)(v.header,!!u&&n.Children.toArray(u).length>0&&v.headerBorder)},m),u)});l.displayName="Menu";const d=Object.assign(l,{Item:y.s,Divider:a.R,Group:i.k}),f=m=>({header:(0,t.css)({padding:`${m.spacing(.5,1,1,1)}`}),headerBorder:(0,t.css)({borderBottom:`1px solid ${m.colors.border.weak}`}),wrapper:(0,t.css)({background:`${m.colors.background.primary}`,boxShadow:`${m.shadows.z3}`,display:"inline-block",borderRadius:`${m.shape.radius.default}`,padding:`${m.spacing(.5,0)}`})})},12727:(X,L,e)=>{"use strict";e.d(L,{R:()=>a});var t=e(41407),n=e(39953),r=e(82803);function a(){const y=(0,r.wW)(i);return n.createElement("div",{className:y.divider})}const i=y=>({divider:(0,t.css)({height:1,backgroundColor:y.colors.border.weak,margin:y.spacing(.5,0)})})},43078:(X,L,e)=>{"use strict";e.d(L,{k:()=>y});var t=e(41407),n=e(86832),r=e.n(n),a=e(39953),i=e(82803);const y=({label:l,ariaLabel:d,children:f})=>{const m=(0,i.wW)(c),u=`group-label-${(0,n.uniqueId)()}`;return a.createElement("div",{role:"group","aria-labelledby":!d&&l?u:void 0,"aria-label":d},l&&a.createElement("label",{id:u,className:m.groupLabel,"aria-hidden":!0},l),f)};y.displayName="MenuGroup";const c=l=>({groupLabel:(0,t.css)({color:l.colors.text.secondary,fontSize:l.typography.size.sm,padding:l.spacing(.5,1)})})},85001:(X,L,e)=>{"use strict";e.d(L,{s:()=>m});var t=e(41407),n=e(39953),r=e(82803),a=e(53039),i=e(39285),y=e(75766),c=e(31157);const l=h=>{if(!h)return!1;const C=h.parentElement.getBoundingClientRect(),x=h.getBoundingClientRect();return x.width!==0&&C.right+x.width+10>window.innerWidth},d=n.memo(({items:h,isOpen:C,openedWithArrow:x,setOpenedWithArrow:b,close:g,customStyle:p})=>{const v=(0,r.wW)(f),E=(0,n.useRef)(null),[P]=(0,c.d)({localRef:E,isMenuOpen:C,openedWithArrow:x,setOpenedWithArrow:b,close:g}),[S,M]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{C&&E.current&&M(l(E.current))},[C]),n.createElement(n.Fragment,null,n.createElement("div",{className:v.iconWrapper,"aria-label":y.wl.components.Menu.SubMenu.icon},n.createElement(i.J,{name:"angle-right",className:v.icon,"aria-hidden":!0})),C&&n.createElement("div",{ref:E,className:(0,t.cx)(v.subMenu,{[v.pushLeft]:S}),"aria-label":y.wl.components.Menu.SubMenu.container,style:p},n.createElement("div",{tabIndex:-1,className:v.itemsWrapper,role:"menu",onKeyDown:P},h)))});d.displayName="SubMenu";const f=h=>({iconWrapper:(0,t.css)({display:"flex",flex:1,justifyContent:"end"}),icon:(0,t.css)({opacity:.7,marginLeft:h.spacing(1),color:h.colors.text.secondary}),itemsWrapper:(0,t.css)({background:h.colors.background.primary,boxShadow:h.shadows.z3,display:"inline-block",borderRadius:h.shape.radius.default}),pushLeft:(0,t.css)({right:"100%",left:"unset"}),subMenu:(0,t.css)({position:"absolute",top:0,left:"100%",zIndex:h.zIndex.dropdown})}),m=n.memo(n.forwardRef((h,C)=>{const{url:x,icon:b,label:g,ariaLabel:p,ariaChecked:v,target:E,onClick:P,className:S,active:M,disabled:R,destructive:I,childItems:A,role:O="menuitem",tabIndex:N=-1,customSubMenuContainerStyles:o,shortcut:w,testId:K}=h,V=(0,r.wW)(u),[_,U]=(0,n.useState)(M),[$,k]=(0,n.useState)(!1),[H,j]=(0,n.useState)(!1),z=(0,n.useCallback)(()=>{R||(k(!0),U(!0))},[R]),F=(0,n.useCallback)(()=>{R||(k(!1),U(!1))},[R]),J=A&&A.length>0,Q=J?"div":x===void 0?"button":"a",Z=(0,t.cx)({[V.item]:!0,[V.active]:_,[V.disabled]:R,[V.destructive]:I&&!R},S),ne={[Q==="button"?"disabled":"aria-disabled"]:R,...Q==="a"&&R&&{href:void 0,onClick:void 0},...R&&{tabIndex:-1,["data-disabled"]:R}},ee=(0,n.useRef)(null);(0,n.useImperativeHandle)(C,()=>ee.current);const de=he=>{switch(he.key){case"ArrowRight":he.preventDefault(),he.stopPropagation(),J&&(k(!0),j(!0),U(!0));break;default:break}},Pe=()=>{k(!1),U(!1),ee?.current?.focus()},ye=!!(w&&w.length>0);return n.createElement(Q,{target:E,className:Z,rel:E==="_blank"?"noopener noreferrer":void 0,href:x,onClick:P,onMouseEnter:z,onMouseLeave:F,onKeyDown:de,role:x===void 0?O:void 0,"data-role":"menuitem",ref:ee,"data-testid":K,"aria-label":p,"aria-checked":v,tabIndex:N,...ne},n.createElement(n.Fragment,null,b&&n.createElement(i.J,{name:b,className:V.icon,"aria-hidden":!0}),g,n.createElement("div",{className:(0,t.cx)(V.rightWrapper,{[V.withShortcut]:ye})},ye&&n.createElement("div",{className:V.shortcut},n.createElement(i.J,{name:"keyboard",title:"keyboard shortcut"}),w),J&&n.createElement(d,{items:A,isOpen:$,openedWithArrow:H,setOpenedWithArrow:j,close:Pe,customStyle:o}))))}));m.displayName="MenuItem";const u=h=>({item:(0,t.css)({background:"none",cursor:"pointer",whiteSpace:"nowrap",color:h.colors.text.primary,display:"flex",alignItems:"center",padding:h.spacing(.5,2),minHeight:h.spacing(4),margin:0,border:"none",width:"100%",position:"relative","&:hover, &:focus, &:focus-visible":{background:h.colors.action.hover,color:h.colors.text.primary,textDecoration:"none"},"&:focus-visible":(0,a.getFocusStyles)(h)}),active:(0,t.css)({background:h.colors.action.hover}),destructive:(0,t.css)({color:h.colors.error.text,svg:{color:h.colors.error.text},"&:hover, &:focus, &:focus-visible":{background:h.colors.error.main,color:h.colors.error.contrastText,svg:{color:h.colors.error.contrastText}}}),disabled:(0,t.css)({color:h.colors.action.disabledText,"&:hover, &:focus, &:focus-visible":{cursor:"not-allowed",background:"none",color:h.colors.action.disabledText}}),icon:(0,t.css)({opacity:.7,marginRight:"10px",marginLeft:"-4px",color:h.colors.text.secondary}),rightWrapper:(0,t.css)({display:"flex",alignItems:"center",marginLeft:"auto"}),shortcutIcon:(0,t.css)({marginRight:h.spacing(1)}),withShortcut:(0,t.css)({minWidth:h.spacing(10.5)}),shortcut:(0,t.css)({display:"flex",alignItems:"center",gap:h.spacing(1),marginLeft:h.spacing(2),color:h.colors.text.secondary,opacity:.7})})},31157:(X,L,e)=>{"use strict";e.d(L,{d:()=>i});var t=e(39953),n=e(45580);const r=(y,c)=>(y%c+c)%c,a=-1,i=({localRef:y,isMenuOpen:c,openedWithArrow:l,setOpenedWithArrow:d,close:f,onOpen:m,onClose:u,onKeyDown:h})=>{const[C,x]=(0,t.useState)(a);return(0,t.useEffect)(()=>{c&&l&&(x(0),d?.(!1))},[c,l,d]),(0,t.useEffect)(()=>{const g=y?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');g?.[C]?.focus(),g?.forEach((p,v)=>{p.tabIndex=v===C?0:-1})},[y,C]),(0,n.Z)(()=>{m?.(x)}),[g=>{const p=y?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),v=p?.length??0;switch(g.key){case"ArrowUp":g.preventDefault(),g.stopPropagation(),x(r(C-1,v));break;case"ArrowDown":g.preventDefault(),g.stopPropagation(),x(r(C+1,v));break;case"ArrowLeft":g.preventDefault(),g.stopPropagation(),x(a),f?.();break;case"Home":g.preventDefault(),g.stopPropagation(),x(0);break;case"End":g.preventDefault(),g.stopPropagation(),x(v-1);break;case"Enter":g.preventDefault(),g.stopPropagation(),p?.[C]?.click();break;case"Escape":u?.();break;case"Tab":g.preventDefault(),u?.();break;default:break}h?.(g)}]}},73075:(X,L,e)=>{"use strict";e.d(L,{u:()=>u});var t=e(41407),n=e(41056),r=e(30064),a=e(17037),i=e(39953),y=e(82803),c=e(28384),l=e(68497),d=e(12223),f=e(1936),m=e(75250);function u(x){const{title:b,children:g,isOpen:p=!1,closeOnEscape:v=!0,closeOnBackdropClick:E=!0,className:P,contentClassName:S,onDismiss:M,onClickBackdrop:R,trapFocus:I=!0}=x,A=(0,y.l4)(),O=(0,m.J)(A),N=(0,i.useRef)(null),{overlayProps:o,underlayProps:w}=(0,a.Ir)({isKeyboardDismissDisabled:!v,isOpen:p,onClose:M},N),{dialogProps:K,titleProps:V}=(0,n.R)({},N);if(!p)return null;const _=(0,t.cx)(O.modalHeader,typeof b!="string"&&O.modalHeaderWithTabs);return i.createElement(a.Xj,null,i.createElement("div",{role:"presentation",className:O.modalBackdrop,onClick:R||(E?M:void 0),...w}),i.createElement(r.MT,{contain:I,autoFocus:!0,restoreFocus:!0},i.createElement("div",{className:(0,t.cx)(O.modal,P),ref:N,...o,...K},i.createElement("div",{className:_},typeof b=="string"&&i.createElement(C,{...x,title:b,id:V.id}),typeof b!="string"&&b,i.createElement("div",{className:O.modalHeaderClose},i.createElement(l.h,{name:"times",size:"xl",onClick:M,tooltip:(0,c.t)("grafana-ui.modal.close-tooltip","Close")}))),i.createElement("div",{className:(0,t.cx)(O.modalContent,S)},g))))}function h({leftItems:x,children:b}){const g=(0,y.l4)(),p=(0,m.J)(g);return x?i.createElement("div",{className:p.modalButtonRow},i.createElement(d.Lh,{justify:"space-between"},i.createElement(d.Lh,{justify:"flex-start",spacing:"md"},x),i.createElement(d.Lh,{justify:"flex-end",spacing:"md"},b))):i.createElement("div",{className:p.modalButtonRow},i.createElement(d.Lh,{justify:"flex-end",spacing:"md",wrap:!0},b))}u.ButtonRow=h;function C({icon:x,iconTooltip:b,title:g,id:p}){return i.createElement(f.x,{icon:x,iconTooltip:b,title:g,id:p})}},1936:(X,L,e)=>{"use strict";e.d(L,{x:()=>a});var t=e(39953),n=e(82803),r=e(75250);const a=({icon:i,iconTooltip:y,title:c,children:l,id:d})=>{const f=(0,n.wW)(r.J);return t.createElement(t.Fragment,null,t.createElement("h2",{className:f.modalHeaderTitle,id:d},c),l)}},85188:(X,L,e)=>{"use strict";e.d(L,{Q:()=>n});var t=e(39953);const n=({children:r})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},r)))},35823:(X,L,e)=>{"use strict";e.d(L,{H:()=>i});var t=e(39953),n=e(77804),r=e(22784),a=e(1936);const i=({icon:y,title:c,tabs:l,activeTab:d,onChangeTab:f})=>t.createElement(a.x,{icon:y,title:c},t.createElement(r.J,{hideBorder:!0},l.map((m,u)=>t.createElement(n.O,{key:`${m.value}-${u}`,label:m.label,icon:m.icon,suffix:m.tabSuffix,active:m.value===d,onChangeTab:()=>f(m)}))))},39106:(X,L,e)=>{"use strict";e.d(L,{$i:()=>r,JY:()=>i,Y0:()=>a,kr:()=>n});var t=e(39953);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class r extends t.Component{constructor(c){super(c),this.showModal=(l,d)=>{this.setState({component:l,props:d})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:c.component||null,props:c.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const a=()=>t.createElement(n.Consumer,null,({component:y,props:c})=>y?t.createElement(y,{...c}):null),i=n.Consumer},75250:(X,L,e)=>{"use strict";e.d(L,{J:()=>r});var t=e(41407),n=e(64084);const r=(0,n.B)(a=>{const i=a.shape.radius.default;return{modal:(0,t.css)({position:"fixed",zIndex:a.zIndex.modal,background:a.colors.background.primary,boxShadow:a.shadows.z3,borderRadius:i,border:`1px solid ${a.colors.border.weak}`,backgroundClip:"padding-box",outline:"none",width:"750px",maxWidth:"100%",left:0,right:0,marginLeft:"auto",marginRight:"auto",top:"10%",maxHeight:"80%",display:"flex",flexDirection:"column"}),modalBackdrop:(0,t.css)({position:"fixed",zIndex:a.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0,backgroundColor:a.components.overlay.background,backdropFilter:"blur(1px)"}),modalHeader:(0,t.css)({label:"modalHeader",display:"flex",alignItems:"center",minHeight:"42px",margin:a.spacing(1,2,0,2)}),modalHeaderWithTabs:(0,t.css)({borderBottom:`1px solid ${a.colors.border.weak}`}),modalHeaderTitle:(0,t.css)({fontSize:a.typography.size.lg,margin:a.spacing(0,4,0,1),display:"flex",alignItems:"center",position:"relative",top:"2px"}),modalHeaderIcon:(0,t.css)({marginRight:a.spacing(2),fontSize:"inherit","&:before":{verticalAlign:"baseline"}}),modalHeaderClose:(0,t.css)({height:"100%",display:"flex",alignItems:"center",color:a.colors.text.secondary,flexGrow:1,justifyContent:"flex-end"}),modalContent:(0,t.css)({overflow:"auto",padding:a.spacing(3),width:"100%"}),modalButtonRow:(0,t.css)({paddingTop:a.spacing(3)})}})},84541:(X,L,e)=>{"use strict";e.d(L,{p:()=>h});var t=e(41407),n=e(39953),r=e(23619),a=e(75766),i=e(82803),y=e(13094),c=e(99566);function l(x){for(let b=x.length-1;b>0;b--){const g=x.charAt(b);if(g==="$")return{index:b,prefix:x.substring(b)};if(g===" "||g==="	"||g==='"'||g==="'")return{index:b+1,prefix:x.substring(b+1)}}return{index:0,prefix:x}}function d(x,b,g,p){const v=[];for(const E of g)b&&!E.label.startsWith(b)||v.push({...E,kind:f(x,E.kind),range:p,insertText:E.insertText??E.label});return v}function f(x,b){switch(b){case c.k.Method:return x.languages.CompletionItemKind.Method;case c.k.Field:return x.languages.CompletionItemKind.Field;case c.k.Property:return x.languages.CompletionItemKind.Property;case c.k.Constant:return x.languages.CompletionItemKind.Constant;case c.k.Text:return x.languages.CompletionItemKind.Text}return x.languages.CompletionItemKind.Text}function m(x,b,g,p){if(!(!b||!g))return x.languages.registerCompletionItemProvider(b,{triggerCharacters:["$"],provideCompletionItems:(v,E,P)=>{if(v.id!==p)return;const S={startLineNumber:E.lineNumber,endLineNumber:E.lineNumber,startColumn:E.column,endColumn:E.column};if(P.triggerCharacter==="$")return S.startColumn=E.column-1,{suggestions:d(x,"$",g(),S)};const M=v.getValueInRange({startLineNumber:E.lineNumber,startColumn:1,endLineNumber:E.lineNumber,endColumn:E.column}),{index:R,prefix:I}=l(M);S.startColumn=R+1;const A=d(x,I,g(),S);if(A.length)return{suggestions:A}}})}class u extends n.PureComponent{constructor(b){super(b),this.loadCustomLanguage=()=>{const{language:g}=this.props,p=r.F.getIfExists(g);return p?p.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:g}=this.props;g&&g(this.getEditorValue())},this.onSave=()=>{const{onSave:g}=this.props;g&&g(this.getEditorValue())},this.handleBeforeMount=g=>{this.monaco=g;const{onBeforeEditorMount:p}=this.props;p?.(g)},this.handleOnMount=(g,p)=>{const{getSuggestions:v,language:E,onChange:P,onEditorDidMount:S}=this.props;this.modelId=g.getModel()?.id,this.getEditorValue=()=>g.getValue(),v&&this.modelId&&(this.completionCancel=m(p,E,v,this.modelId)),g.onKeyDown(R=>{R.keyCode===p.KeyCode.KeyS&&(R.ctrlKey||R.metaKey)&&(R.preventDefault(),this.onSave())});const M=this.loadCustomLanguage();P&&g.getModel()?.onDidChangeContent(()=>P(g.getValue())),S&&M.then(()=>S(g,p))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(b){const{getSuggestions:g,language:p}=this.props,v=b.language!==p;if(b.getSuggestions!==g||v){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}g&&this.modelId&&(this.completionCancel=m(this.monaco,p,g,this.modelId))}v&&this.loadCustomLanguage()}render(){const{theme:b,language:g,width:p,height:v,showMiniMap:E,showLineNumbers:P,readOnly:S,monacoOptions:M}=this.props,R=this.props.value??"",I=R.length>100,A=this.props.containerStyles??C(b).container,O={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:I&&E,renderCharacters:!1},readOnly:S,lineNumbersMinChars:4,lineDecorationsWidth:1*b.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*b.spacing.gridSize,bottom:.5*b.spacing.gridSize},fixedOverflowWidgets:!0};return P||(O.glyphMargin=!1,O.folding=!1,O.lineNumbers="off",O.lineNumbersMinChars=0),n.createElement("div",{className:A,onBlur:this.onBlur,"aria-label":a.wl.components.CodeEditor.container},n.createElement(y.o,{width:p,height:v,language:g,value:R,options:{...O,...M??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount,keepCurrentModel:!0}))}}const h=(0,i.HE)(u),C=x=>({container:(0,t.css)({borderRadius:x.shape.radius.default,border:`1px solid ${x.components.input.borderColor}`})})},13094:(X,L,e)=>{"use strict";e.d(L,{o:()=>y});var t=e(39953),n=e(84766),r=e(35521),a=e(20653);const i=c=>{const l=(0,a.Z)(async()=>await c);return{...l,dependency:l.value}},y=c=>{const{loading:l,error:d,dependency:f}=i(e.e(2462).then(e.bind(e,27223)));if(l)return t.createElement(n.u,{text:""});if(d)return t.createElement(r.X,{title:"React Monaco Editor failed to load",error:d,errorInfo:{componentStack:d?.stack||""}});const m=f.ReactMonacoEditor;return t.createElement(m,{...c})}},99566:(X,L,e)=>{"use strict";e.d(L,{k:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},74317:(X,L,e)=>{"use strict";e.d(L,{T:()=>n});var t=e(99566);function n(r){const a="${"+r.value+"}",i=r.value===r.label?r.origin:`${r.label} / ${r.origin}`;return{label:a,kind:t.k.Property,detail:i,documentation:r.documentation}}},44138:(X,L,e)=>{"use strict";e.d(L,{X:()=>f});var t=e(41407),n=e(39953),r=e(75766),a=e(18950),i=e(7258),y=e(82803),c=e(53039),l=e(39285),d=e(68497);const f=n.memo(({title:u,section:h,parent:C,pageIcon:x,onGoBack:b,children:g,titleHref:p,parentHref:v,leftItems:E,isFullscreen:P,className:S,"aria-label":M,buttonOverflowAlignment:R="right",forceShowLeftItems:I=!1})=>{const A=(0,y.wW)(m),O=(0,t.cx)("page-toolbar",A.toolbar,{["page-toolbar--fullscreen"]:P,[A.noPageIcon]:!x},S),N=n.createElement(n.Fragment,null,n.createElement("span",{className:A.truncateText},u),h&&n.createElement("span",{className:A.pre}," / ",h));return n.createElement("nav",{className:O,"aria-label":M},n.createElement("div",{className:A.leftWrapper},x&&!b&&n.createElement("div",{className:A.pageIcon},n.createElement(l.J,{name:x,size:"lg","aria-hidden":!0})),b&&n.createElement("div",{className:A.pageIcon},n.createElement(d.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":r.wl.components.BackButton.backArrow,onClick:b})),n.createElement("nav",{"aria-label":"Search links",className:A.navElement},C&&v&&n.createElement(n.Fragment,null,n.createElement(a.r,{"aria-label":`Search dashboard in the ${C} folder`,className:(0,t.cx)(A.titleText,A.parentLink,A.titleLink,A.truncateText),href:v},C," ",n.createElement("span",{className:A.parentIcon})),p&&n.createElement("span",{className:(0,t.cx)(A.titleText,A.titleDivider),"aria-hidden":!0},"/")),(u||!!E?.length)&&n.createElement("div",{className:A.titleWrapper},u&&n.createElement("h1",{className:A.h1Styles},p?n.createElement(a.r,{"aria-label":"Search dashboard by name",className:(0,t.cx)(A.titleText,A.titleLink),href:p},N):n.createElement("div",{className:A.titleText},N)),E?.map((o,w)=>n.createElement("div",{className:(0,t.cx)(A.leftActionItem,{[A.forceShowLeftActionItems]:I}),key:w},o))))),n.createElement(i.R,{alignment:R},n.Children.toArray(g).filter(Boolean)))});f.displayName="PageToolbar";const m=u=>{const{spacing:h,typography:C}=u,x=(0,c.getFocusStyles)(u);return{pre:(0,t.css)({whiteSpace:"pre"}),toolbar:(0,t.css)({alignItems:"center",background:u.colors.background.canvas,display:"flex",gap:u.spacing(2),justifyContent:"space-between",padding:u.spacing(1.5,2),[u.breakpoints.down("md")]:{paddingLeft:"53px"}}),noPageIcon:(0,t.css)({[u.breakpoints.down("md")]:{paddingLeft:u.spacing(2)}}),leftWrapper:(0,t.css)({display:"flex",flexWrap:"nowrap",maxWidth:"70%"}),pageIcon:(0,t.css)({display:"none",[u.breakpoints.up("sm")]:{display:"flex",paddingRight:u.spacing(1),alignItems:"center"}}),truncateText:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),titleWrapper:(0,t.css)({display:"flex",margin:0,minWidth:0}),navElement:(0,t.css)({display:"flex",alignItems:"center",minWidth:0}),h1Styles:(0,t.css)({margin:h(0,1,0,0),lineHeight:"inherit",flexGrow:1,minWidth:0}),parentIcon:(0,t.css)({marginLeft:u.spacing(.5)}),titleText:(0,t.css)({display:"flex",fontSize:C.size.lg,margin:0,borderRadius:u.shape.radius.default}),titleLink:(0,t.css)({"&:focus-visible":x}),titleDivider:(0,t.css)({padding:h(0,.5,0,.5),display:"none",[u.breakpoints.up("md")]:{display:"unset"}}),parentLink:(0,t.css)({display:"none",[u.breakpoints.up("md")]:{display:"unset",flex:1}}),leftActionItem:(0,t.css)({display:"none",alignItems:"center",paddingRight:h(.5),[u.breakpoints.up("md")]:{display:"flex"}}),forceShowLeftActionItems:(0,t.css)({display:"flex"})}}},39017:(X,L,e)=>{"use strict";e.d(L,{t:()=>y});var t=e(41407),n=e(39953),r=e(82803),a=e(4919),i=e(39285);const y=({currentPage:l,numberOfPages:d,onNavigate:f,hideWhenSinglePage:m,showSmallVersion:u,className:h})=>{const C=(0,r.wW)(c),x=u?1:8,b=(0,n.useMemo)(()=>{const g=[...new Array(d).keys()],p=d>x,v=(E,P)=>n.createElement("li",{key:E,className:C.item},n.createElement(a.zx,{size:"sm",variant:P,onClick:()=>f(E)},E));return g.reduce((E,P)=>{const S=P+1,M=S===l?"primary":"secondary",R=x,I=d-x+1,A=I-R,O=S===1||S===d,N=A>-1&&l>=R&&l<=I,o=u?1:3,w=u?0:2;return p?O||l<R&&S<R||A>=0&&l>I&&S>I||A<0&&l>=R&&S>I||N&&S>=l-w&&S<=l+w?E.push(v(S,M)):(S===R&&l<R||S===I&&l>I||N&&(S===l-o||S===l+o))&&E.push(n.createElement("li",{key:S,className:C.item},n.createElement(i.J,{className:C.ellipsis,name:"ellipsis-v"}))):E.push(v(S,M)),E},[])},[l,d,f,x,u,C.ellipsis,C.item]);return m&&d<=1?null:n.createElement("div",{className:(0,t.cx)(C.container,h)},n.createElement("ol",null,n.createElement("li",{className:C.item},n.createElement(a.zx,{"aria-label":"previous page",size:"sm",variant:"secondary",onClick:()=>f(l-1),disabled:l===1},n.createElement(i.J,{name:"angle-left"}))),b,n.createElement("li",{className:C.item},n.createElement(a.zx,{"aria-label":"next page",size:"sm",variant:"secondary",onClick:()=>f(l+1),disabled:l===d},n.createElement(i.J,{name:"angle-right"})))))},c=()=>({container:(0,t.css)({float:"right"}),item:(0,t.css)({display:"inline-block",paddingLeft:"10px",marginBottom:"5px"}),ellipsis:(0,t.css)({transform:"rotate(90deg)"})})},32961:(X,L,e)=>{"use strict";e.d(L,{T:()=>c});var t=e(41407),n=e(39953),r=e(75766),a=e(82803),i=e(39285),y=e(69865);const c=({onCancel:d,loading:f})=>{const m=(0,a.wW)(l);return f?n.createElement(y.u,{content:"Cancel query"},n.createElement(i.J,{className:(0,t.cx)("spin-clockwise",{[m.clickable]:!!d}),name:"sync",size:"sm",onClick:d,"aria-label":r.wl.components.LoadingIndicator.icon})):null},l=()=>({clickable:(0,t.css)({cursor:"pointer"})})},31276:(X,L,e)=>{"use strict";e.d(L,{R9:()=>i,_w:()=>a,bb:()=>r});var t=e(39953),n=e(91395);const r=t.createContext({eventsScope:"global",eventBus:new n.F}),a=r.Provider,i=()=>t.useContext(r)},63801:(X,L,e)=>{"use strict";e.d(L,{fm:()=>K});var t=e(32961),n=e(41407),r=e(39953),a=e(948),i=e(13479),y=e(10694),c=e(75766),l=e(82803),d=e(53039);function f({children:V,delay:_}){const[U,$]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{window.setTimeout(()=>{$(!0)},_)},[V,_]),r.createElement(r.Fragment,null,U?V:null)}var m=e(39285),u=e(94615),h=e(69865),C=e(58047),x=e(3839);function b({menu:V,title:_,placement:U="bottom",offset:$,dragClassCancel:k,menuButtonClass:H,onOpenMenu:j}){const z=_?c.wl.components.Panels.Panel.menu(_):"panel-menu-button",F=(0,r.useCallback)(J=>{J&&j&&j()},[j]);return r.createElement(C.L,{overlay:V,placement:U,offset:$,onVisibleChange:F},r.createElement(x.h,{"aria-label":`Menu for panel with ${_?`title ${_}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":z,className:(0,n.cx)(H,k)}))}function g({menu:V,title:_,dragClass:U,children:$,offset:k=-32,onOpenMenu:H}){const j=(0,l.wW)(p),z=(0,r.useRef)(null),F=c.wl.components.Panels.Panel.HoverWidget,J=(0,r.useCallback)(Z=>{z.current?.setPointerCapture(Z.pointerId)},[]),Q=(0,r.useCallback)(Z=>{z.current?.releasePointerCapture(Z.pointerId)},[]);return $===void 0||r.Children.count($)===0?null:r.createElement("div",{className:(0,n.cx)(j.container,"show-on-hover"),style:{top:k},"data-testid":F.container},U&&r.createElement("div",{className:(0,n.cx)(j.square,j.draggable,U),onPointerDown:J,onPointerUp:Q,ref:z,"data-testid":F.dragIcon},r.createElement(m.J,{name:"expand-arrows",className:j.draggableIcon})),$,V&&r.createElement(b,{menu:V,title:_,placement:"bottom",menuButtonClass:j.menuButton,onOpenMenu:H}))}function p(V){return{container:(0,n.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:V.colors.background.secondary,color:V.colors.text.primary,border:`1px solid ${V.colors.border.weak}`,borderRadius:V.shape.radius.default,height:V.spacing(4),boxShadow:V.shadows.z1}),square:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center",width:V.spacing(4),height:"100%"}),draggable:(0,n.css)({cursor:"move",[V.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,n.css)({background:"inherit",border:"none","&:hover":{background:V.colors.secondary.main}}),draggableIcon:(0,n.css)({transform:"rotate(45deg)",color:V.colors.text.secondary,"&:hover":{color:V.colors.text.primary}})}}var v=e(4919);const E=(0,r.forwardRef)(({className:V,children:_,href:U,onClick:$,target:k,title:H,...j},z)=>{const F=(0,l.wW)(P);return U?r.createElement("a",{ref:z,href:U,onClick:$,target:k,title:H,className:(0,n.cx)(F.linkItem,V),...j},_):$?r.createElement(v.zx,{ref:z,className:(0,n.cx)(F.item,V),variant:"secondary",fill:"text",onClick:$},_):r.createElement("span",{ref:z,className:(0,n.cx)(F.item,V),...j},_)});E.displayName="TitleItem";const P=V=>{const _=(0,n.css)({color:`${V.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${V.shape.radius.default}`,padding:`${V.spacing(0,1)}`,height:`${V.spacing(V.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,d.getFocusStyles)(V),zIndex:1},"&: focus:not(:focus-visible)":(0,d.getMouseFocusStyles)(V),"&:hover ":{boxShadow:`${V.shadows.z1}`,background:`${V.colors.background.secondary}`,color:`${V.colors.text.primary}`}});return{item:_,linkItem:(0,n.cx)(_,(0,n.css)({cursor:"pointer"}))}};function S({description:V,className:_}){const U=(0,l.wW)(M),$=()=>{const k=typeof V=="function"?V():V;return r.createElement("div",{className:"panel-info-content markdown-html"},r.createElement("div",{dangerouslySetInnerHTML:{__html:k}}))};return V!==""?r.createElement(h.u,{interactive:!0,content:$},r.createElement(E,{className:(0,n.cx)(_,U.description)},r.createElement(m.J,{name:"info-circle",size:"md"}))):null}const M=V=>({description:(0,n.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function R({message:V,onClick:_,ariaLabel:U="status"}){const $=(0,l.wW)(I);return r.createElement(x.h,{className:$.buttonStyles,onClick:_,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:V||"","aria-label":U,"data-testid":c.wl.components.Panels.Panel.status("error")})}const I=V=>{const{headerHeight:_,padding:U}=V.components.panel;return{buttonStyles:(0,n.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:V.spacing(U),width:V.spacing(_),height:V.spacing(_),borderRadius:V.shape.radius.default})}};function A({width:V,height:_,children:U,padding:$="md",title:k="",description:H="",displayMode:j="default",titleItems:z,menu:F,dragClass:J,dragClassCancel:Q,hoverHeader:Z=!1,hoverHeaderOffset:ne,loadingState:ee,statusMessage:de,statusMessageOnClick:Pe,leftItems:ye,actions:he,onCancelQuery:me,onOpenMenu:De,collapsible:le=!1,collapsed:Ee,onToggleCollapse:be}){const ge=(0,l.l4)(),ue=(0,l.wW)(w),Ie=(0,r.useId)(),ot=!Z,[Qe,Me]=(0,a.Z)(!0);Ee===void 0&&(Ee=!Qe);const Ne="show-on-hover",qe=j==="transparent",bt=N(ge,ot),{contentStyle:Fe,innerWidth:Ve,innerHeight:Ue}=o($,ge,bt,Ee,_,V),it={height:bt,cursor:J?"move":"auto"},ze={width:V,height:Ee?void 0:_},[Xe,{width:St}]=(0,i.Z)();ye&&(he=ye);const Bt=k?c.wl.components.Panels.Panel.title(k):"Panel",zt=r.createElement(r.Fragment,null,!le&&k&&r.createElement("h6",{title:k,className:ue.title},k),le&&r.createElement("h6",{className:ue.title},r.createElement("button",{type:"button",className:ue.clearButtonStyles,onClick:()=>{Me(),be&&be(!Ee)},"aria-expanded":!Ee,"aria-controls":Ee?void 0:Ie},r.createElement(m.J,{name:Ee?"angle-right":"angle-down","aria-hidden":!!k,"aria-label":k?void 0:"toggle collapse panel"}),k)),r.createElement("div",{className:(0,n.cx)(ue.titleItems,Q),"data-testid":"title-items-container"},r.createElement(S,{description:H,className:Q}),z),ee===y.Gu.Streaming&&r.createElement(h.u,{content:me?"Stop streaming":"Streaming"},r.createElement(E,{className:Q,"data-testid":"panel-streaming",onClick:me},r.createElement(m.J,{name:"circle-mono",size:"md",className:ue.streaming}))),ee===y.Gu.Loading&&me&&r.createElement(f,{delay:2e3},r.createElement(h.u,{content:"Cancel query"},r.createElement(E,{className:(0,n.cx)(Q,ue.pointer),"data-testid":"panel-cancel-query",onClick:me},r.createElement(m.J,{name:"sync-slash",size:"md"})))),r.createElement("div",{className:ue.rightAligned},he&&r.createElement("div",{className:ue.rightActions},O(he,qt=>qt))));return r.createElement("div",{className:(0,n.cx)(ue.container,{[ue.transparentContainer]:qe}),style:ze,"data-testid":Bt,tabIndex:0,ref:Xe},r.createElement("div",{className:ue.loadingBarContainer},ee===y.Gu.Loading?r.createElement(u.F,{width:St,ariaLabel:"Panel loading bar"}):null),Z&&r.createElement(r.Fragment,null,r.createElement(g,{menu:F,title:k,offset:ne,dragClass:J,onOpenMenu:De},zt),de&&r.createElement("div",{className:ue.errorContainerFloating},r.createElement(R,{message:de,onClick:Pe,ariaLabel:"Panel status"}))),ot&&r.createElement("div",{className:(0,n.cx)(ue.headerContainer,J),style:it,"data-testid":"header-container"},de&&r.createElement("div",{className:Q},r.createElement(R,{message:de,onClick:Pe,ariaLabel:"Panel status"})),zt,F&&r.createElement(b,{menu:F,title:k,placement:"bottom-end",menuButtonClass:(0,n.cx)(ue.menuItem,Q,Ne),onOpenMenu:De})),!Ee&&r.createElement("div",{id:Ie,className:(0,n.cx)(ue.content,_===void 0&&ue.containNone),style:Fe},typeof U=="function"?U(Ve,Ue):U))}const O=(V,_)=>{const U=r.Children.toArray(V).filter(Boolean);return U.length>0?_(U):null},N=(V,_)=>_?V.spacing.gridSize*V.components.panel.headerHeight:0,o=(V,_,U,$,k,H)=>{const j=(V==="md"?_.components.panel.padding:0)*_.spacing.gridSize,z=j*2,F=1*2;let J=0;H&&(J=H-z-F);let Q=0;return k&&(Q=k-U-z-F),$&&(Q=U),{contentStyle:{padding:j},innerWidth:J,innerHeight:Q}},w=V=>{const{background:_,borderColor:U,padding:$}=V.components.panel;return{container:(0,n.css)({label:"panel-container",backgroundColor:_,border:`1px solid ${U}`,position:"relative",borderRadius:V.shape.radius.default,height:"100%",display:"flex",flexDirection:"column",".show-on-hover":{opacity:"0",visibility:"hidden"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1",visibility:"visible"}},"&:focus-visible":(0,d.getFocusStyles)(V),"&:focus-within:not(:focus)":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),transparentContainer:(0,n.css)({label:"panel-transparent-container",backgroundColor:"transparent",border:"1px solid transparent",boxSizing:"border-box","&:hover":{border:`1px solid ${U}`}}),loadingBarContainer:(0,n.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%"}),containNone:(0,n.css)({contain:"none"}),content:(0,n.css)({label:"panel-content",flexGrow:1,contain:"size layout"}),headerContainer:(0,n.css)({label:"panel-header",display:"flex",alignItems:"center"}),pointer:(0,n.css)({cursor:"pointer"}),streaming:(0,n.css)({label:"panel-streaming",marginRight:0,color:V.colors.success.text,"&:hover":{color:V.colors.success.text}}),title:(0,n.css)({label:"panel-title",display:"flex",marginBottom:0,padding:V.spacing(0,$),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:V.typography.h6.fontSize,fontWeight:V.typography.h6.fontWeight}),items:(0,n.css)({display:"flex"}),item:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,n.css)({visibility:"hidden"}),menuItem:(0,n.css)({label:"panel-menu",border:"none",background:V.colors.secondary.main,"&:hover":{background:V.colors.secondary.shade}}),errorContainerFloating:(0,n.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:V.zIndex.tooltip}),rightActions:(0,n.css)({display:"flex",padding:V.spacing(0,$),gap:V.spacing(1)}),rightAligned:(0,n.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,n.css)({display:"flex",height:"100%"}),clearButtonStyles:(0,n.css)({alignItems:"center",display:"flex",gap:V.spacing(.5),background:"transparent",color:V.colors.text.primary,border:"none",padding:0,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:V.typography.h6.fontSize,fontWeight:V.typography.h6.fontWeight})}},K=A;K.LoadingIndicator=t.T,K.TitleItem=E},52343:(X,L,e)=>{"use strict";e.d(L,{R:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},41804:(X,L,e)=>{"use strict";e.d(L,{l:()=>a});var t=e(41407),n=e(39953),r=e(82803);const a=({children:y,className:c,...l})=>{const d=(0,r.wW)(i);return n.createElement("div",{className:(0,t.cx)(d,c),...l},y)},i=y=>(0,t.css)({backgroundColor:y.components.panel.background,border:`1px solid ${y.components.panel.borderColor}`,borderRadius:y.shape.radius.default})},45802:(X,L,e)=>{"use strict";e.d(L,{o:()=>a});var t=e(39953),n=e(30670),r=e(12608);const a=({status:y,color:c,...l})=>{const d=i(y);return t.createElement(r.C,{text:d.text,color:d.color,icon:d.icon,tooltip:d.tooltip,...l})};a.displayName="PluginSignatureBadge";function i(y){switch(y||(y=n.Xy.invalid),y){case n.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},70393:(X,L,e)=>{"use strict";e.d(L,{RN:()=>i,h_:()=>a,lO:()=>y});var t=e(39953),n=e(49065),r=e(82803);function a(l){const{children:d,className:f,root:m,forwardedRef:u}=l,h=(0,r.l4)(),C=(0,t.useRef)(null),x=m??i();return C.current||(C.current=document.createElement("div"),f&&(C.current.className=f),C.current.style.position="relative",C.current.style.zIndex=`${h.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(C.current&&x.appendChild(C.current),()=>{C.current&&x.removeChild(C.current)}),[x]),n.createPortal(t.createElement("div",{ref:u},d),C.current)}function i(){return window.document.getElementById("grafana-portal-container")??document.body}function y(){return t.createElement("div",{id:"grafana-portal-container"})}const c=t.forwardRef((l,d)=>t.createElement(a,{...l,forwardedRef:d}));c.displayName="RefForwardingPortal"},54795:(X,L,e)=>{"use strict";e.d(L,{q:()=>P});var t=e(41407),n=e(77814),r=e.n(n),a=e(86832),i=e.n(a),y=e(39953),c=e(76485),l=e(19661),d=e(75766),f=e(64225),m=e(98198),u=e(82199),h=e(16016),C=e(26118),x=e(69679),b=e(73378),g=e(52606),p=e(82803),v=e(53039);class E extends y.PureComponent{constructor(R,I){super(R,I),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(w,K)=>{const V=w.document!==this.state.value.document,_=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(w),this.setState({value:w},()=>{if(V){const U=c.Z.serialize(_)!==c.Z.serialize(w);U&&K&&this.runOnChangeAndRunQuery(),U&&!K&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:w}=this.props,K=c.Z.serialize(this.state.value);w&&w(this.cleanText(K))},this.runOnRunQuery=()=>{const{onRunQuery:w}=this.props;w&&(w(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(w,K,V)=>{const{onBlur:_}=this.props;if(_)_();else{const U=this.lastExecutedValue?c.Z.serialize(this.lastExecutedValue):"",$=c.Z.serialize(K.value);U!==$&&this.runOnChangeAndRunQuery()}return V()},this.runOnChangeDebounced=(0,a.debounce)(this.runOnChange,500);const{onTypeahead:A,cleanText:O,portalOrigin:N,onWillApplySuggestion:o}=R;this.plugins=[(0,m.b)({onTypeahead:A,cleanText:O,portalOrigin:N,onWillApplySuggestion:o}),(0,u.d)({handler:this.runOnChangeAndRunQuery}),(0,h.z)(),(0,C.G)(),(0,x.$)(),(0,b.R)(),(0,g.w)(),...R.additionalPlugins||[]].filter(w=>w),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,f.l1)(R.query||"",R.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(R,I){const{query:A,syntax:O,syntaxLoaded:N}=this.props;if(!R.syntaxLoaded&&N&&this.editor){const w=this.editor.insertText(" ").deleteBackward(1);this.onChange(w.value,!0)}const{value:o}=this.state;A!==R.query&&A!==c.Z.serialize(o)&&this.setState({value:(0,f.l1)(A||"",O)})}cleanText(R){return R.replace(/[\r]/g,"")}render(){const{disabled:R,theme:I}=this.props,A=r()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":R}),O=S(I);return y.createElement("div",{className:(0,t.cx)(A,O.wrapper)},y.createElement("div",{className:"slate-query-field","aria-label":d.wl.components.QueryField.container},y.createElement(l.ML,{ref:N=>this.editor=N,schema:f.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:N=>{this.onChange(N.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const P=(0,p.HE)(E);P.defaultProps={onBlur:()=>{}};const S=M=>{const R=(0,v.getFocusStyles)(M);return{wrapper:(0,t.css)({"&:focus-within":R})}}},82563:(X,L,e)=>{"use strict";e.d(L,{dP:()=>m,o5:()=>d});var t=e(80100),n=e(39953),r=e(5195),a=e(75766),i=e(28384),y=e(48824),c=e(5222),l=e(3839);const d=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],f=class extends n.PureComponent{constructor(C){super(C),this.onChangeSelect=x=>{const{onIntervalChanged:b}=this.props;b&&x.value!=null&&b(x.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:C,intervals:x,tooltip:b,value:g,text:p,isLoading:v,noIntervalPicker:E,width:P,showAutoInterval:S}=this.props,M=g||"",R=this.getVariant(),I=h({intervals:x,showAutoInterval:S}),A=I.find(({value:k})=>k===M),O=u(f.offOption.value);let N=A||O;N.label===O.label&&(N={value:""});const o=N.ariaLabel,w=(0,i.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:o}),K=(0,i.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),V=N.value===""?K:w,_=(0,i.t)("refresh-picker.tooltip.interval-selected","Set auto refresh interval"),U=(0,i.t)("refresh-picker.tooltip.turned-off","Auto refresh off"),$=N.value===""?U:_;return n.createElement(y.h,{className:"refresh-picker"},n.createElement(l.h,{"aria-label":p,tooltip:b,onClick:C,variant:R,icon:v?"fa fa-spinner":"sync",style:P?{width:P}:void 0,"data-testid":a.wl.components.RefreshPicker.runButtonV2},p),!E&&n.createElement(c.d,{value:N,options:I,onChange:this.onChangeSelect,variant:R,"data-testid":a.wl.components.RefreshPicker.intervalButtonV2,"aria-label":V,tooltip:$}))}};let m=f;m.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},m.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},m.autoOption={label:"Auto",value:"auto",ariaLabel:"Select refresh from the query range"},m.isLive=C=>C===f.liveOption.value;function u(C){switch(C){case m.liveOption.value:return{label:(0,i.t)("refresh-picker.live-option.label","Live"),value:C,ariaLabel:(0,i.t)("refresh-picker.live-option.aria-label","Turn on live streaming")};case m.offOption.value:return{label:(0,i.t)("refresh-picker.off-option.label","Off"),value:C,ariaLabel:(0,i.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")};case m.autoOption.value:return{label:(0,i.t)("refresh-picker.auto-option.label",m.autoOption.label),value:C,ariaLabel:(0,i.t)("refresh-picker.auto-option.aria-label",m.autoOption.ariaLabel)}}return{label:C,value:C}}function h({intervals:C=d,showAutoInterval:x=!1}={}){const b=C.map(g=>{const p=(0,r.RA)(g),v=(0,t.Z)(p);return{label:g,value:g,ariaLabel:v}});return x&&b.unshift(u(m.autoOption.value)),b.unshift(u(m.offOption.value)),b}},18328:(X,L,e)=>{"use strict";e.d(L,{D:()=>r});var t=e(39953),n=e(28425);function r({component:a,content:i,...y}){return t.createElement(a||"span",{dangerouslySetInnerHTML:{__html:n.QX.sanitize(i)},...y})}},16557:(X,L,e)=>{"use strict";e.d(L,{c:()=>l});var t=e(41407),n=e(86832),r=e.n(n),a=e(39953),i=e(4919),y=e(12392);const c=()=>({noRadiusInput:(0,t.css)({borderBottomRightRadius:"0 !important",borderTopRightRadius:"0 !important"}),noRadiusButton:(0,t.css)({borderBottomLeftRadius:"0 !important",borderTopLeftRadius:"0 !important"})}),l=({label:d="Password",labelWidth:f,inputWidth:m=12,onReset:u,isConfigured:h,tooltip:C,placeholder:x="Password",interactive:b,...g})=>{const p=c();return a.createElement(y.W,{label:d,tooltip:C,interactive:b,labelWidth:f,inputEl:h?a.createElement(a.Fragment,null,a.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${m}`,p.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(g,"value")}),a.createElement(i.zx,{onClick:u,variant:"secondary",type:"button"},"Reset")):a.createElement("input",{type:"password",className:`gf-form-input width-${m}`,placeholder:x,...g})})};l.displayName="SecretFormField"},63423:(X,L,e)=>{"use strict";e.d(L,{m4:()=>c});var t=e(39953),n=e(4919),r=e(38637),a=e(12223);const i="configured",y="Reset",c=({isConfigured:l,onReset:d,...f})=>t.createElement(a.Lh,null,!l&&t.createElement(r.I,{...f,type:"password"}),l&&t.createElement(r.I,{...f,type:"text",disabled:!0,value:i}),l&&t.createElement(n.zx,{onClick:d,variant:"secondary"},y))},10626:(X,L,e)=>{"use strict";e.d(L,{m:()=>t.m4});var t=e(63423)},52970:(X,L,e)=>{"use strict";e.d(L,{Zk:()=>f});var t=e(41407),n=e(39953),r=e(82803),a=e(4919),i=e(12223),y=e(68421);const c="configured",l="Reset",d=m=>({configuredStyle:(0,t.css)({minHeight:m.spacing(m.components.height.md),paddingTop:m.spacing(.5),resize:"none"})}),f=({isConfigured:m,onReset:u,...h})=>{const C=(0,r.wW)(d);return n.createElement(i.Lh,null,!m&&n.createElement(y.K,{...h}),m&&n.createElement(y.K,{...h,rows:1,disabled:!0,value:c,className:(0,t.cx)(C.configuredStyle)}),m&&n.createElement(a.zx,{onClick:u,variant:"secondary"},l))}},75583:(X,L,e)=>{"use strict";e.d(L,{Z:()=>t.Zk});var t=e(52970)},26005:(X,L,e)=>{"use strict";e.d(L,{X:()=>f});var t=e(41407),n=e(86832),r=e.n(n),a=e(39953),i=e(82803),y=e(99491),c=e(10916),l=e(63202),d=e(24955);function f({options:m,value:u,onChange:h,Component:C,className:x,allowCustomValue:b,allowEmptyValue:g,placeholder:p,disabled:v,inputMinWidth:E,inputPlaceholder:P,onExpandedChange:S,autofocus:M=!1,...R}){const[I,A,O,N]=(0,l._)(M,S),o=E?Math.max(E,A):A,w=(0,i.wW)(c.N);if(!O){const K=(0,n.isObject)(u)?u.label:u,V=K!=null?String(K):void 0;return a.createElement(I,{disabled:v,Component:C||a.createElement(y.W,{className:(0,t.cx)(w.segment,{[w.queryPlaceholder]:p!==void 0&&!u,[w.disabled]:v},x)},V||p)})}return a.createElement(d.V,{...R,value:u&&!(0,n.isObject)(u)?{value:u}:u,placeholder:P,options:m,width:o,onClickOutside:()=>N(!1),allowCustomValue:b,allowEmptyValue:g,onChange:K=>{N(!1),h(K)}})}},60314:(X,L,e)=>{"use strict";e.d(L,{V:()=>u});var t=e(41407),n=e(86832),r=e.n(n),a=e(39953),i=e(65489),y=e(82803),c=e(28384),l=e(99491),d=e(24955),f=e(10916),m=e(63202);function u({value:C,onChange:x,loadOptions:b,reloadOptionsOnChange:g=!1,Component:p,className:v,allowCustomValue:E,allowEmptyValue:P,disabled:S,placeholder:M,inputMinWidth:R,inputPlaceholder:I,autofocus:A=!1,onExpandedChange:O,noOptionMessageHandler:N=h,...o}){const[w,K]=(0,i.Z)(b,[b]),[V,_,U,$]=(0,m._)(A,O),k=R?Math.max(R,_):_,H=(0,y.wW)(f.N);if(!U){const j=(0,n.isObject)(C)?C.label:C,z=j!=null?String(j):void 0;return a.createElement(V,{onClick:g?void 0:K,disabled:S,Component:p||a.createElement(l.W,{className:(0,t.cx)(H.segment,{[H.queryPlaceholder]:M!==void 0&&!C,[H.disabled]:S},v)},z||M)})}return a.createElement(d.V,{...o,value:C&&!(0,n.isObject)(C)?{value:C}:C,placeholder:I,options:w.value??[],loadOptions:g?K:void 0,width:k,noOptionsMessage:N(w),allowCustomValue:E,allowEmptyValue:P,onClickOutside:()=>{$(!1)},onChange:j=>{$(!1),x(j)}})}function h(C){return C.loading?(0,c.t)("grafana-ui.segment-async.loading","Loading options..."):C.error?(0,c.t)("grafana-ui.segment-async.error","Failed to load options"):(0,c.t)("grafana-ui.segment-async.no-options","No options found")}},61141:(X,L,e)=>{"use strict";e.d(L,{X:()=>f});var t=e(41407),n=e(39953),r=e(40920),a=e(82803),i=e(76297),y=e(99491),c=e(10916),l=e(63202);const d=14;function f({value:m,onChange:u,Component:h,className:C,placeholder:x,inputPlaceholder:b,disabled:g,autofocus:p=!1,onExpandedChange:v,...E}){const P=(0,n.useRef)(null),[S,M]=(0,n.useState)(m),[R,I]=(0,n.useState)((0,i.X1)((m||"").toString(),d).width),[A,,O,N]=(0,l._)(p,v),o=(0,a.wW)(c.N);if((0,r.Z)(P,()=>{N(!1),u(S)}),!O)return n.createElement(A,{disabled:g,Component:h||n.createElement(y.W,{className:(0,t.cx)(o.segment,{[o.queryPlaceholder]:x!==void 0&&!S,[o.disabled]:g},C)},m||x)});const w=(0,t.css)({width:`${Math.max(R+20,32)}px`});return n.createElement("input",{...E,ref:P,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",w),value:S,placeholder:b,onChange:K=>{const{width:V}=(0,i.X1)(K.target.value,d);I(V),M(K.target.value)},onBlur:()=>{N(!1),u(S)},onKeyDown:K=>{[13,27].includes(K.keyCode)&&(N(!1),u(S))}})}},75160:(X,L,e)=>{"use strict";e.d(L,{f:()=>y});var t=e(41407),n=e(39953),r=e(82803),a=e(74661),i=e(99491);const y=({label:l,htmlFor:d,children:f,fill:m})=>{const u=(0,r.wW)(c);return n.createElement(n.Fragment,null,n.createElement(a.Z,null,n.createElement(i.W,{htmlFor:d,width:12,className:u.label},l),f,m&&n.createElement("div",{className:u.fill},n.createElement(i.W,null,""))))},c=l=>({label:(0,t.css)({color:l.colors.primary.text}),fill:(0,t.css)({flexGrow:1,marginBottom:l.spacing(.5)})})},24955:(X,L,e)=>{"use strict";e.d(L,{V:()=>a});var t=e(39953),n=e(82803),r=e(9558);function a({value:i,placeholder:y="",options:c=[],onChange:l,onClickOutside:d,loadOptions:f=void 0,width:m,noOptionsMessage:u="",allowCustomValue:h=!1,allowEmptyValue:C=!1,...x}){const b=(0,t.useRef)(null),g=(0,n.l4)();let p=m>0?m/g.spacing.gridSize:void 0,v,E={};return f?(v=r.qb,E={loadOptions:f,defaultOptions:!0}):v=r.Ph,t.createElement("div",{...x,ref:b},t.createElement(v,{width:p,noOptionsMessage:u,placeholder:y,autoFocus:!0,isOpen:!0,onChange:l,options:c,value:i,closeMenuOnSelect:!1,onCloseMenu:()=>{if(b&&b.current){const P=b.current.querySelector('input[id^="react-select-"]');P&&(P.value||C)?l({value:P.value,label:P.value}):d()}},allowCustomValue:h,...E}))}},10916:(X,L,e)=>{"use strict";e.d(L,{N:()=>n});var t=e(41407);const n=r=>{const a="v1"in r?r.v1.palette:r.palette;return{segment:(0,t.css)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,t.css)({color:a.gray2}),disabled:(0,t.css)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})}}},63202:(X,L,e)=>{"use strict";e.d(L,{_:()=>a});var t=e(39953),n=e(82803),r=e(4919);const a=(i,y)=>{const c=(0,t.useRef)(null),l=(0,n.wW)(r.gN),[d,f]=(0,t.useState)(i),[m,u]=(0,t.useState)(0),h=x=>{f(x),y&&y(x)};return[({Component:x,onClick:b,disabled:g})=>t.createElement("button",{type:"button",className:l,ref:c,disabled:g,onClick:()=>{h(!0),c&&c.current&&u(c.current.clientWidth*1.25),b?.()}},x),m,d,h]}},82449:(X,L,e)=>{"use strict";e.d(L,{m:()=>r});var t=e(39953),n=e(39285);const r=({isOpen:a})=>{const i=a?"search":"angle-down",y=a?"sm":"md";return t.createElement(n.J,{name:i,size:y})}},9558:(X,L,e)=>{"use strict";e.d(L,{M8:()=>Q,qb:()=>z,gY:()=>J,NU:()=>j,Ph:()=>H,eI:()=>M.e,LT:()=>F});var t=e(39953),n=e(20463),r=e(39427),a=e(4294),i=e(24876),y=e(65183),c=e(99456),l=e(82803),d=e(39285),f=e(28409),m=e(82449),u=e(41407),h=e(38637);const C=t.forwardRef((Z,ne)=>{const{children:ee}=Z,de=(0,l.l4)(),Pe=(0,h.H)({theme:de,invalid:!1});return t.createElement("div",{className:(0,u.cx)(Pe.suffix,(0,u.css)({position:"relative"})),ref:ne},ee)});C.displayName="IndicatorsContainer";var x=e(64084),b=e(15530);const g=(0,x.B)((Z,ne,ee)=>{const de=(0,h.H)({theme:Z,invalid:ne});return{input:(0,u.cx)((0,b.nf)(Z),(0,u.css)({width:"100%",maxWidth:"100%",display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",paddingRight:0,position:"relative",boxSizing:"border-box"}),ee&&(0,u.css)({paddingLeft:0})),prefix:(0,u.cx)(de.prefix,(0,u.css)({position:"relative"}))}}),p=t.forwardRef(function({focused:ne,invalid:ee,disabled:de,children:Pe,innerProps:ye,prefix:he,...me},De){const le=(0,l.l4)(),Ee=g(le,ee,!!he);return t.createElement("div",{className:Ee.input,...ye,ref:De},he&&t.createElement("div",{className:(0,u.cx)(Ee.prefix)},he),Pe)});var v=e(68497),E=e(15246);const P=({innerProps:Z,children:ne})=>{const ee=(0,l.l4)(),de=(0,E.D)(ee);return t.createElement("div",{...Z,className:de.multiValueContainer},ne)},S=({children:Z,innerProps:ne})=>{const ee=(0,l.l4)(),de=(0,E.D)(ee);return t.createElement(v.h,{...ne,name:"times",size:"sm",className:de.multiValueRemove,tooltip:"Remove"})};var M=e(28987),R=e(56127),I=e(39592),A=e(77503);class O extends t.Component{render(){const{children:ne}=this.props,{selectProps:ee}=this.props;if(ee&&Array.isArray(ne)&&Array.isArray(ne[0])&&ee.maxVisibleValues!==void 0&&!(ee.showAllSelectedWhenOpen&&ee.menuIsOpen)){const[de,...Pe]=ne,ye=de.slice(0,ee.maxVisibleValues);return this.renderContainer([ye,...Pe])}return this.renderContainer(ne)}renderContainer(ne){const{isMulti:ee,theme:de}=this.props,Pe=(0,E.D)(de),ye=(0,u.cx)(Pe.valueContainer,ee&&Pe.valueContainerMulti);return t.createElement("div",{className:ye},ne)}}const N=(0,l.HE)(O);var o=e(65435);const w=(Z,ne)=>{if(Array.isArray(Z)){const ee=Z.filter(Boolean);return ee?.length?ee:void 0}if(typeof Z=="object")return[Z];if(typeof Z=="string"||typeof Z=="number"){const ee=K(Z,ne);if(ee)return[ee]}},K=(Z,ne)=>{for(const ee of ne)if("options"in ee){let de=K(Z,ee.options);if(de)return de}else if("value"in ee&&ee.value===Z)return ee;return null},V=Z=>Z.map(({description:ne,...ee})=>ee),_=Z=>{const{maxVisibleValues:ne,selectedValuesCount:ee,menuIsOpen:de,showAllSelectedWhenOpen:Pe}=Z;return ne!==void 0&&ee>ne&&!(Pe&&de)?t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",ee-ne,")"):null},U=Z=>{const{children:ne,innerProps:ee,selectProps:{menuIsOpen:de,onMenuClose:Pe,onMenuOpen:ye},isFocused:he,isMulti:me,getValue:De,innerRef:le}=Z,Ee=Z.selectProps;return Ee.renderControl?t.createElement(Ee.renderControl,{isOpen:de,value:me?De():De()[0],ref:le,onClick:de?Pe:ye,onBlur:Pe,disabled:!!Ee.disabled,invalid:!!Ee.invalid}):t.createElement(p,{ref:le,innerProps:ee,prefix:Ee.prefix,focused:he,invalid:!!Ee.invalid,disabled:!!Ee.disabled},ne)};function $({allowCustomValue:Z=!1,allowCreateWhileLoading:ne=!1,"aria-label":ee,autoFocus:de=!1,backspaceRemovesValue:Pe=!0,blurInputOnSelect:ye,cacheOptions:he,className:me,closeMenuOnSelect:De=!0,components:le,createOptionPosition:Ee="last",defaultOptions:be,defaultValue:ge,disabled:ue=!1,filterOption:Ie,formatCreateLabel:ot,getOptionLabel:Qe,getOptionValue:Me,inputValue:Ne,invalid:qe,isClearable:bt=!1,id:Fe,isLoading:Ve=!1,isMulti:Ue=!1,inputId:it,isOpen:ze,isOptionDisabled:Xe,isSearchable:St=!0,loadOptions:Bt,loadingMessage:zt="Loading options...",maxMenuHeight:qt=300,minMenuHeight:Qt,maxVisibleValues:yn,menuPlacement:Zt="auto",menuPosition:re,menuShouldPortal:Te=!0,noOptionsMessage:We=(0,n.t)("grafana-ui.select.no-options-label","No options found"),onBlur:Je,onChange:je,onCloseMenu:pt,onCreateOption:ft,onInputChange:Tt,onKeyDown:Ye,onMenuScrollToBottom:Ce,onMenuScrollToTop:oe,onOpenMenu:pe,onFocus:Re,openMenuOnFocus:ae=!1,options:ve=[],placeholder:xe=(0,n.t)("grafana-ui.select.placeholder","Choose"),prefix:Ge,renderControl:at,showAllSelectedWhenOpen:dt=!0,tabSelectsValue:st=!0,value:Pt,virtualized:we=!1,width:Le,isValidNewOption:Ke,formatOptionLabel:ht,hideSelectedOptions:xt,...lt}){const Rt=(0,l.l4)(),Ut=(0,E.D)(Rt),Xt=(0,t.useRef)(null),[$n,Mt]=(0,t.useState)(!1),yt=(0,o.O)(Rt,Le),[At,Ht]=(0,t.useState)(!!Ne);(0,t.useEffect)(()=>{if(Bt&&ze&&Xt.current&&Xt.current.controlRef&&Zt==="auto"){const Nn=window.innerHeight-Xt.current.controlRef.getBoundingClientRect().bottom;Mt(Nn<qt)}},[qt,Zt,Bt,ze]);const tn=(0,t.useCallback)((Nn,ia)=>{if(Ue&&Nn==null)return je([],ia);je(Nn,ia)},[Ue,je]);let gn=r.ZP;const mn={};let Tn={},ln;if(Ue&&Bt)ln=Pt;else if(Ue&&Pt&&Array.isArray(Pt)&&!Bt)ln=Pt.map(Nn=>{const ia=K(Nn.value??Nn,ve);return!Z||ia?ia:typeof Nn=="string"?(0,c.E)(Nn):Nn});else if(Bt){const Nn=ge||Pt;ln=Nn?[Nn]:[]}else ln=w(Pt,ve);const Wn={"aria-label":ee,autoFocus:de,backspaceRemovesValue:Pe,blurInputOnSelect:ye,captureMenuScroll:Ce||oe,closeMenuOnSelect:De,defaultValue:ge,disabled:ue,filterOption:At?Ie:null,getOptionLabel:Qe,getOptionValue:Me,hideSelectedOptions:xt,inputValue:Ne,invalid:qe,isClearable:bt,id:Fe,isDisabled:ue,isLoading:Ve,isMulti:Ue,inputId:it,isOptionDisabled:Xe,isSearchable:St,maxMenuHeight:qt,minMenuHeight:Qt,maxVisibleValues:yn,menuIsOpen:ze,menuPlacement:Zt==="auto"&&$n?"top":Zt,menuPosition:re,menuShouldBlockScroll:!0,menuPortalTarget:Te&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:Je,onChange:tn,onInputChange:(Nn,ia)=>{Ht(!!Nn),Tt?.(Nn,ia)},onKeyDown:Ye,onMenuClose:pt,onMenuOpen:pe,onMenuScrollToBottom:Ce,onMenuScrollToTop:oe,onFocus:Re,formatOptionLabel:ht,openMenuOnFocus:ae,options:we?V(ve):ve,placeholder:xe,prefix:Ge,renderControl:at,showAllSelectedWhenOpen:dt,tabSelectsValue:st,value:Ue?ln:ln?.[0]};Z&&(gn=y.Z,mn.allowCreateWhileLoading=ne,mn.formatCreateLabel=ot??k,mn.onCreateOption=ft,mn.createOptionPosition=Ee,mn.isValidNewOption=Ke),Bt&&(gn=Z?i.Z:a.Z,Tn={loadOptions:Bt,cacheOptions:he,defaultOptions:be});const On=we?R.r4:R.SA;return t.createElement(t.Fragment,null,t.createElement(gn,{ref:Xt,components:{MenuList:On,Group:I.n,ValueContainer:N,IndicatorsContainer(Nn){const{selectProps:ia}=Nn,{value:da,showAllSelectedWhenOpen:Da,maxVisibleValues:ja,menuIsOpen:Na}=ia;if(ja!==void 0){const Ha=da.length,gt=[...Nn.children];return gt.splice(-1,0,_({maxVisibleValues:ja,selectedValuesCount:Ha,showAllSelectedWhenOpen:Da,menuIsOpen:Na})),t.createElement(C,{...Nn},gt)}return t.createElement(C,{...Nn})},IndicatorSeparator(){return t.createElement(t.Fragment,null)},Control:U,Option:R.Qn,ClearIndicator(Nn){const{clearValue:ia}=Nn;return t.createElement(d.J,{name:"times",role:"button","aria-label":"select-clear-value",className:Ut.singleValueRemove,onMouseDown:da=>{da.preventDefault(),da.stopPropagation(),ia()}})},LoadingIndicator(){return t.createElement(f.$,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:Ut.loadingMessage},zt)},NoOptionsMessage(){return t.createElement("div",{className:Ut.loadingMessage,"aria-label":"No options provided"},We)},DropdownIndicator(Nn){return t.createElement(m.m,{isOpen:Nn.selectProps.menuIsOpen})},SingleValue(Nn){return t.createElement(A.P,{...Nn,isDisabled:ue})},SelectContainer:M.e,MultiValueContainer:P,MultiValueRemove:ue?()=>null:S,...le},styles:yt,className:me,...Wn,...mn,...Tn,...lt}))}function k(Z){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,Z),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function H(Z){return t.createElement($,{...Z})}function j(Z){return t.createElement($,{...Z,isMulti:!0})}function z(Z){return t.createElement($,{...Z})}function F(Z){return t.createElement($,{virtualized:!0,...Z})}function J(Z){return t.createElement($,{virtualized:!0,...Z})}function Q(Z){return t.createElement($,{...Z,isMulti:!0})}},28987:(X,L,e)=>{"use strict";e.d(L,{e:()=>d});var t=e(41407),n=e(39953),r=e(6413),a=e(64084),i=e(82803),y=e(53039),c=e(15530),l=e(38637);const d=m=>{const{isDisabled:u,isFocused:h,children:C,selectProps:{invalid:x=!1}}=m,b=(0,i.l4)(),g=f(b,h,u,x);return n.createElement(r.c.SelectContainer,{...m,className:(0,t.cx)(g.wrapper,m.className)},C)},f=(0,a.B)((m,u,h,C)=>{const x=(0,l.H)({theme:m,invalid:C});return{wrapper:(0,t.cx)(x.wrapper,(0,c.RK)(m,C),u&&(0,t.css)((0,y.getFocusStyles)(m)),h&&x.inputDisabled,(0,t.css)({position:"relative",boxSizing:"border-box",flexDirection:"row",flexWrap:"wrap",alignItems:"stretch",justifyContent:"space-between",minHeight:"32px",height:"auto",maxWidth:"100%",padding:0,cursor:h?"not-allowed":"pointer"}))}})},56127:(X,L,e)=>{"use strict";e.d(L,{Qn:()=>x,SA:()=>m,r4:()=>C});var t=e(41407),n=e(86832),r=e.n(n),a=e(39953),i=e(68084),y=e(17393),c=e(82803),l=e(64447),d=e(39285),f=e(15246);const m=({children:b,maxHeight:g,innerRef:p,innerProps:v})=>{const E=(0,c.l4)(),P=(0,f.D)(E);return a.createElement("div",{...v,className:P.menu,style:{maxHeight:g},"aria-label":"Select options menu"},a.createElement(l.$,{scrollRefCallback:p,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},b))};m.displayName="SelectMenu";const u=37,h=7,C=({children:b,maxHeight:g,options:p,getValue:v})=>{const E=(0,c.l4)(),P=(0,f.D)(E),[S]=v(),R=(S?p.findIndex(N=>N.value===S.value):0)*u;if(!Array.isArray(b))return null;const A=((0,n.max)(p.map(N=>N.label?.length))??0)*h,O=Math.min(p.length*u,g);return a.createElement(i.t7,{className:P.menu,height:O,width:A,"aria-label":"Select options menu",itemCount:b.length,itemSize:u,initialScrollOffset:R},({index:N,style:o})=>a.createElement("div",{style:{...o,overflow:"hidden"}},b[N]))};C.displayName="VirtualizedSelectMenu";const x=({children:b,data:g,innerProps:p,innerRef:v,isFocused:E,isSelected:P,renderOptionLabel:S})=>{const M=(0,c.l4)(),R=(0,f.D)(M),I=g.icon?(0,y.iJ)(g.icon):void 0,{onMouseMove:A,onMouseOver:O,...N}=p;return a.createElement("div",{ref:v,className:(0,t.cx)(R.option,E&&R.optionFocused,P&&R.optionSelected,g.isDisabled&&R.optionDisabled),...N,"aria-label":"Select option",title:g.title},I&&a.createElement(d.J,{name:I,className:R.optionIcon}),g.imgUrl&&a.createElement("img",{className:R.optionImage,src:g.imgUrl,alt:g.label||String(g.value)}),a.createElement("div",{className:R.optionBody},a.createElement("span",null,S?S(g):b),g.description&&a.createElement("div",{className:R.optionDescription},g.description),g.component&&a.createElement(g.component,null)))};x.displayName="SelectMenuOptions"},39592:(X,L,e)=>{"use strict";e.d(L,{n:()=>l});var t=e(41407),n=e(39953),r=e(64084),a=e(82803),i=e(39285);const y=(0,r.B)(d=>({header:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%",borderBottom:`1px solid ${d.colors.background.secondary}`,"&:hover":{color:d.colors.text.maxContrast}}),label:(0,t.css)({flexGrow:1}),icon:(0,t.css)({paddingRight:"2px"})}));class c extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(f=>({expanded:!f.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:f}=this.props.selectProps.value;f&&this.props.options.some(m=>m.value===f)&&this.setState({expanded:!0})}}componentDidUpdate(f){f.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:f,label:m,theme:u}=this.props,{expanded:h}=this.state,C=y(u);return n.createElement("div",null,n.createElement("div",{className:C.header,onClick:this.onToggleChildren,role:"presentation"},n.createElement("span",{className:C.label},m),n.createElement(i.J,{className:C.icon,name:h?"angle-up":"angle-down"})),h&&f)}}const l=(0,a.HE)(c)},77503:(X,L,e)=>{"use strict";e.d(L,{P:()=>u});var t=e(41407),n=e(39953),r=e(6413),a=e(17393),i=e(82803);function y(C,x={}){const{duration:b=250,delay:g=250}=x,[p,v]=(0,n.useState)(C),E=(0,n.useRef)();return(0,n.useEffect)(()=>{let P;if(C)P=setTimeout(()=>{E.current=new Date,v(C)},g);else{const S=E.current?Date.now()-E.current.valueOf():0,M=()=>{E.current=void 0,v(C)};S>=b?M():P=setTimeout(M,b-S)}return()=>{P&&(clearTimeout(P),P=void 0)}},[C,b,g]),p}var c=e(39285),l=e(28409),d=e(63618),f=e(69043);const m=C=>({singleValue:(0,t.css)({label:"singleValue",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%",gridArea:"1 / 1 / 2 / 3"}),spinnerWrapper:(0,t.css)({width:"16px",height:"16px",display:"inline-block",marginRight:"10px",position:"relative",verticalAlign:"middle",overflow:"hidden"}),spinnerIcon:(0,t.css)({width:"100%",height:"100%",position:"absolute"}),optionIcon:(0,t.css)({marginRight:C.spacing(1),color:C.colors.text.secondary}),disabled:(0,t.css)({color:C.colors.text.disabled}),isOpen:(0,t.css)({color:C.colors.text.disabled})}),u=C=>{const{children:x,data:b,isDisabled:g}=C,p=(0,i.wW)(m),v=y(b.loading||!1,{delay:250,duration:750}),E=b.icon?(0,a.iJ)(b.icon):void 0;return n.createElement(r.c.SingleValue,{...C,className:(0,t.cx)(p.singleValue,g&&p.disabled,C.selectProps.menuIsOpen&&p.isOpen)},b.imgUrl?n.createElement(h,{loading:v,imgUrl:b.imgUrl,styles:p,alt:String(b.label??b.value)}):n.createElement(n.Fragment,null,n.createElement(f.R,{horizontal:!0,size:16,visible:v,duration:150},n.createElement("div",{className:p.spinnerWrapper},n.createElement(l.$,{className:p.spinnerIcon,inline:!0}))),E&&n.createElement(c.J,{name:E,role:"img",className:p.optionIcon})),!b.hideText&&x)},h=C=>n.createElement("div",{className:C.styles.spinnerWrapper},n.createElement(d.n,{duration:150,visible:C.loading},n.createElement(l.$,{className:C.styles.spinnerIcon,inline:!0})),n.createElement(d.n,{duration:150,visible:!C.loading},n.createElement("img",{className:C.styles.spinnerIcon,src:C.imgUrl,alt:C.alt})))},15246:(X,L,e)=>{"use strict";e.d(L,{D:()=>r});var t=e(41407),n=e(64084);const r=(0,n.B)(a=>({menu:(0,t.css)({label:"grafana-select-menu",background:a.components.dropdown.background,boxShadow:a.shadows.z3,position:"relative",minWidth:"100%",zIndex:1}),option:(0,t.css)({label:"grafana-select-option",padding:"8px",display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",borderLeft:"2px solid transparent","&:hover":{background:a.colors.action.hover}}),optionIcon:(0,t.css)({marginRight:a.spacing(1)}),optionImage:(0,t.css)({label:"grafana-select-option-image",width:"16px",marginRight:"10px"}),optionDescription:(0,t.css)({label:"grafana-select-option-description",fontWeight:"normal",fontSize:a.typography.size.sm,color:a.colors.text.secondary,whiteSpace:"normal",lineHeight:a.typography.body.lineHeight}),optionBody:(0,t.css)({label:"grafana-select-option-body",display:"flex",fontWeight:a.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),optionFocused:(0,t.css)({label:"grafana-select-option-focused",background:a.colors.action.focus}),optionSelected:(0,t.css)({background:a.colors.action.selected}),optionDisabled:(0,t.css)({label:"grafana-select-option-disabled",backgroundColor:a.colors.action.disabledBackground,color:a.colors.action.disabledText,cursor:"not-allowed"}),singleValue:(0,t.css)({label:"grafana-select-single-value",color:a.components.input.text,gridArea:"1 / 1 / 2 / 3",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%"}),valueContainer:(0,t.css)({label:"grafana-select-value-container",alignItems:"center",display:"grid",position:"relative",boxSizing:"border-box",flex:"1 1 0%",outline:"none",overflow:"hidden"}),valueContainerMulti:(0,t.css)({label:"grafana-select-value-container-multi",flexWrap:"wrap",display:"flex"}),loadingMessage:(0,t.css)({label:"grafana-select-loading-message",padding:a.spacing(1),textAlign:"center",width:"100%"}),multiValueContainer:(0,t.css)({label:"grafana-select-multi-value-container",display:"flex",alignItems:"center",lineHeight:1,background:a.colors.background.secondary,borderRadius:a.shape.radius.default,margin:a.spacing(.25,1,.25,0),padding:a.spacing(.25,0,.25,1),color:a.colors.text.primary,fontSize:a.typography.size.sm,"&:hover":{background:a.colors.emphasize(a.colors.background.secondary)}}),multiValueRemove:(0,t.css)({label:"grafana-select-multi-value-remove",margin:a.spacing(0,.5),cursor:"pointer",svg:{marginBottom:0}}),singleValueRemove:(0,t.css)({cursor:"pointer","&:hover":{color:a.colors.text.primary}})}))},65435:(X,L,e)=>{"use strict";e.d(L,{O:()=>r,Z:()=>n});var t=e(39953);function n(a){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(i){return{...i,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:i})=>({maxHeight:i}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:i=>({...i,color:a.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function r(a,i){return(0,t.useMemo)(()=>({...n(a),menuPortal:y=>({...y,zIndex:a.zIndex.portal}),menu:({top:y,bottom:c,position:l})=>({top:y,bottom:c,position:l,minWidth:"100%",zIndex:a.zIndex.dropdown}),container:()=>({width:i?a.spacing(i):"100%",display:i==="auto"?"inline-flex":"flex"}),option:(y,c)=>({...y,opacity:c.isDisabled?.5:1})}),[a,i])}},32109:()=>{},45679:(X,L,e)=>{"use strict";e.d(L,{F:()=>h});var t=e(86832),n=e.n(t),r=e(39953),a=e(23997),i=e(63302),y=e(7063),c=e(36376),l=e(61782),d=e(82696),f=e(55705),m=e(82563);function u(C){return{label:C,value:stringToMs(C)}}class h extends r.PureComponent{constructor(x){super(x),this.propsSubject=new a.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,l.w)(x=>m.dP.isLive(x.interval)?(0,i.of)({}):x.loading?y.C:(0,c.F)((0,f.e0)(x.interval))),(0,d.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(x){m.dP.isLive(x.interval)&&m.dP.isLive(this.props.interval)||(0,t.isEqual)(x,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},86609:(X,L,e)=>{"use strict";e.d(L,{PR:()=>g,ZH:()=>m,rD:()=>h});var t=e(86832),n=e.n(t),r=e(53470),a=e(64943),i=e(60695),y=e(38450),c=e(97898),l=e(52716),d=e(49231);const f=["reduceOptions","orientation"];function m(p,v,E){let P=p.options;if(p.fieldConfig=p.fieldConfig||{defaults:{},overrides:[]},v==="singlestat"&&E.angular)return u(p,E);for(const S of f)E.hasOwnProperty(S)&&(P[S]=(0,t.cloneDeep)(E[S]));return P}function u(p,v){const E=v.angular,P=r.TB.getIfExists(E.valueName),S={reduceOptions:{calcs:[P?P.id:r.gz.mean]},orientation:a.wm.Horizontal},M={};if(E.format&&(M.unit=E.format),E.tableColumn&&(S.reduceOptions.fields=`/^${E.tableColumn}$/`),E.nullPointMode&&(M.nullValueMode=E.nullPointMode),E.nullText&&(M.noValue=E.nullText),(E.decimals||E.decimals===0)&&(M.decimals=E.decimals),E.thresholds&&E.colors){const I=E.thresholds.split(",").map(O=>Number(O.trim())),A=[];for(const O of E.colors){const N=A.length-1;N>=0?A.push({value:I[N],color:O}):A.push({value:-1/0,color:O})}M.thresholds={mode:i.H.Absolute,steps:A}}const R=(0,y.Jb)(E,M.thresholds);return R&&R.length&&(M.mappings=R),E.gauge&&E.gauge.show&&(M.min=E.gauge.minValue,M.max=E.gauge.maxValue),p.fieldConfig.defaults=M,S}function h(p){if(!p.options)return{};const v=parseFloat(p.pluginVersion||"6.1");let E=p.options;v<6.2&&(E=x(E)),v<6.3&&(E=C(E));const{fieldOptions:P}=E;if(v<6.6&&P){if(P&&P.override){const{override:R,...I}=E.fieldOptions;E={...E,fieldOptions:{...I,overrides:[]}}}let S=P?.defaults?.thresholds;S?delete P.defaults.thresholds:(S=P?.thresholds,delete P.thresholds),S&&(P.defaults.thresholds={mode:i.H.Absolute,steps:S});const{defaults:M}=P;M.color&&typeof M.color=="string"&&(M.color={mode:c.S.Fixed,fixedColor:M.color}),(0,l.gb)(M)}if(v<7&&(p.fieldConfig=p.fieldConfig||{defaults:{},overrides:[]},p.fieldConfig={defaults:P&&P.defaults?{...p.fieldConfig.defaults,...P.defaults}:p.fieldConfig.defaults,overrides:P&&P.overrides?[...p.fieldConfig.overrides,...P.overrides]:p.fieldConfig.overrides},P&&(E.reduceOptions={values:P.values,limit:P.limit,calcs:P.calcs}),delete E.fieldOptions),v<7.1){const S=p.fieldConfig.defaults.title;S!=null&&(p.fieldConfig.defaults.displayName=S,delete p.fieldConfig.defaults.title)}if(v<8){const S=p.fieldConfig?.defaults;let M=S?.unit;M==="percent"?((0,t.isNumber)(S.min)||(S.min=0),(0,t.isNumber)(S.max)||(S.max=100)):M==="percentunit"&&((0,t.isNumber)(S.min)||(S.min=0),(0,t.isNumber)(S.max)||(S.max=1))}return E}function C(p){const{fieldOptions:v}=p;if(!v)return p;const{mappings:E,...P}=p.fieldOptions;let S;return p.thresholds&&(S={mode:i.H.Absolute,steps:b(p.thresholds)}),{...p,fieldOptions:{...P,defaults:{...v.defaults,mappings:E,thresholds:S}}}}function x(p){const{valueOptions:v}=p;if(!v)return p;const E={},P={};if(E.mappings=p.valueMappings,E.thresholds=p.thresholds,E.defaults=P,P.unit=v.unit,P.decimals=v.decimals,v.stat){const M=r.TB.get(v.stat);M&&(E.calcs=[M.id])}P.min=p.minValue,P.max=p.maxValue;const S={...p,fieldOptions:E};return(0,t.omit)(S,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function b(p){if(!p||!p.length)return;const v=p.map(E=>({value:E.value===null?-1/0:E.value,color:E.color}));return(0,d.bP)(v),v[0].value=-1/0,v}function g(p){return(0,y.Jb)(p)}},76117:(X,L,e)=>{"use strict";e.d(L,{PR:()=>t.PR,ZH:()=>t.ZH,rD:()=>t.rD});var t=e(86609)},98263:(X,L,e)=>{"use strict";e.d(L,{U:()=>m});var t=e(41407),n=e(93986),r=e(66894),a=e(39953),i=e(82803),y=e(39361);const c=u=>{const{value:h,children:C,visible:x,placement:b,tipFormatter:g,...p}=u,v=(0,a.useRef)(null),E=(0,a.useRef)(null),P=(0,i.wW)(l);function S(){E.current!==null&&cancelAnimationFrame(E.current)}function M(){E.current=requestAnimationFrame(()=>{v.current?.forceAlign()})}return(0,a.useEffect)(()=>(x?M():S(),S),[h,x]),a.createElement(y.Z,{overlayClassName:P.tooltip,placement:b,overlay:g??h,overlayInnerStyle:{minHeight:"auto"},ref:v,visible:x,...p},C)},l=u=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:u.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:u.zIndex.tooltip})}),d=c;var f=e(35226);const m=({min:u,max:h,onChange:C,onAfterChange:x,orientation:b="horizontal",reverse:g,step:p,formatTooltipResult:v,value:E,tooltipAlwaysVisible:P=!0})=>{const S=(0,a.useCallback)(N=>{C?.(typeof N=="number"?[N,N]:N)},[C]),M=(0,a.useCallback)(N=>{x?.(typeof N=="number"?[N,N]:N)},[x]),R=b==="horizontal",I=(0,i.l4)(),A=(0,f.W)(I,R),O=(N,o)=>a.createElement(d,{value:o.value,visible:P||o.dragging,tipFormatter:v?()=>v(o.value):void 0,placement:R?"top":"right"},N);return a.createElement("div",{className:(0,t.cx)(A.container,A.slider)},a.createElement(n.Global,{styles:A.tooltip}),a.createElement(r.Z,{min:u,max:h,step:p,defaultValue:E,range:!0,onChange:S,onAfterChange:M,vertical:!R,reverse:g,handleRender:O}))};m.displayName="RangeSlider"},23527:(X,L,e)=>{"use strict";e.d(L,{i:()=>l});var t=e(41407),n=e(93986),r=e(66894),a=e(39953),i=e(82803),y=e(38637),c=e(35226);const l=({min:d,max:f,onChange:m,onAfterChange:u,orientation:h="horizontal",reverse:C,step:x,value:b,ariaLabelForHandle:g,marks:p,included:v})=>{const E=h==="horizontal",P=(0,i.l4)(),S=(0,c.W)(P,E,!!p),M=r.Z,[R,I]=(0,a.useState)(b??d),A=(0,a.useCallback)(V=>{const _=typeof V=="number"?V:V[0];I(_),m?.(_)},[I,m]),O=(0,a.useCallback)(V=>{let _=+V.target.value;Number.isNaN(_)&&(_=0),I(_),m&&m(_),u&&u(_)},[m,u]),N=(0,a.useCallback)(V=>{const _=+V.target.value;_>f?I(f):_<d&&I(d)},[f,d]),o=(0,a.useCallback)(V=>{const _=typeof V=="number"?V:V[0];u?.(_)},[u]),w=E?[]:[S.sliderInputVertical],K=E?[]:[S.sliderInputFieldVertical];return a.createElement("div",{className:(0,t.cx)(S.container,S.slider)},a.createElement(n.Global,{styles:S.tooltip}),a.createElement("div",{className:(0,t.cx)(S.sliderInput,...w)},a.createElement(M,{min:d,max:f,step:x,defaultValue:b,value:R,onChange:A,onAfterChange:o,vertical:!E,reverse:C,ariaLabelForHandle:g,marks:p,included:v}),a.createElement(y.I,{type:"text",className:(0,t.cx)(S.sliderInputField,...K),value:R,onChange:O,onBlur:N,min:d,max:f})))};l.displayName="Slider"},35226:(X,L,e)=>{"use strict";e.d(L,{W:()=>a});var t=e(41407),n=e(93986),r=e(64084);const a=(0,r.B)((i,y,c=!1)=>{const{spacing:l}=i,d=i.colors.border.strong,f=i.colors.primary.main,m=i.colors.primary.main,h=`box-shadow: 0px 0px 0px 6px ${i.colors.primary.transparent}`;return{container:(0,t.css)({width:"100%",margin:y?"inherit":l(1,3,1,1),paddingBottom:y&&c?i.spacing(1):"inherit",height:y?"auto":"100%"}),slider:(0,t.css)`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${i.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${i.colors.text.disabled};
        font-size: ${i.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${i.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${m};
        box-shadow: ${i.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${h};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${i.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${i.colors.text.primary};
        border-color: ${i.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${f};
      }
      .rc-slider-rail {
        background-color: ${d};
        cursor: pointer;
      }
    `,tooltip:(0,n.css)`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${i.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${i.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}),sliderInputVertical:(0,t.css)({flexDirection:"column",height:"100%",".rc-slider":{margin:0,order:2}}),sliderInputField:(0,t.css)({marginLeft:i.spacing(3),width:"60px",input:{textAlign:"center"}}),sliderInputFieldVertical:(0,t.css)({margin:`0 0 ${i.spacing(3)} 0`,order:1})}})},52542:(X,L,e)=>{"use strict";e.d(L,{b:()=>x});var t=e(86832),n=e(39953),r=e(99977),a=e(89591),i=e(73254),y=e(34547),c=e(79469),l=e(80115),d=e(95966),f=e(82837),m=e(53305),u=e(12714);function h(b,g){const p=b.y.values.length,v={...b.y.config,...g},E=b.x??{name:"",values:[...Array(p).keys()],type:a.fS.number,config:{}};let P={refId:"sparkline",fields:[E,{...b.y,config:v}],length:p};return(0,f.lP)(E.values)||(P=(0,m.aK)(P,0)),(0,u.w)({frame:P,refFieldPseudoMin:b.timeRange?.from.valueOf(),refFieldPseudoMax:b.timeRange?.to.valueOf()})}const C={drawStyle:y.l8.Line,showPoints:y.Jp.Auto,axisPlacement:y.LB.Hidden,pointSize:2};class x extends n.PureComponent{constructor(g){super(g);const p=h(g.sparkline,g.config);this.state={data:(0,d.Bj)(p,(0,d.i7)(p)),alignedDataFrame:p,configBuilder:this.prepareConfig(p)}}static getDerivedStateFromProps(g,p){const v=h(g.sparkline,g.config);return v?{...p,data:(0,d.Bj)(v,(0,d.i7)(v)),alignedDataFrame:v}:{...p}}componentDidUpdate(g,p){const{alignedDataFrame:v}=this.state;if(!v)return;let E=!1;g.sparkline!==this.props.sparkline?E=!(0,r.Ch)(this.state.alignedDataFrame,p.alignedDataFrame):E=!(0,t.isEqual)(g.config,this.props.config),E&&this.setState({configBuilder:this.prepareConfig(v)})}getYRange(g){let{min:p,max:v}=this.state.alignedDataFrame.fields[1].state?.range;return p===v?(p===0?v=100:(p=0,v*=2),[p,v]):[Math.max(p,g.config.min??-1/0),Math.min(v,g.config.max??1/0)]}prepareConfig(g){const{theme:p}=this.props,v=new l.U;v.setCursor({show:!1,x:!1,y:!1});const E=g.fields[0];v.addScale({scaleKey:"x",orientation:y.wN.Horizontal,direction:y.bQ.Right,isTime:!1,range:()=>{const{sparkline:P}=this.props;if(P.x){if(P.timeRange&&P.x.type===a.fS.time)return[P.timeRange.from.valueOf(),P.timeRange.to.valueOf()];const S=P.x.values;return[S[0],S[S.length-1]]}return[0,P.y.values.length-1]}}),v.addAxis({scaleKey:"x",theme:p,placement:y.LB.Hidden});for(let P=0;P<g.fields.length;P++){const S=g.fields[P],M=S.config,R={...C,...M.custom};if(S===E||S.type!==a.fS.number)continue;const I=M.unit||"__fixed";v.addScale({scaleKey:I,orientation:y.wN.Vertical,direction:y.bQ.Up,range:()=>this.getYRange(S)}),v.addAxis({scaleKey:I,theme:p,placement:y.LB.Hidden});const A=(0,i.fD)(S),O=A.getCalculator(S,p)(0,0),N=R.drawStyle===y.l8.Points?y.Jp.Always:R.showPoints;v.addSeries({pxAlign:!1,scaleKey:I,theme:p,colorMode:A,thresholds:M.thresholds,drawStyle:R.drawStyle,lineColor:R.lineColor??O,lineWidth:R.lineWidth,lineInterpolation:R.lineInterpolation,showPoints:N,pointSize:R.pointSize,fillOpacity:R.fillOpacity,fillColor:R.fillColor,lineStyle:R.lineStyle,gradientMode:R.gradientMode})}return v}render(){const{data:g,configBuilder:p}=this.state,{width:v,height:E}=this.props;return n.createElement(c.N,{data:g,config:p,width:v,height:E})}}},28409:(X,L,e)=>{"use strict";e.d(L,{$:()=>y});var t=e(41407),n=e(39953),r=e(64084),a=e(39285);const i=(0,r.B)((c,l)=>(0,t.css)([{fontSize:typeof c=="string"?c:`${c}px`},l&&{display:"inline-block"}])),y=({className:c,inline:l=!1,iconClassName:d,style:f,size:m=16})=>{const u=i(m,l);return n.createElement("div",{"data-testid":"Spinner",style:f,className:(0,t.cx)(u,c)},n.createElement(a.J,{className:(0,t.cx)("fa-spin",d),name:"fa fa-spinner","aria-label":"loading spinner"}))}},54173:(X,L,e)=>{"use strict";e.d(L,{m:()=>y});var t=e(86832),n=e.n(t),r=e(39953),a=e(53470),i=e(9558);class y extends r.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:l,allowMultiple:d,defaultStat:f,onChange:m}=this.props,u=a.TB.list(l);if(u.length!==l.length){const h=u.map(x=>x.id),C=(0,t.difference)(l,h);console.warn("Unknown stats",C,l),m(u.map(x=>x.id))}!d&&l.length>1&&(console.warn("Removing extra stat",l),m([l[0]])),f&&l.length<1&&m([f])},this.onSelectionChange=l=>{const{onChange:d}=this.props;Array.isArray(l)?d(l.map(f=>f.value)):d(l&&l.value?[l.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(l){this.checkInput()}render(){const{stats:l,allowMultiple:d,defaultStat:f,placeholder:m,className:u,menuPlacement:h,width:C,inputId:x}=this.props,b=a.TB.selectOptions(l);return r.createElement(i.Ph,{value:b.current,className:u,isClearable:!f,isMulti:d,width:C,isSearchable:!0,options:b.options,placeholder:m,onChange:this.onSelectionChange,menuPlacement:h,inputId:x})}}y.defaultProps={allowMultiple:!1}},26286:(X,L,e)=>{"use strict";e.d(L,{r:()=>d,x:()=>f});var t=e(41407),n=e(86832),r=e.n(n),a=e(39953),i=e(14255),y=e(82803),c=e(64084),l=e(53039);const d=a.forwardRef(({value:u,checked:h,onChange:C,id:x,label:b,disabled:g,invalid:p=!1,...v},E)=>{h&&(0,i.d)("Switch","checked prop","value");const P=(0,y.l4)(),S=m(P),M=(0,a.useRef)(x||(0,n.uniqueId)("switch-"));return a.createElement("div",{className:(0,t.cx)(S.switch,p&&S.invalid)},a.createElement("input",{type:"checkbox",disabled:g,checked:u,onChange:R=>{!g&&C?.(R)},id:M.current,...v,ref:E}),a.createElement("label",{htmlFor:M.current,"aria-label":b??"Toggle switch"}))});d.displayName="Switch";const f=a.forwardRef(({transparent:u,className:h,showLabel:C,label:x,value:b,id:g,invalid:p,...v},E)=>{const P=(0,y.l4)(),S=m(P,u);return a.createElement("div",{className:(0,t.cx)(S.inlineContainer,h,v.disabled&&S.disabled,p&&S.invalid)},C&&a.createElement("label",{htmlFor:g,className:(0,t.cx)(S.inlineLabel,b&&S.inlineLabelEnabled,"inline-switch-label")},x),a.createElement(d,{...v,id:g,label:x,ref:E,value:b}))});f.displayName="Switch";const m=(0,c.B)((u,h)=>({switch:(0,t.css)({width:"32px",height:"16px",position:"relative",input:{opacity:0,left:"-100vw",zIndex:-1e3,position:"absolute","&:disabled + label":{background:u.colors.action.disabledBackground,cursor:"not-allowed"},"&:checked + label":{background:u.colors.primary.main,borderColor:u.colors.primary.main,"&:hover":{background:u.colors.primary.shade},"&::after":{transform:"translate3d(18px, -50%, 0)",background:u.colors.primary.contrastText}},"&:focus + label, &:focus-visible + label":(0,l.getFocusStyles)(u),"&:focus:not(:focus-visible) + label":(0,l.getMouseFocusStyles)(u)},label:{width:"100%",height:"100%",cursor:"pointer",borderRadius:u.shape.radius.pill,background:u.components.input.background,border:`1px solid ${u.components.input.borderColor}`,transition:"all 0.3s ease","&:hover":{borderColor:u.components.input.borderHover},"&::after":{position:"absolute",display:"block",content:'""',width:"12px",height:"12px",borderRadius:u.shape.radius.circle,background:u.colors.text.secondary,boxShadow:u.shadows.z1,top:"50%",transform:"translate3d(2px, -50%, 0)",transition:"transform 0.2s cubic-bezier(0.19, 1, 0.22, 1)","@media (forced-colors: active)":{border:"1px solid transparent"}}}}),inlineContainer:(0,t.css)({padding:u.spacing(0,1),height:u.spacing(u.components.height.md),display:"inline-flex",alignItems:"center",background:h?"transparent":u.components.input.background,border:`1px solid ${h?"transparent":u.components.input.borderColor}`,borderRadius:u.shape.radius.default,"&:hover":{border:`1px solid ${h?"transparent":u.components.input.borderHover}`,".inline-switch-label":{color:u.colors.text.primary}}}),disabled:(0,t.css)({backgroundColor:"rgba(204, 204, 220, 0.04)",color:"rgba(204, 204, 220, 0.6)",border:"1px solid rgba(204, 204, 220, 0.04)"}),inlineLabel:(0,t.css)({cursor:"pointer",paddingRight:u.spacing(1),color:u.colors.text.secondary,whiteSpace:"nowrap"}),inlineLabelEnabled:(0,t.css)({color:u.colors.text.primary}),invalid:(0,t.css)({"input + label, input:checked + label, input:hover + label":{border:`1px solid ${u.colors.error.border}`}})}))},77514:(X,L,e)=>{"use strict";e.d(L,{W:()=>m});var t=e(41407),n=e(39953),r=e(22784),a=e(77804),i=e(68497),y=e(64447),c=e(90201),l=e(64084),d=e(82803);const f=(0,l.B)(u=>({container:(0,t.css)({height:"100%"}),tabContent:(0,t.css)({padding:u.spacing(2),backgroundColor:u.colors.background.primary,height:`calc(100% - ${u.components.menuTabs.height}px)`}),close:(0,t.css)({position:"absolute",right:"16px",top:"5px",cursor:"pointer",fontSize:u.typography.size.lg}),tabs:(0,t.css)({paddingTop:u.spacing(1),borderColor:u.colors.border.weak,ul:{marginLeft:u.spacing(2)}})}));function m(u){const[h,C]=(0,n.useState)(u.tabs.some(P=>P.value===u.defaultTab)?u.defaultTab:u.tabs?.[0].value),x=P=>{C(P.value)},{tabs:b,onClose:g,closeIconTooltip:p}=u,v=(0,d.l4)(),E=f(v);return n.createElement("div",{className:E.container},n.createElement(r.J,{className:E.tabs},b.map(P=>n.createElement(a.O,{key:P.value,label:P.label,active:P.value===h,onChangeTab:()=>x(P),icon:P.icon})),n.createElement(i.h,{className:E.close,onClick:g,name:"times",tooltip:p??"Close"})),n.createElement(y.$,{autoHeightMin:"100%"},n.createElement(c.I,{className:E.tabContent},b.find(P=>P.value===h)?.content)))}},13570:(X,L,e)=>{"use strict";e.d(L,{i:()=>c,c:()=>d});var t=e(39953),n=e(53470),r=e(75766),a=e(41407);const i=f=>{const m=(0,a.css)({width:"100%",listStyle:"none"}),u=(0,a.css)({width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"});return f.value&&!Array.isArray(f.value)?t.createElement("span",null,f.value):f.value&&Array.isArray(f.value)&&f.value.length>0?t.createElement("ul",{className:m},f.value.map((h,C)=>{const x=Object.keys(h)[0];return t.createElement("li",{className:u,key:C},t.createElement("span",null,x),t.createElement("span",null,h[x]))})):y},y=()=>t.createElement("span",null,"\xA0");function c(f){const{totalColumnsWidth:m,footerGroups:u,isPaginationVisible:h,tableStyles:C}=f,x=r.wl.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:h?"relative":"absolute",width:m?`${m}px`:"100%",bottom:"0px"}},u.map(b=>{const{key:g,...p}=b.getFooterGroupProps();return t.createElement("div",{className:C.tfoot,...p,key:g,"data-testid":x.footer},b.headers.map(v=>l(v,C)))}))}function l(f,m){const u=f.getHeaderProps();return u?(u.style=u.style??{},u.style.position="absolute",u.style.justifyContent=f.justifyContent,t.createElement("div",{className:m.headerCell,...u},f.render("Footer"))):null}function d(f,m,u){if(m===void 0)return y;if(u){if(m[f]===void 0)return y;const h=n.TB.get(n.gz.count).name;return i({value:[{[h]:String(m[f])}]})}return i({value:m[f]})}},80857:(X,L,e)=>{"use strict";e.d(L,{A:()=>d,U:()=>l});var t=e(39953),n=e(10124),r=e(89591),a=e(53305),i=e(34547),y=e(52542),c=e(83484);const l={drawStyle:i.l8.Line,lineInterpolation:i.KC.Smooth,lineWidth:1,fillOpacity:17,gradientMode:i.FI.Hue,pointSize:2,barAlignment:i.pu.Center,showPoints:i.Jp.Never},d=u=>{const{field:h,innerWidth:C,tableStyles:x,cell:b,cellProps:g,timeRange:p}=u,v=f(b.value);if(!v)return t.createElement("div",{...g,className:x.cellContainer},h.config.noValue||"no data");v.x&&!v.x.config.interval&&v.x.values.length>1&&(v.x.config.interval=v.x.values[1]-v.x.values[0]),v.y.values=v.y.values.map(M=>Number.isFinite(M)?M:null);const E=(0,n.dz)(v.y);v.y.config.min=E.min,v.y.config.max=E.max,v.y.state={range:E},v.timeRange=p;const P=m(h),S={color:h.config.color,custom:{...l,...P}};return t.createElement("div",{...g,className:x.cellContainer},t.createElement(y.b,{width:C,height:x.cellHeightInner,sparkline:v,config:S,theme:x.theme}))};function f(u){if(Array.isArray(u))return{y:{name:"test",type:r.fS.number,values:u,config:{}}};if((0,a.aY)(u)){const h=u.fields.find(x=>x.type===r.fS.time),C=u.fields.find(x=>x.type===r.fS.number);if(h&&C)return{x:h,y:C}}}function m(u){let h=(0,c.S_)(u);if(h.type===i.h2.Auto&&(h={...h,type:i.h2.Sparkline}),h.type===i.h2.Sparkline)return h;throw new Error(`Expected options type ${i.h2.Sparkline} but got ${h.type}`)}},23166:(X,L,e)=>{"use strict";e.d(L,{i:()=>he});var t=e(41407),n=e(39953),r=e(41655),a=e(68084),i=e(53470),y=e(89591),c=e(75766),l=e(34547),d=e(82803),f=e(64447),m=e(39017),u=e(83484);function h({tableStyles:me,nestedData:De,rowIndex:le,width:Ee,cellHeight:be}){const ge=De.values,ue=[],Ie=(0,d.l4)(),ot=(0,d.wW)(C);let Qe=me.rowHeight+Ie.spacing.gridSize;return ge[le].forEach((Me,Ne)=>{const qe=!!Me.meta?.custom?.noHeader,bt=me.rowHeight*(Me.length+(qe?0:1)),Fe={height:bt,paddingLeft:u.bc,position:"absolute",top:Qe};Qe+=bt+Ie.spacing.gridSize,ue.push(n.createElement("div",{style:Fe,key:`subTable_${le}_${Ne}`},n.createElement(he,{data:Me,width:Ee-u.bc,height:me.rowHeight*(Me.length+1),noHeader:qe,cellHeight:be})))}),n.createElement("div",{className:ot.subTables},ue)}const C=me=>({subTables:(0,t.css)({"&:before":{content:'""',position:"absolute",width:"1px",top:me.spacing(5),left:me.spacing(1),bottom:me.spacing(2),background:me.colors.border.medium}})});function x(me,De,le){return me.values[De].reduce((ge,ue)=>{if(ue.length){const Ie=!!ue.meta?.custom?.noHeader;return ge+le.rowHeight*(ue.length+(Ie?0:1))+8}return ge},le.rowHeight)??le.rowHeight}var b=e(13570),g=e(72305),p=e(39285),v=e(55407),E=e(846),P=e(12223),S=e(36495),M=e(68497),R=e(4919),I=e(41245),A=e(13026),O=e(64084);const N=28,o=N*5,w=({options:me,values:De,caseSensitive:le,onChange:Ee})=>{const be=(0,d.l4)(),ge=K(be),[ue,Ie]=(0,n.useState)(""),ot=(0,n.useMemo)(()=>new RegExp(ue,le?void 0:"i"),[ue,le]),Qe=(0,n.useMemo)(()=>me.filter(Fe=>Fe.label===void 0?!1:ot.test(Fe.label)),[me,ot]),Me=be.spacing.gridSize,Ne=(0,n.useMemo)(()=>Math.min(Qe.length*N,o)+Me,[Me,Qe.length]),qe=(0,n.useCallback)(Fe=>{Ie(Fe)},[Ie]),bt=(0,n.useCallback)(Fe=>Ve=>{const Ue=Ve.currentTarget.checked?De.concat(Fe):De.filter(it=>it.value!==Fe.value);Ee(Ue)},[Ee,De]);return n.createElement(P.wc,{spacing:"md"},n.createElement(I.H,{placeholder:"Filter values",onChange:qe,value:ue}),!Qe.length&&n.createElement(S._,null,"No values"),Qe.length&&n.createElement(a.t7,{height:Ne,itemCount:Qe.length,itemSize:N,width:"100%",className:ge.filterList},({index:Fe,style:Ve})=>{const Ue=Qe[Fe],{value:it,label:ze}=Ue,Xe=De.find(St=>St.value===it)!==void 0;return n.createElement("div",{className:ge.filterListRow,style:Ve,title:ze},n.createElement(A.X,{value:Xe,label:ze,onChange:bt(Ue)}))}))},K=(0,O.B)(me=>({filterList:(0,t.css)({label:"filterList"}),filterListRow:(0,t.css)({label:"filterListRow",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:me.spacing(.5),":hover":{backgroundColor:me.colors.action.hover}})})),V=({column:{preFilteredRows:me,filterValue:De,setFilter:le},onClose:Ee,field:be})=>{const ge=(0,d.l4)(),ue=(0,n.useMemo)(()=>(0,u.AF)(me,be),[me,be]),Ie=(0,n.useMemo)(()=>(0,u.mP)(ue),[ue]),ot=(0,n.useMemo)(()=>(0,u.n0)(Ie,De),[Ie,De]),[Qe,Me]=(0,n.useState)(ot),[Ne,qe]=(0,n.useState)(!1),bt=(0,n.useCallback)(ze=>Ee(),[Ee]),Fe=(0,n.useCallback)(ze=>{const Xe=Qe.length?Qe:void 0;le(Xe),Ee()},[le,Qe,Ee]),Ve=(0,n.useCallback)(ze=>{le(void 0),Ee()},[le,Ee]),Ue=(0,n.useMemo)(()=>De!==void 0,[De]),it=(0,d.wW)(_);return n.createElement(E.L,{onClick:bt,useCapture:!0},n.createElement("div",{className:(0,t.cx)(it.filterContainer),onClick:U},n.createElement(P.wc,{spacing:"lg"},n.createElement(P.wc,{spacing:"xs"},n.createElement(P.Lh,{justify:"space-between",align:"center"},n.createElement(S._,{className:it.label},"Filter by values:"),n.createElement(M.h,{name:"text-fields",tooltip:"Match case",style:{color:Ne?ge.colors.text.link:ge.colors.text.disabled},onClick:()=>{qe(ze=>!ze)}})),n.createElement("div",{className:(0,t.cx)(it.listDivider)}),n.createElement(w,{onChange:Me,values:Qe,options:Ie,caseSensitive:Ne})),n.createElement(P.Lh,{spacing:"lg"},n.createElement(P.Lh,null,n.createElement(R.zx,{size:"sm",onClick:Fe},"Ok"),n.createElement(R.zx,{size:"sm",variant:"secondary",onClick:bt},"Cancel")),Ue&&n.createElement(P.Lh,null,n.createElement(R.zx,{fill:"text",size:"sm",onClick:Ve},"Clear filter"))))))},_=me=>({filterContainer:(0,t.css)({label:"filterContainer",width:"100%",minWidth:"250px",height:"100%",maxHeight:"400px",backgroundColor:me.colors.background.primary,border:`1px solid ${me.colors.border.weak}`,padding:me.spacing(2),margin:me.spacing(1,0),boxShadow:me.shadows.z3,borderRadius:me.shape.radius.default}),listDivider:(0,t.css)({label:"listDivider",width:"100%",borderTop:`1px solid ${me.colors.border.medium}`,padding:me.spacing(.5,2)}),label:(0,t.css)({marginBottom:0})}),U=me=>{me.stopPropagation()},$=({column:me,field:De,tableStyles:le})=>{const Ee=(0,n.useRef)(null),[be,ge]=(0,n.useState)(!1),ue=(0,d.wW)(k),Ie=(0,n.useMemo)(()=>!!me.filterValue,[me.filterValue]),ot=(0,n.useCallback)(()=>ge(!0),[ge]),Qe=(0,n.useCallback)(()=>ge(!1),[ge]);return!De||!De.config.custom?.filterable?null:n.createElement("button",{className:(0,t.cx)(le.headerFilter,Ie?ue.filterIconEnabled:ue.filterIconDisabled),ref:Ee,type:"button",onClick:ot},n.createElement(p.J,{name:"filter"}),be&&Ee.current&&n.createElement(v.J,{content:n.createElement(V,{column:me,tableStyles:le,field:De,onClose:Qe}),placement:"bottom-start",referenceElement:Ee.current,show:!0}))},k=me=>({filterIconEnabled:(0,t.css)({label:"filterIconEnabled",color:me.colors.primary.text}),filterIconDisabled:(0,t.css)({label:"filterIconDisabled",color:me.colors.text.disabled})}),H=me=>{const{headerGroups:De,showTypeIcons:le,tableStyles:Ee}=me,be=c.wl.components.Panels.Visualization.Table;return n.createElement("div",{role:"rowgroup",className:Ee.headerRow},De.map(ge=>{const{key:ue,...Ie}=ge.getHeaderGroupProps();return n.createElement("div",{className:Ee.thead,...Ie,key:ue,"aria-label":be.header,role:"row"},ge.headers.map((ot,Qe)=>j(ot,Ee,le)))}))};function j(me,De,le){const Ee=me.getHeaderProps(),be=me.field??null;return me.canResize&&(Ee.style.userSelect=me.isResizing?"none":"auto"),Ee.style.position="absolute",Ee.style.justifyContent=me.justifyContent,n.createElement("div",{className:De.headerCell,...Ee,role:"columnheader"},me.canSort&&n.createElement(n.Fragment,null,n.createElement("button",{...me.getSortByToggleProps(),className:De.headerCellLabel},le&&n.createElement(p.J,{name:(0,g.e7)(be),title:be?.type,size:"sm",className:De.typeIcon}),n.createElement("div",null,me.render("Header")),me.isSorted&&(me.isSortedDesc?n.createElement(p.J,{size:"lg",name:"arrow-down",className:De.sortIcon}):n.createElement(p.J,{name:"arrow-up",size:"lg",className:De.sortIcon}))),me.canFilter&&n.createElement($,{column:me,tableStyles:De,field:be})),!me.canSort&&me.render("Header"),!me.canSort&&me.canFilter&&n.createElement($,{column:me,tableStyles:De,field:be}),me.canResize&&n.createElement("div",{...me.getResizerProps(),className:De.resizeHandle}))}const z=({cell:me,tableStyles:De,onCellFilterAdded:le,timeRange:Ee,userProps:be,frame:ge})=>{const ue=me.getCellProps(),Ie=me.column.field;if(!Ie?.display)return null;ue.style&&(ue.style.minWidth=ue.style.width,ue.style.justifyContent=me.column.justifyContent);let ot=(typeof me.column.width=="number"?me.column.width:24)-De.cellPadding*2;return n.createElement(n.Fragment,null,me.render("Cell",{field:Ie,tableStyles:De,onCellFilterAdded:le,cellProps:ue,innerWidth:ot,timeRange:Ee,userProps:be,frame:ge}))};function F(me,De){(0,n.useEffect)(()=>{if(me.current&&De.current){const le=me.current.querySelector(".track-vertical"),Ee=De.current.firstChild;Ee&&le&&(le.remove(),Ee instanceof HTMLElement&&(Ee.querySelector(":scope > .track-vertical")?.remove(),Ee.append(le)))}})}function J(me,De,le){(0,n.useEffect)(()=>{if(me.lastExpandedIndex!==void 0){let Ee=me.lastExpandedIndex;const be=Object.keys(me.expanded);if(be.length>0){const ue=parseInt(be[0],10);isNaN(ue)||(Ee=Math.min(Ee,ue))}const ge=me.pageIndex===0?Ee-1:Ee-me.pageIndex-me.pageIndex*me.pageSize;De.current?.resetAfterIndex(Math.max(ge,0));return}},[me.lastExpandedIndex,me.toggleRowExpandedCounter,me.pageIndex,me.pageSize,De,le,me.expanded])}var Q=e(69330);function Z({onColumnResize:me,onSortByChange:De,data:le}){return(0,n.useCallback)((Ee,be)=>{switch(be.type){case"columnDoneResizing":if(me){const ue=Ee.columnResizing.headerIdWidths[0][0],Ie=parseInt(ue,10),ot=Math.round(Ee.columnResizing.columnWidths[ue]),Qe=le.fields[Ie];if(!Qe)return Ee;const Me=(0,Q.CZ)(Qe,le);me(Me,ot)}case"toggleSortBy":if(De){const ge=[];for(const ue of Ee.sortBy){const Ie=le.fields[parseInt(ue.id,10)];Ie&&ge.push({displayName:(0,Q.CZ)(Ie,le),desc:ue.desc})}De(ge)}case"toggleRowExpanded":if(be.id)return{...Ee,lastExpandedIndex:parseInt(be.id,10),toggleRowExpandedCounter:Ee.toggleRowExpandedCounter+1}}return Ee},[le,me,De])}function ne(me,De){const le={toggleRowExpandedCounter:0};if(me){le.sortBy=[];for(const Ee of me)for(const be of De)be.Header===Ee.displayName&&le.sortBy.push({id:be.id,desc:Ee.desc})}return le}function ee(me,De){const le=me.colors.border.weak,Ee=me.colors.primary.border,be=6,ge=de(me,De,be),ue=ge+2,Ie=28,ot=(Qe,Me,Ne)=>(0,t.css)({label:Ne?"cellContainerOverflow":"cellContainerNoOverflow",padding:`${be}px`,width:"100%",height:`${ue-1}px`,display:"flex",alignItems:"center",borderRight:`1px solid ${le}`,color:Qe??void 0,background:Me??void 0,backgroundClip:"padding-box","&:last-child:not(:only-child)":{borderRight:"none"},"&:hover":{overflow:Ne?"visible":void 0,width:Ne?"auto !important":void 0,boxShadow:Ne?`0 0 2px ${me.colors.primary.main}`:void 0,background:Ne?Me??me.components.table.rowHoverBackground:void 0,zIndex:Ne?1:void 0,".cellActions":{visibility:"visible",opacity:1,width:"auto"}},a:{color:"inherit"},".cellActions":{display:"flex",position:Ne?void 0:"absolute",top:Ne?void 0:0,right:Ne?void 0:0,margin:Ne?me.spacing(0,-.5,0,.5):"auto",visibility:"hidden",opacity:0,width:0,alignItems:"center",height:"100%",padding:me.spacing(1,.5,1,.5),background:Me?"none":me.colors.emphasize(me.colors.background.primary,.03),svg:{color:Qe}},".cellActionsLeft":{right:"auto !important",left:0},".cellActionsTransparent":{background:"none"}});return{theme:me,cellHeight:ge,buildCellContainerStyle:ot,cellPadding:be,cellHeightInner:ge-be*2,rowHeight:ue,table:(0,t.css)({height:"100%",width:"100%",overflow:"auto",display:"flex",flexDirection:"column"}),thead:(0,t.css)({label:"thead",height:`${Ie}px`,overflowY:"auto",overflowX:"hidden",position:"relative"}),tfoot:(0,t.css)({label:"tfoot",height:`${Ie}px`,borderTop:`1px solid ${le}`,overflowY:"auto",overflowX:"hidden",position:"relative"}),headerRow:(0,t.css)({label:"row",borderBottom:`1px solid ${le}`}),headerCell:(0,t.css)({height:"100%",padding:`0 ${be}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",fontWeight:me.typography.fontWeightMedium,"&:last-child":{borderRight:"none"}}),headerCellLabel:(0,t.css)({border:"none",padding:0,background:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:me.typography.fontWeightMedium,display:"flex",alignItems:"center",marginRight:me.spacing(.5),"&:hover":{textDecoration:"underline",color:me.colors.text.link}}),cellContainer:ot(void 0,void 0,!0),cellContainerNoOverflow:ot(void 0,void 0,!1),cellText:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}),sortIcon:(0,t.css)({marginLeft:me.spacing(.5)}),cellLink:(0,t.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",color:me.colors.text.link,fontWeight:me.typography.fontWeightMedium,"&:hover":{textDecoration:"underline",color:me.colors.text.link}}),cellLinkForColoredCell:(0,t.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:me.typography.fontWeightMedium,textDecoration:"underline"}),imageCellLink:(0,t.css)({cursor:"pointer",overflow:"hidden",height:"100%"}),headerFilter:(0,t.css)({background:"transparent",border:"none",label:"headerFilter",padding:0}),paginationWrapper:(0,t.css)({display:"flex",height:`${ge}px`,justifyContent:"center",alignItems:"center",width:"100%",li:{marginBottom:0}}),paginationSummary:(0,t.css)({color:me.colors.text.secondary,fontSize:me.typography.bodySmall.fontSize,display:"flex",justifyContent:"flex-end",padding:me.spacing(0,1,0,2)}),tableContentWrapper:Qe=>{const Me=Qe!==void 0?`${Qe}px`:"100%";return(0,t.css)({label:"tableContentWrapper",width:Me,display:"flex",flexDirection:"column"})},row:(0,t.css)({label:"row",borderBottom:`1px solid ${le}`,"&:hover":{backgroundColor:me.components.table.rowHoverBackground},"&:last-child":{borderBottom:0}}),imageCell:(0,t.css)({height:"100%"}),resizeHandle:(0,t.css)({label:"resizeHandle",cursor:"col-resize !important",display:"inline-block",background:Ee,opacity:0,transition:"opacity 0.2s ease-in-out",width:"8px",height:"100%",position:"absolute",right:"-4px",borderRadius:me.shape.radius.default,top:0,touchAction:"none","&:hover":{opacity:1}}),typeIcon:(0,t.css)({marginRight:me.spacing(1),color:me.colors.text.secondary}),noData:(0,t.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"}),expanderCell:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",height:`${ue}px`,cursor:"pointer"})}}function de(me,De,le){const Ee=me.typography.fontSize,be=me.typography.body.lineHeight;switch(De){case"md":return 42;case"lg":return 48;case"sm":default:return le*2+Ee*be}}const Pe=150,ye=36,he=(0,n.memo)(me=>{const{ariaLabel:De,data:le,height:Ee,onCellFilterAdded:be,width:ge,columnMinWidth:ue=Pe,noHeader:Ie,resizable:ot=!0,initialSortBy:Qe,footerOptions:Me,showTypeIcons:Ne,footerValues:qe,enablePagination:bt,cellHeight:Fe=l.Ss.Sm,timeRange:Ve}=me,Ue=(0,n.useRef)(null),it=(0,n.useRef)(null),ze=(0,n.useRef)(null),Xe=(0,d.l4)(),St=ee(Xe,Fe),Bt=Ie?0:St.rowHeight,[zt,qt]=(0,n.useState)(qe),Qt=(0,n.useMemo)(()=>{const lt=ye;let Rt=0;if(!zt)return 0;for(const Ut of zt)Array.isArray(Ut)&&Ut.length>Rt&&(Rt=Ut.length);return Rt>1?lt*Rt:lt},[zt]),yn=(0,n.useMemo)(()=>le.fields.length?Array(le.length).fill(0):[],[le]),Zt=!!(Me?.countRows&&Me.reducer&&Me.reducer.length&&Me.reducer[0]===i.gz.count),re=le.fields.find(lt=>lt.type===y.fS.nestedFrames),Te=re!==void 0,We=(0,n.useMemo)(()=>(0,u.Pu)(le,ge,ue,Te,zt,Zt),[le,ge,ue,zt,Te,Zt]),Je=Z(me),je=(0,n.useMemo)(()=>({columns:We,data:yn,disableResizing:!ot,stateReducer:Je,autoResetPage:!1,initialState:ne(Qe,We),autoResetFilters:!1,sortTypes:{number:u.QT,"alphanumeric-insensitive":u.nl}}),[Qe,We,yn,ot,Je]),{getTableProps:pt,headerGroups:ft,footerGroups:Tt,rows:Ye,prepareRow:Ce,totalColumnsWidth:oe,page:pe,state:Re,gotoPage:ae,setPageSize:ve,pageOptions:xe}=(0,r.useTable)(je,r.useFilters,r.useSortBy,r.useAbsoluteLayout,r.useResizeColumns,r.useExpanded,r.usePagination),Ge=Re;(0,n.useEffect)(()=>{Me||qt(qe)},[qe,Me]),(0,n.useEffect)(()=>{if(!Me)return;if(!Me.show){qt(void 0);return}if(Zt){const Rt=[];Rt[0]=ft[0]?.headers[0]?.filteredRows.length.toString()??le.length.toString(),qt(Rt);return}const lt=(0,u.jB)(ft[0].headers,(0,u.KF)(Ye),Me,Xe);qt(lt)},[Me,Xe,Re.filters,le]);let at=Ee-(Bt+Qt);bt&&(at-=St.cellHeight);const dt=Math.round(at/St.rowHeight)-1;(0,n.useEffect)(()=>{dt<=0||ve(dt)},[dt,ve]),J(Ge,Ue,le),F(ze,it);const st=(0,n.useCallback)(lt=>Re.pageIndex*Re.pageSize+lt,[Re.pageIndex,Re.pageSize]),Pt=(0,n.useCallback)(({index:lt,style:Rt})=>{let Ut=Ye[lt];bt&&(Ut=pe[lt]),Ce(Ut);const Xt=Re.expanded[Ut.index]?(0,t.css)({"&:hover":{background:"inherit"}}):{};return n.createElement("div",{...Ut.getRowProps({style:Rt}),className:(0,t.cx)(St.row,Xt)},re&&Re.expanded[Ut.index]&&n.createElement(h,{nestedData:re,tableStyles:St,rowIndex:Ut.index,width:ge,cellHeight:Fe}),Ut.cells.map(($n,Mt)=>n.createElement(z,{key:Mt,tableStyles:St,cell:$n,onCellFilterAdded:be,columnIndex:Mt,columnCount:Ut.cells.length,timeRange:Ve,frame:le})))},[Ye,bt,Ce,St,re,pe,be,Ve,le,ge,Fe,Re.expanded]),we=(0,n.useCallback)(lt=>{ae(lt-1)},[ae]),Le=bt?pe.length:Ye.length;let Ke=null;if(bt){const lt=Re.pageIndex*Re.pageSize+1;let Rt=lt+Re.pageSize-1;const Ut=ge<550;Rt>le.length&&(Rt=le.length),Ke=n.createElement("div",{className:St.paginationWrapper},n.createElement(m.t,{currentPage:Re.pageIndex+1,numberOfPages:xe.length,showSmallVersion:Ut,onNavigate:we}),Ut?null:n.createElement("div",{className:St.paginationSummary},lt," - ",Rt," of ",le.length," rows"))}const ht=lt=>{const Rt=st(lt);return Re.expanded[Rt]&&re?x(re,Rt,St):St.rowHeight},xt=lt=>{const{scrollTop:Rt}=lt.currentTarget;Ue.current!==null&&Ue.current.scrollTo(Rt)};return n.createElement("div",{...pt(),className:St.table,"aria-label":De,role:"table",ref:it,style:{width:ge,height:Ee}},n.createElement(f.$,{hideVerticalTrack:!0},n.createElement("div",{className:St.tableContentWrapper(oe)},!Ie&&n.createElement(H,{headerGroups:ft,showTypeIcons:Ne,tableStyles:St}),Le>0?n.createElement("div",{"data-testid":c.wl.components.Panels.Visualization.Table.body,ref:ze},n.createElement(f.$,{onScroll:xt,hideHorizontalTrack:!0},n.createElement(a.S_,{key:St.rowHeight+Re.pageIndex,height:at,itemCount:Le,itemSize:ht,width:"100%",ref:Ue,style:{overflow:void 0}},Pt))):n.createElement("div",{style:{height:Ee-Bt},className:St.noData},"No data"),zt&&n.createElement(b.i,{isPaginationVisible:!!bt,footerValues:zt,footerGroups:Tt,totalColumnsWidth:oe,tableStyles:St}))),Ke)});he.displayName="Table"},83484:(X,L,e)=>{"use strict";e.d(L,{bc:()=>ye,AF:()=>Ee,KF:()=>bt,S_:()=>Ve,Pu:()=>me,n0:()=>Ie,jB:()=>Ne,E4:()=>he,q7:()=>Ue,nl:()=>ot,QT:()=>Qe,mP:()=>ge});var t=e(86832),n=e(80172),r=e.n(n),a=e(89591),i=e(69330),y=e(53305),c=e(65038),l=e(83502),d=e(53470),f=e(94123),m=e(34547),u=e(39953),h=e(60695),C=e(10124),x=e(64943),b=e(24300),g=e(22785);const p={mode:h.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},v=ze=>{const{field:Xe,innerWidth:St,tableStyles:Bt,cell:zt,cellProps:qt,row:Qt}=ze,yn=Xe.display(zt.value),Zt=Ve(Xe);let re=(0,C.xD)(Xe,!1);re.thresholds||(re={...re,thresholds:p});let Te=m.QH.Gradient,We;Zt.type===m.h2.Gauge&&(Te=Zt.mode??m.QH.Gradient,We=Zt.valueDisplayMode!==void 0?Zt.valueDisplayMode:m.M8.Text);const Je=()=>(0,t.isFunction)(Xe.getLinks)?Xe.getLinks({valueRowIndex:Qt.index}):[],je=!!Je().length,pt=E(Xe,yn,zt.row.index),ft=Tt=>{const{openMenu:Ye,targetClassName:Ce}=Tt;return u.createElement(b.xf,{width:St,height:Bt.cellHeightInner,field:re,display:Xe.display,text:{valueSize:14},value:yn,orientation:x.wm.Horizontal,theme:Bt.theme,alignmentFactors:pt,onClick:Ye,className:Ce,itemSpacing:1,lcdCellWidth:8,displayMode:Te,valueDisplayMode:We})};return u.createElement("div",{...qt,className:Bt.cellContainer},je&&u.createElement(g.V,{links:Je,style:{display:"flex",width:"100%"}},Tt=>ft(Tt)),!je&&ft({}))};function E(ze,Xe,St){let Bt=ze.state?.alignmentFactors;if(Bt)return Bt.text.length<Xe.text.length&&(Bt.text=Xe.text),Bt;{Bt={...Xe};const zt=Math.min(ze.values.length,St+1e3);for(let qt=St+1;qt<zt;qt++)ze.display(ze.values[qt]).text.length>Bt.text.length&&(Bt.text=Xe.text);return ze.state?ze.state.alignmentFactors=Bt:ze.state={alignmentFactors:Bt},Bt}}var P=e(41407),S=e(63374),M=e(82803),R=e(3274),I=e(59561),A=e(4919),O=e(68497),N=e(12223),o=e(36210),w=e(73075),K=e(84541);function V({value:ze,onDismiss:Xe,mode:St}){let Bt=ze;if((0,t.isString)(ze))try{ze=JSON.parse(ze)}catch{}else Bt=JSON.stringify(ze,null," ");let zt=Bt;return St==="code"&&(zt=JSON.stringify(ze,null," ")),u.createElement(w.u,{onDismiss:Xe,isOpen:!0,title:"Inspect value"},St==="code"?u.createElement(K.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(zt&&zt.length)>100,value:zt,readOnly:!0}):u.createElement("pre",null,zt),u.createElement(w.u.ButtonRow,null,u.createElement(o.m,{icon:"copy",getText:()=>zt},"Copy to Clipboard")))}const _="=",U="!=";function $({field:ze,cell:Xe,previewMode:St,showFilters:Bt,onCellFilterAdded:zt}){const[qt,Qt]=(0,u.useState)(!1),yn=he(ze)==="flex-end",Zt=!!ze.config.custom?.inspect,re={size:"sm",tooltipPlacement:"top"},Te=(0,u.useCallback)(Je=>{zt&&zt({key:ze.name,operator:_,value:Xe.value})},[Xe,ze,zt]),We=(0,u.useCallback)(Je=>{zt&&zt({key:ze.name,operator:U,value:Xe.value})},[Xe,ze,zt]);return u.createElement(u.Fragment,null,u.createElement("div",{className:`cellActions ${yn?"cellActionsLeft":""}`},u.createElement(N.Lh,{spacing:"xs"},Zt&&u.createElement(O.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{Qt(!0)},...re}),Bt&&u.createElement(O.h,{name:"search-plus",onClick:Te,tooltip:"Filter for value",...re}),Bt&&u.createElement(O.h,{name:"search-minus",onClick:We,tooltip:"Filter out value",...re}))),qt&&u.createElement(V,{mode:St,value:Xe.value,onDismiss:()=>{Qt(!1)}}))}const k=ze=>{const{field:Xe,cell:St,tableStyles:Bt,row:zt,cellProps:qt,frame:Qt}=ze,yn=!!Xe.config.custom?.inspect,Zt=Xe.display(St.value),re=ze.onCellFilterAdded&&Xe.config.filterable,Te=re&&St.value!==void 0||yn,We=Ve(Xe),Je=H(Bt,We,Zt,yn),je=!!(0,R.i)(Xe,zt)?.length,pt=(0,M.wW)(A._7);let ft;if(We.type===m.h2.Custom){const Tt=We.cellComponent;ft=u.createElement(Tt,{field:Xe,value:St.value,rowIndex:zt.index,frame:Qt})}else u.isValidElement(St.value)?ft=St.value:ft=(0,l.zc)(Zt);return u.createElement("div",{...qt,className:Je},!je&&u.createElement("div",{className:Bt.cellText},ft),je&&u.createElement(g.V,{links:()=>(0,R.i)(Xe,zt)||[]},Tt=>Tt.openMenu?u.createElement("button",{className:(0,P.cx)(pt,j(Bt,We,Tt.targetClassName)),onClick:Tt.openMenu},ft):u.createElement("div",{className:j(Bt,We,Tt.targetClassName)},ft)),Te&&u.createElement($,{...ze,previewMode:"text",showFilters:re}))};function H(ze,Xe,St,Bt=!1){const zt=ze.theme.isDark?1:-.7;let qt,Qt;if(Xe.type===m.h2.ColorText)qt=St.color;else if(Xe.type===m.h2.ColorBackground){const yn=Xe.mode??m.v7.Gradient;if(yn===m.v7.Basic)qt=(0,I.bM)(St.color,ze.theme.isDark),Qt=(0,S.Z)(St.color).toRgbString();else if(yn===m.v7.Gradient){const Zt=(0,S.Z)(St.color).darken(10*zt).spin(5);qt=(0,I.bM)(St.color,ze.theme.isDark),Qt=`linear-gradient(120deg, ${Zt.toRgbString()}, ${St.color})`}}return qt!==void 0||Qt!==void 0?ze.buildCellContainerStyle(qt,Qt,!Bt):Bt?ze.cellContainerNoOverflow:ze.cellContainer}function j(ze,Xe,St){return Xe.type===m.h2.Auto?(0,P.cx)(ze.cellLink,St):(0,P.cx)(ze.cellLinkForColoredCell,St)}var z=e(13570),F=e(33268),J=e(86046);function Q(ze){const{cell:Xe,tableStyles:St,cellProps:Bt}=ze;let zt="";return Xe.value instanceof J.Z?zt=new F.Z().writeGeometry(Xe.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):Xe.value!=null&&(zt=`${Xe.value}`),u.createElement("div",{...Bt,className:St.cellContainer},u.createElement("div",{className:St.cellText,style:{fontFamily:"monospace"}},zt))}const Z=ze=>{const{field:Xe,cell:St,tableStyles:Bt,row:zt,cellProps:qt}=ze,Qt=Xe.display(St.value),yn=!!(0,R.i)(Xe,zt)?.length,Zt=(0,M.wW)(A._7);return u.createElement("div",{...qt,className:Bt.cellContainer},!yn&&u.createElement("img",{src:Qt.text,className:Bt.imageCell,alt:""}),yn&&u.createElement(g.V,{style:{height:"100%"},links:()=>(0,R.i)(Xe,zt)||[]},re=>{const Te=u.createElement("img",{src:Qt.text,className:Bt.imageCell,alt:""});return re.openMenu?u.createElement(A.zx,{className:(0,P.cx)(Zt),onClick:re.openMenu},Te):Te}))};function ne(ze){const{cell:Xe,tableStyles:St,cellProps:Bt,field:zt,row:qt}=ze,Qt=!!zt.config.custom?.inspect,yn=(0,P.css)({cursor:"pointer",fontFamily:"monospace"});let Zt=Xe.value,re=Zt;if((0,t.isString)(Zt))try{Zt=JSON.parse(Zt)}catch{}else re=JSON.stringify(Zt,null," ");const Te=!!(0,R.i)(zt,qt)?.length,We=(0,M.wW)(A._7);return u.createElement("div",{...Bt,className:Qt?St.cellContainerNoOverflow:St.cellContainer},u.createElement("div",{className:(0,P.cx)(St.cellText,yn)},!Te&&u.createElement("div",{className:St.cellText},re),Te&&u.createElement(g.V,{links:()=>(0,R.i)(zt,qt)||[]},Je=>Je.openMenu?u.createElement(A.zx,{className:(0,P.cx)(We),onClick:Je.openMenu},re):u.createElement(u.Fragment,null,re))),Qt&&u.createElement($,{...ze,previewMode:"code"}))}var ee=e(39285);function de({row:ze,tableStyles:Xe}){return u.createElement("div",{className:Xe.expanderCell,...ze.getToggleRowExpandedProps()},u.createElement(ee.J,{"aria-label":ze.isExpanded?"Collapse row":"Expand row",name:ze.isExpanded?"angle-down":"angle-right",size:"lg"}))}var Pe=e(80857);const ye=50;function he(ze){if(!ze)return"flex-start";if(ze.config.custom)switch(ze.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return ze.type===a.fS.number?"flex-end":"flex-start"}function me(ze,Xe,St,Bt,zt,qt){const Qt=[];let yn=0;Bt&&(Qt.push({Header:()=>null,id:"expander",Cell:de,width:ye,minWidth:ye,filter:(re,Te,We)=>[],justifyContent:"left",field:ze.fields[0],sortType:"basic"}),Xe-=ye);for(const[re,Te]of ze.fields.entries()){const We=Te.config.custom||{};if(We.hidden||Te.type===a.fS.nestedFrames)continue;We.width?Xe-=We.width:yn++;const Je=pt=>{switch(pt){case a.fS.number:return"number";case a.fS.time:return"basic";default:return"alphanumeric-insensitive"}},je=De(We.cellOptions?.type,Te);Qt.push({Cell:je,id:re.toString(),field:Te,Header:We.hideHeader?"":(0,i.CZ)(Te,ze),accessor:(pt,ft)=>Te.values[ft],sortType:Je(Te.type),width:We.width,minWidth:We.minWidth??St,filter:r()(le(Te)),justifyContent:he(Te),Footer:(0,z.c)(re,zt,qt)})}let Zt=Xe/yn;for(let re=yn;re>0;re--)for(const Te of Qt)!Te.width&&Te.minWidth>Zt&&(Te.width=Te.minWidth,Xe-=Te.width,yn-=1,Zt=Xe/yn);for(const re of Qt)re.width||(re.width=Zt),re.minWidth=50;return Qt}function De(ze,Xe){switch(ze){case m.h2.Custom:case m.h2.ColorText:case m.h2.ColorBackground:return k;case m.h2.Image:return Z;case m.h2.Gauge:return v;case m.h2.Sparkline:return Pe.A;case m.h2.JSONView:return ne}if(Xe.type===a.fS.geo)return Q;if(Xe.type===a.fS.frame){const St=Xe.values[0];return(0,y.aY)(St)&&(0,c.pP)(St)?Pe.A:ne}return Xe.type===a.fS.other?ne:k}function le(ze){return function(Xe,St,Bt){return Xe.length===0||!Bt||!ze?Xe:Xe.filter(zt=>{if(!zt.values.hasOwnProperty(St))return!1;const qt=be(zt,ze);return Bt.find(Qt=>Qt.value===qt)!==void 0})}}function Ee(ze,Xe){if(!Xe||ze.length===0)return{};const St={};for(let Bt=0;Bt<ze.length;Bt++){const zt=be(ze[Bt],Xe);St[zt||"(Blanks)"]=zt}return St}function be(ze,Xe){if(!Xe||!ze)return"";const St=Xe.values[ze.index],Bt=Xe.display?Xe.display(St):St;return Xe.display?(0,l.zc)(Bt):Bt}function ge(ze){return Object.keys(ze).reduce((Xe,St)=>Xe.concat({value:ze[St],label:St}),[]).sort(ue)}function ue(ze,Xe){return ze.label===void 0&&Xe.label===void 0?0:ze.label===void 0&&Xe.label!==void 0?-1:ze.label!==void 0&&Xe.label===void 0?1:ze.label<Xe.label?-1:ze.label>Xe.label?1:0}function Ie(ze,Xe){return Xe?ze.filter(St=>Xe.some(Bt=>Bt.value===St.value)):[]}function ot(ze,Xe,St){return String(ze.values[St]).localeCompare(String(Xe.values[St]),void 0,{sensitivity:"base"})}function Qe(ze,Xe,St){const Bt=Me(ze.values[St]),zt=Me(Xe.values[St]);return Bt===zt?0:Bt>zt?1:-1}function Me(ze){return ze==null||ze===""||isNaN(ze)?Number.NEGATIVE_INFINITY:typeof ze=="number"?ze:Number(ze)}function Ne(ze,Xe,St,Bt){return it(ze),ze.map((zt,qt)=>{if(zt?.field?.type!==a.fS.number)return qt===0&&St.reducer&&St.reducer.length>0?d.TB.get(St.reducer[0]).name:void 0;let Qt=(0,t.clone)(zt.field);return Qt.values=Xe[zt.id],Qt.state=void 0,zt.field=Qt,St.fields&&St.fields.length>0?St.fields.find(Zt=>Zt===zt?.field?.name)?qe(zt.field,St.reducer,Bt):void 0:qe(zt.field,St.reducer||[],Bt)})}function qe(ze,Xe,St){const Bt=ze.display??(0,f.U)({field:ze,theme:St}),zt=Xe[0],qt=(0,d.Kx)({field:ze,reducers:Xe})[zt];return(0,l.zc)(Bt(qt))}function bt(ze){const Xe=[];for(const St in ze)for(const[Bt,zt]of Object.entries(ze[St].values))Xe[Bt]===void 0&&(Xe[Bt]=[]),Xe[Bt].push(zt);return Xe}const Fe={type:m.h2.Auto};function Ve(ze){return ze.config.custom?.displayMode?Ue(ze.config.custom?.displayMode):ze.config.custom?.cellOptions?ze.config.custom.cellOptions:Fe}function Ue(ze){switch(ze){case"basic":case"gradient-gauge":case"lcd-gauge":let Xe=m.QH.Basic;return ze==="gradient-gauge"?Xe=m.QH.Gradient:ze==="lcd-gauge"&&(Xe=m.QH.Lcd),{type:m.h2.Gauge,mode:Xe};case"color-background":case"color-background-solid":let St=m.v7.Basic;return ze==="color-background"&&(St=m.v7.Gradient),{type:m.h2.ColorBackground,mode:St};default:return{type:ze}}}function it(ze){const Xe=ze.findIndex((St,Bt)=>St?.id!==String(Bt));Xe===-1||ze[Xe]?.id==="expander"||(ze.splice(Xe,0,{id:String(Xe)}),it(ze))}},59158:(X,L,e)=>{"use strict";e.d(L,{w:()=>m});var t=e(41407),n=e(86832),r=e.n(n),a=e(39953),i=e(29710),y=e(82803),c=e(64084),l=e(39285),d=e(68421);class f extends a.PureComponent{constructor(C){super(C),this.readCSV=(0,n.debounce)(()=>{const{config:g}=this.props,{text:p}=this.state;this.setState({data:(0,i.uP)(p,{config:g})})},150),this.onTextChange=g=>{this.setState({text:g.target.value})};const{text:x,config:b}=C;this.state={text:x,data:(0,i.uP)(x,{config:b})}}componentDidUpdate(C,x){const{text:b}=this.state;(b!==x.text||this.props.config!==C.config)&&this.readCSV(),this.props.text!==C.text&&this.props.text!==b&&this.setState({text:this.props.text}),this.state.data!==x.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:C,height:x,theme:b}=this.props,{data:g}=this.state,p=u(b);return a.createElement("div",{className:p.tableInputCsv},a.createElement(d.K,{style:{width:C,height:x},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:p.textarea}),g&&a.createElement("footer",{className:p.footer},g.map((v,E)=>a.createElement("span",{key:E},"Rows:",v.length,", Columns:",v.fields.length," \xA0",a.createElement(l.J,{name:"check-circle"})))))}}const m=(0,y.HE)(f);m.displayName="TableInputCSV";const u=(0,c.B)(h=>({tableInputCsv:(0,t.css)({position:"relative"}),textarea:(0,t.css)({height:"100%",width:"100%"}),footer:(0,t.css)({position:"absolute",bottom:"15px",right:"15px",border:"1px solid #222",background:h.colors.success.main,padding:`1px ${h.spacing(.5)}`,fontSize:"80%"})}))},54951:(X,L,e)=>{"use strict";e.d(L,{A:()=>c});var t=e(41407),n=e(39953),r=e(83502),a=e(64084),i=e(82803);const y=(0,a.B)(l=>({counter:(0,t.css)({label:"counter",marginLeft:l.spacing(1),borderRadius:l.spacing(3),backgroundColor:l.colors.action.hover,padding:l.spacing(.25,1),color:l.colors.text.secondary,fontWeight:l.typography.fontWeightMedium,fontSize:l.typography.size.sm})})),c=({value:l})=>{const d=(0,i.wW)(y);return n.createElement("span",{className:d.counter},(0,r.SP)(l,0).text)}},77804:(X,L,e)=>{"use strict";e.d(L,{O:()=>l});var t=e(41407),n=e(39953),r=e(75766),a=e(82803),i=e(53039),y=e(39285),c=e(54951);const l=n.forwardRef(({label:f,active:m,icon:u,onChangeTab:h,counter:C,suffix:x,className:b,href:g,...p},v)=>{const E=(0,a.wW)(d),P=()=>n.createElement(n.Fragment,null,u&&n.createElement(y.J,{name:u}),f,typeof C=="number"&&n.createElement(c.A,{value:C}),x&&n.createElement(x,{className:E.suffix})),S=(0,t.cx)(E.link,m?E.activeStyle:E.notActive);return n.createElement("div",{className:E.item},n.createElement("a",{href:g||"#",className:S,...p,onClick:h,"aria-label":p["aria-label"]||r.wl.components.Tab.title(f),role:"tab","aria-selected":m,ref:v},P()))});l.displayName="Tab";const d=f=>({item:(0,t.css)({listStyle:"none",position:"relative",display:"flex",whiteSpace:"nowrap"}),link:(0,t.css)({color:f.colors.text.secondary,padding:f.spacing(1.5,2,1),display:"block",height:"100%",svg:{marginRight:f.spacing(1)},"&:focus-visible":(0,i.getFocusStyles)(f),"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"4px",borderRadius:f.shape.radius.default,bottom:0}}),notActive:(0,t.css)({"a:hover, &:hover, &:focus":{color:f.colors.text.primary,"&::before":{backgroundColor:f.colors.action.hover}}}),activeStyle:(0,t.css)({label:"activeTabStyle",color:f.colors.text.primary,overflow:"hidden",a:{color:f.colors.text.primary},"&::before":{backgroundImage:f.colors.gradients.brandHorizontal}}),suffix:(0,t.css)({marginLeft:f.spacing(1)})})},90201:(X,L,e)=>{"use strict";e.d(L,{I:()=>y});var t=e(41407),n=e(39953),r=e(64084),a=e(82803);const i=(0,r.B)(c=>({tabContent:(0,t.css)({background:c.colors.background.primary})})),y=({children:c,className:l,...d})=>{const f=(0,a.l4)(),m=i(f);return n.createElement("div",{...d,className:(0,t.cx)(m.tabContent,l)},c)}},22784:(X,L,e)=>{"use strict";e.d(L,{J:()=>a});var t=e(41407),n=e(39953),r=e(82803);const a=n.forwardRef(({children:y,className:c,hideBorder:l=!1},d)=>{const f=(0,r.wW)(i);return n.createElement("div",{className:(0,t.cx)(f.tabsWrapper,l&&f.noBorder,c),ref:d},n.createElement("div",{className:f.tabs,role:"tablist"},y))}),i=y=>({tabsWrapper:(0,t.css)({borderBottom:`1px solid ${y.colors.border.weak}`,overflowX:"auto"}),noBorder:(0,t.css)({borderBottom:0}),tabs:(0,t.css)({position:"relative",display:"flex",height:`${y.components.menuTabs.height}px`,alignItems:"center"})});a.displayName="TabsBar"},4092:(X,L,e)=>{"use strict";e.d(L,{L:()=>c});var t=e(41407),n=e(39953),r=e(75766),a=e(82803),i=e(39285),y=e(54951);const c=n.forwardRef(({label:d,active:f,icon:m,counter:u,className:h,suffix:C,onChangeTab:x,href:b,...g},p)=>{const v=(0,a.wW)(l),E=()=>n.createElement(n.Fragment,null,m&&n.createElement(i.J,{name:m}),d,typeof u=="number"&&n.createElement(y.A,{value:u}),C&&n.createElement(C,{className:v.suffix})),P=(0,t.cx)(v.link,f&&v.activeStyle);return n.createElement("a",{href:b,className:P,...g,onClick:x,"aria-label":g["aria-label"]||r.wl.components.Tab.title(d),role:"tab","aria-selected":f,ref:p},E())});c.displayName="Tab";const l=d=>({link:(0,t.css)({padding:"6px 12px",display:"block",height:"100%",cursor:"pointer",position:"relative",color:d.colors.text.primary,svg:{marginRight:d.spacing(1)},"&:hover, &:focus":{textDecoration:"underline"}}),activeStyle:(0,t.css)({label:"activeTabStyle",color:d.colors.text.maxContrast,overflow:"hidden","&::before":{display:"block",content:'" "',position:"absolute",left:0,width:"4px",bottom:"2px",top:"2px",borderRadius:d.shape.radius.default,backgroundImage:"linear-gradient(0deg, #f05a28 30%, #fbca0a 99%)"}}),suffix:(0,t.css)({marginLeft:d.spacing(1)})})},51064:(X,L,e)=>{"use strict";e.d(L,{V:()=>d});var t=e(41407),n=e(39953),r=e(15166),a=e(82803),i=e(72899),y=e(39285);const c=(0,n.forwardRef)(({name:u,onClick:h,icon:C,className:x,colorIndex:b,...g},p)=>{const v=(0,a.l4)(),E=m(v,u,b),P=M=>{M.preventDefault(),M.stopPropagation(),h?.(u,M)},S=(0,t.cx)(E.wrapper,x,{[E.hover]:h!==void 0});return h?n.createElement("button",{...g,className:S,onClick:P,ref:p},C&&n.createElement(y.J,{name:C}),u):n.createElement("span",{...g,className:S,ref:p},C&&n.createElement(y.J,{name:C}),u)});c.displayName="Tag";const d=Object.assign(c,{Skeleton:()=>{const u=(0,a.wW)(f);return n.createElement(r.Z,{width:60,height:22,containerClassName:u.container})}}),f=()=>({container:(0,t.css)({lineHeight:1})}),m=(u,h,C)=>{let x;return C===void 0?x=(0,i.Bx)(h):x=(0,i.vm)(C),{wrapper:(0,t.css)({appearance:"none",borderStyle:"none",fontWeight:u.typography.fontWeightMedium,fontSize:u.typography.size.sm,lineHeight:u.typography.bodySmall.lineHeight,verticalAlign:"baseline",backgroundColor:x.color,color:u.v1.palette.gray98,whiteSpace:"nowrap",textShadow:"none",padding:"3px 6px",borderRadius:u.shape.radius.default}),hover:(0,t.css)({"&:hover":{opacity:.85,cursor:"pointer"}})}}},3532:(X,L,e)=>{"use strict";e.d(L,{P:()=>c});var t=e(41407),n=e(39953),r=e(82803),a=e(51064);const i=(0,n.memo)((0,n.forwardRef)(({displayMax:f,tags:m,icon:u,onClick:h,className:C,getAriaLabel:x,getColorIndex:b},g)=>{const p=(0,r.l4)(),v=d(p,!!(f&&f>0)),E=m.length,P=f?m.slice(0,f):m;return n.createElement("ul",{className:(0,t.cx)(v.wrapper,C),"aria-label":"Tags",ref:g},P.map((S,M)=>n.createElement("li",{className:v.li,key:S},n.createElement(a.V,{name:S,icon:u,onClick:h,"aria-label":x?.(S,M),"data-tag-id":M,colorIndex:b?.(S,M)}))),f&&f>0&&E-f>0&&n.createElement("span",{className:v.moreTagsLabel},"+ ",E-f))}));i.displayName="TagList";const c=Object.assign(i,{Skeleton:()=>{const f=(0,r.wW)(l);return n.createElement("div",{className:f.container},n.createElement(a.V.Skeleton,null),n.createElement(a.V.Skeleton,null))}}),l=f=>({container:(0,t.css)({display:"flex",gap:f.spacing(1)})}),d=(f,m)=>({wrapper:(0,t.css)({position:"relative",alignItems:m?"center":"unset",display:"flex",flex:"1 1 auto",flexWrap:"wrap",flexShrink:m?0:1,justifyContent:"flex-end",gap:"6px"}),moreTagsLabel:(0,t.css)({color:f.colors.text.secondary,fontSize:f.typography.size.sm}),li:(0,t.css)({listStyle:"none"})})},97250:(X,L,e)=>{"use strict";e.d(L,{B:()=>f});var t=e(41407),n=e(39953),r=e(82803),a=e(4919),i=e(38637),y=e(72899),c=e(68497);const l=({name:u,disabled:h,onRemove:C})=>{const{color:x,borderColor:b}=(0,n.useMemo)(()=>(0,y.Bx)(u),[u]),g=(0,r.wW)(d);return n.createElement("li",{className:g.itemStyle,style:{backgroundColor:x,borderColor:b}},n.createElement("span",{className:g.nameStyle},u),n.createElement(c.h,{name:"times",size:"lg",disabled:h,tooltip:`Remove "${u}" tag`,onClick:()=>C(u),className:g.buttonStyles}))},d=u=>{const h=u.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${h}px`,lineHeight:`${h-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:u.shape.radius.default,padding:`0 ${u.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:u.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},f=({placeholder:u="New tag (enter key to add)",tags:h=[],onChange:C,width:x,className:b,disabled:g,addOnBlur:p,invalid:v,id:E})=>{const[P,S]=(0,n.useState)(""),M=(0,r.wW)(m),R=(0,r.l4)(),I=(0,n.useCallback)(w=>{S(w.target.value)},[]),A=w=>{C(h.filter(K=>K!==w))},O=w=>{w?.preventDefault(),h.includes(P)||C(h.concat(P)),S("")},N=()=>{p&&P&&O()},o=w=>{w.key==="Enter"&&P!==""&&O(w)};return n.createElement("div",{className:(0,t.cx)(M.wrapper,b,x?(0,t.css)({width:R.spacing(x)}):"")},n.createElement(i.I,{id:E,disabled:g,placeholder:u,onChange:I,value:P,onKeyDown:o,onBlur:N,invalid:v,suffix:n.createElement(a.zx,{fill:"text",className:M.addButtonStyle,onClick:O,size:"md",disabled:P.length<=0},"Add")}),h?.length>0&&n.createElement("ul",{className:M.tags},h.map(w=>n.createElement(l,{key:w,name:w,onRemove:A,disabled:g}))))},m=u=>({wrapper:(0,t.css)({minHeight:u.spacing(4),display:"flex",flexDirection:"column",gap:u.spacing(1),flexWrap:"wrap"}),tags:(0,t.css)({display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:u.spacing(.5)}),addButtonStyle:(0,t.css)({margin:`0 -${u.spacing(1)}`})})},98632:(X,L,e)=>{"use strict";e.d(L,{x:()=>c});var t=e(41407),n=e(39953),r=e(1614),a=e(82803),i=e(69865),y=e(77229);const c=n.forwardRef(({element:d="span",variant:f,weight:m,color:u,truncate:h,italic:C,textAlignment:x,children:b},g)=>{const p=(0,a.wW)((0,n.useCallback)(I=>l(I,d,f,u,m,h,C,x),[u,x,h,C,m,f,d])),[v,E]=(0,n.useState)(!1),P=(0,n.useRef)(null);(0,n.useImperativeHandle)(g,()=>P.current);const S=(0,n.createElement)(d,{className:p,ref:v?void 0:P},b),M=(0,n.useMemo)(()=>new ResizeObserver(I=>{for(const A of I)A.target.clientWidth&&A.target.scrollWidth&&(A.target.scrollWidth>A.target.clientWidth&&E(!0),A.target.scrollWidth<=A.target.clientWidth&&E(!1))}),[]);(0,n.useEffect)(()=>{const{current:I}=P;return I&&h&&M.observe(I),()=>{M.disconnect()}},[v,M,h]);const R=I=>typeof I=="string"?I:r.renderToStaticMarkup(n.createElement(n.Fragment,null,I)).replace(/(<([^>]+)>)/gi,"");return h&&v&&d!=="span"?n.createElement(i.u,{ref:P,content:R(b)},S):S});c.displayName="Text";const l=(d,f,m,u,h,C,x,b)=>(0,t.css)([{margin:0,padding:0,...(0,y.jt)(d,f,m)},m&&{...d.typography[m]},u&&{color:(0,y.Jx)(u,d)},h&&{fontWeight:(0,y.RC)(h,d)},C&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},x&&{fontStyle:"italic"},b&&{textAlign:b}])},77229:(X,L,e)=>{"use strict";e.d(L,{Jx:()=>n,RC:()=>t,jt:()=>r});const t=(a,i)=>{switch(a){case"bold":return i.typography.fontWeightBold;case"medium":return i.typography.fontWeightMedium;case"light":return i.typography.fontWeightLight;case"regular":case void 0:return i.typography.fontWeightRegular}},n=(a,i)=>{switch(a){case"error":return i.colors.error.text;case"success":return i.colors.success.text;case"info":return i.colors.info.text;case"warning":return i.colors.warning.text;default:return a?i.colors.text[a]:void 0}},r=(a,i,y)=>{if(y)return a.typography[y];switch(i){case"span":return;case"h1":return a.typography.h1;case"h2":return a.typography.h2;case"h3":return a.typography.h3;case"h4":return a.typography.h4;case"h5":return a.typography.h5;case"h6":return a.typography.h6;default:return a.typography.body}}},68421:(X,L,e)=>{"use strict";e.d(L,{K:()=>y});var t=e(41407),n=e(39953),r=e(82803),a=e(64084),i=e(15530);const y=n.forwardRef(({invalid:l,className:d,...f},m)=>{const u=(0,r.l4)(),h=c(u,l);return n.createElement("textarea",{...f,className:(0,t.cx)(h.textarea,d),ref:m})}),c=(0,a.B)((l,d=!1)=>({textarea:(0,t.cx)((0,i.RK)(l),(0,i.GL)(l),(0,t.css)({display:"block",borderRadius:l.shape.radius.default,padding:`${l.spacing.gridSize/4}px ${l.spacing.gridSize}px`,width:"100%",borderColor:d?l.colors.error.border:l.components.input.borderColor}))}));y.displayName="TextArea"},12569:(X,L,e)=>{"use strict";e.d(L,{p:()=>o});var t=e(39953),n=e(82803),r=e(42626),a=e(31276),i=e(98419),y=e(86832),c=e(92697),l=e(89591),d=e(83502),f=e(94123),m=e(73254),u=e(97898),h=e(69330),C=e(40793),x=e(36316),b=e(34547),g=e(76685),p=e(80115),v=e(44040),E=e(95966);const P=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),S=Array(53);for(let w=0;w<S.length;w++)S[w]=2**w;const M=(w,K=1)=>w==null?"-":w.toFixed(K),R={drawStyle:b.l8.Line,showPoints:b.Jp.Auto,axisPlacement:b.LB.Auto},I=({frame:w,theme:K,timeZones:V,getTimeRange:_,eventBus:U,sync:$,allFrames:k,renderers:H,tweakScale:j=J=>J,tweakAxis:z=J=>J,eventsScope:F="__global_"})=>{const J=new p.U(V[0]);let Q;J.setPrepData(be=>(Q=be[0],(0,E.Bj)(be[0],J.getStackingGroups())));const Z=w.fields[0];if(!Z)return J;const ne="x";let ee="_x",de="";const Pe=Z.config.custom?.axisPlacement!==b.LB.Hidden?b.LB.Bottom:b.LB.Hidden,ye=Z.config.custom?.axisPlacement!==b.LB.Hidden;if(Z.type===l.fS.time){ee="time",J.addScale({scaleKey:ne,orientation:b.wN.Horizontal,direction:b.bQ.Right,isTime:!0,range:()=>{const ge=_();return[ge.from.valueOf(),ge.to.valueOf()]}});const be=V.length>1?(ge,ue)=>ue.map((Ie,ot)=>ot<2?null:Ie):void 0;for(let ge=0;ge<V.length;ge++){const ue=V[ge];J.addAxis({scaleKey:ne,isTime:!0,placement:Pe,show:ye,label:Z.config.custom?.axisLabel,timeZone:ue,theme:K,grid:{show:ge===0&&Z.config.custom?.axisGridShow},filter:be})}V.length>1&&J.addHook("drawAxes",ge=>{ge.ctx.save(),ge.ctx.fillStyle=K.colors.text.primary,ge.ctx.textAlign="left",ge.ctx.textBaseline="bottom";let ue=0;ge.axes.forEach(Ie=>{if(Ie.side===2){let ot=Ie._pos+Ie._size;ge.ctx.fillText(V[ue],ge.bbox.left,ot*c.Z.pxRatio),ue++}}),ge.ctx.restore()})}else Z.config.unit&&(ee=Z.config.unit),J.addScale({scaleKey:ne,orientation:b.wN.Horizontal,direction:b.bQ.Right,range:(be,ge,ue)=>[Z.config.min??ge,Z.config.max??ue]}),J.addAxis({scaleKey:ne,placement:Pe,show:ye,label:Z.config.custom?.axisLabel,theme:K,grid:{show:Z.config.custom?.axisGridShow},formatValue:(be,ge)=>(0,d.zc)(Z.display(be,ge))});let he=H?.flatMap(be=>Object.values(be.fieldMap).filter(ge=>be.indicesOnly.indexOf(ge)===-1))??[],me;for(let be=1;be<w.fields.length;be++){const ge=w.fields[be],ue={...ge.config,custom:{...R,...ge.config.custom}},Ie=ue.custom;if(ge===Z||ge.type!==l.fS.number&&ge.type!==l.fS.enum)continue;let ot=ge.display??M;ge.config.custom?.stacking?.mode===b.o0.Percent&&(ot=(0,f.U)({field:{...ge,config:{...ge.config,unit:"percentunit"}},theme:K}));const Qe=(0,g.z1)(ue,ge.type),Me=(0,m.fD)(ge),qe=(0,m.YO)(ge,K).color;if(J.addScale(j({scaleKey:Qe,orientation:b.wN.Vertical,direction:b.bQ.Up,distribution:Ie.scaleDistribution?.type,log:Ie.scaleDistribution?.log,linearThreshold:Ie.scaleDistribution?.linearThreshold,min:ge.config.min,max:ge.config.max,softMin:Ie.axisSoftMin,softMax:Ie.axisSoftMax,centeredZero:Ie.axisCenteredZero,range:Ie.stacking?.mode===b.o0.Percent?(Xe,St,Bt)=>(St=St<0?-1:0,Bt=Bt>0?1:0,[St,Bt]):ge.type===l.fS.enum?(Xe,St,Bt)=>[-1,ge.config.type.enum.text.length]:void 0,decimals:ge.config.decimals},ge)),de||(de=Qe),Ie.axisPlacement!==b.LB.Hidden){let Xe;Ie.axisColorMode===b.yK.Series&&(Me.isByValue&&ge.config.custom?.gradientMode===b.FI.Scheme&&Me.id===u.S.Thresholds?Xe=(0,v.P2)(1,K,Me,ge.config.thresholds):Xe=qe);const St={border:{show:Ie.axisBorderShow||!1,width:1/devicePixelRatio,stroke:Xe||K.colors.text.primary},ticks:{show:Ie.axisBorderShow||!1,stroke:Xe||K.colors.text.primary},color:Xe||K.colors.text.primary};let Bt,zt,qt;if(P.has(ue.unit))Bt=S;else if(ge.type===l.fS.enum){let Qt=ge.config.type.enum.text;qt=Qt.map((yn,Zt)=>Zt),zt=Qt}J.addAxis(z({scaleKey:Qe,label:Ie.axisLabel,size:Ie.axisWidth,placement:Ie.axisPlacement??b.LB.Auto,formatValue:(Qt,yn)=>(0,d.zc)(ot(Qt,yn)),theme:K,grid:{show:Ie.axisGridShow},decimals:ge.config.decimals,distr:Ie.scaleDistribution?.type,splits:qt,values:zt,incrs:Bt,...St},ge))}const bt=Ie.drawStyle===b.l8.Points?b.Jp.Always:Ie.showPoints;let Fe=()=>null;Ie.spanNulls!==!0&&(Fe=(Xe,St,Bt,zt)=>{let qt=[],Qt=Xe.series[St];if(!Bt&&zt&&zt.length){const[yn,Zt]=Qt.idxs,re=Xe.data[0],Te=Xe.data[St],We=Math.round(Xe.valToPos(re[yn],"x",!0)),Je=Math.round(Xe.valToPos(re[Zt],"x",!0));zt[0][0]===We&&qt.push(yn);for(let je=0;je<zt.length;je++){let pt=zt[je],ft=zt[je+1];if(ft&&pt[1]===ft[0]){let Tt=Xe.posToIdx(pt[1],!0);if(Te[Tt]==null)for(let Ye=1;Ye<100;Ye++){if(Te[Tt+Ye]!=null){Tt+=Ye;break}if(Te[Tt-Ye]!=null){Tt-=Ye;break}}qt.push(Tt)}}zt[zt.length-1][1]===Je&&qt.push(Zt)}return qt.length?qt:null});let{fillOpacity:Ve}=Ie,Ue=null,it=null;if(ge.state?.origin){me||(me=A(w,k));const Xe=k[ge.state.origin.frameIndex],St=Xe?.fields[ge.state.origin.fieldIndex],Bt=(0,h.CZ)(St??ge,Xe,k);if(he.indexOf(Bt)>=0)Ue=()=>null,it=()=>{};else if(Ie.transform===b.pR.Constant){const zt=c.Z.paths.linear();Ue=(qt,Qt)=>{const yn=qt._data,Zt=_();let re=[Zt.from.valueOf(),Zt.to.valueOf()],Te=yn[Qt].find(je=>je!=null),We=[Te,Te],Je=yn.slice();return Je[0]=re,Je[Qt]=We,zt({...qt,_data:Je},Qt,0,1)}}if(Ie.fillBelowTo){const zt=w.fields.find(Zt=>Ie.fillBelowTo===Zt.name||Ie.fillBelowTo===Zt.config?.displayNameFromDS||Ie.fillBelowTo===(0,h.CZ)(Zt,w,k)),qt=zt?(0,h.CZ)(zt,w,k):Ie.fillBelowTo,Qt=me.get(Bt),yn=me.get(qt);(0,y.isNumber)(yn)&&(0,y.isNumber)(Qt)?(J.addBand({series:[Qt,yn],fill:void 0}),Ve||(Ve=35)):Ve=0}}let ze;Me.id===u.S.Thresholds&&(ze=Xe=>(0,m.YO)(Q.fields[Xe],K).color),J.addSeries({pathBuilder:Ue,pointsBuilder:it,scaleKey:Qe,showPoints:bt,pointsFilter:Fe,colorMode:Me,fillOpacity:Ve,theme:K,dynamicSeriesColor:ze,drawStyle:Ie.drawStyle,lineColor:Ie.lineColor??qe,lineWidth:Ie.lineWidth,lineInterpolation:Ie.lineInterpolation,lineStyle:Ie.lineStyle,barAlignment:Ie.barAlignment,barWidthFactor:Ie.barWidthFactor,barMaxWidth:Ie.barMaxWidth,pointSize:Ie.pointSize,spanNulls:Ie.spanNulls||!1,show:!Ie.hideFrom?.viz,gradientMode:Ie.gradientMode,thresholds:ue.thresholds,hardMin:ge.config.min,hardMax:ge.config.max,softMin:Ie.axisSoftMin,softMax:Ie.axisSoftMax,dataFrameFieldIndex:ge.state?.origin}),Ie.thresholdsStyle&&ue.thresholds&&(Ie.thresholdsStyle.mode??b.i3.Off)!==b.i3.Off&&J.addThresholds({config:Ie.thresholdsStyle,thresholds:ue.thresholds,scaleKey:Qe,theme:K,hardMin:ge.config.min,hardMax:ge.config.max,softMin:Ie.axisSoftMin,softMax:Ie.axisSoftMax})}let De=(0,E.i7)(w);J.setStackingGroups(De),H?.forEach(be=>{me||(me=A(w,k));let ge={};for(let ue in be.fieldMap){let Ie=be.fieldMap[ue];ge[ue]=me.get(Ie)}be.init(J,ge)}),J.scaleKeys=[ne,de];const le=15;let Ee={dataIdx:(be,ge,ue,Ie)=>{let ot=be.data[ge];if(ot[ue]==null){let Qe=null,Me=null,Ne;for(Ne=ue;Qe==null&&Ne-- >0;)ot[Ne]!=null&&(Qe=Ne);for(Ne=ue;Me==null&&Ne++<ot.length;)ot[Ne]!=null&&(Me=Ne);let qe=be.data[0],bt=be.valToPos(Ie,"x"),Fe=Me==null?1/0:be.valToPos(qe[Me],"x"),Ve=Qe==null?-1/0:be.valToPos(qe[Qe],"x"),Ue=bt-Ve,it=Fe-bt;Ue<=it?Ue<=le&&(ue=Qe):it<=le&&(ue=Me)}return ue}};if($&&$()!==C.m.Off){const be={point:{[ne]:null,[de]:null},data:w},ge=new x.es(be);Ee.sync={key:F,filters:{pub:(ue,Ie,ot,Qe,Me,Ne,qe)=>$&&$()===C.m.Off?!1:(be.rowIndex=qe,ot<0&&Qe<0?(be.point[ee]=null,be.point[de]=null,U.publish(new x.xH)):(be.point[ee]=Ie.posToVal(ot,ne),be.point[de]=Ie.posToVal(Qe,de),be.point.panelRelY=Qe>0?Qe/Ne:1,U.publish(ge),ge.payload.down=void 0),!0)},scales:[ne,de]}}return J.setSync(),J.setCursor(Ee),J};function A(w,K){const V=new Map;return w.fields.forEach((_,U)=>{const $=_.state?.origin;if($){const k=K[$.frameIndex]?.fields[$.fieldIndex];k&&V.set((0,h.CZ)(k,K[$.frameIndex],K),U)}}),V}const O=["legend","options","theme"];class N extends t.Component{constructor(){super(...arguments),this.panelContext={},this.prepConfig=(K,V,_)=>{const{eventBus:U,eventsScope:$,sync:k}=this.context,{theme:H,timeZone:j,renderers:z,tweakAxis:F,tweakScale:J}=this.props;return I({frame:K,theme:H,timeZones:Array.isArray(j)?j:[j],getTimeRange:_,eventBus:U,sync:k,allFrames:V,renderers:z,tweakScale:J,tweakAxis:F,eventsScope:$})},this.renderLegend=K=>{const{legend:V,frames:_}=this.props;return!K||V&&!V.showLegend||!(0,i.o)(K,_)?null:t.createElement(i.l,{data:_,config:K,...V})}}render(){return t.createElement(r.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:O,renderLegend:this.renderLegend})}}N.contextType=a.bb;const o=(0,n.HE)(N);o.displayName="TimeSeries"},36884:(X,L,e)=>{"use strict";e.d(L,{P:()=>c});var t=e(41407),n=e(39953),r=e(13172),a=e(82803),i=e(36517),y=e(68497);const c=n.memo(({children:d,theme:f="info",placement:m="auto",content:u,title:h,closeButton:C=!0,onClose:x,footer:b,fitContent:g=!1})=>{const p=(0,a.wW)(l),v=p[f],E=(0,n.useRef)(null),[P,S]=n.useState(!1),{getArrowProps:M,getTooltipProps:R,setTooltipRef:I,setTriggerRef:A,visible:O,update:N,tooltipRef:o,triggerRef:w}=(0,r.O)({visible:P,placement:m,interactive:!0,offset:[0,8],trigger:"click",onVisibleChange:V=>{S(V),V||x?.()}},{strategy:"fixed"}),K=(0,n.useCallback)(V=>{S(!1),x?.(),V.target instanceof Node&&o?.contains(V.target)&&w?.focus()},[x,o,w]);return(0,n.useEffect)(()=>{if(P){const V=_=>{_.key==="Escape"&&K(_)};return document.addEventListener("keydown",V),()=>{document.removeEventListener("keydown",V)}}},[P,K]),n.createElement(n.Fragment,null,n.cloneElement(d,{ref:A,tabIndex:0,"aria-expanded":O}),O&&n.createElement("div",{"data-testid":"toggletip-content",ref:I,...R({className:(0,t.cx)(v.container,g&&p.fitContent)})},!!h&&n.createElement("div",{className:v.header},h),C&&n.createElement("div",{className:v.headerClose},n.createElement(y.h,{tooltip:"Close",name:"times","data-testid":"toggletip-header-close",onClick:K})),n.createElement("div",{ref:E,...M({className:v.arrow})}),n.createElement("div",{className:v.body},(typeof u=="string"||n.isValidElement(u))&&u,typeof u=="function"&&N&&u({update:N})),!!b&&n.createElement("div",{className:v.footer},b)))});c.displayName="Toggletip";const l=d=>{const f=(0,i.k)(d,d.components.tooltip.background,d.components.tooltip.background,d.components.tooltip.text,{topBottom:2,rightLeft:2}),m=(0,i.k)(d,d.colors.error.main,d.colors.error.main,d.colors.error.contrastText,{topBottom:2,rightLeft:2});return{info:f,error:m,fitContent:(0,t.css)({maxWidth:"fit-content"})}}},3839:(X,L,e)=>{"use strict";e.d(L,{h:()=>f});var t=e(41407),n=e(39953),r=e(17393),a=e(75766),i=e(82803),y=e(53039),c=e(4919),l=e(39285),d=e(69865);const f=(0,n.forwardRef)(({tooltip:C,icon:x,iconSize:b,className:g,children:p,imgSrc:v,imgAlt:E,fullWidth:P,isOpen:S,narrow:M,variant:R="default",iconOnly:I,"aria-label":A,isHighlighted:O,...N},o)=>{const w=(0,i.wW)(h),K=(0,t.cx)({[w.button]:!0,[w.buttonFullWidth]:P,[w.narrow]:M},w[R],g),V=(0,t.cx)({[w.content]:!0,[w.contentWithIcon]:!!x,[w.contentWithRightIcon]:S!==void 0}),_=n.createElement("button",{ref:o,className:K,"aria-label":m(A,C),"aria-expanded":S,...N},u(x,b),v&&n.createElement("img",{className:w.img,src:v,alt:E??""}),p&&!I&&n.createElement("div",{className:V},p),S===!1&&n.createElement(l.J,{name:"angle-down"}),S===!0&&n.createElement(l.J,{name:"angle-up"}),O&&n.createElement("div",{className:w.highlight}));return C?n.createElement(d.u,{content:C,placement:"bottom"},_):_});f.displayName="ToolbarButton";function m(C,x){return C||(x?a.wl.components.PageToolbar.item(x):void 0)}function u(C,x){return C?(0,r.Mo)(C)?n.createElement(l.J,{name:C,size:`${x||"lg"}`}):C:null}const h=C=>{const x=(0,c.c9)(C,"primary","solid"),b=(0,c.c9)(C,"destructive","solid"),g=(0,t.css)({color:C.colors.text.primary,background:C.colors.secondary.main,"&:hover":{color:C.colors.text.primary,background:C.colors.secondary.shade,border:`1px solid ${C.colors.border.medium}`}});return{button:(0,t.css)({label:"toolbar-button",position:"relative",display:"flex",alignItems:"center",height:C.spacing(C.components.height.md),padding:C.spacing(0,1),borderRadius:C.shape.radius.default,lineHeight:`${C.components.height.md*C.spacing.gridSize-2}px`,fontWeight:C.typography.fontWeightMedium,border:`1px solid ${C.colors.secondary.border}`,whiteSpace:"nowrap",transition:C.transitions.create(["background","box-shadow","border-color","color"],{duration:C.transitions.duration.short}),"&:focus, &:focus-visible":{...(0,y.getFocusStyles)(C),zIndex:1},"&:focus:not(:focus-visible)":(0,y.getMouseFocusStyles)(C),"&:hover":{boxShadow:C.shadows.z1},"&[disabled], &:disabled":{cursor:"not-allowed",opacity:C.colors.action.disabledOpacity,background:C.colors.action.disabledBackground,boxShadow:"none","&:hover":{color:C.colors.text.disabled,background:C.colors.action.disabledBackground,boxShadow:"none"}}}),default:(0,t.css)({color:C.colors.text.secondary,background:"transparent",border:"1px solid transparent","&:hover":{color:C.colors.text.primary,background:C.colors.background.secondary}}),canvas:g,active:(0,t.cx)(g,(0,t.css)({"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",bottom:0,borderRadius:C.shape.radius.default,backgroundImage:C.colors.gradients.brandHorizontal}})),primary:(0,t.css)(x),destructive:(0,t.css)(b),narrow:(0,t.css)({padding:C.spacing(0,.5)}),img:(0,t.css)({width:"16px",height:"16px",marginRight:C.spacing(1)}),buttonFullWidth:(0,t.css)({flexGrow:1}),content:(0,t.css)({flexGrow:1}),contentWithIcon:(0,t.css)({display:"none",paddingLeft:C.spacing(1),[`@media ${y.mediaUp(C.v1.breakpoints.md)}`]:{display:"block"}}),contentWithRightIcon:(0,t.css)({paddingRight:C.spacing(.5)}),highlight:(0,t.css)({backgroundColor:C.colors.success.main,borderRadius:C.shape.radius.circle,width:"6px",height:"6px",position:"absolute",top:"-3px",right:"-3px",zIndex:1})}}},7258:(X,L,e)=>{"use strict";e.d(L,{R:()=>d});var t=e(41407),n=e(41056),r=e(30064),a=e(17037),i=e(39953),y=e(82803),c=e(70393),l=e(3839);const d=(0,i.forwardRef)(({alignment:m="left",className:u,children:h,...C},x)=>{const b=i.Children.toArray(h).filter(o=>o!=null),[g,p]=(0,i.useState)(Array(b.length).fill(!1)),v=(0,i.useRef)(null),[E,P]=(0,i.useState)(!1),S=(0,i.useRef)(null),M=(0,i.createRef)(),{overlayProps:R}=(0,a.Ir)({onClose:()=>P(!1),isDismissable:!0,isOpen:E,shouldCloseOnInteractOutside:o=>{const w=(0,c.RN)();return!S.current?.contains(o)&&!w.contains(o)}},M),{dialogProps:I}=(0,n.R)({},M),A=(0,y.l4)(),O=m==="left"?g.indexOf(!1)-1:g.length,N=f(A,O,m);return(0,i.useLayoutEffect)(()=>{const o=new IntersectionObserver(w=>{w.forEach(K=>{if(K.target instanceof HTMLElement&&K.target.parentNode){const V=Array.prototype.indexOf.call(K.target.parentNode.children,K.target);p(_=>{const U=[..._];return U[V]=K.isIntersecting,U})}})},{threshold:1,root:v.current});return v.current&&Array.from(v.current.children).forEach(w=>{w instanceof HTMLElement&&w!==S.current&&o.observe(w)}),()=>o.disconnect()},[h]),i.createElement("div",{ref:v,className:(0,t.cx)(N.container,u),...C},b.map((o,w)=>i.createElement("div",{key:w,style:{order:w,visibility:g[w]?"visible":"hidden"},className:N.childWrapper},o)),g.includes(!1)&&i.createElement("div",{ref:S,className:N.overflowButton},i.createElement(l.h,{variant:E?"active":"default",tooltip:"Show more items",onClick:()=>P(!E),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),E&&i.createElement(r.MT,{contain:!0,autoFocus:!0},i.createElement("div",{className:N.overflowItems,ref:M,...R,...I},b.map((o,w)=>!g[w]&&o)))))});d.displayName="ToolbarButtonRow";const f=(m,u,h)=>({overflowButton:(0,t.css)({order:u}),overflowItems:(0,t.css)({alignItems:"center",backgroundColor:m.colors.background.primary,borderRadius:m.shape.radius.default,boxShadow:m.shadows.z3,display:"flex",flexWrap:"wrap",gap:m.spacing(1),marginTop:m.spacing(1),maxWidth:"80vw",padding:m.spacing(.5,1),position:"absolute",right:0,top:"100%",width:"max-content",zIndex:m.zIndex.sidemenu}),container:(0,t.css)({alignItems:"center",display:"flex",gap:m.spacing(1),justifyContent:h==="left"?"flex-start":"flex-end",minWidth:0,position:"relative"}),childWrapper:(0,t.css)({alignItems:"center",display:"flex",gap:m.spacing(1)})})},55407:(X,L,e)=>{"use strict";e.d(L,{J:()=>l});var t=e(39953),n=e(86419),r=e(46378),a=e(72907),i=e(70393);const y={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},c={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class l extends t.PureComponent{render(){const{content:f,show:m,placement:u,className:h,wrapperClassName:C,renderArrow:x,referenceElement:b,...g}=this.props;return t.createElement(n.dK,null,t.createElement(a.ZP,{in:m,timeout:100,mountOnEnter:!0,unmountOnExit:!0},p=>t.createElement(i.h_,null,t.createElement(r.r,{placement:u,referenceElement:b,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:v,style:E,placement:P,arrowProps:S,update:M})=>t.createElement("div",{ref:v,style:{...E,...y,...c[p]},"data-placement":P,className:`${C}`,...g},t.createElement("div",{className:h},typeof f=="string"&&f,t.isValidElement(f)&&t.cloneElement(f),typeof f=="function"&&f({updatePopperPosition:M}),x&&x({arrowProps:S,placement:P})))))))}}},66557:(X,L,e)=>{"use strict";e.d(L,{D:()=>n});var t=e(39953);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:a,content:i,placement:y="auto"}=this.props,{show:c}=this.state;return a(this.showPopper,this.hidePopper,{show:c,placement:y,content:i})}}},69865:(X,L,e)=>{"use strict";e.d(L,{u:()=>c});var t=e(39953),n=e(13172),r=e(75766),a=e(82803),i=e(36517),y=e(70393);const c=t.forwardRef(({children:d,theme:f,interactive:m,show:u,placement:h,content:C},x)=>{const[b,g]=t.useState(u);(0,t.useEffect)(()=>{if(b!==!1){const O=N=>{N.key==="Escape"&&g(!1)};return document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)}}else return},[b]);const{getArrowProps:p,getTooltipProps:v,setTooltipRef:E,setTriggerRef:P,visible:S,update:M}=(0,n.O)({visible:u??b,placement:h,interactive:m,delayHide:m?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"],onVisibleChange:g}),I=(0,a.wW)(l)[f??"info"],A=(0,t.useCallback)(O=>{P(O),typeof x=="function"?x(O):x&&(x.current=O)},[x,P]);return t.createElement(t.Fragment,null,t.cloneElement(d,{ref:A,tabIndex:0}),S&&t.createElement(y.h_,null,t.createElement("div",{"data-testid":r.wl.components.Tooltip.container,ref:E,...v({className:I.container})},t.createElement("div",{...p({className:I.arrow})}),typeof C=="string"&&C,t.isValidElement(C)&&t.cloneElement(C),typeof C=="function"&&M&&C({updatePopperPosition:M}))))});c.displayName="Tooltip";const l=d=>{const f=(0,i.k)(d,d.components.tooltip.background,d.components.tooltip.background,d.components.tooltip.text,{topBottom:.5,rightLeft:1}),m=(0,i.k)(d,d.colors.error.main,d.colors.error.main,d.colors.error.contrastText,{topBottom:.5,rightLeft:1});return{info:f,["info-alt"]:f,error:m}}},93021:(X,L,e)=>{"use strict";e.d(L,{H:()=>r});var t=e(39953);function n(a,i){const y=[];return a.forEach(c=>{y.push(c.start,c.end+1)}),y[0]!==0&&y.unshift(0),y[y.length-1]!==i&&y.push(i),y}const r=a=>{let{highlightParts:i,text:y,highlightClassName:c}=a;if(!i?.length)return null;let l=[],d=n(i,y.length),f=i[0].start===0;for(let m=1;m<d.length;m++){let u=d[m-1],h=d[m];l.push((0,t.createElement)(f?"mark":"span",{key:m-1,className:f?c:void 0},y.substring(u,h))),f=!f}return t.createElement("div",null,l)}},61805:(X,L,e)=>{"use strict";e.d(L,{n:()=>i});var t=e(39953),n=e(83502),r=e(52895);function a(y){return`Custom unit: ${y}`}class i extends t.PureComponent{constructor(){super(...arguments),this.onChange=c=>{this.props.onChange(c.value)}}render(){const{value:c,width:l}=this.props;let d;const m=(0,n.QW)().map(u=>{const h=u.submenu.map(C=>{const x={label:C.text,value:C.value};return C.value===c&&(d=x),x});return{label:u.text,value:u.text,items:h}});return c&&!d&&(d={value:c,label:c}),t.createElement(r.v,{width:l,initialValue:d&&d.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:a,options:m,placeholder:"Choose",onSelect:this.props.onChange})}}},3455:(X,L,e)=>{"use strict";e.d(L,{t:()=>l});var t=e(41407),n=e(39953),r=e(92403),a=e(82803),i=e(69865);const y=m=>{const h=(0,r.CQ)(m).diff((0,r.CQ)(),"hours",!1);return`Active last ${(Math.floor(-h/24)+1)*24}h`},c=m=>{if(!m)return"";const[u,h]=m.split(" ");return`${u?.[0]??""}${h?.[0]??""}`.toUpperCase()},l=({userView:m,className:u,children:h,onClick:C,showTooltip:x=!0})=>{const{user:b,lastActiveAt:g}=m,p=(0,r.CQ)(g).diff((0,r.CQ)(),"minutes",!0)>=-15,v=(0,a.l4)(),E=(0,n.useMemo)(()=>f(v,p),[v,p]),P=n.createElement("button",{type:"button",onClick:C,className:(0,t.cx)(E.container,C&&E.pointer,u),"aria-label":`${b.name} icon`},h?n.createElement("div",{className:(0,t.cx)(E.content,E.textContent)},h):b.avatarUrl?n.createElement("img",{className:E.content,src:b.avatarUrl,alt:`${b.name} avatar`}):n.createElement("div",{className:(0,t.cx)(E.content,E.textContent)},c(b.name)));if(x){const S=n.createElement("div",{className:E.tooltipContainer},n.createElement("div",{className:E.tooltipName},b.name),n.createElement("div",{className:E.tooltipDate},p?n.createElement("div",{className:E.dotContainer},n.createElement("span",null,"Active last 15m"),n.createElement("span",{className:E.dot})):y(g)));return n.createElement(i.u,{content:S},P)}else return P},d=m=>`0 0 0 1px ${m}`,f=(m,u)=>{const h=u?m.colors.primary.main:m.colors.border.medium,C=u?m.colors.primary.text:m.colors.border.strong;return{container:(0,t.css)({padding:0,width:"30px",height:"30px",background:"none",border:"none",borderRadius:m.shape.radius.circle,"& > *":{borderRadius:m.shape.radius.circle}}),content:(0,t.css)({lineHeight:"24px",maxWidth:"100%",border:`3px ${m.colors.background.primary} solid`,boxShadow:d(h),backgroundClip:"padding-box","&:hover":{boxShadow:d(C)}}),textContent:(0,t.css)({background:m.colors.background.primary,padding:0,color:m.colors.text.secondary,textAlign:"center",fontSize:m.typography.size.sm,"&:focus":{boxShadow:d(h)}}),tooltipContainer:(0,t.css)({textAlign:"center",padding:m.spacing(0,1)}),tooltipName:(0,t.css)({fontWeight:m.typography.fontWeightBold}),tooltipDate:(0,t.css)({fontWeight:m.typography.fontWeightRegular}),dotContainer:(0,t.css)({display:"flex",alignItems:"center"}),dot:(0,t.css)({height:"6px",width:"6px",backgroundColor:m.colors.primary.main,borderRadius:m.shape.radius.circle,display:"inline-block",marginLeft:m.spacing(1)}),pointer:(0,t.css)({cursor:"pointer"})}}},96428:(X,L,e)=>{"use strict";e.d(L,{b:()=>y});var t=e(39953),n=e(75766),r=e(82803),a=e(4919),i=e(9558);function y({"aria-label":c,label:l,icon:d,options:f,onChange:m,variant:u,minWidth:h=16,size:C="sm",isFullWidth:x=!0,menuPlacement:b,fill:g,buttonCss:p}){const[v,E]=(0,t.useState)(!1),P=(0,r.l4)();return t.createElement(t.Fragment,null,!v&&t.createElement(a.zx,{size:C||"sm",className:p,icon:d||"plus",onClick:()=>E(!0),variant:u,fill:g,fullWidth:x,"aria-label":n.wl.components.ValuePicker.button(c??l)},l),v&&t.createElement("span",{style:{minWidth:P.spacing(h),flexGrow:x?1:void 0}},t.createElement(i.Ph,{placeholder:l,options:f,"aria-label":n.wl.components.ValuePicker.select(c??l),isOpen:!0,onCloseMenu:()=>E(!1),autoFocus:!0,onChange:S=>{E(!1),m(S)},menuPlacement:b})))}},96248:(X,L,e)=>{"use strict";e.d(L,{AY:()=>c});var t=e(41407),n=e(39953),r=e(13479),a=e(82803),i=e(53039),y=e(64447);const c=({width:f,height:m,legend:u,children:h})=>{const C=(0,a.l4)(),x=(0,a.wW)(l),b={display:"flex",width:`${f}px`,height:`${m}px`},[g,p]=(0,r.Z)();if(!u)return n.createElement(n.Fragment,null,n.createElement("div",{style:b,className:x.viz},h(f,m)));let{placement:v,maxHeight:E="35%",maxWidth:P="60%"}=u.props;document.body.clientWidth<C.breakpoints.values.lg&&(v="bottom");let S=null;const M={};switch(v){case"bottom":b.flexDirection="column",M.maxHeight=E,p.height&&(S={width:f,height:m-p.height});break;case"right":b.flexDirection="row",M.maxWidth=P,p.width&&(S={width:f-p.width,height:m}),u.props.width&&(M.width=u.props.width,S={width:f-u.props.width,height:m});break}return S?.width===0&&(S.width=f),S?.height===0&&(S.height=m),n.createElement("div",{style:b},n.createElement("div",{className:x.viz},S&&h(S.width,S.height)),n.createElement("div",{style:M,ref:g},n.createElement(y.$,{hideHorizontalTrack:!0},u)))},l=f=>({viz:(0,t.css)({flexGrow:2,borderRadius:f.shape.radius.default,"&:focus-visible":(0,i.getFocusStyles)(f)})}),d=({children:f})=>n.createElement(n.Fragment,null,f);c.Legend=d},67611:(X,L,e)=>{"use strict";e.d(L,{F:()=>i});var t=e(41407),n=e(39953),r=e(73254),a=e(82803);const i=n.memo(n.forwardRef(({color:c,className:l,gradient:d,...f},m)=>{const u=(0,a.l4)(),h=(0,a.wW)(y);let C;if(d){const b=r.WO.get(d).getColors?.(u);b?.length?C=`linear-gradient(90deg, ${b.join(", ")})`:C=u.visualization.getColorByName("")}else C=c;const x={background:C,width:"14px",height:"4px",borderRadius:u.shape.radius.pill,display:"inline-block",marginRight:"8px"};return n.createElement("div",{"data-testid":"series-icon",ref:m,className:(0,t.cx)(l,h.forcedColors),style:x,...f})})),y=()=>({forcedColors:(0,t.css)({"@media (forced-colors: active)":{forcedColorAdjust:"none"}})});i.displayName="SeriesIcon"},78832:(X,L,e)=>{"use strict";e.d(L,{l:()=>R});var t=e(39953),n=e(36316),r=e(34547),a=e(31276),i=e(52343),y=e(41407),c=e(82803),l=e(28471),d=e(38696),f=e(98095);const m=({items:I,itemRenderer:A,onLabelMouseOver:O,onLabelMouseOut:N,onLabelClick:o,placement:w,className:K,readonly:V})=>{const _=(0,c.wW)(u);A||(A=$=>t.createElement(f.e,{item:$,onLabelClick:o,onLabelMouseOver:O,onLabelMouseOut:N,readonly:V}));const U=$=>`${$.getItemKey?$.getItemKey():$.label}`;switch(w){case"right":{const $=(k,H)=>t.createElement("span",{className:_.itemRight},A(k,H));return t.createElement("div",{className:(0,y.cx)(_.rightWrapper,K)},t.createElement(d.a,{items:I,renderItem:$,getItemKey:U}))}case"bottom":default:{const $=(k,H)=>t.createElement("span",{className:_.itemBottom},A(k,H));return t.createElement("div",{className:(0,y.cx)(_.bottomWrapper,K)},t.createElement("div",{className:_.section},t.createElement(l.Y,{items:I.filter(k=>k.yAxis===1),renderItem:$,getItemKey:U})),t.createElement("div",{className:(0,y.cx)(_.section,_.sectionRight)},t.createElement(l.Y,{items:I.filter(k=>k.yAxis!==1),renderItem:$,getItemKey:U})))}}};m.displayName="VizLegendList";const u=I=>{const A=(0,y.css)({paddingRight:"10px",display:"flex",fontSize:I.typography.bodySmall.fontSize,whiteSpace:"nowrap"});return{itemBottom:A,itemRight:(0,y.cx)(A,(0,y.css)({marginBottom:I.spacing(.5)})),rightWrapper:(0,y.css)({paddingLeft:I.spacing(.5)}),bottomWrapper:(0,y.css)({display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",paddingLeft:I.spacing(.5)}),section:(0,y.css)({display:"flex"}),sectionRight:(0,y.css)({justifyContent:"flex-end",flexGrow:1})}};var h=e(86832),C=e(39285),x=e(83502),b=e(53039),g=e(35820);const p=({item:I,onLabelClick:A,onLabelMouseOver:O,onLabelMouseOut:N,className:o,readonly:w})=>{const K=(0,c.wW)(v),V=(0,t.useCallback)($=>{O&&O(I,$)},[I,O]),_=(0,t.useCallback)($=>{N&&N(I,$)},[I,N]),U=(0,t.useCallback)($=>{A&&A(I,$)},[I,A]);return t.createElement("tr",{className:(0,y.cx)(K.row,o)},t.createElement("td",null,t.createElement("span",{className:K.itemWrapper},t.createElement(g.i,{color:I.color,seriesName:I.label,readonly:w}),t.createElement("button",{disabled:w,type:"button",title:I.label,onBlur:_,onFocus:V,onMouseOver:V,onMouseOut:_,onClick:w?void 0:U,className:(0,y.cx)(K.label,I.disabled&&K.labelDisabled)},I.label," ",I.yAxis===2&&t.createElement("span",{className:K.yAxisLabel},"(right y-axis)")))),I.getDisplayValues&&I.getDisplayValues().map(($,k)=>t.createElement("td",{className:K.value,key:`${$.title}-${k}`},(0,x.zc)($))))};p.displayName="LegendTableItem";const v=I=>{const A=b.hoverColor(I.colors.background.primary,I);return{row:(0,y.css)({label:"LegendRow",fontSize:I.v1.typography.size.sm,borderBottom:`1px solid ${I.colors.border.weak}`,td:{padding:I.spacing(.25,1),whiteSpace:"nowrap"},"&:hover":{background:A}}),label:(0,y.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,maxWidth:"600px",textOverflow:"ellipsis",overflow:"hidden"}),labelDisabled:(0,y.css)({label:"LegendLabelDisabled",color:I.colors.text.disabled}),itemWrapper:(0,y.css)({display:"flex",whiteSpace:"nowrap",alignItems:"center"}),value:(0,y.css)({textAlign:"right"}),yAxisLabel:(0,y.css)({color:I.colors.text.secondary})}},E=({items:I,sortBy:A,sortDesc:O,itemRenderer:N,className:o,onToggleSort:w,onLabelClick:K,onLabelMouseOver:V,onLabelMouseOut:_,readonly:U,isSortable:$})=>{const k=(0,c.wW)(P),H={},j="Name";$&&(H[j]={description:"name",numeric:0,text:""});for(const F of I)if(F.getDisplayValues)for(const J of F.getDisplayValues())H[J.title??"?"]=J;const z=A?(0,h.orderBy)(I,F=>{if(A===j)return F.label;if(F.getDisplayValues){const J=F.getDisplayValues().filter(Q=>Q.title===A)[0];return J&&J.numeric}},O?"desc":"asc"):I;return N||(N=(F,J)=>t.createElement(p,{key:`${F.label}-${J}`,item:F,onLabelClick:K,onLabelMouseOver:V,onLabelMouseOut:_,readonly:U})),t.createElement("table",{className:(0,y.cx)(k.table,o)},t.createElement("thead",null,t.createElement("tr",null,!$&&t.createElement("th",null),Object.keys(H).map(F=>{const J=H[F];return t.createElement("th",{title:J.description,key:F,className:(0,y.cx)(k.header,w&&k.headerSortable,$&&k.nameHeader,{[k.withIcon]:A===F}),onClick:()=>{w&&w(F)}},F,A===F&&t.createElement(C.J,{size:"xs",name:O?"angle-down":"angle-up"}))}))),t.createElement("tbody",null,z.map(N)))},P=I=>({table:(0,y.css)({width:"100%","th:first-child":{width:"100%",borderBottom:`1px solid ${I.colors.border.weak}`}}),header:(0,y.css)({color:I.colors.primary.text,fontWeight:I.typography.fontWeightMedium,borderBottom:`1px solid ${I.colors.border.weak}`,padding:I.spacing(.25,1,.25,1),fontSize:I.typography.bodySmall.fontSize,textAlign:"right",whiteSpace:"nowrap"}),nameHeader:(0,y.css)({textAlign:"left",paddingLeft:"30px"}),withIcon:(0,y.css)({paddingRight:"4px"}),headerSortable:(0,y.css)({cursor:"pointer"})});var S=e(75881);function M(I){return I.ctrlKey||I.metaKey||I.shiftKey?i.R.AppendToSelection:i.R.ToggleSelection}function R({items:I,displayMode:A,sortBy:O,seriesVisibilityChangeBehavior:N=S.Y.Isolate,sortDesc:o,onLabelClick:w,onToggleSort:K,placement:V,className:_,itemRenderer:U,readonly:$,isSortable:k}){const{eventBus:H,onToggleSeriesVisibility:j,onToggleLegendSort:z}=(0,a.R9)(),F=(0,t.useCallback)((Z,ne)=>{H?.publish({type:n.es.type,payload:{raw:ne,x:0,y:0,dataId:Z.label}})},[H]),J=(0,t.useCallback)((Z,ne)=>{H?.publish({type:n.xH.type,payload:{raw:ne,x:0,y:0,dataId:Z.label}})},[H]),Q=(0,t.useCallback)((Z,ne)=>{w&&w(Z,ne),j&&j(Z.label,N===S.Y.Hide?i.R.AppendToSelection:M(ne))},[j,w,N]);switch(A){case r.jK.Table:return t.createElement(E,{className:_,items:I,placement:V,sortBy:O,sortDesc:o,onLabelClick:Q,onToggleSort:K||z,onLabelMouseOver:F,onLabelMouseOut:J,itemRenderer:U,readonly:$,isSortable:k});case r.jK.List:return t.createElement(m,{className:_,items:I,placement:V,onLabelMouseOver:F,onLabelMouseOut:J,onLabelClick:Q,itemRenderer:U,readonly:$});default:return null}}R.displayName="VizLegend"},98095:(X,L,e)=>{"use strict";e.d(L,{e:()=>m});var t=e(41407),n=e(39953),r=e(75766),a=e(82803),i=e(35820),y=e(86832),c=e(83502),l=e(28471);const d=({stats:h})=>{const C=(0,a.wW)(f);return h.length===0?null:n.createElement(l.Y,{className:C.list,items:h,renderItem:x=>n.createElement("div",{className:C.item,title:x.description},x.title&&`${(0,y.capitalize)(x.title)}:`," ",(0,c.zc)(x))})},f=()=>({list:(0,t.css)({flexGrow:1,textAlign:"right"}),item:(0,t.css)({marginLeft:"8px"})});d.displayName="VizLegendStatsList";const m=({item:h,onLabelClick:C,onLabelMouseOver:x,onLabelMouseOut:b,className:g,readonly:p})=>{const v=(0,a.wW)(u),E=(0,n.useCallback)(M=>{x&&x(h,M)},[h,x]),P=(0,n.useCallback)(M=>{b&&b(h,M)},[h,b]),S=(0,n.useCallback)(M=>{C&&C(h,M)},[h,C]);return n.createElement("div",{className:(0,t.cx)(v.itemWrapper,h.disabled&&v.itemDisabled,g),"aria-label":r.wl.components.VizLegend.seriesName(h.label)},n.createElement(i.i,{seriesName:h.label,color:h.color,gradient:h.gradient,readonly:p}),n.createElement("button",{disabled:p,type:"button",onBlur:P,onFocus:E,onMouseOver:E,onMouseOut:P,onClick:S,className:v.label},h.label),h.getDisplayValues&&n.createElement(d,{stats:h.getDisplayValues()}))};m.displayName="VizLegendListItem";const u=h=>({label:(0,t.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,userSelect:"text"}),itemDisabled:(0,t.css)({label:"LegendLabelDisabled",color:h.colors.text.disabled}),itemWrapper:(0,t.css)({label:"LegendItemWrapper",display:"flex",whiteSpace:"nowrap",alignItems:"center",flexGrow:1}),value:(0,t.css)({textAlign:"right"}),yAxisLabel:(0,t.css)({color:h.v1.palette.gray2})})},35820:(X,L,e)=>{"use strict";e.d(L,{i:()=>i});var t=e(39953),n=e(69360),r=e(31276),a=e(67611);const i=t.memo(({seriesName:y,color:c,gradient:l,readonly:d})=>{const{onSeriesColorChange:f}=(0,r.R9)(),m=(0,t.useCallback)(u=>f(y,u),[y,f]);return y&&f&&c&&!d?t.createElement(n.sp,{color:c,onChange:m,enableNamedColors:!0},({ref:u,showColorPicker:h,hideColorPicker:C})=>t.createElement(a.F,{color:c,className:"pointer",ref:u,onClick:h,onMouseLeave:C})):t.createElement(a.F,{color:c,gradient:l})});i.displayName="VizLegendSeriesIcon"},75881:(X,L,e)=>{"use strict";e.d(L,{Y:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},4367:(X,L,e)=>{"use strict";e.d(L,{Q:()=>i});var t=e(39953),n=e(64943);const r=(c,l,d,f)=>{const m=a(c,l,f),u=a(l,c,f),h=Math.max(m,u);let C=Math.floor(c/h),x=Math.ceil(f/C);C=Math.ceil(f/x);const b=C-(C*x-f),g=c/b-d+d/b;return{width:c/C-d+d/C,height:l/x-d+d/x,widthOnLastRow:g,xCount:C,yCount:x}};function a(c,l,d){const f=Math.ceil(Math.sqrt(d*c/l));return Math.floor(f*l/c)*f<d?l/Math.ceil(f*l/c):c/f}class i extends t.PureComponent{constructor(l){super(l),this.state={values:l.getValues()}}componentDidUpdate(l){const{renderCounter:d,source:f}=this.props;(d!==l.renderCounter||f!==l.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:l,width:d,height:f}=this.props;return l===n.wm.Auto?d>f?n.wm.Vertical:n.wm.Horizontal:l}renderGrid(){const{renderValue:l,height:d,width:f,itemSpacing:m,getAlignmentFactors:u,orientation:h}=this.props,{values:C}=this.state,x=r(f,d,m,C.length),b=u?u(C,x.width,x.height):{};let g=0,p=0,v=[];for(let E=0;E<C.length;E++){const P=C[E],M=p===x.yCount-1?x.widthOnLastRow:x.width,R=x.height,I=g*M+m*g,A=p*R+m*p,O={position:"absolute",left:I,top:A,width:`${M}px`,height:`${R}px`};v.push(t.createElement("div",{key:E,style:O},l({value:P,width:M,height:R,alignmentFactors:b,orientation:h,count:C.length}))),g++,g===x.xCount&&(g=0,p++)}return t.createElement("div",{style:{position:"relative"}},v)}render(){const{renderValue:l,height:d,width:f,itemSpacing:m,getAlignmentFactors:u,autoGrid:h,orientation:C,minVizWidth:x,minVizHeight:b}=this.props,{values:g}=this.state;if(h&&C===n.wm.Auto)return this.renderGrid();const p={display:"flex"},v={display:"flex",overflow:`${x?"auto":"hidden"} ${b?"auto":"hidden"}`};let E=d,P=f,S=this.getOrientation();switch(S){case n.wm.Horizontal:v.flexDirection="column",v.height=`${d}px`,p.marginBottom=`${m}px`,P=f,E=Math.max(d/g.length-m+m/g.length,b??0);break;case n.wm.Vertical:v.flexDirection="row",v.justifyContent="space-between",p.marginRight=`${m}px`,E=d,P=Math.max(f/g.length-m+m/g.length,x??0)}p.width=`${P}px`,p.height=`${E}px`;const M=u?u(g,P,E):{};return t.createElement("div",{style:v},g.map((R,I)=>t.createElement("div",{key:I,style:y(p,I,g.length)},l({value:R,width:P,height:E,alignmentFactors:M,orientation:S,count:g.length}))))}}i.defaultProps={itemSpacing:8};function y(c,l,d){return l===d-1?{...c,marginRight:0,marginBottom:0}:c}},55987:(X,L,e)=>{"use strict";e.d(L,{V:()=>y,c:()=>c});var t=e(41407),n=e(39953),r=e(82803),a=e(67611);const i=l=>({icon:(0,t.css)({marginRight:l.spacing(1),verticalAlign:"middle"}),seriesTable:(0,t.css)({display:"table"}),seriesTableRow:(0,t.css)({display:"table-row",fontSize:l.typography.bodySmall.fontSize}),seriesTableCell:(0,t.css)({display:"table-cell"}),label:(0,t.css)({wordBreak:"break-all"}),value:(0,t.css)({paddingLeft:l.spacing(2),textAlign:"right"}),activeSeries:(0,t.css)({fontWeight:l.typography.fontWeightBold,color:l.colors.text.maxContrast}),timestamp:(0,t.css)({fontWeight:l.typography.fontWeightBold,fontSize:l.typography.bodySmall.fontSize})}),y=({color:l,label:d,value:f,isActive:m})=>{const u=(0,r.wW)(i);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(u.seriesTableRow,m&&u.activeSeries)},l&&n.createElement("div",{className:u.seriesTableCell},n.createElement(a.F,{color:l,className:u.icon})),d&&n.createElement("div",{className:(0,t.cx)(u.seriesTableCell,u.label)},d),f&&n.createElement("div",{className:(0,t.cx)(u.seriesTableCell,u.value)},f))},c=({timestamp:l,series:d})=>{const f=(0,r.wW)(i);return n.createElement(n.Fragment,null,l&&n.createElement("div",{className:f.timestamp,"aria-label":"Timestamp"},l),d.map((m,u)=>n.createElement(y,{isActive:m.isActive,label:m.label,color:m.color,value:m.value,key:`${m.label}-${u}`})))}},49621:(X,L,e)=>{"use strict";e.d(L,{I:()=>y});var t=e(41407),n=e(39953),r=e(82803),a=e(70393),i=e(41013);const y=({content:l,position:d,offset:f})=>{const m=(0,r.wW)(c);return d?n.createElement(a.h_,{className:m.portal},n.createElement(i.S,{position:d,offset:f||{x:0,y:0}},l)):null};y.displayName="VizTooltip";const c=()=>({portal:(0,t.css)({position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%"})})},41013:(X,L,e)=>{"use strict";e.d(L,{S:()=>c});var t=e(41407),n=e(39953),r=e(29721),a=e(82803),i=e(53039);const y=(d=0,f=0,m=0,u=0,h=0,C=0,x=0,b=0)=>{let g=d,p=f;const v=Math.max(d+h+m-(x-h),0),E=Math.abs(Math.min(d-h-m-h,0)),P=v>0,S=E>0,M=Math.max(f+C+u-(b-C),0),R=Math.abs(Math.min(f-C-u-C,0)),I=M>0,A=R>0;return P&&S?g=v>E?h:x-h-m:P?g=d-h-m:g=d+h,I&&A?p=M>R?C:b-C-u:I?p=f-C-u:p=f+C,{x:g,y:p}},c=({position:{x:d,y:f},offset:{x:m,y:u},children:h,allowPointerEvents:C=!1,className:x,...b})=>{const g=(0,n.useRef)(null),[p,v]=(0,n.useState)({width:0,height:0}),{width:E,height:P}=(0,r.Z)(),[S,M]=(0,n.useState)({x:d+m,y:f+u}),R=(0,n.useMemo)(()=>new ResizeObserver(A=>{for(let O of A){const N=Math.floor(O.contentRect.width+16),o=Math.floor(O.contentRect.height+2*8);(p.width!==N||p.height!==o)&&v({width:Math.min(N,E),height:Math.min(o,P)})}}),[p,E,P]);(0,n.useLayoutEffect)(()=>(g.current&&R.observe(g.current),()=>{R.disconnect()}),[R]),(0,n.useLayoutEffect)(()=>{if(g&&g.current){const{x:A,y:O}=y(d,f,p.width,p.height,m,u,E,P);M({x:A,y:O})}},[E,P,d,m,f,u,p]);const I=(0,a.wW)(l);return n.createElement("div",{ref:g,style:{position:"fixed",left:0,pointerEvents:C?"auto":"none",top:0,transform:`translate(${S.x}px, ${S.y}px)`,transition:"transform ease-out 0.1s"},"aria-live":"polite","aria-atomic":"true",...b,className:(0,t.cx)(I.wrapper,x)},h)};c.displayName="VizTooltipContainer";const l=d=>({wrapper:(0,t.css)((0,i.getTooltipContainerStyles)(d))})},3587:(X,L,e)=>{"use strict";e.r(L),e.d(L,{Alert:()=>pe.b,AlertingSettings:()=>Tn.O,AsyncMultiSelect:()=>zn.M8,AsyncSelect:()=>zn.qb,AsyncVirtualizedSelect:()=>zn.gY,AutoSaveField:()=>Z.h,AutoSizeInput:()=>ts.H,Badge:()=>ma.C,BarGauge:()=>yn.xf,BarGaugeDisplayMode:()=>ir.QH,BigValue:()=>Xe.w6,BigValueColorMode:()=>Xe.pc,BigValueGraphMode:()=>Xe.IG,BigValueJustifyMode:()=>Xe.ap,BigValueTextMode:()=>Xe.jG,BrowserLabel:()=>xn._,Button:()=>un.zx,ButtonCascader:()=>P.O,ButtonGroup:()=>nt.h,ButtonSelect:()=>oa.d,CallToActionCard:()=>Pt._,Card:()=>rr.Z,CardContainer:()=>qs._,Cascader:()=>E.v,CertificationKey:()=>On.W,Checkbox:()=>Za.X,ClickOutsideWrapper:()=>dt.L,ClipboardButton:()=>v.m,CodeEditor:()=>me.p,CodeEditorSuggestionItemKind:()=>le.k,CollapsableSection:()=>ve.s,Collapse:()=>ae.U,ColorPicker:()=>I.zH,ColorPickerInput:()=>A.T,ConfirmButton:()=>f.p,ConfirmModal:()=>ye.s,Container:()=>ha.W2,ContextMenu:()=>we.x,ControlledCollapse:()=>ae.y,Counter:()=>it.A,CustomHeadersSettings:()=>mn.H,CustomScrollbar:()=>g.$,DataLinkButton:()=>xe.k,DataLinkInput:()=>Rt.v,DataLinksContextMenu:()=>Ut.V,DataLinksInlineEditor:()=>lt.d,DataSourceHttpSettings:()=>gn.E,DatePicker:()=>H.M,DatePickerWithInput:()=>j.d,DateTimePicker:()=>z.x,DeleteButton:()=>m.m,Divider:()=>As.i,Drawer:()=>Ft.d,Dropdown:()=>Ra.L,DropdownIndicator:()=>qn.m,EmptySearchResult:()=>N.K,ErrorBoundary:()=>Ht.SV,ErrorBoundaryAlert:()=>Ht.z4,ErrorWithStack:()=>tn.X,EventsCanvas:()=>Xr.TZ,FIXED_UNIT:()=>Nt.j,FadeTransition:()=>ia.n,FeatureBadge:()=>Mt.a,FeatureInfoBox:()=>Mt.Z,Field:()=>Fn.g,FieldArray:()=>Ln.F,FieldLinkList:()=>Ge.Z,FieldSet:()=>ut.C,FieldValidationMessage:()=>vt.S,FileDropzone:()=>gr.Yo,FileDropzoneDefaultChildren:()=>gr.A_,FileListItem:()=>gr.K$,FileUpload:()=>ds.p,FilterInput:()=>ga.H,FilterPill:()=>Pe.B,Form:()=>cn.l,FormattedValueDisplay:()=>or.W,FullWidthButtonContainer:()=>at.f,Gauge:()=>Bt.a,Graph:()=>zt.k,GraphContextMenu:()=>Qt.w,GraphContextMenuHeader:()=>Qt.b,GraphNG:()=>Nt.d,GraphSeriesToggler:()=>Re.U,GraphWithLegend:()=>qt.U,HorizontalGroup:()=>ha.Lh,Icon:()=>l.J,IconButton:()=>d.h,InfoBox:()=>$n.v,InlineField:()=>Et._,InlineFieldRow:()=>Gt.Z,InlineFormLabel:()=>Ks.c,InlineLabel:()=>en.W,InlineSegmentGroup:()=>It.m,InlineSwitch:()=>vs.x,InlineToast:()=>S.K,Input:()=>Xa.I,InputControl:()=>rn.g,InteractiveTable:()=>J.e,JSONFormatter:()=>yt.g,JsonExplorer:()=>At.u,KeyboardPlugin:()=>Or.Cm,Label:()=>Qn._,LegacyForms:()=>xa,LegacyInputStatus:()=>n.G,Legend:()=>Ea.D,Link:()=>Pn.r,LinkButton:()=>un.Qj,List:()=>F.a,LoadingBar:()=>R.F,LoadingPlaceholder:()=>M.u,Marker:()=>Xr.Jx,Menu:()=>Le.v,MenuGroup:()=>Ke.k,MenuItem:()=>ht.s,Modal:()=>be.u,ModalHeader:()=>ge.x,ModalRoot:()=>ot.Y0,ModalTabContent:()=>Ie.Q,ModalTabsHeader:()=>ue.H,ModalsContext:()=>ot.kr,ModalsController:()=>ot.JY,ModalsProvider:()=>ot.$i,MultiSelect:()=>zn.NU,PageToolbar:()=>Qe.X,Pagination:()=>ne.t,PanelChrome:()=>je.fm,PanelChromeLoadingIndicator:()=>pt.T,PanelContainer:()=>Un.l,PanelContextProvider:()=>ft._w,PanelContextRoot:()=>ft.bb,PlotLegend:()=>Vr.l,PluginSignatureBadge:()=>$t.o,Popover:()=>C.J,PopoverController:()=>h.D,Portal:()=>b.h_,PortalContainer:()=>b.lO,QueryField:()=>he.q,RadioButtonGroup:()=>_a.S,RadioButtonList:()=>Qa.x,RangeSlider:()=>an.U,ReactMonacoEditor:()=>De.o,RefreshPicker:()=>K.dP,RelativeTimeRangePicker:()=>Xs.x,RenderUserContentAsHTML:()=>ze.D,ScaleDistribution:()=>ir.wf,SecretInput:()=>es.m,SecretTextArea:()=>bs.Z,SecureSocksProxySettings:()=>ln.i,Segment:()=>Da.X,SegmentAsync:()=>ja.V,SegmentInput:()=>Na.X,SegmentSection:()=>gt.f,SegmentSelect:()=>Ha.V,Select:()=>zn.Ph,SelectContainer:()=>zn.eI,SeriesColorPicker:()=>I.sp,SeriesColorPickerPopover:()=>O.j,SeriesColorPickerPopoverWithTheme:()=>O.q,SeriesIcon:()=>Xt.F,SeriesTable:()=>Te.c,SeriesTableRow:()=>Te.V,SeriesVisibilityChangeBehavior:()=>Ye.Y,SeriesVisibilityChangeMode:()=>An.R,SetInterval:()=>Me.F,SlideOutTransition:()=>da.R,Slider:()=>jt.i,Sparkline:()=>St.b,Spinner:()=>Nn.$,StatsPicker:()=>w.m,Switch:()=>vs.r,TLSAuthSettings:()=>Wn.s,Tab:()=>Fe.O,TabContent:()=>Ue.I,TabbedContainer:()=>p.W,Table:()=>Ne.i,TableInputCSV:()=>qe.w,TabsBar:()=>bt.J,Tag:()=>ee.V,TagList:()=>de.P,TagsInput:()=>Q.B,Text:()=>In.x,TextArea:()=>cs.K,TextLink:()=>pn.h,TimeOfDayPicker:()=>U.y,TimePickerTooltip:()=>V.IF,TimeRangeInput:()=>Vs.K,TimeRangeLabel:()=>_.q,TimeRangePicker:()=>V.Xc,TimeSeries:()=>Jt.p,TimeZonePicker:()=>$.O,Toggletip:()=>x.P,ToolbarButton:()=>Be.h,ToolbarButtonRow:()=>et.R,Tooltip:()=>u.u,TooltipPlugin:()=>Or.ii,TooltipPlugin2:()=>Or.x2,UPLOT_AXIS_FONT_SIZE:()=>lr.gD,UPlotChart:()=>Ls.N,UPlotConfigBuilder:()=>ws.U,UnitPicker:()=>o.n,UserIcon:()=>Ya.t,ValuePicker:()=>kt.b,VerticalGroup:()=>ha.wc,VerticalTab:()=>Ve.L,VirtualizedSelect:()=>zn.LT,VizLayout:()=>Tt.AY,VizLegend:()=>Ce.l,VizLegendListItem:()=>oe.e,VizRepeater:()=>We.Q,VizTooltip:()=>Zt.I,VizTooltipContainer:()=>re.S,WeekStartPicker:()=>k.z,WithContextMenu:()=>xt.z,XYCanvas:()=>Xr.K2,ZoomPlugin:()=>Or.Rb,buildScaleKey:()=>vn.z1,clearButtonStyles:()=>un.gN,convertOldAngularValueMapping:()=>st.PR,defaultIntervals:()=>K.o5,fieldMatchersUI:()=>nn.i,getCardStyles:()=>rr.L,getInputStyles:()=>Xa.H,getPortalContainer:()=>b.RN,getSelectStyles:()=>Ia.D,graphFieldOptions:()=>er.q,graphTickFormatter:()=>Je.sV,graphTimeFormat:()=>Je.mc,preparePlotFrame:()=>vn.Rn,resetSelectStyles:()=>jn.Z,sharedInputStyle:()=>hn.RK,sharedSingleStatMigrationHandler:()=>st.rD,sharedSingleStatPanelChangedHandler:()=>st.ZH,useGraphNGContext:()=>Yt.z,usePanelContext:()=>ft.R9,variableSuggestionToCodeEditorSuggestion:()=>Ee.T,withErrorBoundary:()=>Ht.Pf});var t=e(12392),n=e(27325),r=e(43377),a=e(80010),i=e(81425),y=e(35829),c=e(16557),l=e(39285),d=e(68497),f=e(85387),m=e(51932),u=e(69865),h=e(66557),C=e(55407),x=e(36884),b=e(70393),g=e(64447),p=e(77514),v=e(36210),E=e(52895),P=e(97725),S=e(99560),M=e(84766),R=e(94615),I=e(69360),A=e(81573),O=e(33312),N=e(16708),o=e(61805),w=e(54173),K=e(82563),V=e(56064),_=e(48408),U=e(63930),$=e(87783),k=e(76843),H=e(90838),j=e(16991),z=e(67823),F=e(38696),J=e(94696),Q=e(97250),Z=e(63528),ne=e(39017),ee=e(51064),de=e(3532),Pe=e(13868),ye=e(32840),he=e(54795),me=e(84541),De=e(13094),le=e(99566),Ee=e(74317),be=e(73075),ge=e(1936),ue=e(35823),Ie=e(85188),ot=e(39106),Qe=e(44138),Me=e(45679),Ne=e(23166),qe=e(59158),bt=e(22784),Fe=e(77804),Ve=e(4092),Ue=e(90201),it=e(54951),ze=e(18328),Xe=e(26753),St=e(52542),Bt=e(78031),zt=e(27199),qt=e(19032),Qt=e(84415),yn=e(24300),Zt=e(49621),re=e(41013),Te=e(55987),We=e(4367),Je=e(38913),je=e(63801),pt=e(32961),ft=e(31276),Tt=e(96248),Ye=e(75881),Ce=e(78832),oe=e(98095),pe=e(33155),Re=e(85574),ae=e(62818),ve=e(4516),xe=e(39960),Ge=e(63544),at=e(95502),dt=e(846),st=e(76117),Pt=e(80318),we=e(53790),Le=e(13767),Ke=e(43078),ht=e(85001),xt=e(43867),lt=e(86467),Rt=e(76480),Ut=e(22785),Xt=e(67611),$n=e(7429),Mt=e(5217),yt=e(19649),At=e(72202),Ht=e(41393),tn=e(35521),gn=e(3782),mn=e(81177),Tn=e(23333),ln=e(47169),Wn=e(40108),On=e(44062),Nn=e(28409),ia=e(63618),da=e(69043),Da=e(26005),ja=e(60314),Na=e(61141),Ha=e(24955),gt=e(75160),Ft=e(87722),jt=e(23527),an=e(98263),cn=e(85830),hn=e(15530),rn=e(9006),un=e(4919),nt=e(48824),Be=e(3839),et=e(7258),kt=e(96428),nn=e(7023),Pn=e(18950),pn=e(66729),In=e(98632),Qn=e(36495),Fn=e(96227),Ea=e(96276),ut=e(2827),vt=e(43324),Et=e(69171),It=e(27303),en=e(99491),Gt=e(74661),Ln=e(58464),jn=e(65435),zn=e(9558),qn=e(82449),Ia=e(15246),va=e(32109),aa=e.n(va),ta={};for(const za in va)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","graphTimeFormat","graphTickFormatter","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","DropdownIndicator","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","InlineFormLabel","Divider","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","GraphNG","FIXED_UNIT","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","BrowserLabel","PanelContainer","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(za)<0&&(ta[za]=()=>va[za]);e.d(L,ta);var ha=e(12223),ma=e(12608),_a=e(20454),Qa=e(41641),Xa=e(38637),ts=e(28448),ga=e(41245),es=e(10626),bs=e(75583),vs=e(26286),Za=e(13026),cs=e(68421),ds=e(72939),gr=e(86320),Vs=e(88252),Xs=e(24325),rr=e(4236),qs=e(78020),or=e(6430),oa=e(5222),Ra=e(58047),$t=e(45802),Ya=e(3455),Ks=e(56921),As=e(68832),er=e(39480),ir=e(34547),ws=e(80115),lr=e(59208),Ls=e(79469),Vr=e(98419),Xr=e(43523),Or=e(64535),Nt=e(42626),Jt=e(12569),Yt=e(71170),vn=e(76685),An=e(52343),xn=e(52499),Un=e(41804);const xa={SecretFormField:c.c,FormField:t.W,Select:i.Ph,AsyncSelect:i.qb,IndicatorsContainer:r.B,NoOptionsMessage:a.P,Input:n.I,Switch:y.r}},63618:(X,L,e)=>{"use strict";e.d(L,{n:()=>y});var t=e(41407),n=e(39953),r=e(17088),a=e(64084);const i=(0,a.B)(c=>({enter:(0,t.css)({label:"enter",opacity:0}),enterActive:(0,t.css)({label:"enterActive",opacity:1,transition:`opacity ${c}ms ease-out`}),exit:(0,t.css)({label:"exit",opacity:1}),exitActive:(0,t.css)({label:"exitActive",opacity:0,transition:`opacity ${c}ms ease-out`})}));function y(c){const{visible:l,children:d,duration:f=250}=c,m=i(f);return n.createElement(r.Z,{in:l,mountOnEnter:!0,unmountOnExit:!0,timeout:f,classNames:m},d)}},69043:(X,L,e)=>{"use strict";e.d(L,{R:()=>y});var t=e(41407),n=e(39953),r=e(17088),a=e(64084);const i=(0,a.B)((c,l,d)=>({enter:(0,t.css)({label:"enter",[`${l}`]:0,opacity:0}),enterActive:(0,t.css)({label:"enterActive",[`${l}`]:`${d}px`,opacity:1,transition:`opacity ${c}ms ease-out, ${l} ${c}ms ease-out`}),exit:(0,t.css)({label:"exit",[`${l}`]:`${d}px`,opacity:1}),exitActive:(0,t.css)({label:"exitActive",opacity:0,[`${l}`]:0,transition:`opacity ${c}ms ease-out, ${l} ${c}ms ease-out`})}));function y(c){const{visible:l,children:d,duration:f=250,horizontal:m,size:u}=c,h=i(f,m?"width":"height",u);return n.createElement(r.Z,{in:l,mountOnEnter:!0,unmountOnExit:!0,timeout:f,classNames:h},d)}},79469:(X,L,e)=>{"use strict";e.d(L,{N:()=>c});var t=e(39953),n=e(92697),r=e(95966);function a(l,d){return d.width===l.width&&d.height===l.height}function i(l,d){return d.data===l.data}function y(l,d){return d.config===l.config}class c extends t.Component{constructor(d){super(d),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:d,height:f,plotRef:m}=this.props;if(this.state.plot?.destroy(),d===0&&f===0)return;this.props.config.addHook("setSize",C=>{C.over});const u={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,r.Zp)("UPlot",!1,"Reinitializing plot",u);const h=new n.Z(u,this.props.data,this.plotContainer.current);m&&m(h),this.setState({plot:h})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(d){let{plot:f}=this.state;a(d,this.props)?y(d,this.props)?i(d,this.props)||f?.setData(this.props.data):this.reinitPlot():f?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},98419:(X,L,e)=>{"use strict";e.d(L,{l:()=>u,o:()=>m});var t=e(39953),n=e(69330),r=e(73254),a=e(53470),i=e(94123),y=e(34547),c=e(82803),l=e(96248),d=e(78832);const f=h=>h==null?"-":h.toFixed(1);function m(h,C){return h.getSeries().some(x=>{const b=x.props.dataFrameFieldIndex;if(!b)return!1;const g=C[b.frameIndex]?.fields[b.fieldIndex];return!(!g||g.config.custom?.hideFrom?.legend)})}const u=t.memo(({data:h,config:C,placement:x,calcs:b,displayMode:g,...p})=>{const v=(0,c.l4)(),E=C.getSeries().map(P=>{const S=P.props,M=S.dataFrameFieldIndex,R=C.getAxisPlacement(P.props.scaleKey);if(!M)return;const I=h[M.frameIndex]?.fields[M.fieldIndex];if(!I||I.config.custom?.hideFrom?.legend)return;const A=(0,n.CZ)(I,h[M.frameIndex],h),N=(0,r.YO)(I,v).color;return{disabled:!(S.show??!0),fieldIndex:M,color:N,label:A,yAxis:R===y.LB.Left||R===y.LB.Bottom?1:2,getDisplayValues:()=>{if(!b?.length)return[];const o=I.display??f;let w=null;const K=(0,a.Kx)({field:I,reducers:b});return b.map(V=>{const _=a.TB.get(V);let U=o;return _.id===a.gz.diffperc&&(U=(0,i.U)({field:{...I,config:{...I.config,unit:"percentunit"}},theme:v})),(_.id===a.gz.count||_.id===a.gz.changeCount||_.id===a.gz.distinctCount)&&(w||(w=(0,i.U)({field:{...I,config:{...I.config,unit:"none"}},theme:v})),U=w),{...U(K[V]),title:_.name,description:_.description}})},getItemKey:()=>`${A}-${M.frameIndex}-${M.fieldIndex}`}}).filter(P=>P!==void 0);return t.createElement(l.AY.Legend,{placement:x,...p},t.createElement(d.l,{placement:x,items:E,displayMode:g,sortBy:p.sortBy,sortDesc:p.sortDesc,isSortable:!0}))});u.displayName="PlotLegend"},39480:(X,L,e)=>{"use strict";e.d(L,{q:()=>n});var t=e(34547);const n={drawStyle:[{label:"Lines",value:t.l8.Line},{label:"Bars",value:t.l8.Bars},{label:"Points",value:t.l8.Points}],lineInterpolation:[{description:"Linear",value:t.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:t.Jp.Always},{label:"Never",value:t.Jp.Never}],axisPlacement:[{label:"Auto",value:t.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.LB.Left},{label:"Right",value:t.LB.Right},{label:"Hidden",value:t.LB.Hidden}],fillGradient:[{label:"None",value:t.FI.None},{label:"Opacity",value:t.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.o0.None},{label:"Normal",value:t.o0.Normal},{label:"100%",value:t.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.i3.Off},{label:"As lines",value:t.i3.Line},{label:"As lines (dashed)",value:t.i3.Dashed},{label:"As filled regions",value:t.i3.Area},{label:"As filled regions and lines",value:t.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.i3.DashedAndArea}]}},59208:(X,L,e)=>{"use strict";e.d(L,{ff:()=>m,gD:()=>d,mr:()=>h});var t=e(83502),n=e(99331),r=e(47330),a=e(48069),i=e(34547),y=e(76297),c=e(43388),l=e(62663);const d=12,f=8;class m extends c.L{merge(b){this.props.size=(0,l.V)("max",this.props.size,b.size),this.props.label||(this.props.label=b.label),this.props.placement===i.LB.Auto&&(this.props.placement=b.placement)}calculateSpace(b,g,p,v,E){const P=b.axes[g],S=b.scales[P.scale];if(P.side!==2||!S)return 30;const M=40;if(S.time){const R=E/M,I=(v-p)/R,A=h(b,[p],g,M,I);return(0,y.X1)(A[0],d).width+18}return M}calculateAxisSize(b,g,p){const v=b.axes[p];let E=v.ticks.size;if(v.side===2)E+=v.gap+d;else if(g?.length){let P=g.reduce((M,R)=>Math.max(M,(0,y.X1)(R,d).width),0);const S=Math.min(b.width*.4,P);E+=v.gap+v.labelGap+S}return Math.ceil(E)}getConfig(){let{scaleKey:b,label:g,show:p=!0,placement:v=i.LB.Auto,grid:E={show:!0},ticks:P,space:S,filter:M,gap:R=5,formatValue:I,splits:A,values:O,incrs:N,isTime:o,timeZone:w,theme:K,tickLabelRotation:V,size:_,color:U,border:$,decimals:k,distr:H=i.wf.Linear}=this.props;const j=`${d}px ${K.typography.fontFamily}`,z=K.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.br)(b)&&(A=[0,1]),k===0&&H===i.wf.Linear&&(M=(J,Q)=>Q.map(Z=>Number.isInteger(Z)?Z:null));let F={scale:b,show:p,stroke:U??K.colors.text.primary,side:C(v),font:j,size:_??((J,Q,Z)=>this.calculateAxisSize(J,Q,Z)),rotate:V,gap:R,labelGap:0,grid:{show:E.show,stroke:z,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:$?.show?U??K.colors.text.primary:z,width:1/devicePixelRatio,size:4},P),splits:A,values:O,space:S??((J,Q,Z,ne,ee)=>this.calculateSpace(J,Q,Z,ne,ee)),filter:M,incrs:N};return $?.show&&(F.border={stroke:U??K.colors.text.primary,width:1/devicePixelRatio,...$}),g!=null&&g.length>0&&(F.label=g,F.labelSize=d+f,F.labelFont=j,F.labelGap=f),O?F.values=O:o?F.values=h:I&&(F.values=(J,Q,Z,ne,ee)=>{let de=(0,n.d)((0,n.O)(ee,6));return Q.map(Pe=>I(Pe,de>0?de:void 0))}),F.timeZone=w,F}}const u={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function h(x,b,g,p,v){const E=x.axes[g].timeZone,P=x.scales.x,S=(P?.max??0)-(P?.min??0),M=Math.round(u.year/u.day)*u.day,R=Math.round(v/u.day)*u.day;let I=r.U6.interval.year;return v<u.second?I=r.U6.interval.millisecond:v<=u.minute?I=r.U6.interval.second:S<=u.day?I=r.U6.interval.minute:v<=u.day?I=r.U6.interval.hour:S<u.year?I=r.U6.interval.day:R===M?I=r.U6.interval.year:v<=u.year&&(I=r.U6.interval.month),b.map(A=>A==null?"":(0,a.dq)(A,{format:I,timeZone:E}))}function C(x){switch(x){case i.LB.Top:return 0;case i.LB.Right:return 1;case i.LB.Bottom:return 2;case i.LB.Left:}return 3}},80115:(X,L,e)=>{"use strict";e.d(L,{U:()=>E});var t=e(86832),n=e(92697),r=e(54554),a=e(36602),i=e(34547),y=e(95966),c=e(59208),l=e(62663),d=e(97898),f=e(91249),m=e(43388),u=e(44040);class h extends m.L{getConfig(){const{facets:S,drawStyle:M,pathBuilder:R,pointsBuilder:I,pointsFilter:A,lineInterpolation:O,lineWidth:N,lineStyle:o,barAlignment:w,barWidthFactor:K,barMaxWidth:V,showPoints:_,pointSize:U,scaleKey:$,pxAlign:k,spanNulls:H,show:j=!0}=this.props;let z={},F=this.getLineColor();z.stroke=F,z.width=N,o&&o.fill!=="solid"&&(o.fill==="dot"&&(z.cap="round"),z.dash=o.dash??[10,10]),R!=null?z.paths=R:M===i.l8.Points?z.paths=()=>null:M!=null&&(z.paths=(Z,ne,ee,de)=>x(M,O,w,K,V)(Z,ne,ee,de));const J=typeof F=="string"?F:(Z,ne)=>Z.series[ne]._stroke,Q={points:{stroke:J,fill:J,size:!U||U<N?void 0:U,filter:A}};return I!=null?Q.points.show=I:M===i.l8.Points?Q.points.show=!0:_===i.Jp.Auto?M===i.l8.Bars&&(Q.points.show=!1):_===i.Jp.Never?Q.points.show=!1:_===i.Jp.Always&&(Q.points.show=!0),{scale:$,facets:S,spanGaps:typeof H=="number"?!1:H,value:()=>"",pxAlign:k,show:j,fill:this.getFill(),...z,...Q}}getLineColor(){const{lineColor:S,gradientMode:M,colorMode:R,thresholds:I,theme:A,hardMin:O,hardMax:N,softMin:o,softMax:w,dynamicSeriesColor:K}=this.props;return M===i.FI.None&&K?(V,_)=>K(_)??S??d.R:M===i.FI.Scheme&&R?.id!==d.S.Fixed?(0,u.P2)(1,A,R,I,O,N,o,w):S??d.R}getFill(){const{lineColor:S,fillColor:M,gradientMode:R,fillOpacity:I,colorMode:A,thresholds:O,theme:N,hardMin:o,hardMax:w,softMin:K,softMax:V,dynamicSeriesColor:_}=this.props;if(M)return M;const U=R??i.FI.None,$=(I??0)/100;if(U===i.FI.None&&_&&$>0)return(k,H)=>{let j=k.series[H]._stroke;return f.alpha(j??"",$)};switch(U){case i.FI.Opacity:return(0,u.DT)(M??S,$);case i.FI.Hue:return(0,u.oN)(M??S,$,N);case i.FI.Scheme:if(A?.id!==d.S.Fixed)return(0,u.P2)($,N,A,O,o,w,K,V);default:if($>0)return f.alpha(S??"",$)}}}let C;function x(P,S,M=i.pu.Center,R=.6,I=200){const A=n.Z.paths;if(C||(C={linear:A.linear(),smooth:A.spline(),stepBefore:A.stepped({align:-1}),stepAfter:A.stepped({align:1})}),P===i.l8.Bars){let O=`bars|${M}|${R}|${I}`;return C[O]||(C[O]=A.bars({size:[R,I],align:M})),C[O]}else if(P===i.l8.Line){if(S===i.KC.StepBefore)return C.stepBefore;if(S===i.KC.StepAfter)return C.stepAfter;if(S===i.KC.Smooth)return C.smooth}return C.linear}var b=e(63374),g=e(60695);function p(P){const S=P.config.mode===i.i3.Dashed||P.config.mode===i.i3.DashedAndArea?[10,10]:null;function M(_,U,$,k){let H=_.ctx,j=0;for(let z=0;z<$.length;z++)if($[z].color==="transparent"){j=z;break}H.lineWidth=2,S&&H.setLineDash(S);for(let z=1;z<$.length;z++){const F=$[z];let J;j>=z&&z>0?J=(0,b.Z)(k.visualization.getColorByName($[z-1].color)):J=(0,b.Z)(k.visualization.getColorByName(F.color)),J.getAlpha()===1&&J.setAlpha(.7);let Q=Math.round(_.bbox.left),Z=Math.round(_.valToPos(F.value,U,!0)),ne=Math.round(_.bbox.left+_.bbox.width),ee=Math.round(_.valToPos(F.value,U,!0));H.beginPath(),H.moveTo(Q,Z),H.lineTo(ne,ee),H.strokeStyle=J.toString(),H.stroke()}}function R(_,U,$,k){let H=_.ctx,j=(0,u.KV)(_,U,$.map(z=>{let F=(0,b.Z)(k.visualization.getColorByName(z.color));return F.getAlpha()===1&&F.setAlpha(.15),[z.value,F.toString()]}),!0);H.fillStyle=j,H.fillRect(_.bbox.left,_.bbox.top,_.bbox.width,_.bbox.height)}const{scaleKey:I,thresholds:A,theme:O,config:N,hardMin:o,hardMax:w,softMin:K,softMax:V}=P;return _=>{const U=_.ctx,{min:$,max:k}=_.scales.x,{min:H,max:j}=_.scales[I];if($==null||k==null||H==null||j==null)return;let{steps:z,mode:F}=A;if(F===g.H.Percentage){let[J,Q]=(0,u.A9)(_,I,o,w,K,V),Z=Q-J;z=z.map(ne=>({...ne,value:J+Z*(ne.value/100)}))}switch(U.save(),N.mode){case i.i3.Line:case i.i3.Dashed:M(_,I,z,O);break;case i.i3.Area:R(_,I,z,O);break;case i.i3.LineAndArea:case i.i3.DashedAndArea:R(_,I,z,O),M(_,I,z,O)}U.restore()}}const v={drag:{setScale:!1},points:{size:(P,S)=>P.series[S].points.size*2,width:(P,S,M)=>M/4},focus:{prox:30}};class E{constructor(S=r.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=M=>{let R=new Date(M);return this.tz?n.Z.tzDate(R,this.tz):R},this.tz=(0,a.Pr)(S,Date.now())?.ianaName}addHook(S,M){(0,y.Zp)("UPlotConfigBuilder",!1,"addHook",S),this.hooks[S]||(this.hooks[S]=[]),this.hooks[S].push(M)}addThresholds(S){this.thresholds[S.scaleKey]||(this.thresholds[S.scaleKey]=S,this.addHook("drawClear",p(S)))}addAxis(S){S.placement=S.placement??i.LB.Auto,S.grid=S.grid??{};let M=S.scaleKey;if(M==="x"&&(M+=S.timeZone??""),this.axes[M]){this.axes[M].merge(S);return}S.placement===i.LB.Auto&&(S.placement=this.hasLeftAxis?i.LB.Right:i.LB.Left),S.placement===i.LB.Left&&(this.hasLeftAxis=!0),S.placement===i.LB.Hidden&&(S.grid.show=!1,S.size=0),this.axes[M]=new c.ff(S)}getAxisPlacement(S){return this.axes[S]?.props.placement??i.LB.Left}setCursor(S){this.cursor=(0,t.merge)({},this.cursor,S)}setMode(S){this.mode=S}setSelect(S){this.select=S}addSeries(S){this.series.push(new h(S))}getSeries(){return this.series}addScale(S){const M=this.scales.find(R=>R.props.scaleKey===S.scaleKey);if(M){M.merge(S);return}this.scales.push(new l.I(S))}addBand(S){this.bands.push(S)}setStackingGroups(S){this.stackingGroups=S}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(S){this.tooltipInterpolator=S}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(S){this.prepData=M=>(this.frames=M,S(M,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(S){this.padding=S}getConfig(){const S={...y.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};S.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(R=>R.getConfig()),S.series=[...S.series,...this.series.map(R=>R.getConfig())],S.scales=this.scales.reduce((R,I)=>({...R,...I.getConfig()}),{}),S.hooks=this.hooks,S.select=this.select;const M=(R="")=>(I,A)=>{let O=I.series[A].points._stroke;if(typeof O!="string"){let N=this.frames[0].fields[A];O=N.display(N.values[I.cursor.idxs[A]]).color}return O+R};return S.cursor=(0,t.merge)({},v,{points:{stroke:M("80"),fill:M()}},this.cursor),S.tzDate=this.tzDate,Array.isArray(this.padding)&&(S.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(R=>{(0,y.Kq)(R).forEach(I=>{this.addBand(I)})}),this.bands.length&&(S.bands=this.bands),S}ensureNonOverlappingAxes(S){const M=S.find(A=>A.props.scaleKey==="x"),R=S.filter(A=>A.props.grid?.show===void 0),I=R.findIndex(A=>A.props.placement===i.LB.Left||A.props.placement===i.LB.Right||A.props.placement===i.LB.Bottom&&A!==M);for(let A=0;A<R.length;A++)R[A]===M||A===I?R[A].props.grid.show=!0:R[A].props.grid.show=!1;return S}}},62663:(X,L,e)=>{"use strict";e.d(L,{I:()=>y,V:()=>c});var t=e(92697),n=e(80742),r=e(83502),a=e(34547),i=e(43388);class y extends i.L{merge(d){this.props.min=c("min",this.props.min,d.min),this.props.max=c("max",this.props.max,d.max)}getConfig(){let{isTime:d,scaleKey:f,min:m,max:u,softMin:h,softMax:C,range:x,direction:b,orientation:g,centeredZero:p,decimals:v}=this.props;const E=this.props.distribution,P=d?{}:{distr:E===a.wf.Symlog?4:E===a.wf.Log?3:E===a.wf.Ordinal?2:1,log:E===a.wf.Log||E===a.wf.Symlog?this.props.log??2:void 0,asinh:E===a.wf.Symlog?this.props.linearThreshold??1:void 0};if(E===a.wf.Log){let w=this.props.log,K=w===2?Math.log2:Math.log10;m!=null&&(m<=0?m=null:m=w**Math.floor(K(m))),u!=null&&(u<=0?u=null:u=w**Math.ceil(K(u))),h!=null&&(h<=0?h=null:h=w**Math.floor(K(h))),C!=null&&(C<=0?C=null:C=w**Math.ceil(K(C)))}let S=h==null?3:1,M=C==null?3:1;const R={min:{pad:.1,hard:m??-1/0,soft:h||0,mode:S},max:{pad:.1,hard:u??1/0,soft:C||0,mode:M}};let I=h==null&&m!=null,A=C==null&&u!=null,O=I&&A;const N=(w,K,V,_)=>{const U=w.scales[_];let $=[K,V];if(_==="x"&&!d&&E===a.wf.Linear||!O&&K==null&&V==null)return $;let k=U.log??10;if(U.distr===1||U.distr===2||U.distr===4){if(p){let H=Math.abs(K),j=Math.abs(V),z=Math.max(H,j);z===0&&(z=80),K=-z,V=z}U.distr===4?$=t.Z.rangeAsinh(K,V,k,!0):$=t.Z.rangeNum(I?m:K,A?u:V,R)}else U.distr===3&&($=t.Z.rangeLog(m??K,u??V,k,!0));if(v===0)if(U.distr===1||U.distr===2)$[0]=(0,n.mB)($[0],1),$[1]=(0,n.UO)($[1],1);else if(U.distr===3){let H=U.log===2?Math.log2:Math.log10;if($[0]<=1)$[0]=1;else{let z=Math.floor(H($[0]));$[0]=k**z}let j=Math.ceil(H($[1]));$[1]=k**j,$[0]===$[1]&&($[1]*=k)}else U.distr===4&&($[0]=(0,n.mB)($[0],1),$[1]=(0,n.UO)($[1],1));return(U.distr===1||U.distr===4)&&(I&&($[0]=m),A&&($[1]=u)),$[0]>=$[1]&&($[0]=U.distr===3?1:0,$[1]=100),$};let o=!d&&!O;return(0,r.br)(f)&&(o=!1,x=[0,1]),{[f]:{time:d,auto:o,range:x??N,dir:b,ori:g,...P}}}}function c(l,d,f){const m=d!=null,u=f!=null;return m?u?l==="min"?d<f?d:f:d>f?d:f:d:f}},44040:(X,L,e)=>{"use strict";e.d(L,{A9:()=>h,DT:()=>l,KV:()=>m,P2:()=>C,oN:()=>d});var t=e(63374),n=e(91249),r=e(97898),a=e(60695),i=e(34547),y=e(76297);function c(x,b,g){let p=0,v=0,E=0,P=0;return x===3?(v=b.top,P=b.top+b.height):x===2?(p=b.left+b.width,E=b.left):x===1?(v=b.top+b.height,P=b.top):x===0&&(p=b.left,E=b.left+b.width),g.createLinearGradient(p,v,E,P)}function l(x,b){return(g,p)=>{const v=(0,y.AE)(),E=c(g.scales.x.ori===i.wN.Horizontal?3:2,g.bbox,v);return E.addColorStop(0,n.alpha(x,b)),E.addColorStop(1,n.alpha(x,0)),E}}function d(x,b,g){return(p,v)=>{const E=(0,y.AE)(),P=c(p.scales.x.ori===i.wN.Horizontal?3:2,p.bbox,E),S=(0,t.Z)(x).spin(-15),M=(0,t.Z)(x).spin(15);return g.isDark?(P.addColorStop(0,M.lighten(10).setAlpha(b).toString()),P.addColorStop(1,S.darken(10).setAlpha(b).toString())):(P.addColorStop(0,M.lighten(10).setAlpha(b).toString()),P.addColorStop(1,S.setAlpha(b).toString())),P}}var f=(x=>(x[x.Right=0]="Right",x[x.Up=1]="Up",x[x.Left=2]="Left",x[x.Down=3]="Down",x))(f||{});function m(x,b,g,p=!1){let v=x.scales[b],E=null,P=null;for(let U=0;U<g.length;U++){let $=g[U][0];if(($<=v.min||E==null)&&(E=U),P=U,$>=v.max)break}if(E===P)return g[E][1];let S=g[E][0],M=g[P][0];S===-1/0&&(S=v.min),M===1/0&&(M=v.max);let R=Math.round(x.valToPos(S,b,!0)),I=Math.round(x.valToPos(M,b,!0)),A=R-I;if(A===0)return g[P][1];let O,N,o,w;x.scales.x.ori===i.wN.Horizontal?(O=o=0,N=R,w=I):(N=w=0,O=R,o=I);let V=(0,y.AE)().createLinearGradient(O,N,o,w),_;for(let U=E;U<=P;U++){let $=g[U],k=U===E?R:U===P?I:Math.round(x.valToPos($[0],b,!0)),H=(R-k)/A;p&&U>E&&V.addColorStop(H,_),V.addColorStop(H,_=$[1])}return V}function u(x,b){let g=x.scales[b],p=1/0,v=-1/0;return x.series.forEach((E,P)=>{if(E.show&&E.scale===b)if(E.min==null){let S=x.data[P];for(let M=0;M<S.length;M++)S[M]!=null&&(p=Math.min(p,S[M]),v=Math.max(v,S[M]))}else p=Math.min(p,E.min),v=Math.max(v,E.max)}),v===p&&(p=g.min,v=g.max),[p,v]}function h(x,b,g,p,v,E){let P=g??v??null,S=p??E??null;if(P==null||S==null){let[M,R]=u(x,b);P=P??M??0,S=S??R??100}return[P,S]}function C(x,b,g,p,v,E,P,S){if(!g)throw Error("Missing colorMode required for color scheme gradients");if(!p)throw Error("Missing thresholds required for color scheme gradients");return(M,R)=>{let I=M.series[R].scale,A="";if(g.id===r.S.Thresholds)if(p.mode===a.H.Absolute){const O=p.steps.map(N=>[N.value,n.alpha(b.visualization.getColorByName(N.color),x)]);A=m(M,I,O,!0)}else{const[O,N]=h(M,I,v,E,P,S),o=N-O,w=p.steps.map(K=>[O+o*(K.value/100),n.alpha(b.visualization.getColorByName(K.color),x)]);A=m(M,I,w,!0)}else if(g.getColors){const O=g.getColors(b),[N,o]=h(M,I,v,E,P,S),w=o-N,K=O.map((V,_)=>[N+w*(_/(O.length-1)),n.alpha(b.visualization.getColorByName(V),x)]);A=m(M,I,K,!1)}return A}}},33582:(X,L,e)=>{"use strict";e.d(L,{T:()=>i});var t=e(39953),n=e(87786),r=e(88611),a=e(52844);function i({id:y,events:c,renderEventMarker:l,mapEventToXYCoords:d,config:f}){const m=(0,t.useRef)(),[u,h]=(0,t.useState)(0),C=(0,n.Z)();(0,t.useLayoutEffect)(()=>{f.addHook("init",b=>{m.current=b}),f.addHook("draw",()=>{C()&&h(b=>b+1)})},[f,h]);const x=(0,t.useMemo)(()=>{const b=[];if(!m.current||c.length===0)return b;for(let g=0;g<c.length;g++){const p=c[g];for(let v=0;v<p.length;v++){const E=d(p,{fieldIndex:v,frameIndex:g});E&&b.push(t.createElement(r.J,{...E,key:`${y}-marker-${g}-${v}`},l(p,{fieldIndex:v,frameIndex:g})))}}return t.createElement(t.Fragment,null,b)},[c,l,u]);return m.current?t.createElement(a.K,{left:m.current.bbox.left/window.devicePixelRatio,top:m.current.bbox.top/window.devicePixelRatio},x):null}},88611:(X,L,e)=>{"use strict";e.d(L,{J:()=>n});var t=e(39953);const n=({x:r,y:a,children:i})=>t.createElement("div",{style:{position:"absolute",top:`${a}px`,left:`${r}px`}},i)},52844:(X,L,e)=>{"use strict";e.d(L,{K:()=>r});var t=e(41407),n=e(39953);const r=({children:a,left:i,top:y})=>{const c=(0,n.useMemo)(()=>(0,t.css)({position:"absolute",overflow:"visible",left:`${i}px`,top:`${y}px`}),[i,y]);return n.createElement("div",{className:c},a)}},43523:(X,L,e)=>{"use strict";e.d(L,{Jx:()=>n.J,K2:()=>r.K,TZ:()=>t.T});var t=e(33582),n=e(88611),r=e(52844)},62806:(X,L,e)=>{"use strict";e.d(L,{C:()=>l});var t=e(86832),n=e.n(t),r=e(39953);const a=.1,i=2,y=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),c=d=>{let f=d.root.closest("[tabindex]"),m=new Set,u=null,h=null;if(!f)return;const C=(P,S)=>{const{cursor:M}=d;if(M.left===void 0||M.top===void 0)return;const{width:R,height:I}=d.over.style,[A,O]=[Math.floor(parseFloat(R)),Math.floor(parseFloat(I))];d.setCursor({left:(0,t.clamp)(M.left+P,0,A),top:(0,t.clamp)(M.top+S,0,O)})},x=P=>{if(m.size===0||!d){h=null;return}const R=(P-(h??P))*a;let I=0,A=0;m.has("ArrowUp")&&(A-=R),m.has("ArrowDown")&&(A+=R),m.has("ArrowLeft")&&(I-=R),m.has("ArrowRight")&&(I+=R),m.has("Shift")&&(I*=i,A*=i),C(I,A);const{cursor:O}=d;if(m.has(" ")&&O){const N=Number(d.over.style.height.slice(0,-2));d.setSelect({left:O.left<u?O.left:u,top:0,width:Math.abs(O.left-(u??O.left)),height:N},!1)}h=P,window.requestAnimationFrame(x)},b=P=>{if(P.key==="Tab"){d.setCursor({left:-5,top:-5});return}if(!y.has(P.key))return;if(P.preventDefault(),P.stopPropagation(),!m.has(P.key)){const M=m.size===0;m.add(P.key),u=P.key===" "&&u===null?d.cursor.left:u,M&&window.requestAnimationFrame(x)}},g=P=>{y.has(P.key)&&(m.delete(P.key),P.key===" "&&(P.preventDefault(),P.stopPropagation(),d.setSelect(d.select),u=null))},p=()=>{if(!f?.matches(":focus-visible"))return;const P=parseFloat(d.over.style.width),S=parseFloat(d.over.style.height);d.setCursor({left:P/2,top:S/2})},v=()=>{h=null,u=null,m.clear(),d.setSelect({left:0,top:0,width:0,height:0},!1)};f.addEventListener("keydown",b),f.addEventListener("keyup",g),f.addEventListener("focus",p),f.addEventListener("blur",v);const E=()=>{f?.removeEventListener("keydown",b),f?.removeEventListener("keyup",g),f?.removeEventListener("focus",p),f?.removeEventListener("blur",v),f=null};(d.hooks.destroy??=[]).push(E)},l=({config:d})=>((0,r.useLayoutEffect)(()=>d.addHook("init",c),[d]),null)},18577:(X,L,e)=>{"use strict";e.d(L,{_:()=>E,i:()=>p});var t=e(41407),n=e(39953),r=e(87786),a=e(40793),i=e(94123),y=e(97898),c=e(69330),l=e(83502),d=e(89591),f=e(24571),m=e(34547),u=e(82803),h=e(70393),C=e(55987),x=e(41013),b=e(95966);const g=10,p=({mode:S=m.f3.Single,sortOrder:M=m.As.None,sync:R,timeZone:I,config:A,renderTooltip:O,...N})=>{const o=(0,n.useRef)(),w=(0,u.l4)(),[K,V]=(0,n.useState)(null),[_,U]=(0,n.useState)(null),[$,k]=(0,n.useState)([]),[H,j]=(0,n.useState)(null),[z,F]=(0,n.useState)(!1),J=(0,r.Z)();let Q=null;const Z="TooltipPlugin",ne=(0,u.wW)(P);if((0,n.useEffect)(()=>{(0,b.Zp)(Z,!0,`Focused series: ${K}, focused point: ${_}`)},[_,K]),(0,n.useLayoutEffect)(()=>{let he;const me=()=>{J()&&(F(!0),o.current?.root.classList.add("plot-active"))},De=()=>{J()&&(j(null),F(!1),o.current?.root.classList.remove("plot-active"))};A.addHook("syncRect",(Ee,be)=>he=be),A.addHook("init",Ee=>{o.current=Ee,Ee.over.addEventListener("mouseenter",me),Ee.over.addEventListener("mouseleave",De),Q=Ee.root.closest("[tabindex]"),Q&&(Q.addEventListener("focus",me),Q.addEventListener("blur",De)),R&&R()===a.m.Crosshair&&Ee.root.classList.add("shared-crosshair")});const le=A.getTooltipInterpolator();return le?A.addHook("setCursor",Ee=>{le(V,U,be=>{if(be){j(null);return}if(!he)return;const{x:ge,y:ue}=E(Ee,he);ge!==void 0&&ue!==void 0&&j({x:ge,y:ue})},Ee)}):(A.addHook("setLegend",Ee=>{J()&&(U(Ee.legend.idx),k(Ee.legend.idxs.slice()))}),A.addHook("setCursor",Ee=>{if(!he||!J())return;const{x:be,y:ge}=E(Ee,he);j(be!==void 0&&ge!==void 0?{x:be,y:ge}:null)}),A.addHook("setSeries",(Ee,be)=>{J()&&V(be)})),()=>{j(null),o.current&&(o.current.over.removeEventListener("mouseleave",De),o.current.over.removeEventListener("mouseenter",me),Q&&(Q.removeEventListener("focus",me),Q.removeEventListener("blur",De)))}},[A,j,F,U,k]),_===null||!z&&R&&R()===a.m.Crosshair)return null;let ee=N.data.fields[0];if(!ee)return null;const de=ee.display||(0,i.U)({field:ee,timeZone:I,theme:w});let Pe=null,ye=de(ee.values[_]).text;if(O)Pe=O(N.data,K,_);else{if(S===m.f3.Single&&K!==null){const he=N.data.fields[K];if(!he)return null;const me=$?.[K]??_;ye=de(ee.values[me]).text;const le=(he.display||(0,i.U)({field:he,timeZone:I,theme:w}))(he.values[me]);Pe=n.createElement(C.c,{series:[{color:le.color||y.R,label:(0,c.CZ)(he,N.data,N.frames),value:le?(0,l.zc)(le):null}],timestamp:ye})}if(S===m.f3.Multi){let he=[];const me=N.data,De=me.fields,le=[];for(let Ee=0;Ee<De.length;Ee++){const be=me.fields[Ee];if(!be||be===ee||be.type===d.fS.time||be.type!==d.fS.number||be.config.custom?.hideFrom?.tooltip||be.config.custom?.hideFrom?.viz)continue;const ge=N.data.fields[Ee].values[$[Ee]],ue=be.display(ge);le.push(ge),he.push({color:ue.color||y.R,label:(0,c.CZ)(be,me,N.frames),value:ue?(0,l.zc)(ue):null,isActive:K===Ee})}if(M!==m.As.None){const Ee=[...he],be=f.sortValues(M);he.sort((ge,ue)=>{const Ie=Ee.indexOf(ge),ot=Ee.indexOf(ue);return be(le[Ie],le[ot])})}Pe=n.createElement(C.c,{series:he,timestamp:ye})}}return n.createElement(h.h_,{className:z?ne.tooltipWrapper:void 0},Pe&&H&&n.createElement(x.S,{position:{x:H.x,y:H.y},offset:{x:g,y:g}},Pe))};function v({left:S,top:M},R){return S===void 0||M===void 0?!1:S<0||S>R.width||M<0||M>R.height}function E(S,M){let R,I;const A=S.cursor.left||0,O=S.cursor.top||0;if(v(S.cursor,M)){const N=S.posToIdx(A);if(O<0||O>M.height){let o=(0,b.ah)(S,N);o&&(I=M.top+o,A>=0&&A<=M.width&&(R=M.left+S.valToPos(S.data[0][S.posToIdx(A)],S.series[0].scale)))}}else R=M.left+A,I=M.top+O;return{x:R,y:I}}const P=S=>({tooltipWrapper:(0,t.css)({"z-index":S.zIndex.portal+1+" !important"})})},37437:(X,L,e)=>{"use strict";e.d(L,{R:()=>r});var t=e(39953);const n=5,r=({onZoom:a,config:i,withZoomY:y=!1})=>((0,t.useLayoutEffect)(()=>{let c=!1,l=!1;y&&i.addHook("init",d=>{d.root.addEventListener("mousedown",f=>{if(f.button===0&&f.shiftKey){l=!0,d.cursor.drag.x=!1,d.cursor.drag.y=!0;let m=u=>{d.cursor.drag.x=!0,d.cursor.drag.y=!1,document.removeEventListener("mouseup",m,!0)};document.addEventListener("mouseup",m,!0)}},!0)}),i.addHook("setSelect",d=>{if(y&&l){if(d.select.height>=n){for(let f in d.scales)if(f!=="x"){const m=d.posToVal(d.select.top,f),u=d.posToVal(d.select.top+d.select.height,f);d.setScale(f,{min:u,max:m})}c=!0}l=!1}else if(d.select.width>=n){const f=d.posToVal(d.select.left,"x"),m=d.posToVal(d.select.left+d.select.width,"x");a({from:f,to:m})}d.setSelect({left:0,width:0,top:0,height:0},!1)}),i.setCursor({bind:{dblclick:d=>()=>{if(y&&c){for(let f in d.scales)f!=="x"&&d.setScale(f,{min:null,max:null});c=!1}else{let f=d.scales.x;const m=f.min,u=f.max,h=(u-m)/2;a({from:m-h,to:u+h})}return null}}})},[i]),null)},64535:(X,L,e)=>{"use strict";e.d(L,{Cm:()=>C.C,ii:()=>n.i,x2:()=>u,Rb:()=>t.R});var t=e(37437),n=e(18577),r=e(41407),a=e(39953),i=e(49065),y=e(82803),c=e(68497);const l=({onClick:x,"aria-label":b,style:g})=>{const p=(0,y.wW)(d);return a.createElement(c.h,{"aria-label":b??"Close",className:p,name:"times",onClick:x,style:g,tooltip:"Close"})},d=x=>(0,r.css)({position:"absolute",right:x.spacing(.5),top:x.spacing(1)});function f(x,b){return{...x,...b,style:{...x.style,...b.style}}}const m={style:{transform:"",pointerEvents:"none"},isHovering:!1,isPinned:!1,contents:null,plot:null,dismiss:()=>{}},u=({config:x,render:b})=>{const g=(0,a.useRef)(null),[{plot:p,isHovering:v,isPinned:E,contents:P,style:S,dismiss:M},R]=(0,a.useReducer)(f,m),I=(0,a.useRef)(),A=(0,y.wW)(h).tooltipWrapper;return(0,a.useLayoutEffect)(()=>{I.current={width:0,height:0,observer:new ResizeObserver(J=>{let Q=I.current;for(const Z of J)Z.borderBoxSize?.length>0?(Q.width=Z.borderBoxSize[0].inlineSize,Q.height=Z.borderBoxSize[0].blockSize):(Q.width=Z.contentRect.width,Q.height=Z.contentRect.height)})};let O=p,N=v,o=E,w=S,K=0,V=0,_=document.documentElement,U=_.clientWidth-16,$=_.clientHeight-16;window.addEventListener("resize",J=>{U=_.clientWidth-5,$=_.clientHeight-5});let k=null,H=!1;const j=()=>{H||(N?queueMicrotask(z):setTimeout(z,100),H=!0)},z=()=>{H=!1;let J={style:w,isPinned:o,isHovering:N,contents:N?b(O,O.cursor.idxs,k,o,F):null,dismiss:F};R(J)},F=()=>{o=!1,N=!1,w={pointerEvents:"none"},O.cursor._lock=o,j()};x.addHook("init",J=>{R({plot:O=J}),J.over.addEventListener("click",Q=>{N&&(Q.target===J.over&&(o=!o,w={pointerEvents:o?"all":"none"},j()),J.cursor._lock=o,o||(J.setCursor({left:Q.clientX-J.rect.left,top:Q.clientY-J.rect.top}),N=!1))})}),x.addHook("setLegend",J=>{O.cursor.idxs.some(Z=>Z!=null)?N||(N=!0):N&&(N=!1),j()}),x.addHook("setSeries",(J,Q)=>{J.series.length>2&&k!==Q&&(k=Q,j())}),x.addHook("setCursor",J=>{let{left:Q=-10,top:Z=-10}=J.cursor;if(Q>=0||Z>=0){let{width:ne,height:ee}=I.current,de=J.rect.left+Q,Pe=J.rect.top+Z;V?Pe+ee<$||Pe-ee<0?V=0:V!==-ee&&(V=-ee):Pe+ee>$&&Pe-ee>=0&&(V=-ee),K?de+ne<U||de-ne<0?K=0:K!==-ne&&(K=-ne):de+ne>U&&de-ne>=0&&(K=-ne);const me=`${K!==0?"translateX(-100%)":""} translateX(${Q}px) ${V!==0?"translateY(-100%)":""} translateY(${Z}px)`;N&&(g.current!=null?g.current.style.transform=me:(w.transform=me,j()))}})},[x]),(0,a.useLayoutEffect)(()=>{const O=I.current;g.current!=null&&O.observer.observe(g.current)},[g.current]),p&&v?(0,i.createPortal)(a.createElement("div",{className:A,style:S,ref:g},E&&a.createElement(l,{onClick:M,style:{top:"16px"}}),P),p.over):null},h=x=>({tooltipWrapper:(0,r.css)({top:0,left:0,zIndex:x.zIndex.tooltip,padding:"8px",whiteSpace:"pre",borderRadius:x.shape.radius.default,position:"absolute",background:x.colors.background.secondary,boxShadow:`0 4px 8px ${x.colors.background.primary}`})});var C=e(62806)},43388:(X,L,e)=>{"use strict";e.d(L,{L:()=>t});class t{constructor(r){this.props=r}}},95966:(X,L,e)=>{"use strict";e.d(L,{Bj:()=>C,Kq:()=>u,Zp:()=>v,ah:()=>x,i7:()=>h,qt:()=>f});var t=e(89591),n=e(26204),r=e(34547),a=e(66841),i=e(42851),y=e(76685);const c=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function l(E){return E.replace(c,P=>`{${P}}`)}const d=(E,P,S)=>{let M=P%2?S[0]||S[2]:S[1]||S[3];return S[P]||!M?0:8},f={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[d,d,d,d],series:[],hooks:{}};var m=(E=>(E[E.Pos=1]="Pos",E[E.Neg=-1]="Neg",E))(m||{});function u(E){let P=[],{series:S,dir:M}=E,R=S.length-1,I=S.slice().reverse();return I.forEach((A,O)=>{if(O!==R){let N=I[O+1];P.push({series:[A,N],dir:-1*M})}}),P}function h(E){let P=new Map;return E.fields.forEach(({config:S,values:M,type:R},I)=>{if(I===0)return;let{custom:A}=S;if(A==null||A.hideFrom?.viz)return;let{stacking:O}=A;if(O==null)return;let{mode:N,group:o}=O;if(N===r.o0.None)return;let w=A.transform,K=b(w,M),V=A.drawStyle,_=V===r.l8.Bars?A.barAlignment:V===r.l8.Line?A.lineInterpolation:null,U=`${K}|${N}|${o}|${(0,y.z1)(S,R)}|${V}|${_}`,$=P.get(U);$==null&&($={series:[],dir:K},P.set(U,$)),$.series.push(I)}),[...P.values()]}function C(E,P,S){let M=Array(E.fields.length),R=P.length,I=E.length,A=R>0?Array(I).fill(0):[],O=R>0?Array(I).fill(!1):[],N=Array.from({length:R},()=>A.slice()),o=Array.from({length:R},()=>O.slice());if(P.forEach((w,K)=>{let V=o[K];w.series.forEach(_=>{let U=E.fields[_];if(U.config.custom?.hideFrom?.viz)return;let $=U.values;for(let k=0;k<I;k++)$[k]!=null&&(V[k]=!0)})}),E.fields.forEach((w,K)=>{let V=w.values;if(K===0){w.type===t.fS.time?M[K]=(0,n.J_)(w).values:M[K]=V;return}let{custom:_}=w.config;if(!_||_.hideFrom?.viz){M[K]=V;return}if(_.transform===r.pR.Constant){let $=V.findIndex(H=>H!=null),k=V[$];V=Array(V.length).fill(void 0),V[$]=k}else if(V=V.slice(),_.transform===r.pR.NegativeY)for(let $=0;$<V.length;$++)V[$]!=null&&(V[$]*=-1);let U=_.stacking?.mode;if(!U||U===r.o0.None)M[K]=V;else{let $=P.findIndex(z=>z.series.indexOf(K)>-1),k=N[$],H=o[$],j=M[K]=Array(I);for(let z=0;z<I;z++){let F=V[z];F!=null?j[z]=k[z]+=F:j[z]=H[z]?k[z]:F}}}),S){let w=M.map((K,V)=>{let _=P.findIndex(U=>U.series.indexOf(V)>-1);return _!==-1?N[_]:K});S({totals:w})}return E.fields.forEach((w,K)=>{if(K===0||w.config.custom?.hideFrom?.viz)return;if(w.config.custom?.stacking?.mode===r.o0.Percent){let _=P.findIndex(H=>H.series.indexOf(K)>-1),U=N[_],$=P[_],k=M[K];for(let H=0;H<I;H++){let j=k[H];j!=null&&(k[H]=U[H]===0?0:$.dir*(j/U[H]))}}}),M}function x(E,P){let S,M=1,R=1,I=E.data[1][P],A=E.data[1][P];for(let O=1;O<E.data.length;O++){const o=E.data[O][P];o!=null&&(I==null?I=o:o>I&&(I=E.data[O][P],M=O),A==null?A=o:o<A&&(A=E.data[O][P],R=O))}return A==null&&I==null?S=void 0:A!=null&&I!=null?S=(E.valToPos(A,E.series[R].scale)+E.valToPos(I,E.series[M].scale))/2:S=E.valToPos(A||I,E.series[M||R].scale),S!==void 0&&S<0&&(S=E.bbox.height/devicePixelRatio),S}function b(E,P){const S=g(P);return E===r.pR.NegativeY?S?1:-1:S?-1:1}function g(E,P=100){const S=E.length;if(S===0)return!1;let M=0,R=S-1;for(;M<=R&&E[M]==null;)M++;for(;R>=M&&E[R]==null;)R--;let I=0,A=0;if(R>=M){const O=Math.max(1,Math.floor((R-M+1)/P));for(let N=M;N<=R;N+=O){const o=E[N];o!=null&&(o<0||Object.is(o,-0)?I++:o>0&&A++)}if(I>A)return!0}return!1}const p=(0,i.h)("uPlot"),v=p.logger;(0,a.x)("graphng",void 0,p)},41730:(X,L,e)=>{"use strict";e.r(L),e.d(L,{ALERTING_COLOR:()=>a.ns,AxisPlacement:()=>l.LB,BarAlignment:()=>l.pu,BarValueVisibility:()=>l.eU,BracesPlugin:()=>c.hP,ClearPlugin:()=>c.Gp,ClipboardPlugin:()=>c.wl,DEFAULT_ANNOTATION_COLOR:()=>a.Jx,DOMUtil:()=>a.Qi,DrawStyle:()=>l.$6,EventsWithValidation:()=>a.JU,GlobalStyles:()=>i.nz,GraphGradientMode:()=>l.FI,GraphTresholdsStyleMode:()=>l.i3,IndentationPlugin:()=>c.Rc,LegendDisplayMode:()=>l.jK,LineInterpolation:()=>l.KC,NO_DATA_COLOR:()=>a._V,NewlinePlugin:()=>c.z2,NodeGraphDataFrameFieldNames:()=>a.zG,OK_COLOR:()=>a.te,PENDING_COLOR:()=>a.f7,PointVisibility:()=>l.mv,REGION_FILL_ALPHA:()=>a.iV,ReactUtils:()=>a.Ot,RunnerPlugin:()=>c.dv,SCHEMA:()=>a.Yi,ScaleDirection:()=>l.bQ,ScaleOrientation:()=>l.wN,SearchFunctionType:()=>a.nu,SelectionShortcutsPlugin:()=>c.$L,SlatePrism:()=>c.Ze,StackingMode:()=>l.o0,SuggestionsPlugin:()=>c.bm,TableCellDisplayMode:()=>l.h2,ThemeContext:()=>i.Ni,TooltipDisplayMode:()=>l.f3,ansicolor:()=>a._J,attachDebugger:()=>a.xq,calculateFontSize:()=>a.MX,colors:()=>a.O9,commonOptionsBuilder:()=>y.q,createLogger:()=>a.hu,fuzzyMatch:()=>a.C6,getCanvasContext:()=>a.AE,getCellLinks:()=>a.iu,getScrollbarWidth:()=>a.np,getTagColor:()=>a.vm,getTagColorIndexFromName:()=>a.tu,getTagColorsFromName:()=>a.Bx,getTextColorForAlphaBackground:()=>a.bM,getTextColorForBackground:()=>a.Gc,getTheme:()=>i.gh,hasValidationEvent:()=>a.z3,isCompactUrl:()=>a.go,linkModelToContextMenuItems:()=>a.Rc,makeFragment:()=>a.xl,makeValue:()=>a.l1,measureText:()=>a.X1,mockTheme:()=>i.Zu,mockThemeContext:()=>i.sJ,regexValidation:()=>a.FE,sortedColors:()=>a.Wm,styleMixins:()=>i.GU,stylesFactory:()=>i.Bb,useForceUpdate:()=>a.NW,useStyles:()=>i.yK,useStyles2:()=>i.wW,useTheme:()=>i.Fg,useTheme2:()=>i.l4,validate:()=>a.Gu,withTheme:()=>i.Zz,withTheme2:()=>i.HE});var t=e(3587),r={};for(const d in t)d!=="default"&&(r[d]=()=>t[d]);e.d(L,r);var n=e(78963),r={};for(const d in n)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","graphTimeFormat","graphTickFormatter","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","DropdownIndicator","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","InlineFormLabel","Divider","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","GraphNG","FIXED_UNIT","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","BrowserLabel","PanelContainer","graphFieldOptions","SeriesVisibilityChangeMode","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect","SecretInput","SecretTextArea","FileDropzone","FileDropzoneDefaultChildren","FileListItem","EventsCanvas","Marker","XYCanvas","KeyboardPlugin","TooltipPlugin","TooltipPlugin2","ZoomPlugin"].indexOf(d)<0&&(r[d]=()=>n[d]);e.d(L,r);var a=e(61481),i=e(74186),y=e(75353),c=e(57214),l=e(78172)},41456:(X,L,e)=>{"use strict";e.d(L,{Y:()=>h,r:()=>f});var t=e(39953),n=e(89591),r=e(63671),a=e(34547),i=e(39480),y=e(20454),c=e(96227),l=e(9558),d=e(38637);function f(C,x,b){const g=["Axis"];C.addRadio({path:"axisPlacement",name:"Placement",category:g,defaultValue:i.q.axisPlacement[0].value,settings:{options:i.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:g,defaultValue:"",settings:{placeholder:"Optional text"},showIf:p=>p.axisPlacement!==a.LB.Hidden,shouldApply:p=>p.type!==n.fS.time&&p.type!==n.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:g,settings:{placeholder:"Auto"},showIf:p=>p.axisPlacement!==a.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:g,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]},showIf:p=>p.axisPlacement!==a.LB.Hidden}).addRadio({path:"axisColorMode",name:"Color",category:g,defaultValue:a.yK.Text,settings:{options:[{value:a.yK.Text,label:"Text"},{value:a.yK.Series,label:"Series"}]},showIf:p=>p.axisPlacement!==a.LB.Hidden}).addBooleanSwitch({path:"axisBorderShow",name:"Show border",category:g,defaultValue:!1,showIf:p=>p.axisPlacement!==a.LB.Hidden}),C.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:g,editor:h,override:h,defaultValue:{type:a.wf.Linear},shouldApply:p=>p.type===n.fS.number,process:r.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:g,defaultValue:!1,showIf:p=>p.scaleDistribution?.type!==a.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:x.axisSoftMin,category:g,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:x.axisSoftMax,category:g,settings:{placeholder:"See: Standard options > Max"}})}const m=[{label:"Linear",value:a.wf.Linear},{label:"Logarithmic",value:a.wf.Log},{label:"Symlog",value:a.wf.Symlog}],u=[{label:"2",value:2},{label:"10",value:10}],h=({value:C,onChange:x})=>{const b=C?.type??a.wf.Linear,g=C?.log??2;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(y.S,{value:b,options:m,onChange:p=>{x({...C,type:p,log:p===a.wf.Linear?void 0:g})}})),(b===a.wf.Log||b===a.wf.Symlog)&&t.createElement(c.g,{label:"Log base"},t.createElement(l.Ph,{options:u,value:g,onChange:p=>{x({...C,log:p.value})}})),b===a.wf.Symlog&&t.createElement(c.g,{label:"Linear threshold"},t.createElement(d.I,{placeholder:"1",value:C?.linearThreshold,onChange:p=>{x({...C,linearThreshold:Number(p.currentTarget.value)})}})))}},86246:(X,L,e)=>{"use strict";e.d(L,{B:()=>c});var t=e(86832),n=e.n(t),r=e(39953),a=e(12223),i=e(13868);const y=({value:l,onChange:d})=>{const f=(0,r.useCallback)(m=>{d({...l,[m]:!l[m]})},[l,d]);return r.createElement(a.Lh,{spacing:"xs"},Object.keys(l).map(m=>{const u=m;return r.createElement(i.B,{icon:l[u]?"eye-slash":"eye",onClick:()=>f(u),key:u,label:(0,t.startCase)(u),selected:l[u]})}))};function c(l){l.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:y,override:y,shouldApply:()=>!0,hideFromDefaults:!0,process:d=>d})}},57827:(X,L,e)=>{"use strict";e.d(L,{J:()=>r});var t=e(18985),n=e(34547);function r(a,i=!0){a.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.jK.List,settings:{options:[{value:n.jK.List,label:"List"},{value:n.jK.Table,label:"Table"}]},showIf:y=>y.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:y=>y.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:y=>y.legend.showLegend&&y.legend.placement==="right"}),i&&a.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:y=>y.legend.showLegend!==!1})}},69107:(X,L,e)=>{"use strict";e.d(L,{V:()=>m,n:()=>f});var t=e(39953),n=e(63671),r=e(89591),a=e(34547),i=e(12223),y=e(20454),c=e(38637),l=e(68497),d=e(39480);const f=({value:u,context:h,onChange:C,item:x})=>t.createElement(i.Lh,null,t.createElement(y.S,{value:u?.mode||a.o0.None,options:x.settings.options,onChange:b=>{C({...u,mode:b})}}),h.isOverride&&u?.mode&&u?.mode!==a.o0.None&&t.createElement(c.I,{type:"text",placeholder:"Group",suffix:t.createElement(l.h,{name:"question-circle",tooltip:"Name of the stacking group",tooltipPlacement:"top"}),defaultValue:u?.group,onChange:b=>{C({...u,group:b.currentTarget.value.trim()})}}));function m(u,h,C=["Graph styles"]){u.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:C,defaultValue:h,editor:f,override:f,settings:{options:d.q.stacking},process:n.kG,shouldApply:x=>x.type===r.fS.number})}},40723:(X,L,e)=>{"use strict";e.d(L,{Z:()=>t});function t(n,r=!0){r&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},61729:(X,L,e)=>{"use strict";e.d(L,{L:()=>n});var t=e(34547);function n(r,a=!1){const i=["Tooltip"],y=a?[{value:t.f3.Single,label:"Single"},{value:t.f3.None,label:"Hidden"}]:[{value:t.f3.Single,label:"Single"},{value:t.f3.Multi,label:"All"},{value:t.f3.None,label:"Hidden"}],c=[{value:t.As.None,label:"None"},{value:t.As.Ascending,label:"Ascending"},{value:t.As.Descending,label:"Descending"}];r.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:i,defaultValue:"single",settings:{options:y}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:i,defaultValue:t.As.None,showIf:l=>l.tooltip?.mode===t.f3.Multi,settings:{options:c}})}},75353:(X,L,e)=>{"use strict";e.d(L,{q:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.Y,StackingEditor:()=>c.n,addAxisConfig:()=>n.r,addHideFrom:()=>r.B,addLegendOptions:()=>a.J,addStackingConfig:()=>c.V,addTextSizeOptions:()=>y.Z,addTooltipOptions:()=>i.L});var n=e(41456),r=e(86246),a=e(57827),i=e(61729),y=e(40723),c=e(69107)},78172:(X,L,e)=>{"use strict";e.d(L,{$6:()=>t.l8,FI:()=>t.FI,KC:()=>t.KC,LB:()=>t.LB,bQ:()=>t.bQ,eU:()=>t.Jp,f3:()=>t.f3,h2:()=>t.h2,i3:()=>t.i3,jK:()=>t.jK,mv:()=>t.Jp,o0:()=>t.o0,pu:()=>t.pu,wN:()=>t.wN});var t=e(34547)},97697:(X,L,e)=>{"use strict";e.d(L,{h:()=>a});var t=e(34032);const n={"[":"]","{":"}","(":")"},r="brace_match";function a(){return{onKeyDown(i,y,c){const{value:l}=y;switch(i.key){case"(":case"{":case"[":{const{start:{offset:d,key:f},end:{offset:m,key:u},focus:{offset:h}}=l.selection,C=l.focusText.text;if(l.selection.isExpanded)return i.preventDefault(),y.insertTextByKey(f,d,i.key).insertTextByKey(u,m+1,n[i.key]).moveEndBackward(1),!0;if(h===C.length||C[h]===" "||Object.values(n).includes(C[h])){i.preventDefault();const x=n[i.key],b={key:`${r}-${(0,t.Z)()}`,type:`${r}-${x}`,anchor:{key:f,offset:d,object:"point"},focus:{key:u,offset:m+1,object:"point"},object:"annotation"};return y.insertText(i.key).insertText(x).addAnnotation(b).moveBackward(1),!0}break}case")":case"}":case"]":{const d=l.anchorText.text,f=l.selection.anchor.offset,m=d[f],u=i.key,h=`${r}-${u}`,C=l.annotations.find(x=>x?.type===h&&x.anchor.key===l.anchorText.key);if(C&&m===u&&!l.selection.isExpanded)return i.preventDefault(),y.moveFocusForward(1).removeAnnotation(C).moveAnchorForward(1),!0;break}case"Backspace":{const d=l.anchorText.text,f=l.selection.anchor.offset,m=d[f-1],u=d[f];if(n[m]&&n[m]===u)return i.preventDefault(),y.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return c()}}}},26118:(X,L,e)=>{"use strict";e.d(L,{G:()=>t});function t(){return{onKeyDown(n,r,a){const i=r.value;if(i.selection.isExpanded)return a();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const y=i.anchorText.text,c=i.selection.anchor.offset,d=y.length-c;return r.deleteForward(d),!0}return a()}}}},52606:(X,L,e)=>{"use strict";e.d(L,{w:()=>r});const t=(a,i,y)=>{if(!a.length)return;const c=a.slice(0,-1).join("").length+a.length-1;return a.join(`
`).slice(i,c+y)},n=a=>a?.replace(/[\uFEFF]/g,"");function r(){const a={onCopy(i,y,c){i.preventDefault();const{document:l,selection:d}=y.value,{start:{offset:f},end:{offset:m}}=d,u=l.getLeafBlocksAtRange(d).toArray().map(C=>C.text),h=n(t(u,f,m));return h&&i.clipboardData&&i.clipboardData.setData("Text",h),!0},onPaste(i,y,c){if(i.preventDefault(),i.clipboardData){const d=n(i.clipboardData.getData("Text"))?.split(`
`);if(d&&d.length){y.insertText(d[0]);for(const f of d.slice(1))y.splitBlock().insertText(f)}}return!0}};return{...a,onCut(i,y,c){return a.onCopy(i,y,c),y.deleteAtRange(y.value.selection),!0}}}},73378:(X,L,e)=>{"use strict";e.d(L,{R:()=>f});var t=e(63591),n=e(20399),r=e(76485);const a=(0,t.TB)("mod+["),i=(0,t.TB)("shift+tab"),y=(0,t.TB)("mod+]"),c="  ",l=(m,u,h)=>{const{startBlock:C,endBlock:x,selection:{start:{offset:b,key:g},end:{offset:p,key:v}}}=u.value;if(r.Z.serialize(u.value)==="")return;m.preventDefault();const E=C.getFirstText();E&&b===0&&g===E.key&&p===E.text.length&&v===E.key||!C.equals(x)?d(u,"right"):u.insertText(c)},d=(m,u)=>{const h=m.value.selection,C=m.value.document.getLeafBlocksAtRange(h).toArray();if(u==="left")for(const x of C){const b=x.text.length-x.text.trimLeft().length,g=x.getFirstText().key,p={anchor:{key:g,offset:b,path:[]},focus:{key:g,offset:b,path:[]}};m.deleteBackwardAtRange(n.e6.create(p),Math.min(c.length,b))}else{const{startText:x}=m.value,b=x.text.slice(0,h.start.offset),g=/^\s*$/.test(b);for(const p of C)m.insertTextByKey(p.getFirstText().key,0,c);g&&m.moveStartBackward(c.length)}};function f(){return{onKeyDown(m,u,h){if(a(m)||i(m))m.preventDefault(),d(u,"left");else if(y(m))m.preventDefault(),d(u,"right");else if(m.key==="Tab")l(m,u,h);else return h();return!0}}}},57214:(X,L,e)=>{"use strict";e.d(L,{$L:()=>c.$,Gp:()=>n.G,Rc:()=>a.R,Ze:()=>l.Z,bm:()=>d.b,dv:()=>y.d,hP:()=>t.h,wl:()=>r.w,z2:()=>i.z});var t=e(97697),n=e(26118),r=e(52606),a=e(73378),i=e(16016),y=e(82199),c=e(69679),l=e(59608),d=e(98198)},16016:(X,L,e)=>{"use strict";e.d(L,{z:()=>n});function t(r){let a=r.length-r.trimLeft().length;if(a){let i=r[0];for(;--a;)i+=r[0];return i}return""}function n(){return{onKeyDown(r,a,i){const y=a.value;if(y.selection.isExpanded)return i();if(r.key==="Enter"){r.preventDefault();const{startBlock:c}=y,l=c.text,d=t(l);return a.splitBlock().insertText(d).focus()}return i()}}}},82199:(X,L,e)=>{"use strict";e.d(L,{d:()=>t});function t({handler:n}){return{onKeyDown(r,a,i){return n&&r.key==="Enter"&&(r.shiftKey||r.ctrlKey)?(r.preventDefault(),n(r),a):i()}}}},69679:(X,L,e)=>{"use strict";e.d(L,{$:()=>r});var t=e(63591);const n=(0,t.TB)("mod+l");function r(){return{onKeyDown(a,i,y){if(n(a)){a.preventDefault();const{focusBlock:c,document:l}=i.value;i.moveAnchorToStartOfBlock(),l.getNextBlock(c.key)?i.moveFocusToStartOfNextBlock():i.moveFocusToEndOfText()}else return y();return!0}}}},95220:(X,L,e)=>{"use strict";e.d(L,{Z:()=>n});const n="prism-token"},59608:(X,L,e)=>{"use strict";e.d(L,{Z:()=>u,a:()=>b});var t=e(10963),n=e.n(t),r=e(20399),a=e(95220),i=e(13162),y=e(39953);function c(g){return g.object==="block"&&g.type==="code_block"}function l(g){return"javascript"}function d(g,p,v){const{decoration:E}=g;if(E.type!==a.Z)return v();const P=E.data.get("className");return y.createElement("span",{className:P},g.children)}class f extends(0,i.Record)({onlyIn:c,getSyntax:l,renderDecoration:d}){constructor(p){super(p)}}const m=f;function u(g={},p=n().languages){const v=new m(g);return{decorateNode:(E,P,S)=>{if(!v.onlyIn(E))return S();const M=r.gO.create(E),R=v.getSyntax(M),I=p[R];if(!I)return[];const O=M.getTexts().map(K=>K&&K.getText()).join(`
`),N=n().tokenize(O,I),o=b(N),w=P.value.data.set("tokens",o);return P.setData(w),h(v,N,M)},renderDecoration:(E,P,S)=>v.renderDecoration({children:E.children,decoration:E.decoration},P,S)}}function h(g,p,v){const E=v.getTexts(),P=[];let S=0,M=0;return E.forEach(R=>{M=S+R.getText().length;let I=0;function A(O,N){if(typeof O=="string"){if(N){const o=C({text:R,textStart:S,textEnd:M,start:I,end:I+O.length,className:`prism-token token ${N}`,block:v});o&&P.push(o)}I+=O.length}else if(N=`${N} ${O.type}`,O.alias&&(N+=" "+O.alias),typeof O.content=="string"){const o=C({text:R,textStart:S,textEnd:M,start:I,end:I+O.content.length,className:`prism-token token ${N}`,block:v});o&&P.push(o),I+=O.content.length}else for(let o=0;o<O.content.length;o+=1)A(O.content[o],N)}p.forEach(A),S=M+1}),P}function C({text:g,textStart:p,textEnd:v,start:E,end:P,className:S,block:M}){return E>=v||P<=p?null:(E=Math.max(E,p),P=Math.min(P,v),E-=p,P-=p,M.createDecoration({object:"decoration",anchor:{key:g.key,offset:E,object:"point"},focus:{key:g.key,offset:P,object:"point"},type:a.Z,data:{className:S}}))}function x(g){return typeof g=="string"?[{content:g,types:[],aliases:[]}]:Array.isArray(g)?g.flatMap(p=>x(p)):g instanceof n().Token?x(g.content).flatMap(p=>{let v=[];return typeof g.alias=="string"?v=[g.alias]:v=g.alias??[],{content:p.content,types:[g.type,...p.types],aliases:[...v,...p.aliases]}}):[]}function b(g){const p=x(g);if(!p.length)return[];const v=p[0];v.prev=null,v.next=p.length>=2?p[1]:null,v.offsets={start:0,end:v.content.length};for(let P=1;P<p.length-1;P++)p[P].prev=p[P-1],p[P].next=p[P+1],p[P].offsets={start:p[P-1].offsets.end,end:p[P-1].offsets.end+p[P].content.length};const E=p[p.length-1];return E.prev=p.length>=2?p[p.length-2]:null,E.next=null,E.offsets={start:p.length>=2?p[p.length-2].offsets.end:0,end:p.length>=2?p[p.length-2].offsets.end+E.content.length:E.content.length},p}},98198:(X,L,e)=>{"use strict";e.d(L,{b:()=>w});var t=e(86832),n=e(39953),r=e(49065),a=e(68084),i=e(82803),y=e(36777),c=e(39965);const l=V=>V.reduce((_,{items:U,label:$})=>(_.push({label:$,kind:y.c.GroupTitle}),U.reduce((k,H)=>(k.push(H),k),_)),[]),d=V=>V.reduce((_,U)=>_.length<U.label.length?U.label:_,""),f=(V,_,U)=>{const $=(0,c.Z)(U,{font:V.typography.fontFamilyMonospace,fontSize:V.typography.bodySmall.fontSize,fontWeight:"normal"}),k=u($.width,V),H=m($.height,V),j=h(H,_);return{listWidth:k,listHeight:j,itemHeight:H}},m=(V,_)=>{const U=_.spacing.gridSize*2;return V+U},u=(V,_)=>{const U=_.spacing.gridSize*3,$=800;return Math.min(Math.max(V+U,200),$)},h=(V,_)=>{const U=Math.min(_.length,10),$=100,k=U*V;return Math.max(k,$)};var C=e(41407),x=e(52807);const b=(V,_,U)=>({typeaheadItem:(0,C.css)({label:"type-ahead-item",zIndex:11,padding:V.spacing(1,1,1,2),border:V.colors.border.medium,overflowY:"scroll",overflowX:"hidden",outline:"none",background:V.colors.background.secondary,color:V.colors.text.secondary,boxShadow:`0 0 20px ${V.v1.colors.dropdownShadow}`,visibility:U===!0?"visible":"hidden",width:"250px",minHeight:`${_+parseInt(V.spacing(.25),10)}px`,position:"relative",wordBreak:"break-word"})}),g=({item:V,height:_})=>{const U=V&&!!V.documentation,$=V?V.label:"",k=(0,x.a)(V?.documentation),H=(0,i.l4)(),j=b(H,_,U);return n.createElement("div",{className:(0,C.cx)([j.typeaheadItem])},n.createElement("b",null,$),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:k}}))};var p=e(90135),v=e.n(p),E=e(93021);const P=V=>({typeaheadItem:(0,C.css)({border:"none",background:"none",textAlign:"left",label:"type-ahead-item",height:"auto",fontFamily:V.typography.fontFamilyMonospace,padding:V.spacing(1,1,1,2),fontSize:V.typography.bodySmall.fontSize,textOverflow:"ellipsis",overflow:"hidden",zIndex:11,display:"block",whiteSpace:"nowrap",cursor:"pointer",transition:"color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1)"}),typeaheadItemSelected:(0,C.css)({label:"type-ahead-item-selected",backgroundColor:V.colors.background.secondary}),typeaheadItemMatch:(0,C.css)({label:"type-ahead-item-match",color:V.v1.palette.yellow,borderBottom:`1px solid ${V.v1.palette.yellow}`,padding:"inherit",background:"inherit"}),typeaheadItemGroupTitle:(0,C.css)({label:"type-ahead-item-group-title",color:V.colors.text.secondary,fontSize:V.typography.bodySmall.fontSize,lineHeight:V.typography.body.lineHeight,padding:V.spacing(1)})}),S=V=>{const _=(0,i.wW)(P),{isSelected:U,item:$,prefix:k,style:H,onMouseEnter:j,onMouseLeave:z,onClickItem:F}=V,J=U?(0,C.cx)([_.typeaheadItem,_.typeaheadItemSelected]):(0,C.cx)([_.typeaheadItem]),Q=(0,C.cx)([_.typeaheadItemMatch]),Z=(0,C.cx)([_.typeaheadItemGroupTitle]),ne=$.label||"";return $.kind===y.c.GroupTitle?n.createElement("li",{className:Z,style:H},n.createElement("span",null,ne)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:J,style:H,onMouseDown:F,onMouseEnter:j,onMouseLeave:z,type:"button"},$.highlightParts!==void 0?n.createElement(E.H,{text:ne,highlightClassName:Q,highlightParts:$.highlightParts}):n.createElement(v(),{textToHighlight:ne,searchWords:[k??""],autoEscape:!0,highlightClassName:Q})))},M=(V,_)=>V-_*Math.floor(V/_);class R extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const _=l(this.props.groupedItems),U=d(_),{listWidth:$,listHeight:k,itemHeight:H}=f(this.context,_,U);this.setState({listWidth:$,listHeight:k,itemHeight:H,allItems:_})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(_,U)=>{if(this.state.typeaheadIndex!==null&&U.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(_.groupedItems,this.props.groupedItems)===!1){const $=l(this.props.groupedItems),k=d($),{listWidth:H,listHeight:j,itemHeight:z}=f(this.context,$,k);this.setState({listWidth:H,listHeight:j,itemHeight:z,allItems:$,typeaheadIndex:null})}},this.onMouseEnter=_=>{this.setState({hoveredItem:_})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=_=>{const U=this.state.allItems.length;if(U){const $=this.state.typeaheadIndex||0;let k=M($+_,U);this.state.allItems[k].kind===y.c.GroupTitle&&(k=M(k+_,U)),this.setState({typeaheadIndex:k});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const _=window.getSelection(),U=_&&_.anchorNode;if(U&&U.parentElement){const $=U.parentElement.getBoundingClientRect(),k=window.scrollX,H=window.scrollY;return`position: absolute; display: flex; top: ${$.top+H+$.height+6}px; left: ${$.left+k-2}px`}return""}render(){const{prefix:_,isOpen:U=!1,origin:$}=this.props,{allItems:k,listWidth:H,listHeight:j,itemHeight:z,hoveredItem:F,typeaheadIndex:J}=this.state,Q=F||J,Z=k[F||J||0];return n.createElement(I,{origin:$,isOpen:U,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(a.t7,{ref:this.listRef,itemCount:k.length,itemSize:z,itemKey:ne=>{const ee=k&&k[ne];return ee?`${ne}-${ee.label}`:`${ne}`},width:H,height:j},({index:ne,style:ee})=>{const de=k&&k[ne];return de?n.createElement(S,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(de):{},isSelected:J===null?!1:k[J]===de,item:de,prefix:_,style:ee,onMouseEnter:()=>this.onMouseEnter(ne),onMouseLeave:this.onMouseLeave}):null})),Q&&n.createElement(g,{height:j,item:Z}))}}R.contextType=i.Ni;class I extends n.PureComponent{constructor(_){super(_);const{index:U=0,origin:$="query",style:k}=_;this.node=document.createElement("div"),this.node.setAttribute("style",k),this.node.classList.add("slate-typeahead",`slate-typeahead-${$}-${U}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),r.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var A=e(64225),O=e(66445),N=e(95220);const o=250;function w({onTypeahead:V,cleanText:_,onWillApplySuggestion:U,portalOrigin:$}){let k,H={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const j=(0,t.debounce)(K,o),z=F=>{H={...H,...F}};return{onBlur:(F,J,Q)=>(H={...H,groupedItems:[]},Q()),onClick:(F,J,Q)=>(H={...H,groupedItems:[]},Q()),onKeyDown:(F,J,Q)=>{const ne=H.groupedItems.length;switch(F.key){case"Escape":{if(ne)return F.preventDefault(),H={...H,groupedItems:[]},J.insertText("");break}case"ArrowDown":case"ArrowUp":if(ne){F.preventDefault(),k.moveMenuIndex(F.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(F.shiftKey||F.ctrlKey)&&ne)return F.preventDefault(),k.insertSuggestion();break}case"Tab":{if(ne)return F.preventDefault(),k.insertSuggestion();break}default:{F.key.length===1&&j(J,z,V,_);break}}return Q()},commands:{selectSuggestion:(F,J)=>{const Q=H.groupedItems;if(!Q||!Q.length)return F;const Z=F.applyTypeahead(J);return j(F,z,V,_),Z},applyTypeahead:(F,J)=>{let Q=J.insertText||J.label;const Z=J.kind==="function",ne=J.move||0,ee=ne>0?ne:0,de=ne<0?-ne:0,{typeaheadPrefix:Pe,typeaheadText:ye,typeaheadContext:he}=H;U&&(Q=U(Q,{groupedItems:H.groupedItems,typeaheadContext:he,typeaheadPrefix:Pe,typeaheadText:ye}));const me=J.deleteBackwards||Pe.length,le=(_?_(ye):ye).length-Pe.length,Ee=ye.indexOf(Pe),ge=Pe&&(le>0&&Ee>-1||Q===ye)&&!Z?le+Ee:0;if(Q.match(/\n/)){const ue=(0,A.xl)(Q);return F.deleteBackward(me).deleteForward(ge).insertFragment(ue).focus(),F}return H={...H,groupedItems:[]},F.snapshotSelection().deleteBackward(me).deleteForward(ge).insertText(Q).moveForward(ee).moveBackward(de).focus(),F}},renderEditor(F,J,Q){if(J.value.selection.isExpanded)return Q();const Z=Q();return n.createElement(n.Fragment,null,Z,n.createElement(R,{menuRef:ne=>k=ne,origin:$,prefix:H.typeaheadPrefix,isOpen:!!H.groupedItems.length,groupedItems:H.groupedItems,onSelectSuggestion:J.selectSuggestion}))}}}const K=async(V,_,U,$)=>{if(!U)return;const{value:k}=V,{selection:H}=k,j=k.document.getClosestBlock(k.focusBlock.key),z=k.selection.start.offset-1,F=j&&j.getDecorations(V),J=F?F.filter(De=>De.start.offset<=z&&De.end.offset>z&&De.type===N.Z).toArray():[],Q=F&&F.filter(De=>De.end.offset<=z&&De.type===N.Z&&De.data.get("className").includes("label-key")).last(),Z=Q&&k.focusText.text.slice(Q.start.offset,Q.end.offset),ne=J.map(De=>De.data.get("className")).join(" ").split(" ").filter(De=>De.length);let ee=k.focusText.text,de=ee.slice(0,H.focus.offset);J.length&&(ee=k.focusText.text.slice(J[0].start.offset,J[0].end.offset),de=k.focusText.text.slice(J[0].start.offset,H.focus.offset));const Pe=de.match(/(?:!?=~?"?|")(.*)/);Pe?de=Pe[1]:$&&(de=$(de));const{suggestions:ye,context:he}=await U({prefix:de,text:ee,value:k,wrapperClasses:ne,labelKey:Z||void 0,editor:V}),me=ye.map(De=>{if(!De.items)return De;const le=De.searchFunctionType||(De.prefixMatch?O.Z.Prefix:O.Z.Word),Ee=O.n[le];let be={...De};return de&&(De.skipFilter||(be.items=be.items.filter(ge=>(ge.filterText||ge.label).length>=de.length),be.items=Ee(be.items,de)),be.items=be.items.filter(ge=>!(ge.insertText===de||(ge.filterText??ge.label)===de))),De.skipSort||(be.items=(0,t.sortBy)(be.items,ge=>ge.sortText===void 0?ge.sortValue!==void 0?ge.sortValue:ge.label:ge.sortText||ge.label)),be}).filter(De=>De.items&&De.items.length);_({groupedItems:me,typeaheadPrefix:de,typeaheadContext:he,typeaheadText:ee}),V.blur().focus()}},82803:(X,L,e)=>{"use strict";e.d(L,{Fg:()=>h,HE:()=>u,Ni:()=>f,Zz:()=>m,l4:()=>C,sJ:()=>g,wW:()=>b,yK:()=>x});var t=e(16976),n=e.n(t),r=e(80172),a=e.n(r),i=e(39953),y=e(48706),c=e(64084);let l=null;const d=new WeakMap,f=i.createContext((0,y.j)());f.displayName="ThemeContext";const m=p=>{const v=E=>{const P=l||f;return i.createElement(P.Consumer,null,S=>i.createElement(p,{...E,theme:S.v1}))};return v.displayName=`WithTheme(${p.displayName})`,n()(v,p),v},u=p=>{const v=E=>{const P=l||f;return i.createElement(P.Consumer,null,S=>i.createElement(p,{...E,theme:S}))};return v.displayName=`WithTheme(${p.displayName})`,n()(v,p),v};function h(){return(0,i.useContext)(l||f).v1}function C(){return(0,i.useContext)(l||f)}function x(p){const v=h();let E=d.get(p);return E||(E=(0,c.B)(p),d.set(p,E)),E(v)}function b(p,...v){const E=C();let P=d.get(p);return P||(P=a()(p,{maxSize:10}),d.set(p,P)),P(E,...v)}const g=p=>(l=i.createContext(p),()=>{l=null})},74186:(X,L,e)=>{"use strict";e.d(L,{nz:()=>p,Ni:()=>t.Ni,gh:()=>a,Zu:()=>i,sJ:()=>t.sJ,GU:()=>m,Bb:()=>y.B,yK:()=>t.yK,wW:()=>t.wW,Fg:()=>t.Fg,l4:()=>t.l4,Zz:()=>t.Zz,HE:()=>t.HE});var t=e(82803),n=e(48706);let r;const a=(v="dark")=>r?r(v):(0,n.j)({colors:{mode:v}}).v1,i=v=>(r=v,()=>{r=null});var y=e(64084),c=e(93986),l=e(39953);function d(v){return(0,c.css)({".panel-options-group":{borderBottom:`1px solid ${v.colors.border.weak}`},".panel-options-group__header":{padding:v.spacing(1,2,1,1),position:"relative",display:"flex",alignItems:"center",cursor:"pointer",fontWeight:500,color:v.colors.text.primary,"&:hover":{background:v.colors.emphasize(v.colors.background.primary,.03)}},".panel-options-group__icon":{color:v.colors.text.secondary,marginRight:v.spacing(1),padding:v.spacing(0,.9,0,.6)},".panel-options-group__title":{position:"relative"},".panel-options-group__body":{padding:v.spacing(1,2,1,4)}})}function f(v){return(0,c.css)({".card-section":{marginBottom:v.spacing(4)},".card-list":{display:"flex",flexDirection:"row",flexWrap:"wrap",listStyleType:"none"},".card-item":{display:"block",height:"100%",background:v.colors.background.secondary,boxShadow:"none",padding:v.spacing(2),borderRadius:"4px","&:hover":{background:v.colors.emphasize(v.colors.background.secondary,.03)},".label-tag":{marginLeft:v.spacing(1),fontSize:"11px",padding:"2px 6px"}},".card-item-body":{display:"flex",overflow:"hidden"},".card-item-details":{overflow:"hidden"},".card-item-header":{marginBottom:v.spacing(2)},".card-item-type":{color:v.colors.text.secondary,textTransform:"uppercase",fontSize:v.typography.size.sm,fontWeight:v.typography.fontWeightMedium},".card-item-badge":{margin:"6px 0"},".card-item-notice":{fontSize:v.typography.size.sm},".card-item-name":{color:v.colors.text.primary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-label":{marginLeft:v.spacing(1)},".card-item-sub-name":{color:v.colors.text.secondary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-sub-name--header":{color:v.colors.text.secondary,textTransform:"uppercase",marginBottom:v.spacing(2),fontSize:v.typography.size.sm,fontWeight:"bold"},".card-list-layout-grid":{".card-item-type":{display:"inline-block"},".card-item-notice":{fontSize:v.typography.size.sm,display:"inline-block",marginLeft:v.spacing(2)},".card-item-header-action":{float:"right"},".card-item-wrapper":{width:"100%",padding:v.spacing(0,2,2,0)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item-figure":{margin:v.spacing(0,2,2,0),height:"80px",img:{width:"80px"}},".card-item-name":{fontSize:v.typography.h3.fontSize},[v.breakpoints.up("md")]:{".card-item-wrapper":{width:"50%"}},[v.breakpoints.up("lg")]:{".card-item-wrapper":{width:"33.333333%"}},"&.card-list-layout-grid--max-2-col":{[v.breakpoints.up("lg")]:{".card-item-wrapper":{width:"50%"}}}},".card-list-layout-list":{".card-item-wrapper":{padding:0,width:"100%",marginBottom:v.spacing(1)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item":{borderRadius:"2px"},".card-item-header":{float:"right",textAlign:"right"},".card-item-figure":{margin:v.spacing(0,2,0,0),img:{width:"48px"}},".card-item-name":{fontSize:v.typography.h4.fontSize},".card-item-sub-name":{fontSize:v.typography.size.sm},".layout-selector":{marginRight:0}}})}var m=e(53039);function u(v){return(0,c.css)({html:{MsOverflowStyle:"scrollbar",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",height:"100%",fontSize:`${v.typography.htmlFontSize}px`,fontFamily:v.typography.fontFamily,lineHeight:v.typography.body.lineHeight,fontKerning:"normal"},":root":{colorScheme:v.colors.mode},body:{height:"100%",width:"100%",position:"absolute",color:v.colors.text.primary,backgroundColor:v.colors.background.canvas,...h(v.typography.body)},"h1, .h1":h(v.typography.h1),"h2, .h2":h(v.typography.h2),"h3, .h3":h(v.typography.h3),"h4, .h4":h(v.typography.h4),"h5, .h5":h(v.typography.h5),"h6, .h6":h(v.typography.h6),p:{margin:v.spacing(0,0,2)},button:{letterSpacing:v.typography.body.letterSpacing,"&:focus-visible":(0,m.getFocusStyles)(v),"&:focus":{outline:"none"}},small:{fontSize:v.typography.bodySmall.fontSize},"b, strong":{fontWeight:v.typography.fontWeightMedium},em:{fontStyle:"italic",color:v.colors.text.primary},cite:{fontStyle:"normal"},".muted":{color:v.colors.text.secondary},"a.muted:hover, a.muted:focus":{color:v.colors.text.primary},".text-warning":{color:v.colors.warning.text,"&:hover, &:focus":{color:v.colors.emphasize(v.colors.warning.text,.15)}},".text-error":{color:v.colors.error.text,"&:hover, &:focus":{color:v.colors.emphasize(v.colors.error.text,.15)}},".text-success":{color:"$success-text-color","&:hover, &:focus":{color:v.colors.emphasize(v.colors.success.text,.15)}},a:{cursor:"pointer",color:v.colors.text.primary,textDecoration:"none","&:focus":{outline:"none"},"&:focus-visible":(0,m.getFocusStyles)(v),"&:[disabled]":{cursor:"default",pointerEvents:"none !important"}},".text-link":{textDecoration:"underline"},".text-left":{textAlign:"left"},".text-right":{textAlign:"right"},".text-center":{textAlign:"center"},".highlight-search-match":{background:v.components.textHighlight.background,color:v.components.textHighlight.text,padding:0}})}function h(v){return{margin:0,fontSize:v.fontSize,lineHeight:v.lineHeight,fontWeight:v.fontWeight,letterSpacing:v.letterSpacing,fontFamily:v.fontFamily,marginBottom:"0.45em"}}function C(v){return(0,c.css)({"iframe.intercom-borderless-frame":{colorScheme:v.colors.mode}})}function x(v){return(0,c.css)({"input, button, select, textarea":{fontFamily:v.typography.body.fontFamily,fontSize:v.typography.body.fontSize,fontWeight:v.typography.body.fontWeight,lineHeight:v.typography.body.lineHeight},"input, select":{backgroundColor:v.components.input.background,color:v.components.input.text,border:"none",boxShadow:"none"},textarea:{height:"auto"},"input[type='file'], input[type='image'], input[type='submit'], input[type='reset'], input[type='button'], input[type='radio'], input[type='checkbox']":{width:"auto"}})}function b(v){return(0,c.css)({})}function g(v){const E=v.breakpoints.values.xxl+v.spacing.gridSize*2+v.components.sidemenu.width;return(0,c.css)({".grafana-app":{display:"flex",alignItems:"stretch",position:"absolute",width:"100%",height:"100%",top:0,left:0},".main-view":{position:"relative",display:"flex",flexDirection:"column",flexGrow:1,height:"100%",flex:"1 1 0",minWidth:0},".page-scrollbar-content":{display:"flex",minHeight:"100%",flexDirection:"column",width:"100%",height:"100%"},".page-container":{flexGrow:1,flexBasis:"100%",paddingLeft:v.spacing(2),paddingRight:v.spacing(2),[v.breakpoints.up("sm")]:{margin:v.spacing(0,1)},[v.breakpoints.up("md")]:{margin:v.spacing(0,2)},[`@media (min-width: ${E}px)`]:{maxWidth:`${v.breakpoints.values.xxl}px`,marginLeft:"auto",marginRight:"auto",width:"100%"}},".page-full":{marginLeft:v.spacing(2),paddingLeft:v.spacing(2),paddingRight:v.spacing(2)},".page-body":{padding:v.spacing(1),background:v.components.panel.background,border:`1px solid ${v.components.panel.borderColor}`,marginBottom:"32px",[v.breakpoints.up("md")]:{padding:v.spacing(2)},[v.breakpoints.up("lg")]:{padding:v.spacing(3)}},".page-heading":{fontSize:v.typography.h4.fontSize,marginTop:0,marginBottom:v.spacing(2)},".page-action-bar":{marginBottom:v.spacing(2),display:"flex",alignItems:"flex-start",gap:v.spacing(2)},".page-action-bar--narrow":{marginBottom:0},".page-action-bar__spacer":{width:v.spacing(2),flexGrow:1},".page-sub-heading":{marginBottom:v.spacing(2)},".page-sub-heading-icon":{marginLeft:v.spacing(1),marginTop:v.spacing(.5)},".page-hidden":{display:"none"}})}function p(){const v=(0,t.l4)();return l.createElement(c.Global,{styles:[u(v),C(v),x(v),g(v),f(v),d(v),b(v)]})}},53039:(X,L,e)=>{"use strict";e.r(L),e.d(L,{cardChrome:()=>n,focusCss:()=>l,getFocusStyles:()=>f,getMouseFocusStyles:()=>d,getTooltipContainerStyles:()=>m,hoverColor:()=>r,listItem:()=>a,listItemSelected:()=>i,mediaUp:()=>y});var t=e(63374);function n(u){return`
    background: ${u.colors.background.secondary};
    &:hover {
      background: ${r(u.colors.background.secondary,u)};
    }
    box-shadow: ${u.components.panel.boxShadow};
    border-radius: ${u.shape.radius.default};
`}function r(u,h){return h.isDark?(0,t.Z)(u).brighten(2).toString():(0,t.Z)(u).darken(2).toString()}function a(u){return`
  background: ${u.colors.background.secondary};
  &:hover {
    background: ${r(u.colors.background.secondary,u)};
  }
  box-shadow: ${u.components.panel.boxShadow};
  border-radius: ${u.shape.radius.default};
`}function i(u){return`
    background: ${r(u.colors.background.secondary,u)};
    color: ${u.colors.text.maxContrast};
`}function y(u){return`only screen and (min-width: ${u})`}const c=u=>u.hasOwnProperty("v1"),l=u=>{const h=c(u),C=h?u.colors.background.canvas:u.colors.bodyBg,x=h?u.colors.primary.main:u.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${C}, 0 0 0px 4px ${x};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function d(u){return{outline:"none",boxShadow:"none"}}function f(u){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${u.colors.background.canvas}, 0 0 0px 4px ${u.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const m=u=>({overflow:"hidden",background:u.colors.background.secondary,boxShadow:u.shadows.z2,maxWidth:"800px",padding:u.spacing(1),borderRadius:u.shape.radius.default,zIndex:u.zIndex.tooltip})},64084:(X,L,e)=>{"use strict";e.d(L,{B:()=>r});var t=e(80172),n=e.n(t);function r(a){return n()(a)}},36777:(X,L,e)=>{"use strict";e.d(L,{c:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},12839:()=>{},72305:(X,L,e)=>{"use strict";e.d(L,{BI:()=>r,WZ:()=>i,e7:()=>a,iJ:()=>t.iJ});var t=e(17393),n=e(89591);const r=()=>Object.keys(t._S);function a(y){return i(y?.type)}function i(y){if(y)switch(y){case n.fS.time:return"clock-nine";case n.fS.string:return"font";case n.fS.number:return"calculator-alt";case n.fS.boolean:return"toggle-on";case n.fS.trace:return"info-circle";case n.fS.enum:return"list-ol";case n.fS.geo:return"map-marker";case n.fS.other:return"brackets-curly"}return"question-circle"}},78963:(X,L,e)=>{"use strict";e.r(L),e.d(L,{CompletionItemKind:()=>i.c,getAvailableIcons:()=>l.BI,getFieldTypeIcon:()=>l.e7,getFieldTypeIconName:()=>l.WZ,toIconName:()=>l.iJ});var t=e(18979),n=e.n(t),x={};for(const b in t)b!=="default"&&(x[b]=()=>t[b]);e.d(L,x);var r=e(4659),a=e.n(r),x={};for(const b in r)b!=="default"&&(x[b]=()=>r[b]);e.d(L,x);var i=e(36777),y=e(12839),c=e.n(y),x={};for(const b in y)["default","CompletionItemKind"].indexOf(b)<0&&(x[b]=()=>y[b]);e.d(L,x);var l=e(72305),d=e(57632),f=e.n(d),x={};for(const b in d)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(b)<0&&(x[b]=()=>d[b]);e.d(L,x);var m=e(20523),u=e.n(m),x={};for(const b in m)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(b)<0&&(x[b]=()=>m[b]);e.d(L,x);var h=e(35194),C=e.n(h),x={};for(const b in h)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(b)<0&&(x[b]=()=>h[b]);e.d(L,x)},4659:()=>{},35194:()=>{},57632:()=>{},20523:()=>{},18979:()=>{},58842:(X,L,e)=>{"use strict";e.d(L,{i:()=>t});const t=(n,r)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&r())}},59561:(X,L,e)=>{"use strict";e.d(L,{Gc:()=>x,Jx:()=>i,O9:()=>m,Wm:()=>g,_V:()=>l,bM:()=>b,f7:()=>d,iV:()=>f,ns:()=>c,te:()=>y});var t=e(86832),n=e.n(t),r=e(63374);const a=4,i="rgba(0, 211, 255, 1)",y="rgba(11, 237, 50, 1)",c="rgba(237, 46, 24, 1)",l="rgba(150, 150, 150, 1)",d="rgba(247, 149, 32, 1)",f=.09,m=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function u(p){const v=(0,t.map)(p,h),E=(0,t.sortBy)(v,["h"]),P=(0,t.chunk)(E,a),S=(0,t.map)(P,R=>(0,t.sortBy)(R,"l")),M=(0,t.flattenDeep)((0,t.zip)(...S));return(0,t.map)(M,C)}function h(p){return(0,r.Z)(p).toHsl()}function C(p){return(0,r.Z)(p).toHexString()}function x(p){return(0,r.Z)(p).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function b(p,v){const E=(0,r.Z)(p),P=E.getBrightness();return E.getAlpha()<.3?v?"rgb(247, 248, 250)":"rgb(32, 34, 38)":P>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let g=u(m)},71972:(X,L,e)=>{"use strict";e.d(L,{R:()=>t,g:()=>n});const t=r=>r().map(a=>({label:a.title,ariaLabel:a.title,url:a.href,target:a.target,icon:`${a.target==="_blank"?"external-link-alt":"link"}`,onClick:a.onClick})),n=r=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(r)},66841:(X,L,e)=>{"use strict";e.d(L,{x:()=>t});function t(n,r,a){}},96754:(X,L,e)=>{"use strict";e.d(L,{O:()=>t});function t(n){const a=n.lastIndexOf("."),i=n.substring(a),y=n.substring(0,a);return y.length<16?n:`${y.substring(0,16)}...${i}`}},52184:(X,L,e)=>{"use strict";e.d(L,{C:()=>r});var t=e(86832),n=e.n(t);function r(a,i){let y=0,c=a.indexOf(i);i=i.replace(/\s/g,"");const l=[];if(c!==-1)return{distance:0,found:!0,ranges:[{start:c,end:c+i.length-1}]};for(const d of i){const f=a.indexOf(d,c);if(f===-1)return{distance:1/0,ranges:[],found:!1};if(c!==-1&&(y+=f-c),c=f+1,l.length===0)l.push({start:f,end:f});else{const m=(0,t.last)(l);f===m.end+1?m.end++:l.push({start:f,end:f})}}return{distance:y,ranges:l,found:!0}}},28384:(X,L,e)=>{"use strict";e.d(L,{c:()=>y,t:()=>l});var t=e(20463),n=e(39953),r=e(7330),a=e(75146);function i(){typeof t.ZP.options.resources!="object"&&t.ZP.use(r.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const y=d=>(i(),n.createElement(a.c,{...d})),c=t.ZP.t,l=(d,f,m)=>(i(),c(d,f,m))},61481:(X,L,e)=>{"use strict";e.d(L,{ns:()=>i.ns,Jx:()=>i.Jx,Qi:()=>t,JU:()=>y.JU,_V:()=>i._V,zG:()=>E,te:()=>i.te,f7:()=>i.f7,iV:()=>i.iV,Ot:()=>a,Yi:()=>c.Yi,nu:()=>b.Z,_J:()=>g._J,xq:()=>v.x,MX:()=>h.MX,O9:()=>i.O9,hu:()=>p.h,C6:()=>P.C,AE:()=>h.AE,iu:()=>u.i,np:()=>m,vm:()=>d.vm,tu:()=>d.tu,Bx:()=>d.Bx,bM:()=>i.bM,Gc:()=>i.Gc,z3:()=>y.z3,go:()=>l.g,Rc:()=>l.R,xl:()=>c.xl,l1:()=>c.l1,X1:()=>h.X1,FE:()=>y.FE,Wm:()=>i.Wm,NW:()=>x,Gu:()=>y.Gu});var t={};e.r(t),e.d(t,{getNextCharacter:()=>r,getPreviousCousin:()=>n}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(S){const M=(this.document||this.ownerDocument).querySelectorAll(S);let R=this,I;do{for(I=M.length;--I>=0&&M.item(I)!==R;);R=R.parentElement}while(I<0&&R);return R});function n(S,M){let R=S.parentElement.previousSibling,I;for(;R;){if(I=R.querySelector(M),I)return I;R=R.previousSibling}}function r(S){const M=(S||window).getSelection();if(!M||!M.anchorNode)return null;const R=M.getRangeAt(0),I=M.anchorNode.textContent,A=R.startOffset;return I.slice(A,A+1)}var a=e(82360),i=e(59561),y=e(73201),c=e(64225),l=e(71972),d=e(72899);let f=null;function m(){if(f!==null)return f;if(typeof document<"u"){const S=document.createElement("div"),M={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(M).map(R=>{S.style[R]=M[R]}),document.body.appendChild(S),f=S.offsetWidth-S.clientWidth,document.body.removeChild(S)}else f=0;return f||0}var u=e(3274),h=e(76297),C=e(39953);function x(){const[S,M]=(0,C.useState)(0);return()=>M(R=>R+1)}var b=e(66445),g=e(48996),p=e(42851),v=e(66841),E=(S=>(S.id="id",S.title="title",S.subTitle="subTitle",S.mainStat="mainStat",S.secondaryStat="secondaryStat",S.source="source",S.target="target",S.detail="detail__",S.arc="arc__",S.color="color",S))(E||{}),P=e(52184)},42851:(X,L,e)=>{"use strict";e.d(L,{h:()=>a});var t=e(86832),n=e.n(t);const r=(0,t.throttle)((...i)=>{console.log(...i)},500),a=i=>{let y=!1;return{logger:(c,l=!1,...d)=>{},enable:()=>y=!0,disable:()=>y=!1,isEnabled:()=>y}}},76297:(X,L,e)=>{"use strict";e.d(L,{AE:()=>i,MX:()=>c,X1:()=>y});let t;const n=new Map,r=500;let a="";function i(){return t||(t=document.createElement("canvas").getContext("2d")),t}function y(l,d,f=400){const m=`${f} ${d}px 'Inter'`,u=l+m,h=n.get(u);if(h)return h;const C=i();a!==m&&(C.font=a=m);const x=C.measureText(l);return n.size===r&&n.clear(),n.set(u,x),x}function c(l,d,f,m,u,h){const C=y(l,14,h),x=d/(C.width+2)*14,b=f/m,g=Math.min(b,x);return Math.min(g,u??g)}},82360:(X,L,e)=>{"use strict";e.r(L),e.d(L,{getChildId:()=>n,renderOrCallToRender:()=>r});var t=e(39953);function n(a){let i;const y=t.Children.only(a);return"id"in y?.props?i=y.props.id:"inputId"in y.props&&(i=y?.props.inputId),typeof i=="string"?i:void 0}function r(a,i){if(t.isValidElement(a)||typeof a=="string"||typeof a=="number")return a;if(typeof a=="function"&&i)return a(i);throw new Error(`${a} is not a React element nor a function that returns React element`)}},66445:(X,L,e)=>{"use strict";e.d(L,{Z:()=>n,n:()=>y});var t=e(52184),n=(c=>(c.Word="Word",c.Prefix="Prefix",c.Fuzzy="Fuzzy",c))(n||{});const y={Word:(c,l)=>c.filter(d=>(d.filterText||d.label).includes(l)),Prefix:(c,l)=>c.filter(d=>(d.filterText||d.label).startsWith(l)),Fuzzy:(c,l)=>(l=l.toLowerCase(),c.filter(d=>{const{distance:f,ranges:m,found:u}=(0,t.C)(d.label.toLowerCase(),l);return u?(d.sortValue=f,d.highlightParts=m,!0):!1}))}},64225:(X,L,e)=>{"use strict";e.d(L,{Yi:()=>n,l1:()=>a,xl:()=>r});var t=e(20399);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},r=(i,y)=>{const c=i.split(`
`).map(d=>t.gO.create({type:"code_line",nodes:[t.xv.create(d)]})),l=t.gO.create({data:{syntax:y},type:"code_block",nodes:c});return t.BB.create({nodes:[l]})},a=(i,y)=>{const c=r(i,y);return t.B4.create({document:c})}},3274:(X,L,e)=>{"use strict";e.d(L,{i:()=>t});const t=(n,r)=>{let a;if(n.getLinks&&(a=n.getLinks({valueRowIndex:r.index})),!!a){for(let i=0;i<a?.length;i++)if(a[i].onClick){const y=a[i].onClick;a[i].onClick=c=>{c.ctrlKey||c.metaKey||c.shiftKey||(c.preventDefault(),y(c,{field:n,rowIndex:r.index}))}}return a}}},72899:(X,L,e)=>{"use strict";e.d(L,{Bx:()=>a,tu:()=>r,vm:()=>i});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function r(l=""){const d=y(l.toLowerCase());return Math.abs(d%t.length)}function a(l=""){const d=r(l);return i(d)}function i(l){return{color:t[l],borderColor:n[l]}}function y(l){let d=5381;for(let f=0;f<l.length;f++)d=(d<<5)+d+l.charCodeAt(f);return d}var c={getTagColorsFromName:a}},36517:(X,L,e)=>{"use strict";e.d(L,{k:()=>r});var t=e(41407),n=e(91249);function r(a,i,y,c,l){return{arrow:(0,t.css)({height:"1rem",width:"1rem",position:"absolute",pointerEvents:"none","&::before":{borderStyle:"solid",content:'""',display:"block",height:0,margin:"auto",width:0},"&::after":{borderStyle:"solid",content:'""',display:"block",height:0,margin:"auto",position:"absolute",width:0}}),container:(0,t.css)({backgroundColor:i,borderRadius:a.shape.radius.default,border:`1px solid ${y}`,boxShadow:a.shadows.z2,color:c,fontSize:a.typography.bodySmall.fontSize,padding:a.spacing(l.topBottom,l.rightLeft),transition:"opacity 0.3s",zIndex:a.zIndex.tooltip,maxWidth:"400px",overflowWrap:"break-word","&[data-popper-interactive='false']":{pointerEvents:"none"},"&[data-popper-placement*='bottom'] > div[data-popper-arrow='true']":{left:0,marginTop:"-7px",top:0,"&::before":{borderColor:`transparent transparent ${y} transparent`,borderWidth:"0 8px 7px 8px",position:"absolute",top:"-1px"},"&::after":{borderColor:`transparent transparent ${i} transparent`,borderWidth:"0 8px 7px 8px"}},"&[data-popper-placement*='top'] > div[data-popper-arrow='true']":{bottom:0,left:0,marginBottom:"-14px","&::before":{borderColor:`${y} transparent transparent transparent`,borderWidth:"7px 8px 0 7px",position:"absolute",top:"1px"},"&::after":{borderColor:`${i} transparent transparent transparent`,borderWidth:"7px 8px 0 7px"}},"&[data-popper-placement*='right'] > div[data-popper-arrow='true']":{left:0,marginLeft:"-10px","&::before":{borderColor:`transparent ${y} transparent transparent`,borderWidth:"7px 6px 7px 0"},"&::after":{borderColor:`transparent ${i} transparent transparent`,borderWidth:"6px 7px 7px 0",left:"2px",top:"1px"}},"&[data-popper-placement*='left'] > div[data-popper-arrow='true']":{marginRight:"-11px",right:0,"&::before":{borderColor:`transparent transparent transparent ${y}`,borderWidth:"7px 0 6px 7px"},"&::after":{borderColor:`transparent transparent transparent ${i}`,borderWidth:"6px 0 5px 5px",left:"1px",top:"1px"}},code:{border:"none",display:"inline",background:n.darken(i,.1),color:c},pre:{background:n.darken(i,.1),color:c},a:{color:c,textDecoration:"underline"},"a:hover":{textDecoration:"none"}}),headerClose:(0,t.css)({color:a.colors.text.secondary,position:"absolute",right:a.spacing(1),top:a.spacing(1.5),backgroundColor:"transparent",border:0}),header:(0,t.css)({paddingTop:a.spacing(1),paddingBottom:a.spacing(2)}),body:(0,t.css)({paddingTop:a.spacing(1),paddingBottom:a.spacing(1)}),footer:(0,t.css)({paddingTop:a.spacing(2),paddingBottom:a.spacing(1)})}}},73201:(X,L,e)=>{"use strict";e.d(L,{FE:()=>a,Gu:()=>n,JU:()=>t,z3:()=>r});var t=(i=>(i.onBlur="onBlur",i.onFocus="onFocus",i.onChange="onChange",i))(t||{});const n=(i,y)=>{const c=y.reduce((l,d)=>d.rule(i)?l:l.concat(d.errorMessage),[]);return c.length>0?c:null},r=(i,y)=>y&&y[i],a=(i,y)=>({rule:c=>!!c.match(i),errorMessage:y||"Value is not valid"})},36371:(X,L,e)=>{"use strict";e.r(L),e.d(L,{default:()=>Sd});var t=e(71579),n=e(20023),r=e(39953),a=e(89772),i=e(77814),y=e.n(i),c=e(84051),l=e.n(c),d=e(19977),f=e(31544),m=e(32688),u=e(74602),h=e(97125),C=e(73431),x=e(41407),b=e(63374),g=e(82803),p=e(68497),v=e(26843),E=e(48993),P=e(12223),S=e(41245),M=e(97368),R=e.n(M),I=e(4919),A=e(9558),O=e(39285),N=e(1277),o=e(6868),w=e(21527);function K({onChange:te,maxMenuHeight:ie}){const Ze=(0,g.wW)(_),[rt,Ct]=(0,r.useState)(!1),_t=(0,r.useCallback)(ba=>V(ba,Ct),[]),dn=(0,r.useMemo)(()=>R()(_t,300),[_t]),[Mn,Zn]=(0,r.useState)([]),ca=(0,r.useCallback)(ba=>{const fa=ba.filter(pa=>!!pa.value).map(pa=>pa.value);te(fa),Zn(ba)},[te]);return r.createElement("div",{className:Ze.container},Mn.length>0&&r.createElement(I.zx,{size:"xs",icon:"trash-alt",fill:"text",className:Ze.clear,onClick:()=>te([]),"aria-label":"Clear folders"},"Clear folders"),r.createElement(A.M8,{value:Mn,onChange:ca,isLoading:rt,loadOptions:dn,maxMenuHeight:ie,placeholder:"Filter by folder",noOptionsMessage:"No folders found",prefix:r.createElement(O.J,{name:"filter"}),"aria-label":"Folder filter",defaultOptions:!0}))}async function V(te,ie){ie(!0);const Ze={query:te,type:o.o.DashFolder,permission:w.PermissionLevelString.View},Ct=(await(0,N.i)().search(Ze)).map(_t=>({label:_t.title,value:{uid:_t.uid,title:_t.title}}));return(!te||"general".includes(te.toLowerCase()))&&Ct.unshift({label:"General",value:{uid:"general",title:"General"}}),ie(!1),Ct}function _(te){return{container:(0,x.css)`
      label: container;
      position: relative;
      min-width: 180px;
      flex-grow: 1;
    `,clear:(0,x.css)`
      label: clear;
      font-size: ${te.spacing(1.5)};
      position: absolute;
      top: -${te.spacing(4.5)};
      right: 0;
    `}}var U=e(50820);function $(){const te=U.config.panels;return Object.keys(te).filter(ie=>te[ie].hideFromList===!1).map(ie=>te[ie]).sort((ie,Ze)=>ie.sort-Ze.sort)}function k(){return $().filter(te=>!!te.skipDataQuery)}function H(){return $().filter(te=>!te.skipDataQuery)}function j(te,ie,Ze){if(!ie.length)return te.filter(Mn=>Mn.state===PluginState.deprecated?Ze?.id===Mn.id:!0);const rt=unEscapeStringFromRegex(ie).toLowerCase(),Ct=[],_t=[],dn="graph".startsWith(rt);for(const Mn of te){if(Mn.state===PluginState.deprecated&&Ze?.id!==Mn.id)continue;const ca=Mn.name.toLowerCase().indexOf(rt);ca===0?Ct.push(Mn):ca>0?_t.push(Mn):dn&&Mn.id==="timeseries"&&Ct.push(Mn)}return Ct.concat(_t)}const z=({onChange:te,maxMenuHeight:ie,isWidget:Ze=!1})=>{const rt=()=>m.config.featureToggles.vizAndWidgetSplit?Ze?k():H():$(),Ct=(0,r.useMemo)(rt,[Ze]),_t=(0,r.useMemo)(()=>Ct.map(fa=>({label:fa.name,imgUrl:fa.info.logos.small,value:fa})).sort((fa,pa)=>fa.label?.localeCompare(pa.label)),[Ct]),[dn,Mn]=(0,r.useState)([]),Zn=(0,r.useCallback)(fa=>{const pa=fa.filter(ns=>ns.value).map(ns=>ns.value);te(pa),Mn(fa)},[te]),ca=(0,g.wW)(F),ba={defaultOptions:!0,getOptionLabel:fa=>fa.label,getOptionValue:fa=>fa.value,noOptionsMessage:"No Panel types found",placeholder:"Filter by type",maxMenuHeight:ie,options:_t,value:dn,onChange:Zn};return r.createElement("div",{className:ca.container},dn.length>0&&r.createElement(I.zx,{size:"xs",icon:"trash-alt",fill:"text",className:ca.clear,onClick:()=>Zn([]),"aria-label":"Clear types"},"Clear types"),r.createElement(A.NU,{...ba,prefix:r.createElement(O.J,{name:"filter"}),"aria-label":"Panel Type filter"}))};function F(te){return{container:(0,x.css)`
      label: container;
      position: relative;
      min-width: 180px;
      flex-grow: 1;
    `,clear:(0,x.css)`
      label: clear;
      font-size: ${te.spacing(1.5)};
      position: absolute;
      top: -${te.spacing(4.5)};
      right: 0;
    `}}var J=e(20653),Q=e(9738),Z=e(17724);const ne=()=>(0,Z.getGrafanaSearcher)().getSortOptions();function ee({onChange:te,value:ie,placeholder:Ze,filter:rt,getSortOptions:Ct,isClearable:_t}){const dn=(0,J.Z)(async()=>{const Zn=await(Ct??ne)();return rt?Zn.filter(ca=>rt.includes(ca.value)):Zn},[Ct,rt]);if(dn.loading)return null;const Mn=!!(ie?.includes("desc")||ie?.startsWith("-"));return r.createElement(A.Ph,{key:ie,width:28,onChange:te,value:dn.value?.find(Zn=>Zn.value===ie)??null,options:dn.value,"aria-label":"Sort",placeholder:Ze??`Sort (Default ${Q.yw.label})`,prefix:r.createElement(O.J,{name:Mn?"sort-amount-down":"sort-amount-up"}),isClearable:_t})}var de=e(10694),Pe=e(39017),ye=e(18950),he=e(11818),me=e(30670),De=e(88227),le=e(75766),Ee=e(45802),be=e(12608);const ge=te=>{const ie=ue(te.state);return ie?r.createElement(be.C,{className:te.className,color:ie.color,title:ie.tooltip,text:ie.text,icon:ie.icon}):null};function ue(te){switch(te){case me.BV.deprecated:return{text:"Deprecated",color:"red",tooltip:"This feature is deprecated and will be removed in a future release"};case me.BV.alpha:return{text:"Alpha",color:"blue",tooltip:"This feature is experimental and future updates might not be backward compatible"};case me.BV.beta:return{text:"Beta",color:"blue",tooltip:"This feature is close to complete but not fully tested"};default:return null}}const Ie=({isCurrent:te,title:ie,plugin:Ze,onClick:rt,onDelete:Ct,disabled:_t,showBadge:dn,description:Mn,children:Zn})=>{const ca=(0,g.wW)(ot),ba=_t||Ze.state===me.BV.deprecated,fa=(0,x.cx)({[ca.item]:!0,[ca.itemDisabled]:ba,[ca.current]:te});return r.createElement("div",{className:fa,"aria-label":le.wl.components.PluginVisualization.item(Ze.name),"data-testid":le.wl.components.PluginVisualization.item(Ze.name),onClick:ba?void 0:rt,title:te?"Click again to close this section":Ze.name},r.createElement("img",{className:(0,x.cx)(ca.img,{[ca.disabled]:ba}),src:Ze.info.logos.small,alt:""}),r.createElement("div",{className:(0,x.cx)(ca.itemContent,{[ca.disabled]:ba})},r.createElement("div",{className:ca.name},ie),Mn?r.createElement("span",{className:ca.description},Mn):null,Zn),dn&&r.createElement("div",{className:(0,x.cx)(ca.badge,{[ca.disabled]:ba})},r.createElement(Qe,{plugin:Ze})),Ct&&r.createElement(p.h,{name:"trash-alt",onClick:pa=>{pa.stopPropagation(),Ct()},className:ca.deleteButton,"aria-label":"Delete button on panel type card",tooltip:"Delete"}))};Ie.displayName="PanelTypeCard";const ot=te=>({item:(0,x.css)`
      position: relative;
      display: flex;
      flex-shrink: 0;
      cursor: pointer;
      background: ${te.colors.background.secondary};
      border-radius: ${te.shape.radius.default};
      box-shadow: ${te.shadows.z1};
      border: 1px solid ${te.colors.background.secondary};
      align-items: center;
      padding: 8px;
      width: 100%;
      position: relative;
      overflow: hidden;
      transition: ${te.transitions.create(["background"],{duration:te.transitions.duration.short})};

      &:hover {
        background: ${te.colors.emphasize(te.colors.background.secondary,.03)};
      }
    `,itemContent:(0,x.css)`
      overflow: hidden;
      position: relative;
      padding: ${te.spacing(0,1)};
    `,itemDisabled:(0,x.css)`
      cursor: default;

      &,
      &:hover {
        background: ${te.colors.action.disabledBackground};
      }
    `,current:(0,x.css)`
      label: currentVisualizationItem;
      border: 1px solid ${te.colors.primary.border};
      background: ${te.colors.action.selected};
    `,disabled:(0,x.css)`
      opacity: 0.6;
      filter: grayscale(1);
      cursor: default;
      pointer-events: none;
    `,name:(0,x.css)`
      text-overflow: ellipsis;
      overflow: hidden;
      font-size: ${te.typography.size.sm};
      font-weight: ${te.typography.fontWeightMedium};
      width: 100%;
    `,description:(0,x.css)`
      display: block;
      text-overflow: ellipsis;
      overflow: hidden;
      color: ${te.colors.text.secondary};
      font-size: ${te.typography.bodySmall.fontSize};
      font-weight: ${te.typography.fontWeightLight};
      width: 100%;
      max-height: 4.5em;
    `,img:(0,x.css)`
      max-height: 38px;
      width: 38px;
      display: flex;
      align-items: center;
    `,badge:(0,x.css)`
      background: ${te.colors.background.primary};
    `,deleteButton:(0,x.css)`
      cursor: pointer;
      margin-left: auto;
    `}),Qe=({plugin:te})=>(0,De.x)(te.signature)?r.createElement(Ee.o,{status:te.signature}):r.createElement(ge,{state:te.state});Qe.displayName="PanelPluginBadge";var Me=e(73075);function Ne(te){return{myTable:(0,x.css)`
      max-height: 204px;
      overflow-y: auto;
      margin-top: 11px;
      margin-bottom: 28px;
      border-radius: ${te.shape.radius.default};
      border: 1px solid ${te.colors.action.hover};
      background: ${te.colors.background.primary};
      color: ${te.colors.text.secondary};
      font-size: ${te.typography.h6.fontSize};
      width: 100%;

      thead {
        color: #538ade;
        font-size: ${te.typography.bodySmall.fontSize};
      }

      th,
      td {
        padding: 6px 13px;
        height: ${te.spacing(4)};
      }

      tbody > tr:nth-child(odd) {
        background: ${te.colors.background.secondary};
      }
    `,noteTextbox:(0,x.css)`
      margin-bottom: ${te.spacing(4)};
    `,textInfo:(0,x.css)`
      color: ${te.colors.text.secondary};
      font-size: ${te.typography.size.sm};
    `,dashboardSearch:(0,x.css)`
      margin-top: ${te.spacing(2)};
    `,modal:(0,x.css)`
      width: 500px;
    `,modalText:(0,x.css)`
      font-size: ${te.typography.h4.fontSize};
      color: ${te.colors.text.primary};
      margin-bottom: ${te.spacing(4)};
      padding-top: ${te.spacing(2)};
    `}}var qe=e(22605),bt=e(63302),Fe=e(3195),Ve=e(46514),Ue=e(84289),it=e(10752),ze=e(81698),Xe=e(52325),St=e(66453),Bt=e(79947),zt=e(64840),qt=e(77960);const Qt={loadingState:de.Gu.Loading,libraryPanels:[],totalCount:0,perPage:40,page:1,numberOfPages:0,currentPanelId:void 0},yn=(0,qt.PH)("libraryPanels/view/initSearch"),Zt=(0,qt.PH)("libraryPanels/view/searchCompleted"),re=(0,qt.PH)("libraryPanels/view/changePage"),Te=(te,ie)=>{if(yn.match(ie))return{...te,loadingState:de.Gu.Loading};if(Zt.match(ie)){const{libraryPanels:Ze,page:rt,perPage:Ct,totalCount:_t}=ie.payload,dn=Math.ceil(_t/Ct);return{...te,libraryPanels:Ze,perPage:Ct,totalCount:_t,loadingState:de.Gu.Done,numberOfPages:dn,page:rt>dn?rt-1:rt}}return re.match(ie)?{...te,page:ie.payload.page}:te};function We(te){const ie=(rt,Ct)=>rt.id===Ct.type,Ze=(rt,Ct)=>{const _t=$();return rt.filter(dn=>{const Mn=_t.find(Zn=>ie(Zn,dn));return Ct?!!Mn?.skipDataQuery:!Mn?.skipDataQuery})};return function(rt){const Ct=new f.w0,_t=(0,qe.D)((0,zt.Pq)({searchString:te.searchString,perPage:te.perPage,page:te.page,excludeUid:te.currentPanelId,sortDirection:te.sortDirection,typeFilter:te.panelFilter,folderFilterUIDs:te.folderFilterUIDs})).pipe((0,Ue.z)(dn=>{const{elements:Mn}=dn;if(m.config.featureToggles.vizAndWidgetSplit&&te.isWidget!==void 0){const Zn=Ze(Mn,te.isWidget);return(0,bt.of)({...dn,elements:Zn})}return(0,bt.of)({...dn,elements:Mn})}),(0,Ue.z)(({perPage:dn,elements:Mn,page:Zn,totalCount:ca})=>(0,bt.of)(Zt({libraryPanels:Mn,page:Zn,perPage:dn,totalCount:ca}))),(0,it.K)(dn=>(console.error(dn),(0,bt.of)(Zt({...Qt,page:te.page,perPage:te.perPage})))),(0,ze.x)(()=>Ct.unsubscribe()),(0,Xe.B)());Ct.add((0,Fe.T)((0,Ve.H)(50).pipe((0,St.h)(yn()),(0,Bt.R)(_t)),_t).subscribe(rt))}}function Je(te,ie){return async function(Ze){try{await(0,zt.UO)(te),We(ie)(Ze)}catch(rt){console.error(rt)}}}function je(te){return function(ie){return ie instanceof Function?ie(te):te(ie)}}const pt={loadingState:de.Gu.Loading,dashboardTitles:[]},ft=(0,qt.PH)("libraryPanels/delete/searchCompleted"),Tt=(te=pt,ie)=>ft.match(ie)?{...te,dashboardTitles:ie.payload.dashboards.map(Ze=>Ze.title),loadingState:de.Gu.Done}:te;function Ye(te){return async function(ie){const Ze=await(0,zt.E8)(te.uid);ie(ft({dashboards:Ze}))}}const Ce=({libraryPanel:te,onDismiss:ie,onConfirm:Ze})=>{const rt=(0,g.wW)(Ne),[{dashboardTitles:Ct,loadingState:_t},dn]=(0,r.useReducer)(Tt,pt),Mn=(0,r.useMemo)(()=>je(dn),[dn]);(0,r.useEffect)(()=>{Mn(Ye(te))},[Mn,te]);const Zn=!!Ct.length,ca=_t===de.Gu.Done;return r.createElement(Me.u,{className:rt.modal,title:"Delete library panel",icon:"trash-alt",onDismiss:ie,isOpen:!0},ca?null:r.createElement(oe,null),ca?r.createElement("div",null,Zn?r.createElement(Re,{dashboardTitles:Ct}):null,Zn?null:r.createElement(pe,null),r.createElement(Me.u.ButtonRow,null,r.createElement(I.zx,{variant:"secondary",onClick:ie,fill:"outline"},"Cancel"),r.createElement(I.zx,{variant:"destructive",onClick:Ze,disabled:Zn},"Delete"))):null)},oe=()=>r.createElement("span",null,"Loading library panel..."),pe=()=>{const te=(0,g.wW)(Ne);return r.createElement("div",{className:te.modalText},"Do you want to delete this panel?")},Re=({dashboardTitles:te})=>{const ie=(0,g.wW)(Ne),Ze=te.length===1?"dashboard.":"dashboards.",rt=`${te.length} ${Ze}`;return te.length===0?null:r.createElement("div",null,r.createElement("p",{className:ie.textInfo},"This library panel can not be deleted because it is connected to ",r.createElement("strong",null,rt)," Remove the library panel from the dashboards listed below and retry."),r.createElement("table",{className:ie.myTable},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Dashboard name"))),r.createElement("tbody",null,te.map((Ct,_t)=>r.createElement("tr",{key:`dash-title-${_t}`},r.createElement("td",null,Ct))))))},ae=({libraryPanel:te,onClick:ie,onDelete:Ze,showSecondaryActions:rt})=>{const[Ct,_t]=(0,r.useState)(!1),dn=()=>{Ze?.(te),_t(!1)},Mn=m.config.panels[te.model.type]??(0,he.X)(te.model.type).meta;return r.createElement(r.Fragment,null,r.createElement(Ie,{isCurrent:!1,title:te.name,description:te.description,plugin:Mn,onClick:()=>ie?.(te),onDelete:rt?()=>_t(!0):void 0},r.createElement(ve,{libraryPanel:te})),Ct&&r.createElement(Ce,{libraryPanel:te,onConfirm:dn,onDismiss:()=>_t(!1)}))};function ve({libraryPanel:te}){const ie=(0,g.wW)(xe);return!te.meta?.folderUid&&!te.meta?.folderName?null:te.meta.folderUid?r.createElement("span",{className:ie.metaContainer},r.createElement(ye.r,{href:`/dashboards/f/${te.meta.folderUid}`},r.createElement(O.J,{name:"folder-upload",size:"sm"}),r.createElement("span",null,te.meta.folderName))):r.createElement("span",{className:ie.metaContainer},r.createElement(O.J,{name:"folder",size:"sm"}),r.createElement("span",null,te.meta.folderName))}function xe(te){return{metaContainer:(0,x.css)`
      display: flex;
      align-items: center;
      color: ${te.colors.text.secondary};
      font-size: ${te.typography.bodySmall.fontSize};
      padding-top: ${te.spacing(.5)};

      svg {
        margin-right: ${te.spacing(.5)};
        margin-bottom: 3px;
      }
    `}}const Ge=({className:te,onClickCard:ie,searchString:Ze,sortDirection:rt,panelFilter:Ct,folderFilter:_t,showSecondaryActions:dn,currentPanelId:Mn,perPage:Zn=40,isWidget:ca})=>{const ba=(0,g.wW)(at),[{libraryPanels:fa,page:pa,perPage:ns,numberOfPages:gs,loadingState:ps,currentPanelId:mr},ys]=(0,r.useReducer)(Te,{...Qt,currentPanelId:Mn,perPage:Zn}),fr=(0,r.useMemo)(()=>je(ys),[ys]);(0,E.Z)(()=>fr(We({searchString:Ze,sortDirection:rt,panelFilter:Ct,folderFilterUIDs:_t,page:pa,perPage:ns,currentPanelId:mr,isWidget:ca})),300,[Ze,rt,Ct,_t,pa,fr]);const Es=({uid:Ss})=>fr(Je(Ss,{searchString:Ze,sortDirection:rt,panelFilter:Ct,folderFilterUIDs:_t,page:pa,perPage:ns})),Pa=Ss=>fr(re({page:Ss}));return r.createElement("div",{className:(0,x.cx)(ba.container,te)},r.createElement("div",{className:ba.libraryPanelList},ps===de.Gu.Loading?r.createElement("p",null,"Loading library panels..."):fa.length<1?r.createElement("p",{className:ba.noPanelsFound},"No library panels found."):fa?.map((Ss,hs)=>r.createElement(ae,{key:`library-panel=${hs}`,libraryPanel:Ss,onDelete:Es,onClick:ie,showSecondaryActions:dn}))),fa.length?r.createElement("div",{className:ba.pagination},r.createElement(Pe.t,{currentPage:pa,numberOfPages:gs,onNavigate:Pa,hideWhenSinglePage:!0})):null)},at=te=>({container:(0,x.css)`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
    `,libraryPanelList:(0,x.css)`
      max-width: 100%;
      display: grid;
      grid-gap: ${te.spacing(1)};
    `,searchHeader:(0,x.css)`
      display: flex;
    `,newPanelButton:(0,x.css)`
      margin-top: 10px;
      align-self: flex-start;
    `,pagination:(0,x.css)`
      align-self: center;
      margin-top: ${te.spacing(1)};
    `,noPanelsFound:(0,x.css)`
      label: noPanelsFound;
      min-height: 200px;
    `});var dt=(te=>(te.Tight="tight",te.Spacious="spacious",te))(dt||{});const st=({onClick:te,variant:ie="spacious",currentPanelId:Ze,currentFolderUID:rt,perPage:Ct=u.gN,showPanelFilter:_t=!1,showFolderFilter:dn=!1,showSort:Mn=!1,showSecondaryActions:Zn=!1})=>{const ca=(0,g.wW)((0,r.useCallback)(hs=>Pt(hs,ie),[ie])),[ba,fa]=(0,r.useState)(""),[pa,ns]=(0,r.useState)("");(0,E.Z)(()=>ns(ba),200,[ba]);const[gs,ps]=(0,r.useState)({}),[mr,ys]=(0,r.useState)(rt?[rt]:[]),[fr,Es]=(0,r.useState)([]),Pa=Mn||_t||dn,Ss=ie==="tight"?"lg":"xs";return r.createElement("div",{className:ca.container},r.createElement(P.wc,{spacing:Ss},r.createElement("div",{className:ca.gridContainer},r.createElement("div",{className:ca.filterInputWrapper},r.createElement(S.H,{value:ba,onChange:fa,placeholder:"Search by name or description",width:0,escapeRegex:!1})),Pa&&r.createElement(we,{showSort:Mn,showPanelFilter:_t,showFolderFilter:dn,onSortChange:ps,onFolderFilterChange:ys,onPanelFilterChange:Es,sortDirection:gs.value,variant:ie})),r.createElement("div",{className:ca.libraryPanelsView},r.createElement(Ge,{onClickCard:te,searchString:pa,sortDirection:gs.value,panelFilter:fr,folderFilter:mr,currentPanelId:Ze,showSecondaryActions:Zn,perPage:Ct}))))};function Pt(te,ie){const Ze=(0,x.css)`
    flex-direction: row;
    row-gap: ${te.spacing(1)};
  `;return{filterInputWrapper:(0,x.css)`
      flex-grow: ${ie==="tight"?1:"initial"};
    `,container:(0,x.css)`
      width: 100%;
      overflow-y: auto;
      padding: ${te.spacing(1)};
    `,libraryPanelsView:(0,x.css)`
      width: 100%;
    `,gridContainer:(0,x.css)`
      ${ie==="tight"?Ze:""};
      display: flex;
      flex-direction: column;
      width: 100%;
      column-gap: ${te.spacing(1)};
      row-gap: ${te.spacing(1)};
      padding-bottom: ${te.spacing(2)};
    `}}const we=r.memo(({variant:te="spacious",showSort:ie,showPanelFilter:Ze,showFolderFilter:rt,sortDirection:Ct,onSortChange:_t,onFolderFilterChange:dn,onPanelFilterChange:Mn})=>{const Zn=(0,g.wW)((0,r.useCallback)(fa=>Le(fa,te),[te])),ca=(0,r.useCallback)(fa=>Mn(fa.map(pa=>pa.id)),[Mn]),ba=(0,r.useCallback)(fa=>dn(fa.map(pa=>pa.uid??"")),[dn]);return r.createElement("div",{className:Zn.container},ie&&r.createElement(ee,{value:Ct,onChange:_t,filter:["alpha-asc","alpha-desc"]}),(rt||Ze)&&r.createElement("div",{className:Zn.filterContainer},rt&&r.createElement(K,{onChange:ba}),Ze&&r.createElement(z,{onChange:ca})))});we.displayName="SearchControls";function Le(te,ie="spacious"){const Ze=(0,x.css)`
    display: flex;
    gap: ${te.spacing(1)};
    flex-grow: 1;
    flex-direction: row;
    justify-content: end;
  `,rt=(0,x.css)`
    ${Ze};
    flex-grow: initial;
    flex-direction: column;
    justify-content: normal;
  `,Ct=(0,x.css)`
    display: flex;
    flex-direction: row;
    margin-left: auto;
    gap: 4px;
  `,_t=(0,x.css)`
    ${Ct};
    flex-direction: column;
    margin-left: initial;
  `;switch(ie){case"spacious":return{container:Ze,filterContainer:Ct};case"tight":return{container:rt,filterContainer:_t}}}const Ke=({panel:te,dashboard:ie})=>{const Ze=_t=>{_t.preventDefault(),ie.removePanel(te)},rt=_t=>{const{gridPos:dn}=te,Mn={..._t.model,gridPos:dn,libraryPanel:_t};ie.addPanel(Mn),ie.removePanel(te)},Ct=(0,g.wW)(ht);return r.createElement("div",{className:Ct.wrapper},r.createElement("div",{className:(0,x.cx)("panel-container",Ct.callToAction)},r.createElement("div",{className:(0,x.cx)(Ct.headerRow,"grid-drag-handle")},r.createElement("span",null,r.createElement(v.cC,{i18nKey:"library-panel.add-widget.title"},"Add panel from panel library")),r.createElement("div",{className:"flex-grow-1"}),r.createElement(p.h,{"aria-label":"Close 'Add Panel' widget",name:"times",onClick:Ze,tooltip:"Close widget"})),r.createElement(st,{onClick:rt,variant:dt.Tight,showPanelFilter:!0})))},ht=te=>{const ie=(0,x.keyframes)({"0%":{boxShadow:`0 0 0 2px ${te.colors.background.canvas}, 0 0 0px 4px ${te.colors.primary.main}`},"50%":{boxShadow:`0 0 0 2px ${te.components.dashboard.background}, 0 0 0px 4px ${(0,b.Z)(te.colors.primary.main).darken(20).toHexString()}`},"100%":{boxShadow:`0 0 0 2px ${te.components.dashboard.background}, 0 0 0px 4px  ${te.colors.primary.main}`}});return{wrapper:(0,x.css)({height:"100%",paddingTop:`${te.spacing(.5)}`}),headerRow:(0,x.css)({display:"flex",alignItems:"center",height:"38px",flexShrink:0,width:"100%",fontSize:te.typography.fontSize,fontWeight:te.typography.fontWeightMedium,paddingLeft:`${te.spacing(1)}`,transition:"background-color 0.1s ease-in-out",cursor:"move","&:hover":{background:`${te.colors.background.secondary}`}}),callToAction:(0,x.css)({overflow:"hidden",outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:"0 0 0 2px black, 0 0 0px 4px #1f60c4",animation:`${ie} 2s ease infinite`})}};var xt=e(86832),lt=e(13601),Rt=e(72639),Ut=e(18330),Xt=e(23062),$n=e(795);const Mt=()=>{const te=(0,xt.chain)(U.default.panels).filter({hideFromList:!1}).map(rt=>rt).value(),ie=[],Ze=Xt.Z.get(u.zF);if(Ze){const rt=JSON.parse(Ze),Ct=(0,xt.find)(te,{id:rt.type});if(Ct){const _t=(0,xt.cloneDeep)(Ct);_t.name=rt.title,_t.sort=-1,_t.defaults=rt,ie.push(_t)}}return(0,xt.sortBy)(ie,"sort")},yt=({panel:te,dashboard:ie})=>{const[Ze,rt]=(0,r.useState)(!1),Ct=pa=>{pa.preventDefault(),ie.removePanel(te)},_t=()=>{rt(!1)},dn=()=>{const{gridPos:pa}=te,ns={type:"timeseries",title:"Panel Title",datasource:te.datasource,gridPos:{x:pa.x,y:pa.y,w:pa.w,h:pa.h},isNew:!0};ie.addPanel(ns),ie.removePanel(te),lt.E1.partial({editPanel:ns.id})},Mn=pa=>{const{gridPos:ns}=te,gs={type:pa.id,title:"Panel Title",gridPos:{x:ns.x,y:ns.y,w:pa.defaults.gridPos.w,h:pa.defaults.gridPos.h}};pa.defaults&&((0,xt.defaults)(gs,pa.defaults),gs.title=pa.defaults.title,Xt.Z.delete(u.zF)),ie.addPanel(gs),ie.removePanel(te)},Zn=pa=>{const{gridPos:ns}=te,gs={...pa.model,gridPos:ns,libraryPanel:pa};ie.addPanel(gs),ie.removePanel(te)},ca=()=>{const pa={type:"row",title:"Row title",gridPos:{x:0,y:0}};ie.addPanel(pa),ie.removePanel(te)},ba=(0,g.wW)(gn),fa=(0,r.useMemo)(()=>Mt(),[]);return r.createElement("div",{className:ba.wrapper},r.createElement("div",{className:(0,x.cx)("panel-container",ba.callToAction)},r.createElement(tn,{onCancel:Ct,onBack:Ze?_t:void 0,styles:ba},Ze?"Add panel from panel library":"Add panel"),Ze?r.createElement(st,{onClick:Zn,variant:dt.Tight,showPanelFilter:!0}):r.createElement("div",{className:ba.actionsWrapper},r.createElement(Ut.x,{icon:"file-blank","aria-label":le.wl.pages.AddDashboard.addNewPanel,onClick:()=>{(0,Rt.ff)("Create new panel"),dn()}},"Add a new panel"),r.createElement(Ut.x,{icon:"wrap-text","aria-label":le.wl.pages.AddDashboard.addNewRow,onClick:()=>{(0,Rt.ff)("Create new row"),ca()}},"Add a new row"),r.createElement(Ut.x,{icon:"book-open","aria-label":le.wl.pages.AddDashboard.addNewPanelLibrary,onClick:()=>{(0,Rt.ff)("Add a panel from the panel library"),rt(!0)}},"Add a panel from the panel library"),fa.length===1&&r.createElement(Ut.x,{icon:"clipboard-alt","aria-label":le.wl.pages.AddDashboard.addNewPanelLibrary,onClick:()=>{(0,Rt.ff)("Paste panel from clipboard"),Mn(fa[0])}},"Paste panel from clipboard"))))},At={addPanel:$n.tq},Ht=(0,a.connect)(void 0,At)(yt),tn=({children:te,onBack:ie,onCancel:Ze,styles:rt})=>r.createElement("div",{className:(0,x.cx)(rt.headerRow,"grid-drag-handle")},ie&&r.createElement("div",{className:rt.backButton},r.createElement(p.h,{name:"arrow-left",onClick:ie,size:"xl",tooltip:"Go back"})),!ie&&r.createElement("div",{className:rt.backButton},r.createElement(O.J,{name:"panel-add",size:"xl"})),te&&r.createElement("span",null,te),r.createElement("div",{className:"flex-grow-1"}),r.createElement(p.h,{"aria-label":"Close 'Add Panel' widget",name:"times",onClick:Ze,tooltip:"Close widget"})),gn=te=>{const ie=(0,x.keyframes)`
    0% {box-shadow: 0 0 0 2px ${te.colors.background.canvas}, 0 0 0px 4px ${te.colors.primary.main};}
    50% {box-shadow: 0 0 0 2px ${te.components.dashboard.background}, 0 0 0px 4px ${(0,b.Z)(te.colors.primary.main).darken(20).toHexString()};}
    100% {box-shadow: 0 0 0 2px ${te.components.dashboard.background}, 0 0 0px 4px  ${te.colors.primary.main};}
  `;return{wrapper:(0,x.css)`
      height: 100%;
      padding-top: ${te.spacing(.5)};
    `,callToAction:(0,x.css)`
      overflow: hidden;
      outline: 2px dotted transparent;
      outline-offset: 2px;
      box-shadow:
        0 0 0 2px black,
        0 0 0px 4px #1f60c4;
      animation: ${ie} 2s ease infinite;
    `,actionsWrapper:(0,x.css)`
      height: 100%;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      column-gap: ${te.spacing(1)};
      row-gap: ${te.spacing(1)};
      padding: ${te.spacing(0,1,1,1)};

      // This is to make the last action full width (if by itself)
      & > div:nth-child(2n-1):nth-last-of-type(1) {
        grid-column: span 2;
      }
    `,headerRow:(0,x.css)`
      display: flex;
      align-items: center;
      height: 38px;
      flex-shrink: 0;
      width: 100%;
      font-size: ${te.typography.fontSize};
      font-weight: ${te.typography.fontWeightMedium};
      padding-left: ${te.spacing(1)};
      transition: background-color 0.1s ease-in-out;
      cursor: move;

      &:hover {
        background: ${te.colors.background.secondary};
      }
    `,backButton:(0,x.css)`
      display: flex;
      align-items: center;
      cursor: pointer;
      padding-left: ${te.spacing(.5)};
      width: ${te.spacing(4)};
    `,noMargin:(0,x.css)`
      margin: 0;
    `}};var mn=e(77014),Tn=e(79059),ln=e(66729),Wn=e(28833),On=e(41183),Nn=e(39106),ia=e(64084),da=e(85830),Da=e(96227),ja=e(38637),Na=e(33155),Ha=e(45882);const gt=({repeat:te,onChange:ie,id:Ze})=>{const rt=(0,w.useSelector)(dn=>(0,Ha.gt)((0,Ha.S_)(dn),dn)),Ct=(0,r.useMemo)(()=>{const dn=rt.map(Mn=>({label:Mn.name,value:Mn.name}));return dn.length===0&&dn.unshift({label:"No template variables found",value:null}),dn.unshift({label:"Disable repeating",value:null}),dn},[rt]),_t=(0,r.useCallback)(dn=>ie(dn.value),[ie]);return r.createElement(A.Ph,{inputId:Ze,value:te,onChange:_t,options:Ct})},Ft=({repeat:te,title:ie,warning:Ze,onUpdate:rt,onCancel:Ct})=>{const[_t,dn]=(0,r.useState)(te),Mn=(0,r.useCallback)(Zn=>dn(Zn),[dn]);return r.createElement(da.l,{defaultValues:{title:ie},onSubmit:Zn=>{rt(Zn.title,_t)}},({register:Zn})=>r.createElement(r.Fragment,null,r.createElement(Da.g,{label:"Title"},r.createElement(ja.I,{...Zn("title"),type:"text"})),r.createElement(Da.g,{label:"Repeat for"},r.createElement(gt,{repeat:_t,onChange:Mn})),Ze&&r.createElement(Na.b,{"data-testid":le.wl.pages.Dashboard.Rows.Repeated.ConfigSection.warningMessage,severity:"warning",title:"",topSpacing:3,bottomSpacing:0},Ze),r.createElement(Me.u.ButtonRow,null,r.createElement(I.zx,{type:"button",variant:"secondary",onClick:Ct,fill:"outline"},"Cancel"),r.createElement(I.zx,{type:"submit"},"Update"))))},jt=({repeat:te,title:ie,onDismiss:Ze,onUpdate:rt,warning:Ct})=>{const _t=an();return r.createElement(Me.u,{isOpen:!0,title:"Row options",icon:"copy",onDismiss:Ze,className:_t.modal},r.createElement(Ft,{repeat:te,title:ie,onCancel:Ze,onUpdate:rt,warning:Ct}))},an=(0,ia.B)(()=>({modal:(0,x.css)`
      label: RowOptionsModal;
      width: 500px;
    `})),cn=({repeat:te,title:ie,onUpdate:Ze,warning:rt})=>{const Ct=_t=>(dn,Mn)=>{Ze(dn,Mn),_t()};return r.createElement(Nn.JY,null,({showModal:_t,hideModal:dn})=>r.createElement("button",{type:"button",className:"pointer","aria-label":"Row options",onClick:()=>{_t(jt,{title:ie,repeat:te,onDismiss:dn,onUpdate:Ct(dn),warning:rt})}},r.createElement(O.J,{name:"cog"})))};cn.displayName="RowOptionsButton";class hn extends r.Component{constructor(){super(...arguments),this.onVariableUpdated=()=>{this.forceUpdate()},this.onToggle=()=>{this.props.dashboard.toggleRow(this.props.panel)},this.getWarning=()=>{if((this.props.panel.panels?.length?this.props.panel.panels:this.props.dashboard.getRowPanels((0,xt.indexOf)(this.props.dashboard.panels,this.props.panel))).some(rt=>rt.datasource?.uid===On.o))return r.createElement("div",null,r.createElement("p",null,"Panels in this row use the ",On.o," data source. These panels will reference the panel in the original row, not the ones in the repeated rows."),r.createElement(ln.h,{external:!0,href:"https://grafana.com/docs/grafana/next/dashboards/build-dashboards/create-dashboard/#configure-repeating-rows"},"Learn more"))},this.onUpdate=(ie,Ze)=>{this.props.panel.setProperty("title",ie),this.props.panel.setProperty("repeat",Ze??void 0),this.props.panel.render(),this.props.dashboard.processRepeats(),this.forceUpdate()},this.onDelete=()=>{Wn.Z.publish(new C.VJ({title:"Delete row",text:"Are you sure you want to remove this row and all its panels?",altActionText:"Delete row only",icon:"trash-alt",onConfirm:()=>{this.props.dashboard.removeRow(this.props.panel,!0)},onAltAction:()=>{this.props.dashboard.removeRow(this.props.panel,!1)}}))}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(mn.U5,this.onVariableUpdated)}componentWillUnmount(){this.sub&&this.sub.unsubscribe()}render(){const ie=y()({"dashboard-row":!0,"dashboard-row--collapsed":this.props.panel.collapsed}),Ze=(0,Tn.J)().replace(this.props.panel.title,this.props.panel.scopedVars,"text"),rt=this.props.panel.panels?this.props.panel.panels.length:0,Ct=rt===1?"panel":"panels",_t=this.props.dashboard.meta.canEdit===!0;return r.createElement("div",{className:ie,"data-testid":"dashboard-row-container"},r.createElement("button",{className:"dashboard-row__title pointer",type:"button","data-testid":le.wl.components.DashboardRow.title(Ze),onClick:this.onToggle},r.createElement(O.J,{name:this.props.panel.collapsed?"angle-right":"angle-down"}),Ze,r.createElement("span",{className:"dashboard-row__panel_count"},"(",rt," ",Ct,")")),_t&&r.createElement("div",{className:"dashboard-row__actions"},r.createElement(cn,{title:this.props.panel.title,repeat:this.props.panel.repeat,onUpdate:this.onUpdate,warning:this.getWarning()}),r.createElement("button",{type:"button",className:"pointer",onClick:this.onDelete,"aria-label":"Delete row"},r.createElement(O.J,{name:"trash-alt"}))),this.props.panel.collapsed===!0&&r.createElement("div",{className:"dashboard-row__toggle-target",onClick:this.onToggle},"\xA0"),_t&&r.createElement("div",{"data-testid":"dashboard-row-drag",className:"dashboard-row__drag grid-drag-handle"}))}}var rn=e(98632),un=e(7894);const nt=r.forwardRef(({gap:te=1,alignItems:ie,justifyContent:Ze,direction:rt,wrap:Ct,children:_t},dn)=>{const Mn=(0,g.wW)(Be,te,ie,Ze,rt,Ct);return r.createElement("div",{ref:dn,className:Mn.flex},_t)});nt.displayName="Flex";const Be=(te,ie,Ze,rt,Ct,_t)=>({flex:(0,x.css)([{display:"flex"},(0,un.U)(te,Ct,dn=>({flexDirection:dn})),(0,un.U)(te,_t,dn=>({flexWrap:dn})),(0,un.U)(te,Ze,dn=>({alignItems:dn})),(0,un.U)(te,rt,dn=>({justifyContent:dn})),(0,un.U)(te,ie,dn=>({gap:te.spacing(dn)}))])});var et=e(71974),kt=e(65406);function nn(te,ie){const Ze={type:"timeseries",title:"Panel Title",gridPos:(0,kt.lg)(te),datasource:ie?{uid:ie}:null,isNew:!0};return te.addPanel(Ze),Ze.id}function Pn(te,ie){const Ze={type:ie,title:"Widget title",gridPos:calculateNewPanelGridPos(te),datasource:null,isNew:!0};return te.addPanel(Ze),Ze.id}function pn(te){const ie={type:"row",title:"Row title",gridPos:{x:0,y:0}};te.addPanel(ie)}function In(){lt.E1.push("/dashboard/import")}function Qn(te){const ie={type:"add-library-panel",gridPos:(0,kt.lg)(te)};te.addPanel(ie)}function Fn(te,ie){if(!ie)return;const Ze=calculateNewPanelGridPos(te),rt={type:ie.id,title:"Panel Title",gridPos:{x:Ze.x,y:Ze.y,w:ie.defaults.gridPos.w,h:ie.defaults.gridPos.h}};ie.defaults&&(defaults(rt,ie.defaults),rt.title=ie.defaults.title,store.delete(LS_PANEL_COPY_KEY)),te.addPanel(rt)}function Ea(){const te=chain(config.panels).filter({hideFromList:!1}).map(Ze=>Ze).value(),ie=store.get(LS_PANEL_COPY_KEY);if(ie){const Ze=JSON.parse(ie),rt=find(te,{id:Ze.type});if(rt){const Ct=cloneDeep(rt);return Ct.name=Ze.title,Ct.sort=-1,{...Ct,defaults:{...Ze}}}}}const ut="grafana.dashboards.panelEdit.lastUsedDatasource";function vt(te){if(store.exists(ut)){const ie=store.getObject(ut);if(ie?.dashboardUid===te)return ie}}function Et(te){if(!store.exists(ut))return;const Ze=store.getObject(ut)?.datasourceUid??"";Gt(te,Ze)}function It(te){store.setObject(ut,{dashboardUid:te,datasourceUid:""})}function en(te,ie){const Ze=vt(te);if(!Ze)Gt(te,ie);else{const rt=Ze?.dashboardUid??"";Gt(rt,ie)}}function Gt(te,ie){store.setObject(ut,{dashboardUid:te,datasourceUid:ie})}const jn=({dashboard:te,canCreate:ie})=>{const Ze=(0,g.wW)(zn),rt=(0,w.useDispatch)(),Ct=(0,w.useSelector)(_t=>_t.dashboard.initialDatasource);return r.createElement(nt,{alignItems:"center",justifyContent:"center"},r.createElement("div",{className:Ze.wrapper},r.createElement(nt,{alignItems:"stretch",justifyContent:"center",gap:4,direction:"column"},r.createElement(et.x,{borderColor:"strong",borderStyle:"dashed",padding:4},r.createElement(nt,{direction:"column",alignItems:"center",gap:2},r.createElement(rn.x,{element:"h1",textAlignment:"center",weight:"medium"},r.createElement(v.cC,{i18nKey:"dashboard.empty.add-visualization-header"},"Start your new dashboard by adding a visualization")),r.createElement(et.x,{marginBottom:2,paddingX:4},r.createElement(rn.x,{element:"p",textAlignment:"center",color:"secondary"},r.createElement(v.cC,{i18nKey:"dashboard.empty.add-visualization-body"},"Select a data source and then query and visualize your data with charts, stats and tables or create lists, markdowns and other widgets."))),r.createElement(I.zx,{size:"lg",icon:"plus","data-testid":le.wl.pages.AddDashboard.itemButton("Create new panel button"),onClick:()=>{const _t=nn(te,Ct);(0,Rt.ff)("dashboards_emptydashboard_clicked",{item:"add_visualization"}),lt.E1.partial({editPanel:_t,firstPanel:!0}),rt((0,$n.Rd)(void 0))},disabled:!ie},r.createElement(v.cC,{i18nKey:"dashboard.empty.add-visualization-button"},"Add visualization")))),r.createElement(nt,{direction:{xs:"column",md:"row"},wrap:"wrap",gap:4},m.config.featureToggles.vizAndWidgetSplit&&r.createElement(et.x,{borderColor:"strong",borderStyle:"dashed",padding:3,grow:1},r.createElement(nt,{direction:"column",alignItems:"center",gap:1},r.createElement(rn.x,{element:"h3",textAlignment:"center",weight:"medium"},r.createElement(v.cC,{i18nKey:"dashboard.empty.add-widget-header"},"Add a widget")),r.createElement(et.x,{marginBottom:2},r.createElement(rn.x,{element:"p",textAlignment:"center",color:"secondary"},r.createElement(v.cC,{i18nKey:"dashboard.empty.add-widget-body"},"Create lists, markdowns and other widgets"))),r.createElement(I.zx,{icon:"plus",fill:"outline","data-testid":le.wl.pages.AddDashboard.itemButton("Create new widget button"),onClick:()=>{(0,Rt.ff)("dashboards_emptydashboard_clicked",{item:"add_widget"}),lt.E1.partial({addWidget:!0})},disabled:!ie},r.createElement(v.cC,{i18nKey:"dashboard.empty.add-widget-button"},"Add widget")))),r.createElement(et.x,{borderColor:"strong",borderStyle:"dashed",padding:3,grow:1},r.createElement(nt,{direction:"column",alignItems:"center",gap:1},r.createElement(rn.x,{element:"h3",textAlignment:"center",weight:"medium"},r.createElement(v.cC,{i18nKey:"dashboard.empty.add-library-panel-header"},"Import panel")),r.createElement(et.x,{marginBottom:2},r.createElement(rn.x,{element:"p",textAlignment:"center",color:"secondary"},r.createElement(v.cC,{i18nKey:"dashboard.empty.add-library-panel-body"},"Add visualizations that are shared with other dashboards."))),r.createElement(I.zx,{icon:"plus",fill:"outline","data-testid":le.wl.pages.AddDashboard.itemButton("Add a panel from the panel library button"),onClick:()=>{(0,Rt.ff)("dashboards_emptydashboard_clicked",{item:"import_from_library"}),Qn(te)},disabled:!ie},r.createElement(v.cC,{i18nKey:"dashboard.empty.add-library-panel-button"},"Add library panel")))),r.createElement(et.x,{borderColor:"strong",borderStyle:"dashed",padding:3,grow:1},r.createElement(nt,{direction:"column",alignItems:"center",gap:1},r.createElement(rn.x,{element:"h3",textAlignment:"center",weight:"medium"},r.createElement(v.cC,{i18nKey:"dashboard.empty.import-a-dashboard-header"},"Import a dashboard")),r.createElement(et.x,{marginBottom:2},r.createElement(rn.x,{element:"p",textAlignment:"center",color:"secondary"},r.createElement(v.cC,{i18nKey:"dashboard.empty.import-a-dashboard-body"},"Import dashboards from files or",r.createElement("a",{href:"https://grafana.com/grafana/dashboards/"},"grafana.com"),"."))),r.createElement(I.zx,{icon:"upload",fill:"outline","data-testid":le.wl.pages.AddDashboard.itemButton("Import dashboard button"),onClick:()=>{(0,Rt.ff)("dashboards_emptydashboard_clicked",{item:"import_dashboard"}),In()},disabled:!ie},r.createElement(v.cC,{i18nKey:"dashboard.empty.import-dashboard-button"},"Import dashboard"))))))))};function zn(te){return{wrapper:(0,x.css)({label:"dashboard-empty-wrapper",flexDirection:"column",maxWidth:"890px",gap:te.spacing.gridSize*4,paddingTop:te.spacing(2),[te.breakpoints.up("sm")]:{paddingTop:te.spacing(12)}})}}var qn=e(51201),Ia=e(33567),va=e(45580);function aa({children:te,width:ie,height:Ze,onLoad:rt,onChange:Ct}){const _t=(0,r.useId)(),[dn,Mn]=(0,r.useState)(!1),[Zn,ca]=(0,r.useState)(!1),ba=(0,r.useRef)(null);return(0,va.Z)(()=>{aa.addCallback(_t,pa=>{!dn&&pa.isIntersecting&&(Mn(!0),console.log("---- Lazy onPanelLoad"),rt?.()),ca(pa.isIntersecting),Ct?.(pa.isIntersecting)});const fa=ba.current;return fa&&aa.observer.observe(fa),()=>{delete aa.callbacks[_t],fa&&aa.observer.unobserve(fa),Object.keys(aa.callbacks).length===0&&aa.observer.disconnect()}}),r.createElement("div",{id:_t,ref:ba,style:{width:ie,height:Ze}},dn&&(typeof te=="function"?te({isInView:Zn}):te))}const ta={};aa.callbacks=ta,aa.addCallback=(te,ie)=>aa.callbacks[te]=ie,aa.observer=new IntersectionObserver(te=>{for(const ie of te)aa.callbacks[ie.target.id]&&aa.callbacks[ie.target.id](ie)},{rootMargin:"100px"});var ha=e(54554),ma=e(52275),_a=e(63801);function Qa(te,ie){return te.panels[ie.key]}var Xa=e(6278),ts=e(52807),ga=(te=>(te.Data="data",te.Meta="meta",te.Error="error",te.Stats="stats",te.JSON="json",te.Query="query",te.Help="help",te))(ga||{}),es=e(39617),bs=e(2106),vs=e(41560),Za=e(69865),cs=e(56064),ds=e(13767),gr=e(58047),Vs=e(3839);function Xs({panelLinks:te,onShowPanelLinks:ie}){const Ze=(0,g.wW)(rr),rt=()=>{const Ct=ie();return r.createElement(ds.v,null,Ct?.map((_t,dn)=>r.createElement(ds.v.Item,{key:dn,label:_t.title,url:_t.href,target:_t.target,onClick:_t.onClick})))};if(te.length===1){const Ct=ie()[0];return r.createElement(_a.fm.TitleItem,{href:Ct.href,onClick:Ct.onClick,target:Ct.target,title:Ct.title},r.createElement(O.J,{name:"external-link-alt",size:"md"}))}else return r.createElement(gr.L,{overlay:rt},r.createElement(Vs.h,{icon:"external-link-alt",iconSize:"md","aria-label":"panel links",className:Ze.menuTrigger}))}const rr=te=>({menuTrigger:(0,x.css)({height:"100%",background:"inherit",border:"none",borderRadius:`${te.shape.radius.default}`,cursor:"context-menu"})});var qs=e(53039);const or=({notice:te,onClick:ie})=>{const Ze=(0,g.wW)(oa),rt=te.severity==="error"||te.severity==="warning"?"exclamation-triangle":"file-landscape-alt";return te.inspect&&ie?r.createElement(Vs.h,{className:Ze.notice,icon:rt,iconSize:"md",key:te.severity,tooltip:te.text,onClick:Ct=>ie(Ct,te.inspect)}):te.link?r.createElement("a",{className:Ze.notice,"aria-label":te.text,href:te.link,target:"_blank",rel:"noreferrer"},r.createElement(O.J,{name:rt,style:{marginRight:"8px"},size:"md"})):r.createElement(Za.u,{key:te.severity,content:te.text},r.createElement("span",{className:Ze.iconTooltip},r.createElement(O.J,{name:rt,size:"md"})))},oa=te=>({notice:(0,x.css)({background:"inherit",border:"none",borderRadius:te.shape.radius.default}),iconTooltip:(0,x.css)({color:`${te.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${te.shape.radius.default}`,padding:`${te.spacing(0,1)}`,height:` ${te.spacing(te.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,qs.getFocusStyles)(te),zIndex:1},"&: focus:not(:focus-visible)":(0,qs.getMouseFocusStyles)(te),"&:hover ":{boxShadow:`${te.shadows.z1}`,color:`${te.colors.text.primary}`,background:`${te.colors.background.secondary}`}})}),Ra=({frames:te,panelId:ie})=>{const Ze=(0,r.useCallback)((Ct,_t)=>{Ct.stopPropagation(),lt.E1.partial({inspect:ie,inspectTab:_t})},[ie]),rt={};for(const Ct of te)if(!(!Ct.meta||!Ct.meta.notices))for(const _t of Ct.meta.notices)rt[_t.severity]=_t;return r.createElement(r.Fragment,null,Object.values(rt).map(Ct=>r.createElement(or,{notice:Ct,onClick:Ze,key:Ct.severity})))};function $t(te){const{alertState:ie,data:Ze,panelId:rt,onShowPanelLinks:Ct,panelLinks:_t,angularNotice:dn}=te,Mn=(0,g.wW)(Ks),Zn=r.createElement(Za.u,{content:ie??"unknown"},r.createElement(_a.fm.TitleItem,{className:(0,x.cx)({[Mn.ok]:ie===vs.Z.OK,[Mn.pending]:ie===vs.Z.Pending,[Mn.alerting]:ie===vs.Z.Alerting})},r.createElement(O.J,{name:ie==="alerting"?"heart-break":"heart",className:"panel-alert-icon",size:"md"}))),ca=r.createElement(r.Fragment,null,Ze.request&&Ze.request.timeInfo&&r.createElement(Za.u,{content:r.createElement(cs.IF,{timeRange:Ze.request?.range,timeZone:Ze.request?.timezone})},r.createElement(_a.fm.TitleItem,{className:Mn.timeshift},r.createElement(O.J,{name:"clock-nine",size:"md"})," ",Ze.request?.timeInfo))),ba=`This ${Ya(dn)} requires Angular (deprecated).`,fa=r.createElement(Za.u,{content:ba},r.createElement(_a.fm.TitleItem,{className:Mn.angularNotice,"data-testid":"angular-deprecation-icon"},r.createElement(O.J,{name:"exclamation-triangle",size:"md"})));return r.createElement(r.Fragment,null,_t&&_t.length>0&&Ct&&r.createElement(Xs,{onShowPanelLinks:Ct,panelLinks:_t}),r.createElement(Ra,{panelId:rt,frames:Ze.series}),ca,ie&&Zn,dn?.show&&fa)}const Ya=te=>te?.isAngularPanel?"panel":te?.isAngularDatasource?"data source":"panel or data source",Ks=te=>({ok:(0,x.css)({color:te.colors.success.text}),pending:(0,x.css)({color:te.colors.warning.text}),alerting:(0,x.css)({color:te.colors.error.text}),timeshift:(0,x.css)({color:te.colors.text.link,gap:te.spacing(.5),whiteSpace:"nowrap","&:hover":{color:te.colors.emphasize(te.colors.text.link,.03)}}),angularNotice:(0,x.css)({color:te.colors.warning.text})});function As(te){let ie=!1;function Ze(){return te.data.request&&te.data.request.timeInfo?!1:!te.panel.hasTitle()}const rt=()=>{const Es=(0,Tn.J)().replace(te.panel.description,te.panel.scopedVars),Pa=(0,ts.a)(Es);return ie||((0,Rt.ff)("dashboards_panelheader_description_displayed"),ie=!0),Pa},Ct=()=>{const Es=(0,es.H)(te.panel);if(!Es)return[];const Pa=Es&&Es.getLinks(te.panel.replaceVariables);return Pa.map(Ss=>({...Ss,onClick:(...hs)=>{(0,Rt.ff)("dashboards_panelheader_datalink_clicked",{has_multiple_links:Pa.length>1}),Ss.onClick?.(...hs)}}))},_t=(Es,Pa)=>{Es.stopPropagation(),lt.E1.partial({inspect:te.panel.id,inspectTab:Pa})},dn=Es=>{Es.stopPropagation(),lt.E1.partial({inspect:te.panel.id,inspectTab:ga.Error}),(0,Rt.ff)("dashboards_panelheader_statusmessage_clicked")},Mn=()=>{te.panel.getQueryRunner().cancelQuery(),(0,Rt.ff)("dashboards_panelheader_cancelquery_clicked",{data_state:te.data.state})},Zn=te.plugin.noPadding?"none":"md",ca=te.data.alertState?.state,ba=te.panel.datasource?.uid?(0,bs.e)(te.panel.datasource?.uid):!1,fa=te.panel.isAngularPlugin(),pa=(m.config.featureToggles.angularDeprecationUI??!1)&&(ba||fa),gs=(te.panel.links&&te.panel.links.length>0&&Ct||te.data.series.length>0&&te.data.series.some(Es=>(Es.meta?.notices?.length??0)>0)||te.data.request&&te.data.request.timeInfo||pa||ca)&&r.createElement($t,{alertState:ca,data:te.data,panelId:te.panel.id,panelLinks:te.panel.links,angularNotice:{show:pa,isAngularDatasource:ba,isAngularPanel:fa},onShowPanelLinks:Ct}),ps=te.panel.description?rt:void 0,mr=!(te.isViewing||te.isEditing)&&(te.isDraggable??!0)?"grid-drag-handle":"",ys=te.panel.getDisplayTitle();return{hasOverlayHeader:Ze,onShowPanelDescription:rt,onShowPanelLinks:Ct,onOpenInspector:_t,onOpenErrorInspect:dn,onCancelQuery:Mn,padding:Zn,description:ps,dragClass:mr,title:ys,titleItems:gs,onOpenMenu:()=>{(0,Rt.ff)("dashboards_panelheader_menu",{item:"menu"})}}}function er({items:te}){const ie=Ze=>Ze.map(rt=>{switch(rt.type){case"divider":return r.createElement(ds.v.Divider,{key:rt.text});case"group":return r.createElement(ds.v.Group,{key:rt.text,label:rt.text},rt.subMenu?ie(rt.subMenu):void 0);default:return r.createElement(ds.v.Item,{key:rt.text,label:rt.text,icon:rt.iconClassName,childItems:rt.subMenu?ie(rt.subMenu):void 0,url:rt.href,onClick:rt.onClick,shortcut:rt.shortcut,testId:le.wl.components.Panels.Panel.menuItems(rt.text)})}});return r.createElement(ds.v,null,ie(te))}var ir=e(41175),ws=e(44076),lr=e(44951),Ls=e(33784);function Vr(te){console.warn(`[Plugin Extensions] ${te}`)}function Xr(te){return typeof te=="object"&&"type"in te&&te.type===PluginExtensionTypes.link}function Or(te){return typeof te=="object"&&"type"in te&&te.type===PluginExtensionTypes.component}function Nt(te,ie=""){return(...Ze)=>{try{return te(...Ze)}catch(rt){rt instanceof Error&&console.warn(`${ie}${rt.message}`)}}}function Jt(te){return{openModal:({title:Ze,body:rt})=>{appEvents.publish(new ShowModalReactEvent({component:Yt({title:Ze,body:rt})}))},context:te}}const Yt=({title:te,body:ie})=>({onDismiss:rt})=>React.createElement(Modal,{title:te,isOpen:!0,onDismiss:rt,onClickBackdrop:rt},React.createElement(ie,{onDismiss:rt}));function vn(te,ie=new Map){if(!te||typeof te!="object"||Object.isFrozen(te))return te;const Ze=Array.isArray(te)?[...te]:{...te};if(ie.has(te))return ie.get(te);ie.set(te,Ze);const rt=Reflect.ownKeys(Ze);for(const Ct of rt){const _t=Array.isArray(Ze)?Ze[Number(Ct)]:Ze[Ct];_t&&(typeof _t=="object"||typeof _t=="function")&&(Array.isArray(Ze)?Ze[Number(Ct)]=vn(_t,ie):Ze[Ct]=vn(_t,ie))}return Object.freeze(Ze)}function An(te,ie){const Ze=`${te}${ie.extensionPointId}${ie.title}`;return Array.from(Ze).reduce((rt,Ct)=>Math.imul(31,rt)+Ct.charCodeAt(0)|0,0).toString()}const xn=Symbol("isReadOnlyProxy");function Un(te){if(!te||typeof te!="object"||za(te))return te;const ie=new WeakMap;return new Proxy(te,{defineProperty:()=>!1,deleteProperty:()=>!1,isExtensible:()=>!1,set:()=>!1,get(Ze,rt,Ct){if(rt===xn)return!0;const _t=Reflect.get(Ze,rt,Ct);return isObject(_t)||isArray(_t)?(ie.has(_t)||ie.set(_t,Un(_t)),ie.get(_t)):_t}})}function xa(te){return typeof te=="object"&&te!==null}function za(te){return xa(te)&&te[xn]===!0}function is(te){const ie={type:PluginExtensionTypes.link,...te};return $a(ie),ie}function $a(te){if(te.type!==PluginExtensionTypes.link)throw Error("config is not a extension link")}function Ta(te,ie){return te.length<ie?te:`${te.slice(0,ie-3).trimEnd()}...`}var as=e(61704),la=e(74600),Wa=e(86561);function ss(te,ie,Ze){const rt=Pa=>{Pa.preventDefault(),lt.E1.partial({viewPanel:ie.id}),(0,Rt.ff)("dashboards_panelheader_menu",{item:"view"})},Ct=Pa=>{Pa.preventDefault(),lt.E1.partial({editPanel:ie.id}),(0,Rt.ff)("dashboards_panelheader_menu",{item:"edit"})},_t=Pa=>{Pa.preventDefault(),(0,kt.Po)(te,ie),(0,Rt.ff)("dashboards_panelheader_menu",{item:"share"})},dn=Pa=>{Pa.preventDefault(),(0,kt.Kq)(te,ie),(0,Rt.ff)("dashboards_panelheader_menu",{item:"createLibraryPanel"})},Mn=Pa=>{Pa.preventDefault(),(0,kt.oe)(ie),(0,Rt.ff)("dashboards_panelheader_menu",{item:"unlinkLibraryPanel"})},Zn=Pa=>{lt.E1.partial({inspect:ie.id,inspectTab:Pa}),(0,Rt.ff)("dashboards_panelheader_menu",{item:"inspect",tab:Pa??ga.Data})},ca=Pa=>{Pa.preventDefault()},ba=Pa=>{Pa.preventDefault(),(0,kt.jN)(te,ie),(0,Rt.ff)("dashboards_panelheader_menu",{item:"duplicate"})},fa=Pa=>{Pa.preventDefault(),(0,kt.bY)(ie),(0,Rt.ff)("dashboards_panelheader_menu",{item:"copy"})},pa=Pa=>{Pa.preventDefault(),(0,kt.WJ)(te,ie,!0),(0,Rt.ff)("dashboards_panelheader_menu",{item:"remove"})},ns=Pa=>{Pa.preventDefault();const Ss=Pa.ctrlKey||Pa.metaKey?hs=>window.open(`${U.default.appSubUrl}${hs}`):void 0;la.h.dispatch((0,Wa.m$)(ie,{timeRange:(0,Xa.$t)().timeRange(),getExploreUrl:lr.H6,openInNewWindow:Ss})),(0,Rt.ff)("dashboards_panelheader_menu",{item:"explore"})},gs=Pa=>{Pa.preventDefault(),(0,kt.qw)(ie),(0,Rt.ff)("dashboards_panelheader_menu",{item:"toggleLegend"})},ps=[];ie.isEditing||ps.push({text:(0,v.t)("panel.header-menu.view","View"),iconClassName:"eye",onClick:rt,shortcut:"v"}),te.canEditPanel(ie)&&!ie.isEditing&&ps.push({text:(0,v.t)("panel.header-menu.edit","Edit"),iconClassName:"edit",onClick:Ct,shortcut:"e"}),ps.push({text:(0,v.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",onClick:_t,shortcut:"p s"}),h.Vt.hasAccessToExplore()&&!(ie.plugin&&ie.plugin.meta.skipDataQuery)&&ie.datasource?.uid!==as.oe&&ps.push({text:(0,v.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",onClick:ns,shortcut:"p x"});const mr=[];ie.plugin&&!ie.plugin.meta.skipDataQuery&&(mr.push({text:(0,v.t)("panel.header-menu.inspect-data","Data"),onClick:Pa=>Zn(ga.Data)}),te.meta.canEdit&&mr.push({text:(0,v.t)("panel.header-menu.query","Query"),onClick:Pa=>Zn(ga.Query)})),mr.push({text:(0,v.t)("panel.header-menu.inspect-json","Panel JSON"),onClick:Pa=>Zn(ga.JSON)}),ps.push({type:"submenu",text:(0,v.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",onClick:Pa=>{const Ss=Pa.currentTarget,hs=Pa.target;(hs===Ss||hs instanceof HTMLElement&&hs.closest('[role="menuitem"]')===Ss)&&Zn()},shortcut:"i",subMenu:mr});const ys=[],fr=te.canEditPanel(ie);if(ie.isViewing||ie.isEditing||(fr?(ys.push({text:(0,v.t)("panel.header-menu.duplicate","Duplicate"),onClick:ba,shortcut:"p d"}),ys.push({text:(0,v.t)("panel.header-menu.copy","Copy"),onClick:fa}),(0,Ls.V)(ie)?ys.push({text:(0,v.t)("panel.header-menu.unlink-library-panel","Unlink library panel"),onClick:Mn}):ys.push({text:(0,v.t)("panel.header-menu.create-library-panel","Create library panel"),onClick:dn})):h.Vt.isEditor&&ys.push({text:(0,v.t)("panel.header-menu.copy","Copy"),onClick:fa})),Ze){const Pa=Ze.getScope(),Ss=Pa.$$childHead.ctrl,hs=Ss.getExtendedMenu();for(const Hs of hs){const Jl={text:Hs.text,href:Hs.href,shortcut:Hs.shortcut};Hs.click&&(Jl.onClick=()=>{Pa.$eval(Hs.click,{ctrl:Ss})}),ys.push(Jl)}}ie.options.legend&&ys.push({text:ie.options.legend.showLegend?(0,v.t)("panel.header-menu.hide-legend","Hide legend"):(0,v.t)("panel.header-menu.show-legend","Show legend"),onClick:gs,shortcut:"p l"}),ie.isEditing&&(ys.length=0),fr&&ie.plugin&&!ie.plugin.meta.skipDataQuery&&ys.push({text:(0,v.t)("panel.header-menu.get-help","Get help"),onClick:Pa=>Zn(ga.Help)});const{extensions:Es}=(0,ws.dj)({extensionPointId:ir.y.DashboardPanelMenu,context:Ps(ie,te),limitPerPlugin:3});return Es.length>0&&!ie.isEditing&&ps.push({text:"Extensions",iconClassName:"plug",type:"submenu",subMenu:tr(Es)}),ys.length&&ps.push({type:"submenu",text:(0,v.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:ys,onClick:ca}),te.canEditPanel(ie)&&!ie.isEditing&&!ie.isViewing&&(ps.push({type:"divider",text:""}),ps.push({text:(0,v.t)("panel.header-menu.remove","Remove"),iconClassName:"trash-alt",onClick:pa,shortcut:"p r"})),ps}function Ps(te,ie){return{id:te.id,pluginId:te.type,title:te.title,timeRange:ie.time,timeZone:ie.timezone,dashboard:{uid:ie.uid,title:ie.title,tags:Array.from(ie.tags)},targets:te.targets,scopedVars:te.scopedVars,data:te.getQueryRunner().getLastResult()}}function tr(te){const ie={},Ze=[];for(const Ct of te){const _t=Ct.category;if(!_t){Ze.push({text:Ta(Ct.title,25),href:Ct.path,onClick:Ct.onClick});continue}Array.isArray(ie[_t])||(ie[_t]=[]),ie[_t].push({text:Ta(Ct.title,25),href:Ct.path,onClick:Ct.onClick})}const rt=Object.keys(ie).reduce((Ct,_t)=>(Ct.push({text:Ta(_t,25),type:"group",subMenu:ie[_t]}),Ct),[]);return Ze.length>0&&(rt.length>0&&rt.push({text:"divider",type:"divider"}),Array.prototype.push.apply(rt,Ze)),rt}function Bs({panel:te,dashboard:ie,loadingState:Ze,children:rt}){const[Ct,_t]=(0,r.useState)([]),dn=(0,w.useSelector)(Mn=>Qa(Mn,te)?.angularComponent);return(0,r.useEffect)(()=>{_t(ss(ie,te,dn))},[ie,te,dn,Ze,_t]),rt({items:Ct})}function Ms({style:te,panel:ie,dashboard:Ze,loadingState:rt}){return r.createElement(Bs,{panel:ie,dashboard:Ze,loadingState:rt},({items:Ct})=>r.createElement(er,{style:te,items:Ct}))}class Rr extends r.PureComponent{constructor(ie){super(ie),this.element=null,this.timeSrv=(0,Xa.$t)(),this.subs=new f.w0,this.state={data:{state:de.Gu.NotStarted,series:[],timeRange:(0,ha.JK)()}}}componentDidMount(){const{panel:ie}=this.props;this.loadAngularPanel();const Ze=ie.getQueryRunner();this.subs.add(Ze.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:rt=>this.onPanelDataUpdate(rt)}))}onPanelDataUpdate(ie){let Ze;if(ie.state===de.Gu.Error){const{error:rt}=ie;rt&&Ze!==rt.message&&(Ze=rt.message)}this.setState({data:ie,errorMessage:Ze})}componentWillUnmount(){this.subs.unsubscribe(),this.props.angularComponent&&this.props.angularComponent?.destroy()}componentDidUpdate(ie,Ze){const{plugin:rt,height:Ct,width:_t,panel:dn}=this.props;ie.plugin!==rt&&this.loadAngularPanel(),(ie.width!==_t||ie.height!==Ct)&&this.scopeProps&&(this.scopeProps.size.height=this.getInnerPanelHeight(),this.scopeProps.size.width=this.getInnerPanelWidth(),dn.render())}getInnerPanelHeight(){const{plugin:ie,height:Ze}=this.props,{theme:rt}=U.default,Ct=this.hasOverlayHeader()?0:rt.panelHeaderHeight,_t=ie.noPadding?0:rt.panelPadding;return Ze-Ct-_t*2-u.QO}getInnerPanelWidth(){const{plugin:ie,width:Ze}=this.props,{theme:rt}=U.default,Ct=ie.noPadding?0:rt.panelPadding;return Ze-Ct*2-u.QO}loadAngularPanel(){const{panel:ie,dashboard:Ze,setPanelAngularComponent:rt}=this.props;if(!this.element)return;const Ct=(0,ma.w)(),_t='<plugin-component type="panel" class="panel-height-helper"></plugin-component>';this.scopeProps={panel:ie,dashboard:Ze,size:{width:this.getInnerPanelWidth(),height:this.getInnerPanelHeight()}},rt({key:ie.key,angularComponent:Ct.load(this.element,this.scopeProps,_t)})}hasOverlayHeader(){const{panel:ie}=this.props,{data:Ze}=this.state;return Ze.request&&Ze.request.timeInfo?!1:!ie.hasTitle()}render(){const{dashboard:ie,panel:Ze}=this.props,{errorMessage:rt,data:Ct}=this.state,{transparent:_t}=Ze,dn=As({...this.props,data:Ct}),Mn=(Ze.gridPos?.y??0)===0?-16:void 0,Zn=r.createElement("div",{"data-testid":"panel-dropdown"},r.createElement(Ms,{panel:Ze,dashboard:ie,loadingState:Ct.state}));return r.createElement(_a.fm,{width:this.props.width,height:this.props.height,title:dn.title,loadingState:Ct.state,statusMessage:rt,statusMessageOnClick:dn.onOpenErrorInspect,description:dn.description,titleItems:dn.titleItems,menu:this.props.hideMenu?void 0:Zn,dragClass:dn.dragClass,dragClassCancel:"grid-drag-cancel",padding:dn.padding,hoverHeaderOffset:Mn,hoverHeader:dn.hasOverlayHeader(),displayMode:_t?"transparent":"default",onCancelQuery:dn.onCancelQuery,onOpenMenu:dn.onOpenMenu},()=>r.createElement("div",{ref:ca=>this.element=ca,className:"panel-height-helper"}))}}const br=(te,ie)=>({angularComponent:Qa(te,ie.panel)?.angularComponent}),si={setPanelAngularComponent:Ia.o8},fo=(0,a.connect)(br,si)(Rr);var pr=e(40793),Ar=e(36316),xr=e(92403),Oe=e(47635),ke=e(96083),ct=e(53305),Dt=e(31276),Kt=e(41393),fn=e(2634),Bn=e(52436),Hn=e(75247),na=e(65355),sa=e(86981),Sa=e(97898);const La=(te,ie,Ze)=>{const{overrides:rt}=Ze,Ct=Ze.overrides.findIndex(ca=>ca.matcher.id===sa.mi.byName&&ca.matcher.options===te);if(Ct<0)return{...Ze,overrides:[...Ze.overrides,ks(te,ie)]};const _t=Array.from(rt),dn=_t[Ct],Mn=dn.properties.findIndex(ca=>ca.id==="color");if(Mn<0)return _t[Ct]={...dn,properties:[...dn.properties,Ns(ie)]},{...Ze,overrides:_t};const Zn=Array.from(dn.properties);return Zn[Mn]=Ns(ie),_t[Ct]={...dn,properties:Zn},{...Ze,overrides:_t}},ks=(te,ie)=>({matcher:{id:sa.mi.byName,options:te},properties:[Ns(ie)]}),Ns=te=>({id:"color",value:{mode:Sa.S.Fixed,fixedColor:te}});var js=e(7376),Lr=e(61691),Fs=e(23331),Sr=e(82909),go=e(66654),Kr=e(89591),Ko=e(69330),wr=e(47125),po=e(52343);const ko="hideSeriesFrom",ri=(0,Sr.Y4)(ko);function zs(te,ie,Ze,rt){const{overrides:Ct}=Ze,_t=te,dn=Ct.findIndex(ri);if(dn<0){if(ie===po.R.ToggleSelection){const pa=kr([_t,...ml(Ct,rt)]);return{...Ze,overrides:[...Ze.overrides,pa]}}const ba=ul(rt,_t),fa=kr(ba);return{...Ze,overrides:[...Ze.overrides,fa]}}const Mn=Array.from(Ct),[Zn]=Mn.splice(dn,1);if(ie===po.R.ToggleSelection){let ba=qr(Zn);const fa=ml(Mn,rt);if(fa.length>0&&(ba=ba.filter(ns=>fa.indexOf(ns)<0)),ba[0]===_t&&ba.length===1)return{...Ze,overrides:Mn};const pa=kr([_t,...fa]);return{...Ze,overrides:[...Mn,pa]}}const ca=bc(Zn,_t);return xc(ca,rt)?{...Ze,overrides:Mn}:{...Ze,overrides:[...Mn,ca]}}function kr(te,ie=go.Ys.exclude,Ze){return Ze=Ze??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:ko,matcher:{id:sa.mi.byNames,options:{mode:ie,names:te,prefix:ie===go.Ys.exclude?"All except:":void 0,readOnly:!0}},properties:[{...Ze,value:{viz:!0,legend:!1,tooltip:!1}}]}}const bc=(te,ie,Ze=go.Ys.exclude)=>{const rt=te.properties.find(dn=>dn.id==="custom.hideFrom"),Ct=qr(te),_t=Ct.findIndex(dn=>dn===ie);return _t<0?Ct.push(ie):Ct.splice(_t,1),kr(Ct,Ze,rt)},qr=te=>{const ie=te.matcher.options?.names;return Array.isArray(ie)?[...ie]:[]},xc=(te,ie)=>qr(te).length===ul(ie).length,ul=(te,ie)=>{const Ze=new Set;for(const rt of te)for(const Ct of rt.fields){if(Ct.type!==Kr.fS.number)continue;const _t=(0,Ko.CZ)(Ct,rt,te);_t!==ie&&Ze.add(_t)}return Array.from(Ze)},ml=(te,ie)=>{let Ze=[];for(const rt of te){const Ct=rt.properties.find(_t=>_t.id==="custom.hideFrom");if(Ct!==void 0&&Ct.value?.legend===!0){const dn=wr.Ls.get(rt.matcher.id).get(rt.matcher.options);for(const Mn of ie)for(const Zn of Mn.fields){if(Zn.type!==Kr.fS.number)continue;const ca=(0,Ko.CZ)(Zn,Mn,ie);dn(Zn,Mn,ie)&&Ze.push(ca)}}}return Ze};var Sc=e(86261),fl=e(77877);const gl=100;class pl{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new Sc.X(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const ie=Date.now();this.budget=(ie-this.lastUpdate)/gl;const Ze=this.ok.getValue(),rt=this.budget<=this.threshold;if(Ze!==rt&&this.ok.next(rt),this.lastUpdate=ie,this.isLive&&this.ok.getValue()&&this.timeRange){let Ct;for(const _t of this.listeners){if(!_t.panel.props.isInView)continue;if(ie-_t.last>=_t.intervalMs){if(!Ct){const{raw:Mn}=this.timeRange;Ct={raw:Mn,from:(0,xr.CQ)(ie-this.liveTimeOffset),to:(0,xr.CQ)(ie)}}_t.panel.liveTimeChanged(Ct),_t.last=ie}}}}}setLiveTimeRange(ie){if(this.timeRange=ie,this.isLive=ie?.raw?.to==="now",this.isLive){const Ze=fl.parse(ie.raw.from,!1)?.valueOf(),rt=fl.parse(ie.raw.to,!0)?.valueOf();this.liveTimeOffset=rt-Ze;for(const Ct of this.listeners)Ct.intervalMs=Li(this.liveTimeOffset,Ct.panel.props.width)}}listen(ie){this.listeners.push({last:this.lastUpdate,panel:ie,intervalMs:Li(6e4,ie.props.width)})}remove(ie){this.listeners=this.listeners.filter(Ze=>Ze.panel!==ie)}updateInterval(ie){if(!(!this.timeRange||!this.isLive)){for(const Ze of this.listeners)if(Ze.panel===ie){Ze.intervalMs=Li(this.liveTimeOffset,Ze.panel.props.width);return}}}}const hl=5*60*1e3;function Li(te,ie){const Ze=Math.ceil(te/ie/100)*100;return Ze>hl?hl:Ze}const zo=new pl;setInterval(zo.measure,gl);const Cc="Error in plugin";class Dc extends r.PureComponent{constructor(ie){super(ie),this.timeSrv=(0,Xa.$t)(),this.subs=new f.w0,this.eventFilter={onlyLocal:!0},this.getSync=()=>this.props.isEditing?pr.m.Off:this.props.dashboard.graphTooltip,this.onInstanceStateChange=rt=>{this.props.onInstanceStateChange(rt),this.setState({context:{...this.state.context,instanceState:rt}})},this.onUpdateData=rt=>(0,na.F)(this.props.panel,rt),this.onSeriesColorChange=(rt,Ct)=>{this.onFieldConfigChange(La(rt,Ct,this.props.panel.fieldConfig))},this.onSeriesVisibilityChange=(rt,Ct)=>{this.onFieldConfigChange(zs(rt,Ct,this.props.panel.fieldConfig,this.state.data.series))},this.onToggleLegendSort=rt=>{const Ct=this.props.panel.options.legend;if(!Ct)return;let _t=Ct.sortDesc,dn=Ct.sortBy;rt!==dn&&(_t=void 0),_t===!1?(dn=void 0,_t=void 0):(_t=!_t,dn=rt),this.onOptionsChange({...this.props.panel.options,legend:{...Ct,sortBy:dn,sortDesc:_t}})},this.onRefresh=()=>{const{dashboard:rt,panel:Ct,isInView:_t,width:dn}=this.props;if(!_t){this.setState({refreshWhenInView:!0});return}const Mn=(0,kt.W1)(Ct,this.timeSrv.timeRange());if(this.wantsQueryExecution){if(dn<0)return;this.state.refreshWhenInView&&this.setState({refreshWhenInView:!1}),Ct.runAllPanelQueries({dashboardUID:rt.uid,dashboardTimezone:rt.getTimezone(),timeData:Mn,width:dn})}else this.setState({data:{...this.state.data,timeRange:this.timeSrv.timeRange()},renderCounter:this.state.renderCounter+1,liveTime:void 0})},this.onRender=()=>{const rt={renderCounter:this.state.renderCounter+1};this.setState(rt)},this.onOptionsChange=rt=>{this.props.panel.updateOptions(rt)},this.onFieldConfigChange=rt=>{this.props.panel.updateFieldConfig(rt)},this.onPanelError=rt=>{const Ct=rt.message||Cc;this.state.errorMessage!==Ct&&this.setState({errorMessage:Ct})},this.onPanelErrorRecover=()=>{this.setState({errorMessage:void 0})},this.onAnnotationCreate=async rt=>{const Ct=rt.from!==rt.to,_t={dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:Ct,time:rt.from,timeEnd:Ct?rt.to:0,tags:rt.tags,text:rt.description};await(0,js.xD)(_t),(0,Lr.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Ar.n1(_t))},this.onAnnotationDelete=async rt=>{await(0,js.Dl)({id:rt}),(0,Lr.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Ar.n1({id:rt}))},this.onAnnotationUpdate=async rt=>{const Ct=rt.from!==rt.to,_t={id:rt.id,dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:Ct,time:rt.from,timeEnd:Ct?rt.to:0,tags:rt.tags,text:rt.description};await(0,js._E)(_t),(0,Lr.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Ar.n1(_t))},this.onChangeTimeRange=rt=>{this.timeSrv.setTime({from:(0,xr.zh)(rt.from),to:(0,xr.zh)(rt.to)})},this.onAddAdHocFilter=rt=>{const{key:Ct,value:_t,operator:dn}=rt,Mn=(0,Bn.ak)().getInstanceSettings(this.props.panel.datasource),Zn=Mn&&(0,Oe.iU)(Mn);Zn&&(0,la.WI)((0,Hn.m2)({datasource:Zn,key:Ct,operator:dn,value:_t}))};const Ze=ie.dashboard.events.newScopedBus(`panel:${ie.panel.id}`,this.eventFilter);this.state={isFirstLoad:!0,renderCounter:0,refreshWhenInView:!1,context:{eventsScope:"__global_",eventBus:Ze,app:this.getPanelContextApp(),sync:this.getSync,onSeriesColorChange:this.onSeriesColorChange,onToggleSeriesVisibility:this.onSeriesVisibilityChange,onAnnotationCreate:this.onAnnotationCreate,onAnnotationUpdate:this.onAnnotationUpdate,onAnnotationDelete:this.onAnnotationDelete,onInstanceStateChange:this.onInstanceStateChange,onToggleLegendSort:this.onToggleLegendSort,canAddAnnotations:ie.dashboard.canAddAnnotations.bind(ie.dashboard),canEditAnnotations:ie.dashboard.canEditAnnotations.bind(ie.dashboard),canDeleteAnnotations:ie.dashboard.canDeleteAnnotations.bind(ie.dashboard),onAddAdHocFilter:this.onAddAdHocFilter,onUpdateData:this.onUpdateData},data:this.getInitialPanelDataState()}}getPanelContextApp(){return this.props.isEditing?ke.zj.PanelEditor:this.props.isViewing?ke.zj.PanelViewer:ke.zj.Dashboard}getInitialPanelDataState(){return{state:de.Gu.NotStarted,series:[],timeRange:(0,ha.JK)()}}componentDidMount(){const{panel:ie,dashboard:Ze}=this.props;if(this.subs.add(ie.events.subscribe(mn.U5,this.onRefresh)),this.subs.add(ie.events.subscribe(C._z,this.onRender)),Ze.panelInitialized(this.props.panel),this.hasPanelSnapshot){this.setState({data:(0,Fs.y)(ie,Ze),isFirstLoad:!1});return}this.wantsQueryExecution||this.setState({isFirstLoad:!1}),this.subs.add(ie.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:rt=>this.onDataUpdate(rt)})),zo.listen(this)}componentWillUnmount(){this.subs.unsubscribe(),zo.remove(this)}liveTimeChanged(ie){const{data:Ze}=this.state;if(Ze.timeRange){const rt=ie.to.valueOf()-Ze.timeRange.to.valueOf();if(rt<100){console.log("Skip tick render",this.props.panel.title,rt);return}}this.setState({liveTime:ie})}componentDidUpdate(ie){const{isInView:Ze,width:rt}=this.props,{context:Ct}=this.state,_t=this.getPanelContextApp();Ct.app!==_t&&this.setState({context:{...Ct,app:_t}}),Ze!==ie.isInView&&Ze&&this.state.refreshWhenInView&&this.onRefresh(),rt!==ie.width&&zo.updateInterval(this)}onDataUpdate(ie){const{dashboard:Ze,panel:rt,plugin:Ct}=this.props;if(Ct.meta.skipDataQuery){this.setState({data:this.getInitialPanelDataState()});return}let{isFirstLoad:_t}=this.state,dn;switch(ie.state){case de.Gu.Loading:if(this.state.data.state===de.Gu.Loading)return;break;case de.Gu.Error:const{error:Mn,errors:Zn}=ie;Zn?.length?Zn.length===1?dn=Zn[0].message:dn="Multiple errors found. Click for more details":Mn&&dn!==Mn.message&&(dn=Mn.message);break;case de.Gu.Done:Ze.snapshot&&(rt.snapshotData=ie.series.map(ca=>(0,ct.og)(ca))),_t&&(_t=!1);break}this.setState({isFirstLoad:_t,errorMessage:dn,data:ie,liveTime:void 0})}get hasPanelSnapshot(){const{panel:ie}=this.props;return ie.snapshotData&&ie.snapshotData.length}get wantsQueryExecution(){return!(this.props.plugin.meta.skipDataQuery||this.hasPanelSnapshot)}shouldSignalRenderingCompleted(ie,Ze){return ie===de.Gu.Done||ie===de.Gu.Error||Ze.skipDataQuery}skipFirstRender(ie){const{isFirstLoad:Ze}=this.state;return this.wantsQueryExecution&&Ze&&(ie===de.Gu.Loading||ie===de.Gu.NotStarted)}renderPanelContent(ie,Ze){const{panel:rt,plugin:Ct,dashboard:_t}=this.props,{renderCounter:dn,data:Mn}=this.state,{state:Zn}=Mn;if(this.skipFirstRender(Zn))return null;this.shouldSignalRenderingCompleted(Zn,Ct.meta)&&fn.r.renderingCompleted();const ca=Ct.panel;console.log(ca);const ba=this.state.liveTime??Mn.timeRange??this.timeSrv.timeRange(),fa=rt.getOptions();return this.eventFilter.onlyLocal=_t.graphTooltip===0,console.log(Ct),console.log({value:this.state.context}),console.log({id:rt.id,data:Mn,title:rt.title,timeRange:ba,timeZone:this.props.dashboard.getTimezone(),options:fa,fieldConfig:rt.fieldConfig,transparent:rt.transparent,width:ie,height:Ze,renderCounter:dn,replaceVariables:rt.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:_t.events}),r.createElement(r.Fragment,null,r.createElement(Dt._w,{value:this.state.context},r.createElement(ca,{id:rt.id,data:Mn,title:rt.title,timeRange:ba,timeZone:this.props.dashboard.getTimezone(),options:fa,fieldConfig:rt.fieldConfig,transparent:rt.transparent,width:ie,height:Ze,renderCounter:dn,replaceVariables:rt.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:_t.events})))}render(){const{dashboard:ie,panel:Ze,width:rt,height:Ct,plugin:_t}=this.props,{errorMessage:dn,data:Mn}=this.state,{transparent:Zn}=Ze,ca=As({...this.props,data:Mn}),ba=(Ze.gridPos?.y??0)===0?-16:void 0,fa=r.createElement("div",{"data-testid":"panel-dropdown"},r.createElement(Ms,{panel:Ze,dashboard:ie,loadingState:Mn.state})),{title:pa,description:ns,titleItems:gs,dragClass:ps,padding:mr,onOpenErrorInspect:ys,hasOverlayHeader:fr,onCancelQuery:Es,onOpenMenu:Pa}=ca;return console.log({title:pa,description:ns,titleItems:gs,dragClass:ps,padding:mr,onOpenErrorInspect:ys,hasOverlayHeader:fr,onCancelQuery:Es,onOpenMenu:Pa}),r.createElement(_a.fm,{width:rt,height:Ct,title:pa,loadingState:Mn.state,statusMessage:dn,statusMessageOnClick:ys,description:ns,titleItems:gs,menu:this.props.hideMenu?void 0:fa,dragClass:ps,dragClassCancel:"grid-drag-cancel",padding:mr,hoverHeaderOffset:ba,hoverHeader:fr(),displayMode:Zn?"transparent":"default",onCancelQuery:Es,onOpenMenu:Pa},(Ss,hs)=>r.createElement(r.Fragment,null,r.createElement(Kt.SV,{dependencies:[Mn,_t,Ze.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover},({error:Hs})=>Hs?null:this.renderPanelContent(Ss,hs))))}}const Pc=(te,ie)=>{const Ze=te.panels[ie.stateKey];return Ze?{plugin:Ze.plugin,instanceState:Ze.instanceState}:{plugin:null}},Mc={initPanelState:qn.JI,setPanelInstanceState:Ia.pC};console.log("---- DashboardPannel connect start");const oi=(0,a.connect)(Pc,Mc);console.log("---- DashboardPannel connect stop");class vl extends r.PureComponent{constructor(){super(...arguments),this.onInstanceStateChange=ie=>{console.log("---- DashboardPanel onInstanceStateChange",{key:this.props.stateKey,value:ie}),this.props.setPanelInstanceState({key:this.props.stateKey,value:ie})},this.onVisibilityChange=ie=>{this.props.panel.isInView=ie},this.onPanelLoad=()=>{this.props.plugin||(console.log("---- onPanelLoad"),this.props.initPanelState(this.props.panel))},this.renderPanel=({isInView:ie})=>{const{dashboard:Ze,panel:rt,isViewing:Ct,isEditing:_t,width:dn,height:Mn,plugin:Zn,timezone:ca,hideMenu:ba,isDraggable:fa=!0}=this.props;return Zn?Zn&&Zn.angularPanelCtrl?r.createElement(fo,{plugin:Zn,panel:rt,dashboard:Ze,isViewing:Ct,isEditing:_t,isInView:ie,isDraggable:fa,width:dn,height:Mn}):r.createElement(Dc,{plugin:Zn,panel:rt,dashboard:Ze,isViewing:Ct,isEditing:_t,isInView:ie,isDraggable:fa,width:dn,height:Mn,onInstanceStateChange:this.onInstanceStateChange,timezone:ca,hideMenu:ba}):null}}componentDidMount(){console.log("---- DashboardPannel componentDidMount"),this.props.panel.isInView=!this.props.lazy,console.log({lazy:this.props.lazy}),this.props.lazy||this.onPanelLoad()}render(){console.log("---- DashboardPannel render start");const{width:ie,height:Ze,lazy:rt,dashboard:Ct}=this.props,_t=Ct.panels[0];return _t&&_t.plugin||console.log("---- DashboardPannel render No plugin"),rt?r.createElement(aa,{width:ie,height:Ze,onChange:this.onVisibilityChange,onLoad:this.onPanelLoad},this.renderPanel):this.renderPanel({isInView:!0})}}vl.defaultProps={lazy:!0};const Tc=oi(vl);class Ic extends r.PureComponent{constructor(ie){super(ie),this.panelMap={},this.eventSubs=new f.w0,this.windowHeight=1200,this.windowWidth=1920,this.gridWidth=0,this.lastPanelBottom=0,this.isLayoutInitialized=!1,this.onLayoutChange=Ze=>{for(const rt of Ze)this.panelMap[rt.i].updateGridPos(rt,this.isLayoutInitialized);this.isLayoutInitialized&&(this.isLayoutInitialized=!0),this.props.dashboard.sortPanelsByGridPos(),this.forceUpdate()},this.triggerForceUpdate=()=>{this.forceUpdate()},this.updateGridPos=(Ze,rt)=>{this.panelMap[Ze.i].updateGridPos(Ze)},this.onResize=(Ze,rt,Ct)=>{this.panelMap[Ct.i].updateGridPos(Ct)},this.onResizeStop=(Ze,rt,Ct)=>{this.updateGridPos(Ct,Ze)},this.onDragStop=(Ze,rt,Ct)=>{this.updateGridPos(Ct,Ze)},this.onGetWrapperDivRef=Ze=>{Ze&&h.Vt.user.authenticatedBy!=="render"&&setTimeout(()=>{Ze.classList.add("react-grid-layout--enable-move-animations")},50)}}componentDidMount(){const{dashboard:ie}=this.props;this.eventSubs.add(ie.events.subscribe(C._B,this.triggerForceUpdate))}componentWillUnmount(){this.eventSubs.unsubscribe()}buildLayout(){const ie=[];this.panelMap={};for(const Ze of this.props.dashboard.panels){if(Ze.key||(Ze.key=`panel-${Ze.id}-${Date.now()}`),this.panelMap[Ze.key]=Ze,!Ze.gridPos){console.log("panel without gridpos");continue}const rt={i:Ze.key,x:Ze.gridPos.x,y:Ze.gridPos.y,w:Ze.gridPos.w,h:Ze.gridPos.h};Ze.type==="row"&&(rt.w=u.cz,rt.h=1,rt.isResizable=!1,rt.isDraggable=Ze.collapsed),ie.push(rt)}return ie}getPanelScreenPos(ie,Ze){let rt=0;return Ze<m.config.theme2.breakpoints.values.md?rt=this.lastPanelBottom+u.hD:rt=wi(ie.gridPos.y)+u.hD,this.lastPanelBottom=rt+wi(ie.gridPos.h),{top:rt,bottom:this.lastPanelBottom}}renderPanels(ie,Ze){const rt=[];this.lastPanelBottom=0,this.gridWidth!==ie&&(this.windowHeight=window.innerHeight??1e3,this.windowWidth=window.innerWidth,this.gridWidth=ie);for(const Ct of this.props.dashboard.panels){Ct&&Ct.plugin||console.log("---- DashboardGrid renderPanels No plugin");const _t=y()({"react-grid-item--fullscreen":Ct.isViewing}),dn=this.props.dashboard.panels.length-rt.length;rt.push(r.createElement(ii,{key:Ct.key,className:_t,descendingOrderIndex:dn,"data-panelid":Ct.id,gridPos:Ct.gridPos,gridWidth:ie,windowHeight:this.windowHeight,windowWidth:this.windowWidth,isViewing:Ct.isViewing},(Mn,Zn)=>(console.log("---- DashboardGrid renderPanel 1"),this.renderPanel(Ct,Mn,Zn,Ze))))}return rt}renderPanel(ie,Ze,rt,Ct){return console.log("---- DashboardGrid renderPanel 2"),ie.type==="row"?r.createElement(hn,{key:ie.key,panel:ie,dashboard:this.props.dashboard}):ie.type==="add-panel"?r.createElement(Ht,{key:ie.key,panel:ie,dashboard:this.props.dashboard}):ie.type==="add-library-panel"?r.createElement(Ke,{key:ie.key,panel:ie,dashboard:this.props.dashboard}):(ie.plugin?console.log("---- DashboardGrid renderPanel plugin",ie.plugin):console.log("---- DashboardGrid renderPanel No plugin"),r.createElement(Tc,{key:ie.key,stateKey:ie.key,panel:ie,dashboard:this.props.dashboard,isEditing:ie.isEditing,isViewing:ie.isViewing,isDraggable:Ct,width:Ze,height:rt,hideMenu:this.props.hidePanelMenus}))}render(){const{isEditable:ie,dashboard:Ze}=this.props,rt=Ze.panels[0];return rt&&rt.plugin||console.log("---- DashboardGrid render No plugin"),m.config.featureToggles.emptyDashboardPage&&Ze.panels.length===0?r.createElement(jn,{dashboard:Ze,canCreate:ie}):r.createElement("div",{style:{flex:"1 1 auto",display:this.props.editPanel?"none":void 0}},r.createElement(d.Z,{disableHeight:!0},({width:Ct})=>{if(Ct===0)return null;const _t=Ct<=m.config.theme2.breakpoints.values.md?!1:ie;return r.createElement("div",{style:{width:Ct,height:"100%"},ref:this.onGetWrapperDivRef},r.createElement(l(),{width:Ct,isDraggable:_t,isResizable:ie,containerPadding:[0,0],useCSSTransforms:!0,margin:[u.hD,u.hD],cols:u.cz,rowHeight:u.K3,draggableHandle:".grid-drag-handle",draggableCancel:".grid-drag-cancel",layout:this.buildLayout(),onDragStop:this.onDragStop,onResize:this.onResize,onResizeStop:this.onResizeStop,onLayoutChange:this.onLayoutChange},this.renderPanels(Ct,_t)))}))}}const ii=r.forwardRef((te,ie)=>{const Ze=m.config.theme2;let rt=100,Ct=100;const{gridWidth:_t,gridPos:dn,isViewing:Mn,windowHeight:Zn,windowWidth:ca,descendingOrderIndex:ba,...fa}=te,pa=te.style??{};if(Mn)rt=_t,Ct=Zn*.85,pa.height=Ct,pa.width="100%";else if(ca<Ze.breakpoints.values.md)rt=te.gridWidth,Ct=wi(dn.h),pa.height=Ct,pa.width="100%";else if(te.style){const{width:ns,height:gs}=te.style;ns!=null&&(rt=typeof ns=="number"?ns:parseFloat(ns)),gs!=null&&(Ct=typeof gs=="number"?gs:parseFloat(gs))}return r.createElement("div",{...fa,style:{...fa.style,zIndex:ba},ref:ie},[te.children[0](rt,Ct),te.children.slice(1)])});function wi(te){return te*(u.K3+u.hD)-u.hD}ii.displayName="GridItemWithDimensions";var Br=e(75397),Oc=e(60952),Rc=e(91986),Ac=e(31312),Oo=e(4148);const Lc=({baseUrl:te})=>async({url:ie,method:Ze="GET",body:rt})=>{try{const{data:Ct}=await(0,Ac.n)((0,Oo.i)().fetch({url:te+ie,method:Ze,data:rt}));return{data:Ct}}catch(Ct){return{error:Ct}}},Ro=(0,Rc.LC)({reducerPath:"togglesApi",baseQuery:Lc({baseUrl:"/api"}),endpoints:te=>({getFeatureToggles:te.query({query:()=>({url:"/featuremgmt"})}),updateFeatureToggles:te.mutation({query:ie=>({url:"/featuremgmt",method:"POST",body:{featureToggles:ie}})})})}),{useGetFeatureTogglesQuery:Cr,useUpdateFeatureTogglesMutation:yl}=Ro;var Ho=e(46347),zr=e(27587),El=e(12813),li=e(44722),wc=e(59138),Bc=e(71707);const Nc={navBarTree:Bc.V4,navIndex:El.G4,appNotifications:wc.VW},bl={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},ci=(0,qt.oM)({name:"ldap",initialState:bl,reducers:{ldapConnectionInfoLoadedAction:(te,ie)=>({...te,ldapError:void 0,connectionInfo:ie.payload}),ldapFailedAction:(te,ie)=>({...te,ldapError:ie.payload}),ldapSyncStatusLoadedAction:(te,ie)=>({...te,syncInfo:ie.payload}),userMappingInfoLoadedAction:(te,ie)=>({...te,user:ie.payload,userError:void 0}),userMappingInfoFailedAction:(te,ie)=>({...te,user:void 0,userError:ie.payload}),clearUserMappingInfoAction:(te,ie)=>({...te,user:void 0}),clearUserErrorAction:(te,ie)=>({...te,userError:void 0})}}),{clearUserErrorAction:uu,clearUserMappingInfoAction:mu,ldapConnectionInfoLoadedAction:eo,ldapFailedAction:fu,ldapSyncStatusLoadedAction:Us,userMappingInfoFailedAction:us,userMappingInfoLoadedAction:to}=ci.actions,os=ci.reducer,xs={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},Yn=(0,qt.oM)({name:"userAdmin",initialState:xs,reducers:{userProfileLoadedAction:(te,ie)=>({...te,user:ie.payload}),userOrgsLoadedAction:(te,ie)=>({...te,orgs:ie.payload}),userSessionsLoadedAction:(te,ie)=>({...te,sessions:ie.payload}),userAdminPageLoadedAction:(te,ie)=>({...te,isLoading:!ie.payload}),userAdminPageFailedAction:(te,ie)=>({...te,error:ie.payload,isLoading:!1})}}),{userProfileLoadedAction:Lt,userOrgsLoadedAction:cr,userSessionsLoadedAction:xl,userAdminPageLoadedAction:Ao,userAdminPageFailedAction:Lo}=Yn.actions,Hr=Yn.reducer,Sl={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!0},Go=(0,qt.oM)({name:"userListAdmin",initialState:Sl,reducers:{usersFetched:(te,ie)=>{const{totalCount:Ze,perPage:rt,...Ct}=ie.payload,_t=Math.ceil(Ze/rt);return{...te,...Ct,totalPages:_t,perPage:rt,showPaging:_t>1,isLoading:!1}},usersFetchBegin:te=>({...te,isLoading:!0}),usersFetchEnd:te=>({...te,isLoading:!1}),queryChanged:(te,ie)=>({...te,query:ie.payload,page:0}),pageChanged:(te,ie)=>({...te,page:ie.payload}),sortChanged:(te,ie)=>({...te,page:0,sort:ie.payload}),filterChanged:(te,ie)=>{const{name:Ze,value:rt}=ie.payload;return te.filters.some(Ct=>Ct.name===Ze)?{...te,page:0,filters:te.filters.map(Ct=>Ct.name===Ze?{...Ct,value:rt}:Ct)}:{...te,page:0,filters:[...te.filters,ie.payload]}}}}),{usersFetched:Cl,usersFetchBegin:no,usersFetchEnd:nr,queryChanged:wo,pageChanged:di,filterChanged:jo,sortChanged:Bi}=Go.actions,Dl=Go.reducer,Ni={ldap:os,userAdmin:Hr,userListAdmin:Dl};var rs=e(57675),ms=e(32525);const ui=(0,li.combineReducers)({dataSources:(0,rs.jK)("dataSources",ms.nw,({rulesSourceName:te})=>te).reducer,promRules:(0,rs.jK)("promRules",ms.y6,({rulesSourceName:te})=>te).reducer,rulerRules:(0,rs.jK)("rulerRules",ms.UR,({rulesSourceName:te})=>te).reducer,silences:(0,rs.jK)("silences",ms.je,te=>te).reducer,ruleForm:(0,li.combineReducers)({saveRule:(0,rs.i6)("saveRule",ms.wy).reducer,existingRule:(0,rs.i6)("existingRule",ms.on).reducer}),grafanaNotifiers:(0,rs.i6)("grafanaNotifiers",ms.Vj).reducer,saveAMConfig:(0,rs.i6)("saveAMConfig",ms.mM).reducer,deleteAMConfig:(0,rs.i6)("deleteAMConfig",ms.Nc).reducer,updateSilence:(0,rs.i6)("updateSilence",ms.QY).reducer,amAlerts:(0,rs.jK)("amAlerts",ms.dB,te=>te).reducer,folders:(0,rs.jK)("folders",ms.vL,te=>te).reducer,amAlertGroups:(0,rs.jK)("amAlertGroups",ms.mS,te=>te).reducer,testReceivers:(0,rs.i6)("testReceivers",ms.D8).reducer,updateLotexNamespaceAndGroup:(0,rs.i6)("updateLotexNamespaceAndGroup",ms.hv).reducer,externalAlertmanagers:(0,li.combineReducers)({alertmanagerConfig:(0,rs.i6)("alertmanagerConfig",ms.wE).reducer,discoveredAlertmanagers:(0,rs.i6)("discoveredAlertmanagers",ms.zy).reducer}),managedAlertStateHistory:(0,rs.i6)("managedAlertStateHistory",ms.Ms).reducer});var Fi=e(5026);const mi={items:[],searchQuery:"",isLoading:!1},Gr={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function Ml(te,ie){const Ze=Fi.Z.getStateDisplayModel(ie),rt={...te,stateText:Ze.text,stateIcon:Ze.iconClass,stateClass:Ze.stateClass,stateAge:(0,xr.CQ)(te.newStateDate).fromNow(!0)};return rt.state!=="paused"&&(rt.executionError&&(rt.info="Execution Error: "+rt.executionError),rt.evalData&&rt.evalData.noData&&(rt.info="Query returned no data")),rt}const Ys=(0,qt.oM)({name:"alertRules",initialState:mi,reducers:{loadAlertRules:te=>({...te,isLoading:!0}),loadedAlertRules:(te,ie)=>{const rt=ie.payload.map(Ct=>Ml(Ct,Ct.state));return{...te,items:rt,isLoading:!1}},setSearchQuery:(te,ie)=>({...te,searchQuery:ie.payload})}}),Ts=(0,qt.oM)({name:"notificationChannel",initialState:Gr,reducers:{setNotificationChannels:(te,ie)=>({...te,notificationChannelTypes:Il(ie.payload),notifiers:ie.payload}),notificationChannelLoaded:(te,ie)=>{const Ze=ie.payload,Ct=te.notifiers.find(_t=>_t.type===Ze.type).options.filter(_t=>_t.secure);return Ct.length>0&&Ct.some(_t=>Ze.settings[_t.propertyName]!=="")?Ui(te,ie.payload,Ct):{...te,notificationChannel:Ze}},resetSecureField:(te,ie)=>({...te,notificationChannel:{...te.notificationChannel,secureFields:{...te.notificationChannel.secureFields,[ie.payload]:!1}}})}}),{loadAlertRules:Bo,loadedAlertRules:fi,setSearchQuery:Qs}=Ys.actions,{setNotificationChannels:Tl,notificationChannelLoaded:Yo,resetSecureField:Dr}=Ts.actions,ho=Ys.reducer,vo=Ts.reducer,No={alertRules:ho,notificationChannel:vo,unifiedAlerting:ui};function Ui(te,ie,Ze){const rt={},Ct={};return Ze.forEach(_t=>{Ct[_t.propertyName]=ie.settings[_t.propertyName],rt[_t.propertyName]=""}),{...te,notificationChannel:{...ie,settings:{...ie.settings,...rt},secureSettings:{...Ct}}}}function Il(te){return te.map(ie=>({value:ie.type,label:ie.name,...ie,typeName:ie.type})).sort((ie,Ze)=>ie.name>Ze.name?1:-1)}const Fc={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",migrationResult:{total:0,migrated:0,failed:0,failedApikeyIDs:[0],failedDetails:[]}},gi=(0,qt.oM)({name:"apiKeys",initialState:Fc,reducers:{apiKeysLoaded:(te,ie)=>{const{keys:Ze,keysIncludingExpired:rt}=ie.payload,Ct=ie.payload.keys.length===0&&ie.payload.keysIncludingExpired.length>0?!0:te.includeExpired;return{...te,hasFetched:!0,keys:Ze,keysIncludingExpired:rt,includeExpired:Ct}},setSearchQuery:(te,ie)=>({...te,searchQuery:ie.payload}),includeExpiredToggled:te=>({...te,includeExpired:!te.includeExpired}),isFetching:te=>({...te,hasFetched:!1}),setMigrationResult:(te,ie)=>({...te,migrationResult:ie.payload})}}),{apiKeysLoaded:Uc,includeExpiredToggled:gu,isFetching:pu,setSearchQuery:hu,setMigrationResult:vu}=gi.actions,Wc={apiKeys:gi.reducer},_c={settings:{},providerStatuses:{},isLoading:!1},Nr=(0,qt.oM)({name:"authConfig",initialState:_c,reducers:{settingsUpdated:(te,ie)=>({...te,settings:ie.payload}),providerStatusesLoaded:(te,ie)=>({...te,providerStatuses:ie.payload}),loadingBegin:te=>({...te,isLoading:!0}),loadingEnd:te=>({...te,isLoading:!1}),setError:(te,ie)=>({...te,updateError:ie.payload}),resetError:te=>({...te,updateError:void 0}),setWarning:(te,ie)=>({...te,warning:ie.payload}),resetWarning:te=>({...te,warning:void 0})}}),{settingsUpdated:$c,providerStatusesLoaded:Eu,loadingBegin:bu,loadingEnd:Wi,setError:xu,resetError:Vc,setWarning:Su,resetWarning:Kc}=Nr.actions,kc={authConfig:Nr.reducer};var dr=e(65158),jr=e(91507),zc=e(96483),_i=e(17653);const Hc={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},Ga=(te,ie)=>({...te,...ie.payload,hasChanged:!1}),Ol=(0,qt.oM)({name:"folder",initialState:Hc,reducers:{loadFolder:Ga,setFolderTitle:(te,ie)=>({...te,title:ie.payload,hasChanged:ie.payload.trim().length>0}),loadFolderPermissions:(te,ie)=>({...te,permissions:(0,_i.A)(ie.payload)}),setCanViewFolderPermissions:(te,ie)=>(te.canViewFolderPermissions=ie.payload,te)},extraReducers:te=>{te.addMatcher(Ho.Hv.getFolder.matchFulfilled,Ga)}}),{loadFolderPermissions:Du,loadFolder:Pu,setFolderTitle:Gc,setCanViewFolderPermissions:Rl}=Ol.actions,jc={folder:Ol.reducer};var Qo=e(21308);const pi=(0,w.createAsyncThunk)("users/fetchInvitees",async()=>Qo.Vt.hasPermission(w.AccessControlAction.OrgUsersAdd)?await(0,Oo.i)().get("/api/org/invites"):[]),Tu=(0,w.createAsyncThunk)("users/addInvitee",async(te,{dispatch:ie})=>{await(0,Oo.i)().post("/api/org/invites",te),await ie(pi())}),Yc=(0,w.createAsyncThunk)("users/revokeInvite",async te=>(await(0,Oo.i)().patch(`/api/org/invites/${te}/revoke`,{}),te)),Fr=(0,qt.HF)({selectId:te=>te.code}),hi=Fr.getSelectors(),$i=Fr.getInitialState({status:"idle"}),vi={invites:(0,qt.oM)({name:"invites",initialState:$i,reducers:{},extraReducers:te=>{te.addCase(pi.pending,ie=>{ie.status="loading"}).addCase(pi.fulfilled,(ie,{payload:Ze})=>{Fr.setAll(ie,Ze),ie.status="succeeded"}).addCase(pi.rejected,ie=>{ie.status="failed"}).addCase(Yc.fulfilled,(ie,{payload:Ze})=>{Fr.removeOne(ie,Ze),ie.status="succeeded"})}}).reducer};var ls=e(81813);const Jc={organization:{},userOrgs:[]},Vi=(0,qt.oM)({name:"organization",initialState:Jc,reducers:{organizationLoaded:(te,ie)=>({...te,organization:ie.payload}),setOrganizationName:(te,ie)=>({...te,organization:{...te.organization,name:ie.payload}}),userOrganizationsLoaded:(te,ie)=>({...te,userOrgs:ie.payload})}}),{setOrganizationName:Xc,organizationLoaded:Ki,userOrganizationsLoaded:ki}=Vi.actions,yi={organization:Vi.reducer};var yo=e(14776),Ws=e(31931),Pr=e(28367);const Yr=(0,qt.HF)(),zi=te=>new RegExp(`${yo.uJ}/(.*)/pending`).test(te.type),Ei=te=>new RegExp(`${yo.uJ}/(.*)/fulfilled`).test(te.type),ed=te=>new RegExp(`${yo.uJ}/(.*)/rejected`).test(te.type),Fo=te=>{const ie=te.lastIndexOf("/");return te.substring(0,ie)},Hi={items:Yr.getInitialState(),requests:{},settings:{displayMode:Ws.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},Gi=(0,qt.oM)({name:"plugins",initialState:Hi,reducers:{setDisplayMode(te,ie){te.settings.displayMode=ie.payload}},extraReducers:te=>te.addCase(Pr.wx,(ie,Ze)=>{Yr.upsertMany(ie.items,Ze.payload)}).addCase(Pr.bp.fulfilled,(ie,Ze)=>{Yr.upsertMany(ie.items,Ze.payload)}).addCase(Pr.DD.fulfilled,(ie,Ze)=>{Yr.updateOne(ie.items,Ze.payload)}).addCase(Pr.N9.fulfilled,(ie,Ze)=>{Yr.updateOne(ie.items,Ze.payload)}).addCase(Pr.Tz.fulfilled,(ie,Ze)=>{Yr.updateOne(ie.items,Ze.payload)}).addCase(Pr.LP,(ie,Ze)=>{ie.panels[Ze.payload.meta.id]=Ze.payload}).addCase(Pr.m3.pending,(ie,Ze)=>{ie.isLoadingPluginDashboards=!0,ie.dashboards=[]}).addCase(Pr.m3.fulfilled,(ie,Ze)=>{ie.isLoadingPluginDashboards=!1,ie.dashboards=Ze.payload}).addMatcher(zi,(ie,Ze)=>{ie.requests[Fo(Ze.type)]={status:Ws.eE.Pending}}).addMatcher(Ei,(ie,Ze)=>{ie.requests[Fo(Ze.type)]={status:Ws.eE.Fulfilled}}).addMatcher(ed,(ie,Ze)=>{ie.requests[Fo(Ze.type)]={status:Ws.eE.Rejected,error:Ze.payload}})}),{setDisplayMode:td}=Gi.actions,nd=Gi.reducer;var ad=e(48069);const Zs={orgId:U.default.bootData.user.orgId,timeZone:U.default.bootData.user.timezone,weekStart:U.default.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},ji=(0,qt.oM)({name:"user/profile",initialState:Zs,reducers:{updateTimeZone:(te,ie)=>{te.timeZone=ie.payload.timeZone},updateWeekStart:(te,ie)=>{te.weekStart=ie.payload.weekStart},updateFiscalYearStartMonth:(te,ie)=>{te.fiscalYearStartMonth=ie.payload.fiscalYearStartMonth},setUpdating:(te,ie)=>{te.isUpdating=ie.payload.updating},userLoaded:(te,ie)=>{te.user=ie.payload.user},initLoadTeams:(te,ie)=>{te.teamsAreLoading=!0},teamsLoaded:(te,ie)=>{te.teams=ie.payload.teams,te.teamsAreLoading=!1},initLoadOrgs:(te,ie)=>{te.orgsAreLoading=!0},orgsLoaded:(te,ie)=>{te.orgs=ie.payload.orgs,te.orgsAreLoading=!1},initLoadSessions:(te,ie)=>{te.sessionsAreLoading=!0},sessionsLoaded:(te,ie)=>{const Ze=ie.payload.sessions.sort((rt,Ct)=>Number(Ct.isActive)-Number(rt.isActive));te.sessions=Ze.map(rt=>({id:rt.id,isActive:rt.isActive,seenAt:(0,ad.E8)(rt.seenAt),createdAt:rt.createdAt,clientIp:rt.clientIp,browser:rt.browser,browserVersion:rt.browserVersion,os:rt.os,osVersion:rt.osVersion,device:rt.device})),te.sessionsAreLoading=!1},userSessionRevoked:(te,ie)=>{te.sessions=te.sessions.filter(Ze=>Ze.id!==ie.payload.tokenId),te.isUpdating=!1}}}),Iu=te=>async ie=>{set(contextSrv,"user.fiscalYearStartMonth",te),ie(wl({fiscalYearStartMonth:te}))},Ou=te=>async ie=>{(!isString(te)||isEmpty(te))&&(te=config?.bootData?.user?.timezone),set(contextSrv,"user.timezone",te),ie(Zo({timeZone:te}))},Ru=te=>async ie=>{(!isString(te)||isEmpty(te))&&(te=config?.bootData?.user?.weekStart),set(contextSrv,"user.weekStart",te),ie(od({weekStart:te})),setWeekStart(te)},{setUpdating:Al,initLoadOrgs:Au,orgsLoaded:Lu,initLoadTeams:wu,teamsLoaded:Ll,userLoaded:bi,userSessionRevoked:sd,initLoadSessions:xi,sessionsLoaded:rd,updateTimeZone:Zo,updateWeekStart:od,updateFiscalYearStartMonth:wl}=ji.actions,Bu=ji.reducer,id={user:ji.reducer},Bl={serviceAccount:{},isLoading:!0,tokens:[]},Nl=(0,qt.oM)({name:"serviceaccount",initialState:Bl,reducers:{serviceAccountFetchBegin:te=>({...te,isLoading:!0}),serviceAccountFetchEnd:te=>({...te,isLoading:!1}),serviceAccountLoaded:(te,ie)=>({...te,serviceAccount:ie.payload,isLoading:!1}),serviceAccountTokensLoaded:(te,ie)=>({...te,tokens:ie.payload,isLoading:!1})}}),ld=Nl.reducer,{serviceAccountLoaded:Fl,serviceAccountTokensLoaded:Nu,serviceAccountFetchBegin:Fu,serviceAccountFetchEnd:Ul}=Nl.actions,Is={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:w.ServiceAccountStateFilter.All},Jo=(0,qt.oM)({name:"serviceaccounts",initialState:Is,reducers:{serviceAccountsFetched:(te,ie)=>{const{totalCount:Ze,perPage:rt,...Ct}=ie.payload,_t=Math.ceil(Ze/rt);return{...te,...Ct,totalPages:_t,perPage:rt,showPaging:_t>1,isLoading:!1}},serviceAccountsFetchBegin:te=>({...te,isLoading:!0}),serviceAccountsFetchEnd:te=>({...te,isLoading:!1}),acOptionsLoaded:(te,ie)=>({...te,roleOptions:ie.payload}),queryChanged:(te,ie)=>({...te,query:ie.payload,page:0}),pageChanged:(te,ie)=>({...te,page:ie.payload}),stateFilterChanged:(te,ie)=>({...te,serviceAccountStateFilter:ie.payload})}}),Xo=Jo.reducer,{serviceAccountsFetchBegin:Uu,serviceAccountsFetchEnd:Wu,serviceAccountsFetched:_u,acOptionsLoaded:$u,pageChanged:Vu,stateFilterChanged:cd,queryChanged:Ku}=Jo.actions,dd={serviceAccountProfile:ld,serviceAccounts:Xo},ud={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},Uo=(0,qt.oM)({name:"supportBundles",initialState:ud,reducers:{supportBundlesLoaded:(te,ie)=>({...te,supportBundles:ie.payload,isLoading:!1}),fetchBegin:te=>({...te,isLoading:!0}),fetchEnd:te=>({...te,isLoading:!1}),collectorsFetchBegin:te=>({...te,createBundlePageLoading:!0}),collectorsFetchEnd:te=>({...te,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(te,ie)=>({...te,supportBundleCollectors:ie.payload,createBundlePageLoading:!1}),setLoadBundleError:(te,ie)=>({...te,loadBundlesError:ie.payload,supportBundleCollectors:[]}),setCreateBundleError:(te,ie)=>({...te,createBundleError:ie.payload})}}),{supportBundlesLoaded:Wl,fetchBegin:ku,fetchEnd:zu,supportBundleCollectorsLoaded:md,collectorsFetchBegin:Hu,collectorsFetchEnd:Gu,setLoadBundleError:fd,setCreateBundleError:_l}=Uo.actions,$l={supportBundles:Uo.reducer},Vl={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},Kl=(0,qt.oM)({name:"teams",initialState:Vl,reducers:{teamsLoaded:(te,ie)=>{const{totalCount:Ze,perPage:rt,...Ct}=ie.payload,_t=Math.ceil(Ze/rt);return{...te,...Ct,totalPages:_t,perPage:rt,hasFetched:!0}},queryChanged:(te,ie)=>({...te,page:1,query:ie.payload}),pageChanged:(te,ie)=>({...te,page:ie.payload}),sortChanged:(te,ie)=>({...te,sort:ie.payload,page:1})}}),{teamsLoaded:Yu,queryChanged:Qu,pageChanged:kl,sortChanged:Zu}=Kl.actions,gd=Kl.reducer,Yi={team:{},members:[],groups:[],searchMemberQuery:""},Qi=(0,qt.oM)({name:"team",initialState:Yi,reducers:{teamLoaded:(te,ie)=>({...te,team:ie.payload}),teamMembersLoaded:(te,ie)=>({...te,members:ie.payload}),setSearchMemberQuery:(te,ie)=>({...te,searchMemberQuery:ie.payload}),teamGroupsLoaded:(te,ie)=>({...te,groups:ie.payload})}}),{teamLoaded:ur,teamGroupsLoaded:Zi,teamMembersLoaded:Eo,setSearchMemberQuery:zl}=Qi.actions,Ju=Qi.reducer,bo={teams:gd,team:Ju},ao={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,canInvite:!U.default.externalUserMngLinkName,externalUserMngInfo:U.default.externalUserMngInfo,externalUserMngLinkName:U.default.externalUserMngLinkName,externalUserMngLinkUrl:U.default.externalUserMngLinkUrl,isLoading:!1},Hl=(0,qt.oM)({name:"users",initialState:ao,reducers:{usersLoaded:(te,ie)=>{const{totalCount:Ze,perPage:rt,page:Ct,orgUsers:_t}=ie.payload,dn=Math.ceil(Ze/rt);return{...te,isLoading:!0,users:_t,perPage:rt,page:Ct,totalPages:dn}},searchQueryChanged:(te,ie)=>({...te,searchQuery:ie.payload,page:ao.page}),setUsersSearchPage:(te,ie)=>({...te,page:ie.payload}),pageChanged:(te,ie)=>({...te,page:ie.payload}),sortChanged:(te,ie)=>({...te,sort:ie.payload}),usersFetchBegin:te=>({...te,isLoading:!0}),usersFetchEnd:te=>({...te,isLoading:!1})}}),{searchQueryChanged:Gl,setUsersSearchPage:jl,usersLoaded:Xu,usersFetchBegin:qu,usersFetchEnd:em,pageChanged:tm,sortChanged:nm}=Hl.actions,pd={users:Hl.reducer};var qo=e(17174),Ji=e(20584),hd=e(43686);const vd={...Nc,...No,...bo,...Wc,...jc,...$n.ZP,...Wa.ZP,...zc.ZP,...pd,...dd,...id,...vi,...yi,...dr.ZP,...Ni,...ls.ZP,...jr.ZP,...Ia.ZP,...qo.ZP,...$l,...kc,plugins:nd,[Ji.C.reducerPath]:Ji.C.reducer,[zr.Rh.reducerPath]:zr.Rh.reducer,[Ho.Zi.reducerPath]:Ho.Zi.reducer,[Ro.reducerPath]:Ro.reducer},xo={},yd=te=>{Object.assign(xo,te)},Yl=()=>{const te=(0,li.combineReducers)({...vd,...xo});return(ie,Ze)=>{if(Ze.type!==hd.e.type)return te(ie,Ze);const{cleanupAction:rt}=Ze.payload;return rt(ie),te(ie,Ze)}};function so(te){addReducer(te)}const Ed=(0,qt.e)();function bd(te){const ie=(0,qt.xC)({reducer:Yl(),middleware:Ze=>Ze({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(Ed.middleware,Ji.C.middleware,zr.Rh.middleware,Ho.Zi.middleware,Ro.middleware),devTools:!1,preloadedState:{navIndex:(0,El.Cu)(),...te}});return(0,Oc.sj)(ie.dispatch),(0,la.PQ)(ie),ie}var xd=e(36050);bd();function Si(){console.log("-- GDashboardGrid start");const te=xd,ie=new Br.f(te),Ze=ie.panels[0];Ze&&Ze.plugin||console.log("---- GDashboardGrid No plugin");const rt=null,Ct=null;return r.createElement(r.Fragment,null,r.createElement(a.Provider,{store:la.h},r.createElement(Ic,{dashboard:ie,isEditable:!!ie.meta.canEdit,viewPanel:rt,editPanel:Ct})))}var Ql=e(46350);function Zl(){return r.createElement(r.Fragment,null,r.createElement(Ql.c,null))}const Sd={GWelcome:Zl,GDashboardGrid:Si,getWC:()=>{const te=(0,t.Z)(Zl),ie=(0,t.Z)(Si);return{GWelcomeWC:te,GDashboardGridWC:ie}}}},75766:(X,L,e)=>{"use strict";e.d(L,{wl:()=>r});const t={Breadcrumbs:{breadcrumb:a=>`data-testid ${a} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{connectionSettings:"Data source connection URL",exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:a=>`${a} menu`,MenuGroup:a=>`${a} menu group`,MenuItem:a=>`${a} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:a=>`data-testid Panel header ${a}`,headerItems:a=>`data-testid Panel header item ${a}`,menuItems:a=>`data-testid Panel menu item ${a}`,menu:a=>`data-testid Panel menu ${a}`,containerByTitle:a=>`${a} panel`,headerCornerInfo:a=>`Panel header ${a}`,status:a=>`data-testid Panel status ${a}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-testid hover-header-container",dragIcon:"data-testid drag-icon"}},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:a=>`gpl alias ${a}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer",body:"data-testid table body"}}},VizLegend:{seriesName:a=>`VizLegend series ${a}`},Drawer:{General:{title:a=>`Drawer title ${a}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:a=>`${a} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",showZoomField:"Map controls Show zoom control field property editor",showAttributionField:"Map controls Show attribution field property editor",showScaleField:"Map controls Show scale field property editor",showMeasureField:"Map controls Show measure tools field property editor",showDebugField:"Map controls Show debug field property editor",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:a=>`Tab ${a}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"data-testid query-history-button",addQuery:"data-testid query-tab-add-query"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:a=>`${a}`,title:a=>`Query editor row title ${a}`,container:a=>`Query editor row ${a}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:a=>`Alert ${a}`,alertV2:a=>`data-testid Alert ${a}`},TransformTab:{content:"data-testid Transform editor tab content",newTransform:a=>`data-testid New transform ${a}`,transformationEditor:a=>`data-testid Transformation editor ${a}`,transformationEditorDebugger:a=>`data-testid Transformation editor debugger ${a}`},Transforms:{card:a=>`data-testid New transform ${a}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location Mode field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations",addTransformationButton:"data-testid add transformation button"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:a=>`${a}`,itemButton:a=>`data-testid ${a}`},QueryEditorToolbarItem:{button:a=>`QueryEditor toolbar item button ${a}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:a=>a?`Options group ${a}`:"Options group",toggle:a=>a?`Options group ${a} toggle`:"Options group toggle"},PluginVisualization:{item:a=>`Plugin visualization item ${a}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"data-testid Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:a=>`Value picker button ${a}`,select:a=>`Value picker select ${a}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:a=>`data-testid Collapse folder ${a}`,expandFolder:a=>`data-testid Expand folder ${a}`,dashboardItem:a=>`${t.Search.dashboardItems} ${a}`,dashboardCard:a=>`data-testid Search card ${a}`,folderHeader:a=>`data-testid Folder header ${a}`,folderContent:a=>`data-testid Folder content ${a}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:a=>`Call to action button ${a}`,buttonV2:a=>`data-testid Call to action button ${a}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:a=>`data-testid suggestion-${a}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:a=>`data-testid dashboard-row-title-${a}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input"},Tooltip:{container:"data-testid tooltip"}},r={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:a=>`Data source list item ${a}`},EditDataSource:{url:a=>`/datasources/edit/${a}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:a=>`Data source plugin item ${a}`,dataSourcePluginsV2:a=>`Add new data source ${a}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:a=>`data-testid ${a}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:a=>`/d/${a}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:a=>`data-testid Dashboard template variables submenu Label ${a}`,submenuItemValueDropDownValueLinkTexts:a=>`data-testid Dashboard template variables Variable Value DropDown value link text ${a}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:a=>`data-testid Dashboard template variables Variable Value DropDown option text ${a}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:a=>`data-testid Dashboard annotations submenu Label ${a}`,annotationToggle:a=>`data-testid Dashboard annotations submenu Toggle ${a}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:a=>`Dashboard settings section item ${a}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview"}},Variables:{List:{addVariableCTA:t.CallToActionCard.button("Add variable"),addVariableCTAV2:t.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:a=>`Variable editor Table Name field ${a}`,tableRowDefinitionFields:a=>`Variable editor Table Definition field ${a}`,tableRowArrowUpButtons:a=>`Variable editor Table ArrowUp button ${a}`,tableRowArrowDownButtons:a=>`Variable editor Table ArrowDown button ${a}`,tableRowDuplicateButtons:a=>`Variable editor Table Duplicate button ${a}`,tableRowRemoveButtons:a=>`Variable editor Table Remove button ${a}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}},Annotations:{marker:"data-testid annotation-marker"},Rows:{Repeated:{ConfigSection:{warningMessage:"data-testid Repeated rows warning message"}}}},Dashboards:{url:"/dashboards",dashboards:a=>`Dashboard search item ${a}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",SettingsDropdown:"data-testid public dashboard settings dropdown",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"}},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:a=>`/d-solo/${a}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"data-testid playlist-form-delete-item"},BrowseDashboards:{table:{body:"data-testid browse-dashboards-table",row:a=>`data-testid ${a} row`,checkbox:a=>`data-testid ${a} checkbox`}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button",pauseSwitch:"data-testid public dashboard pause switch"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:a=>`data-testid dashboards-list-item-${a}`}}},ProfilePage:{url:"/profile"}},components:t}},34547:(X,L,e)=>{"use strict";e.d(L,{As:()=>V,B5:()=>t,Bd:()=>Q,FI:()=>b,IG:()=>N,Jp:()=>m,KC:()=>C,LB:()=>d,M8:()=>$,Q8:()=>a,QH:()=>U,Ss:()=>z,UV:()=>l,Y4:()=>J,ap:()=>o,b8:()=>F,bQ:()=>E,eK:()=>n,f3:()=>K,h2:()=>k,i3:()=>S,iT:()=>ne,jG:()=>w,jK:()=>M,kW:()=>y,kv:()=>c,l8:()=>u,o0:()=>g,pR:()=>h,pc:()=>O,pu:()=>p,q1:()=>i,v7:()=>H,wN:()=>v,wf:()=>x,wm:()=>I,xy:()=>r,yK:()=>f});var t=(ee=>(ee.Linear="linear",ee.Quad="quad",ee))(t||{}),n=(ee=>(ee.Clamped="clamped",ee.Mod="mod",ee))(n||{}),r=(ee=>(ee.Field="field",ee.Fixed="fixed",ee.Template="template",ee))(r||{}),a=(ee=>(ee.Field="field",ee.Fixed="fixed",ee.Mapping="mapping",ee))(a||{}),i=(ee=>(ee.Auto="auto",ee.Coords="coords",ee.Geohash="geohash",ee.Lookup="lookup",ee))(i||{}),y=(ee=>(ee.Count="count",ee.Size="size",ee))(y||{}),c=(ee=>(ee.auto="auto",ee.ge="ge",ee.le="le",ee.unknown="unknown",ee))(c||{}),l=(ee=>(ee.Ascending="Ascending",ee.Descending="Descending",ee))(l||{}),d=(ee=>(ee.Auto="auto",ee.Bottom="bottom",ee.Hidden="hidden",ee.Left="left",ee.Right="right",ee.Top="top",ee))(d||{}),f=(ee=>(ee.Series="series",ee.Text="text",ee))(f||{}),m=(ee=>(ee.Always="always",ee.Auto="auto",ee.Never="never",ee))(m||{}),u=(ee=>(ee.Bars="bars",ee.Line="line",ee.Points="points",ee))(u||{}),h=(ee=>(ee.Constant="constant",ee.NegativeY="negative-Y",ee))(h||{}),C=(ee=>(ee.Linear="linear",ee.Smooth="smooth",ee.StepAfter="stepAfter",ee.StepBefore="stepBefore",ee))(C||{}),x=(ee=>(ee.Linear="linear",ee.Log="log",ee.Ordinal="ordinal",ee.Symlog="symlog",ee))(x||{}),b=(ee=>(ee.Hue="hue",ee.None="none",ee.Opacity="opacity",ee.Scheme="scheme",ee))(b||{}),g=(ee=>(ee.None="none",ee.Normal="normal",ee.Percent="percent",ee))(g||{}),p=(ee=>(ee[ee.After=1]="After",ee[ee.Before=-1]="Before",ee[ee.Center=0]="Center",ee))(p||{}),v=(ee=>(ee[ee.Horizontal=0]="Horizontal",ee[ee.Vertical=1]="Vertical",ee))(v||{}),E=(ee=>(ee[ee.Down=-1]="Down",ee[ee.Left=-1]="Left",ee[ee.Right=1]="Right",ee[ee.Up=1]="Up",ee))(E||{});const P={dash:[]};var S=(ee=>(ee.Area="area",ee.Dashed="dashed",ee.DashedAndArea="dashed+area",ee.Line="line",ee.LineAndArea="line+area",ee.Off="off",ee.Series="series",ee))(S||{}),M=(ee=>(ee.Hidden="hidden",ee.List="list",ee.Table="table",ee))(M||{});const R={calcs:[]};var I=(ee=>(ee.Auto="auto",ee.Horizontal="horizontal",ee.Vertical="vertical",ee))(I||{});const A={timezone:[]};var O=(ee=>(ee.Background="background",ee.BackgroundSolid="background_solid",ee.None="none",ee.Value="value",ee))(O||{}),N=(ee=>(ee.Area="area",ee.Line="line",ee.None="none",ee))(N||{}),o=(ee=>(ee.Auto="auto",ee.Center="center",ee))(o||{}),w=(ee=>(ee.Auto="auto",ee.Name="name",ee.None="none",ee.Value="value",ee.ValueAndName="value_and_name",ee))(w||{}),K=(ee=>(ee.Multi="multi",ee.None="none",ee.Single="single",ee))(K||{}),V=(ee=>(ee.Ascending="asc",ee.Descending="desc",ee.None="none",ee))(V||{});const _={calcs:[]};var U=(ee=>(ee.Basic="basic",ee.Gradient="gradient",ee.Lcd="lcd",ee))(U||{}),$=(ee=>(ee.Color="color",ee.Hidden="hidden",ee.Text="text",ee))($||{}),k=(ee=>(ee.Auto="auto",ee.BasicGauge="basic",ee.ColorBackground="color-background",ee.ColorBackgroundSolid="color-background-solid",ee.ColorText="color-text",ee.Custom="custom",ee.Gauge="gauge",ee.GradientGauge="gradient-gauge",ee.Image="image",ee.JSONView="json-view",ee.LcdGauge="lcd-gauge",ee.Sparkline="sparkline",ee))(k||{}),H=(ee=>(ee.Basic="basic",ee.Gradient="gradient",ee))(H||{});const j={fields:[],reducer:[]};var z=(ee=>(ee.Lg="lg",ee.Md="md",ee.Sm="sm",ee))(z||{}),F=(ee=>(ee.CSV="csv",ee.Date="date",ee.Distributed="distributed",ee.DoubleQuote="doublequote",ee.Glob="glob",ee.HTML="html",ee.JSON="json",ee.Lucene="lucene",ee.PercentEncode="percentencode",ee.Pipe="pipe",ee.QueryParam="queryparam",ee.Raw="raw",ee.Regex="regex",ee.SQLString="sqlstring",ee.SingleQuote="singlequote",ee.Text="text",ee.UriEncode="uriencode",ee))(F||{}),J=(ee=>(ee.exact="exact",ee.none="none",ee.numbers="numbers",ee.signature="signature",ee))(J||{}),Q=(ee=>(ee.EQ="eq",ee.GT="gt",ee.GTE="gte",ee.LT="lt",ee.LTE="lte",ee.NEQ="neq",ee))(Q||{});const Z={align:"auto",inspect:!1},ne="browser"},49299:(X,L,e)=>{"use strict";e.d(L,{AU:()=>a,vC:()=>r});var t=e(34547);const n="10.2.0-pre",r={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:t.wm.Auto,showValue:t.Jp.Auto,stacking:t.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},a={fillOpacity:80,gradientMode:t.FI.None,lineWidth:1}},28849:(X,L,e)=>{"use strict";e.d(L,{v:()=>r});var t=e(34547);const n="10.2.0-pre",r={displayMode:t.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0,valueMode:t.M8.Color}},59917:(X,L,e)=>{"use strict";e.d(L,{v:()=>n});const t="10.2.0-pre",n={selectedSeries:0}},86534:(X,L,e)=>{"use strict";e.d(L,{v:()=>n});const t="10.2.0-pre",n={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0}},8537:(X,L,e)=>{"use strict";e.d(L,{vC:()=>n});const t="10.2.0-pre",n={layers:[]},r={allLayers:!0,id:"zero",lat:0,lon:0,zoom:1};var a=(y=>(y.Details="details",y.None="none",y))(a||{}),i=(y=>(y.Coords="coords",y.Fit="fit",y.Zero="zero",y))(i||{})},35856:(X,L,e)=>{"use strict";e.d(L,{vC:()=>i});var t=e(34547);const n="10.2.0-pre";var r=(y=>(y.Opacity="opacity",y.Scheme="scheme",y))(r||{}),a=(y=>(y.Exponential="exponential",y.Linear="linear",y))(a||{});const i={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:t.Jp.Auto,tooltip:{show:!0,yHistogram:!1}}},9962:(X,L,e)=>{"use strict";e.d(L,{AU:()=>a,vC:()=>r});var t=e(34547);const n="10.2.0-pre",r={bucketOffset:0},a={fillOpacity:80,gradientMode:t.FI.None,lineWidth:1}},33926:(X,L,e)=>{"use strict";e.d(L,{v:()=>n});const t="10.2.0-pre",n={showImage:!0}},80883:(X,L,e)=>{"use strict";e.d(L,{vC:()=>y});const t="10.2.0-pre";var n=(c=>(c.Donut="donut",c.Pie="pie",c))(n||{}),r=(c=>(c.Name="name",c.Percent="percent",c.Value="value",c))(r||{}),a=(c=>(c.Percent="percent",c.Value="value",c))(a||{});const i={values:[]},y={displayLabels:[]}},84643:(X,L,e)=>{"use strict";e.d(L,{v:()=>r});var t=e(34547);const n="10.2.0-pre",r={colorMode:t.pc.Value,graphMode:t.IG.Area,justifyMode:t.ap.Auto,textMode:t.jG.Auto}},42180:(X,L,e)=>{"use strict";e.d(L,{AU:()=>a,vC:()=>r});var t=e(34547);const n="10.2.0-pre",r={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:t.Jp.Auto},a={fillOpacity:70,lineWidth:0}},39235:(X,L,e)=>{"use strict";e.d(L,{AU:()=>a,vC:()=>r});var t=e(34547);const n="10.2.0-pre",r={colWidth:.9,rowHeight:.9,showValue:t.Jp.Auto},a={fillOpacity:70,lineWidth:1}},66303:(X,L,e)=>{"use strict";e.d(L,{v:()=>r});var t=e(34547);const n="10.2.0-pre",r={cellHeight:t.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]}},53193:(X,L,e)=>{"use strict";e.d(L,{vC:()=>y});const t="10.2.0-pre";var n=(c=>(c.Code="code",c.HTML="html",c.Markdown="markdown",c))(n||{}),r=(c=>(c.Go="go",c.Html="html",c.Json="json",c.Markdown="markdown",c.Plaintext="plaintext",c.Sql="sql",c.Typescript="typescript",c.Xml="xml",c.Yaml="yaml",c))(r||{});const a="plaintext",i={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},y={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"}},51676:(X,L,e)=>{"use strict";e.d(L,{vC:()=>c});var t=e(34547);const n="10.2.0-pre";var r=(l=>(l.Auto="auto",l.Manual="manual",l))(r||{}),a=(l=>(l.Lines="lines",l.Points="points",l.PointsAndLines="points+lines",l))(a||{});const i={exclude:[]},y={label:t.Jp.Auto,show:"points"},c={series:[]}},41406:(X,L,e)=>{"use strict";e.d(L,{AU:()=>S,Bd:()=>y,G_:()=>a,Gu:()=>d,H3:()=>h,Hi:()=>x,NU:()=>v,Ql:()=>R,SJ:()=>M,Vb:()=>E,ZM:()=>P,bn:()=>r,gW:()=>i,mQ:()=>g});const t={tags:[]},n={exclude:!1,ids:[]},r={list:[]},a={enable:!0,hide:!1},i={id:"00000000-0000-0000-0000-000000000000",multi:!1,options:[],skipUrlSync:!1};var y=(I=>(I[I.never=0]="never",I[I.onDashboardLoad=1]="onDashboardLoad",I[I.onTimeRangeChanged=2]="onTimeRangeChanged",I))(y||{}),c=(I=>(I[I.dontHide=0]="dontHide",I[I.hideLabel=1]="hideLabel",I[I.hideVariable=2]="hideVariable",I))(c||{}),l=(I=>(I[I.alphabeticalAsc=1]="alphabeticalAsc",I[I.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",I[I.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",I[I.alphabeticalDesc=2]="alphabeticalDesc",I[I.disabled=0]="disabled",I[I.numericalAsc=3]="numericalAsc",I[I.numericalDesc=4]="numericalDesc",I))(l||{}),d=(I=>(I.Done="Done",I.Error="Error",I.Loading="Loading",I.NotStarted="NotStarted",I.Streaming="Streaming",I))(d||{});const f={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var m=(I=>(I.ContinuousBlPu="continuous-BlPu",I.ContinuousBlYlRd="continuous-BlYlRd",I.ContinuousBlues="continuous-blues",I.ContinuousGrYlRd="continuous-GrYlRd",I.ContinuousGreens="continuous-greens",I.ContinuousPurples="continuous-purples",I.ContinuousRdYlGr="continuous-RdYlGr",I.ContinuousReds="continuous-reds",I.ContinuousYlBl="continuous-YlBl",I.ContinuousYlRd="continuous-YlRd",I.Fixed="fixed",I.PaletteClassic="palette-classic",I.PaletteClassicByName="palette-classic-by-name",I.Shades="shades",I.Thresholds="thresholds",I))(m||{});const u={h:9,w:12,x:0,y:0};var h=(I=>(I.Absolute="absolute",I.Percentage="percentage",I))(h||{});const C={steps:[]};var x=(I=>(I.RangeToText="range",I.RegexToText="regex",I.SpecialValue="special",I.ValueToText="value",I))(x||{}),b=(I=>(I.Empty="empty",I.False="false",I.NaN="nan",I.Null="null",I.NullAndNan="null+nan",I.True="true",I))(b||{}),g=(I=>(I[I.Crosshair=1]="Crosshair",I[I.Off=0]="Off",I[I.Tooltip=2]="Tooltip",I))(g||{});const p=0,v={links:[],repeatDirection:"h",tags:[],targets:[],transformations:[],transparent:!1},E={overrides:[]},P={id:""},S={links:[],mappings:[]},M={collapsed:!1,panels:[]},R={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:36,tags:[],timezone:"browser"}},61606:(X,L,e)=>{"use strict";e.d(L,{Ql:()=>r});var t=e(41406),n=(u=>(u[u.dontHide=0]="dontHide",u[u.hideLabel=1]="hideLabel",u[u.hideVariable=2]="hideVariable",u))(n||{});const r=t.Ql,a={...t.gW,description:null,hide:0,datasource:null},i=t.NU,y=t.SJ,c=t.AU,l=t.Vb,d=t.ZM,f=t.G_,m=t.bn},94162:(X,L,e)=>{"use strict";e.d(L,{M:()=>i,Z:()=>r});var t=e(86832),n=e.n(t);class r{constructor(c){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",c){if(c.columns)for(const l of c.columns)this.addColumn(l);if(c.rows)for(const l of c.rows)this.addRow(l)}}sort(c){c.col===null||c.col===void 0||this.columns.length<=c.col||(this.rows.sort((l,d)=>(l=l[c.col],d=d[c.col],+(l==null)-+(d==null)||+(l>d)||-(l<d))),c.desc&&this.rows.reverse(),this.columns[c.col].sort=!0,this.columns[c.col].desc=c.desc)}addColumn(c){this.columnMap[c.text]||(this.columns.push(c),this.columnMap[c.text]=c)}addRow(c){this.rows.push(c)}}function a(y,c,l){let d=!1;for(let f=0;f<y.length;f++)if(c[f]!==void 0&&l[f]!==void 0){if(c[f]!==l[f])return!1}else(c[f]===void 0||l[f]===void 0)&&(d=!0);return d}function i(y,...c){const l=y||new r;if(arguments.length===1)return l;if(arguments.length===2)return l.columns=c[0].hasOwnProperty("columns")?[...c[0].columns]:[],l.rows=c[0].hasOwnProperty("rows")?[...c[0].rows]:[],l;const d=c.filter(b=>!!b.columns),f={},m=d.slice().reduce((b,g)=>(g.columns.forEach(p=>{const{text:v}=p;f[v]===void 0&&(f[v]=b.length,b.push(p))}),b),[]),u=d.map(b=>b.columns.map(g=>f[g.text])),h=d.reduce((b,g,p)=>{const v=u[p];return g.rows.forEach(E=>{const P=[];v.forEach((S,M)=>{P[S]=E[M]}),b.push(P)}),b},[]),C={},x=h.reduce((b,g,p)=>{if(!C[p]){let v=p+1;for(;v<h.length;){const E=(0,t.findIndex)(h,P=>a(m,g,P),v);if(E>-1){const P=h[E];for(let S=0;S<m.length;S++)g[S]===void 0&&P[S]!==void 0&&(g[S]=P[S]);C[E]=P,v=E+1}else break}b.push(g)}return b},[]);return l.columns=m,l.rows=x,l}},43686:(X,L,e)=>{"use strict";e.d(L,{e:()=>n});var t=e(77960);const n=(0,t.PH)("core/cleanUpState")},97316:(X,L,e)=>{"use strict";e.d(L,{$l:()=>t.$l});var t=e(59138),n=e(12813)},28833:(X,L,e)=>{"use strict";e.d(L,{Z:()=>r,h:()=>n});var t=e(91395);const n=new t.F,r=n},18330:(X,L,e)=>{"use strict";e.d(L,{x:()=>i});var t=e(41407),n=e(39953),r=e(82803),a=e(39285);const i=n.forwardRef(({icon:c,children:l,onClick:d,...f},m)=>{const u=(0,r.wW)(y);return n.createElement("button",{...f,className:u.action,onClick:d},n.createElement(a.J,{name:c,size:"xl"}),l)});i.displayName="CardButton";const y=c=>({action:(0,t.css)`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${c.colors.background.secondary};
      border-radius: ${c.shape.radius.default};
      color: ${c.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${c.colors.emphasize(c.colors.background.secondary)};
      }
    `})},80583:(X,L,e)=>{"use strict";e.d(L,{P:()=>i});var t=e(41407),n=e(39953),r=e(82803),a=e(68497);const i=({onClick:c,"aria-label":l,style:d})=>{const f=(0,r.wW)(y);return n.createElement(a.h,{"aria-label":l??"Close",className:f,name:"times",onClick:c,style:d,tooltip:"Close"})},y=c=>(0,t.css)`
  position: absolute;
  right: ${c.spacing(.5)};
  top: ${c.spacing(1)};
`},43997:(X,L,e)=>{"use strict";e.d(L,{W:()=>a});var t=e(41407),n=e(39953),r=e(82803);function a(y){const{description:c,suffix:l,feature:d}=y,f=`Learn more about ${d}`,m=(0,r.wW)(i);return n.createElement("span",{className:m.container},c,n.createElement("a",{"aria-label":f,href:`https://grafana.com/docs/grafana/next/datasources/${l}`,rel:"noreferrer",target:"_blank"},f))}const i=y=>({container:(0,t.css)({color:y.colors.text.secondary,a:(0,t.css)({color:y.colors.text.link,textDecoration:"underline",marginLeft:"5px","&:hover":{textDecoration:"none"}})})})},13273:(X,L,e)=>{"use strict";e.d(L,{w:()=>c});var t=e(39953),n=e(48993),r=e(69171),a=e(38637);const i=/^(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])$/,y=(l,d)=>!(l.match(d)||!l),c=l=>{const d=l.validationRegex||i,[f,m]=(0,t.useState)(()=>l.value?y(l.value,d):!1);(0,n.Z)(()=>{m(y(l.value,d))},500,[l.value]);const u={labelWidth:26,disabled:l.disabled??!1,invalid:f,error:l.isInvalidError};return l.label&&(u.label=l.label,u.tooltip=l.tooltip||""),t.createElement(r._,{...u},t.createElement(a.I,{type:"text",placeholder:l.placeholder||"0",width:l.width||40,onChange:h=>{l.onChange(h.currentTarget.value)},value:l.value,"aria-label":l.ariaLabel||"interval input"}))}},93114:(X,L,e)=>{"use strict";e.d(L,{X:()=>c});var t=e(41407),n=e(39953),r=e(82803),a=e(39285),i=e(38637),y=e(43324);const c=({name:d,onChange:f,verifyLayerNameUniqueness:m,overrideStyles:u})=>{const h=(0,r.wW)(l),[C,x]=(0,n.useState)(!1),[b,g]=(0,n.useState)(null),p=R=>{x(!0)},v=R=>{if(x(!1),b){g(null);return}d!==R&&f(R)},E=R=>{const I=R.currentTarget.value.trim();if(I.length===0){g("An empty layer name is not allowed");return}if(m&&!m(I)&&I!==d){g("Layer name already exists");return}b&&g(null)},P=R=>{v(R.currentTarget.value.trim())},S=R=>{R.key==="Enter"&&v(R.currentTarget.value)},M=R=>{R.target.select()};return n.createElement(n.Fragment,null,n.createElement("div",{className:h.wrapper},!C&&n.createElement("button",{className:h.layerNameWrapper,title:"Edit layer name",onClick:p,"data-testid":"layer-name-div"},n.createElement("span",{className:u?"":h.layerName},d),n.createElement(a.J,{name:"pen",className:h.layerEditIcon,size:"sm"})),C&&n.createElement(n.Fragment,null,n.createElement(i.I,{type:"text",defaultValue:d,onBlur:P,autoFocus:!0,onKeyDown:S,onFocus:M,invalid:b!==null,onChange:E,className:h.layerNameInput,"data-testid":"layer-name-input"}),b&&n.createElement(y.S,{horizontal:!0},b))))},l=d=>({wrapper:(0,t.css)`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${d.spacing(.5)};
    `,layerNameWrapper:(0,t.css)`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${d.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${d.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${d.colors.action.hover};
        border: 1px dashed ${d.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${d.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:(0,t.css)`
      font-weight: ${d.typography.fontWeightMedium};
      color: ${d.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${d.spacing(.5)};
    `,layerEditIcon:(0,t.cx)((0,t.css)`
        margin-left: ${d.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:(0,t.css)`
      max-width: 300px;
      margin: -4px 0;
    `})},1188:(X,L,e)=>{"use strict";e.d(L,{G:()=>r});var t=e(39953),n=e(23062);const r=a=>{const{children:i,storageKey:y,defaultValue:c}=a,[l,d]=(0,t.useState)({value:n.Z.getObject(a.storageKey,a.defaultValue)});(0,t.useEffect)(()=>{const u=h=>{h.key===y&&d({value:n.Z.getObject(a.storageKey,a.defaultValue)})};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}});const f=u=>{try{n.Z.setObject(y,u)}catch(h){console.error(h)}d({value:u})},m=()=>{try{n.Z.delete(y)}catch(u){console.log(u)}d({value:c})};return t.createElement(t.Fragment,null,i(l.value,f,m))}},30359:(X,L,e)=>{"use strict";e.d(L,{Y:()=>y});var t=e(86832),n=e.n(t),r=e(39953),a=e(38637),i=e(96227);class y extends r.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=r.createRef(),this.updateValue=()=>{const l=this.inputRef.current?.value;let d=!1,f="";const m=this.props.min,u=this.props.max;let h=l!==""?Number(l):void 0;h&&!Number.isNaN(h)&&(m!=null&&h<m?(f=m.toString(),d=!0):u!=null&&h>u?(f=u.toString(),d=!0):f=l??"",this.setState({text:f,inputCorrected:d})),d&&this.updateValueDebounced(),!Number.isNaN(h)&&h!==this.props.value&&this.props.onChange(h)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=l=>{this.setState({text:l.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=l=>{l.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(l){if(this.props.value!==l.value){const d=isNaN(this.props.value)?"":`${this.props.value}`;d!==this.state.text&&this.setState({text:d})}}renderInput(){return r.createElement(a.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width,suffix:this.props.suffix})}render(){const{inputCorrected:l}=this.state;if(l){let d="",{min:f,max:m}=this.props;return m==null?f!=null&&(d=`< ${f}`):f!=null?d=`${f} < > ${m}`:d=`> ${m}`,r.createElement(i.g,{invalid:l,error:`Out of range ${d}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},46108:(X,L,e)=>{"use strict";e.d(L,{w:()=>r});var t=e(39953),n=e(30359);const r=({value:a,onChange:i,item:y})=>{const{settings:c}=y,l=(0,t.useCallback)(d=>{i(c?.integer&&d!==void 0?Math.floor(d):d)},[i,c?.integer]);return t.createElement(n.Y,{value:a,min:c?.min,max:c?.max,step:c?.step,placeholder:c?.placeholder,onChange:l})}},52234:(X,L,e)=>{"use strict";e.d(L,{p:()=>l});var t=e(41407),n=e(93986),r=e(66894),a=e(39953),i=e(82803),y=e(35226),c=e(30359);const l=({value:m,onChange:u,item:h})=>{const C=(0,a.useRef)(null),{settings:x}=h,b=x?.min||0,g=x?.max||100,p=x?.step,v=x?.marks||{[b]:b,[g]:g},E=x?.included,P=x?.ariaLabelForHandle,S=75,M=!0,R=(0,i.l4)(),[I,A]=(0,a.useState)(m??b),[O,N]=(0,a.useState)(S);(0,a.useEffect)(()=>{m!=null&&m!==I&&A(m)},[m,I]),(0,a.useEffect)(()=>{const U=getComputedStyle(C.current),$=U.getPropertyValue("font-weight")||"normal",k=U.getPropertyValue("font-size")||"16px",H=U.getPropertyValue("font-family")||"Arial",j="0",z=4,F=8,J=Math.max((g+(p||0)).toString().length,(g-(p||0)).toString().length)+z,Q=j.repeat(J),Z=d(Q,`${$} ${k} ${H}`);Z&&N(Z+F*2)},[g,p]);const o=(0,a.useCallback)(U=>{const $=typeof U=="number"?U:U[0];A($),u&&u($)},[A,u]),w=(0,a.useCallback)(U=>{let $=U;(Number.isNaN($)||!$)&&($=0),A($),u&&u($)},[u]),K=(0,y.W)(R,M,!!v),V=f(R,O),_=M?[]:[K.sliderInputVertical];return a.createElement("div",{className:(0,t.cx)(K.container,K.slider)},a.createElement(n.Global,{styles:K.slider}),a.createElement("label",{className:(0,t.cx)(K.sliderInput,..._)},a.createElement(r.Z,{min:b,max:g,step:p,defaultValue:m,value:I,onChange:o,vertical:!M,reverse:!1,ariaLabelForHandle:P,marks:v,included:E}),a.createElement("span",{className:V.numberInputWrapper,ref:C},a.createElement(c.Y,{value:I,onChange:w,max:g,min:b,step:p}))))};function d(m,u){const C=document.createElement("canvas").getContext("2d");return C?(C.font=u,C.measureText(m).width):null}const f=(m,u)=>({numberInputWrapper:(0,t.css)`
      margin-left: ${m.spacing(3)};
      max-height: 32px;
      max-width: ${u}px;
      min-width: ${u}px;
      overflow: visible;
      width: 100%;
    `})},40866:(X,L,e)=>{"use strict";e.d(L,{A:()=>a});var t=e(39953),n=e(68421),r=e(38637);const a=({value:i,onChange:y,item:c,suffix:l})=>{const d=c.settings?.useTextarea?n.K:r.I,f=(0,t.useCallback)(m=>{let u=i??"";"key"in m?m.key==="Enter"&&!c.settings?.useTextarea&&(u=m.currentTarget.value.trim()):u=m.currentTarget.value.trim(),u!==i&&y(u===""?void 0:u)},[i,c.settings?.useTextarea,y]);return t.createElement(d,{placeholder:c.settings?.placeholder,defaultValue:i||"",rows:c.settings?.useTextarea&&c.settings.rows||5,onBlur:f,onKeyDown:f,suffix:l})}},65132:(X,L,e)=>{"use strict";e.d(L,{V:()=>f});var t=e(39953),n=e(66883),r=e(28425),a=e(34032);const i=2,y=5,c=C=>{const x=C.match(new RegExp('<style type="text/css">([\\s\\S]*?)<\\/style>'));return x?x[0]:null},l=C=>C.match(new RegExp(`<svg.*id\\s*=\\s*(['"])(.*?)\\1`))?.[i],d=C=>{let x=l(C);if(!x){x=`x${(0,a.Z)()}`;const g=C.indexOf("<svg")+y;C=C.substring(0,g)+`id="${x}" `+C.substring(g)}let b=c(C);if(b){let g=b.replace(/(#(.*?))?\./g,`#${x} .`);C=C.replace(b,g)}return C},f=C=>{const{cleanStyle:x,...b}=C;return t.createElement(n.Z,{...b,cacheRequests:!0,preProcessor:x?h:u})};let m=new Map;function u(C){let x=m.get(C);return x||(x=r.QX.sanitizeSVGContent(C),m.set(C,x)),x}function h(C){let x=m.get(C);return x||(x=r.QX.sanitizeSVGContent(C),x.indexOf('<style type="text/css">')>-1&&(x=d(x)),m.set(C,x)),x}},98837:(X,L,e)=>{"use strict";e.d(L,{Fz:()=>P});var t=e(41407),n=e(97368),r=e.n(n),a=e(39953),i=e(20653),y=e(71519),c=e(75766),l=e(72639),d=e(82803),f=e(38637),m=e(9558),u=e(28833),h=e(26843),C=e(97125),x=e(32688);function b(){return x.config.featureToggles.nestedFolders||x.config.featureToggles.newBrowseDashboards}var g=e(44622),p=e(21527);const v="+ Add new",E="-10";function P(I){const{dashboardId:A,allowEmpty:O,onChange:N,filter:o,enableCreateNew:w,inputId:K,onClear:V,enableReset:_,initialFolderUid:U,initialTitle:$="",permissionLevel:k=p.PermissionLevelString.Edit,rootName:H,showRoot:j=!0,skipInitialLoad:z,searchQueryType:F,customAdd:J,folderWarning:Q}=I,Z=H??b()?"Dashboards":"General",[ne,ee]=(0,a.useState)(null),[de,Pe]=(0,a.useState)(!1),[ye,he]=(0,a.useState)(""),[me,De]=(0,a.useState)(ne?.title??""),le=(0,d.wW)(R),Ee=typeof V=="function",be=(0,a.useCallback)(async Ve=>{const Ue=await(0,g.ZL)(Ve,k,F),ze=S(Ue,o);return(0,l.ff)("grafana_folder_picker_results_loaded",{results:ze.length,searchTermLength:Ve.length,enableCreateNew:!!w}),(C.Vt.hasPermission(p.AccessControlAction.DashboardsWrite)||C.Vt.hasPermission(p.AccessControlAction.DashboardsCreate))&&Z?.toLowerCase().startsWith(Ve.toLowerCase())&&j&&ze.unshift({label:Z,value:""}),_&&Ve===""&&$!==""&&!ze.find(St=>St.label===$)&&ze.unshift({label:$,value:U}),w&&J?[...ze,{value:E,label:v,title:Ve}]:ze},[_,U,$,k,Z,j,F,o,w,J]),ge=(0,a.useMemo)(()=>r()(be,300,{leading:!0}),[be]),ue=async()=>{const Ve={label:$,value:void 0},Ue={label:Z,value:""},it=await be("");let ze=null;U!=null?ze=it.find(Xe=>Xe.value===U)||null:_&&$?ze=Ve:U&&(ze=it.find(Xe=>Xe.id===U)||null),!ze&&!O&&(C.Vt.isEditor?ze=Ue:!!A?ze=Ve:ze=it.length>0?it[0]:Ve),!de&&ee(ze)};(0,a.useEffect)(()=>{ne&&ne.value!==U&&!de&&ne.value&&ne.label&&N({uid:ne.value,title:ne.label})},[ne,U]),(0,i.Z)(async()=>{if(z){const Ve=await M({getFolder:g.Pb,folderUid:U,folderName:$});ee(Ve)}await ue()},[z,U,$]),(0,a.useEffect)(()=>{ne&&ne.id===E&&Pe(!0)},[ne]);const Ie=(0,a.useCallback)((Ve,Ue)=>{if(Ve?.value===E)ee({id:E,title:ye}),De(ye);else{if(Ve||(Ve={value:"",label:Z}),Ue.action==="clear"&&V){V();return}ee(Ve),N({uid:Ve.value,title:Ve.label})}},[N,V,Z,ye]),ot=(0,a.useCallback)(async Ve=>{if(Q?.warningCondition(Ve))return(0,l.ff)("grafana_folder_picker_folder_created",{status:"failed_condition"}),!1;const Ue=await(0,g.L6)({title:Ve});let it={value:"",label:"Not created"};return Ue.uid?((0,l.ff)("grafana_folder_picker_folder_created",{status:"success"}),u.Z.emit(y.SI.alertSuccess,["Folder Created","OK"]),it={value:Ue.uid,label:Ue.title},ee(Ue),Ie(it,{action:"create-option",option:it})):((0,l.ff)("grafana_folder_picker_folder_created",{status:"failed"}),u.Z.emit(y.SI.alertError,["Folder could not be created"])),it},[Q,Ie]),Qe=(0,a.useCallback)(Ve=>{const Ue=!!J?.disallowValues;if(Ve.key==="Enter"&&Ue&&!J?.isAllowedValue(me)){Ve.preventDefault();return}switch(Ve.key){case"Enter":{ot(ne?.title),Pe(!1);break}case"Escape":ee({value:"",label:Z}),Pe(!1)}},[J?.disallowValues,J?.isAllowedValue,me,ot,ne?.title,Z]),Me=Ve=>{const Ue=Ve.currentTarget.value;De(Ue),ee({id:void 0,title:Ue})},Ne=()=>{ee({value:"",label:Z}),Pe(!1)},qe=(Ve,{action:Ue})=>{Ue==="input-change"&&he(it=>Ve),Ue==="menu-close"&&he(it=>Ve)},bt=()=>Q?.warningCondition(me)?a.createElement(Q.warningComponent,null):null,Fe=()=>Q?.warningCondition(ye)?a.createElement(Q.warningComponent,null):null;return de?a.createElement(a.Fragment,null,a.createElement(bt,null),a.createElement("div",{className:le.newFolder},"Press enter to create the new folder."),a.createElement(f.I,{width:30,autoFocus:!0,value:me,onChange:Me,onKeyDown:Qe,placeholder:"Press enter to confirm new folder.",onBlur:Ne})):a.createElement("div",{"data-testid":c.wl.components.FolderPicker.containerV2},a.createElement(Fe,null),a.createElement(m.gY,{inputId:K,"aria-label":c.wl.components.FolderPicker.input,loadingMessage:(0,h.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:ne,inputValue:ye,onInputChange:qe,value:ne,allowCustomValue:w&&!J,loadOptions:ge,onChange:Ie,onCreateOption:ot,isClearable:Ee}))}function S(I,A){return(A?A(I):I).map(N=>({label:N.title,value:N.uid}))}async function M({folderName:I,folderUid:A,getFolder:O}){if(A==null)throw new Error("folderUid is not found.");return I?{label:I,value:A}:{label:(await O(A)).title,value:A}}const R=I=>({newFolder:(0,t.css)`
    color: ${I.colors.warning.main};
    font-size: ${I.typography.bodySmall.fontSize};
    padding-bottom: ${I.spacing(1)};
  `})},42039:(X,L,e)=>{"use strict";e.d(L,{D:()=>C});var t=e(41407),n=e(39953),r=e(6413),a=e(55705),i=e(82803),y=e(9558),c=e(39285),l=e(26843),d=e(72899);class f extends n.Component{constructor(g){super(g)}render(){const{label:g,removeIcon:p,count:v,onClick:E}=this.props,{color:P}=(0,d.Bx)(g),S={backgroundColor:P},M=v!==0&&n.createElement("span",{className:"tag-count-label"},`(${v})`);return n.createElement("span",{className:"label label-tag",style:S},p&&n.createElement(c.J,{onClick:E,name:"times"}),g," ",M)}}const m=({data:b,className:g,label:p,isFocused:v,innerProps:E})=>{const P=(0,i.wW)(u);return n.createElement("div",{className:(0,t.cx)(P.option,v&&P.optionFocused),"aria-label":"Tag option",...E},n.createElement("div",{className:`tag-filter-option ${g||""}`},typeof p=="string"?n.createElement(f,{label:p,removeIcon:!1,count:b.count??0}):p))},u=b=>({option:(0,t.css)`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${b.colors.background.secondary};
      }
    `,optionFocused:(0,t.css)`
      background: ${b.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),h=(b,g)=>RegExp((0,a.GE)(g),"i").test(b.value),C=({allowCustomValue:b=!1,formatCreateLabel:g,hideValues:p,inputId:v,isClearable:E,onChange:P,placeholder:S,tagOptions:M,tags:R,width:I})=>{const A=(0,i.wW)(x),O=R.map(J=>({value:J,label:J,count:0})),[N,o]=(0,n.useState)(O),[w,K]=(0,n.useState)(!1),[V,_]=(0,n.useState)(R),[U,$]=(0,n.useState)(O),k=(0,n.useMemo)(()=>R.join(),[R]),H=(0,n.useCallback)(async()=>(await M()).map(Q=>R.includes(Q.term)?{value:Q.term,label:Q.term,count:0}:{value:Q.term,label:Q.term,count:Q.count}),[M,R]),j=(0,n.useCallback)(async()=>{K(!0);const J=await H();b&&U.forEach(Q=>J.push(Q)),o(J),K(!1)},[b,U,H]);(0,n.useEffect)(()=>{R.length>0&&N.length===0&&j()},[j,N.length,R.length]),(0,n.useEffect)(()=>{R!==V&&(_(R),j())},[j,V,R]);const z=J=>{J.forEach(Q=>Q.count=0),P((J||[]).map(Q=>Q.value)),b&&$(J.filter(Q=>!R.includes(Q)))},F={key:k,onFocus:j,isLoading:w,options:N,allowCreateWhileLoading:!0,allowCustomValue:b,formatCreateLabel:g,defaultOptions:!0,filterOption:h,getOptionLabel:J=>J.label,getOptionValue:J=>J.value,inputId:v,isMulti:!0,onChange:z,loadingMessage:(0,l.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,l.t)("tag-filter.no-tags","No tags found"),placeholder:S||(0,l.t)("tag-filter.placeholder","Filter by tag"),value:O,width:I,components:{Option:m,MultiValueLabel:()=>null,MultiValueRemove(J){const{data:Q}=J;return n.createElement(r.c.MultiValueRemove,{...J},n.createElement(f,{key:Q.label,label:Q.label,removeIcon:!0,count:Q.count}))},MultiValueContainer:p?()=>null:r.c.MultiValueContainer}};return n.createElement("div",{className:A.tagFilter},E&&R.length>0&&n.createElement("button",{className:A.clear,onClick:()=>z([])},"Clear tags"),n.createElement(y.NU,{...F,prefix:n.createElement(c.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};C.displayName="TagFilter";const x=b=>({tagFilter:(0,t.css)`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:(0,t.css)`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${b.colors.text.secondary};

    &:hover {
      color: ${b.colors.text.primary};
    }
  `})},56386:(X,L,e)=>{"use strict";e.d(L,{K:()=>f});var t=e(39953),n=e(97898),r=e(89591),a=e(96248),i=e(78832),y=e(42626),c=e(31276),l=e(80047);const d=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class f extends t.Component{constructor(){super(...arguments),this.getValueColor=(u,h,C)=>{const x=this.props.frames[u].fields[h];if(x.display){const b=x.display(C);if(b.color)return b.color}return n.R},this.prepConfig=(u,h,C)=>{this.panelContext=this.context;const{eventBus:x,sync:b}=this.panelContext;return(0,l.Nj)({frame:u,getTimeRange:C,eventBus:x,sync:b,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:u.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=u=>{const{legend:h,legendItems:C}=this.props;return!u||!C||!h||h.showLegend===!1?null:t.createElement(a.AY.Legend,{placement:h.placement},t.createElement(i.l,{placement:h.placement,items:C,displayMode:h.displayMode,readonly:!0}))}}render(){return t.createElement(y.d,{...this.props,fields:{x:u=>u.type===r.fS.time,y:u=>u.type===r.fS.number||u.type===r.fS.boolean||u.type===r.fS.string||u.type===r.fS.enum},prepConfig:this.prepConfig,propsToDiff:d,renderLegend:this.renderLegend})}}f.contextType=c.bb},80047:(X,L,e)=>{"use strict";e.d(L,{KN:()=>K,iK:()=>ne,Y:()=>ee,$m:()=>Q,Ur:()=>F,Nj:()=>U,AR:()=>z,SA:()=>J});var t=e(97898),n=e(69330),r=e(83502),a=e(40793),i=e(36316),y=e(89591),c=e(60695),l=e(10124),d=e(49231),f=e(82837),m=e(41406),u=e(34547),h=e(80115),C=e(42626),x=e(12714),b=e(69994),g=e(95966),p=e(92697),v=e(91249),E=e(50342),P=e(14197);const{round:S,min:M,ceil:R}=Math,I=2;let A=6;const O=E.Gj;function N(de,Pe,ye,he,me){(0,E.Qm)(ye,de,O,Pe,(De,le,Ee)=>{let be=he*le,ge=he*Ee;me(De,be,ge)})}function o(de){const{mode:Pe,numSeries:ye,isDiscrete:he,hasMappedNull:me,rowHeight:De=0,colWidth:le=0,showValue:Ee,mergeValues:be=!1,theme:ge,label:ue,formatValue:Ie,alignValue:ot="left",getTimeRange:Qe,getValueColor:Me,getFieldConfig:Ne,onHover:qe,onLeave:bt}=de;let Fe,Ve;const Ue=oe=>{Ve=Array(ye).fill(null).map(pe=>Array(oe).fill(null))},it=`500 ${Math.round(12*devicePixelRatio)}px ${ge.typography.fontFamily}`,ze=Array(ye).fill(null);let Xe=null;const St=[le,1/0],Bt=1-St[0],zt=(St[1]??1/0)*p.Z.pxRatio,qt=new Map,Qt=new Map;function yn(oe){qt.forEach((pe,Re)=>{oe.fillStyle=Re,oe.fill(pe)}),Qt.forEach((pe,Re)=>{oe.strokeStyle=Re,oe.stroke(pe)}),qt.clear(),Qt.clear()}function Zt(oe,pe,Re,ae,ve,xe,Ge,at,dt,st,Pt,we,Le){if(Ge<1)return;const Ke=Me(st+1,we),ht=Ne(st),xt=w(ht,Ke);if(Ve[st][Pt]={x:S(ve-Re),y:S(xe-ae),w:Ge,h:at,sidx:st+1,didx:Pt,fillColor:xt},Le){let lt=xt,Rt=qt.get(lt);if(Rt==null&&qt.set(lt,Rt=new Path2D),pe(Rt,ve,xe,Ge,at),dt){let Ut=Ke,Xt=Qt.get(Ut);Xt==null&&Qt.set(Ut,Xt=new Path2D),pe(Xt,ve+dt/2,xe+dt/2,Ge-dt,at-dt)}}else oe.beginPath(),pe(oe,ve,xe,Ge,at),oe.fillStyle=xt,oe.fill(),dt&&(oe.beginPath(),pe(oe,ve+dt/2,xe+dt/2,Ge-dt,at-dt),oe.strokeStyle=Ke,oe.lineWidth=dt,oe.stroke())}const re=(oe,pe,Re,ae)=>(p.Z.orient(oe,pe,(ve,xe,Ge,at,dt,st,Pt,we,Le,Ke,ht,xt,lt,Rt)=>{let Ut=S((ve.width||0)*p.Z.pxRatio),Xt=he(pe),$n=Xt&&me(pe);oe.ctx.save(),Rt(oe.ctx,oe.bbox.left,oe.bbox.top,oe.bbox.width,oe.bbox.height),oe.ctx.clip(),N(De,pe-1,ye,ht,(Mt,yt,At)=>{if(Pe===K.Changes)for(let Ht=0;Ht<Ge.length;Ht++){let tn=Ge[Ht];if(tn!=null||$n){let gn=Math.round(st(xe[Ht],at,Ke,we)),mn=Ht;for(;++mn<Ge.length&&(Ge[mn]===void 0||be&&Ge[mn]===tn););let Tn=mn===Ge.length?we+Ke+Ut:Math.round(st(xe[mn],at,Ke,we));Zt(oe.ctx,Rt,we,Le,gn,S(Le+yt),Tn-gn,S(At),Ut,Mt,Ht,tn,Xt),Ht=mn-1}}else if(Pe===K.Samples){let Ht=st(xe[1],at,Ke,we)-st(xe[0],at,Ke,we),tn=Ht*Bt,gn=S(M(zt,Ht-tn)-Ut),mn=gn/2;for(let Tn=Re;Tn<=ae;Tn++){let ln=Ge[Tn];if(ln!=null||$n){let Wn=st(xe[Tn],at,Ke,we);Zt(oe.ctx,Rt,we,Le,S(Wn-mn),S(Le+yt),gn,S(At),Ut,Mt,Tn,ln,Xt)}}}}),Xt&&(oe.ctx.lineWidth=Ut,yn(oe.ctx)),oe.ctx.restore()}),null),Te=Ie==null||Ee===u.Jp.Never?!1:(oe,pe,Re,ae)=>(oe.ctx.save(),oe.ctx.rect(oe.bbox.left,oe.bbox.top,oe.bbox.width,oe.bbox.height),oe.ctx.clip(),oe.ctx.font=it,oe.ctx.textAlign=Pe===K.Changes?ot:"center",oe.ctx.textBaseline="middle",p.Z.orient(oe,pe,(ve,xe,Ge,at,dt,st,Pt,we,Le,Ke,ht)=>{let xt=S((ve.width||0)*p.Z.pxRatio),Rt=he(pe)&&me(pe),Ut=S(Le+Tt[pe-1]);for(let Xt=0;Xt<Ge.length;Xt++)if(Ge[Xt]!=null||Rt){const $n=Ve[pe-1][Xt];if(!$n||$n.x>=Ke)continue;let Mt=Math.floor($n?.w/A);if(Ee===u.Jp.Auto&&Mt<2)continue;let yt=Ie(pe,Ge[Xt]),At=S($n.x+we+$n.w/2);Pe===K.Changes&&(ot==="left"?At=S($n.x+we+xt+I):ot==="right"&&(At=S($n.x+we+$n.w-xt-I))),oe.ctx.fillStyle=ge.colors.getContrastText($n.fillColor,3),oe.ctx.fillText(yt.slice(0,Mt),At,Ut)}}),oe.ctx.restore(),!1),We=oe=>{let pe=oe.over,Re="";for(let ae=32;ae<=126;ae++)Re+=String.fromCharCode(ae);A=Math.ceil(oe.ctx.measureText(Re).width/Re.length*p.Z.pxRatio),A+=2.5,pe.style.overflow="hidden",oe.root.querySelectorAll(".u-cursor-pt").forEach(ae=>{ae.style.borderRadius="0"})},Je=oe=>{Fe=Fe||new P.lW(0,0,oe.bbox.width,oe.bbox.height),Fe.clear(),Ue(oe.data[0].length),oe.series.forEach(pe=>{pe._paths=null})};function je(oe,pe,Re){if(ze.fill(null),Xe=null,!(oe<0))for(let ae=0;ae<Re.length;ae++){let ve=Re[ae];Fe.get(oe,ve,1,1,xe=>{(0,P.Pn)(oe,ve,xe.x,xe.y,xe.x+xe.w,xe.y+xe.h)&&(ze[xe.sidx]=xe,Math.abs(pe-ve)<=xe.h/2&&(Xe=xe))})}}const pt=Pe===K.Changes,ft={x:Pe===K.Changes,y:!1,dataIdx:(oe,pe)=>{if(pe===1){if(Fe.o.length===0&&Fe.q==null)for(const xe of Ve)for(const Ge of xe)Ge&&Fe.add(Ge);let Re=oe.cursor.left*p.Z.pxRatio,ae=oe.cursor.top*p.Z.pxRatio,ve=Xe;je(Re,ae,pt?Tt:[ae]),Xe!=null?Xe!==ve&&qe(Xe.sidx,Xe.didx,Xe):ve!=null&&bt()}return ze[pe]?.didx},points:{fill:"rgba(255,255,255,0.2)",bbox:(oe,pe)=>{let Re=ze[pe],ae=Re!=null;return{left:ae?Re.x/p.Z.pxRatio:-10,top:ae?Re.y/p.Z.pxRatio:-10,width:ae?Re.w/p.Z.pxRatio:0,height:ae?Re.h/p.Z.pxRatio:0}}}},Tt=Array(ye).fill(0),Ye=Array(ye).fill(0),Ce=[0,1];return{cursor:ft,xSplits:Pe===K.Samples?(oe,pe,Re,ae,ve,xe)=>{let Ge=[],at=oe.data[0][1]-oe.data[0][0],dt=R(ve/at);for(let st=0;st<oe.data[0].length;st+=dt){let Pt=oe.data[0][st];Pt>=Re&&Pt<=ae&&Ge.push(Pt)}return Ge}:null,xRange:oe=>{const pe=Qe();let Re=pe.from.valueOf(),ae=pe.to.valueOf();if(Pe===K.Samples){let Ge=(oe.data[0][1]-oe.data[0][0])/2;Re<=oe.data[0][0]&&(Re=oe.data[0][0]-Ge);let at=oe.data[0].length-1;ae>=oe.data[0][at]&&(ae=oe.data[0][at]+Ge)}return[Re,ae]},ySplits:oe=>(N(De,null,ye,oe.bbox.height,(pe,Re,ae)=>{Tt[pe]=S(Re+ae/2),Ye[pe]=oe.posToVal(Tt[pe]/p.Z.pxRatio,C.j)}),Ye),yValues:(oe,pe)=>pe.map((Re,ae)=>ue(ae+1)),yRange:Ce,drawPaths:re,drawPoints:Te,init:We,drawClear:Je}}function w(de,Pe){if(Pe[0]==="#"&&Pe.length===9)return Pe;const ye=(de.fillOpacity??100)/100;return(0,v.alpha)(Pe,ye)}var K=(de=>(de.Changes="changes",de.Samples="samples",de))(K||{});const V={lineWidth:0,fillOpacity:80};function _(de){return de.ctrlKey||de.metaKey||de.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const U=({frame:de,theme:Pe,timeZones:ye,getTimeRange:he,mode:me,eventBus:De,sync:le,rowHeight:Ee,colWidth:be,showValue:ge,alignValue:ue,mergeValues:Ie,getValueColor:ot,eventsScope:Qe="__global_"})=>{const Me=new h.U(ye[0]),Ne="time",qe="x",bt=Qt=>{const yn=Qt.config?.color?.mode;return!(yn&&Qt.display&&yn.startsWith("continuous-"))},Fe=Qt=>Qt.config.mappings?.some(yn=>yn.type===m.Hi.SpecialValue&&yn.options.match==="null")||!1,Ve=(Qt,yn)=>{const Zt=de.fields[Qt];return Zt.state?.origin?.fieldIndex!==void 0&&Zt.state?.origin?.frameIndex!==void 0&&ot?ot(Zt.state?.origin?.frameIndex,Zt.state?.origin?.fieldIndex,yn):t.R},Ue={mode:me,numSeries:de.fields.length-1,isDiscrete:Qt=>bt(de.fields[Qt]),hasMappedNull:Qt=>Fe(de.fields[Qt]),mergeValues:Ie,rowHeight:Ee,colWidth:be,showValue:ge,alignValue:ue,theme:Pe,label:Qt=>(0,n.CZ)(de.fields[Qt],de),getFieldConfig:Qt=>de.fields[Qt].config.custom,getValueColor:Ve,getTimeRange:he,formatValue:(Qt,yn)=>(0,r.zc)(de.fields[Qt].display(yn)),onHover:(Qt,yn)=>{ze=Qt,Xe=yn,it=!0},onLeave:()=>{ze=null,Xe=null,it=!0}};let it=!1,ze=null,Xe=null;const St=o(Ue),Bt={point:{[Ne]:null,[C.j]:null},data:de};Me.addHook("init",St.init),Me.addHook("drawClear",St.drawClear);const zt=(Qt,yn,Zt)=>{it&&(ze!=null&&(Qt(ze),yn(Xe)),it=!1),Zt(ze==null)};Me.setTooltipInterpolator(zt),Me.setPrepData(Qt=>(0,g.Bj)(Qt[0],(0,g.i7)(Qt[0]))),Me.setCursor(St.cursor),Me.addScale({scaleKey:qe,isTime:!0,orientation:u.wN.Horizontal,direction:u.bQ.Right,range:St.xRange}),Me.addScale({scaleKey:C.j,isTime:!1,orientation:u.wN.Vertical,direction:u.bQ.Up,range:St.yRange}),Me.addAxis({scaleKey:qe,isTime:!0,splits:St.xSplits,placement:u.LB.Bottom,timeZone:ye[0],theme:Pe,grid:{show:!0}}),Me.addAxis({scaleKey:C.j,isTime:!1,placement:u.LB.Left,splits:St.ySplits,values:St.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:Pe});let qt=0;for(let Qt=0;Qt<de.fields.length;Qt++){if(Qt===0)continue;const yn=de.fields[Qt],Zt=yn.config,re={...V,...Zt.custom};yn.state.seriesIndex=qt++,Me.addSeries({scaleKey:C.j,pathBuilder:St.drawPaths,pointsBuilder:St.drawPoints,lineWidth:re.lineWidth,fillOpacity:re.fillOpacity,theme:Pe,show:!re.hideFrom?.viz,thresholds:Zt.thresholds,dataFrameFieldIndex:yn.state?.origin})}if(le&&le()!==a.m.Off){let Qt={};Qt.sync={key:Qe,filters:{pub:(yn,Zt,re,Te,We,Je,je)=>le&&le()===a.m.Off?!1:(Bt.rowIndex=je,re<0&&Te<0?(Bt.point[Ne]=null,Bt.point[C.j]=null,De.publish(new i.xH)):(Bt.point[Ne]=Zt.posToVal(re,qe),Bt.point.panelRelY=Te>0?Te/Je:1,Bt.down=void 0,De.publish(new i.es(Bt))),!0)},scales:[qe,null]},Me.setSync(),Me.setCursor(Qt)}return Me};function $(de){const Pe=new Map;for(let ye=0;ye<de.fields.length;ye++)Pe.set(getFieldDisplayName(de.fields[ye],de),ye);return Pe}function k(de){let Pe=de[0],ye;for(let he=1;he<de.length;he++){let me=de[he];me===null?Pe=null:me===Pe?(ye||(ye=[...de]),ye[he]=void 0):me!=null&&(Pe=me)}return ye}function H(de){let Pe=de.config.custom?.spanNulls;return Pe?Pe===!0?1/0:Pe:-1}function j(de,Pe){const ye=de.config.thresholds;if(de.type!==y.fS.number||!ye||!ye.steps.length)return;const he=F(de.config,Pe);if(he.length!==ye.steps.length)return;const me=new Map,De=new Map;for(let be=0;be<he.length;be++)me.set(ye.steps[be],he[be].label),De.set(he[be].label,he[be].color);let le=de.values;const Ee=new Array(de.values.length);if(ye.mode===c.H.Percentage){const{min:be,max:ge}=(0,l.xD)(de),ue=ge-be;le=le.map(Ie=>Ie==null?Ie:(Ie-be)/ue*100)}for(let be=0;be<Ee.length;be++){const ge=le[be];ge==null?Ee[be]=ge:Ee[be]=me.get((0,d.m1)(ge,ye.steps))}return{...de,config:{...de.config,custom:{...de.config.custom,spanNulls:H(de)}},type:y.fS.string,values:Ee,display:be=>({text:String(be),color:De.get(String(be)),numeric:NaN})}}function z(de,Pe,ye,he){if(!de?.length)return{warn:"No data in response"};let me=!1;const De=[];for(let le of de){let Ee=!1,be=!1,ge=(0,f.Y3)(le,le.fields.findIndex(ot=>ot.type===y.fS.time)),ue=(0,x.w)({frame:ge,refFieldPseudoMin:ye.from.valueOf(),refFieldPseudoMax:ye.to.valueOf()});ue!==le&&(be=!0);const Ie=[];for(let ot of(0,b.I)(ue).fields)if(!ot.config.custom?.hideFrom?.viz)switch(ot.type){case y.fS.time:Ee=!0,me=!0,Ie.push(ot);break;case y.fS.enum:case y.fS.number:if(Pe&&ot.config.color?.mode===t.S.Thresholds){const Qe=j(ot,he);if(Qe){Ie.push(Qe),be=!0;continue}}case y.fS.boolean:case y.fS.string:ot={...ot,config:{...ot.config,custom:{...ot.config.custom,spanNulls:H(ot)}}},Ie.push(ot);break;default:be=!0}Ee&&Ie.length>1&&(me=!0,be?De.push({...ge,fields:Ie}):De.push(ge))}return me?De.length?{frames:De}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function F(de,Pe){const ye=[],he=de.thresholds;if(!he||!he.steps.length)return ye;const me=he.steps,De=(0,r.Cf)(he.mode===c.H.Percentage?"percent":de.unit??""),le=Ee=>(0,r.zc)(De(Ee,de.decimals??void 0));for(let Ee=0;Ee<me.length;Ee++){let be=me[Ee],ge=be.value,ue="",Ie="";ge===-1/0&&Ee<me.length-1?(ge=me[Ee+1].value,ue="< "):Ie="+",ye.push({label:`${ue}${le(ge)}${Ie}`,color:Pe.visualization.getColorByName(be.color),yAxis:1})}return ye}function J(de,Pe,ye){if(!(!de||Pe.showLegend===!1))return Q(Z(de),ye)}function Q(de,Pe){if(!de.length)return;const ye=[],he=de[0].config,me=he.color?.mode??t.S.Fixed,De=he.thresholds;if(me===t.S.Thresholds&&De?.steps&&De.steps.length>1)return F(he,Pe);if(me.startsWith("continuous"))return;const le=new Map;return de.forEach(Ee=>{Ee.config.custom?.hideFrom?.legend||Ee.values.forEach(be=>{let ge=Ee.display(be);ge.color&&le.set(ge.text,ge.color)})}),le.forEach((Ee,be)=>{be.length>0&&ye.push({label:be,color:Pe.visualization.getColorByName(Ee??t.R),yAxis:1})}),ye}function Z(de){const Pe=[];for(const ye of de)for(const he of ye.fields)he.type!==y.fS.time&&Pe.push(he);return Pe}function ne(de,Pe){let ye,he=Pe+1;if(he>=de.values.length)return null;const me=de.values[Pe];for(;ye===void 0;){if(he>=de.values.length)return null;const De=de.values[he];De===void 0||De===me?he++:ye=he}return ye}function ee(de){if(de<0||Number.isNaN(de))return"";let Pe,ye,he,me,De,le,Ee,be;return Ee=Math.floor(de/1e3),le=Math.floor(Ee/60),Ee=Ee%60,De=Math.floor(le/60),le=le%60,me=Math.floor(De/24),De=De%24,Pe=Math.floor(me/365),Pe>0&&(me=me%365),ye=Math.floor(me/30),ye>0&&(me=me%30),he=Math.floor(me/7),he>0&&(me=me%7),be=Math.round(de%1e3*1e3)/1e3,(Pe>0?Pe+"y "+(ye>0?ye+"mo ":"")+(he>0?he+"w ":"")+(me>0?me+"d ":""):ye>0?ye+"mo "+(he>0?he+"w ":"")+(me>0?me+"d ":""):he>0?he+"w "+(me>0?me+"d ":""):me>0?me+"d "+(De>0?De+"h ":""):De>0?De+"h "+(le>0?le+"m ":""):le>0?le+"m "+(Ee>0?Ee+"s ":""):Ee>0?Ee+"s "+(be>0?be+"ms ":""):be>0?be+"ms ":"0").trim()}},60317:(X,L,e)=>{"use strict";e.d(L,{a:()=>c});var t=e(41407),n=e(39953),r=e(82803),a=e(61141),i=e(99491),y=e(39285);const c=({values:d,onChange:f,id:m})=>{const u=(0,r.wW)(l);return n.createElement("div",{className:u.wrapper},d.length?d.map((h,C)=>n.createElement("div",{className:u.pair,key:C},n.createElement(a.X,{id:`${m}-key-${C}`,placeholder:"Tag name",value:h.key,onChange:x=>{f(d.map((b,g)=>g===C?{...b,key:String(x)}:b))}}),n.createElement(i.W,{"aria-label":"equals",className:u.operator},"as"),n.createElement(a.X,{id:`${m}-value-${C}`,placeholder:"New name (optional)",value:h.value||"",onChange:x=>{f(d.map((b,g)=>g===C?{...b,value:String(x)}:b))}}),n.createElement("button",{onClick:()=>f([...d.slice(0,C),...d.slice(C+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button"},n.createElement(y.J,{name:"times"})),C===d.length-1?n.createElement("button",{onClick:()=>f([...d,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(y.J,{name:"plus"})):null)):n.createElement("button",{onClick:()=>f([...d,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(y.J,{name:"plus"})))},l=d=>({wrapper:(0,t.css)`
    display: flex;
    flex-direction: column;
    gap: ${d.spacing(.5)} 0;
  `,pair:(0,t.css)`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:(0,t.css)`
    color: ${d.v1.palette.orange};
    width: auto;
  `})},36516:(X,L,e)=>{"use strict";e.d(L,{Ny:()=>g,dw:()=>p,mH:()=>x,p1:()=>u,rr:()=>b});var t=e(41407),n=e(39953),r=e(27770),a=e(74661),i=e(69171),y=e(26286),c=e(38637),l=e(43997),d=e(11286),f=e(13273),m=e(60317);function u(v){if(v?.tracesToLogsV2)return v.tracesToLogsV2;if(!v?.tracesToLogs)return;const E={customQuery:!1};return E.datasourceUid=v.tracesToLogs.datasourceUid,E.tags=v.tracesToLogs.mapTagNamesEnabled?v.tracesToLogs.mappedTags:v.tracesToLogs.tags?.map(P=>({key:P})),E.filterByTraceID=v.tracesToLogs.filterByTraceID,E.filterBySpanID=v.tracesToLogs.filterBySpanID,E.spanStartTimeShift=v.tracesToLogs.spanStartTimeShift,E.spanEndTimeShift=v.tracesToLogs.spanEndTimeShift,E}function h({options:v,onOptionsChange:E}){const P=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource","grafana-falconlogscale-datasource","googlecloud-logging-datasource"],S=(0,n.useMemo)(()=>u(v.jsonData)||{customQuery:!1},[v.jsonData]),{query:M="",tags:R,customQuery:I}=S,A=(0,n.useCallback)(O=>{E({...v,jsonData:{...v.jsonData,tracesToLogsV2:{...S,...O},tracesToLogs:void 0}})},[E,v,S]);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement(a.Z,null,n.createElement(i._,{tooltip:"The logs data source the trace is going to navigate to",label:"Data source",labelWidth:26},n.createElement(d.q,{inputId:"trace-to-logs-data-source-picker",filter:O=>P.includes(O.type),current:S.datasourceUid,noDefault:!0,width:40,onChange:O=>A({datasourceUid:O.uid})}))),n.createElement(a.Z,null,n.createElement(f.w,{label:x("start"),tooltip:b("start","0"),value:S.spanStartTimeShift||"",onChange:O=>{A({spanStartTimeShift:O})},isInvalidError:g})),n.createElement(a.Z,null,n.createElement(f.w,{label:x("end"),tooltip:b("end","0"),value:S.spanEndTimeShift||"",onChange:O=>{A({spanEndTimeShift:O})},isInvalidError:g})),n.createElement(a.Z,null,n.createElement(i._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod', 'service.name', 'service.namespace'",label:"Tags",labelWidth:26},n.createElement(m.a,{values:R??[],onChange:O=>A({tags:O})}))),n.createElement(C,{disabled:I,type:"trace",id:"filterByTraceID",value:!!S.filterByTraceID,onChange:O=>A({filterByTraceID:O})}),n.createElement(C,{disabled:I,type:"span",id:"filterBySpanID",value:!!S.filterBySpanID,onChange:O=>A({filterBySpanID:O})}),n.createElement(a.Z,null,n.createElement(i._,{tooltip:"Use a custom query with the possibility to interpolate variables from the trace or span",label:"Use custom query",labelWidth:26},n.createElement(y.x,{id:"customQuerySwitch",value:I,onChange:O=>A({customQuery:O.currentTarget.checked})}))),I&&n.createElement(i._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword",grow:!0},n.createElement(c.I,{label:"Query",type:"text",allowFullScreen:!0,value:M,onChange:O=>A({query:O.currentTarget.value})})))}function C(v){return n.createElement(a.Z,null,n.createElement(i._,{disabled:v.disabled,label:`Filter by ${v.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${v.type} ID`},n.createElement(y.x,{id:v.id,value:v.value,onChange:E=>v.onChange(E.currentTarget.checked)})))}const x=v=>`Span ${v} time shift`,b=(v,E)=>`Shifts the ${v} time of the span. Default: ${E} (Time units can be used here, for example: 5s, -1m, 3h)`,g="Invalid time shift. See tooltip for examples.",p=({options:v,onOptionsChange:E})=>n.createElement(r.K,{title:"Trace to logs",description:n.createElement(l.W,{description:"Navigate from a trace span to the selected data source's logs.",suffix:`${v.type}/#trace-to-logs`,feature:"trace to logs"}),isCollapsible:!0,isInitiallyOpen:!0},n.createElement(h,{options:v,onOptionsChange:E}))},50820:(X,L,e)=>{"use strict";e.d(L,{Oh:()=>c,config:()=>n.config,default:()=>a,iE:()=>i});var t=e(30670),n=e(32688);let r=n.config;const a=r,i=()=>r,y=l=>{r={...r,...l}},c=n.config.panels?.debug?.state===t.BV.alpha},74602:(X,L,e)=>{"use strict";e.d(L,{AV:()=>l,FL:()=>h,K3:()=>t,OA:()=>a,QO:()=>f,b0:()=>c,cz:()=>r,gN:()=>u,hD:()=>n,kh:()=>y,yM:()=>i,zF:()=>d});const t=30,n=8,r=24,a="v",i="h",y=4,c=250,l=t*3,d="panel-copy",f=2,m=23763571993,u=40,h="VisualizationSelectPane.ListMode",C="WidgetSelectPane.ListMode"},14687:(X,L,e)=>{"use strict";e.d(L,{t_:()=>m,AT:()=>f,ZR:()=>u,iG:()=>h});var t=e(39953),n=e(34032),r=e(4148);function a(C){if(typeof C=="string")return C;if(C){if(C instanceof Error)return C.message;if((0,r.kW)(C)){if(C.data&&C.data.message)return C.data.message;if(C.statusText)return C.statusText}}return JSON.stringify(C)}var i=e(21527),y=e(97316);const c={title:"",text:"",severity:i.AppNotificationSeverity.Success,icon:"check"},l={title:"",text:"",severity:i.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},d={title:"",text:"",severity:i.AppNotificationSeverity.Error,icon:"exclamation-triangle"},f=(C,x="",b)=>({...c,title:C,text:x,id:(0,n.Z)(),timestamp:Date.now(),showing:!0}),m=(C,x="",b,g)=>({...d,text:a(x),title:C,id:(0,n.Z)(),traceId:b,component:g,timestamp:Date.now(),showing:!0}),u=(C,x="",b)=>({...l,title:C,text:x,traceId:b,id:(0,n.Z)(),timestamp:Date.now(),showing:!0});function h(){const C=(0,i.useDispatch)();return(0,t.useMemo)(()=>({success:(x,b="")=>{C((0,y.$l)(f(x,b)))},warning:(x,b="",g)=>{C((0,y.$l)(u(x,b,g)))},error:(x,b="",g)=>{C((0,y.$l)(m(x,b,g)))}}),[C])}},21308:(X,L,e)=>{"use strict";e.d(L,{Vt:()=>r.Vt,Wz:()=>a.W,h$:()=>t.Z,rv:()=>n.r});var t=e(28833),n=e(2634),r=e(97125),a=e(24796)},26843:(X,L,e)=>{"use strict";e.d(L,{cC:()=>p,t:()=>E});var t=e(20463),n=e(50120),r=e(39953),a=e(75146);const i="en-US",y="fr-FR",c="es-ES",l="de-DE",d="zh-Hans",f="pseudo-LOCALE",m=null,u=[{code:i,name:"English",loader:()=>e.e(7424).then(e.t.bind(e,67424,19))},{code:y,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,66419,19))},{code:c,name:"Espa\xF1ol",loader:()=>e.e(4253).then(e.t.bind(e,4253,19))},{code:l,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:d,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],h=u.map(S=>S.code),C=S=>S.split("-")[0].toLowerCase(),x={type:"backend",init(){},async read(S,M,R){let I=u.find(O=>O.code===S);if(I||(I=u.find(O=>C(O.code)===C(S))),!I)return R(new Error("No message loader available for "+S),null);const A=await I.loader();R(null,A)}};function b(S){const M={partialBundledLanguages:!0,resources:{},returnEmptyString:!1,pluralSeparator:"__"};let R=i18n;if(S==="detect"){R=R.use(LanguageDetector);const I={order:["navigator"],caches:[]};M.detection=I}else M.lng=VALID_LANGUAGES.includes(S)?S:void 0;return R.use(x).use(initReactI18next).init(M)}function g(S){const M=VALID_LANGUAGES.includes(S)?S:void 0;return i18n.changeLanguage(M)}const p=S=>r.createElement(a.c,{...S}),v=t.ZP.t,E=(S,M,R)=>v(S,M,R),P=(S,M={})=>typeof S=="string"?P(new Date(S),M):new Intl.DateTimeFormat(i18n.language,M).format(S)},2634:(X,L,e)=>{"use strict";e.d(L,{r:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},59138:(X,L,e)=>{"use strict";e.d(L,{$l:()=>l,VW:()=>h});var t=e(77960),n=e(21527);const r=25,a="notifications",i=`${a}/lastRead`,y={byId:P(),lastRead:Number.parseInt(window.localStorage.getItem(i)??`${Date.now()}`,10)},c=(0,t.oM)({name:"appNotifications",initialState:y,reducers:{notifyApp:(M,{payload:R})=>{Object.values(M.byId).some(I=>p(R,I)&&I.showing)||(M.byId[R.id]=R,S(M.byId))},hideAppNotification:(M,{payload:R})=>{R in M.byId&&(M.byId[R].showing=!1,S(M.byId))},clearNotification:(M,{payload:R})=>{delete M.byId[R],S(M.byId)},clearAllNotifications:M=>{M.byId={},S(M.byId)},readAllNotifications:(M,{payload:R})=>{M.lastRead=R}}}),{notifyApp:l,hideAppNotification:d,clearNotification:f,clearAllNotifications:m,readAllNotifications:u}=c.actions,h=c.reducer,C=M=>M.lastRead,x=M=>Object.values(M.byId).sort((R,I)=>I.timestamp-R.timestamp),b=M=>x(M).filter(v),g=M=>Object.values(M.byId).filter(R=>R.showing);function p(M,R){return M.icon===R.icon&&M.severity===R.severity&&M.text===R.text&&M.title===R.title}function v(M){return M.severity===n.AppNotificationSeverity.Warning||M.severity===n.AppNotificationSeverity.Error}function E(M){return typeof M=="object"&&M!==null&&"id"in M&&"icon"in M&&"title"in M&&"text"in M}function P(){const M=window.localStorage.getItem(a);if(!M)return{};const R=JSON.parse(M);return Object.values(R).every(I=>E(I))?R:{}}function S(M){const R=Object.values(M).filter(v).sort((I,A)=>A.timestamp-I.timestamp).slice(0,r).reduce((I,A)=>(I[A.id]={id:A.id,severity:A.severity,icon:A.icon,title:A.title,text:A.text,traceId:A.traceId,timestamp:A.timestamp,showing:!1},I),{});try{window.localStorage.setItem(a,JSON.stringify(R))}catch(I){console.error("Unable to persist notifications to local storage"),console.error(I)}}},71707:(X,L,e)=>{"use strict";e.d(L,{OQ:()=>l,V4:()=>m});var t=e(77960),n=e(32688),r=e(20305);const a=n.config.bootData?.navTree??[];function i(u){return u.map(h=>{const C=h.children&&i(h.children);return{...h,children:C,text:(0,r.Y)(h.id)??h.text,subTitle:(0,r.L)(h.id)??h.subTitle,emptyMessage:(0,r.Y)(h.emptyMessageId)}})}const y="starred/",c=(0,t.oM)({name:"navBarTree",initialState:()=>i(n.config.bootData?.navTree??[]),reducers:{setStarred:(u,h)=>{const C=u.find(v=>v.id==="starred"),{id:x,title:b,url:g,isStarred:p}=h.payload;if(C)if(p){C.children||(C.children=[]);const v={id:y+x,text:b,url:g};C.children.push(v),C.children.sort((E,P)=>E.text.localeCompare(P.text))}else{const v=C.children?.findIndex(E=>E.id===y+x)??-1;v>-1&&C?.children?.splice(v,1)}},updateDashboardName:(u,h)=>{const{id:C,title:x,url:b}=h.payload,g=u.find(p=>p.id==="starred");if(g){const p=g.children?.find(v=>v.id===C);p&&(p.text=x,p.url=b,g.children?.sort((v,E)=>v.text.localeCompare(E.text)))}},removePluginFromNavTree:(u,h)=>{const C="plugin-page-"+h.payload.pluginID,x=u.findIndex(b=>b.id===C);x>-1&&u.splice(x,1)}}}),{setStarred:l,removePluginFromNavTree:d,updateDashboardName:f}=c.actions,m=c.reducer},12813:(X,L,e)=>{"use strict";e.d(L,{Cu:()=>c,G4:()=>C});var t=e(77960),n=e(86832),r=e.n(n),a=e(50820),i=e(20305);const y="home";function c(){const x={},b=(0,n.cloneDeep)(a.default.bootData.navTree),g=b.find(v=>v.id===y),p=b.filter(v=>v.id!==y);return g&&l(x,[g]),l(x,p,x[y]),x}function l(x,b,g){const p=[];for(const v of b){const E={...v,text:(0,i.Y)(v.id)??v.text,subTitle:(0,i.L)(v.id)??v.subTitle,emptyMessage:(0,i.Y)(v.emptyMessageId),parentItem:g};E.id&&(x[E.id]=E),E.children&&l(x,E.children,E),p.push(E)}g&&(g.children=p),x["not-found"]={...d("Page not found","404 Error").node},x.error={...d("Page error","An unexpected error").node}}function d(x,b){const g={text:x,subTitle:b,icon:"exclamation-triangle"};return{node:g,main:g}}const f={},m=(0,t.PH)("navIndex/updateNavIndex"),u=(0,t.PH)("navIndex/updateConfigurationSubtitle"),h=(x,b)=>({...x,parentItem:{...x.parentItem,text:x.parentItem?.text??"",subTitle:b}}),C=(x=f,b)=>{if(m.match(b)){let p=function(P){if(P.children)for(const S of P.children)v[S.id]={...S,parentItem:P};P.parentItem&&p(P.parentItem)};var g=p;const v={},E=b.payload;return p(E),{...x,...v}}else if(u.match(b)){const p=`Organization: ${b.payload}`;return{...x,cfg:{...x.cfg,subTitle:p},datasources:h(x.datasources,p),correlations:h(x.correlations,p),users:h(x.users,p),teams:h(x.teams,p),plugins:h(x.plugins,p),"org-settings":h(x["org-settings"],p),apikeys:h(x.apikeys,p)}}return x}},1277:(X,L,e)=>{"use strict";e.d(L,{y$:()=>me,ae:()=>De,i:()=>le});var t=e(94082),n=e(23997),r=e(31312),a=e(36497),i=e(31544),y=e(8894),c=e(22605),l=e(22501),d=e(71476),f=e(84289),m=e(82696),u=e(90685),h=e(10752),C=e(79947),x=e(81595),b=e(12202),g=e(81698),p=e(52325),v=e(34032),E=e(71519),P=e(54721),S=(be=>(be.OpenSource="Open Source",be.Pro="Pro",be.Enterprise="Enterprise",be))(S||{}),M=e(32688),R=e(28833),I=e(50820),A=e(23653);let O="";const N=()=>{const ge=new URLSearchParams(window.location.search).get("auth_token");return ge!==null&&ge!==""?(O=ge,ge):O};var o=e(41407),w=e(39953),K=e(82803),V=e(70393),_=e(7429),U=e(4919),$=e(64084),k=e(75250);const H=be=>{const ge=(0,K.l4)(),ue=j(ge),Ie=(0,k.J)(ge),ot=!!be.maxConcurrentSessions,Qe=()=>{window.location.reload()};return w.createElement(V.h_,null,w.createElement("div",{className:Ie.modal},w.createElement(_.v,{title:"You have been automatically signed out",severity:"warning",className:ue.infobox},w.createElement("div",{className:ue.text},w.createElement("p",null,"Your session token was automatically revoked because you have reached",w.createElement("strong",null,` the maximum number of ${ot?be.maxConcurrentSessions:""} concurrent sessions `),"for your account."),w.createElement("p",null,w.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),w.createElement(U.zx,{size:"md",variant:"primary",onClick:Qe},"Sign in"))),w.createElement("div",{className:(0,o.cx)(Ie.modalBackdrop,ue.backdrop)}))},j=(0,$.B)(be=>({infobox:(0,o.css)`
      margin-bottom: 0;
    `,text:(0,o.css)`
      margin: ${be.spacing(1,0,2)};
    `,backdrop:(0,o.css)`
      background-color: ${be.colors.background.canvas};
      opacity: 0.8;
    `}));var z=e(73431),F=e(5365),J=e(78354),Q=(be=>(be[be.Pending=0]="Pending",be[be.InProgress=1]="InProgress",be[be.Done=2]="Done",be))(Q||{});class Z{constructor(ge=!1){this.state={},this.queue=new n.x,this.updates=new n.x,this.add=(ue,Ie)=>this.queue.next({id:ue,options:Ie,state:0}),this.setInProgress=ue=>this.queue.next({id:ue,state:1}),this.setDone=ue=>this.queue.next({id:ue,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=ue=>{const Ie=Object.keys(ue).filter(Qe=>ue[Qe].state===1).length;return{noOfPending:Object.keys(ue).filter(Qe=>ue[Qe].state===0).length,noOfInProgress:Ie,state:ue}},this.publishUpdate=(ue,Ie)=>{this.printState(ue,Ie),this.updates.next(ue)},this.printState=(ue,Ie)=>{if(!Ie)return;const ot=Object.keys(ue.state).reduce((Qe,Me)=>{const Ne={id:Me,state:ue.state[Me].state};return Qe.push(Ne),Qe},[]);console.log("FetchQueue noOfStarted",ue.noOfInProgress),console.log("FetchQueue noOfNotStarted",ue.noOfPending),console.log("FetchQueue state",ot)},this.queue.subscribe(ue=>{const{id:Ie,state:ot,options:Qe}=ue;if(this.state[Ie]||(this.state[Ie]={state:0,options:{url:""}}),ot===2){delete this.state[Ie];const Ne=this.getUpdate(this.state);this.publishUpdate(Ne,ge);return}this.state[Ie].state=ot,Qe&&(this.state[Ie].options=Qe);const Me=this.getUpdate(this.state);this.publishUpdate(Me,ge)})}}var ne=e(83639);class ee{constructor(ge,ue,Ie){const ot=Ie?.http2Enabled?1e3:5;ge.getUpdates().pipe((0,x.h)(({noOfPending:Qe})=>Qe>0),(0,ne.b)(({state:Qe,noOfInProgress:Me})=>{const Ne=Object.keys(Qe).filter(Ve=>Qe[Ve].state===Q.Pending&&!(0,J.mu)(Qe[Ve].options.url)).reduce((Ve,Ue)=>{const it={id:Ue,options:Qe[Ue].options};return Ve.push(it),Ve},[]),qe=Object.keys(Qe).filter(Ve=>Qe[Ve].state===Q.Pending&&(0,J.mu)(Qe[Ve].options.url)).reduce((Ve,Ue)=>{const it={id:Ue,options:Qe[Ue].options};return Ve.push(it),Ve},[]),bt=Math.max(ot-Me-Ne.length,0),Fe=qe.slice(0,bt);return Ne.concat(Fe)})).subscribe(({id:Qe,options:Me})=>{ue.add(Qe,Me)})}}class de{constructor(ge,ue){this.queue=new n.x,this.responses=new n.x,this.add=(Ie,ot)=>{this.queue.next({id:Ie,options:ot})},this.getResponses=Ie=>this.responses.asObservable().pipe((0,x.h)(ot=>ot.id===Ie)),this.queue.subscribe(Ie=>{const{id:ot,options:Qe}=Ie;ge.setInProgress(ot),this.responses.next({id:ot,observable:ue(Qe)})})}}var Pe=e(97125);const ye="cancel_all_requests_request_id",he="grafana-trace-id";class me{constructor(ge){this.inFlightRequests=new n.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new n.x,this._tokenRotationInProgress=null,this.deviceID=null,this.dependencies={fromFetch:l.U,appEvents:R.Z,contextSrv:Pe.Vt,logout:()=>{Pe.Vt.setLoggedOut()}},ge&&(this.dependencies={...this.dependencies,...ge}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new Z,this.responseQueue=new de(this.fetchQueue,this.internalFetch),this.initGrafanaDeviceID(),new ee(this.fetchQueue,this.responseQueue,(0,I.iE)())}async initGrafanaDeviceID(){if(M.config.buildInfo?.edition!==S.OpenSource)try{const ue=await(await t.ZP.load()).get();this.deviceID=ue.visitorId}catch(ge){console.error(ge)}}async request(ge){return await(0,r.n)(this.fetch(ge).pipe((0,d.U)(ue=>ue.data)))}fetch(ge){const ue=(0,v.Z)(),Ie=this.fetchQueue;return new a.y(ot=>{const Qe=new i.w0;return Qe.add(this.responseQueue.getResponses(ue).subscribe(Me=>{Qe.add(Me.observable.subscribe(ot))})),this.fetchQueue.add(ue,ge),function(){Ie.setDone(ue),Qe.unsubscribe()}})}internalFetch(ge){ge.requestId&&this.inFlightRequests.next(ge.requestId),ge=this.parseRequestOptions(ge);const ue=N();return ue!==null&&ue!==""&&M.config.jwtUrlLogin&&M.config.jwtHeaderName&&(ge.headers=ge.headers??{},ge.headers[M.config.jwtHeaderName]=`${ue}`),M.config.buildInfo?.edition!==S.OpenSource&&this.deviceID&&(ge.headers=ge.headers??{},ge.headers["X-Grafana-Device-Id"]=`${this.deviceID}`),this.getFromFetchStream(ge).pipe(this.handleStreamResponse(ge),this.handleStreamError(ge),this.handleStreamCancellation(ge))}resolveCancelerIfExists(ge){this.inFlightRequests.next(ge)}cancelAllInFlightRequests(){this.inFlightRequests.next(ye)}async datasourceRequest(ge){return(0,r.n)(this.fetch(ge))}parseRequestOptions(ge){const ue=this.dependencies.contextSrv.user?.orgId;return ge.retry=ge.retry??0,(0,J.R8)(ge.url)&&(ue&&(ge.headers=ge.headers??{},ge.headers["X-Grafana-Org-Id"]=ue),ge.url.startsWith("/")&&(ge.url=ge.url.substring(1)),ge.headers?.Authorization&&(ge.headers["X-DS-Authorization"]=ge.headers.Authorization,delete ge.headers.Authorization),this.noBackendCache&&(ge.headers=ge.headers??{},ge.headers["X-Grafana-NoCache"]="true")),ge.hideFromInspector===void 0&&(ge.hideFromInspector=(0,J.R8)(ge.url)&&!(0,J.mu)(ge.url)),ge}getFromFetchStream(ge){const ue=(0,F.Xv)(ge),Ie=(0,F.nS)(ge);return this.dependencies.fromFetch(ue,Ie).pipe((0,f.z)(async ot=>{const{status:Qe,statusText:Me,ok:Ne,headers:qe,url:bt,type:Fe,redirected:Ve}=ot,Ue=ge.responseType??((0,F.rZ)(qe)?"json":void 0),it=await(0,F.aO)(ot,Ue);return{status:Qe,statusText:Me,ok:Ne,data:it,headers:qe,url:bt,type:Fe,redirected:Ve,config:ge,traceId:ot.headers.get(he)??void 0}}))}showApplicationErrorAlert(ge){}showSuccessAlert(ge){const{config:ue}=ge;if(ue.showSuccessAlert===!1||ue.showSuccessAlert===void 0&&(ue.method==="GET"||(0,J.mu)(ue.url)||!(0,J.R8)(ue.url)))return;const Ie=ge.data;Ie?.message&&this.dependencies.appEvents.emit(E.SI.alertSuccess,[Ie.message])}showErrorAlert(ge,ue){if(ge.showErrorAlert===!1||ge.showErrorAlert===void 0&&((0,J.mu)(ge.url)||!(0,J.R8)(ge.url)))return;let Ie="",ot=ue.data.message;ot==="Unexpected error"&&ue.message&&(ot=ue.message),ot.length>80&&(Ie=ot,ot="Error"),ue.status===422&&(Ie=ue.data.message,ot="Validation failed"),this.dependencies.appEvents.emit(ue.status<500?E.SI.alertWarning:E.SI.alertError,[ot,Ie,ue.data.traceID])}processRequestError(ge,ue){return ue.data=ue.data??{message:"Unexpected error"},typeof ue.data=="string"&&(ue.data={message:ue.data,error:ue.statusText,response:ue.data}),ue.data&&!ue.data.message&&typeof ue.data.error=="string"&&(ue.data.message=ue.data.error),ue.data.message&&setTimeout(()=>{ue.isHandled||this.showErrorAlert(ge,ue)},50),this.inspectorStream.next(ue),ue}handleStreamResponse(ge){return ue=>ue.pipe((0,d.U)(Ie=>{if(!Ie.ok){const{status:ot,statusText:Qe,data:Me}=Ie;throw{status:ot,statusText:Qe,data:Me,config:ge,traceId:Ie.headers.get(he)??void 0}}return Ie}),(0,m.b)(Ie=>{this.showSuccessAlert(Ie),this.inspectorStream.next(Ie)}))}handleStreamError(ge){const{isSignedIn:ue}=this.dependencies.contextSrv.user;return Ie=>Ie.pipe((0,u.a)(ot=>ot.pipe((0,f.z)((Qe,Me)=>{const Ne=Me===0&&ge.retry===0;if(Qe.status===401&&(0,J.R8)(ge.url)&&Ne&&ue){if(Qe.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new z.Dn({component:H,props:{maxConcurrentSessions:Qe.data?.error?.maxConcurrentSessions}})),(0,y._)(()=>Qe);let qe=this.loginPing();const bt=(0,A.D)()*1e3<Date.now();return M.config.featureToggles.clientTokenRotation&&bt&&(qe=this.rotateToken()),(0,c.D)(qe).pipe((0,h.K)(Fe=>(Fe.status===401&&this.dependencies.logout(),(0,y._)(Fe))))}return(0,y._)(Qe)}))),(0,h.K)(ot=>(0,y._)(()=>this.processRequestError(ge,ot))))}handleStreamCancellation(ge){return ue=>ue.pipe((0,C.R)(this.inFlightRequests.pipe((0,x.h)(Ie=>{let ot=!1;return ge&&ge.requestId&&ge.requestId===Ie&&(ot=!0),Ie===ye&&(ot=!0),ot}))),(0,b.T)(()=>({type:P.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:ge})))}getInspectorStream(){return this.inspectorStream}async get(ge,ue,Ie,ot){return this.request({...ot,method:"GET",url:ge,params:ue,requestId:Ie})}async delete(ge,ue,Ie){return this.request({...Ie,method:"DELETE",url:ge,data:ue})}async post(ge,ue,Ie){return this.request({...Ie,method:"POST",url:ge,data:ue})}async patch(ge,ue,Ie){return this.request({...Ie,method:"PATCH",url:ge,data:ue})}async put(ge,ue,Ie){return this.request({...Ie,method:"PUT",url:ge,data:ue})}withNoBackendCache(ge){return this.noBackendCache=!0,ge().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this._tokenRotationInProgress?this._tokenRotationInProgress:(this._tokenRotationInProgress=this.fetch({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1}).pipe((0,g.x)(()=>{this._tokenRotationInProgress=null}),(0,p.B)()),this._tokenRotationInProgress)}loginPing(){return this.fetch({url:"/api/login/ping",method:"GET",retry:1})}search(ge){return this.get("/api/search",ge)}getDashboardByUid(ge){return this.get(`/api/dashboards/uid/${ge}`)}validateDashboard(ge){const ue=JSON.stringify(ge,Ee,2);return this.request({method:"POST",url:"/api/dashboards/validate",data:{dashboard:ue},showSuccessAlert:!1,showErrorAlert:!1})}getPublicDashboardByUid(ge){return this.get(`/api/public/dashboards/${ge}`)}getFolderByUid(ge,ue={}){const Ie=new URLSearchParams;return ue.withAccessControl&&Ie.set("accesscontrol","true"),this.get(`/api/folders/${ge}?${Ie.toString()}`)}}const De=new me,le=()=>De;function Ee(be,ge){if(!(typeof ge=="number"&&!Number.isFinite(ge)))return ge}},97125:(X,L,e)=>{"use strict";e.d(L,{Vt:()=>u,Wg:()=>d});var t=e(86832),n=e.n(t),r=e(81626),a=e(4148),i=e(13475),y=e(23653),c=e(21527),l=e(50820);const d="auto";class f{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},this.authenticatedBy="",l.default.bootData.user&&(0,t.extend)(this,l.default.bootData.user)}}class m{constructor(){this.sidemenuSmallBreakpoint=!1,this.tokenRotationJobId=0,l.default.bootData||(l.default.bootData={user:{},settings:{},navTree:[]}),this.user=new f,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=l.default.minRefreshInterval,this.scheduleTokenRotationJob()}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,a.i)().get("/api/access-control/user/actions",{reloadcache:!0}))}catch(x){console.error(x)}}setLoggedOut(){this.cancelTokenRotationJob(),this.user.isSignedIn=!1,this.isSignedIn=!1,window.location.reload()}hasRole(x){return x==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===x}accessControlEnabled(){return l.default.rbacEnabled}licensedAccessControlEnabled(){return(0,i.v)("accesscontrol")&&l.default.rbacEnabled}hasPermissionInMetadata(x,b){return this.accessControlEnabled()?!!b.accessControl?.[x]:!0}hasPermission(x){return this.accessControlEnabled()?!!this.user.permissions?.[x]:!0}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(x){return!l.default.minRefreshInterval||x===d?!0:r.intervalToMs(x)>=r.intervalToMs(l.default.minRefreshInterval)}getValidInterval(x){return this.isAllowedInterval(x)?x:l.default.minRefreshInterval}getValidIntervals(x){return this.minRefreshInterval?x.filter(b=>b!=="").filter(this.isAllowedInterval):x}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(c.AccessControlAction.DataSourcesExplore)&&l.default.exploreEnabled:(this.isEditor||l.default.viewersCanEdit)&&l.default.exploreEnabled}hasAccess(x,b){return this.accessControlEnabled()?this.hasPermission(x):b}hasAccessInMetadata(x,b,g){return this.accessControlEnabled()?this.hasPermissionInMetadata(x,b):g}evaluatePermission(x){return x.some(b=>this.hasPermission(b))?[]:["Reject"]}scheduleTokenRotationJob(){if(this.canScheduleRotation()){let x=(0,y.D)(),g=(x-Math.floor(Math.random()*(20-1)+1))*1e3-Date.now();this.tokenRotationJobId=setTimeout(()=>{if((0,y.D)()>x){this.scheduleTokenRotationJob();return}this.rotateToken().then()},g)}}canScheduleRotation(){return!(!this.isSignedIn||!l.default.featureToggles.clientTokenRotation||(0,y.D)()===0)}cancelTokenRotationJob(){l.default.featureToggles.clientTokenRotation&&this.tokenRotationJobId>0&&clearTimeout(this.tokenRotationJobId)}rotateToken(){return fetch(l.default.appSubUrl+"/api/user/auth-tokens/rotate",{method:"POST"}).then(x=>{if(x.status===200){this.scheduleTokenRotationJob();return}if(x.status===401){this.setLoggedOut();return}}).catch(x=>{console.error(x)})}}let u=new m;const h=C=>{throw new Error("contextSrv can be only overridden in test environment")}},23062:(X,L,e)=>{"use strict";e.d(L,{Z:()=>r});class t{get(i){return window.localStorage[i]}set(i,y){window.localStorage[i]=y}getBool(i,y){return y!==void 0&&!this.exists(i)?y:window.localStorage[i]==="true"}getObject(i,y){let c=y;if(this.exists(i)){const l=window.localStorage[i];try{c=JSON.parse(l)}catch(d){console.error(`Error parsing store object: ${i}. Returning default: ${y}. [${d}]`)}}return c}setObject(i,y){let c;try{c=JSON.stringify(y)}catch(l){throw new Error(`Could not stringify object: ${i}. [${l}]`)}try{this.set(i,c)}catch(l){const d=new Error(`Could not save item in localStorage: ${i}. [${l}]`);throw l instanceof Error&&(d.name=l.name),d}return!0}exists(i){return window.localStorage[i]!==void 0}delete(i){window.localStorage.removeItem(i)}}const r=new t},24796:(X,L,e)=>{"use strict";e.d(L,{W:()=>l,Z:()=>d});var t=e(86832),n=e.n(t),r=e(55705),a=e(83502);function i(f,m){if(!f)return!1;if(f[0]==="/"){const u=(0,r.jO)(f);return m.match(u)!=null}return f===m}function y(f){return f===0?.001:f/10}function c(f){return f?{colors:[{opacity:0},{opacity:f/10}]}:null}function l(f,m,u){for(let h=0;h<f.length;h++){const C=f[h],x=m.yaxes,b=C.yaxis||1,g=x[b-1],p=(0,a.Cf)(g.format);(0,t.isNumber)(m.decimals)?C.updateLegendValues(p,m.decimals):(0,t.isNumber)(g.decimals)?C.updateLegendValues(p,g.decimals+1):C.updateLegendValues(p,null)}}class d{constructor(m){this.datapoints=m.datapoints,this.label=m.alias,this.id=m.alias,this.alias=m.alias,this.aliasEscaped=(0,t.escape)(m.alias),this.color=m.color,this.bars={fillColor:m.color},this.valueFormater=(0,a.Cf)("none"),this.stats={},this.legend=!0,this.unit=m.unit,this.dataFrameIndex=m.dataFrameIndex,this.fieldIndex=m.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(m){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let u=0;u<m.length;u++){const h=m[u];i(h.alias,this.alias)&&(h.lines!==void 0&&(this.lines.show=h.lines),h.dashes!==void 0&&(this.dashes.show=h.dashes,this.lines.lineWidth=0),h.points!==void 0&&(this.points.show=h.points),h.bars!==void 0&&(this.bars.show=h.bars),h.fill!==void 0&&(this.lines.fill=y(h.fill)),h.fillGradient!==void 0&&(this.lines.fillColor=c(h.fillGradient)),h.stack!==void 0&&(this.stack=h.stack),h.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:h.linewidth,this.dashes.lineWidth=h.linewidth),h.dashLength!==void 0&&(this.dashes.dashLength[0]=h.dashLength),h.spaceLength!==void 0&&(this.dashes.dashLength[1]=h.spaceLength),h.nullPointMode!==void 0&&(this.nullPointMode=h.nullPointMode),h.pointradius!==void 0&&(this.points.radius=h.pointradius),h.steppedLine!==void 0&&(this.lines.steps=h.steppedLine),h.zindex!==void 0&&(this.zindex=h.zindex),h.fillBelowTo!==void 0&&(this.fillBelowTo=h.fillBelowTo),h.color!==void 0&&this.setColor(h.color),h.transform!==void 0&&(this.transform=h.transform),h.legend!==void 0&&(this.legend=h.legend),h.hideTooltip!==void 0&&(this.hideTooltip=h.hideTooltip),h.yaxis!==void 0&&(this.yaxis=h.yaxis),h.hiddenSeries!==void 0&&(this.hiddenSeries=h.hiddenSeries))}}getFlotPairs(m){const u=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const h=m==="connected",C=m==="null as zero";let x,b,g=0,p,v=0,E=!0;for(let P=0;P<this.datapoints.length;P++){if(b=this.datapoints[P][0],x=this.datapoints[P][1],p!==void 0){const S=x-p;S<this.stats.timeStep&&(this.stats.timeStep=S)}if(p=x,b===null){if(h)continue;C&&(b=0)}b!==null&&((0,t.isNumber)(b)&&(this.stats.total+=b,this.allIsNull=!1,g++),b>this.stats.max&&(this.stats.max=b),b<this.stats.min&&(this.stats.min=b),this.stats.first===null?this.stats.first=b:v>b?(E=!1,P===this.datapoints.length-1&&(this.stats.delta+=b)):(E?this.stats.delta+=b-v:this.stats.delta+=b,E=!0),v=b,b<this.stats.logmin&&b>0&&(this.stats.logmin=b),b!==0&&(this.allIsZero=!1)),u.push([x,b])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),u.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/g,this.stats.current=u[u.length-1][1],this.stats.current===null&&u.length>1&&(this.stats.current=u[u.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=u.length,u}updateLegendValues(m,u){this.valueFormater=m,this.decimals=u}formatValue(m){return(0,t.isFinite)(m)||(m=null),(0,a.zc)(this.valueFormater(m,this.decimals))}isMsResolutionNeeded(){for(let m=0;m<this.datapoints.length;m++)if(this.datapoints[m][1]!==null&&this.datapoints[m][1]!==void 0){const u=this.datapoints[m][1].toString();if(u.length===13&&u%1e3!==0)return!0}return!1}hideFromLegend(m){return!!(m.hideEmpty&&this.allIsNull||!this.legend||m.hideZero&&this.allIsZero)}setColor(m){this.color=m,this.bars.fillColor=m}}},26893:(X,L,e)=>{"use strict";e.d(L,{y:()=>n});var t=e(50820);function n(r={}){return t.default.rbacEnabled?{...r,accesscontrol:!0}:r}},17653:(X,L,e)=>{"use strict";e.d(L,{A:()=>t});function t(r){return r.map(n).sort((a,i)=>i.sortRank-a.sortRank||a.name.localeCompare(i.name))}function n(r){const a=r;return a.sortRank=0,a.userId>0?(a.name=a.userLogin,a.sortRank=10):a.teamId>0?(a.name=a.team,a.sortRank=20):a.role&&(a.icon="fa fa-fw fa-street-view",a.name=a.role,a.sortRank=30,a.role==="Editor"&&(a.sortRank+=1)),a.inherited&&(a.sortRank+=100),a}},23653:(X,L,e)=>{"use strict";e.d(L,{D:()=>t});function t(){const n=document.cookie.split("; ").find(a=>a.startsWith("grafana_session_expiry="));if(!n)return 0;let r=n.split("=").at(1);return r?parseInt(r,10):0}},44951:(X,L,e)=>{"use strict";e.d(L,{$$:()=>_,ET:()=>v,F3:()=>k,H6:()=>P,OQ:()=>U,Oy:()=>$,RZ:()=>H,Xh:()=>I,Xk:()=>O,Z8:()=>o,Zf:()=>S,_Q:()=>V,z0:()=>E,z_:()=>K});var t=e(77960),n=e(34032),r=e(34547),a=e(69307),i=e(96083),y=e(54554),c=e(81626),l=e(26205),d=e(82563),f=e(23062),m=e(29409),u=e(50820),h=e(78354);const C={dedupStrategy:r.Y4.none},x=100,b="grafana.explore.datasource",g=F=>`${b}.${F}`,p=F=>store.getObject(g(F)),v=(F,J)=>f.Z.setObject(g(F),J);function E(){return(0,t.x0)(3)}async function P(F){const{queries:J,dsRef:Q,timeRange:Z,scopedVars:ne}=F;let ee=await(0,l.F)().get(Q),de=J.filter(ye=>ye.datasource?.uid!==m.Yq),Pe;if(ee){let ye={range:(0,a.R_)(Z.raw)};ee.interpolateVariablesInQueries?ye={...ye,datasource:ee.uid,queries:ee.interpolateVariablesInQueries(de,ne??{})}:ye={...ye,datasource:ee.uid,queries:de};const he=JSON.stringify({[E()]:ye});Pe=a.Cj.renderUrl("/explore",{panes:he,schemaVersion:1})}return Pe}function S(F,J,Q,Z,ne,ee){const de=J.reduce((De,le)=>(De+=le.key,De),""),{interval:Pe,intervalMs:ye}=j(Z,Q.minInterval,Q.maxDataPoints),he=`${de}`,me={app:i.zj.Explore,timezone:ee||y.Ys,startTime:Date.now(),interval:Pe,intervalMs:ye,panelId:he,targets:J,range:Z,requestId:"explore_"+F,rangeRaw:Z.raw,scopedVars:{__interval:{text:Pe,value:Pe},__interval_ms:{text:ye,value:ye}},maxDataPoints:Q.maxDataPoints,liveStreaming:Q.liveStreaming};return{queries:J,request:me,scanning:ne,id:A(),done:!1}}const M=({key:F,...J})=>J,R=F=>{if(F)try{return JSON.parse(F)}catch(J){console.error(J)}},I=(F,J)=>{if(F==null)return"";try{return JSON.stringify(F,null,J)}catch(Q){console.error(Q)}return""};function A(F=0){return`Q-${(0,n.Z)()}-${F}`}async function O(F,J=0,Q){let Z,ne,ee;return Q?ne=Q:F.length>0&&F[F.length-1].datasource?ne=F[F.length-1].datasource:(Z=await(0,l.F)().get(),ee=Z.getDefaultQuery?.(i.zj.Explore),ne=Z.getRef()),Z||(Z=await(0,l.F)().get(ne),ee=Z.getDefaultQuery?.(i.zj.Explore)),{...ee,refId:(0,h.Hs)(F),key:A(J),datasource:ne}}const N=(F,J,Q=0)=>{const Z=A(Q),ne=F.refId||getNextRefIdChar(J);return{...F,refId:ne,key:Z}};async function o(F,J){if(F&&typeof F=="object"&&F.length>0){const Q=[];for(let Z=0;Z<F.length;Z++){const ne=F[Z],ee=A(Z);let de=ne.refId;de||(de=(0,h.Hs)(Q));let Pe=!0;if(ne.datasource)try{await(0,l.F)().get(ne.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),Pe=!1}Pe&&Q.push({...ne,refId:de,key:ee})}return Q}try{const Q=J??(await(0,l.F)().get()).getRef();return[await O(F??[],void 0,Q)]}catch{return[]}}const w=["refId","key","context","datasource"];function K(F){return F&&F.some(J=>Object.keys(J).filter(Z=>w.indexOf(Z)===-1).map(Z=>J[Z]).filter(Z=>Z).length>0)}function V(F,J,Q){const Z=Date.now();let ne=F;Q.forEach(de=>{ne=[{query:de,ts:Z},...ne]}),ne.length>x&&(ne=ne.slice(0,x));const ee=`grafana.explore.history.${J}`;try{return f.Z.setObject(ee,ne),ne}catch(de){return console.error(de),F}}const _=F=>F.reduce((Q,Z,ne)=>{const ee=Z.datasource?.uid||Z.key;return Q.concat(`${ee}-${ne}`)},[]),U=(F,J,Q)=>{let Z=c.convertRawToRange(J,F,Q);return Z.to.isBefore(Z.from)&&(Z=c.convertRawToRange({from:Z.raw.to,to:Z.raw.from},F,Q)),Z},$=F=>d.dP.isLive(F)?r.UV.Ascending:r.UV.Descending,k=F=>{let Q=`${window.location.protocol==="https:"?"wss://":"ws://"}${window.location.host}${u.config.appSubUrl}`;return Q.endsWith("/")&&(Q=Q.slice(0,-1)),`${Q}${F}`},H=F=>{F&&F.unsubscribe()};function j(F,J,Q){return Q?c.calculateInterval(F,Q,J):{interval:"1s",intervalMs:1e3}}const z=F=>{const J=document.createElement("textarea");J.value=F,document.body.appendChild(J),J.select(),document.execCommand("copy"),document.body.removeChild(J)}},5365:(X,L,e)=>{"use strict";e.d(L,{Xv:()=>b,aO:()=>C,nS:()=>a,rZ:()=>u,tW:()=>x});var t=e(86832),n=e.n(t),r=e(14255);const a=p=>{const v=p.method,E=m(p),P=u(E),S=h(p,P),M=g(p);return{method:v,headers:E,body:S,credentials:M}},i={canParse:()=>!0,parse:p=>(p.get("accept")||p.set("accept","application/json, text/plain, */*"),p)},y=p=>({canParse:v=>(v?.method?v?.method.toLowerCase():"")===p,parse:v=>(v.get("content-type")||v.set("content-type","application/json"),v)}),c=y("post"),l=y("put"),d=y("patch"),f=[c,l,d,i],m=p=>{const v=p?.headers?new Headers(p.headers):new Headers;return f.filter(S=>S.canParse(p)).reduce((S,M)=>M.parse(S),v)},u=p=>{if(!p)return!1;const v=p.get("content-type");return!!(v&&v.toLowerCase()==="application/json")},h=(p,v)=>p&&(!p.data||typeof p.data=="string"||p.data instanceof Blob?p.data:v?JSON.stringify(p.data):new URLSearchParams(p.data));async function C(p,v){if(v)switch(v){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"json":return p.headers.get("Content-Length")==="0"?(console.warn(`${p.url} returned an invalid JSON`),{}):await p.json();case"text":return p.text()}const E=await p.text();try{return JSON.parse(E)}catch{}return E}function x(p){return Object.keys(p).map(v=>{const E=p[v];return Array.isArray(E)?E.map(P=>`${encodeURIComponent(v)}=${encodeURIComponent(P)}`).join("&"):`${encodeURIComponent(v)}=${encodeURIComponent(E)}`}).join("&")}const b=p=>{const v=(0,t.omitBy)(p.params,P=>P===void 0||P&&P.length===0),E=x(v);return p.params&&E.length?`${p.url}?${E}`:p.url},g=p=>p&&(p.credentials?p.credentials:p.withCredentials?((0,r.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin")},57804:(X,L,e)=>{"use strict";e.r(L),e.d(L,{default:()=>t});function t(n,r){r=r||{};const a=r.delimiter||".";let i=r.maxDepth||3,y=1;const c={};function l(d,f){Object.keys(d).forEach(m=>{const u=d[m],h=r?.safe&&Array.isArray(u),x=Object.prototype.toString.call(u)==="[object Object]",b=f?f+a+m:m;if(r?.maxDepth||(i=y+1),!h&&x&&Object.keys(u).length&&y<i)return++y,l(u,b);c[b]=u})}return l(n,null),c}},8741:(X,L,e)=>{"use strict";e.d(L,{Z:()=>c});var t=e(14255),n=e(55705),r=e(81626),a=e(83502);const y={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:l=>((0,t.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.yI)(l)),roundInterval:l=>((0,t.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),r.roundInterval(l)),secondsToHms:l=>((0,t.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),r.secondsToHms(l)),secondsToHhmmss:l=>{const d=[],f=Math.floor(l/3600),m=Math.floor(l%3600/60),u=Math.floor(l%3600%60);return f>9?d.push(""+f):d.push("0"+f),m>9?d.push(""+m):d.push("0"+m),u>9?d.push(""+u):d.push("0"+u),d.join(":")},toPercent:(l,d)=>Math.floor(l/d*1e4)/100+"%",addSlashes:l=>l.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:l=>((0,t.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),r.describeInterval(l)),intervalToSeconds:l=>((0,t.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),r.intervalToSeconds(l)),intervalToMs:l=>((0,t.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),r.intervalToMs(l)),calculateInterval:(l,d,f)=>((0,t.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),r.calculateInterval(l,d,f)),queryColorDot:(l,d)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+l,"font-size:"+d+"px"].join(";")+'"></div>',slugifyForUrl:l=>l.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:l=>((0,t.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.jO)(l)),toFixed:(l,d)=>{if(l===null)return"";const f=d?Math.pow(10,Math.max(0,d)):1,m=String(Math.round(l*f)/f);if(m.indexOf("e")!==-1||l===0)return m;if(d!=null){const u=m.indexOf("."),h=u===-1?0:m.length-u-1;if(h<d)return(h?m:m+".")+String(f).slice(1,d-h+1)}return m},toFixedScaled:(l,d,f,m,u)=>f===null?y.toFixed(l,d)+u:y.toFixed(l,f+m)+u,roundValue:(l,d)=>{if(l===null)return null;const f=Math.pow(10,d),m=(f*l).toFixed(d);return Math.round(parseFloat(m))/f},getUnitFormats:a.QW};typeof Proxy<"u"?y.valueFormats=new Proxy(y.valueFormats,{get(l,d,f){if(typeof d!="string")throw{message:`Value format ${String(d)} is not a string`};const m=(0,a.Cf)(d);return m?(u,h,C,x)=>(0,a.zc)(m(u,h,C,x?"utc":"browser")):Reflect.get(l,d,f)}}):y.valueFormats=(0,a.Td)();const c=y},20305:(X,L,e)=>{"use strict";e.d(L,{L:()=>r,Y:()=>n});var t=e(26843);function n(a){switch(a){case"home":return(0,t.t)("nav.home.title","Home");case"new":return(0,t.t)("nav.new.title","New");case"create":return(0,t.t)("nav.create.title","Create");case"create-dashboard":return(0,t.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,t.t)("nav.create-folder.title","Folder");case"import":return(0,t.t)("nav.create-import.title","Import dashboard");case"alert":return(0,t.t)("nav.create-alert.title","Create alert rule");case"starred":return(0,t.t)("nav.starred.title","Starred");case"starred-empty":return(0,t.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,t.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.title","Library panels");case"reports":return(0,t.t)("nav.reporting.title","Reporting");case"dashboards/public":return(0,t.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,t.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,t.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,t.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,t.t)("nav.scenes.title","Scenes");case"explore":return(0,t.t)("nav.explore.title","Explore");case"alerting":return(0,t.t)("nav.alerting.title","Alerting");case"plugin-page-grafana-oncall-app":return(0,t.t)("nav.oncall.title","OnCall");case"alerting-legacy":return(0,t.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-home":return(0,t.t)("nav.alerting-home.title","Home");case"alert-list":return(0,t.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,t.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,t.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,t.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,t.t)("nav.alerting-silences.title","Silences");case"groups":return(0,t.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,t.t)("nav.alerting-admin.title","Admin");case"cfg":return(0,t.t)("nav.config.title","Administration");case"datasources":return(0,t.t)("nav.datasources.title","Data sources");case"authentication":return(0,t.t)("nav.authentication.title","Authentication");case"licensing":return(0,t.t)("nav.statistics-and-licensing.title","Statistics and licensing");case"recordedQueries":return(0,t.t)("nav.recorded-queries.title","Recorded queries");case"correlations":return(0,t.t)("nav.correlations.title","Correlations");case"users":return(0,t.t)("nav.users.title","Users");case"teams":return(0,t.t)("nav.teams.title","Teams");case"plugins":return(0,t.t)("nav.plugins.title","Plugins");case"org-settings":return(0,t.t)("nav.org-settings.title","Default preferences");case"apikeys":return(0,t.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,t.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,t.t)("nav.admin.title","Server admin");case"support-bundles":return(0,t.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,t.t)("nav.global-users.title","Users");case"global-orgs":return(0,t.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,t.t)("nav.server-settings.title","Settings");case"storage":return(0,t.t)("nav.storage.title","Storage");case"upgrading":return(0,t.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,t.t)("nav.monitoring.title","Observability");case"apps":return(0,t.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"plugin-page-grafana-incident-app":return(0,t.t)("nav.incidents.title","Incidents");case"plugin-page-grafana-ml-app":return(0,t.t)("nav.machine-learning.title","Machine learning");case"plugin-page-grafana-slo-app":return(0,t.t)("nav.slo.title","SLO");case"plugin-page-k6-app":return(0,t.t)("nav.performance-testing.title","Performance testing");case"monitoring":return(0,t.t)("nav.observability.title","Observability");case"plugin-page-grafana-k8s-app":return(0,t.t)("nav.kubernetes.title","Kubernetes");case"plugin-page-grafana-app-observability-app":return(0,t.t)("nav.application.title","Application (preview)");case"plugin-page-grafana-pyroscope-app":return(0,t.t)("nav.profiles.title","Profiles");case"plugin-page-grafana-kowalski-app":return(0,t.t)("nav.frontend.title","Frontend");case"plugin-page-grafana-synthetic-monitoring-app":return(0,t.t)("nav.synthetics.title","Synthetics");case"help":return(0,t.t)("nav.help.title","Help");case"profile/settings":return(0,t.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,t.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,t.t)("nav.profile/password.title","Change password");case"sign-out":return(0,t.t)("nav.sign-out.title","Sign out");case"search":return(0,t.t)("nav.search-dashboards.title","Search dashboards");case"connections":return(0,t.t)("nav.connections.title","Connections");case"connections-add-new-connection":return(0,t.t)("nav.add-new-connections.title","Add new connection");case"connections-datasources":return(0,t.t)("nav.data-sources.title","Data sources");case"standalone-plugin-page-/connections/infrastructure":return(0,t.t)("nav.infrastructure.title","Infrastructure");case"standalone-plugin-page-/connections/connect-data":return(0,t.t)("nav.connect-data.title","Connect data");case"plugin-page-grafana-detect-app":return(0,t.t)("nav.detect.title","Detect");case"plugin-page-grafana-quaderno-app":return(0,t.t)("nav.grafana-quaderno.title","Grafana Quaderno");default:return}}function r(a){switch(a){case"dashboards":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,t.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,t.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,t.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,t.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,t.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,t.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,t.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,t.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,t.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,t.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,t.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,t.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,t.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,t.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,t.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,t.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,t.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,t.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,t.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,t.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,t.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,t.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"apps":return(0,t.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,t.t)("nav.monitoring.subtitle","Monitoring and infrastructure apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");case"connections-add-new-connection":return(0,t.t)("nav.connections.subtitle","Browse and create new connections");case"connections-datasources":return(0,t.t)("nav.data-sources.subtitle","View and manage your connected data source connections");default:return}}},78354:(X,L,e)=>{"use strict";e.d(L,{Hs:()=>t,R8:()=>i,mu:()=>a,vH:()=>n});const t=l=>{for(let d=0;;d++){const f=y(d);if(!l.some(m=>m.refId===f))return f}};function n(l){const d=["refId","hide","key","queryType","datasource"];for(const f in l)if(f!=="label"&&!d.includes(f))return!1;return!0}function r(l,d,f){const m={...d,refId:t(l),hide:!1};return!m.datasource&&f&&(m.datasource=f),[...l,m]}function a(l){return l.indexOf("api/datasources/proxy")!==-1||l.indexOf("api/ds/query")!==-1}function i(l){return!l.match(/^http/)}function y(l){const d="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return l<d.length?d[l]:y(Math.floor(l/d.length)-1)+d[l%d.length]}function c(l){return l||void 0}},38533:(X,L,e)=>{"use strict";e.r(L),e.d(L,{getFlotRange:()=>a,getFlotTickDecimals:()=>i,getFlotTickSize:()=>r,getPrecision:()=>l,getScaledDecimals:()=>n,getStringPrecision:()=>d,grafanaTimeFormat:()=>y,logp:()=>c,tickStep:()=>t});function t(f,m,u){const h=Math.sqrt(50),C=Math.sqrt(10),x=Math.sqrt(2),b=Math.abs(m-f)/Math.max(0,u);let g=Math.pow(10,Math.floor(Math.log(b)/Math.LN10));const p=b/g;return p>=h?g*=10:p>=C?g*=5:p>=x&&(g*=2),m<f?-g:g}function n(f,m){return f-Math.floor(Math.log(m)/Math.LN10)}function r(f,m,u,h){const C=(m-f)/u;let x=-Math.floor(Math.log(C)/Math.LN10);const b=h,g=Math.pow(10,-x),p=C/g;let v;return p<1.5?v=1:p<3?(v=2,p>2.25&&(b==null||x+1<=b)&&(v=2.5,++x)):p<7.5?v=5:v=10,v*=g,v}function a(f,m,u,h){let x=+(f??u),b=+(m??h);const g=b-x;if(g===0){const v=Math.abs(b===0?1:b*.25);f===null&&(x-=v),(m==null||f!=null)&&(b+=v)}else f==null&&(x-=g*.02,x<0&&u!=null&&u>=0&&(x=0)),m==null&&(b+=g*.02,b>0&&h!=null&&h<=0&&(b=0));return{min:x,max:b}}function i(f,m,u,h){const{min:C,max:x}=a(u.min,u.max,f,m),b=.3*Math.sqrt(h),g=(x-C)/b,p=-Math.floor(Math.log(g)/Math.LN10),v=Math.pow(10,-p),E=g/v;let P;E<1.5?P=1:E<3?(P=2,E>2.25&&(P=2.5)):E<7.5?P=5:P=10,P*=v;const S=Math.max(0,-Math.floor(Math.log(g)/Math.LN10)+1),M=S-Math.floor(Math.log(P)/Math.LN10);return{tickDecimals:S,scaledDecimals:M}}function y(f,m,u){if(m&&u&&f){const h=u-m,C=h/f/1e3,x=864e5,b=31536e6;return C<=45?"HH:mm:ss":C<=7200||h<=x?"HH:mm":C<=8e4?"MM/DD HH:mm":C<=2419200||h<=b?"MM/DD":"YYYY-MM"}return"HH:mm"}function c(f,m){return Math.log(f)/Math.log(m)}function l(f){const m=f.toString();return d(m)}function d(f){if(isNaN(f))return 0;const m=f.indexOf(".");return m===-1?0:f.length-m-1}},56858:(X,L,e)=>{"use strict";e.d(L,{e:()=>n,h:()=>r});var t=e(92403);const n=(a,i)=>{const y={from:(0,t.zh)(i.from),to:(0,t.zh)(i.to)},c=(y.to.valueOf()-y.from.valueOf())/2;let l,d;return a===-1?(l=y.to.valueOf()-c,d=y.from.valueOf()-c):a===1?(l=y.to.valueOf()+c,d=y.from.valueOf()+c,l>Date.now()&&y.to.valueOf()<Date.now()&&(l=Date.now(),d=y.from.valueOf())):(l=y.to.valueOf(),d=y.from.valueOf()),{from:d,to:l}},r=(a,i)=>{const y=a.to.valueOf()-a.from.valueOf(),c=a.to.valueOf()-y/2,l=y===0?3e4:y*i,d=c+l/2;return{from:c-l/2,to:d}}},85926:(X,L,e)=>{"use strict";e.d(L,{q7:()=>n});var t=e(92403);function n(i,y){if(!(i.fromDayOfWeek||i.from)&&!(i.toDayOfWeek||i.to))return[];const c={...i};c.from&&!c.to&&(c.to=c.from),!c.from&&c.to&&(c.from=c.to);const l={from:r(c.from),to:r(c.to)};if(!c.fromDayOfWeek&&c.toDayOfWeek&&(c.fromDayOfWeek=c.toDayOfWeek),!c.toDayOfWeek&&c.fromDayOfWeek&&(c.toDayOfWeek=c.fromDayOfWeek),c.fromDayOfWeek&&(l.from.dayOfWeek=Number(c.fromDayOfWeek)),c.toDayOfWeek&&(l.to.dayOfWeek=Number(c.toDayOfWeek)),l.from.dayOfWeek&&l.from.h==null&&l.from.m==null&&(l.from.h=0,l.from.m=0,l.from.s=0),l.to.dayOfWeek&&l.to.h==null&&l.to.m==null&&(l.to.h=23,l.to.m=59,l.to.s=59),!l.from||!l.to)return[];l.from.h==null&&(l.from.h=0),l.to.h==null&&(l.to.h=23);const d=[],f=(0,t.CQ)(y.from).utc();for(f.set("hour",0),f.set("minute",0),f.set("second",0),f.set("millisecond",0),f.add(l.from.h,"hours"),f.add(l.from.m,"minutes"),f.add(l.from.s,"seconds");f.unix()<=y.to.unix();){for(;l.from.dayOfWeek&&l.from.dayOfWeek!==f.isoWeekday();)f.add(24,"hours");if(f.unix()>y.to.unix())break;const m=(0,t.CQ)(f).utc();if(m.hour)if(l.from.h<=l.to.h)m.add(l.to.h-l.from.h,"hours");else if(l.from.h>l.to.h)for(;m.hour()!==l.to.h;)m.add(1,"hours");else for(m.add(24-l.from.h,"hours");m.hour()!==l.to.h;)m.add(1,"hours");for(m.set("minute",l.to.m??0),m.set("second",l.to.s??0);l.to.dayOfWeek&&l.to.dayOfWeek!==m.isoWeekday();)m.add(24,"hours");f.unix()<y.from.unix()&&m.unix()<y.from.unix()||f.unix()>y.to.unix()&&m.unix()>y.to.unix()||d.push({from:f.valueOf(),to:m.valueOf()}),f.add(24,"hours")}return d}function r(i){const y={};if(!i?.length)return y;const c=i.split(":");return c?.length&&(y.h=Math.min(23,Math.max(0,Number(c[0]))),c.length>1&&(y.m=Math.min(60,Math.max(0,Number(c[1]))),c.length>2&&(y.s=Math.min(60,Math.max(0,Number(c[2])))))),y}function a(i){if(!i||i.h==null&&i.m==null&&i.s==null)return"";let y=String(i.h??0).padStart(2,"0")+":"+String(i.m??0).padStart(2,"0");return i.s!=null&&(y+=String(i.s??0).padStart(2,"0")),y}},68586:(X,L,e)=>{"use strict";e.d(L,{et:()=>a,fy:()=>y,nO:()=>i,np:()=>l});var t=e(7906),n=e(2221),r=e(89591);function a(d){return d.sort((m,u)=>m[0]-u[0]),d.reduce((m,u)=>{if(!m.length)return[u];const h=m.slice(-1)[0],[C,x]=h,[b,g]=u;return g<x?m:b>x?[...m,u]:[...m.slice(0,-1),[C,g]]},[]).reduce((m,u)=>m+(u[1]-u[0]),0)}function i(d){const f={};let m;for(let u=0;m=d(u),!!m;u++){f[m.id]?f[m.id].span=m.span:f[m.id]={span:m.span,children:[]};for(const h of m.parentIds)h&&(f[h]?f[h].children.push(m.id):f[h]={span:void 0,children:[m.id]})}return f}function y(d,f,m){return{main:`${c(d)}ms (${c(d/f*100)}%)`,secondary:`${c(m)}ms (${c(m/d*100)}%)`}}function c(d){return parseFloat(d.toFixed(2))}function l(){const d=new t.v({fields:[{name:n.z.id,type:r.fS.string},{name:n.z.title,type:r.fS.string},{name:n.z.subTitle,type:r.fS.string},{name:n.z.mainStat,type:r.fS.string,config:{displayName:"Total time (% of trace)"}},{name:n.z.secondaryStat,type:r.fS.string,config:{displayName:"Self time (% of total)"}},{name:n.z.color,type:r.fS.number,config:{color:{mode:"continuous-GrYlRd"},displayName:"Self time / Trace duration"}}],meta:{preferredVisualisationType:"nodeGraph"}}),f=new t.v({fields:[{name:n.z.id,type:r.fS.string},{name:n.z.target,type:r.fS.string},{name:n.z.source,type:r.fS.string}],meta:{preferredVisualisationType:"nodeGraph"}});return[d,f]}},5026:(X,L,e)=>{"use strict";e.d(L,{$:()=>c,Z:()=>p});var t=e(86832),n=e.n(t),r=e(40927);const a=new r.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),i=[{text:"Query",value:"query"}],y={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var c=(v=>(v.IsAbove="gt",v.IsBelow="lt",v.IsOutsideRange="outside_range",v.IsWithinRange="within_range",v.HasNoValue="no_value",v))(c||{});const l=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],d=[{text:"OR",value:"or"},{text:"AND",value:"and"}],f=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],m=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],u=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function h(v){const E=new r.zU({type:v.type,defaultParams:[]});return new r.XN(v,E)}function C(v){return v.toLowerCase().replace(/_/g,"").split(" ")[0]}function x(v){switch(C(v)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function b(v,E){return(0,t.reduce)(v,(P,S)=>(S.metric!==void 0&&S.value!==void 0&&P.push(S.metric+"="+S.value),S.Metric!==void 0&&S.Value!==void 0&&P.push(S.Metric+"="+S.Value),P),[]).join(E)}function g(v){return(0,t.isArray)(v.data)?b(v.data,", "):(0,t.isArray)(v.data.evalMatches)?b(v.data.evalMatches,", "):v.data.error?"Error: "+v.data.error:""}const p={alertQueryDef:a,getStateDisplayModel:x,conditionTypes:i,evalFunctions:l,evalOperators:d,noDataModes:m,executionErrorModes:u,reducerTypes:f,createReducerPart:h,getAlertAnnotationInfo:g,alertStateSortScore:y}},40927:(X,L,e)=>{"use strict";e.d(L,{C7:()=>y,D:()=>i,XN:()=>a,zU:()=>r});var t=e(86832),n=e.n(t);class r{constructor(f){this.type=f.type,this.params=f.params,this.defaultParams=f.defaultParams,this.renderer=f.renderer,this.category=f.category,this.addStrategy=f.addStrategy}}class a{constructor(f,m){if(this.part=f,this.def=m,!this.def)throw{message:"Could not find query part "+f.type};f.params=f.params||(0,t.clone)(this.def.defaultParams),this.params=f.params,this.text="",this.updateText()}render(f){return this.def.renderer(this,f)}hasMultipleParamsInString(f,m){return f.indexOf(",")===-1?!1:this.def.params[m+1]&&this.def.params[m+1].optional}updateParam(f,m){if(this.hasMultipleParamsInString(f,m)){(0,t.each)(f.split(","),(u,h)=>{this.updateParam(u.trim(),h)});return}f===""&&this.def.params[m].optional?this.params.splice(m,1):this.params[m]=f,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let f=this.def.type+"(";f+=this.params.join(", "),f+=")",this.text=f}}function i(d,f){const m=d.def.type+"(",u=(0,t.map)(d.params,(h,C)=>{const x=d.def.params[C];return x.type==="time"&&h==="auto"&&(h="$__interval"),x.quote==="single"?"'"+h+"'":x.quote==="double"?'"'+h+'"':h});return f&&u.unshift(f),m+u.join(", ")+")"}function y(d,f){return f+" "+d.params[0]}function c(d,f){return d.params[0]}function l(d,f){return'"'+d.params[0]+'"'}},79517:(X,L,e)=>{"use strict";e.d(L,{PN:()=>c,pM:()=>d,z7:()=>y});var t=e(46563),n=e(60450),r=e(32688),a=e(21308);const i=7,y={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",recordingRuleFromScratch:"creating recording rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError"};function c(x,b={}){r.config.grafanaJavascriptAgent.enabled&&t.s.api.pushLog([x],{level:n.in.INFO,context:{...b,module:"Alerting"}})}function l(x,b={}){logError(x,{...b,module:"Alerting"})}function d(x,b,g){return async function(...p){const v=performance.now(),E=await x(...p);return c(b,{loadTimeMs:(performance.now()-v).toFixed(0),...g}),E}}async function f(){try{const{createdAt:x}=await getBackendSrv().get("/api/user"),b=dateTime().subtract(i,"days"),g=dateTime(x);return b.isBefore(g)}catch{return!0}}const m=async(x={grafana_version:config.buildInfo.version,org_id:contextSrv.user.orgId,user_id:contextSrv.user.id})=>{await f()||reportInteraction("grafana_alerting_navigation",x)},u=async x=>{await f()||reportInteraction("grafana_alerting_rule_creation",x)},h=async x=>{await f()||reportInteraction("grafana_alerting_rule_aborted",x)},C=async x=>{await f()||reportInteraction("grafana_alerting_rule_form_error",x)}},20584:(X,L,e)=>{"use strict";e.d(L,{C:()=>y});var t=e(91986),n=e(31312),r=e(4148),a=e(79517);const i=()=>async c=>{try{const l=performance.now(),{data:d,...f}=await(0,n.n)((0,r.i)().fetch(c));return(0,a.PN)("Request finished",{loadTimeMs:(performance.now()-l).toFixed(0),url:c.url,method:c.method??"",responseStatus:f.statusText}),{data:d,meta:f}}catch(l){return{error:l}}},y=(0,t.LC)({reducerPath:"alertingApi",baseQuery:i(),tagTypes:["AlertmanagerChoice","AlertmanagerConfiguration","OnCallIntegrations"],endpoints:()=>({})})},41272:(X,L,e)=>{"use strict";e.d(L,{$l:()=>v,Bp:()=>C,CN:()=>c,Ch:()=>i,QK:()=>m,U7:()=>l,UK:()=>h,XK:()=>u,Zo:()=>E,dx:()=>d,oy:()=>y,tK:()=>p});var t=e(31312),n=e(69307),r=e(4148),a=e(95712);async function i(S){try{const M=await(0,t.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,a.gt)(S)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:M.data.template_files??{},template_file_provenances:M.data.template_file_provenances??{},alertmanager_config:M.data.alertmanager_config??{},last_applied:M.data.last_applied,id:M.data.id}}catch(M){if(S===a.GC&&(0,r.kW)(M)&&M.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw M}}async function y(S,M){await(0,t.n)((0,r.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,a.gt)(S)}/config/api/v1/alerts`,data:M,showErrorAlert:!1,showSuccessAlert:!1}))}async function c(S){await(0,t.n)((0,r.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,a.gt)(S)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function l(S){return(await(0,t.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,a.gt)(S)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function d(S,M){return(await(0,t.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,a.gt)(S)}/api/v2/silences`,data:M,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function f(S,M){await getBackendSrv().delete(`/api/alertmanager/${getDatasourceAPIUid(S)}/api/v2/silence/${encodeURIComponent(M)}`)}async function m(S,M,R=!0,I=!0,A=!0){const O=n.Cj.toUrlParams({silenced:R,active:I,inhibited:A})+M?.map(o=>`filter=${encodeURIComponent(`${P(o.name)}=${o.isRegex?"~":""}"${P(o.value)}"`)}`).join("&")||"";return(await(0,t.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,a.gt)(S)}/api/v2/alerts`+(O?"?"+O:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function u(S){return(await(0,t.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,a.gt)(S)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function h(S){return(await(0,t.n)((0,r.i)().fetch({url:`/api/alertmanager/${(0,a.gt)(S)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function C(S,M,R){const I={receivers:M,alert:R};try{const A=await(0,t.n)((0,r.i)().fetch({method:"POST",data:I,url:`/api/alertmanager/${(0,a.gt)(S)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(x(A.data))throw new Error(g(A.data))}catch(A){throw(0,r.kW)(A)&&b(A.data)&&x(A.data)?new Error(g(A.data)):A}}function x(S){return S.receivers.some(M=>M.grafana_managed_receiver_configs.some(R=>R.status==="failed"))}function b(S){const M=S?.receivers;return Array.isArray(M)?M.every(R=>typeof R.name=="string"&&Array.isArray(R.grafana_managed_receiver_configs)):!1}function g(S){return S.receivers.flatMap(M=>M.grafana_managed_receiver_configs.filter(R=>R.status==="failed").map(R=>R.error??"Unknown error.")).join("; ")}async function p(S){await(0,t.n)((0,r.i)().fetch({method:"POST",data:S,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{E()})}async function v(){return(await(0,t.n)((0,r.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function E(){return(await(0,t.n)((0,r.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function P(S){return S.replace(/"/g,'\\"')}},37546:(X,L,e)=>{"use strict";e.d(L,{h:()=>C});var t=e(86832),n=e.n(t),r=e(74600),a=e(79517),i=e(14949),y=e(95712),c=e(59471),l=e(57675),d=e(20584),f=e(41272),m=e(14055);const u=10,h=30*1e3,C=d.C.injectEndpoints({endpoints:x=>({getAlertmanagerAlerts:x.query({query:({amSourceName:b,filter:g})=>{const p=g?.matchers?.filter(I=>I.name&&I.value).map(I=>`${I.name}${(0,i.zy)(I)}${(0,c.sM)(I.value)}`),{silenced:v,inhibited:E,unprocessed:P,active:S}=g||{},M=Object.fromEntries(Object.entries({silenced:v,active:S,inhibited:E,unprocessed:P}).filter(([I,A])=>A!==void 0)),R={filter:p};return M&&Object.keys(M).forEach(I=>{R[I]=M[I]}),{url:`/api/alertmanager/${(0,y.gt)(b)}/api/v2/alerts`,params:R}}}),getAlertmanagerAlertGroups:x.query({query:({amSourceName:b})=>({url:`/api/alertmanager/${(0,y.gt)(b)}/api/v2/alerts/groups`})}),grafanaNotifiers:x.query({query:()=>({url:"/api/alert-notifiers"})}),getAlertmanagerChoiceStatus:x.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagerConfig:x.query({query:()=>({url:"/api/v1/ngalert/admin_config"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagers:x.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:b=>b.data}),saveExternalAlertmanagersConfig:x.mutation({query:b=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:b}),invalidatesTags:["AlertmanagerChoice"]}),getValidAlertManagersConfig:x.query({query:()=>({url:`/api/alertmanager/${(0,y.gt)(y.GC)}/config/history?limit=${u}`})}),resetAlertManagerConfigToOldVersion:x.mutation({query:b=>({url:`/api/alertmanager/${(0,y.gt)(y.GC)}/config/history/${b.id}/_activate`,method:"POST"})}),getAlertmanagerConfiguration:x.query({queryFn:async b=>{const g=b===y.GC;if((0,y.RY)(b))return(0,l.$b)((0,f.UK)(b).then(R=>({data:{alertmanager_config:R.config,template_files:{}}})));const{data:v}=await(0,r.WI)(m.T.endpoints.discoverAmFeatures.initiate({amSourceName:b})),E={alertmanager_config:{},template_files:{},template_file_provenances:{}},P=v?.lazyConfigInit??!1,S=(0,a.pM)(f.Ch,`[${b}] Alertmanager config loaded`,{dataSourceName:b,thunk:"unifiedalerting/fetchAmConfig"}),M=(0,c.fm)(()=>S(b),R=>!!(0,l.kk)(R)?.includes("alertmanager storage object not found")&&!P,h).then(R=>g?R:(0,t.isEmpty)(R.alertmanager_config)&&(0,t.isEmpty)(R.template_files)?(0,f.UK)(b).then(A=>({alertmanager_config:A.config,template_files:{},template_file_provenances:R.template_file_provenances,last_applied:R.last_applied,id:R.id})):R).then(R=>R??E).then(R=>({data:R})).catch(R=>{if(P&&(0,l.kk)(R)?.includes("alertmanager storage object not found"))return{data:E};throw R});return(0,l.$b)(M).catch(R=>({error:R,data:void 0}))},providesTags:["AlertmanagerConfiguration"]}),updateAlertmanagerConfiguration:x.mutation({query:({selectedAlertmanager:b,config:g,...p})=>({url:`/api/alertmanager/${(0,y.gt)(b)}/config/api/v1/alerts`,method:"POST",data:g,...p}),invalidatesTags:["AlertmanagerConfiguration"]}),getContactPointsStatus:x.query({query:()=>({url:`/api/alertmanager/${(0,y.gt)(y.GC)}/config/api/v1/receivers`}),transformResponse:b=>{const g=p=>p.startsWith("0001-01-01");return b.map(p=>({...p,integrations:p.integrations.map(v=>{const E=g(v.lastNotifyAttempt);return{...v,lastNotifyAttempt:E?"":v.lastNotifyAttempt,lastNotifyAttemptDuration:E?"":v.lastNotifyAttemptDuration}})}))}})})})},78313:(X,L,e)=>{"use strict";e.d(L,{C$:()=>l,SJ:()=>m,WG:()=>d,Zy:()=>f});var t=e(31312),n=e(4148),r=e(17330),a=e(63483),i=e(95712),y=e(32735),c=e(98301);async function l(g){if(g===i.GC)return{features:{rulerApiEnabled:!0}};const p=(0,i.c$)(g);if(!p)throw new Error(`Cannot find data source configuration for ${g}`);const{url:v,name:E,type:P}=p;if(!v)throw new Error("The data source url cannot be empty.");if(P!=="prometheus"&&P!=="loki")throw new Error(`The build info request is not available for ${P}. Only 'prometheus' and 'loki' are supported`);return d({name:E,url:v,type:P})}async function d(g){const{url:p,name:v,type:E}=g,P=E==="loki"?void 0:await h(p);if(!(P!==void 0)){if(!await C(v))throw new Error(`Unable to fetch alert rules. Is the ${v} data source properly configured?`);const I=await x(v);return{application:r.T8.Cortex,features:{rulerApiEnabled:I}}}const{features:M}=P.data;return M?{application:r.T8.Mimir,features:{rulerApiEnabled:M?.ruler_config_api==="true"}}:{application:r.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function f(g){if(g===i.GC)return{lazyConfigInit:!1};const p=u(g),{url:v,type:E}=p;if(!v)throw new Error("The data source url cannot be empty.");if(E!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${E}. Only 'alertmanager' type is supported`);return await m(v)}async function m(g){try{return{lazyConfigInit:(await h(g))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function u(g){const p=(0,i.c$)(g);if(!p)throw new Error(`Cannot find data source configuration for ${g}`);return p}async function h(g){return(await(0,t.n)((0,n.i)().fetch({url:`${g}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(v=>{if(!("status"in v&&v.status===404))throw v}))?.data}async function C(g){try{return await(0,y.j)(g),!0}catch{return!1}}async function x(g){try{return await(0,c.jw)(g),!0}catch(p){if(b(p))return!1;throw p}}function b(g){return(0,n.kW)(g)?g.data.message?.includes("GetRuleGroup unsupported in rule local store")||g.data.message?.includes("page not found")||g.data.message?.includes(a.jZ):g instanceof Error&&g.message?.includes("404 from rules config endpoint")}},14055:(X,L,e)=>{"use strict";e.d(L,{T:()=>y});var t=e(17330),n=e(79517),r=e(95712),a=e(20584),i=e(78313);const y=a.C.injectEndpoints({endpoints:c=>({discoverAmFeatures:c.query({queryFn:async({amSourceName:l})=>{try{return{data:await(0,i.Zy)(l)}}catch(d){return{error:d}}}}),discoverDsFeatures:c.query({queryFn:async({rulesSourceName:l})=>{const d=(0,r.VX)(l);if(!d)return{error:new Error(`Missing data source configuration for ${l}`)};const m=await(0,n.pM)(i.C$,`[${l}] Rules source features discovered`,{dataSourceName:l,endpoint:"unifiedalerting/featureDiscoveryApi/discoverDsFeatures"})(d.name);return{data:{rulerConfig:m.features.rulerApiEnabled?{dataSourceName:d.name,apiVersion:m.application===t.T8.Cortex?"legacy":"config"}:void 0}}}})})})},32735:(X,L,e)=>{"use strict";e.d(L,{Tb:()=>c,hd:()=>y,j:()=>d,lL:()=>l});var t=e(31312),n=e(4148),r=e(95712),a=e(94435);function i(f){const{dataSourceName:m,limitAlerts:u,identifier:h}=f;return{rules:(C,x,b)=>{const g=new URLSearchParams;m===r.GC&&u&&g.set("limit_alerts",String(u)),h&&((0,a.qE)(h)||(0,a.E4)(h))&&(g.set("file",h.namespace),g.set("rule_group",h.groupName));const p=y(g,C);return{url:`/api/prometheus/${(0,r.gt)(m)}/api/v1/rules`,params:c(p,x,b)}}}}function y(f,m){return m?.dashboardUID&&(f.set("dashboard_uid",m.dashboardUID),m?.panelId&&f.set("panel_id",String(m.panelId))),Object.fromEntries(f)}function c(f,m,u){let h={...f};if(m?.length&&(h={...h,state:m}),u?.length){const C=u.map(x=>JSON.stringify(x));h={...h,matcher:C}}return h}const l=(f,m)=>{const u={};return f.forEach(h=>{h.rules.forEach(C=>{C.query=C.query||""}),u[h.file]?u[h.file].groups.push(h):u[h.file]={dataSourceName:m,name:h.file,groups:[h]}}),Object.values(u)};async function d(f,m,u,h,C,x){if(m?.dashboardUID&&f!==r.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:b,params:g}=i({dataSourceName:f,limitAlerts:u,identifier:x}).rules(m,C,h),p=await(0,t.n)((0,n.i)().fetch({url:b,params:g,showErrorAlert:!1,showSuccessAlert:!1})).catch(v=>{throw"status"in v&&v.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):v});return l(p.data.data.groups,f)}},98301:(X,L,e)=>{"use strict";e.d(L,{BC:()=>u,IN:()=>y,P4:()=>c,jJ:()=>m,jw:()=>f,m6:()=>l,sz:()=>g});var t=e(31312),n=e(4148),r=e(63483),a=e(95712),i=e(32735);function y(p){const E=`${`/api/ruler/${(0,a.gt)(p.dataSourceName)}`}/api/v1/rules`,P=new URLSearchParams;return P.set("subtype",p.apiVersion==="legacy"?"cortex":"mimir"),{rules:S=>{const M=(0,i.hd)(P,S);return{path:`${E}`,params:M}},namespace:S=>({path:`${E}/${encodeURIComponent(S)}`,params:Object.fromEntries(P)}),namespaceGroup:(S,M)=>({path:`${E}/${encodeURIComponent(S)}/${encodeURIComponent(M)}`,params:Object.fromEntries(P)})}}async function c(p,v,E){const{path:P,params:S}=y(p).namespace(v);await(0,t.n)((0,n.i)().fetch({method:"POST",url:P,data:E,showErrorAlert:!1,showSuccessAlert:!1,params:S}))}async function l(p,v){if(v?.dashboardUID&&p.dataSourceName!==a.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:E,params:P}=y(p).rules(v);return h(E,{},P)}async function d(p,v){const{path:E,params:P}=y(p).namespace(v);return(await h(E,{},P))[v]||[]}async function f(p){return h(`/api/ruler/${(0,a.gt)(p)}/api/v1/rules/test/test`,null)}async function m(p,v,E){const{path:P,params:S}=y(p).namespaceGroup(v,E);return h(P,null,S)}async function u(p,v,E){const{path:P,params:S}=y(p).namespaceGroup(v,E);await(0,t.n)((0,n.i)().fetch({url:P,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:S}))}async function h(p,v,E){try{return(await(0,t.n)((0,n.i)().fetch({url:p,showErrorAlert:!1,showSuccessAlert:!1,params:E}))).data}catch(P){if(!C(P))throw P;if(b(P))return v;throw x(P)?{...P,data:{...P.data,message:r.jZ}}:P}}function C(p){const v=p.data!=null;return Number.isFinite(p.status)&&v}function x(p){return p.status===404||p.status===500&&p.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function b(p){return p.status===404&&(p.data.message?.includes("group does not exist")||p.data.message?.includes("no rule groups found"))}async function g(p,v){const{path:E,params:P}=y(p).namespace(v);await(0,t.n)((0,n.i)().fetch({method:"DELETE",url:E,showErrorAlert:!1,showSuccessAlert:!1,params:P}))}},91085:(X,L,e)=>{"use strict";e.d(L,{i:()=>i});var t=e(41407),n=e(39953),r=e(82803),a=e(68497);const i=({labelKey:c,value:l,operator:d="=",onRemoveLabel:f})=>{const m=(0,r.wW)(y);return n.createElement("div",{className:m.wrapper},c,d,l,!!f&&n.createElement(a.h,{name:"times",size:"xs",onClick:f,tooltip:"Remove label"}))},y=c=>({wrapper:(0,t.css)`
    padding: ${c.spacing(.5,1)};
    border-radius: ${c.shape.radius.default};
    border: solid 1px ${c.colors.border.medium};
    font-size: ${c.typography.bodySmall.fontSize};
    background-color: ${c.colors.background.secondary};
    font-weight: ${c.typography.fontWeightBold};
    color: ${c.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},13245:(X,L,e)=>{"use strict";e.d(L,{t:()=>d});var t=e(41407),n=e(39953),r=e(82803),a=e(68497),i=e(39017),y=e(86832);function c(m,u=1,h){const[C,x]=(0,n.useState)(u),b=(0,n.useMemo)(()=>(0,y.chunk)(m,h),[m,h]),g=b.length,p=b[C-1]??[],v=(C-1)*h+1,E=(0,y.clamp)(C*h,m.length),P=(0,n.useCallback)(R=>{x((0,y.clamp)(R,1,b.length))},[x,b]),S=(0,n.useCallback)(()=>P(C+1),[C,P]),M=(0,n.useCallback)(()=>P(C-1),[C,P]);return(0,n.useEffect)(()=>x(1),[g]),{page:C,onPageChange:P,numberOfPages:g,pageItems:p,pageStart:v,pageEnd:E,nextPage:S,previousPage:M}}const l=m=>(0,t.css)`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${m.spacing(2,0)};
  `,d=({cols:m,items:u,isExpandable:h=!1,onCollapse:C,onExpand:x,isExpanded:b,renderExpandedContent:g,testIdGenerator:p,pagination:v,paginationStyles:E,renderPrefixCell:P,renderPrefixHeader:S,footerRow:M,dataTestId:R})=>{const I=(0,r.wW)(l);if((C||x||b)&&!(C&&x&&b))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((h||g)&&!(h&&g))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const A=(0,r.wW)(f(m,h,!!S)),[O,N]=(0,n.useState)([]),o=$=>{b&&C&&x?b($)?C($):x($):N(O.includes($.id)?O.filter(k=>k!==$.id):[...O,$.id])},w=v?.itemsPerPage??u.length,{page:K,numberOfPages:V,onPageChange:_,pageItems:U}=c(u,1,w);return n.createElement(n.Fragment,null,n.createElement("div",{className:A.container,"data-testid":R??"dynamic-table"},n.createElement("div",{className:A.row,"data-testid":"header"},S&&S(),h&&n.createElement("div",{className:A.cell}),m.map($=>n.createElement("div",{className:A.cell,key:$.id},$.label))),U.map(($,k)=>{const H=b?b($):O.includes($.id);return n.createElement("div",{className:A.row,key:`${$.id}-${k}`,"data-testid":p?.($,k)??"row"},P&&P($,k,u),h&&n.createElement("div",{className:(0,t.cx)(A.cell,A.expandCell)},n.createElement(a.h,{tooltip:`${H?"Collapse":"Expand"} row`,"data-testid":"collapse-toggle",name:H?"angle-down":"angle-right",onClick:()=>o($)})),m.map(j=>n.createElement("div",{className:(0,t.cx)(A.cell,A.bodyCell,j.className),"data-column":j.label,key:`${$.id}-${j.id}`},j.renderCell($,k))),H&&g&&n.createElement("div",{className:A.expandedContentRow,"data-testid":"expanded-content"},g($,k,u)))}),M&&n.createElement("div",{className:(0,t.cx)(A.row,A.footerRow)},M)),v&&n.createElement(i.t,{className:(0,t.cx)(I,E),currentPage:K,numberOfPages:V,onNavigate:_,hideWhenSinglePage:!0}))},f=(m,u,h)=>{const C=m.map(x=>x.size?typeof x.size=="number"?`${x.size}fr`:x.size:"auto");return u&&C.unshift("calc(1em + 16px)"),h&&C.unshift("0"),x=>({container:(0,t.css)`
      border: 1px solid ${x.colors.border.weak};
      border-radius: ${x.shape.radius.default};
      color: ${x.colors.text.secondary};
    `,row:(0,t.css)`
      display: grid;
      grid-template-columns: ${C.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${x.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${x.colors.background.primary};
      }

      ${x.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${x.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${h?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:(0,t.css)`
      display: flex;
      padding: ${x.spacing(1)};
    `,cell:(0,t.css)`
      display: flex;
      align-items: center;
      padding: ${x.spacing(1)};

      ${x.breakpoints.down("sm")} {
        padding: ${x.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:(0,t.css)`
      overflow: hidden;

      ${x.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${x.colors.text.primary};
        }
      }
    `,expandCell:(0,t.css)`
      justify-content: center;

      ${x.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:(0,t.css)`
      grid-column-end: ${C.length+1};
      grid-column-start: ${h?3:2};
      grid-row: 2;
      padding: 0 ${x.spacing(3)} 0 ${x.spacing(1)};
      position: relative;

      ${x.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${x.colors.border.strong};
        grid-row: auto;
        padding: ${x.spacing(1)} 0 0 0;
      }
    `})}},44351:(X,L,e)=>{"use strict";e.d(L,{z:()=>d});var t=e(41407),n=e(77814),r=e.n(n),a=e(39953),i=e(27366),y=e(82803),c=e(66557),l=e(55407);const d=({children:m,header:u,content:h,footer:C,arrow:x,showAfter:b=300,wrapperClassName:g,disabled:p=!1,...v})=>{const E=(0,a.useRef)(null),P=(0,y.wW)(f);if(p)return m;const S=a.createElement(i.K,{direction:"column",gap:0},u&&a.createElement("div",{className:P.card.header},u),a.createElement("div",{className:P.card.body},h),C&&a.createElement("div",{className:P.card.footer},C));return a.createElement(c.D,{content:S,hideAfter:100},(M,R,I)=>a.createElement(a.Fragment,null,E.current&&a.createElement(l.J,{...I,...v,wrapperClassName:r()(P.popover(x?1.25:0),g),onMouseLeave:R,onMouseEnter:M,onFocus:M,onBlur:R,referenceElement:E.current,renderArrow:x?({arrowProps:A,placement:O})=>a.createElement("div",{className:P.arrow(O),...A}):()=>a.createElement(a.Fragment,null)}),a.cloneElement(m,{ref:E,onMouseEnter:M,onMouseLeave:R,onFocus:M,onBlur:R})))},f=m=>({popover:u=>(0,t.css)`
    border-radius: ${m.shape.radius.default};
    box-shadow: ${m.shadows.z3};
    background: ${m.colors.background.primary};
    border: 1px solid ${m.colors.border.medium};

    margin-bottom: ${m.spacing(u)};
  `,card:{body:(0,t.css)`
      padding: ${m.spacing(1)};
    `,header:(0,t.css)`
      padding: ${m.spacing(1)};
      background: ${m.colors.background.secondary};
      border-bottom: solid 1px ${m.colors.border.medium};
    `,footer:(0,t.css)`
      padding: ${m.spacing(.5)} ${m.spacing(1)};
      background: ${m.colors.background.secondary};
      border-top: solid 1px ${m.colors.border.medium};
    `},arrow:u=>{const h="9px";return(0,t.css)`
      width: 0;
      height: 0;

      border-left: ${h} solid transparent;
      border-right: ${h} solid transparent;
      /* using hex colors here because the border colors use alpha transparency */
      border-top: ${h} solid ${m.isLight?"#d2d3d4":"#2d3037"};

      &:after {
        content: '';
        position: absolute;

        border: ${h} solid ${m.colors.background.primary};
        border-bottom: 0;
        border-left-color: transparent;
        border-right-color: transparent;

        margin-top: 1px;
        bottom: 1px;
        left: -${h};
      }
    `}})},15429:(X,L,e)=>{"use strict";e.d(L,{_:()=>c});var t=e(41407),n=e(39953),r=e(63374),a=e(27366),i=e(82803),y=e(39285);const c=({label:d,value:f,icon:m,color:u,size:h="md"})=>{const C=(0,i.wW)(x=>l(x,u,h));return n.createElement("div",{className:C.wrapper,role:"listitem"},n.createElement(a.K,{direction:"row",gap:0,alignItems:"stretch",wrap:!1},n.createElement("div",{className:C.label},n.createElement(a.K,{direction:"row",gap:.5,alignItems:"center"},m&&n.createElement(y.J,{name:m})," ",d??"")),n.createElement("div",{className:C.value},f)))},l=(d,f,m)=>{const u=f??d.colors.secondary.main,h=d.isDark?(0,r.Z)(u).lighten(5).toString():(0,r.Z)(u).darken(5).toString(),C=d.isDark?(0,r.Z)(u).darken(5).toString():(0,r.Z)(u).lighten(5).toString(),x=f?r.Z.mostReadable(u,["#000","#fff"]).toString():d.colors.text.primary,b=m==="md"?`${d.spacing(.33)} ${d.spacing(1)}`:`${d.spacing(.2)} ${d.spacing(.6)}`;return{wrapper:(0,t.css)`
      color: ${x};
      font-size: ${d.typography.bodySmall.fontSize};

      border-radius: ${d.shape.borderRadius(2)};
    `,label:(0,t.css)`
      display: flex;
      align-items: center;
      color: inherit;

      padding: ${b};
      background: ${u};

      border: solid 1px ${h};
      border-top-left-radius: ${d.shape.borderRadius(2)};
      border-bottom-left-radius: ${d.shape.borderRadius(2)};
    `,value:(0,t.css)`
      color: inherit;
      padding: ${b};
      background: ${C};

      border: solid 1px ${h};
      border-left: none;
      border-top-right-radius: ${d.shape.borderRadius(2)};
      border-bottom-right-radius: ${d.shape.borderRadius(2)};
    `}}},78247:(X,L,e)=>{"use strict";e.d(L,{l:()=>c});var t=e(39953),n=e(94435),r=e(41407),a=e(82803);const i=({children:l,state:d,size:f="md",muted:m=!1})=>{const u=(0,a.wW)(y);return t.createElement("span",{className:(0,r.cx)(u.common,u[d],u[f],{[u.muted]:m})},l||d)},y=l=>({common:(0,r.css)`
    display: inline-block;
    color: white;
    border-radius: ${l.shape.radius.default};
    font-size: ${l.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${l.typography.fontWeightBold};
  `,good:(0,r.css)`
    background-color: ${l.colors.success.main};
    border: solid 1px ${l.colors.success.main};
    color: ${l.colors.success.contrastText};
  `,warning:(0,r.css)`
    background-color: ${l.colors.warning.main};
    border: solid 1px ${l.colors.warning.main};
    color: ${l.colors.warning.contrastText};
  `,bad:(0,r.css)`
    background-color: ${l.colors.error.main};
    border: solid 1px ${l.colors.error.main};
    color: ${l.colors.error.contrastText};
  `,neutral:(0,r.css)`
    background-color: ${l.colors.secondary.main};
    border: solid 1px ${l.colors.secondary.main};
    color: ${l.colors.secondary.contrastText};
  `,info:(0,r.css)`
    background-color: ${l.colors.primary.main};
    border: solid 1px ${l.colors.primary.main};
    color: ${l.colors.primary.contrastText};
  `,md:(0,r.css)`
    padding: ${l.spacing(.5,1)};
    min-width: ${l.spacing(8)};
  `,sm:(0,r.css)`
    padding: ${l.spacing(.3,.5)};
    min-width: 52px;
  `,muted:(0,r.css)`
    opacity: 0.5;
  `}),c=t.memo(({state:l,isPaused:d=!1,size:f="md",muted:m=!1})=>t.createElement(i,{state:(0,n.Aq)(l),size:f,muted:m},(0,n.SS)(l)," ",d?" (Paused)":""));c.displayName="AlertStateTag"},26544:(X,L,e)=>{"use strict";e.d(L,{_:()=>n});var t=e(21527);function n(r,a){return(0,t.useSelector)(i=>r(i.unifiedAlerting),a)}},32525:(X,L,e)=>{"use strict";e.d(L,{QY:()=>Qt,Nc:()=>Je,mS:()=>We,ei:()=>bt,lB:()=>Fe,dB:()=>zt,on:()=>Ve,zy:()=>ge,wE:()=>ue,vL:()=>re,Ms:()=>St,Vj:()=>Xe,dn:()=>ot,y6:()=>be,UR:()=>Ie,nw:()=>qe,je:()=>Qe,wy:()=>ze,D8:()=>pt,mM:()=>Bt,hv:()=>Tt});var t=e(77960),n=e(86832),r=e(13601),a=e(17330),i=e(1277),y=e(79517),c=e(41272),l=e(37546),d=e(4148);function f(oe){return(0,d.i)().get("/api/annotations",{alertId:oe}).then(pe=>pe?.sort(m))}function m(oe,pe){const Re=(xe,Ge)=>xe>Ge?-1:Ge>xe?1:0,ae=Re(oe.timeEnd,pe.timeEnd);if(ae)return ae;const ve=Re(oe.time,pe.time);return ve||Re(oe.id,pe.id)}var u=e(78313),h=e(95712);function C(){return(0,d.i)().get("/api/alert-notifiers")}const x=oe=>{const pe=oe.match(/^(\w+)(\[\d+\])?$/);return pe?{type:pe[1],index:pe[2]}:{type:oe,index:void 0}},b=oe=>{const pe={receivers:{},errorCount:0};oe.forEach(ae=>{pe.receivers[ae.name]={active:ae.active,notifiers:{},errorCount:0};const ve=pe.receivers[ae.name];ae.integrations.forEach(xe=>{!!xe?.lastNotifyAttemptError&&(ve.errorCount+=1);const at=g(xe.name);at&&(ve.notifiers[at]||(ve.notifiers[at]=[]),ve.notifiers[at].push(xe))})});const Re=Object.values(pe.receivers).reduce((ae,ve)=>ae+ve.errorCount,0);return{...pe,errorCount:Re}},g=oe=>x(oe)?.type;async function p(oe){try{const pe=await lastValueFrom(getBackendSrv().fetch({url:`/api/alertmanager/${getDatasourceAPIUid(oe)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return b(pe.data)}catch{return b([])}}var v=e(32735),E=e(98301),P=(oe=>(oe.grafana="grafana",oe.cloudAlerting="cloud-alerting",oe.cloudRecording="cloud-recording",oe))(P||{}),S=e(14949),M=e(59471),R=e(57675),I=e(30391),A=e(29409),O=e(5026),N=e(60703),o=e(63483),w=e(94435),K=e(67034);const V="1m",_=()=>{const{canCreateGrafanaRules:oe,canCreateCloudRules:pe}=getRulesAccess();return Object.freeze({name:"",uid:"",labels:[{key:"",value:""}],annotations:defaultAnnotations,dataSourceName:null,type:oe?RuleFormType.grafana:pe?RuleFormType.cloudAlerting:void 0,group:"",folder:null,queries:[],recordingRulesQueries:[],condition:"",noDataState:GrafanaAlertStateDecision.NoData,execErrState:GrafanaAlertStateDecision.Error,evaluateFor:"5m",evaluateEvery:V,namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function U(oe){const{name:pe,expression:Re,forTime:ae,forTimeUnit:ve,keepFiringForTime:xe,keepFiringForTimeUnit:Ge,type:at}=oe;if(at===P.cloudAlerting){let dt;return xe&&Ge&&(dt=`${xe}${Ge}`),{alert:pe,for:`${ae}${ve}`,keep_firing_for:dt,annotations:(0,M.S0)(oe.annotations||[]),labels:(0,M.S0)(oe.labels||[]),expr:Re}}else if(at===P.cloudRecording)return{record:pe,labels:(0,M.S0)(oe.labels||[]),expr:Re};throw new Error(`unexpected rule type: ${at}`)}function $(oe,pe){const Re=[...recordToArray(oe||{})];return pe&&Re.push({key:"",value:""}),Re}function k(oe){const pe=[...oe];return defaultAnnotations.map(ae=>ae.key).forEach((ae,ve)=>{const xe=pe.findIndex(Ge=>Ge.key===ae);if(xe===-1){const Ge={key:ae,value:""};pe.splice(ve,0,Ge)}else xe!==ve&&pe.splice(ve,0,pe.splice(xe,1)[0])}),pe}function H(oe){const{name:pe,condition:Re,noDataState:ae,execErrState:ve,evaluateFor:xe,queries:Ge,isPaused:at}=oe;if(Re)return{grafana_alert:{title:pe,condition:Re,no_data_state:ae,exec_err_state:ve,data:Ge.map(Pe),is_paused:!!at},for:xe,annotations:(0,M.S0)(oe.annotations||[]),labels:(0,M.S0)(oe.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function j(oe){const{ruleSourceName:pe,namespace:Re,group:ae,rule:ve}=oe,xe=_();if(isGrafanaRulesSource(pe))if(isGrafanaRulerRule(ve)){const Ge=ve.grafana_alert;return{...xe,name:Ge.title,type:RuleFormType.grafana,group:ae.name,evaluateEvery:ae.interval||xe.evaluateEvery,evaluateFor:ve.for||"0",noDataState:Ge.no_data_state,execErrState:Ge.exec_err_state,queries:Ge.data,condition:Ge.condition,annotations:k($(ve.annotations,!1)),labels:$(ve.labels,!0),folder:{title:Re,uid:Ge.namespace_uid},isPaused:Ge.is_paused}}else throw new Error("Unexpected type of rule for grafana rules source");else if(isAlertingRulerRule(ve)){const at={refId:"A",datasourceUid:getDataSourceSrv().getInstanceSettings(pe)?.uid??"",queryType:"",relativeTimeRange:getDefaultRelativeTimeRange(),expr:ve.expr,model:{refId:"A",hide:!1,expr:ve.expr}},dt=z(ve);return{...xe,...dt,queries:[at],annotations:k($(ve.annotations,!1)),type:RuleFormType.cloudAlerting,dataSourceName:pe,namespace:Re,group:ae.name}}else if(isRecordingRulerRule(ve)){const Ge=F(ve);return{...xe,...Ge,type:RuleFormType.cloudRecording,dataSourceName:pe,namespace:Re,group:ae.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function z(oe){const pe=_(),[Re,ae]=oe.for?parseInterval(oe.for):[pe.forTime,pe.forTimeUnit],[ve,xe]=oe.keep_firing_for?parseInterval(oe.keep_firing_for):[pe.keepFiringForTime,pe.keepFiringForTimeUnit];return{name:oe.alert,expression:oe.expr,forTime:Re,forTimeUnit:ae,keepFiringForTime:ve,keepFiringForTimeUnit:xe,annotations:$(oe.annotations,!1),labels:$(oe.labels,!0)}}function F(oe){return{name:oe.record,expression:oe.expr,labels:$(oe.labels,!0)}}const J=()=>{const oe=getDefaultOrFirstCompatibleDataSource();if(!oe)return[...Z("A","B")];const pe=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:oe.uid,queryType:"",relativeTimeRange:pe,model:{refId:"A"}},...Z("B","C")]},Q=oe=>{const pe=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:oe[0]?.uid||"",queryType:"",relativeTimeRange:pe,model:{refId:"A"}}]},Z=(...oe)=>{const pe=oe[0],Re=oe[1],ae={refId:oe[0],type:ExpressionQueryType.reduce,datasource:{uid:ExpressionDatasourceUID,type:ExpressionDatasourceRef.type},conditions:[{type:"query",evaluator:{params:[],type:EvalFunction.IsAbove},operator:{type:"and"},query:{params:[pe]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},ve={refId:Re,type:ExpressionQueryType.threshold,datasource:{uid:ExpressionDatasourceUID,type:ExpressionDatasourceRef.type},conditions:[{type:"query",evaluator:{params:[0],type:EvalFunction.IsAbove},operator:{type:"and"},query:{params:[Re]},reducer:{params:[],type:"last"}}],expression:pe};return[{refId:pe,datasourceUid:ExpressionDatasourceUID,queryType:"",model:ae},{refId:Re,datasourceUid:ExpressionDatasourceUID,queryType:"",model:ve}]},ne=async(oe,pe,Re,ae,ve,xe)=>{const Ge=[];for(const at of oe){const dt=await getDataSourceSrv().get(at.datasource?.uid?at.datasource:ae),st={uid:dt.uid,type:dt.type},Pt=rangeUtil.relativeToTimeRange(pe),{interval:we,intervalMs:Le}=de(Pt,xe??dt.interval,ve),Ke={__interval:{text:we,value:we},__interval_ms:{text:Le,value:Le},...Re},ht=dt.interpolateVariablesInQueries?await dt.interpolateVariablesInQueries([at],Ke)[0]:at;if(st.uid===ExpressionDatasourceUID){const xt={refId:ht.refId,queryType:"",relativeTimeRange:pe,datasourceUid:ExpressionDatasourceUID,model:ht};Ge.push(xt)}else{const xt=getDataSourceSrv().getInstanceSettings(st);if(xt&&xt.meta.alerting){const lt={refId:ht.refId,queryType:ht.queryType??"",relativeTimeRange:pe,datasourceUid:xt.uid,model:{...ht,maxDataPoints:ve,intervalMs:Le}};Ge.push(lt)}}}return Ge},ee=async(oe,pe)=>{const{targets:Re}=oe;if(!oe.id||!pe.uid)return;const ae=rangeUtil.timeRangeToRelative(rangeUtil.convertRawToRange(pe.time)),ve=await ne(Re,ae,oe.scopedVars||{},oe.datasource??void 0,oe.maxDataPoints??void 0,oe.interval??void 0);if(!ve.length||!ve.find(dt=>dt.datasourceUid!==ExpressionDatasourceUID))return;if(!ve.find(dt=>dt.datasourceUid===ExpressionDatasourceUID)){const[dt,st]=Z(getNextRefIdChar(ve),"-");ve.push(dt);const[Pt,we]=Z(dt.refId,getNextRefIdChar(ve));ve.push(we)}const{folderTitle:xe,folderUid:Ge}=pe.meta;return{type:RuleFormType.grafana,folder:Ge&&xe?{uid:Ge,title:xe}:void 0,queries:ve,name:oe.title,condition:ve[ve.length-1].refId,annotations:[{key:Annotation.dashboardUID,value:pe.uid},{key:Annotation.panelID,value:String(oe.id)}]}};function de(oe,pe,Re){return Re?rangeUtil.calculateInterval(oe,Re,pe):pe&&rangeUtil.intervalToMs(pe)>1e3?{interval:pe,intervalMs:rangeUtil.intervalToMs(pe)}:{interval:"1s",intervalMs:1e3}}function Pe(oe){const pe=oe.model;return ye(pe)&&pe.instant&&pe.range?{...oe,model:{...pe,range:!0,instant:!1}}:oe}function ye(oe){return"expr"in oe&&"instant"in oe&&"range"in oe}function he(oe){return"expr"in oe}function me(oe){const pe=async dt=>{if((0,w.Kl)(dt)){const st=await(0,E.m6)(oe);for(const[Pt,we]of Object.entries(st))for(const Le of we){const Ke=Le.rules.find(ht=>(0,w.Pc)(ht)&&ht.grafana_alert?.uid===dt.uid);if(Ke)return{group:Le,ruleSourceName:h.GC,namespace:Pt,rule:Ke}}}if((0,w.E4)(dt)){const{ruleSourceName:st,namespace:Pt,groupName:we}=dt,Le=await(0,E.jJ)(oe,Pt,we);if(!Le)return null;const Ke=Le.rules.find(ht=>{const xt=I.Zk(st,Pt,Le.name,ht);return I.Dg(xt,dt)});return Ke?{group:Le,ruleSourceName:st,namespace:Pt,rule:Ke}:null}if((0,w.qE)(dt))throw new Error("Native prometheus rules can not be edited in grafana.");return null},Re=async dt=>{const{namespace:st,group:Pt,rule:we}=dt;if(Pt.rules.length===1){await(0,E.BC)(oe,st,Pt.name);return}await(0,E.P4)(oe,st,{...Pt,rules:Pt.rules.filter(Le=>Le!==we)})},ae=async(dt,st,Pt)=>{const{dataSourceName:we,group:Le,namespace:Ke}=dt,ht=U(dt);if(we&&Le&&Ke){if(Pt){const Rt=await pe(I.CK(Pt));if(!Rt)throw new Error("Rule not found.");if(Rt.namespace!==Ke||Rt.group.name!==Le)await Re(Rt);else{const Ut={...Rt.group,rules:Rt.group.rules.map(Xt=>Xt===Rt.rule?ht:Xt),evaluateEvery:st};return await(0,E.P4)(oe,Ke,Ut),I.Zk(we,Ke,Le,ht)}}const xt=await(0,E.jJ)(oe,Ke,Le),lt=xt?{...xt,rules:[...xt.rules,ht]}:{name:Le,rules:[ht]};return await(0,E.P4)(oe,Ke,lt),I.Zk(we,Ke,Le,ht)}else throw new Error("Data source and location must be specified")},ve=async(dt,st,Pt)=>{const{folder:we,group:Le}=dt;if(!we)throw new Error("Folder must be specified");const Ke=H(dt),ht=we.title,xt={name:Le,interval:st};if(!Pt)return xe(ht,xt,Ke);const lt=await pe(I.CK(Pt));if(!lt)throw new Error("Rule not found.");const Rt=lt.namespace===ht,Ut=lt.group.name===dt.group;return Rt&&Ut?at(lt,Ke,st):Ge(ht,xt,lt,Ke)},xe=async(dt,st,Pt)=>{const we=await(0,E.jJ)(oe,dt,st.name);if(!we)throw new Error(`No group found with name "${st.name}"`);const Le={name:st.name,interval:st.interval,rules:(we.rules??[]).concat(Pt)};return await(0,E.P4)(oe,dt,Le),{uid:Pt.grafana_alert.uid??"",ruleSourceName:h.GC}},Ge=async(dt,st,Pt,we)=>(De(Pt,we),await xe(dt,st,we)),at=async(dt,st,Pt)=>{De(dt,st);const we=dt.group.rules.map(Le=>(0,w.Pc)(Le)&&Le.grafana_alert.uid===dt.rule.grafana_alert.uid?st:Le);return await(0,E.P4)(oe,dt.namespace,{name:dt.group.name,interval:Pt,rules:we}),{uid:dt.rule.grafana_alert.uid,ruleSourceName:h.GC}};return{findEditableRule:pe,deleteRule:Re,saveLotexRule:ae,saveGrafanaRule:ve}}function De(oe,pe){if(!(0,w.Pc)(oe.rule))throw new Error("The rule is not a Grafana managed rule");const Re=oe.rule.grafana_alert.uid;pe.grafana_alert.uid=Re}function le(oe,pe){const ae=oe().unifiedAlerting.dataSources[pe]?.result;if(!ae)throw new Error(`Data source configuration is not available for "${pe}" data source`);return ae}function Ee(oe,pe){const Re=le(oe,pe);if(!Re.rulerConfig)throw new Error(`Ruler API is not available for ${pe}`);return Re.rulerConfig}const be=(0,t.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:oe,filter:pe,limitAlerts:Re,matcher:ae,state:ve,identifier:xe},Ge)=>{await Ge.dispatch(qe({rulesSourceName:oe}));const at=(0,y.pM)(v.j,`[${oe}] Prometheus rules loaded`,{dataSourceName:oe,thunk:"unifiedalerting/fetchPromRules"});return await(0,R.$b)(at(oe,pe,Re,ae,ve,xe))}),ge=(0,t.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,R.$b)((0,c.$l)())),ue=(0,t.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,R.$b)((0,c.Zo)())),Ie=(0,t.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:oe,filter:pe},{dispatch:Re,getState:ae})=>{await Re(qe({rulesSourceName:oe}));const ve=Ee(ae,oe),xe=(0,y.pM)(E.m6,`[${oe}] Ruler rules loaded`,{dataSourceName:oe,thunk:"unifiedalerting/fetchRulerRules"});return await(0,R.$b)(xe(ve,pe))});function ot({rulesSourceName:oe,identifier:pe,filter:Re,limitAlerts:ae,matcher:ve,state:xe}){return async(Ge,at)=>{await Ge(qe({rulesSourceName:oe}));const dt=le(at,oe);await Ge(be({rulesSourceName:oe,identifier:pe,filter:Re,limitAlerts:ae,matcher:ve,state:xe})),dt.rulerConfig&&await Ge(Ie({rulesSourceName:oe}))}}const Qe=(0,t.hg)("unifiedalerting/fetchSilences",oe=>{const pe=(0,y.pM)(c.U7,`[${oe}] Silences loaded`,{dataSourceName:oe,thunk:"unifiedalerting/fetchSilences"});return(0,R.$b)(pe(oe))});function Me(oe){return(pe,Re)=>{const{rulerRules:ae}=Re().unifiedAlerting,ve=ae[oe];isEmpty(ve?.result)&&!(ve&&isRulerNotSupportedResponse(ve))&&!ve?.loading&&pe(Ie({rulesSourceName:oe}))}}function Ne(){return async oe=>{const pe=getAllRulesSourceNames().map(Re=>oe(qe({rulesSourceName:Re})));await Promise.allSettled(pe)}}const qe=(0,t.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:oe})=>(0,R.$b)((async()=>{if(oe===h.GC)return{name:h.GC,id:h.GC,rulerConfig:{dataSourceName:h.GC,apiVersion:"legacy"}};const pe=(0,h.VX)(oe);if(!pe)throw new Error(`Missing data source configuration for ${oe}`);const{id:Re,name:ae}=pe,xe=await(0,y.pM)(u.C$,`[${oe}] Rules source features discovered`,{dataSourceName:oe,thunk:"unifiedalerting/fetchPromBuildinfo"})(ae),Ge=xe.features.rulerApiEnabled?{dataSourceName:ae,apiVersion:xe.application===a.T8.Cortex?"legacy":"config"}:void 0;return{name:ae,id:Re,rulerConfig:Ge}})()),{condition:({rulesSourceName:oe},{getState:pe})=>{const Re=pe().unifiedAlerting.dataSources,ae=!!Re[oe]?.result,ve=!!Re[oe]?.error;return!(ae||ve)}});function bt(oe=!1,pe={}){return async(Re,ae)=>{const ve=performance.now();await Promise.allSettled((0,h.mA)().map(async xe=>{await Re(qe({rulesSourceName:xe}));const{promRules:Ge,rulerRules:at,dataSources:dt}=ae().unifiedAlerting,st=dt[xe].result;if(!st)return;const Pt=oe||!Ge[xe]?.loading,we=(oe||!at[xe]?.loading)&&!!st.rulerConfig;await Promise.allSettled([Pt&&Re(be({rulesSourceName:xe,...pe})),we&&Re(Ie({rulesSourceName:xe}))])})),(0,y.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-ve).toFixed(0)})}}function Fe(oe=!1){return async(pe,Re)=>{const{promRules:ae}=Re().unifiedAlerting;(0,h.mA)().map(ve=>{(oe||!ae[ve]?.loading)&&pe(be({rulesSourceName:ve}))})}}const Ve=(0,t.hg)("unifiedalerting/fetchEditableRule",(oe,pe)=>{const Re=Ee(pe.getState,oe.ruleSourceName);return(0,R.$b)(me(Re).findEditableRule(oe))});function Ue(oe,pe){return async(Re,ae)=>{withAppEvents((async()=>{const ve=getRulesSourceName(oe.rulesSource),xe=Ee(ae,ve);await deleteRulerRulesGroup(xe,oe.name,pe.name),await Re(ot({rulesSourceName:ve}))})(),{successMessage:"Group deleted"})}}function it(oe,pe={}){return async(Re,ae)=>{await Re(qe({rulesSourceName:oe.ruleSourceName})),withAppEvents((async()=>{const ve=Ee(ae,oe.ruleSourceName),xe=getRulerClient(ve),Ge=await xe.findEditableRule(oe);if(!Ge)throw new Error("Rule not found.");await xe.deleteRule(Ge),await Re(ot({rulesSourceName:Ge.ruleSourceName})),pe.navigateTo&&locationService.replace(pe.navigateTo)})(),{successMessage:"Rule deleted."})}}const ze=(0,t.hg)("unifiedalerting/saveRuleForm",({values:oe,existing:pe,redirectOnSave:Re,evaluateEvery:ae},ve)=>(0,R.Ez)((0,R.$b)((async()=>{const{type:xe}=oe;let Ge;if(xe===P.cloudAlerting||xe===P.cloudRecording){if(!oe.dataSourceName)throw new Error("The Data source has not been defined.");const at=Ee(ve.getState,oe.dataSourceName);Ge=await me(at).saveLotexRule(oe,ae,pe),await ve.dispatch(Ie({rulesSourceName:oe.dataSourceName}))}else if(xe===P.grafana){const at=Ee(ve.getState,h.GC);Ge=await me(at).saveGrafanaRule(oe,ae,pe),await ve.dispatch(Ie({rulesSourceName:h.GC}))}else throw new Error("Unexpected rule form type");if((0,y.PN)(y.z7.successSavingAlertRule,{type:xe,isNew:(!pe).toString()}),Re)r.E1.push(Re);else{const at=I.$V(Ge);if(!at){r.E1.push("/alerting/list");return}const dt=`/alerting/${encodeURIComponent(at)}/edit`;r.E1.getLocation().pathname!==dt?r.E1.replace(dt):ve.dispatch(Ve(Ge))}})()),{successMessage:pe?`Rule "${oe.name}" updated.`:`Rule "${oe.name}" saved.`,errorMessage:"Failed to save rule"})),Xe=(0,t.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,R.$b)(C())),St=(0,t.hg)("unifiedalerting/fetchGrafanaAnnotations",oe=>(0,R.$b)(f(oe))),Bt=(0,t.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:oe,oldConfig:pe,newConfig:Re,successMessage:ae,redirectPath:ve,redirectSearch:xe},Ge)=>(0,R.Ez)((0,R.$b)((async()=>{const at=await Ge.dispatch(l.h.endpoints.getAlertmanagerConfiguration.initiate(oe)).unwrap(),dt=(0,n.isEmpty)(at.alertmanager_config)&&(0,n.isEmpty)(at.template_files),st=JSON.stringify(at)!==JSON.stringify(pe);if(!dt&&st)throw new Error("A newer Alertmanager configuration is available. Please reload the page and try again to not overwrite recent changes.");if(await(0,c.oy)(oe,(0,S.X4)(Re)),Ge.dispatch(l.h.util.invalidateTags(["AlertmanagerConfiguration"])),ve){const Pt=new URLSearchParams(xe??"");r.E1.push((0,M.eQ)(ve,oe,Pt))}})()),{successMessage:ae})),zt=(0,t.hg)("unifiedalerting/fetchAmAlerts",oe=>(0,R.$b)((0,c.QK)(oe,[],!0,!0,!0))),qt=(oe,pe)=>async Re=>{await withAppEvents(expireSilence(oe,pe),{successMessage:"Silence expired."}),Re(Qe(oe)),Re(zt(oe))},Qt=(0,t.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:oe,payload:pe,exitOnSave:Re,successMessage:ae})=>(0,R.Ez)((0,R.$b)((async()=>{await(0,c.dx)(oe,pe),Re&&r.E1.push("/alerting/silences")})()),{successMessage:ae})),yn=(oe,pe)=>async Re=>{const ae=await Re(alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(pe)).unwrap();if(!ae)throw new Error(`Config for ${pe} not found`);if(!ae.alertmanager_config.receivers?.find(xe=>xe.name===oe))throw new Error(`Cannot delete receiver ${oe}: not found in config.`);const ve={...ae,alertmanager_config:{...ae.alertmanager_config,receivers:ae.alertmanager_config.receivers.filter(xe=>xe.name!==oe)}};return Re(Bt({newConfig:ve,oldConfig:ae,alertManagerSourceName:pe,successMessage:"Contact point deleted."}))},Zt=(oe,pe)=>async Re=>{const ae=await Re(alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(pe)).unwrap();if(!ae)throw new Error(`Config for ${pe} not found`);if(typeof ae.template_files?.[oe]!="string")throw new Error(`Cannot delete template ${oe}: not found in config.`);const ve={...ae.template_files};delete ve[oe];const xe={...ae,alertmanager_config:{...ae.alertmanager_config,templates:ae.alertmanager_config.templates?.filter(Ge=>Ge!==oe)},template_files:ve};return Re(Bt({newConfig:xe,oldConfig:ae,alertManagerSourceName:pe,successMessage:"Template deleted."}))},re=(0,t.hg)("unifiedalerting/fetchFolder",oe=>(0,R.$b)(i.ae.getFolderByUid(oe,{withAccessControl:!0}))),Te=oe=>(pe,Re)=>{Re().unifiedAlerting.folders[oe]?.dispatched||pe(re(oe))},We=(0,t.hg)("unifiedalerting/fetchAlertGroups",oe=>(0,R.$b)((0,c.XK)(oe))),Je=(0,t.hg)("unifiedalerting/deleteAlertManagerConfig",async(oe,pe)=>(0,R.Ez)((0,R.$b)((async()=>{await(0,c.CN)(oe),await pe.dispatch(l.h.util.invalidateTags(["AlertmanagerConfiguration"]))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),je=(oe,pe)=>async Re=>{const ae=await Re(alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(oe)).unwrap(),ve=ae?.alertmanager_config?.mute_time_intervals?.filter(({name:xe})=>xe!==pe)??[];ae&&withAppEvents(Re(Bt({alertManagerSourceName:oe,oldConfig:ae,newConfig:{...ae,alertmanager_config:{...ae.alertmanager_config,route:ae.alertmanager_config.route?removeMuteTimingFromRoute(pe,ae.alertmanager_config?.route):void 0,mute_time_intervals:ve}}})),{successMessage:`Deleted "${pe}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},pt=(0,t.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:oe,receivers:pe,alert:Re})=>(0,R.Ez)((0,R.$b)((0,c.Bp)(oe,pe,Re)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),ft=(oe,pe)=>oe.filter(Re=>{const{forDuration:ae}=(0,w.qd)(Re,pe),ve=(0,K.Bg)(ae),xe=(0,K.Bg)(pe);return ve!==0&&ve<xe}),Tt=(0,t.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(oe,pe)=>(0,R.Ez)((0,R.$b)((async()=>{const{rulesSourceName:Re,namespaceName:ae,groupName:ve,newNamespaceName:xe,newGroupName:Ge,groupInterval:at}=oe,dt=Ee(pe.getState,Re),st=await(0,E.m6)(dt);if(!!!st[ae])throw new Error(`Namespace "${ae}" not found.`);const we=st[ae].find(ht=>ht.name===ve);if(!we)throw new Error(`Group "${ve}" not found.`);const Le=!!st[ae].find(ht=>ht.name===Ge);if(Ge!==ve&&Le)throw new Error(`Group "${Ge}" already exists in namespace "${ae}".`);const Ke=!!st[xe];if(xe!==ae&&Ke)throw new Error(`Namespace "${xe}" already exists.`);if(xe===ae&&ve===Ge&&at===we.interval)throw new Error("Nothing changed.");if(at!==we.interval){const ht=ft(we.rules,at??"1m");if(ht.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${ht.map(xt=>{const{alertName:lt}=(0,w.qd)(xt,at??"");return lt}).join(",")}`)}if(xe!==ae){for(const ht of st[ae])await(0,E.P4)(dt,xe,ht.name===ve?{...ht,name:Ge,interval:at}:ht);await(0,E.sz)(dt,ae)}else await(0,E.P4)(dt,ae,{...we,name:Ge,interval:at}),Ge!==ve&&await(0,E.BC)(dt,ae,ve);await pe.dispatch(Ie({rulesSourceName:Re}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Ye=(0,t.hg)("unifiedalerting/updateRulesOrderForGroup",async(oe,pe)=>(0,R.Ez)((0,R.$b)((async()=>{const{rulesSourceName:Re,namespaceName:ae,groupName:ve,newRules:xe}=oe,Ge=Ee(pe.getState,Re),dt=(await(0,E.m6)(Ge))[ae].find(Pt=>Pt.name===ve);if(!dt)throw new Error(`Group "${ve}" not found.`);const st={name:dt.name,interval:dt.interval,rules:xe};await(0,E.P4)(Ge,ae,st),await pe.dispatch(Ie({rulesSourceName:Re}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Ce=(0,t.hg)("unifiedAlerting/addExternalAlertmanagers",async(oe,pe)=>(0,R.Ez)((0,R.$b)((async()=>{await(0,c.tK)(oe),pe.dispatch(ue())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},60703:(X,L,e)=>{"use strict";var t=e(97125),n=e(21527),r=e(95712);function a(C){return isGrafanaRulesSource(C)?"grafana":"external"}const i={read:{grafana:n.AccessControlAction.AlertingInstanceRead,external:n.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:n.AccessControlAction.AlertingInstanceCreate,external:n.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:n.AccessControlAction.AlertingInstanceUpdate,external:n.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:n.AccessControlAction.AlertingInstanceUpdate,external:n.AccessControlAction.AlertingInstancesExternalWrite}},y={read:{grafana:n.AccessControlAction.AlertingNotificationsRead,external:n.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite}},c={read:n.AccessControlAction.AlertingProvisioningRead,readSecrets:n.AccessControlAction.AlertingProvisioningReadSecrets,write:n.AccessControlAction.AlertingProvisioningWrite},l={read:{grafana:n.AccessControlAction.AlertingRuleRead,external:n.AccessControlAction.AlertingRuleExternalRead},create:{grafana:n.AccessControlAction.AlertingRuleCreate,external:n.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:n.AccessControlAction.AlertingRuleUpdate,external:n.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:n.AccessControlAction.AlertingRuleDelete,external:n.AccessControlAction.AlertingRuleExternalWrite}};function d(C){const x=a(C);return{read:i.read[x],create:i.create[x],update:i.update[x],delete:i.delete[x]}}function f(C){const x=a(C);return{read:y.read[x],create:y.create[x],update:y.update[x],delete:y.delete[x],provisioning:c}}function m(C){const x=a(C);return{read:l.read[x],create:l.create[x],update:l.update[x],delete:l.delete[x]}}function u(C){return()=>contextSrv.evaluatePermission(C)}function h(){return{canCreateGrafanaRules:contextSrv.hasPermission(AccessControlAction.FoldersRead)&&contextSrv.hasPermission(l.create.grafana),canCreateCloudRules:contextSrv.hasPermission(AccessControlAction.DataSourcesRead)&&contextSrv.hasPermission(l.create.external),canEditRules:C=>contextSrv.hasPermission(m(C).update),canReadProvisioning:contextSrv.hasPermission(c.read)||contextSrv.hasPermission(c.readSecrets)}}},14949:(X,L,e)=>{"use strict";e.d(L,{X4:()=>y,Zh:()=>p,eD:()=>E,vB:()=>P,zy:()=>m});var t=e(86832),n=e.n(t),r=e(47858),a=e(73895),i=e(95712);function y(w){return w.alertmanager_config.receivers||(w.alertmanager_config.receivers=[{name:"default "}]),w.alertmanager_config.route||(w.alertmanager_config.route={receiver:w.alertmanager_config.receivers[0].name}),w.template_files||(w.template_files={}),w}function c(w,K){return{...K,mute_time_intervals:K.mute_time_intervals?.filter(_=>_!==w)??[],routes:K.routes?.map(_=>c(w,_))}}function l(w,K,V){return{...V,mute_time_intervals:V.mute_time_intervals?.map(_=>_===K?w:_),routes:V.routes?.map(_=>l(w,K,_))}}function d(w,K){return(K.receiver===w||K.routes?.some(V=>d(w,V)))??!1}function f(w,K){return(K.alertmanager_config.route&&d(w,K.alertmanager_config.route))??!1}function m(w){return w.isEqual?w.isRegex?r._M.regex:r._M.equal:w.isRegex?r._M.notRegex:r._M.notEqual}function u(w){switch(w){case MatcherOperator.equal:return{isEqual:!0,isRegex:!1};case MatcherOperator.notEqual:return{isEqual:!1,isRegex:!1};case MatcherOperator.regex:return{isEqual:!0,isRegex:!0};case MatcherOperator.notRegex:return{isEqual:!1,isRegex:!0}}}function h(w){return{name:w.name,value:w.value,operator:m(w)}}function C(w){return{name:w.name,value:w.value,...u(w.operator)}}function x(w){return`{${w.map(h).reduce((_,U)=>{const $=`${U.name}${U.operator}"${U.value}"`;return _?`${_},${$}`:$},"")}}`}const b=[{label:r._M.equal,description:"Equals",value:r._M.equal},{label:r._M.notEqual,description:"Does not equal",value:r._M.notEqual},{label:r._M.regex,description:"Matches regex",value:r._M.regex},{label:r._M.notRegex,description:"Does not match regex",value:r._M.notRegex}];function g(w){const K=m(w);return[w.name,K,w.value]}function p(w){const K=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,}]*)"?/g,V=[];return w.replace(K,(_,U,$,k)=>{const H=$===r._M.equal||$===r._M.regex,j=$===r._M.regex||$===r._M.notRegex;return V.push({name:U,value:j?v(k.trim()):k.trim(),isEqual:H,isRegex:j}),""}),V}function v(w){try{return new RegExp(w),w}catch{return""}}function E(w,K){return K.every(({name:V,value:_,isRegex:U,isEqual:$})=>Object.entries(w).some(([k,H])=>{const j=V===k;let z;return $&&!U&&(z=_===H),!$&&!U&&(z=_!==H),$&&U&&(z=new RegExp(_).test(H)),!$&&U&&(z=!new RegExp(_).test(H)),j&&z}))}function P(...w){const K=w.map(p).flat(),V=(0,t.uniqWith)(K,t.isEqual);return x(V)}function S(){return getAllDataSources().filter(w=>w.type===DataSourceType.Alertmanager)}function M(w){return S().find(K=>w===K.uid)}function R(w){const{times:K,weekdays:V,days_of_month:_,months:U,years:$,location:k}=w,H=I(K,k),j=A(V),z=O(_),F=N(U),J=o($);return[H,j,z,F,J].join(", ")}function I(w,K){return"Times: "+(w?w?.map(({start_time:V,end_time:_})=>`${V} - ${_} [${K??"UTC"}]`).join(" and "):"All")}function A(w){return"Weekdays: "+(w?.map(K=>{if(K.includes(":"))return K.split(":").map(V=>{const _=V.slice(0,3);return _[0].toLocaleUpperCase()+_.slice(1)}).join("-");{const V=K.slice(0,3);return V[0].toLocaleUpperCase()+V.slice(1)}}).join(", ")??"All")}function O(w){return"Days of the month: "+(w?.join(", ")??"All")}function N(w){return"Months: "+(w?.join(", ")??"All")}function o(w){return"Years: "+(w?.join(", ")??"All")}},73895:(X,L,e)=>{"use strict";e.d(L,{x:()=>r});var t=e(32688),n=e(67034);function r(){return Object.values(t.config.datasources)}function a(i){if(!isValidPrometheusDuration(config.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const y=parsePrometheusDuration(config.unifiedAlerting.minInterval);if(!i||!isValidPrometheusDuration(i))return{globalLimit:y,exceedsLimit:!1};const c=parsePrometheusDuration(i),l=y>c&&c>0;return{globalLimit:y,exceedsLimit:l}}},63483:(X,L,e)=>{"use strict";e.d(L,{c4:()=>r,iF:()=>y,jZ:()=>t,q6:()=>m,vY:()=>u});const t="ruler not supported",n=2e4,r="alertmanager",a="alerting-alertmanager",i=2e4,y=2e4,c=2e4,l="timeseries",d="table",f="stat";var m=(x=>(x.description="description",x.summary="summary",x.runbookURL="runbook_url",x.alertId="__alertId__",x.dashboardUID="__dashboardUid__",x.panelID="__panelId__",x))(m||{});const u={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"},h={description:"Description of what the alert rule does.",summary:"Short summary of what happened and why.",runbook_url:"Webpage where you keep your runbook for the alert.",__dashboardUid__:"",__panelId__:"",__alertId__:""},C=[{key:"summary",value:""},{key:"description",value:""},{key:"runbook_url",value:""}]},95712:(X,L,e)=>{"use strict";e.d(L,{EG:()=>E,GC:()=>y,HY:()=>R,JY:()=>c,RY:()=>M,VX:()=>m,c$:()=>I,gt:()=>o,h_:()=>v,jq:()=>S,mA:()=>p,o_:()=>O,z3:()=>x});var t=e(97125),n=e(47858),r=e(21527),a=e(60703),i=e(73895);const y="grafana",c="-- Grafana --";var l=(_=>(_.Alertmanager="alertmanager",_.Loki="loki",_.Prometheus="prometheus",_))(l||{});const d=["loki","prometheus"];function f(){return t.Vt.hasPermission(r.AccessControlAction.AlertingRuleExternalRead)?(0,i.x)().filter(_=>d.includes(_.type)&&_.jsonData.manageAlerts!==!1).sort((_,U)=>_.name.localeCompare(U.name)):[]}function m(_){return f().find(U=>U.name===_)}function u(){return(0,i.x)().filter(_=>_.type==="alertmanager").sort((_,U)=>_.name.localeCompare(U.name))}function h(){return u().filter(_=>_.jsonData.handleGrafanaManagedAlerts)}const C={name:y,imgUrl:"public/img/grafana_icon.svg"};function x(){return[C,...u().map(_=>({name:_.name,displayName:_.name,imgUrl:_.meta.info.logos.small,meta:_.meta}))]}function b(_){const U=[],$={instance:instancesPermissions.read,notification:notificationsPermissions.read};if(contextSrv.hasPermission($[_].grafana)&&U.push(C),contextSrv.hasPermission($[_].external)){const k=u().map(H=>({name:H.name,displayName:H.name,imgUrl:H.meta.info.logos.small,meta:H.meta}));U.push(...k)}return U}function g(_){const U=I(_);if(!U)throw new Error(`Data source ${_} not found`);if(U.type!=="loki"&&U.type!=="prometheus")throw new Error(`Unexpected data source type ${U.type}`);return U}function p(){const _=f().map(U=>U.name);return t.Vt.hasPermission(r.AccessControlAction.AlertingRuleRead)&&_.push(y),_}function v(){const _=f();return t.Vt.hasPermission(r.AccessControlAction.AlertingRuleRead)&&_.push(y),_}function E(_){return S(_)?_.name:_}function P(_){return S(_)?_.uid:y}function S(_){return _!==y}function M(_){return _!==y&&A(_)?.jsonData?.implementation===n.sK.prometheus}function R(_){return _===y}function I(_){return(0,i.x)().find(U=>U.name===_)}function A(_){return(0,i.x)().find(U=>U.name===_&&U.type==="alertmanager")}function O(_){return _===y?y:I(_)}function N(_){if(_===y)return y;const U=I(_);if(!U)throw new Error(`Datasource "${_}" not found`);return String(U.id)}function o(_){if(_===y)return y;const U=I(_);if(!U)throw new Error(`Datasource "${_}" not found`);return U.uid}function w(){return getDataSourceSrv().getList({alerting:!0})[0]}function K(){const _=getDataSourceSrv().getInstanceSettings("default");return _?.meta.alerting??!1?_:w()}function V(_){return _.jsonData.manageAlerts!==!1}},59471:(X,L,e)=>{"use strict";e.d(L,{S0:()=>M,eQ:()=>N,RQ:()=>k,VN:()=>V,yM:()=>H,fm:()=>j,Zl:()=>F,sM:()=>w});var t=e(86832),n=e(94435),r=e(3),a=e(17330),i=e(63483),y=e(95712),c=e(47858);const l=[c._M.regex,c._M.notRegex,c._M.notEqual,c._M.equal];function d(J){if(J.startsWith("{")&&J.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${J}`);const Q=l.map(Pe=>[Pe,J.indexOf(Pe)]).filter(([Pe,ye])=>ye>-1).sort((Pe,ye)=>Pe[1]-ye[1]);if(!Q.length)throw new Error(`Invalid matcher: ${J}`);const[Z,ne]=Q[0],ee=J.slice(0,ne).trim(),de=J.slice(ne+Z.length);if(!ee)throw new Error(`Invalid matcher: ${J}`);return{name:ee,value:de,isRegex:Z===MatcherOperator.regex||Z===MatcherOperator.notRegex,isEqual:Z===MatcherOperator.equal||Z===MatcherOperator.regex}}function f(J){const Q=J.filter(Z=>!!Z.trim()).map(Z=>d(Z));return uniqBy(Q,Z=>Z.name)}const m=J=>{const Q=Object.entries(J).filter(([ne])=>!(ne.startsWith("__")&&ne.endsWith("__"))),Z=new URLSearchParams;return Q.forEach(([ne,ee])=>Z.append("matcher",`${ne}=${ee}`)),Z},u=J=>{const Q=[];return J.matchers&&J.matchers.forEach(Z=>{const{name:ne,value:ee,isEqual:de,isRegex:Pe}=d(Z);let ye=MatcherOperator.equal;de&&Pe&&(ye=MatcherOperator.regex),!de&&Pe&&(ye=MatcherOperator.notRegex),de&&!Pe&&(ye=MatcherOperator.equal),!de&&!Pe&&(ye=MatcherOperator.notEqual),Q.push([ne,ye,ee])}),J.object_matchers&&Q.push(...J.object_matchers),J.match_re&&Object.entries(J.match_re).forEach(([Z,ne])=>{Q.push([Z,MatcherOperator.regex,ne])}),J.match&&Object.entries(J.match).forEach(([Z,ne])=>{Q.push([Z,MatcherOperator.equal,ne])}),Q},h={[c._M.equal]:(J,Q)=>J===Q,[c._M.notEqual]:(J,Q)=>J!==Q,[c._M.regex]:(J,Q)=>new RegExp(Q).test(J),[c._M.notRegex]:(J,Q)=>!new RegExp(Q).test(J)};function C(J,Q){const[Z,ne]=Q,[ee,de,Pe]=J;if(Z!==ee)return!1;const ye=h[de];if(!ye)throw new Error(`no such operator: ${de}`);return ye(ne,Pe)}function x(J,Q){return J.every(Z=>Q.some(ne=>C(Z,ne)))}var b=e(30391),g=e(24597);function p(J,Q,Z){const ne=getRulesSourceName(J),ee=ruleId.fromCombinedRule(ne,Q),de=encodeURIComponent(ruleId.stringifyIdentifier(ee)),Pe=encodeURIComponent(ne);return createUrl(`/alerting/${Pe}/${de}/view`,{returnTo:Z})}function v(J,Q){const{uid:Z,type:ne}=J;return createUrl("/explore",{left:JSON.stringify({datasource:J.uid,queries:[{refId:"A",datasource:{uid:Z,type:ne},expr:Q}],range:{from:"now-1h",to:"now"}})})}function E(J,Q=""){return createUrl(`/alerting/notifications/receivers/${encodeURIComponent(J)}/edit`,{alertmanager:Q})}function P(J,Q=""){return createUrl("/alerting/routes/mute-timing/edit",{muteName:J,alertmanager:Q})}function S(J,Q){return isCloudRulesSource(J)?createAbsoluteUrl(`/alerting/${encodeURIComponent(J.name)}/${encodeURIComponent(Q.name)}/find`):window.location.href.split("?")[0]}function M(J){return J.reduce((Q,{key:Z,value:ne})=>(Q[Z]=ne,Q),{})}const R=J=>{const Q=J.queryString===void 0?void 0:String(J.queryString),Z=J.alertState===void 0?void 0:String(J.alertState),ne=J.dataSource===void 0?void 0:String(J.dataSource),ee=J.ruleType===void 0?void 0:String(J.ruleType),de=J.groupBy===void 0?void 0:String(J.groupBy).split(",");return{queryString:Q,alertState:Z,dataSource:ne,groupBy:de,ruleType:ee}},I=J=>({queryString:J.get("queryString")??void 0,contactPoint:J.get("contactPoint")??void 0}),A=J=>{const Q=J.queryString===void 0?void 0:String(J.queryString),Z=J.silenceState===void 0?void 0:String(J.silenceState);return{queryString:Q,silenceState:Z}};function O(J){return Object.entries(J).map(([Q,Z])=>({key:Q,value:Z}))}function N(J,Q,Z){const ne=new URLSearchParams(Z);return Q&&ne.append(i.c4,Q),`${J}?${ne.toString()}`}const o=J=>J.replace(/\"/g,'\\"');function w(J){return J.startsWith('"')&&J.endsWith('"')?o(J):`"${o(J)}"`}function K(J,Q){const Z={alertname:Q.name,...Q.labels};return V(J,Z)}function V(J,Q){const Z=new URLSearchParams;return Z.append("alertmanager",J),m(Q).forEach((ee,de)=>Z.append(de,ee)),(0,g.u)("/alerting/silence/new",Z)}function _(J){return createUrl(`/datasources/edit/${J.uid}`)}function U(J){return createUrl(`/dashboards/f/${J}`)}function $(J){return createUrl(`/dashboards/f/${J.uid}/${J.title}/settings`)}function k(J){return(0,g.u)(`/d/${encodeURIComponent(J)}`)}function H(J,Q){return(0,g.u)(`/d/${encodeURIComponent(J)}`,{viewPanel:Q})}function j(J,Q,Z,ne=1e3){const ee=new Date().getTime(),de=()=>J().catch(Pe=>{if(Q(Pe)&&new Date().getTime()-ee<Z)return new Promise(ye=>setTimeout(ye,ne)).then(de);throw Pe});return de()}const z={[a.bj.Alerting]:1,[a.x_.Firing]:1,[a.bj.Error]:1,[a.bj.Pending]:2,[a.x_.Pending]:2,[a.x_.Inactive]:2,[a.bj.NoData]:3,[a.bj.Normal]:4};function F(J,Q){if(J===r.As.Importance)return(0,t.sortBy)(Q,ne=>[z[(0,a.ED)(ne.state)],(0,n.pB)(ne).toLocaleLowerCase()]);if(J===r.As.TimeAsc)return(0,t.sortBy)(Q,ne=>[new Date(ne.activeAt)||new Date,(0,n.pB)(ne).toLocaleLowerCase()]);if(J===r.As.TimeDesc)return(0,t.sortBy)(Q,ne=>[new Date(ne.activeAt)||new Date,(0,n.pB)(ne).toLocaleLowerCase()]).reverse();const Z=(0,t.sortBy)(Q,ne=>(0,n.pB)(ne).toLocaleLowerCase());return J===r.As.AlphaDesc&&Z.reverse(),Z}},57675:(X,L,e)=>{"use strict";e.d(L,{$b:()=>f,Ez:()=>m,I7:()=>E,PE:()=>C,i6:()=>l,jK:()=>d,kk:()=>h,oq:()=>y,wt:()=>v,yR:()=>p});var t=e(77960),n=e(71519),r=e(4148),a=e(21308),i=e(79517);const y=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function c(S,M=y,R){if(S.pending.match(R))return{result:M.result,loading:!0,error:M.error,dispatched:!0,requestId:R.meta.requestId};if(S.fulfilled.match(R)){if(M.requestId===void 0||M.requestId===R.meta.requestId)return{...M,result:R.payload,loading:!1,error:void 0}}else if(S.rejected.match(R)&&M.requestId===R.meta.requestId)return{...M,loading:!1,error:R.error};return M}function l(S,M){return(0,t.oM)({name:S,initialState:y,reducers:{},extraReducers:R=>R.addDefaultCase((I,A)=>c(M,I,A))})}function d(S,M,R){return(0,t.oM)({name:S,initialState:{},reducers:{},extraReducers:I=>I.addDefaultCase((A,O)=>{if((0,t.Gx)(M)(O)){const N=O,o=R(N.meta.arg);return{...A,[o]:c(M,A[o],N)}}return A})})}function f(S){return S.catch(M=>{throw{message:h(M),code:M.statusCode}})}function m(S,M){return S.then(R=>(M.successMessage&&a.h$.emit(n.SI.alertSuccess,[M.successMessage]),R)).catch(R=>{const I=h(R);throw a.h$.emit(n.SI.alertError,[`${M.errorMessage??"Error"}: ${I}`]),R})}const u="Unknown Error";function h(S){if((0,r.kW)(S))if(S.data?.message){let R=S.data?.message;return typeof S.data?.error=="string"&&(R+=`; ${S.data.error}`),R}else{if(Array.isArray(S.data)&&S.data.length&&S.data[0]?.message)return S.data.map(R=>R?.message).filter(R=>!!R).join(" ");if(S.statusText)return S.statusText}const M=S?.message;return M||((0,i.PN)(i.z7.unknownMessageFromError,{error:JSON.stringify(S)}),u)}function C(S){return Object.values(S).every(x)}function x(S){return S.dispatched&&!S.loading}function b(S){return Object.values(S).every(g)}function g(S){return S.dispatched&&!S.loading&&!S.error}function p(S){return Object.values(S).some(P)}function v(S){return Object.values(S).some(M=>M.dispatched)}function E(S){return Object.values(S).some(g)}function P(S){return S?S.dispatched&&S.loading:!1}},30391:(X,L,e)=>{"use strict";e.d(L,{$V:()=>b,CK:()=>y,Dg:()=>c,Yd:()=>i,Zk:()=>r});var t=e(95712),n=e(94435);function r(S,M,R,I){return(0,n.Pc)(I)?{uid:I.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:S,namespace:M,groupName:R,ruleName:(0,n.cG)(I)?I.alert:I.record,rulerRuleHash:p(I)}}function a(S,M,R,I){return{ruleSourceName:S,namespace:M,groupName:R,ruleName:I.name,ruleHash:v(I)}}function i(S,M){const R=M.namespace.name,I=M.group.name;if(M.rulerRule)return r(S,R,I,M.rulerRule);if(M.promRule)return a(S,R,I,M.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function y(S){return r(S.ruleSourceName,S.namespace,S.group.name,S.rule)}function c(S,M){return(0,n.Kl)(S)&&(0,n.Kl)(M)?S.uid===M.uid:(0,n.E4)(S)&&(0,n.E4)(M)?S.groupName===M.groupName&&S.namespace===M.namespace&&S.ruleName===M.ruleName&&S.rulerRuleHash===M.rulerRuleHash&&S.ruleSourceName===M.ruleSourceName:(0,n.qE)(S)&&(0,n.qE)(M)?S.groupName===M.groupName&&S.namespace===M.namespace&&S.ruleName===M.ruleName&&S.ruleHash===M.ruleHash&&S.ruleSourceName===M.ruleSourceName:!1}const l="cri",d="pri";function f(S){return S.replace(/\$/g,"_DOLLAR_")}function m(S){return S.replace(/\_DOLLAR\_/g,"$")}function u(S){return S.replace(/\//g,"").replace(/\\/g,"")}function h(S){return S.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function C(S,M=!1){const I=(M?decodeURIComponent(S):S).split("$");if(I.length===1)return{uid:S,ruleSourceName:"grafana"};if(I.length===6){const[A,O,N,o,w,K]=I.map(m).map(h);if(A===l)return{ruleSourceName:O,namespace:N,groupName:o,ruleName:w,rulerRuleHash:K};if(A===d)return{ruleSourceName:O,namespace:N,groupName:o,ruleName:w,ruleHash:K}}throw new Error(`Failed to parse rule location: ${S}`)}function x(S,M=!1){if(S)try{return C(S,M)}catch{return}}function b(S){return(0,n.Kl)(S)?S.uid:(0,n.E4)(S)?[l,S.ruleSourceName,S.namespace,S.groupName,S.ruleName,S.rulerRuleHash].map(String).map(f).map(u).join("$"):[d,S.ruleSourceName,S.namespace,S.groupName,S.ruleName,S.ruleHash].map(String).map(f).map(u).join("$")}function g(S){let M=0;if(S.length===0)return M;for(let R=0;R<S.length;R++){const I=S.charCodeAt(R);M=(M<<5)-M+I,M=M&M}return M}function p(S){if((0,n.yF)(S))return g(JSON.stringify([S.record,S.expr,E(S.labels)])).toString();if((0,n.cG)(S))return g(JSON.stringify([S.alert,S.expr,E(S.annotations),E(S.labels)])).toString();if((0,n.Pc)(S))return S.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function v(S){if((0,n.OP)(S))return g(JSON.stringify([S.type,S.query,E(S.labels)])).toString();if((0,n.x_)(S))return g(JSON.stringify([S.type,S.query,E(S.annotations),E(S.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function E(S){return JSON.stringify(Object.entries(S||{}).sort((M,R)=>M[0].localeCompare(R[0])))}function P(S){return isGrafanaRuleIdentifier(S)?GRAFANA_RULES_SOURCE_NAME:S.ruleSourceName}},94435:(X,L,e)=>{"use strict";e.d(L,{pB:()=>ye,SS:()=>ge,Aq:()=>Qe,C7:()=>ot,qd:()=>Fe,Re:()=>Ie,ub:()=>Ne,x_:()=>Q,cG:()=>ne,E4:()=>De,Kl:()=>me,Pc:()=>de,qE:()=>Ee,OP:()=>Z,yF:()=>ee});var t=e(86832),n=e(41560),r=e(17330),a=e(48355);const i=a.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),y=1,c=2,l=3,d=4,f=5,m=6,u=7,h=8,C=9,x=10,b=11,g=12,p=0,v=1,E=2,P=3,S=4,M=5,R=6,I=7,A={[l]:"datasource",[f]:"namespace",[m]:"label",[h]:"rule",[u]:"group",[C]:"state",[x]:"type",[b]:"health"};var O=(Ue=>(Ue.dataSource="dataSourceFilter",Ue.nameSpace="nameSpaceFilter",Ue.label="labelFilter",Ue.group="groupFilter",Ue.rule="ruleFilter",Ue.state="stateFilter",Ue.type="typeFilter",Ue.health="healthFilter",Ue))(O||{});function N(Ue,it,ze){V(Ue,it,Xe=>{if(Xe.type.id===terms.FilterExpression){const St=o(Ue,Xe);if(St.type&&St.value){const Bt=ze[St.type];Bt&&Bt(St.value)}}else if(Xe.type.id===terms.FreeFormExpression){const St=ze[terms.FreeFormExpression];St&&St(w(Ue,Xe))}})}function o(Ue,it){if(it.type.id!==terms.FilterExpression)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const ze=it.firstChild;if(!ze)return{type:void 0,value:void 0};const Xe=it.getChild(terms.FilterValue),St=Xe?trim(w(Ue,Xe),'"'):void 0;return{type:ze.type.id,value:St}}function w(Ue,it){return Ue.slice(it.from,it.to).trim().replace(/\"/g,"")}function K(Ue,it,ze){const Xe=[];V(Ue,it,Bt=>{Bt.type.id===terms.FilterExpression&&Bt.firstChild&&Xe.push(Bt.firstChild),Bt.type.id===terms.FreeFormExpression&&Xe.push(Bt)});let St=[];return Xe.forEach(Bt=>{const zt=ze.findIndex(qt=>qt.type===Bt.type.id);if(zt!==-1){if(Bt.parent?.type.is(terms.FilterExpression)){const qt=A[Bt.type.id],Qt=ze.splice(zt,1)[0];St.push(`${qt}:${_(Qt.value)}`)}if(Bt.type.is(terms.FreeFormExpression)){const qt=ze.splice(zt,1)[0];St.push(qt.value)}}}),ze.forEach(Bt=>{Bt.type===terms.FreeFormExpression?St.push(Bt.value):St.push(`${A[Bt.type]}:${_(Bt.value)}`)}),St.join(" ")}function V(Ue,it,ze){const Xe=it.join(" ");let Bt=parser.configure({dialect:Xe}).parse(Ue).cursor();do ze(Bt.node);while(Bt.next())}function _(Ue){return/\s/.test(Ue)?`"${Ue}"`:Ue}const U=[O.dataSource,O.nameSpace,O.label,O.group,O.rule,O.state,O.type,O.health];var $=(Ue=>(Ue.Ok="ok",Ue.Error="error",Ue.NoData="nodata",Ue.Unknown="unknown",Ue))($||{});function k(Ue){const it={labels:[],freeFormWords:[],dataSourceNames:[]},ze={[terms.DataSourceToken]:Xe=>it.dataSourceNames.push(Xe),[terms.NameSpaceToken]:Xe=>it.namespace=Xe,[terms.GroupToken]:Xe=>it.groupName=Xe,[terms.RuleToken]:Xe=>it.ruleName=Xe,[terms.LabelToken]:Xe=>it.labels.push(Xe),[terms.StateToken]:Xe=>it.ruleState=j(Xe),[terms.TypeToken]:Xe=>isPromRuleType(Xe)?it.ruleType=Xe:void 0,[terms.HealthToken]:Xe=>it.ruleHealth=getRuleHealth(Xe),[terms.FreeFormExpression]:Xe=>it.freeFormWords.push(Xe)};return parseQueryToFilter(Ue,U,ze),it}function H(Ue,it){const ze=[];return it.dataSourceNames&&ze.push(...it.dataSourceNames.map(Xe=>({type:terms.DataSourceToken,value:Xe}))),it.namespace&&ze.push({type:terms.NameSpaceToken,value:it.namespace}),it.groupName&&ze.push({type:terms.GroupToken,value:it.groupName}),it.ruleName&&ze.push({type:terms.RuleToken,value:it.ruleName}),it.ruleState&&ze.push({type:terms.StateToken,value:it.ruleState}),it.ruleType&&ze.push({type:terms.TypeToken,value:it.ruleType}),it.ruleHealth&&ze.push({type:terms.HealthToken,value:it.ruleHealth}),it.labels&&ze.push(...it.labels.map(Xe=>({type:terms.LabelToken,value:Xe}))),it.freeFormWords&&ze.push(...it.freeFormWords.map(Xe=>({type:terms.FreeFormExpression,value:Xe}))),applyFiltersToQuery(Ue,U,ze)}function j(Ue){if(Ue==="normal")return PromAlertingRuleState.Inactive;if(isPromAlertingRuleState(Ue))return Ue}var z=e(63483),F=e(95712),J=e(67034);function Q(Ue){return typeof Ue=="object"&&Ue.type===r.pz.Alerting}function Z(Ue){return typeof Ue=="object"&&Ue.type===r.pz.Recording}function ne(Ue){return typeof Ue=="object"&&"alert"in Ue}function ee(Ue){return typeof Ue=="object"&&"record"in Ue}function de(Ue){return typeof Ue=="object"&&"grafana_alert"in Ue}function Pe(Ue){return Ue.rulerRule&&de(Ue.rulerRule)&&!!Ue.rulerRule.grafana_alert.is_paused}function ye(Ue){return JSON.stringify(Ue.labels)}function he(Ue){return Ue.error&&Ue.error?.message?.includes(RULER_NOT_SUPPORTED_MSG)}function me(Ue){return"uid"in Ue}function De(Ue){return"rulerRuleHash"in Ue}function le(Ue){return Object.values(PromRuleType).includes(Ue)}function Ee(Ue){return"ruleHash"in Ue}function be(Ue){switch(Ue){case"ok":return RuleHealth.Ok;case"nodata":return RuleHealth.NoData;case"error":case"err":return RuleHealth.Error;case"unknown":return RuleHealth.Unknown;default:return}}function ge(Ue){return Ue===r.x_.Inactive?"Normal":(0,t.capitalize)(Ue)}const ue=Ue=>Ue.reduce((it,{dataSourceName:ze,name:Xe,groups:St})=>(St.forEach(({name:Bt,rules:zt})=>{zt.forEach(qt=>{Q(qt)&&it.push({dataSourceName:ze,namespaceName:Xe,groupName:Bt,rule:qt})})}),it),[]),Ie=Ue=>Q(Ue.promRule)?Ue.promRule:null,ot=Ue=>Ue.reduce((it,{rulesSource:ze,name:Xe,groups:St})=>(St.forEach(({name:Bt,rules:zt})=>{zt.forEach(qt=>{qt.promRule&&Q(qt.promRule)&&it.push({dataSourceName:(0,F.EG)(ze),namespaceName:Xe,groupName:Bt,...qt})})}),it),[]);function Qe(Ue){let it;return Object.values(n.Z).includes(Ue)?it=Ue:it=(0,r.ED)(Ue),Me[it]}const Me={[r.x_.Inactive]:"good",[r.x_.Firing]:"bad",[r.x_.Pending]:"warning",[r.bj.Alerting]:"bad",[r.bj.Error]:"bad",[r.bj.NoData]:"info",[r.bj.Normal]:"good",[r.bj.Pending]:"warning",[n.Z.NoData]:"info",[n.Z.Paused]:"warning",[n.Z.Alerting]:"bad",[n.Z.OK]:"good",[n.Z.Pending]:"warning",[n.Z.Unknown]:"info"};function Ne(Ue){return Ue?.alerts?Ue.alerts.reduce((it,ze)=>{const Xe=(0,r.ED)(ze.state)!==r.bj.Normal;if(ze.activeAt&&Xe){const St=new Date(ze.activeAt);if(it===null||it.getTime()>St.getTime())return St}return it},null):null}function qe(Ue){return Array.isArray(Ue.source_tenants)}function bt(Ue){return de(Ue)?Ue.grafana_alert.title:ne(Ue)?Ue.alert:ee(Ue)?Ue.record:""}const Fe=(Ue,it)=>{const ze={alertName:"",forDuration:"0s",evaluationsToFire:0};return de(Ue)?{alertName:Ue.grafana_alert.title,forDuration:Ue.for,evaluationsToFire:Ve(Ue.for,it)}:ne(Ue)?{alertName:Ue.alert,forDuration:Ue.for??"1m",evaluationsToFire:Ve(Ue.for??"1m",it)}:ze},Ve=(Ue,it)=>{const ze=(0,J.Bg)(it),Xe=(0,J.Bg)(Ue);return Xe===0&&ze!==0?1:ze===0||Xe/ze<1?0:Math.ceil(Xe/ze)+1}},67034:(X,L,e)=>{"use strict";e.d(L,{Bg:()=>f});var t=(h=>(h.seconds="s",h.minutes="m",h.hours="h",h.days="d",h.weeks="w",h))(t||{});function n(h){const C=h.match(/(\d+)(\w+)/);if(C)return[Number(C[1]),C[2]];throw new Error(`Invalid interval description: ${h}`)}function r(h){const{sec:C,count:x}=describeInterval(h);return C*x}const a=Object.entries(t).map(([h,C])=>({label:h[0].toUpperCase()+h.slice(1),value:C}));function i(h){try{return d(h),!0}catch{return!1}}const y={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},c=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),l=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t).join(", ")}`);function d(h){let C=h,x=[];function b(p){const v=c.exec(p),E=v?.groups?.value&&v?.groups?.type;if(!v||!E)throw l;v&&v.groups?.value&&v.groups?.type&&(C=C.replace(v[0],""),x.push([Number(v.groups.value),v.groups.type])),C&&b(C)}if(b(h),!x.length)throw l;return x.reduce((p,[v,E])=>{const P=v*y[E];return p+P},0)}const f=h=>{try{return d(h)}catch{return 0}},m=h=>h.includes("0001-01-01T00");function u(h){return h%(1e3*60*60)===0?h/(1e3*60*60)+"h":h%(1e3*60)===0?h/(1e3*60)+"m":h%1e3===0?h/1e3+"s":h.toFixed()+"ms"}},24597:(X,L,e)=>{"use strict";e.d(L,{u:()=>n});var t=e(32688);function n(a,i){const c=new URLSearchParams(i).toString();return`${t.config.appSubUrl}${a}${c?`?${c}`:""}`}function r(a,i){const c=new URLSearchParams(i).toString();try{const l=new URL(config.appSubUrl,config.appUrl);return l.pathname=a,`${l.href}${c?`?${c}`:""}`}catch{return n(a,i)}}},7376:(X,L,e)=>{"use strict";e.d(L,{Dl:()=>a,_E:()=>r,lK:()=>i,xD:()=>n});var t=e(4148);function n(y){return(0,t.i)().post("/api/annotations",y)}function r(y){return(0,t.i)().put(`/api/annotations/${y.id}`,y)}function a(y){return(0,t.i)().delete(`/api/annotations/${y.id}`)}async function i(){return(await(0,t.i)().get("/api/annotations/tags")).result.tags.map(({tag:c,count:l})=>({term:c,count:l}))}},46347:(X,L,e)=>{"use strict";e.d(L,{CN:()=>h.CN,Hv:()=>b,Zi:()=>x,t4:()=>E});var t=e(91986),n=e(31312),r=e(57837),a=e(10694),i=e(4148),y=e(13601),c=e(97316),l=e(14687),d=e(21308),f=e(3654),m=e(8099),u=e(13540),h=e(60952);function C({baseURL:A}){async function O(N){try{const{data:o,...w}=await(0,n.n)((0,i.i)().fetch({...N,url:A+N.url,showErrorAlert:N.showErrorAlert}));return{data:o,meta:w}}catch(o){return N.manageError?N.manageError(o):{error:o}}}return O}const x=(0,t.LC)({tagTypes:["getFolder"],reducerPath:"browseDashboardsAPI",baseQuery:C({baseURL:"/api"}),endpoints:A=>({getFolder:A.query({providesTags:(O,N,o)=>[{type:"getFolder",id:o}],query:O=>({url:`/folders/${O}`,params:{accesscontrol:!0}})}),newFolder:A.mutation({query:({title:O,parentUid:N})=>({method:"POST",url:"/folders",data:{title:O,parentUid:N}}),onQueryStarted:({parentUid:O},{queryFulfilled:N,dispatch:o})=>{N.then(async({data:w})=>{await d.Vt.fetchUserPermissions(),o((0,c.$l)((0,l.AT)("Folder created"))),o((0,m.it)({parentUID:O,pageSize:u.IV})),y.E1.push(r.u.stripBaseFromUrl(w.url))})}}),saveFolder:A.mutation({invalidatesTags:["getFolder"],query:({uid:O,title:N,version:o})=>({method:"PUT",url:`/folders/${O}`,data:{title:N,version:o}}),onQueryStarted:({parentUid:O},{queryFulfilled:N,dispatch:o})=>{N.then(()=>{o((0,m.it)({parentUID:O,pageSize:u.IV}))})}}),moveFolder:A.mutation({invalidatesTags:["getFolder"],query:({folder:O,destinationUID:N})=>({url:`/folders/${O.uid}/move`,method:"POST",data:{parentUID:N}}),onQueryStarted:({folder:O,destinationUID:N},{queryFulfilled:o,dispatch:w})=>{const{parentUid:K}=O;o.then(()=>{w((0,m.it)({parentUID:K,pageSize:u.IV})),w((0,m.it)({parentUID:N,pageSize:u.IV}))})}}),deleteFolder:A.mutation({query:({uid:O})=>({url:`/folders/${O}`,method:"DELETE",params:{forceDeleteRules:!1}}),onQueryStarted:({parentUid:O},{queryFulfilled:N,dispatch:o})=>{N.then(()=>{o((0,m.it)({parentUID:O,pageSize:u.IV}))})}}),getAffectedItems:A.query({queryFn:async O=>{const o=Object.keys(O.folder).filter(V=>O.folder[V]).map(V=>(0,i.i)().get(`/api/folders/${V}/counts`)),w=await Promise.all(o),K={folder:Object.values(O.folder).filter(a.fQ).length,dashboard:Object.values(O.dashboard).filter(a.fQ).length,libraryPanel:0,alertRule:0};for(const V of w)K.folder+=V.folder??0,K.dashboard+=V.dashboard,K.alertRule+=V.alertrule,K.libraryPanel+=V.librarypanel;return{data:K}}}),moveItems:A.mutation({invalidatesTags:["getFolder"],queryFn:async({selectedItems:O,destinationUID:N},o,w,K)=>{const V=Object.keys(O.dashboard).filter(U=>O.dashboard[U]),_=Object.keys(O.folder).filter(U=>O.folder[U]);for(const U of _)await K({url:`/folders/${U}/move`,method:"POST",data:{parentUID:N}});for(const U of V){const k={dashboard:(await(0,i.i)().get(`/api/dashboards/uid/${U}`)).dashboard,folderUid:N,overwrite:!1,message:""};await K({url:"/dashboards/db",method:"POST",data:k})}return{data:void 0}},onQueryStarted:({destinationUID:O,selectedItems:N},{queryFulfilled:o,dispatch:w})=>{const K=Object.keys(N.dashboard).filter(_=>N.dashboard[_]),V=Object.keys(N.folder).filter(_=>N.folder[_]);o.then(()=>{w((0,m.it)({parentUID:O,pageSize:u.IV})),w((0,m.Nc)([...V,...K]))})}}),deleteItems:A.mutation({queryFn:async({selectedItems:O},N,o,w)=>{const K=Object.keys(O.dashboard).filter(_=>O.dashboard[_]),V=Object.keys(O.folder).filter(_=>O.folder[_]);for(const _ of V)await w({url:`/folders/${_}`,method:"DELETE",params:{forceDeleteRules:!1}});for(const _ of K)await w({url:`/dashboards/uid/${_}`,method:"DELETE"});return{data:void 0}},onQueryStarted:({selectedItems:O},{queryFulfilled:N,dispatch:o})=>{const w=Object.keys(O.dashboard).filter(V=>O.dashboard[V]),K=Object.keys(O.folder).filter(V=>O.folder[V]);N.then(()=>{o((0,m.Nc)([...K,...w]))})}}),saveDashboard:A.mutation({query:({dashboard:O,folderUid:N,message:o,overwrite:w})=>({url:"/dashboards/db",method:"POST",data:{dashboard:O,folderUid:N,message:o??"",overwrite:!!w}}),onQueryStarted:({folderUid:O},{queryFulfilled:N,dispatch:o})=>{f.H.ignoreNextSave(),N.then(async()=>{await d.Vt.fetchUserPermissions(),o((0,m.it)({parentUID:O,pageSize:u.IV}))})}})})}),{endpoints:b,useDeleteFolderMutation:g,useDeleteItemsMutation:p,useGetAffectedItemsQuery:v,useGetFolderQuery:E,useMoveFolderMutation:P,useMoveItemsMutation:S,useNewFolderMutation:M,useSaveDashboardMutation:R,useSaveFolderMutation:I}=x},13540:(X,L,e)=>{"use strict";e.d(L,{IV:()=>y,ry:()=>c,xH:()=>l});var t=e(32688),n=e(4148),r=e(9738),a=e(17724),i=e(39971);const y=50;async function c(d,f,m=1,u=y){return d&&!t.config.featureToggles.nestedFolders?[]:(await(0,n.i)().get("/api/folders",{parentUid:d,page:m,limit:u})).map(x=>({kind:"folder",uid:x.uid,title:x.title,parentTitle:f,parentUID:d,url:`/dashboards/f/${x.uid}/`}))}async function l(d,f=1,m=y){const h=await(0,a.getGrafanaSearcher)().search({kind:["dashboard"],query:"*",location:d||"general",from:(f-1)*m,limit:m});return h.view.map(C=>{const x=(0,i.f9)(C,h.view);return x.parentUID===r.YQ&&(x.parentUID=void 0),x})}},68410:(X,L,e)=>{"use strict";e.d(L,{Nc:()=>i,it:()=>y,si:()=>c});var t=e(9738),n=e(21527),r=e(13540),a=e(99432);const i=(0,n.createAsyncThunk)("browseDashboards/refreshParents",async(l,{getState:d,dispatch:f})=>{const{browseDashboards:m}=d(),{rootItems:u,childrenByParentUID:h}=m,C=new Set;for(const x of l){const b=(0,a.i)(u?.items??[],h,x);C.add(b?.parentUID)}for(const x of C)f(y({parentUID:x,pageSize:r.IV}))}),y=(0,n.createAsyncThunk)("browseDashboards/refetchChildren",async({parentUID:l,pageSize:d})=>{const f=l===t.YQ?void 0:l;let m=1,u="folder",h=await(0,r.ry)(f,void 0,m,d),C=h.length<d;if(u==="folder"&&C){u="dashboard",m=1;const x=await(0,r.xH)(f,m,d);C=x.length<d,h=h.concat(x)}return{children:h,lastPageOfKind:C,page:m,kind:u}}),c=(0,n.createAsyncThunk)("browseDashboards/fetchNextChildrenPage",async({parentUID:l,excludeKinds:d=[],pageSize:f},m)=>{const u=!d.includes("dashboard"),h=l===t.YQ?void 0:l,C=m.getState().browseDashboards,x=h?C.childrenByParentUID[h]:C.rootItems;let b=1,g;if(x?x.lastFetchedKind==="dashboard"&&!x.lastKindHasMoreItems?console.warn(`fetchNextChildrenPage called for ${h} but that collection is fully loaded`):x.lastFetchedKind==="folder"&&x.lastKindHasMoreItems?(b=x.lastFetchedPage+1,g="folder"):u&&(b=x.lastFetchedKind==="folder"?1:x.lastFetchedPage+1,g="dashboard"):(b=1,g="folder"),!g)return;let p=g==="folder"?await(0,r.ry)(h,void 0,b,f):await(0,r.xH)(h,b,f),v=p.length<f;if(g==="folder"&&v&&u){g="dashboard",b=1;const E=await(0,r.xH)(h,b,f);v=E.length<f,p=p.concat(E)}return{children:p,lastPageOfKind:v,page:b,kind:g}})},8099:(X,L,e)=>{"use strict";e.d(L,{MH:()=>d,qO:()=>S,si:()=>n.si,it:()=>n.it,Nc:()=>n.Nc,hO:()=>l,zw:()=>x,D$:()=>P});var t=e(65158),n=e(68410),r=e(39953),a=e(38874),i=e(21527),y=e(13540),c=e(99432);const l=M=>M.browseDashboards.rootItems,d=M=>M.browseDashboards.childrenByParentUID,f=M=>M.browseDashboards.openFolders,m=M=>M.browseDashboards.selectedItems,u=(0,a.P1)(l,d,f,(M,R)=>R,(M,R,I,A)=>S(A,M,R,I)),h=(0,a.P1)(m,M=>Object.values(M).some(R=>Object.values(R).some(I=>I))),C=(0,a.P1)(m,d,(M,R)=>{const I={dashboard:{...M.dashboard},folder:{...M.folder}};for(const A of Object.keys(M.folder))if(M.folder[A]){const N=R[A];if(N)for(const o of N.items)o.kind==="dashboard"&&(I.dashboard[o.uid]=!1),o.kind==="folder"&&(I.folder[o.uid]=!1)}return I});function x(M){return(0,i.useSelector)(R=>(M?R.browseDashboards.childrenByParentUID[M]:R.browseDashboards.rootItems)?"fulfilled":"pending")}function b(M){return useSelector(R=>u(R,M))}function g(){return useSelector(M=>h(M))}function p(){return useSelector(m)}function v(){return useSelector(M=>M.browseDashboards.childrenByParentUID)}function E(){return useSelector(M=>C(M))}function P(M=[]){const R=(0,i.useDispatch)(),I=(0,r.useRef)(!1);return(0,r.useCallback)(O=>{if(I.current)return Promise.resolve();I.current=!0;const N=R((0,n.si)({parentUID:O,excludeKinds:M,pageSize:y.IV}));return N.finally(()=>I.current=!1),N},[R,M])}function S(M,R,I,A,O=0,N=[],o=[]){function w(H,j,z){if(N.includes(H.kind)||o.includes(H.uid))return[];const F=S(H.uid,R,I,A,z+1,N,o),J=!!A[H.uid],Q=I[H.uid]?.items.length===0;return J&&Q&&!N.includes("empty-folder")&&F.push({isOpen:!1,level:z+1,item:{kind:"ui",uiKind:"empty-folder",uid:H.uid+"empty-folder"},parentUID:j}),[{item:H,parentUID:j,level:z,isOpen:J},...F]}const K=M&&A[M]||O===0,V=M?I[M]:R;let U=((M?K&&V?.items:V?.items)||[]).flatMap(H=>w(H,M,O));const $=N.includes("dashboard")&&V?.lastFetchedKind==="dashboard";return(O===0&&!V||K&&V&&!(V.isFullyLoaded||$))&&(U=U.concat((0,c.k)(y.IV,M,O))),U}},65158:(X,L,e)=>{"use strict";e.d(L,{ZP:()=>v});var t={};e.r(t),e.d(t,{fetchNextChildrenPageFulfilled:()=>y,refetchChildrenFulfilled:()=>i,setAllSelection:()=>d,setFolderOpenState:()=>c,setItemSelectionState:()=>l});var n=e(77960),r=e(68410),a=e(99432);function i(E,P){const{children:S,page:M,kind:R,lastPageOfKind:I}=P.payload,{parentUID:A}=P.meta.arg,O={items:S,lastFetchedKind:R,lastFetchedPage:M,lastKindHasMoreItems:!I,isFullyLoaded:R==="dashboard"&&I};A?E.childrenByParentUID[A]=O:E.rootItems=O}function y(E,P){const S=P.payload;if(!S)return;const{children:M,page:R,kind:I,lastPageOfKind:A}=S,{parentUID:O,excludeKinds:N=[]}=P.meta.arg,K={items:((O?E.childrenByParentUID[O]:E.rootItems)?.items??[]).concat(M),lastFetchedKind:I,lastFetchedPage:R,lastKindHasMoreItems:!A,isFullyLoaded:(N.includes("dashboard")||I==="dashboard")&&A};if(!O){E.rootItems=K;return}if(E.childrenByParentUID[O]=K,E.selectedItems.folder[O])for(const _ of M)E.selectedItems[_.kind][_.uid]=!0}function c(E,P){const{folderUID:S,isOpen:M}=P.payload;E.openFolders[S]=M}function l(E,P){const{item:S,isSelected:M}=P.payload;function R(A,O){if(E.selectedItems[A][O]=M,A!=="folder")return;let N=E.childrenByParentUID[O];for(const o of N?.items??[])R(o.kind,o.uid)}R(S.kind,S.uid);let I=S.parentUID;for(;I;){const A=(0,a.i)(E.rootItems?.items??[],E.childrenByParentUID,I);if(!A)break;M||(E.selectedItems[A.kind][A.uid]=!1),I=A.parentUID}E.selectedItems.$all=E.rootItems?.items?.every(A=>E.selectedItems[A.kind][A.uid])??!1}function d(E,P){const{isSelected:S,folderUID:M}=P.payload;if(E.selectedItems.$all=S,S){let I=function(A){const O=A?E.childrenByParentUID[A]:E.rootItems;if(O)for(const N of O.items)E.selectedItems[N.kind][N.uid]=S,N.kind==="folder"&&I(N.uid)};var R=I;I(M)}else for(const I in E.selectedItems){if(!(I==="dashboard"||I==="panel"||I==="folder"))continue;const A=E.selectedItems[I];for(const O in A)A[O]=S}}const{fetchNextChildrenPageFulfilled:f,refetchChildrenFulfilled:m,...u}=t,h={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},C=(0,n.oM)({name:"browseDashboards",initialState:h,reducers:u,extraReducers:E=>{E.addCase(r.si.fulfilled,f),E.addCase(r.it.fulfilled,m)}}),x=C.reducer,{setFolderOpenState:b,setItemSelectionState:g,setAllSelection:p}=C.actions,v={browseDashboards:x}},99432:(X,L,e)=>{"use strict";e.d(L,{i:()=>t,k:()=>n});function t(r,a,i){for(const y of r)if(y.uid===i)return y;for(const y in a){const c=a[y];if(c){for(const l of c.items)if(l.uid===i)return l}}}function n(r,a,i){return new Array(r).fill(null).map((y,c)=>({parentUID:a,level:i,isOpen:!1,item:{kind:"ui",uiKind:"pagination-placeholder",uid:`${a}-pagination-${c}`}}))}},91473:(X,L,e)=>{"use strict";e.d(L,{Z:()=>n});const t="connections",n={Base:`/${t}`,DataSources:`/${t}/datasources`,DataSourcesNew:`/${t}/datasources/new`,DataSourcesEdit:`/${t}/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${t}/add-new-connection`,DataSourcesDetails:`/${t}/datasources/:id`,ConnectDataOutdated:`/${t}/connect-data`,YourConnectionsOutdated:`/${t}/your-connections`}},27587:(X,L,e)=>{"use strict";e.d(L,{FJ:()=>x,Mi:()=>u,RS:()=>g,Rh:()=>d,Ym:()=>f,bS:()=>h,r5:()=>b,zZ:()=>m});var t=e(91986),n=e(31312),r=e(4148),a=e(97316),i=e(14687);function y(E){return typeof E=="object"&&E!=null&&"error"in E}const c=({baseUrl:E})=>async P=>{try{const{data:S,...M}=await(0,n.n)((0,r.i)().fetch({...P,url:E+P.url,showErrorAlert:P.showErrorAlert}));return{data:S,meta:M}}catch(S){return P.manageError?P.manageError(S):{error:S}}},l=E=>({error:(0,r.kW)(E)&&E.status!==404?E:null}),d=(0,t.LC)({reducerPath:"publicDashboardApi",baseQuery:c({baseUrl:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:E=>({getPublicDashboard:E.query({query:P=>({url:`/dashboards/uid/${P}/public-dashboards`,manageError:l,showErrorAlert:!1}),async onQueryStarted(P,{dispatch:S,queryFulfilled:M}){try{await M}catch(R){y(R)&&(0,r.kW)(R.error)&&S((0,a.$l)((0,i.t_)(R.error.data.message)))}},providesTags:(P,S,M)=>[{type:"PublicDashboard",id:M}]}),createPublicDashboard:E.mutation({query:P=>({url:`/dashboards/uid/${P.dashboard.uid}/public-dashboards`,method:"POST",data:P.payload}),async onQueryStarted({dashboard:P,payload:S},{dispatch:M,queryFulfilled:R}){const{data:I}=await R;M((0,a.$l)((0,i.AT)("Dashboard is public!"))),P.updateMeta({publicDashboardUid:I.uid,publicDashboardEnabled:I.isEnabled})},invalidatesTags:(P,S,{dashboard:M})=>[{type:"PublicDashboard",id:M.uid}]}),updatePublicDashboard:E.mutation({query:P=>({url:`/dashboards/uid/${P.dashboard.uid}/public-dashboards/${P.payload.uid}`,method:"PATCH",data:P.payload}),async onQueryStarted({dashboard:P,payload:S},{dispatch:M,queryFulfilled:R}){const{data:I}=await R;M((0,a.$l)((0,i.AT)("Public dashboard updated!"))),P.updateMeta&&P.updateMeta({publicDashboardUid:I.uid,publicDashboardEnabled:I.isEnabled})},invalidatesTags:(P,S,{payload:M})=>[{type:"PublicDashboard",id:M.dashboardUid},"AuditTablePublicDashboard"]}),addRecipient:E.mutation({query:()=>({url:""})}),deleteRecipient:E.mutation({query:()=>({url:""})}),reshareAccessToRecipient:E.mutation({query:()=>({url:""})}),getActiveUsers:E.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:E.query({query:()=>({url:""}),providesTags:(P,S,M)=>[{type:"ActiveUserDashboards",id:M}]}),listPublicDashboards:E.query({query:(P=1)=>({url:`/dashboards/public-dashboards?page=${P}&perpage=8`}),transformResponse:P=>({...P,totalPages:Math.ceil(P.totalCount/P.perPage)}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:E.mutation({query:P=>({url:`/dashboards/uid/${P.dashboardUid}/public-dashboards/${P.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:P,uid:S},{dispatch:M,queryFulfilled:R}){await R,M((0,a.$l)((0,i.AT)("Public dashboard deleted!"))),P?.updateMeta({publicDashboardUid:S,publicDashboardEnabled:!1})},invalidatesTags:(P,S,{dashboardUid:M})=>[{type:"PublicDashboard",id:M},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]})})}),{useGetPublicDashboardQuery:f,useCreatePublicDashboardMutation:m,useUpdatePublicDashboardMutation:u,useDeletePublicDashboardMutation:h,useListPublicDashboardsQuery:C,useAddRecipientMutation:x,useDeleteRecipientMutation:b,useReshareAccessToRecipientMutation:g,useGetActiveUsersQuery:p,useGetActiveUserDashboardsQuery:v}=d},91507:(X,L,e)=>{"use strict";e.d(L,{ZP:()=>v,g_:()=>b,jy:()=>c});var t=e(77960),n=e(10694),r=e(54554),a=e(23062),i=e(3706),y=e(47864);const c="grafana.dashboard.editor.ui",l={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:y.d1.Fill},d=()=>{const E=a.Z.getObject(c,l);let P={...E};return typeof E.topPaneSize=="string"&&(P={...E,topPaneSize:parseFloat(E.topPaneSize)/100}),{getPanel:()=>new i.rY({}),getSourcePanel:()=>new i.rY({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,r.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...l,...P}}},f=(0,t.oM)({name:"panelEditor",initialState:d(),reducers:{updateEditorInitState:(E,P)=>{E.getPanel=()=>P.payload.panel,E.getSourcePanel=()=>P.payload.sourcePanel,E.initDone=!0,E.isOpen=!0,E.shouldDiscardChanges=!1},setEditorPanelData:(E,P)=>{E.getData=()=>P.payload},setDiscardChanges:(E,P)=>{E.shouldDiscardChanges=P.payload},setPanelEditorUIState:(E,P)=>{E.ui={...E.ui,...P.payload},!E.ui.isPanelOptionsVisible&&E.isVizPickerOpen&&(E.isVizPickerOpen=!1)},toggleVizPicker:(E,P)=>{E.isVizPickerOpen=P.payload,E.isVizPickerOpen&&(E.ui.isPanelOptionsVisible=!0)},toggleTableView(E){E.tableViewEnabled=!E.tableViewEnabled},closeEditor:E=>{E.getPanel=()=>new i.rY({}),E.getSourcePanel=()=>new i.rY({}),E.isOpen=!1,E.initDone=!1,E.isVizPickerOpen=!1,E.tableViewEnabled=!1}}}),{updateEditorInitState:m,setEditorPanelData:u,setDiscardChanges:h,closeEditor:C,setPanelEditorUIState:x,toggleVizPicker:b,toggleTableView:g}=f.actions,v={panelEditor:f.reducer}},47864:(X,L,e)=>{"use strict";e.d(L,{Ok:()=>y,d1:()=>n});var t=(c=>(c.Query="query",c.Transform="transform",c.Visualize="visualize",c.Alert="alert",c))(t||{}),n=(c=>(c[c.Fill=0]="Fill",c[c.Fit=1]="Fit",c[c.Exact=2]="Exact",c))(n||{}),r=(c=>(c[c.Off=0]="Off",c[c.Table=1]="Table",c))(r||{});const a=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],i=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var y=(c=>(c[c.Visualizations=0]="Visualizations",c[c.LibraryPanels=1]="LibraryPanels",c[c.Suggestions=2]="Suggestions",c[c.Widgets=3]="Widgets",c))(y||{})},97433:(X,L,e)=>{"use strict";e.d(L,{h4:()=>h});var t=e(31312),n=e(71519),r=e(28833),a=e(26843),i=e(1277),y=e(44622),c=e(73431),l=e(19016),d=e(65406);class f{constructor(){this.onRemovePanel=x=>{const b=this.getCurrent();b&&(0,d.WJ)(b,b.getPanelById(x),!0)},r.h.subscribe(c.Eb,x=>this.onRemovePanel(x.payload))}create(x,b){return new l.f(x,b)}setCurrent(x){this.dashboard=x}getCurrent(){return this.dashboard}saveJSONDashboard(x){const b=JSON.parse(x);return(0,y.uC)({dashboard:b,folderUid:this.dashboard?.meta.folderUid||b.folderUid})}saveDashboard(x,b){return(0,t.n)((0,i.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...x,dashboard:x.dashboard.getSaveModelClone()},...b}))}starDashboard(x,b){const g=(0,i.i)(),p={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+x,method:b?"DELETE":"POST"};return g.request(p).then(()=>{const v=!b;this.dashboard?.uid===x&&(this.dashboard.meta.isStarred=v);const E=v?(0,a.t)("notifications.starred-dashboard","Dashboard starred"):(0,a.t)("notifications.unstarred-dashboard","Dashboard unstarred");return r.h.emit(n.SI.alertSuccess,[E]),v})}}let m;function u(C){m=C}function h(){return m||(m=new f),m}},6278:(X,L,e)=>{"use strict";e.d(L,{$t:()=>p});var t=e(86832),n=e(92403),r=e(54554),a=e(81626),i=e(77877),y=e(13601),c=e(28833),l=e(50820),d=e(97125),f=e(56858),m=e(20111),u=e(73431),h=e(82563);function C({urlRefresh:v,currentRefresh:E,isAllowedIntervalFn:P,minRefreshInterval:S,refreshIntervals:M=h.o5}){if(!v)return E;const R=P(v),I=M.find(A=>A===v);if(!R||!I){const A=S?M.find(N=>N===S):void 0,O=M?.length?M[0]:void 0;return A??O??E}return v||E}class x{constructor(E){this.contextSrv=E,this.timeRangeForUrl=()=>{const P=this.timeRange().raw;return(0,n.v9)(P.from)&&(P.from=P.from.valueOf().toString()),(0,n.v9)(P.to)&&(P.to=P.to.valueOf().toString()),P},this.time=(0,r.JK)().raw,this.timeAtLoad=(0,r.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),c.Z.subscribe(u.p8,P=>{this.zoomOut(P.payload.scale,P.payload.updateUrl)}),c.Z.subscribe(u.Qt,P=>{this.shiftTime(P.payload.direction,P.payload.updateUrl)}),c.Z.subscribe(u.QI,P=>{this.makeAbsoluteTime(P.payload.updateUrl)}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(E){this.timeModel=E,this.time=E.time,this.refresh=E.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time);const P=a.convertRawToRange(this.time,this.timeModel?.getTimezone(),this.timeModel?.fiscalYearStartMonth);P.to.isBefore(P.from)&&this.setTime({from:P.raw.to,to:P.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(E){return this.contextSrv.getValidIntervals(E)}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.CQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.CQ)(this.time.to).utc())}parseUrlParam(E){if(E.indexOf("now")!==-1)return E;if(E.length===8){const P=(0,n.zh)(E,"YYYYMMDD");if(P.isValid())return P}else if(E.length===15){const P=(0,n.zh)(E,"YYYYMMDDTHHmmss");if(P.isValid())return P}if(!isNaN(Number(E))){const P=parseInt(E,10);return(0,n.zh)(P)}return null}getTimeWindow(E,P){const S=parseInt(E,10);let M;return P.match(/^\d+$/)&&parseInt(P,10)?M=parseInt(P,10):M=a.intervalToMs(P),{from:(0,n.zh)(S-M/2),to:(0,n.zh)(S+M/2)}}initTimeFromUrl(){if(l.config.publicDashboardAccessToken&&this.timeModel?.timepicker?.hidden)return;const E=y.E1.getSearch();E.get("time")&&E.get("time.window")&&(this.time=this.getTimeWindow(E.get("time"),E.get("time.window"))),E.get("from")&&(this.time.from=this.parseUrlParam(E.get("from"))||this.time.from),E.get("to")&&(this.time.to=this.parseUrlParam(E.get("to"))||this.time.to),E.get("to")&&E.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=C({urlRefresh:E.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:l.config.minRefreshInterval})}updateTimeRangeFromUrl(){const E=y.E1.getSearch();if(E.get("left"))return;const P=this.timeRangeForUrl(),S=E.get("from"),M=E.get("to");S&&M?(S!==P.from||M!==P.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(E){this.timeModel&&(this.timeModel.refresh=E),this.stopAutoRefresh();const P=y.E1.getSearchObject();if(!E){P.refresh&&y.E1.partial({refresh:null},!0);return}let S=E,M=60*1e3;E===d.Wg?M=this.getAutoRefreshInteval().intervalMs:(S=this.contextSrv.getValidInterval(E),M=a.intervalToMs(S)),this.refreshMS=M,this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(M),this.refreshTimeModel()},M),P.refresh!==S&&y.E1.partial({refresh:S},!0)}getAutoRefreshInteval(){const E=window?.innerWidth??2e3;return a.calculateInterval(this.timeRange(),E,l.config.minRefreshInterval)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(E){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(E),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},E)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0,this.refreshMS=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(E,P=!0){if((0,t.extend)(this.time,E),(0,n.v9)(E.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=void 0),P===!0){const S=this.timeRangeForUrl(),M=y.E1.getSearchObject();if(M.from===S.from.toString()&&M.to===S.to.toString())return;M.from=S.from.toString(),M.to=S.to.toString(),y.E1.partial(M)}this.timeModel?.refresh===d.Wg&&this.getAutoRefreshInteval().intervalMs!==this.refreshMS&&this.setAutoRefresh(d.Wg),this.refreshTimeModel()}timeRange(){return window.__timeRangeSceneObject&&window.__timeRangeSceneObject.isActive?window.__timeRangeSceneObject.state.value:(0,m.O)(this.time,this.timeModel)}zoomOut(E,P=!0){const S=this.timeRange(),{from:M,to:R}=(0,f.h)(S,E);this.setTime({from:(0,n.zh)(M),to:(0,n.zh)(R)},P)}shiftTime(E,P=!0){const S=this.timeRange(),{from:M,to:R}=(0,f.e)(E,S);this.setTime({from:(0,n.zh)(M),to:(0,n.zh)(R)},P)}makeAbsoluteTime(E){const{from:P,to:S}=this.timeRange();this.setTime({from:P,to:S},E)}isRefreshOutsideThreshold(E,P=.05){const S=this.timeRange();if(i.isMathString(S.raw.from)){const M=S.to.diff(S.from),R=Date.now()-E,I=M*P;return R>=I}return!1}}let b;function g(v){b=v}function p(){return b||(b=new x(d.Vt)),b}},36063:(X,L,e)=>{"use strict";e.d(L,{o:()=>tn,p:()=>On});var t=e(86832),n=e(18985),r=e(69084),a=e(47635),i=e(69307),y=e(24824),c=e(23955),l=e(49231),d=e(86981),f=e(89591),m=e(20788),u=e(55971),h=e(26205),C=e(34547),x=e(83484),b=e(39953),g=e(63671),p=e(60695),v=e(26286),E=e(20454),P=e(87783),S=e(57669),M=e(41407),R=e(59561),I=e(38637),A=e(69360),O=e(68497),N=e(82803),o=e(4919),w=e(36495),K=e(64084);const V=[{value:p.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:p.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class _ extends b.PureComponent{constructor(Ft){super(Ft),this.onAddThreshold=()=>{const{steps:an}=this.state;let cn=0;an.length>1&&(cn=an[an.length-1].value+10);let hn=R.O9.filter(nt=>!an.some(Be=>Be.color===nt))[1];hn||(hn="#CCCCCC");const rn={value:cn,color:hn,key:U++},un=[...an,rn];(0,l.bP)(un),this.setState({steps:un},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=an=>{const{steps:cn}=this.state;cn.length&&an.key!==cn[0].key&&this.setState({steps:cn.filter(hn=>hn.key!==an.key)},this.onChange)},this.onChangeThresholdValue=(an,cn)=>{const hn=an.target.value.replace(/,/g,"."),rn=parseFloat(hn),un=isNaN(rn)?"":rn,nt=this.state.steps.map(Be=>(Be.key===cn.key&&(Be={...Be,value:un}),Be));nt.length&&(nt[0].value=-1/0),(0,l.bP)(nt),this.setState({steps:nt})},this.onChangeThresholdColor=(an,cn)=>{const{steps:hn}=this.state,rn=hn.map(un=>(un.key===an.key&&(un={...un,color:cn}),un));this.setState({steps:rn},this.onChange)},this.onBlur=()=>{const an=[...this.state.steps];(0,l.bP)(an),this.setState({steps:an},this.onChange)},this.onChange=()=>{this.props.onChange(k(this.props.thresholds,this.state.steps))},this.onModeChanged=an=>{this.props.onChange({...this.props.thresholds,mode:an})};const jt=$(Ft.thresholds.steps);jt[0].value=-1/0,this.state={steps:jt},this.latestThresholdInputRef=b.createRef()}renderInput(Ft,jt,an){const cn=this.props.thresholds.mode===p.H.Percentage,hn=`Threshold ${an+1}`;return isFinite(Ft.value)?b.createElement(I.I,{type:"number",step:"0.0001",key:cn.toString(),onChange:rn=>this.onChangeThresholdValue(rn,Ft),value:Ft.value,"aria-label":hn,ref:an===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:b.createElement("div",{className:jt.inputPrefix},b.createElement("div",{className:jt.colorPicker},b.createElement(A.zH,{color:Ft.color,onChange:rn=>this.onChangeThresholdColor(Ft,rn),enableNamedColors:!0})),cn&&b.createElement("div",{className:jt.percentIcon},"%")),suffix:b.createElement(O.h,{className:jt.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(Ft),tooltip:`Remove ${hn}`})}):b.createElement(I.I,{type:"text",value:"Base","aria-label":hn,disabled:!0,prefix:b.createElement("div",{className:jt.colorPicker},b.createElement(A.zH,{color:Ft.color,onChange:rn=>this.onChangeThresholdColor(Ft,rn),enableNamedColors:!0}))})}render(){const{thresholds:Ft}=this.props,{steps:jt}=this.state;return b.createElement(N.Ni.Consumer,null,an=>{const cn=H(an);return b.createElement("div",{className:cn.wrapper},b.createElement(o.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:cn.addButton,fullWidth:!0},"Add threshold"),b.createElement("div",{className:cn.thresholds},jt.slice(0).reverse().map((hn,rn)=>b.createElement("div",{className:cn.item,key:`${hn.key}`},this.renderInput(hn,cn,rn)))),b.createElement("div",null,b.createElement(w._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),b.createElement(E.S,{options:V,onChange:this.onModeChanged,value:Ft.mode})))})}}let U=100;function $(gt){return(!gt||gt.length===0)&&(gt=[{value:-1/0,color:"green"}]),gt.filter((Ft,jt)=>(0,t.isNumber)(Ft.value)||jt===0).map(Ft=>({color:Ft.color,value:Ft.value===null?-1/0:Ft.value,key:U++}))}function k(gt,Ft){return{mode:gt.mode??p.H.Absolute,steps:Ft.map(an=>{const{key:cn,...hn}=an;return hn})}}const H=(0,K.B)(gt=>({wrapper:(0,M.css)`
      display: flex;
      flex-direction: column;
    `,thresholds:(0,M.css)`
      display: flex;
      flex-direction: column;
      margin-bottom: ${gt.spacing(2)};
    `,item:(0,M.css)`
      margin-bottom: ${gt.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:(0,M.css)`
      padding: 0 ${gt.spacing(1)};
    `,addButton:(0,M.css)`
      margin-bottom: ${gt.spacing(1)};
    `,percentIcon:(0,M.css)`
      font-size: ${gt.typography.bodySmall.fontSize};
      color: ${gt.colors.text.secondary};
    `,inputPrefix:(0,M.css)`
      display: flex;
      align-items: center;
    `,trashIcon:(0,M.css)`
      color: ${gt.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${gt.colors.text};
      }
    `}));class j extends b.PureComponent{constructor(Ft){super(Ft)}render(){const{onChange:Ft}=this.props;let jt=this.props.value;return jt||(jt={mode:p.H.Percentage,steps:[]}),b.createElement(_,{thresholds:jt,onChange:Ft})}}var z=e(12223),F=e(39285),J=e(73075),Q=e(11925),Z=e(57346),ne=e(69057),ee=e(96428),de=e(9558);function Pe({mapping:gt,index:Ft,onChange:jt,onRemove:an,onDuplicate:cn,showIconPicker:hn}){const{key:rn,result:un,id:nt}=gt,Be=(0,N.wW)(ye),et=(0,b.useRef)(null),kt=(0,b.useCallback)(en=>{const Gt={...gt,result:{...gt.result}};en(Gt),jt(Ft,Gt)},[gt,Ft,jt]);(0,b.useEffect)(()=>{et.current&&gt.isNew&&(et.current.focus(),kt(en=>{en.isNew=!1}))},[gt,et,kt]);const nn=en=>{kt(Gt=>{Gt.result.color=en})},Pn=()=>{kt(en=>{en.result.color=void 0})},pn=en=>{kt(Gt=>{Gt.result.icon=en})},In=()=>{kt(en=>{en.result.icon=void 0})},Qn=en=>{kt(Gt=>{Gt.key=en.currentTarget.value})},Fn=en=>{kt(Gt=>{Gt.result.text=en.currentTarget.value})},Ea=en=>{kt(Gt=>{Gt.from=parseFloat(en.currentTarget.value)})},ut=en=>{kt(Gt=>{Gt.to=parseFloat(en.currentTarget.value)})},vt=en=>{kt(Gt=>{Gt.pattern=en.currentTarget.value})},Et=en=>{kt(Gt=>{Gt.specialMatch=en.value})},It=[{label:"Null",value:c.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:c.e.NaN,description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:c.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:c.e.True,description:"Boolean true values"},{label:"False",value:c.e.False,description:"Boolean false values"},{label:"Empty",value:c.e.Empty,description:"Empty string"}];return b.createElement(ne._l,{key:nt,draggableId:nt,index:Ft},en=>b.createElement("tr",{className:Be.dragRow,ref:en.innerRef,...en.draggableProps},b.createElement("td",null,b.createElement("div",{className:Be.dragHandle,...en.dragHandleProps},b.createElement(F.J,{name:"draggabledots",size:"lg"}))),b.createElement("td",{className:Be.typeColumn},gt.type),b.createElement("td",null,gt.type===c.H.ValueToText&&b.createElement(I.I,{ref:et,type:"text",value:rn??"",onChange:Qn,placeholder:"Exact value to match"}),gt.type===c.H.RangeToText&&b.createElement("div",{className:Be.rangeInputWrapper},b.createElement(I.I,{type:"number",value:gt.from??"",placeholder:"Range start",onChange:Ea,prefix:"From"}),b.createElement(I.I,{type:"number",value:gt.to??"",placeholder:"Range end",onChange:ut,prefix:"To"})),gt.type===c.H.RegexToText&&b.createElement(I.I,{type:"text",value:gt.pattern??"",placeholder:"Regular expression",onChange:vt}),gt.type===c.H.SpecialValue&&b.createElement(de.Ph,{value:It.find(Gt=>Gt.value===gt.specialMatch),options:It,onChange:Et})),b.createElement("td",null,b.createElement(I.I,{type:"text",value:un.text??"",onChange:Fn,placeholder:"Optional display text"})),b.createElement("td",{className:Be.textAlignCenter},un.color&&b.createElement(z.Lh,{spacing:"sm",justify:"center"},b.createElement(A.zH,{color:un.color,onChange:nn,enableNamedColors:!0}),b.createElement(O.h,{name:"times",onClick:Pn,tooltip:"Remove color",tooltipPlacement:"top"})),!un.color&&b.createElement(A.zH,{color:"gray",onChange:nn,enableNamedColors:!0},Gt=>b.createElement(o.zx,{variant:"primary",fill:"text",onClick:Gt.showColorPicker,ref:Gt.ref,size:"sm"},"Set color"))),hn&&b.createElement("td",{className:Be.textAlignCenter},b.createElement(z.Lh,{spacing:"sm",justify:"center"},b.createElement(Z.E,{onChange:pn,onClear:In,value:un.icon,size:Q.zc.SMALL,folderName:Q.QS.Icon,mediaType:Q.DD.Icon,color:un.color}),un.icon&&b.createElement(O.h,{name:"times",onClick:In,tooltip:"Remove icon",tooltipPlacement:"top"}))),b.createElement("td",{className:Be.textAlignCenter},b.createElement(z.Lh,{spacing:"sm"},b.createElement(O.h,{name:"copy",onClick:()=>cn(Ft),"data-testid":"duplicate-value-mapping","aria-label":"Duplicate value mapping",tooltip:"Duplicate"}),b.createElement(O.h,{name:"trash-alt",onClick:()=>an(Ft),"data-testid":"remove-value-mapping","aria-label":"Delete value mapping",tooltip:"Delete"})))))}const ye=gt=>({dragRow:(0,M.css)({position:"relative"}),dragHandle:(0,M.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${gt.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,M.css)({display:"flex","> div:first-child":{marginRight:gt.spacing(2)}}),regexInputWrapper:(0,M.css)({display:"flex","> div:first-child":{marginRight:gt.spacing(2)}}),typeColumn:(0,M.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,M.css)({textAlign:"center"})});function he({value:gt,onChange:Ft,onClose:jt,showIconPicker:an}){const cn=(0,N.wW)(me),[hn,rn]=(0,b.useState)([]);(0,b.useEffect)(()=>{rn(ge(gt))},[gt]);const un=pn=>{if(!gt||!pn.destination)return;const In=[...hn],Qn=In[pn.source.index];In.splice(pn.source.index,1),In.splice(pn.destination.index,0,Qn),rn(In)},nt=(pn,In)=>{const Qn=[...hn];Qn.splice(pn,1,In),rn(Qn)},Be=pn=>{const In=[...hn];In.splice(pn,1),rn(In)},et=[{label:"Value",value:c.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:c.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:c.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:c.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],kt=pn=>{rn([...hn,le({type:pn.value,result:{},isNew:!0})])},nn=pn=>{const In=Ee(hn[pn]),Qn=[...hn];Qn.splice(pn,0,{...In});for(let Fn=pn;Fn<hn.length;Fn++)Qn[Fn].result.index=Fn;rn(Qn)},Pn=()=>{Ft(be(hn)),jt()};return(0,b.useEffect)(()=>{gt?.length||kt({value:c.H.ValueToText})},[]),b.createElement(b.Fragment,null,b.createElement("div",{className:cn.tableWrap},b.createElement("table",{className:cn.editTable},b.createElement("thead",null,b.createElement("tr",null,b.createElement("th",{style:{width:"1%"}}),b.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),b.createElement("th",{style:{textAlign:"left"}},"Display text"),b.createElement("th",{style:{width:"10%"}},"Color"),an&&b.createElement("th",{style:{width:"10%"}},"Icon"),b.createElement("th",{style:{width:"1%"}}))),b.createElement(ne.Z5,{onDragEnd:un},b.createElement(ne.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},pn=>b.createElement("tbody",{ref:pn.innerRef,...pn.droppableProps},hn.map((In,Qn)=>b.createElement(Pe,{key:In.id,mapping:In,index:Qn,onChange:nt,onRemove:Be,onDuplicate:nn,showIconPicker:an})),pn.placeholder))))),b.createElement(J.u.ButtonRow,{leftItems:b.createElement(ee.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:et,onChange:kt})},b.createElement(o.zx,{variant:"secondary",fill:"outline",onClick:jt},"Cancel"),b.createElement(o.zx,{variant:"primary",onClick:Pn},"Update")))}const me=gt=>({tableWrap:(0,M.css)`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,M.css)({width:"100%",marginBottom:gt.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:gt.colors.action.hover}," th, td":{padding:gt.spacing(1)}})});function De(){return(0,t.uniqueId)("mapping-")}function le(gt){return{type:c.H.ValueToText,result:{},id:De(),...gt}}function Ee(gt){return{...le(gt),id:De()}}function be(gt){const Ft=[],jt={type:c.H.ValueToText,options:{}};return gt.forEach((an,cn)=>{const hn={...an.result,index:cn};switch((!hn.text||hn.text.trim().length===0)&&(hn.text=void 0),an.type){case c.H.ValueToText:an.key!=null&&(jt.options[an.key]=hn);break;case c.H.RangeToText:an.from!=null&&an.to!=null&&Ft.push({type:an.type,options:{from:an.from,to:an.to,result:hn}});break;case c.H.RegexToText:an.pattern!=null&&Ft.push({type:an.type,options:{pattern:an.pattern,result:hn}});break;case c.H.SpecialValue:Ft.push({type:an.type,options:{match:an.specialMatch,result:hn}})}}),Object.keys(jt.options).length>0&&Ft.unshift(jt),Ft}function ge(gt){const Ft=[];if(gt)for(const jt of gt)switch(jt.type){case c.H.ValueToText:for(const an of Object.keys(jt.options))Ft.push(le({type:jt.type,result:jt.options[an],key:an}));break;case c.H.RangeToText:Ft.push(le({type:jt.type,result:jt.options.result,from:jt.options.from??0,to:jt.options.to??0}));break;case c.H.RegexToText:Ft.push(le({type:jt.type,result:jt.options.result,pattern:jt.options.pattern}));break;case c.H.SpecialValue:Ft.push(le({type:jt.type,result:jt.options.result,specialMatch:jt.options.match??c.e.Null}))}return Ft.sort((jt,an)=>(jt.result.index??0)>(an.result.index??0)?1:-1),Ft}const ue=b.memo(gt=>{const{value:Ft,onChange:jt,item:an}=gt,cn=(0,N.wW)(Ie),hn=an.settings?.icon,[rn,un]=(0,b.useState)(!1),nt=(0,b.useCallback)(()=>{un(!1)},[un]),Be=(0,b.useMemo)(()=>ge(Ft),[Ft]),et=(0,b.useCallback)((nn,Pn)=>{Be[Pn].result.color=nn,jt(be(Be))},[Be,jt]),kt=(0,b.useCallback)((nn,Pn)=>{Be[Pn].result.icon=nn,jt(be(Be))},[Be,jt]);return b.createElement(z.wc,null,b.createElement("table",{className:cn.compactTable},b.createElement("tbody",null,Be.map((nn,Pn)=>b.createElement("tr",{key:Pn.toString()},b.createElement("td",null,nn.type===c.H.ValueToText&&nn.key,nn.type===c.H.RangeToText&&b.createElement("span",null,"[",nn.from," - ",nn.to,"]"),nn.type===c.H.RegexToText&&nn.pattern,nn.type===c.H.SpecialValue&&nn.specialMatch),b.createElement("td",null,b.createElement(F.J,{name:"arrow-right"})),b.createElement("td",null,nn.result.text),nn.result.color&&b.createElement("td",null,b.createElement(A.zH,{color:nn.result.color,onChange:pn=>et(pn,Pn),enableNamedColors:!0})),hn&&nn.result.icon&&b.createElement("td",{"data-testid":"iconPicker"},b.createElement(Z.E,{onChange:pn=>kt(pn,Pn),value:nn.result.icon,size:Q.zc.SMALL,folderName:Q.QS.Icon,mediaType:Q.DD.Icon,color:nn.result.color})))))),b.createElement(o.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>un(!0)},Be.length>0&&b.createElement("span",null,"Edit value mappings"),Be.length===0&&b.createElement("span",null,"Add value mappings")),b.createElement(J.u,{isOpen:rn,title:"Value mappings",onDismiss:nt,className:cn.modal,closeOnBackdropClick:!1},b.createElement(he,{value:Ft,onChange:jt,onClose:nt,showIconPicker:hn})))});ue.displayName="ValueMappingsEditor";const Ie=gt=>({modal:(0,M.css)({width:"980px"}),compactTable:(0,M.css)({width:"100%","tbody td":{padding:gt.spacing(.5)}})});var ot=e(97368),Qe=e.n(ot),Me=e(1277);const Ne=(gt="General",Ft)=>`${gt}/${Ft}`;async function qe(gt=""){return Me.ae.search({type:"dash-db",query:gt,limit:100}).then(Ft=>Ft.map(jt=>({value:{uid:jt.uid,title:jt.title,folderTitle:jt.folderTitle,folderUid:jt.folderUid},label:Ne(jt?.folderTitle,jt.title)})))}const bt=Qe()(qe,250,{leading:!0}),Fe=({value:gt,onChange:Ft,placeholder:jt="Select dashboard",noOptionsMessage:an="No dashboards found",...cn})=>{const[hn,rn]=(0,b.useState)();(0,b.useEffect)(()=>{!gt||gt===hn?.value?.uid||(async()=>{const nt=await Me.ae.getDashboardByUid(gt);nt.dashboard&&rn({value:{uid:nt.dashboard.uid,title:nt.dashboard.title,folderTitle:nt.meta.folderTitle,folderUid:nt.meta.folderUid},label:Ne(nt.meta?.folderTitle,nt.dashboard.title)})})()},[gt]);const un=(0,b.useCallback)(nt=>{rn(nt),Ft?.(nt?.value)},[Ft,rn]);return b.createElement(de.qb,{loadOptions:bt,onChange:un,placeholder:jt,noOptionsMessage:an,value:hn,defaultOptions:!0,...cn})},Ve=({value:gt,onChange:Ft,item:jt})=>{const{placeholder:an,isClearable:cn}=jt?.settings??{},hn=(0,b.useCallback)(rn=>{Ft(rn?.value?.uid)},[Ft]);return b.createElement(Fe,{isClearable:cn,defaultOptions:!0,onChange:hn,placeholder:an,value:gt})};var Ue=e(5205);const it=({value:gt,settings:Ft,onChange:jt,details:an})=>{const cn=(0,N.l4)(),hn=(0,N.wW)(ze);return b.createElement(A.zH,{color:gt??"",onChange:jt,enableNamedColors:Ft?.enableNamedColors!==!1},({ref:rn,showColorPicker:un,hideColorPicker:nt})=>b.createElement("div",{className:hn.spot},b.createElement("div",{className:hn.colorPicker},b.createElement(Ue.b,{ref:rn,onClick:un,onMouseLeave:nt,color:gt?cn.visualization.getColorByName(gt):cn.components.input.borderColor})),an&&b.createElement(b.Fragment,null,gt?b.createElement("span",{className:hn.colorText,onClick:un},gt):b.createElement("span",{className:hn.placeholderText,onClick:un},Ft?.placeholder??"Select color"),Ft?.isClearable&&gt&&b.createElement(O.h,{name:"times",onClick:()=>jt(void 0),tooltip:"Clear settings"}))))},ze=gt=>({spot:(0,M.css)`
      cursor: pointer;
      color: ${gt.colors.text};
      background: ${gt.components.input.background};
      padding: 3px;
      height: ${gt.v1.spacing.formInputHeight}px;
      border: 1px solid ${gt.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      align-content: flex-end;
      &:hover {
        border: 1px solid ${gt.components.input.borderHover};
      }
    `,colorPicker:(0,M.css)`
      padding: 0 ${gt.spacing(1)};
    `,colorText:(0,M.css)`
      flex-grow: 2;
    `,placeholderText:(0,M.css)`
      flex-grow: 2;
      color: ${gt.colors.text.secondary};
    `});var Xe=e(73254),St=e(97898),Bt=e(96227);const zt=({value:gt,onChange:Ft,item:jt,id:an})=>{const cn=(0,N.l4)(),hn=(0,N.wW)(Qt),rn=(0,Xe.QY)(gt?.mode),nt=(jt.settings?.byValueSupport?Xe.WO.list():Xe.WO.list().filter(Pn=>!Pn.isByValue)).map(Pn=>{let pn=Pn.isByValue?" (by value)":"";return{value:Pn.id,label:`${Pn.name}${pn}`,description:Pn.description,isContinuous:Pn.isContinuous,isByValue:Pn.isByValue,component(){return b.createElement(qt,{mode:Pn,theme:cn})}}}),Be=Pn=>{Ft({...gt,mode:Pn.value})},et=Pn=>{Ft({...gt,mode:nn,fixedColor:Pn})},kt=Pn=>{Ft({...gt,mode:nn,seriesBy:Pn})},nn=gt?.mode??St.S.Thresholds;if(nn===St.S.Fixed||nn===St.S.Shades)return b.createElement("div",{className:hn.group},b.createElement(de.Ph,{minMenuHeight:200,options:nt,value:nn,onChange:Be,className:hn.select,inputId:an}),b.createElement(it,{value:gt?.fixedColor,onChange:et}));if(jt.settings?.bySeriesSupport&&rn.isByValue){const Pn=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return b.createElement(b.Fragment,null,b.createElement("div",{style:{marginBottom:cn.spacing(2)}},b.createElement(de.Ph,{minMenuHeight:200,options:nt,value:nn,onChange:Be,inputId:an})),b.createElement(Bt.g,{label:"Color series by"},b.createElement(E.S,{value:gt?.seriesBy??"last",options:Pn,onChange:kt})))}return b.createElement(de.Ph,{minMenuHeight:200,options:nt,value:nn,onChange:Be,inputId:an})},qt=({mode:gt,theme:Ft})=>{if(!gt.getColors)return null;const jt=gt.getColors(Ft).map(Ft.visualization.getColorByName),an={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(gt.isContinuous)an.background=`linear-gradient(90deg, ${jt.join(",")})`;else{let cn="",hn="";for(let rn=0;rn<jt.length;rn++){const un=jt[rn];if(cn==="")cn=`linear-gradient(90deg, ${un} 0%`;else{const Be=rn/(jt.length-1)*100;cn+=`, ${hn} ${Be}%, ${un} ${Be}%`}hn=un}an.background=cn}return b.createElement("div",{style:an})},Qt=gt=>({group:(0,M.css)`
      display: flex;
    `,select:(0,M.css)`
      margin-right: 8px;
      flex-grow: 1;
    `});var yn=e(69733),Zt=e(86467);const re=({value:gt,onChange:Ft,context:jt})=>b.createElement(Zt.d,{links:gt,onChange:Ft,data:jt.data,getSuggestions:()=>jt.getSuggestions?jt.getSuggestions(yn.o3.Values):[]});class Te extends b.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:Ft}=this.props,{settings:jt}=Ft;let an=Ft.settings?.options||[];jt?.getOptions&&(an=await jt.getOptions(this.props.context)),this.state.options!==an&&this.setState({isLoading:!1,options:an})}}componentDidMount(){this.updateOptions()}componentDidUpdate(Ft){const jt=Ft.item?.settings,an=this.props.item?.settings;if(jt!==an)this.updateOptions();else if(an?.getOptions){const cn=Ft.context?.data,hn=this.props.context?.data;cn!==hn&&this.updateOptions()}}render(){const{options:Ft,isLoading:jt}=this.state,{value:an,onChange:cn,item:hn}=this.props,{settings:rn}=hn;return b.createElement(de.NU,{isLoading:jt,value:an,defaultValue:an,allowCustomValue:rn?.allowCustomValue,onChange:un=>{cn(un.map(nt=>nt.value).flatMap(nt=>nt!==void 0?[nt]:[]))},options:Ft})}}var We=e(46108);class Je extends b.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:Ft}=this.props,{settings:jt}=Ft;let an=Ft.settings?.options||[];jt?.getOptions&&(an=await jt.getOptions(this.props.context)),this.state.options!==an&&this.setState({isLoading:!1,options:an})}}componentDidMount(){this.updateOptions()}componentDidUpdate(Ft){const jt=Ft.item?.settings,an=this.props.item?.settings;if(jt!==an)this.updateOptions();else if(an?.getOptions){const cn=Ft.context?.data,hn=this.props.context?.data;cn!==hn&&this.updateOptions()}}render(){const{options:Ft,isLoading:jt}=this.state,{value:an,onChange:cn,item:hn}=this.props,{settings:rn}=hn;let un=Ft.find(nt=>nt.value===an);return!un&&an&&(un={label:`${an}`,value:an}),b.createElement(de.Ph,{isLoading:jt,value:un,defaultValue:an,allowCustomValue:rn?.allowCustomValue,isClearable:rn?.isClearable,onChange:nt=>cn(nt?.value),options:Ft})}}var je=e(52234),pt=e(54173);const ft=({value:gt,onChange:Ft,item:jt,id:an})=>b.createElement(pt.m,{stats:gt,onChange:Ft,allowMultiple:!!jt.settings?.allowMultiple,defaultStat:jt.settings?.defaultStat,inputId:an});var Tt=e(40866),Ye=e(32688);class Ce extends b.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=Ft=>{const{value:jt,onChange:an}=this.props,cn=[...jt];cn.splice(Ft,1),an(cn)},this.onValueChange=(Ft,jt)=>{if("key"in Ft&&Ft.key!=="Enter")return;const{value:an,onChange:cn}=this.props,hn=Ft.currentTarget.value.trim();if(jt<0){hn&&(Ft.currentTarget.value="",cn([...an,hn])),this.setState({showAdd:!1});return}if(!hn)return this.onRemoveString(jt);const rn=[...an];rn[jt]=hn,cn(rn)}}render(){const{value:Ft,item:jt}=this.props,{showAdd:an}=this.state,cn=oe(Ye.config.theme2),hn=jt.settings?.placeholder||"Add text";return b.createElement("div",null,Ft.map((rn,un)=>b.createElement(I.I,{className:cn.textInput,key:`${un}/${rn}`,defaultValue:rn||"",onBlur:nt=>this.onValueChange(nt,un),onKeyDown:nt=>this.onValueChange(nt,un),suffix:b.createElement(F.J,{className:cn.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(un)})})),an?b.createElement(I.I,{autoFocus:!0,className:cn.textInput,placeholder:hn,defaultValue:"",onBlur:rn=>this.onValueChange(rn,-1),onKeyDown:rn=>this.onValueChange(rn,-1),suffix:b.createElement(F.J,{name:"plus-circle"})}):b.createElement(o.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},hn))}}const oe=(0,K.B)(gt=>({textInput:(0,M.css)`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${gt.components.input.borderHover};
      }
    `,trashIcon:(0,M.css)`
      color: ${gt.colors.text.secondary};
      cursor: pointer;

      &:hover {
        color: ${gt.colors.text};
      }
    `}));var pe=e(61805);function Re({value:gt,onChange:Ft,item:jt}){const an=(0,N.wW)(ae);return jt?.settings?.isClearable&&gt!=null?b.createElement("div",{className:an.wrapper},b.createElement("span",{className:an.first},b.createElement(pe.n,{value:gt,onChange:Ft})),b.createElement(O.h,{name:"times",onClick:()=>Ft(void 0),tooltip:"Clear unit selection"})):b.createElement(pe.n,{value:gt,onChange:Ft})}const ae=gt=>({wrapper:(0,M.css)`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:(0,M.css)`
    margin-right: 8px;
    flex-grow: 2;
  `}),ve=()=>{const gt={id:"number",name:"Number",description:"Allows numeric values input",editor:We.w},Ft={id:"slider",name:"Slider",description:"Allows numeric values input",editor:je.p},jt={id:"text",name:"Text",description:"Allows string values input",editor:Tt.A},an={id:"strings",name:"String array",description:"An array of strings",editor:Ce},cn={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(Ea){const{id:ut,...vt}=Ea;return b.createElement(v.r,{...vt,onChange:Et=>Ea.onChange(Et.currentTarget.checked)})}},hn={id:"select",name:"Select",description:"Allows option selection",editor:Je},rn={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:Te},un={id:"radio",name:"Radio",description:"Allows option selection",editor(Ea){return b.createElement(E.S,{...Ea,options:Ea.item.settings?.options})}},nt={id:"unit",name:"Unit",description:"Allows unit input",editor:Re},Be={id:"color",name:"Color",description:"Allows color selection",editor(Ea){return b.createElement(it,{value:Ea.value,onChange:Ea.onChange,settings:Ea.item.settings,details:!0})}},et={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:zt},kt={id:"links",name:"Links",description:"Allows defining data links",editor:re},nn={id:"stats-picker",name:"Stats Picker",editor:ft,description:""},Pn={id:"timezone",name:"Time zone",description:"Time zone selection",editor:P.O},pn={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:S.b};return[jt,gt,Ft,cn,un,hn,nt,kt,nn,an,Pn,et,Be,rn,pn,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:Ve},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:ue},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:j}]},xe=()=>{const gt=["Standard options"],Ft={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:g.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:gt},jt={id:"unit",path:"unit",name:"Unit",description:"",editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:g.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:gt},an={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:g.Oh,settings:{placeholder:"auto"},shouldApply:nn=>nn.type===f.fS.number,category:gt},cn={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:g.Oh,settings:{placeholder:"auto"},shouldApply:nn=>nn.type===f.fS.number,category:gt},hn={id:"decimals",path:"decimals",name:"Decimals",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:g.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:nn=>nn.type===f.fS.number,category:gt},rn={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:g.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:gt},un={id:"links",path:"links",name:"Data links",editor:n.S.get("links").editor,override:n.S.get("links").editor,process:g.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:nn=>nn?nn.length:0},nt={id:"color",path:"color",name:"Color scheme",editor:n.S.get("fieldColor").editor,override:n.S.get("fieldColor").editor,process:g.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:gt},Be={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.S.get("mappings").editor,override:n.S.get("mappings").editor,process:g.uj,settings:{},defaultValue:[],shouldApply:nn=>nn.type!==f.fS.time,category:["Value mappings"],getItemsCount:nn=>nn?nn.length:0},et={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.S.get("thresholds").editor,override:n.S.get("thresholds").editor,process:g.ZN,settings:{},defaultValue:{mode:p.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:nn=>nn?nn.steps.length:0},kt={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:g.W4,shouldApply:()=>!0,settings:{},category:gt};return[jt,an,cn,hn,Ft,nt,rn,un,Be,et,kt]};var Ge=e(50820),at=e(74602);function dt(gt){return Array.from(new Array(gt+1),(Ft,jt)=>jt).filter(Ft=>gt%Ft===0)}var st=e(8741),Pt=e(52436),we=e(77242);const Le=(gt,Ft)=>gt&&(Ft&&!Array.isArray(gt.value)?{...gt,value:ht(gt.value),text:ht(gt.text)}:!Ft&&Array.isArray(gt.value)?{...gt,value:Ke(gt.value),text:Ke(gt.text)}:gt),Ke=gt=>Array.isArray(gt)?gt.length>0?gt[0]:"":gt,ht=gt=>Array.isArray(gt)?gt:[gt];var xt=e(24677),lt=e(45587),Rt=e(88294),Ut=e(78354),Xt=e(8130);function $n(gt,Ft){const jt=[];if(gt?.statistics&&gt?.statistics.length){gt.statistic=gt.statistics[0];for(const an of gt.statistics.splice(1))jt.push({...gt,statistic:an})}for(const an of jt)an.refId=(0,Ut.Hs)(Ft),delete an.statistics,Ft.push(an);return delete gt.statistics,jt}function Mt(gt){const Ft=[];if(gt&&"statistics"in gt&&gt?.statistics?.length){for(const jt of gt.statistics.splice(1)){const{statistics:an,name:cn,...hn}=gt;Ft.push({...hn,statistic:jt,name:`${cn} - ${jt}`})}gt.statistic=gt.statistics[0],Ft.length!==0&&(gt.name=`${gt.name} - ${gt.statistic}`),delete gt.statistics}return Ft}function yt(gt){gt.hasOwnProperty("metricQueryType")||(gt.metricQueryType=Xt.$5.Search),gt.hasOwnProperty("metricEditorMode")||(gt.metricQueryType===Xt.$5.Query?gt.metricEditorMode=Xt.MQ.Code:gt.metricEditorMode=gt.expression?Xt.MQ.Code:Xt.MQ.Builder)}var At=e(68734),Ht=e(3706);n.S.setInit(ve),n.N.setInit(xe);class tn{constructor(Ft){this.dashboard=Ft,(0,h.F)()||(0,h.w)(new Pt.ND)}updateSchema(Ft){let jt,an,cn,hn;const rn=this.dashboard.schemaVersion,un=[];if(this.dashboard.schemaVersion=38,rn!==this.dashboard.schemaVersion){if(rn<2&&(Ft.services&&Ft.services.filter&&(this.dashboard.time=Ft.services.filter.time,this.dashboard.templating.list=Ft.services.filter.list||[]),un.push(nt=>(nt.type==="graphite"&&(nt.type="graph"),nt.type!=="graph"||((0,t.isBoolean)(nt.legend)&&(nt.legend={show:nt.legend}),nt.grid&&(nt.grid.min&&(nt.grid.leftMin=nt.grid.min,delete nt.grid.min),nt.grid.max&&(nt.grid.leftMax=nt.grid.max,delete nt.grid.max)),nt.y_format&&(nt.y_formats||(nt.y_formats=[]),nt.y_formats[0]=nt.y_format,delete nt.y_format),nt.y2_format&&(nt.y_formats||(nt.y_formats=[]),nt.y_formats[1]=nt.y2_format,delete nt.y2_format)),nt))),rn<3){let nt=this.dashboard.getNextPanelId();un.push(Be=>(Be.id||(Be.id=nt,nt+=1),Be))}if(rn<4&&un.push(nt=>(nt.type!=="graph"||((0,t.each)(nt.aliasYAxis,(Be,et)=>{nt.seriesOverrides=[{alias:et,yaxis:Be}]}),delete nt.aliasYAxis),nt)),rn<6){const nt=(0,t.find)(Ft.pulldowns,{type:"annotations"});for(nt&&(this.dashboard.annotations={list:nt.annotations||[]}),jt=0;jt<this.dashboard.templating.list.length;jt++){const Be=this.dashboard.templating.list[jt];Be.datasource===void 0&&(Be.datasource=null),Be.type==="filter"&&(Be.type="query"),Be.type===void 0&&(Be.type="query"),Be.allFormat===void 0&&(Be.allFormat="glob")}}if(rn<7&&(Ft.nav&&Ft.nav.length&&(this.dashboard.timepicker=Ft.nav[0]),un.push(nt=>((0,t.each)(nt.targets,Be=>{Be.refId||(Be.refId=nt.getNextQueryLetter&&nt.getNextQueryLetter())}),nt))),rn<8&&un.push(nt=>((0,t.each)(nt.targets,Be=>{Be.fields&&Be.tags&&Be.groupBy&&(Be.rawQuery?(delete Be.fields,delete Be.fill):(Be.select=(0,t.map)(Be.fields,et=>{const kt=[];return kt.push({type:"field",params:[et.name]}),kt.push({type:et.func,params:[]}),et.mathExpr&&kt.push({type:"math",params:[et.mathExpr]}),et.asExpr&&kt.push({type:"alias",params:[et.asExpr]}),kt}),delete Be.fields,(0,t.each)(Be.groupBy,et=>{et.type==="time"&&et.interval&&(et.params=[et.interval],delete et.interval),et.type==="tag"&&et.key&&(et.params=[et.key],delete et.key)}),Be.fill&&(Be.groupBy.push({type:"fill",params:[Be.fill]}),delete Be.fill)))}),nt)),rn<9&&un.push(nt=>{if(nt.type!=="singlestat"&&nt.thresholds!=="")return nt;if(nt.thresholds){const Be=nt.thresholds.split(",");Be.length>=3&&(Be.shift(),nt.thresholds=Be.join(","))}return nt}),rn<10&&un.push(nt=>(nt.type!=="table"||(0,t.each)(nt.styles,Be=>{if(Be.thresholds&&Be.thresholds.length>=3){const et=Be.thresholds;et.shift(),Be.thresholds=et}}),nt)),rn<12&&(0,t.each)(this.dashboard.getVariables(),nt=>{nt.refresh&&(nt.refresh=1),nt.refresh||(nt.refresh=0),nt.hideVariable?nt.hide=2:nt.hideLabel&&(nt.hide=1)}),rn<12&&un.push(nt=>(nt.type!=="graph"||!nt.grid||nt.yaxes||(nt.yaxes=[{show:nt["y-axis"],min:nt.grid.leftMin,max:nt.grid.leftMax,logBase:nt.grid.leftLogBase,format:nt.y_formats[0],label:nt.leftYAxisLabel},{show:nt["y-axis"],min:nt.grid.rightMin,max:nt.grid.rightMax,logBase:nt.grid.rightLogBase,format:nt.y_formats[1],label:nt.rightYAxisLabel}],nt.xaxis={show:nt["x-axis"]},delete nt.grid.leftMin,delete nt.grid.leftMax,delete nt.grid.leftLogBase,delete nt.grid.rightMin,delete nt.grid.rightMax,delete nt.grid.rightLogBase,delete nt.y_formats,delete nt.leftYAxisLabel,delete nt.rightYAxisLabel,delete nt["y-axis"],delete nt["x-axis"]),nt)),rn<13&&un.push(nt=>{if(nt.type!=="graph"||!nt.grid)return nt;nt.thresholds||(nt.thresholds=[]);const Be={},et={};return nt.grid.threshold1!==null&&(Be.value=nt.grid.threshold1,nt.grid.thresholdLine?(Be.line=!0,Be.lineColor=nt.grid.threshold1Color,Be.colorMode="custom"):(Be.fill=!0,Be.fillColor=nt.grid.threshold1Color,Be.colorMode="custom")),nt.grid.threshold2!==null&&(et.value=nt.grid.threshold2,nt.grid.thresholdLine?(et.line=!0,et.lineColor=nt.grid.threshold2Color,et.colorMode="custom"):(et.fill=!0,et.fillColor=nt.grid.threshold2Color,et.colorMode="custom")),(0,t.isNumber)(Be.value)&&((0,t.isNumber)(et.value)?Be.value>et.value?(Be.op=et.op="lt",nt.thresholds.push(Be),nt.thresholds.push(et)):(Be.op=et.op="gt",nt.thresholds.push(Be),nt.thresholds.push(et)):(Be.op="gt",nt.thresholds.push(Be))),delete nt.grid.threshold1,delete nt.grid.threshold1Color,delete nt.grid.threshold2,delete nt.grid.threshold2Color,delete nt.grid.thresholdLine,nt}),rn<14&&(this.dashboard.graphTooltip=Ft.sharedCrosshair?1:0),rn<16&&this.upgradeToGridLayout(Ft),rn<17&&un.push(nt=>{if(nt.minSpan){const Be=at.cz/nt.minSpan,et=dt(at.cz);nt.maxPerRow=et[(0,t.findIndex)(et,kt=>kt>Be)-1]}return delete nt.minSpan,nt}),rn<18&&un.push(nt=>(nt["options-gauge"]&&(nt.options=nt["options-gauge"],nt.options.valueOptions={unit:nt.options.unit,stat:nt.options.stat,decimals:nt.options.decimals,prefix:nt.options.prefix,suffix:nt.options.suffix},nt.options.thresholds&&nt.options.thresholds.reverse(),delete nt.options.options,delete nt.options.unit,delete nt.options.stat,delete nt.options.decimals,delete nt.options.prefix,delete nt.options.suffix,delete nt["options-gauge"]),nt)),rn<19&&un.push(nt=>(nt.links&&(0,t.isArray)(nt.links)&&(nt.links=nt.links.map(Tn)),nt)),rn<20){const nt=Be=>({...Be,url:ln(Be.url)});un.push(Be=>(Be.options&&Be.options.dataLinks&&(0,t.isArray)(Be.options.dataLinks)&&(Be.options.dataLinks=Be.options.dataLinks.map(nt)),Be.options&&Be.options.fieldOptions&&Be.options.fieldOptions.defaults&&(Be.options.fieldOptions.defaults.links&&(0,t.isArray)(Be.options.fieldOptions.defaults.links)&&(Be.options.fieldOptions.defaults.links=Be.options.fieldOptions.defaults.links.map(nt)),Be.options.fieldOptions.defaults.title&&(Be.options.fieldOptions.defaults.title=ln(Be.options.fieldOptions.defaults.title))),Be))}if(rn<21){const nt=Be=>({...Be,url:Be.url.replace(/__series.labels/g,"__field.labels")});un.push(Be=>(Be.options&&Be.options.dataLinks&&(0,t.isArray)(Be.options.dataLinks)&&(Be.options.dataLinks=Be.options.dataLinks.map(nt)),Be.options&&Be.options.fieldOptions&&Be.options.fieldOptions.defaults&&Be.options.fieldOptions.defaults.links&&(0,t.isArray)(Be.options.fieldOptions.defaults.links)&&(Be.options.fieldOptions.defaults.links=Be.options.fieldOptions.defaults.links.map(nt)),Be))}if(rn<22&&un.push(nt=>(nt.type!=="table"||(0,t.each)(nt.styles,Be=>{Be.align="auto"}),nt)),rn<23)for(const nt of this.dashboard.templating.list){if(!(0,we.U4)(nt))continue;const{multi:Be,current:et}=nt;(0,r.Q)(et)||(nt.current=Le(et,Be))}if(rn<24&&un.push(nt=>{const Be=nt.type==="table";if(Be&&!nt.styles)return nt;const et=nt.table==="table2";return!Be||et||(nt.type=Be?"table-old":"table"),nt}),rn<25,rn<26&&un.push(nt=>(nt.type==="text2"&&(nt.type="text",delete nt.options.angular),nt)),rn<27&&(this.removeRepeatedPanels(),this.dashboard.templating.list=this.dashboard.templating.list.map(nt=>{if(!(0,we.VC)(nt))return nt;const Be={...nt};return Be.current={selected:!0,text:Be.query??"",value:Be.query??""},Be.options=[Be.current],Be.hide===At.bU.dontHide||Be.hide===At.bU.hideLabel?{...Be,type:"textbox"}:Be})),rn<28){un.push(nt=>nt.type==="singlestat"?Wn(nt):nt);for(const nt of this.dashboard.templating.list)nt.tags&&delete nt.tags,nt.tagsQuery&&delete nt.tagsQuery,nt.tagValuesQuery&&delete nt.tagValuesQuery,nt.useTags&&delete nt.useTags}if(rn<29)for(const nt of this.dashboard.templating.list)nt.type==="query"&&(nt.refresh!==1&&nt.refresh!==2&&(nt.refresh=1),nt.options?.length&&(nt.options=[]));if(rn<30&&(un.push(ia),un.push(Na)),rn<31&&un.push(nt=>{if(nt.transformations){for(const Be of nt.transformations)if(Be.id===m.r.id)return Nn(nt,m.r.id,{id:u.R.id,options:{}})}return nt}),rn<32,rn<33&&un.push(nt=>{if(nt.datasource=On(nt.datasource,{returnDefaultAsNull:!0}),!nt.targets)return nt;for(const Be of nt.targets){const et=On(Be.datasource,{returnDefaultAsNull:!0});et!=null&&(Be.datasource=et)}return nt}),rn<34&&(un.push(nt=>(this.migrateCloudWatchQueries(nt),nt)),this.migrateCloudWatchAnnotationQuery()),rn<35&&un.push(Ha),rn<36){for(const Be of this.dashboard.annotations.list)Be.datasource=On(Be.datasource,{returnDefaultAsNull:!1});const nt=(0,h.F)().getInstanceSettings(null);if(nt){for(const Be of this.dashboard.templating.list)Be.type==="query"&&Be.datasource===null&&(Be.datasource=(0,a.iU)(nt));un.push(Be=>{if(Be.targets){let et=!1;Be.datasource==null&&Be.targets.length>0&&(Be.datasource=(0,a.iU)(nt),et=!0);for(const kt of Be.targets)(kt.datasource==null||kt.datasource.uid==null)&&(Be.datasource?.uid!==xt.D?kt.datasource={...Be.datasource}:kt.datasource=On(kt.datasource,{returnDefaultAsNull:!1})),et&&kt.datasource?.uid!=="__expr__"&&(Be.datasource=kt.datasource)}return Be})}}if(rn<37&&un.push(nt=>(nt.options?.legend&&(nt.options.legend.displayMode==="hidden"||nt.options.legend.showLegend===!1)?(nt.options.legend.displayMode="list",nt.options.legend.showLegend=!1):nt.options?.legend&&(nt.options.legend={...nt.options?.legend,showLegend:!0}),nt)),rn<38&&un.push(nt=>{if(nt.type==="table"&&nt.fieldConfig!==void 0){const Be=nt.fieldConfig.defaults?.custom?.displayMode;if(Be!==void 0&&(nt.fieldConfig.defaults.custom.cellOptions=(0,x.q7)(Be),delete nt.fieldConfig.defaults.custom.displayMode),nt.fieldConfig?.overrides)for(const et of nt.fieldConfig.overrides)for(let kt=0;kt<et.properties?.length;kt++){let nn=et.properties[kt].value;et.properties[kt].id==="custom.displayMode"&&(et.properties[kt].id="custom.cellOptions",et.properties[kt].value=(0,x.q7)(nn))}}return nt}),un.length!==0)for(an=0;an<this.dashboard.panels.length;an++)for(cn=0;cn<un.length;cn++){this.dashboard.panels[an]=un[cn].call(this,this.dashboard.panels[an]);const nt=this.dashboard.panels[an].panels;if(nt)for(hn=0;hn<nt.length;hn++)nt[hn]=un[cn].call(this,nt[hn])}}}removeRepeatedPanels(){const Ft=[];for(const jt of this.dashboard.panels)jt.repeatPanelId||jt.repeatByRow||(jt.type==="row"&&Array.isArray(jt.panels)&&(jt.panels=jt.panels.filter(an=>!an.repeatPanelId)),Ft.push(jt));this.dashboard.panels=Ft}migrateCloudWatchQueries(Ft){for(const jt of Ft.targets||[])if(da(jt)&&(yt(jt),jt.hasOwnProperty("statistics"))){const an=$n(jt,[...Ft.targets]);for(const cn of an)Ft.targets.push(cn)}}migrateCloudWatchAnnotationQuery(){for(const Ft of this.dashboard.annotations.list)if(Da(Ft)){const jt=Mt(Ft);for(const an of jt)this.dashboard.annotations.list.push(an)}}upgradeToGridLayout(Ft){let jt=0;const an=at.cz/12;let hn=(0,t.max)((0,t.flattenDeep)((0,t.map)(Ft.rows,un=>(0,t.map)(un.panels,"id"))))+1;if(!Ft.rows)return;const rn=(0,t.some)(Ft.rows,un=>un.collapse||un.showTitle||un.repeat);for(const un of Ft.rows){if(un.repeatIteration)continue;const nt=un.height||at.b0,Be=gn(nt),et={};let kt;rn&&(et.id=hn,et.type="row",et.title=un.title,et.collapsed=un.collapse,et.repeat=un.repeat,et.panels=[],et.gridPos={x:0,y:jt,w:at.cz,h:Be},kt=new Ht.rY(et),hn++,jt++);const nn=new mn(Be,at.cz,jt);for(const Pn of un.panels){Pn.span=Pn.span||at.kh,Pn.minSpan&&(Pn.minSpan=Math.min(at.cz,at.cz/12*Pn.minSpan));const pn=Math.floor(Pn.span)*an,In=Pn.height?gn(Pn.height):Be,Qn=nn.getPanelPosition(In,pn);jt=nn.yPos,Pn.gridPos={x:Qn.x,y:jt+Qn.y,w:pn,h:In},nn.addPanel(Pn.gridPos),delete Pn.span,kt&&et.collapsed?kt.panels?.push(Pn):this.dashboard.panels.push(new Ht.rY(Pn))}kt&&this.dashboard.panels.push(kt),kt&&et.collapsed||(jt+=Be)}}}function gn(gt){return(0,t.isString)(gt)&&(gt=parseInt(gt.replace("px",""),10)),gt<at.AV&&(gt=at.AV),Math.ceil(gt/(at.K3+at.hD))}class mn{constructor(Ft,jt=at.cz,an=0){this.area=new Array(jt).fill(0),this.yPos=an,this.height=Ft}reset(){this.area.fill(0)}addPanel(Ft){for(let jt=Ft.x;jt<Ft.x+Ft.w;jt++)(!this.area[jt]||Ft.y+Ft.h-this.yPos>this.area[jt])&&(this.area[jt]=Ft.y+Ft.h-this.yPos);return this.area}getPanelPosition(Ft,jt,an=!1){let cn,hn,rn;for(let un=this.area.length-1;un>=0&&this.height-this.area[un]>0;un--)if(hn===void 0)hn=un;else if(un<this.area.length-1&&this.area[un]<=this.area[un+1])cn=un;else break;if(cn!==void 0&&hn!==void 0&&hn-cn>=jt-1){const un=(0,t.max)(this.area.slice(cn));rn={x:cn,y:un}}else return an?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(Ft,jt,!0));return rn}}function Tn(gt){let Ft=gt.url;return!Ft&&gt.dashboard&&(Ft=`dashboard/db/${st.Z.slugifyForUrl(gt.dashboard)}`),!Ft&&gt.dashUri&&(Ft=`dashboard/${gt.dashUri}`),Ft||(Ft="/"),gt.keepTime&&(Ft=i.Cj.appendQueryToUrl(Ft,`$${y.W.keepTime}`)),gt.includeVars&&(Ft=i.Cj.appendQueryToUrl(Ft,`$${y.W.includeVars}`)),gt.params&&(Ft=i.Cj.appendQueryToUrl(Ft,gt.params)),{url:Ft,title:gt.title,targetBlank:gt.targetBlank}}function ln(gt){const Ft=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return gt.replace(Ft,(jt,an,cn,hn,rn,un)=>an?"__series.name":cn?"${__series.name}":hn?"__value.time":rn?"__field.name":un?"${__field.name}":jt)}function Wn(gt){if(Ge.config.panels["grafana-singlestat-panel"])return gt.type="grafana-singlestat-panel",gt;let Ft=!1;return gt.changePlugin||(Ft=!0,gt=new Ht.rY(gt)),gt.plugin={angularPanelCtrl:{}},gt.gauge?.show?(lt.plugin.meta=Ge.config.panels.gauge,gt.changePlugin(lt.plugin)):(Rt.plugin.meta=Ge.config.panels.stat,gt.changePlugin(Rt.plugin)),Ft?gt.getSaveModel():gt}function On(gt,Ft){if(Ft.returnDefaultAsNull&&(gt==null||gt==="default"))return null;if((0,a.cv)(gt))return gt;const jt=(0,h.F)().getInstanceSettings(gt);return jt?(0,a.iU)(jt):{uid:gt||void 0}}function Nn(gt,Ft,jt){if(gt.transformations){const an=[];for(const cn of gt.transformations)an.push(cn),cn.id===Ft&&an.push({...jt});gt.transformations=an}return gt}function ia(gt){const Ft=gt.fieldConfig;if(!Ft)return gt;if(Ft.defaults&&Ft.defaults.mappings&&(Ft.defaults.mappings=ja(Ft.defaults.mappings,Ft.defaults.thresholds)),Array.isArray(Ft.overrides))for(const jt of Ft.overrides)for(const an of jt.properties)an.id==="mappings"&&(an.value=ja(an.value));return gt}function da(gt){return gt.hasOwnProperty("dimensions")&&gt.hasOwnProperty("namespace")&&gt.hasOwnProperty("region")&&gt.hasOwnProperty("metricName")}function Da(gt){return gt.hasOwnProperty("dimensions")&&gt.hasOwnProperty("namespace")&&gt.hasOwnProperty("region")&&gt.hasOwnProperty("prefixMatching")&&gt.hasOwnProperty("statistics")}function ja(gt,Ft){if(!gt)return;const jt={type:c.H.ValueToText,options:{}},an=[];for(const cn of gt){if(cn.type&&cn.options){cn.type===c.H.ValueToText?jt.options={...jt.options,...cn.options}:an.push(cn);continue}let hn;const rn=parseFloat(cn.text);if(Ft&&!isNaN(rn)){const un=(0,l.m1)(rn,Ft.steps);un&&un.color&&(hn=un.color)}switch(cn.type){case 1:cn.value!=null&&(cn.value==="null"?an.push({type:c.H.SpecialValue,options:{match:c.e.Null,result:{text:cn.text,color:hn}}}):jt.options[String(cn.value)]={text:cn.text,color:hn});break;case 2:an.push({type:c.H.RangeToText,options:{from:+cn.from,to:+cn.to,result:{text:cn.text,color:hn}}});break}}return Object.keys(jt.options).length>0&&an.unshift(jt),an}function Na(gt){return(gt.type==="timeseries"||gt.type==="xychart")&&gt.options.tooltipOptions&&(gt.options={...gt.options,tooltip:gt.options.tooltipOptions},delete gt.options.tooltipOptions),gt}function Ha(gt){return gt.type==="timeseries"&&gt.fieldConfig?.defaults.custom?.axisPlacement===C.LB.Hidden&&(gt.fieldConfig={...gt.fieldConfig,overrides:[...gt.fieldConfig.overrides,{matcher:{id:d.mi.byType,options:f.fS.time},properties:[{id:"custom.axisPlacement",value:C.LB.Auto}]}]}),gt}},19016:(X,L,e)=>{"use strict";e.d(L,{f:()=>_});var t=e(86832),n=e(31544),r=e(91395),a=e(48069),i=e(92403),y=e(32688),c=e(77014),l=e(59561),d=e(74602),f=e(97125);function m(k){return(0,t.isArray)(k)?k.map(m):(0,t.isPlainObject)(k)?Object.keys(k).sort().reduce((H,j)=>{const z=k[j];return z!=null&&(H[j]=m(z)),H},{}):k}var u=e(2106),h=e(16261),C=e(73371),x=e(45882),b=e(21527),g=e(73431),p=e(21308),v=e(74600),E=e(68734),P=e(49955),S=e(6278),M=e(75397);const R=new Set(["gridPos","title","description","transparent"]);function I(k,H){const j=[],z={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:j};let F=0;const J=new Map;for(let Q of H){let{id:Z}=Q;Z||(F||(F=O([k,H])),Z=F++,Q={...Q,id:Z}),J.set(Z,Q)}for(const Q of k){const Z=J.get(Q.id);if(!Z){z.changed=!0,z.actions.remove.push(Q.id),Q.destroy();continue}if(J.delete(Q.id),Z===Q){j.push(Q),z.actions.noop.push(Q.id);continue}if(Q.type===Z.type){const ee=Q.getSaveModel();let de=!0,Pe=!1;for(const[ye,he]of Object.entries(Z))if(!(0,t.isEqualWith)(he,ee[ye],A))if(z.changed=!0,de=!1,R.has(ye))Q[ye]=he,Pe=!0;else{Pe=!1;break}if(de){j.push(Q),z.actions.noop.push(Q.id);continue}if(Pe){j.push(Q),z.actions.update.push(Q.id);continue}}Q.destroy();const ne=new M.r(Z);ne.key=`${ne.id}-update-${Date.now()}`,j.push(ne),z.changed=!0,z.actions.replace.push(Q.id)}for(const Q of J.values())j.push(new M.r(Q)),z.changed=!0,z.actions.add.push(Q.id);return z}function A(k,H){if(k==null&&(H===1/0||H===-1/0||H==null)||H==null&&(k===1/0||k===-1/0||k==null))return!0}function O(k){let H=0;for(const j of k)for(const z of j)z.id>H&&(H=z.id);return H+1}var N=e(36063),o=e(3706);function w(k,H){return k.repeatDirection===d.yM?!1:H.gridPos.x>=k.gridPos.x+k.gridPos.w&&H.gridPos.y===k.gridPos.y}function K(k){for(const H of k)if(delete H.scopedVars,H.panels?.length)for(const j of H.panels)delete j.scopedVars}const V=class{constructor(k,H,j){if(this.timeRangeUpdatedDuringEdit=!1,this.originalDashboard=null,this.getVariablesFromState=j?.getVariablesFromState??x.gt,this.events=new r.F,this.id=k.id||null,this.uid=k.uid||null,this.revision=k.revision??void 0,this.title=k.title??"No Title",this.description=k.description,this.tags=k.tags??[],this.timezone=k.timezone??"",this.weekStart=k.weekStart??"",this.editable=k.editable!==!1,this.graphTooltip=k.graphTooltip||0,this.time=k.time??{from:"now-6h",to:"now"},this.timepicker=k.timepicker??{},this.liveNow=!!k.liveNow,this.templating=this.ensureListExist(k.templating),this.annotations=this.ensureListExist(k.annotations),this.refresh=k.refresh||"",this.snapshot=k.snapshot,this.schemaVersion=k.schemaVersion??0,this.fiscalYearStartMonth=k.fiscalYearStartMonth??0,this.version=k.version??0,this.links=k.links??[],this.gnetId=k.gnetId||null,this.panels=(0,t.map)(k.panels??[],z=>new o.rY(z)),this.originalDashboard=k,this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(H),this.updateSchema(k),j?.autoMigrateOldPanels||!y.config.angularSupportEnabled||y.config.featureToggles.autoMigrateOldPanels)for(const z of this.panelIterator()){const F=o.G7[z.type];!z.autoMigrateFrom&&F&&(z.autoMigrateFrom=z.type,z.type=F)}this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(p.h$.subscribe(E.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(p.h$.subscribe(E.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(p.h$.subscribe(E.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(H=>H.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:l.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(k){k=k||{},k.canShare=k.canShare!==!1,k.canSave=k.canSave!==!1,k.canStar=k.canStar!==!1,k.canEdit=k.canEdit!==!1,k.canDelete=k.canDelete!==!1,k.showSettings=k.canEdit,k.canMakeEditable=k.canSave&&!this.editable,k.hasUnsavedFolderChange=!1,this.editable||(k.canEdit=!1,k.canDelete=!1,k.canSave=!1),this.meta=k}getSaveModelClone(k){const H=(0,t.defaults)(k||{},{saveVariables:!0,saveTimerange:!0});let j={};for(const z in this)V.nonPersistedProperties[z]||!this.hasOwnProperty(z)||(j[z]=(0,t.cloneDeep)(this[z]));return this.updateTemplatingSaveModelClone(j,H),H.saveTimerange||(j.time=this.originalTime),j.panels=this.getPanelSaveModels(),j=m(j),j.getVariables=()=>j.templating.list,j}updatePanels(k){const H=I(this.panels,k??[]);return H.changed&&(this.panels=H.panels??[],this.sortPanelsByGridPos(),this.events.publish(new g._B)),H}getPanelSaveModels(){return this.panels.filter(k=>this.isSnapshotTruthy()||!(k.type==="add-panel"||k.repeatPanelId||k.repeatedByRow)).map(k=>{if(k.libraryPanel){const{id:H,title:j,libraryPanel:z,gridPos:F}=k;return{id:H,title:j,gridPos:F,libraryPanel:{uid:z.uid,name:z.name}}}return this.panelInEdit&&this.panelInEdit.id===k.id?this.panelInEdit.getSaveModel():k.getSaveModel()}).map(k=>(this.isSnapshotTruthy()||(delete k.scopedVars,k.type==="row"&&k.panels&&k.panels.length>0&&(k.panels=k.panels.filter(H=>!H.repeatPanelId).map(H=>(delete H.scopedVars,H)))),k))}updateTemplatingSaveModelClone(k,H){const j=this.originalTemplating,z=this.getVariablesFromState(this.uid);if(k.templating={list:z.map(F=>h.z.get(F.type).getSaveModel(F,H.saveVariables))},!H.saveVariables)for(const F of k.templating.list){const J=j.find(({name:Q,type:Z})=>Q===F.name&&Z===F.type);J&&(F.type==="adhoc"?F.filters=J.filters:F.current=J.current)}}timeRangeUpdated(k){this.events.publish(new c.md(k)),(0,v.WI)((0,C.DU)(this.uid,k)),this.panelInEdit&&(this.timeRangeUpdatedDuringEdit=!0)}startRefresh(k={refreshAll:!0,panelIds:[]}){if(this.events.publish(new c.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(k.refreshAll||k.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const H of this.panels)!this.otherPanelInFullscreen(H)&&(k.refreshAll||k.panelIds.includes(H.id))&&H.refresh()}render(){this.events.publish(new g._z);for(const k of this.panels)k.render()}panelInitialized(k){const H=k.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(k)&&!H&&k.refresh()}otherPanelInFullscreen(k){return(this.panelInEdit||this.panelInView)&&!(k.isViewing||k.isEditing)}initEditPanel(k){return(0,S.$t)().stopAutoRefresh(),this.panelInEdit=k.getEditClone(),this.timeRangeUpdatedDuringEdit=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,S.$t)().resumeAutoRefresh(),(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEdit)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEdit}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEdit=!1)}initViewPanel(k){this.panelInView=k,k.setIsViewing(!0)}exitViewPanel(k){this.panelInView=void 0,k.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveUniqueIds(){const k=new Set;let H=this.getNextPanelId();for(const j of this.panelIterator())(!j.id||k.has(j.id))&&(j.id=H++),k.add(j.id)}ensureListExist(k={}){return k.list??=[],k}getNextPanelId(){let k=0;for(const H of this.panelIterator())H.id>k&&(k=H.id);return k+1}*panelIterator(){for(const k of this.panels){yield k;const H=k.panels??[];for(const j of H)yield j}}forEachPanel(k){for(let H=0;H<this.panels.length;H++)k(this.panels[H],H)}getPanelById(k){return this.panelInEdit&&this.panelInEdit.id===k?this.panelInEdit:this.panels.find(H=>H.id===k)??null}canEditPanel(k){return!!(this.meta.canEdit&&k&&!k.repeatPanelId&&k.type!=="row")}canEditPanelById(k){return this.canEditPanel(this.getPanelById(k))}addPanel(k){k.id=this.getNextPanelId(),this.panels.unshift(new o.rY(k)),this.sortPanelsByGridPos(),this.events.publish(new g._B)}updateMeta(k){this.meta={...this.meta,...k},this.events.publish(new g.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((k,H)=>k.gridPos.y===H.gridPos.y?k.gridPos.x-H.gridPos.x:k.gridPos.y-H.gridPos.y)}clearUnsavedChanges(){for(const k of this.panels)k.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0)}hasUnsavedChanges(){return!!this.panels.find(H=>H.hasChanged)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;K(this.panels);const k=this.panels.filter(H=>(!H.repeat||H.repeatedByRow)&&H.repeatPanelId);(0,t.pull)(this.panels,...k),k.map(H=>H.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let k=0;k<this.panels.length;k++){const H=this.panels[k];H.repeat&&this.repeatPanel(H,k)}this.sortPanelsByGridPos(),this.events.publish(new g._B)}}cleanUpRowRepeats(k){const H=k.map(z=>z.id),j=k.filter(z=>!z.repeat&&z.repeatPanelId&&H.includes(z.repeatPanelId));(0,t.pull)(k,...j),(0,t.pull)(this.panels,...j)}processRowRepeats(k){if(this.isSnapshotTruthy()||!this.hasVariables())return;let H=k.panels??[];if(!k.collapsed){const j=this.panels.findIndex(z=>z.id===k.id);H=this.getRowPanels(j)}this.cleanUpRowRepeats(H);for(const j of H)if(j.repeat){const z=this.panels.findIndex(F=>F.id===j.id);this.repeatPanel(j,z)}}getPanelRepeatClone(k,H,j){if(H===0)return k;const z=k.getSaveModel();z.id=this.getNextPanelId();const F=new o.rY(z);return this.panels.splice(j+H,0,F),F.repeatPanelId=k.id,F.repeat=void 0,this.panelInView?.id===F.id&&(F.setIsViewing(!0),this.panelInView=F),F}getRowRepeatClone(k,H,j){if(H===0){if(!k.collapsed){const Q=this.getRowPanels(j);k.panels=Q}return k}const z=new o.rY(k.getSaveModel());let F,J;return k.collapsed?(F=(0,t.cloneDeep)(k.panels)??[],z.panels=F,J=j+H):(F=this.getRowPanels(j),z.panels=F.map(Q=>Q.getSaveModel()),J=j+(F.length+1)*H),this.panels.splice(J,0,z),this.updateRepeatedPanelIds(z),z}repeatPanel(k,H){const j=this.getPanelRepeatVariable(k);if(!j)return;if(k.type==="row"){this.repeatRow(k,H,j);return}const z=this.getSelectedVariableOptions(j),F=k.maxPerRow||4;let J=0,Q=k.gridPos.y;for(let ne=0;ne<z.length;ne++){const ee=z[ne];let de;de=this.getPanelRepeatClone(k,ne,H),de.scopedVars??={},de.scopedVars[j.name]=ee,k.repeatDirection===d.OA?(ne>0&&(Q+=de.gridPos.h),de.gridPos.y=Q):(de.gridPos.w=Math.max(d.cz/z.length,d.cz/F),de.gridPos.x=J,de.gridPos.y=Q,J+=de.gridPos.w,J+de.gridPos.w>d.cz&&(J=0,Q+=de.gridPos.h))}const Z=Q-k.gridPos.y;if(Z>0){const ne=H+z.length;for(const ee of this.panels.slice(ne))w(k,ee)||(ee.gridPos.y+=Z)}}repeatRow(k,H,j){const z=this.getSelectedVariableOptions(j);for(let F=0;F<z.length;F++){const J=z[F],Q=this.getRowRepeatClone(k,F,H);$(Q,j,J);const Z=this.getRowHeight(Q),ne=Q.panels||[];let ee;if(k.collapsed){for(const de of ne)$(de,j,J),F>0&&this.updateRepeatedPanelIds(de,!0);Q.gridPos.y+=F,ee=H+F+1}else{const de=H+(ne.length+1)*F+1;ne.forEach((Pe,ye)=>{if($(Pe,j,J),F>0){const he=new o.rY(Pe);this.updateRepeatedPanelIds(he,!0),he.gridPos.y+=Z*F,this.panels.splice(de+ye,0,he)}}),Q.panels=[],Q.gridPos.y+=Z*F,ee=de+ne.length}if(z.length>1)for(const de of this.panels.slice(ee))de.gridPos.y+=Z}}updateRepeatedPanelIds(k,H){return k.repeatPanelId=k.id,k.id=this.getNextPanelId(),H?k.repeatedByRow=!0:k.repeat=void 0,k}getSelectedVariableOptions(k){let H;return(0,P.HY)(k)?H=k.options.slice(1,k.options.length):H=(0,t.filter)(k.options,{selected:!0}),H}getRowHeight(k){if(!k.panels||k.panels.length===0)return 0;if(k.collapsed)return 1;const H=(0,t.maxBy)(k.panels,({gridPos:j})=>j.y+j.h).gridPos;return H.y+H.h-k.gridPos.y}removePanel(k){this.panels=this.panels.filter(H=>H!==k),this.events.publish(new g._B)}removeRow(k,H){(!H&&k.collapsed||H&&!k.collapsed)&&this.toggleRow(k),this.removePanel(k)}expandRows(){const k=this.panels.filter(H=>H.type==="row"&&H.collapsed);for(const H of k)this.toggleRow(H)}collapseRows(){const k=this.panels.filter(H=>H.type==="row"&&!H.collapsed);for(const H of k)this.toggleRow(H)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(k=>k.hide!==2)||this.annotations.list.some(k=>!k.hide)}getPanelInfoById(k){const H=this.panels.findIndex(j=>j.id===k);return H>=0?{panel:this.panels[H],index:H}:null}duplicatePanel(k){const H=k.getSaveModel();return H.id=this.getNextPanelId(),delete H.repeat,delete H.repeatIteration,delete H.repeatPanelId,delete H.scopedVars,H.alert&&delete H.thresholds,delete H.alert,k.gridPos.x+k.gridPos.w*2<=d.cz?H.gridPos.x+=k.gridPos.w:H.gridPos.y+=k.gridPos.h,this.addPanel(H),H}formatDate(k,H){return(0,a.dq)(k,{format:H,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const k of this.panels)k.destroy()}toggleRow(k){const H=(0,t.indexOf)(this.panels,k);if(!k.collapsed){const J=this.getRowPanels(H);(0,t.pull)(this.panels,...J),k.panels=J.map(Q=>Q.getSaveModel()),k.collapsed=!0,J.some(Q=>Q.hasChanged)&&k.configRev++,this.events.publish(new g._B);return}k.collapsed=!1;const j=k.panels??[],z=j.some(J=>J.repeat),F=k.repeat;if(j.length>0){const Q=(j[0].gridPos.y??k.gridPos.y)-(k.gridPos.y+k.gridPos.h);let Z=H+1,ne=k.gridPos.y;for(const de of j){if(F){const Pe=this.getPanelRepeatVariable(k);if(de.scopedVars??={},Pe){const ye=this.getSelectedVariableOptions(Pe);de.scopedVars={...de.scopedVars,[Pe.name]:ye[0]}}}de.gridPos.y??(de.gridPos.y=k.gridPos.y),de.gridPos.y-=Q,this.panels.splice(Z,0,new o.rY(de)),Z+=1,ne=Math.max(ne,de.gridPos.y+de.gridPos.h)}const ee=ne-k.gridPos.y-1;for(const de of this.panels.slice(Z))de.gridPos.y+=ee;k.panels=[],z&&this.processRowRepeats(k)}this.sortPanelsByGridPos(),this.events.publish(new g._B)}getRowPanels(k){const H=this.panels.slice(k+1),j=H.findIndex(F=>F.type==="row");return H.slice(0,j>=0?j:this.panels.length)}on(k,H){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(k,H)}off(k,H){console.log("DashboardModel.off is deprecated"),this.events.off(k,H)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(k){return(0,a.E8)(k,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:f.Vt?.user?.timezone}updateSchema(k){new N.o(this).updateSchema(k)}resetOriginalTime(){this.originalTime=(0,t.cloneDeep)(this.time)}hasTimeChanged(){const{time:k,originalTime:H}=this;return!((0,t.isEqual)(k,H)||(0,t.isEqual)((0,i.CQ)(k?.from),(0,i.CQ)(H?.from))&&(0,t.isEqual)((0,i.CQ)(k?.to),(0,i.CQ)(H?.to)))}resetOriginalVariables(k=!1){if(k){this.originalTemplating=this.cloneVariablesFrom(this.templating.list);return}this.originalTemplating=this.cloneVariablesFrom(this.getVariablesFromState(this.uid))}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState(this.uid))}autoFitPanels(k,H){const j=Math.max(...this.panels.map(ne=>ne.gridPos.h+ne.gridPos.y)),z=55,F=20;let J=k-z-F;H&&H!==b.KioskMode.TV&&(J+=z);const Q=Math.floor(J/(d.K3+d.hD)),Z=j/Q;for(const ne of this.panels)ne.gridPos.y=Math.round(ne.gridPos.y/Z)||1,ne.gridPos.h=Math.round(ne.gridPos.h/Z)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(b.CoreEvents.nq)}getPanelByUrlId(k){const H=parseInt(k??"0",10),j=this.panels.filter(z=>z.collapsed);for(const z of j)z.panels?.some(J=>J.id===H)&&this.toggleRow(z);return this.getPanelById(H)}toggleLegendsForAll(){const k=this.panels.filter(U),H=k.filter(F=>F.legend.show).length,j=k.length-H,z=H>=j;for(const F of k)F.legend.show=!z,F.render()}toggleExemplarsForAll(){for(const k of this.panels)for(const H of k.targets){if(!(H.datasource&&H.datasource.type==="prometheus"))continue;const j=H;j.exemplar=!j.exemplar}this.startRefresh()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(k){let H=!0;return f.Vt.accessControlEnabled()&&(k?H=!!this.meta.annotationsPermissions?.dashboard.canEdit:H=!!this.meta.annotationsPermissions?.organization.canEdit),this.canEditDashboard()&&H}canDeleteAnnotations(k){let H=!0;return f.Vt.accessControlEnabled()&&(k?H=!!this.meta.annotationsPermissions?.dashboard.canDelete:H=!!this.meta.annotationsPermissions?.organization.canDelete),H&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(H=>H.builtIn===1)?.enable===!1||!this.canEditDashboard()?!1:!f.Vt.accessControlEnabled()||!!this.meta.annotationsPermissions?.dashboard.canAdd}canEditDashboard(){return!!(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(k,H){!(0,t.isEqual)(k?.gridPos,H?.gridPos)&&this.events.publish(new g._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(k){return this.getVariablesFromState(this.uid).find(H=>H.name===k.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(k,H){if(k.length!==H.length)return!1;const j=H.map(z=>({name:z.name,type:z.type,current:(0,t.cloneDeep)(z.current),filters:(0,t.cloneDeep)(z.filters)}));return!(0,t.isEqual)(j,k)}cloneVariablesFrom(k){return k.map(H=>({name:H.name,type:H.type,current:(0,t.cloneDeep)(H.current),filters:(0,t.cloneDeep)(H.filters)}))}variablesTimeRangeProcessDoneHandler(k){const H=k.payload.variableIds.length>0;this.variablesChangedHandler(new E.x9({panelIds:[],refreshAll:!0}),H)}variablesChangedHandler(k,H=!0){if(H&&this.processRepeats(),k.payload.refreshAll||(0,S.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=k.payload.panelIds.filter(j=>j!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(k.payload)}variablesChangedInUrlHandler(k){this.templateVariableValueUpdated(),this.startRefresh(k.payload)}getOriginalDashboard(){return this.originalDashboard}hasAngularPlugins(){return this.panels.some(k=>k.isAngularPlugin()||(k.datasource?.uid?(0,u.e)(k.datasource?.uid):!1))}};let _=V;_.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEdit:!0,originalDashboard:!0};function U(k){return!!k.legend}function $(k,H,j){k.scopedVars??={},k.scopedVars[H.name]=j}},3706:(X,L,e)=>{"use strict";e.d(L,{rY:()=>ye,G7:()=>de,Jg:()=>me});var t=e(86832),n=e(34032),r=e(91395),a=e(96083),i=e(58103),y=e(77014),c=e(79059),l=e(50820),d=e(44951),f=e(78354),m=e(73431),u=e(56989),h=e(63302),C=e(84289),x=e(71476),b=e(10752),g=e(10694),p=e(53305),v=e(54554),E=e(52716),P=e(99977),S=e(60593),M=e(81626),R=e(43882),I=e(92743),A=(De=>(De.NewValuesSameSchema="NewValuesSameSchema",De.FullFrame="FullFrame",De))(A||{});const O=(De,le)=>"type"in De&&De.type===le,N=Object.values(A),o=De=>"type"in De&&N.includes(De.type),w=De=>(0,p.aY)(De)&&"packetInfo"in De;var K=e(52436),V=e(41182),_=e(61704),U=e(61691),$=e(53323),k=e(33975);function H(De,le){return(0,$.a)([De,le]).pipe((0,C.z)(Ee=>{const[be,ge]=Ee;if(ge.annotations?.length||ge.alertState){be.annotations||(be.annotations=[]);const ue=be.annotations.concat(new k.i(ge.annotations)),Ie=ge.alertState;return(0,h.of)({...be,annotations:ue,alertState:Ie})}return(0,h.of)(be)}))}var j=e(11164);let z=100;function F(){return"Q"+z++}class J{constructor(le){this.templateSrv=(0,V.J)(),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new u.t(1),this.dataConfigSource=le}getData(le){const{withFieldConfig:Ee,withTransforms:be}=le;let ge=1,ue,Ie=[],ot=[],Qe,Me=!0,Ne=-1;if(this.dataConfigSource.snapshotData){const qe={state:g.Gu.Done,series:this.dataConfigSource.snapshotData.map(bt=>(0,p.g0)(bt)),timeRange:(0,v.JK)()};return(0,h.of)(qe)}return this.subject.pipe((0,C.z)(qe=>{let bt=this.dataConfigSource.getFieldOverrideOptions(),Fe=this.dataConfigSource.getTransformations();if(qe.series===ot&&ue?.fieldConfig===bt?.fieldConfig&&Qe===Fe)return(0,h.of)({...qe,structureRev:ge,series:Ie});ue=bt,Qe=Fe,ot=qe.series;let Ve=(0,h.of)(qe);return be&&(Ve=this.applyTransformations(qe)),Ve.pipe((0,x.U)(Ue=>{let it=Ue,ze=!1;if(Ee&&Ue.series?.length){if(Ne===this.dataConfigSource.configRev){const Xe=Ue.series.find(St=>w(St));Xe&&!Xe.packetInfo.schemaChanged&&Ie[0].fields.length===Xe.fields.length&&(it={...it,series:Ie.map((St,Bt)=>({...St,length:Ue.series[Bt].length,fields:St.fields.map((zt,qt)=>({...zt,values:Ue.series[Bt].fields[qt].values,state:{...zt.state,calcs:void 0,range:void 0}}))}))},ze=!0)}bt!=null&&(Me||!ze)&&(Ne=this.dataConfigSource.configRev,it={...it,series:(0,E.SM)({timeZone:Ue.request?.timezone??"browser",data:it.series,...bt})},it.annotations&&(it.annotations=(0,E.SM)({data:it.annotations,...bt,fieldConfig:{defaults:{},overrides:[]}})),Me=!1)}return!ze&&!(0,P.nl)(Ie,it.series,P.Ch)&&ge++,Ie=it.series,{...it,structureRev:ge}}))}))}applyTransformations(le){const Ee=this.dataConfigSource.getTransformations();if(!Ee||Ee.length===0)return(0,h.of)(le);const be={interpolate:ge=>this.templateSrv.replace(ge,le?.request?.scopedVars)};return(0,S.H)(Ee,le.series,be).pipe((0,x.U)(ge=>({...le,series:ge})),(0,b.K)(ge=>(console.warn("Error running transformation:",ge),(0,h.of)({...le,state:g.Gu.Error,errors:[(0,R.P)(ge)]}))))}async run(le){const{queries:Ee,timezone:be,datasource:ge,panelId:ue,dashboardUID:Ie,timeRange:ot,timeInfo:Qe,cacheTimeout:Me,queryCachingTTL:Ne,maxDataPoints:qe,scopedVars:bt,minInterval:Fe,app:Ve}=le;if((0,_.yl)(ge)){this.pipeToSubject((0,_.AK)(le,Ee[0]),ue,!0);return}const Ue={app:Ve??a.zj.Dashboard,requestId:F(),timezone:be,panelId:ue,dashboardUID:Ie,range:ot,timeInfo:Qe,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(Ee),maxDataPoints:qe,scopedVars:bt||{},cacheTimeout:Me,queryCachingTTL:Ne,startTime:Date.now(),rangeRaw:ot.raw};try{const it=await Q(ge,Ue.scopedVars),ze=it.meta?.mixed;Ue.targets=Ue.targets.map(Bt=>{const zt=Bt.datasource?.type===I.hr.type;return(!Bt.datasource||Bt.datasource.uid!==it.uid&&!ze&&!zt)&&(Bt.datasource=it.getRef()),Bt});const Xe=Fe?this.templateSrv.replace(Fe,Ue.scopedVars):it.interval,St=M.calculateInterval(ot,qe,Xe);Ue.scopedVars=Object.assign({},Ue.scopedVars,{__interval:{text:St.interval,value:St.interval},__interval_ms:{text:St.intervalMs.toString(),value:St.intervalMs}}),Ue.interval=St.interval,Ue.intervalMs=St.intervalMs,Ue.filters=this.templateSrv.getAdhocFilters(it.name),this.lastRequest=Ue,this.pipeToSubject((0,j.v7)(it,Ue),ue)}catch(it){this.pipeToSubject((0,h.of)({state:g.Gu.Error,error:(0,R.P)(it),series:[],timeRange:Ue.range}),ue)}}pipeToSubject(le,Ee,be=!1){this.subscription&&this.subscription.unsubscribe();let ge=le;const ue=this.dataConfigSource.getDataSupport();if(ue.alertStates||ue.annotations){const Ie=this.dataConfigSource;ge=H(le,(0,U.kt)().getResult(Ie.id))}this.subscription=ge.subscribe({next:Ie=>{this.lastResult=be?Ie:(0,p.zR)(Ie,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===g.Gu.Loading||this.lastResult.state===g.Gu.Streaming)&&this.subject.next({...this.lastResult,state:g.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new u.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(le){this.lastResult=le.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(le){this.lastResult=le}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function Q(De,le){return De&&typeof De=="object"&&"query"in De?De:await(0,K.ak)().get(De,le)}const Z={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0},ne={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},ee={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:""},de={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap"},Pe={"heatmap-new":"heatmap"};class ye{constructor(le){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.cachedPluginOptions={},console.log(le),this.events=new r.F,this.restoreModel(le),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,n.Z)()}restoreModel(le){for(const be in this)Z[be]||!this.hasOwnProperty(be)||le[be]||typeof this[be]!="function"&&typeof this[be]!="symbol"&&delete this[be];for(const be in le)this[be]=le[be];const Ee=Pe[this.type];Ee&&(this.autoMigrateFrom=this.type,this.type=Ee),(0,t.defaultsDeep)(this,(0,t.cloneDeep)(ee)),this.ensureQueryIds()}generateNewKey(){this.key=(0,n.Z)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const le of this.targets)le.refId||(le.refId=(0,f.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(le){this.options=le,this.configRev++,this.events.publish(new m.Wj),this.render()}updateFieldConfig(le){this.fieldConfig=le,this.configRev++,this.events.publish(new m.Wj),this.resendLastResult(),this.render()}getSaveModel(){const le={};for(const Ee in this)Z[Ee]||!this.hasOwnProperty(Ee)||(0,t.isEqual)(this[Ee],ee[Ee])||(le[Ee]=(0,t.cloneDeep)(this[Ee]));return this.type==="row"&&this.panels&&this.panels.length>0&&(le.panels=this.panels.map(Ee=>{if(Ee.libraryPanel){const{id:be,title:ge,libraryPanel:ue,gridPos:Ie}=Ee;return{id:be,title:ge,gridPos:Ie,libraryPanel:{uid:ue.uid,name:ue.name}}}return Ee})),le}setIsViewing(le){this.isViewing=le}updateGridPos(le,Ee=!0){le.x===this.gridPos.x&&le.y===this.gridPos.y&&le.h===this.gridPos.h&&le.w===this.gridPos.w||(this.gridPos.x=le.x,this.gridPos.y=le.y,this.gridPos.w=le.w,this.gridPos.h=le.h,Ee&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:le,dashboardTimezone:Ee,timeData:be,width:ge}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardUID:le,timezone:Ee,timeRange:be.timeRange,timeInfo:be.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(ge),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?a.zj.PanelEditor:this.isViewing?a.zj.PanelViewer:a.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new y.U5)}render(){this.hasRefreshed?this.events.publish(new m._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((le,Ee)=>Z[Ee]||ne[Ee]?le:{...le,[Ee]:this[Ee]},{})}restorePanelOptions(le){const Ee=this.cachedPluginOptions[le];Ee&&(Object.keys(Ee.properties).map(be=>{this[be]=Ee.properties[be]}),this.fieldConfig=(0,i.__)(this.fieldConfig,Ee.fieldConfig))}applyPluginOptionDefaults(le,Ee){const be=(0,i.d4)({plugin:le,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:Ee});this.fieldConfig=be.fieldConfig,this.options=be.options}async pluginLoaded(le){this.plugin=le;const Ee=he(le);if(this.autoMigrateFrom){const be=de[this.autoMigrateFrom]!=null,ge=this.getOptionsToRemember(),ue=this.autoMigrateFrom,Ie=this.type;this.clearPropertiesBeforePluginChange(),this.type=Ie,this.plugin=le,this.callPanelTypeChangeHandler(le,ue,ge,be)}if(le.onPanelMigration&&Ee!==this.pluginVersion){const be=le.onPanelMigration(this);this.options=await be,this.pluginVersion=Ee}this.applyPluginOptionDefaults(le,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const le in this)ne[le]||delete this[le];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,i.aS)(this.fieldConfig.overrides,i._k)}}callPanelTypeChangeHandler(le,Ee,be,ge){if(le.onPanelTypeChanged){const ue=ge?{angular:be}:be.options;Object.assign(this.options,le.onPanelTypeChanged(this,Ee,ue,this.fieldConfig))}}changePlugin(le){const Ee=le.meta.id,be=this.getOptionsToRemember(),ge=this.fieldConfig,ue=this.type,Ie=this.isAngularPlugin()||!!de[ue];this.cachedPluginOptions[ue]={properties:be,fieldConfig:ge},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(Ee),this.callPanelTypeChangeHandler(le,ue,be,Ie),this.type=Ee,this.plugin=le,this.configRev++,this.applyPluginOptionDefaults(le,!0),le.onPanelMigration&&(this.pluginVersion=he(le))}updateQueries(le){const{dataSource:Ee}=le;this.datasource={uid:Ee.uid,type:Ee.type},this.cacheTimeout=le.cacheTimeout,this.queryCachingTTL=le.queryCachingTTL,this.timeFrom=le.timeRange?.from,this.timeShift=le.timeRange?.shift,this.hideTimeOverride=le.timeRange?.hide,this.interval=le.minInterval,this.maxDataPoints=le.maxDataPoints,this.targets=le.queries,this.configRev++,this.events.publish(new m.pO)}addQuery(le){le=le||{refId:"A"},le.refId=(0,f.Hs)(this.targets),this.targets.push(le),this.configRev++}changeQuery(le,Ee){le.refId=this.targets[Ee].refId,this.configRev++,this.targets=this.targets.map((be,ge)=>ge===Ee?le:be)}getEditClone(){const le=this.getSaveModel(),Ee=new ye(le);Ee.isEditing=!0,Ee.plugin=this.plugin;const be=this.getQueryRunner();return Ee.getQueryRunner().useLastResultFrom(be),Ee}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:l.default.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new J(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0||(this.plugin?.meta?.angularDetected??!1)}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(le){this.transformations=le,this.resendLastResult(),this.configRev++,this.events.publish(new m.Xw)}setProperty(le,Ee){this[le]=Ee,this.configRev++,le==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(le,Ee,be){const ge=this.getQueryRunner().getLastRequest(),ue=Object.assign({},this.scopedVars,ge?.scopedVars,Ee);return(0,c.J)().replace(le,ue,be)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(le){for(const[Ee,be]of Object.entries(le.model)){switch(Ee){case"id":case"gridPos":case"libraryPanel":continue}this[Ee]=be}this.libraryPanel=le}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function he(De){return De&&De.meta.info.version?De.meta.info.version:l.default.buildInfo.version}function me(De){const le={};return Object.entries(De).filter(([Ee,be])=>!Z[Ee]&&De.hasOwnProperty(Ee)&&!(0,t.isEqual)(be,ee[Ee])).forEach(([Ee,be])=>{le[Ee]=be}),(0,d.Xh)(le)}},75397:(X,L,e)=>{"use strict";e.d(L,{f:()=>t.f,r:()=>n.rY});var t=e(19016),n=e(3706)},795:(X,L,e)=>{"use strict";e.d(L,{Rd:()=>x,ZP:()=>g,tq:()=>C});var t=e(77960),n=e(61606),r=e(17653),a=e(21527),i=e(19016);const y={initPhase:a.DashboardInitPhase.NotStarted,getModel:()=>null,permissions:[],initError:null,initialDatasource:void 0},c=(0,t.oM)({name:"dashboard",initialState:y,reducers:{loadDashboardPermissions:(p,v)=>{p.permissions=(0,r.A)(v.payload)},dashboardInitFetching:p=>{p.initPhase=a.DashboardInitPhase.Fetching},dashboardInitServices:p=>{p.initPhase=a.DashboardInitPhase.Services},dashboardInitCompleted:(p,v)=>{p.getModel=()=>v.payload,p.initPhase=a.DashboardInitPhase.Completed},dashboardInitFailed:(p,v)=>{p.initPhase=a.DashboardInitPhase.Failed,p.initError=v.payload,p.getModel=()=>new i.f({...n.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:p=>{p.initPhase=a.DashboardInitPhase.NotStarted,p.initError=null,p.getModel=()=>null},addPanel:(p,v)=>{},setInitialDatasource:(p,v)=>{p.initialDatasource=v.payload}}}),{loadDashboardPermissions:l,dashboardInitFetching:d,dashboardInitFailed:f,dashboardInitCompleted:m,dashboardInitServices:u,cleanUpDashboard:h,addPanel:C,setInitialDatasource:x}=c.actions,g={dashboard:c.reducer}},23331:(X,L,e)=>{"use strict";e.d(L,{y:()=>f});var t=e(53305),n=e(54554),r=e(33975),a=e(10694),i=e(52716),y=e(50820),c=e(68556),l=e(6278),d=e(65406);function f(m,u){const h=(0,t.F9)(m.snapshotData),C=new c.g,x={dashboard:u,range:(0,n.JK)()},b=C.canWork(x)?C.getAnnotationsInSnapshot(u,m.id):[],g=[(0,r.P)(b)];return{timeRange:(0,d.W1)(m,(0,l.$t)().timeRange()).timeRange,state:a.Gu.Done,series:(0,i.SM)({data:h,fieldConfig:{defaults:{},overrides:[]},replaceVariables:m.replaceVariables,fieldConfigRegistry:m.plugin.fieldConfigRegistry,theme:y.config.theme2,timeZone:u.getTimezone()}),annotations:g}}},65406:(X,L,e)=>{"use strict";e.d(L,{Kq:()=>er,W1:()=>Ls,lg:()=>Or,bY:()=>Ks,jN:()=>Ya,WJ:()=>$t,Po:()=>As,qw:()=>lr,oe:()=>ir});var t=e(86832),n=e(71519),r=e(81626),a=e(92403),i=e(77877),y=e(79059),c=e(28833),l=e(50820),d=e(74602),f=e(23062),m=e(39953),u=e(35823),h=e(73075),C=e(90201),x=e(82803),b=e(21308),g=e(26843),p=e(41407),v=e(28409),E=e(27587),P=e(92743),S=e(52436),M=e(69307),R=e(57837),I=e(32688),A=e(16360),O=e(4148),N=e(97316),o=e(14687),w=e(74600),K=e(44951);function V(){return`${window.location.protocol}//${window.location.host}${I.config.appSubUrl}`}function _(Nt){let Jt=Nt.replace(V(),"");return Jt.startsWith("/")?Jt.substring(1,Jt.length):Jt}const U=(0,A.Z)(async function(Nt){try{return(await(0,O.i)().post("/api/short-urls",{path:_(Nt)})).url}catch(Jt){console.error("Error when creating shortened link: ",Jt),(0,w.WI)((0,N.$l)((0,o.t_)("Error generating shortened link")))}}),$=async Nt=>{const Jt=await U(Nt);Jt?(copyStringToClipboard(Jt),dispatch(notifyApp(createSuccessNotification("Shortened link copied to clipboard")))):dispatch(notifyApp(createErrorNotification("Error generating shortened link")))};var k=e(6278);function H({useCurrentTimeRange:Nt,selectedTheme:Jt,panel:Yt,search:vn=window.location.search,range:An=(0,k.$t)().timeRange(),orgId:xn=I.config.bootData.user.orgId}){const Un=new URLSearchParams(vn),xa=Yt?.timeFrom;if(xa){const{from:za,to:is}=r.describeTextRange(xa);Un.set("from",za),Un.set("to",is)}else Un.set("from",String(An.from.valueOf())),Un.set("to",String(An.to.valueOf()));return Un.set("orgId",String(xn)),Nt||(Un.delete("from"),Un.delete("to")),Jt!=="current"&&Un.set("theme",Jt),Yt&&!Un.has("editPanel")&&Un.set("viewPanel",String(Yt.id)),Un}function j(){let Nt=window.location.href;const Jt=Nt.indexOf("?");return Jt!==-1&&(Nt=Nt.substring(0,Jt)),Nt}async function z(Nt,Jt,Yt,vn){const An=j(),xn=H({useCurrentTimeRange:Nt,selectedTheme:Jt,panel:Yt}),Un=M.Cj.appendQueryToUrl(An,xn.toString());return vn?await U(Un):Un}function F(Nt,Jt,Yt,vn){const An=j(),xn=H({useCurrentTimeRange:Nt,selectedTheme:Yt,panel:vn});let Un=An.replace(I.config.appSubUrl+"/dashboard/",I.config.appSubUrl+"/dashboard-solo/");Un=Un.replace(I.config.appSubUrl+"/d/",I.config.appSubUrl+"/d-solo/"),R.u.stripBaseFromUrl(An)==="/"&&(Un=`${I.config.appUrl}d-solo/${Jt}`);const za=xn.get("editPanel")??xn.get("viewPanel")??"";return xn.set("panelId",za),xn.delete("editPanel"),xn.delete("viewPanel"),M.Cj.appendQueryToUrl(Un,xn.toString())}function J(Nt,Jt,Yt,vn){let xn=F(Nt,Jt,Yt,vn).replace(I.config.appSubUrl+"/dashboard-solo/",I.config.appSubUrl+"/render/dashboard-solo/");return xn=xn.replace(I.config.appSubUrl+"/d-solo/",I.config.appSubUrl+"/render/d-solo/"),xn+="&width=1000&height=500"+Z(),xn}function Q(Nt,Jt,Yt,vn){return'<iframe src="'+F(Nt,Jt,Yt,vn)+'" width="450" height="200" frameborder="0"></iframe>'}function Z(){const Nt="&tz=UTC"+encodeURIComponent((0,a.CQ)().format("Z"));if(!window.Intl)return Nt;const Jt=window.Intl.DateTimeFormat();if(!Jt.resolvedOptions)return Nt;const Yt=Jt.resolvedOptions();return Yt.timeZone?"&tz="+encodeURIComponent(Yt.timeZone):Nt}const ne={link:"link",snapshot:"snapshot",export:"export",embed:"embed",libraryPanel:"library_panel",pdf:"pdf",report:"report",publicDashboard:"public_dashboard"},ee=new Set(["__expr__","apache-iotdb-datasource","aquaqanalytics-kdbbackend-datasource","axiomhq-axiom-datasource","cnos-cnosdb-datasource","datasource","dlopes7-appdynamics-datasource","dvelop-odata-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-db2-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-falconlogscale-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-looker-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdata-flightsql-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","marcusolsson-csv-datasource","marcusolsson-ynab-datasource","mssql","mysql","nagasudhirpulla-api-datasource","needleinajaystack-haystack-datasource","opentsdb","postgres","prometheus","quickwit-quickwit-datasource","redis-datasource","sentinelone-dataset-datasource","sneller-sneller-datasource","spiceai-spicexyz-datasource","stackdriver","tdengine-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","ydbtech-ydb-datasource","yesoreyeram-infinity-datasource"]);var de=(Nt=>(Nt.PUBLIC="public",Nt.EMAIL="email",Nt))(de||{});const Pe=Nt=>Nt.length>0,ye=Nt=>Nt?.uid!==""&&Nt?.uid!==void 0,he=async Nt=>{let Jt=new Set;for(const Yt of Nt)for(const vn of Yt.targets){const An=vn?.datasource?.type;An&&(ee.has(An)&&await(0,S.ak)().get(vn.datasource)instanceof P.CK||Jt.add(An))}return Array.from(Jt).sort()},me=Nt=>`${(0,l.iE)().appUrl}public-dashboards/${Nt}`,De=Nt=>`/d/${Nt}?shareView=${shareDashboardType.publicDashboard}`,le=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i,Ee=({children:Nt,wrap:Jt,className:Yt})=>{const vn=(0,x.l4)(),An=be(vn,Jt);return m.createElement("div",{className:(0,p.cx)(An.container,Yt)},Nt)},be=(Nt,Jt)=>({container:(0,p.css)`
    display: flex;
    flex-direction: row;
    flex-wrap: ${Jt?"wrap":"no-wrap"};
    & > * {
      margin-bottom: ${Nt.spacing()};
      margin-right: ${Nt.spacing()};
    }
    & > *:last-child {
      margin-right: 0;
    }
  `});var ge=e(14058),ue=e(75766),Ie=e(13475),ot=e(39106),Qe=e(96227),Me=e(38637),Ne=e(36210),qe=e(26286),bt=e(36495),Fe=e(12223),Ve=e(20111),Ue=e(97125),it=e(21527),ze=e(4919),Xe=e(32840);const St=({title:Nt})=>{const Jt=(0,x.wW)(zt);return m.createElement("p",{className:Jt.description},Nt?"Are you sure you want to revoke this URL? The dashboard will no longer be public.":"Orphaned public dashboard will no longer be public.")},Bt=({dashboardTitle:Nt,onConfirm:Jt,onDismiss:Yt})=>m.createElement(Xe.s,{isOpen:!0,body:m.createElement(St,{title:Nt}),onConfirm:Jt,onDismiss:Yt,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL"}),zt=Nt=>({title:(0,p.css)`
    margin-bottom: ${Nt.spacing(1)};
  `,description:(0,p.css)`
    font-size: ${Nt.typography.body.fontSize};
  `}),qt=({dashboard:Nt,publicDashboard:Jt,loader:Yt,children:vn,onDismiss:An,...xn})=>{const[Un,{isLoading:xa}]=(0,E.bS)(),za=(is,$a)=>{Un({dashboard:Nt,uid:is.uid,dashboardUid:is.dashboardUid}),$a()};return m.createElement(ot.JY,null,({showModal:is,hideModal:$a})=>m.createElement(ze.zx,{"aria-label":"Revoke public URL",title:"Revoke public URL",onClick:()=>is(Bt,{dashboardTitle:Jt.title,onConfirm:()=>za(Jt,$a),onDismiss:()=>{An?An():$a()}}),...xn},xa&&Yt?Yt:vn))};var Qt=e(29721);const yn=()=>{const{width:Nt}=(0,Qt.Z)();return Nt>1024};var Zt=e(72639);const re={sharingCategoryClicked:"dashboards_sharing_category_clicked",sharingActionClicked:"dashboards_sharing_actions_clicked"};function Te(Nt){(0,Zt.ff)(re.sharingCategoryClicked,{item:Nt})}function We(Nt,Jt){(0,Zt.ff)(re.sharingActionClicked,{item:Nt,sharing_category:Jt})}var Je=e(33155);const je=ue.wl.pages.ShareDashboardModal.PublicDashboard,pt=({mode:Nt})=>m.createElement(Je.b,{severity:"info",title:`You don\u2019t have permission to ${Nt} a public dashboard`,"data-testid":je.NoUpsertPermissionsWarningAlert,bottomSpacing:0},"Contact your admin to get permission to ",Nt," create public dashboards"),ft=()=>m.createElement(Je.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning",bottomSpacing:0});var Tt=e(77814),Ye=e.n(Tt);const Ce=ue.wl.pages.ShareDashboardModal.PublicDashboard,oe=({unsupportedDataSources:Nt})=>{const Jt=(0,x.wW)(pe);return m.createElement(Je.b,{severity:"warning",title:"Unsupported data sources","data-testid":Ce.UnsupportedDataSourcesWarningAlert,bottomSpacing:0},m.createElement("p",{className:Jt.unsupportedDataSourceDescription},"There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",Nt,"."),m.createElement("a",{href:"https://grafana.com/docs/grafana/next/dashboards/dashboard-public/",className:Ye()("text-link",Jt.unsupportedDataSourceDescription)},"Read more about supported data sources"))},pe=Nt=>({unsupportedDataSourceDescription:(0,p.css)`
    color: ${Nt.colors.text.secondary};
    margin-bottom: ${Nt.spacing(1)};
  `}),Re=ue.wl.pages.ShareDashboardModal.PublicDashboard,ae=()=>m.createElement(Je.b,{severity:"warning",title:"Template variables are not supported","data-testid":Re.TemplateVariablesWarningAlert,bottomSpacing:0},"This public dashboard may not work since it uses template variables"),ve=Nt=>{const[Jt,Yt]=(0,m.useState)([]);return(0,m.useEffect)(()=>{(async()=>await he(Nt.panels))().then(An=>{Yt(An)})},[Nt.panels]),{unsupportedDataSources:Jt}};var xe=e(2827),Ge=e(88252);const at=ue.wl.pages.ShareDashboardModal.PublicDashboard,dt=({disabled:Nt,onChange:Jt,register:Yt,timeRange:vn})=>m.createElement(m.Fragment,null,m.createElement(xe.C,{disabled:Nt},m.createElement(Fe.wc,{spacing:"md"},m.createElement(Fe.Ar,{orientation:1,spacing:"xs",justify:"space-between"},m.createElement(bt._,{description:"The public dashboard uses the default time range settings of the dashboard"},"Default time range"),m.createElement(Ge.K,{value:vn,disabled:!0,onChange:()=>{}})),m.createElement(Fe.Ar,{orientation:0,spacing:"sm"},m.createElement(qe.r,{...Yt("isTimeSelectionEnabled"),"data-testid":at.EnableTimeRangeSwitch,onChange:An=>{We(An.currentTarget.checked?"enable_time":"disable_time",ne.publicDashboard),Jt("isTimeSelectionEnabled",An.currentTarget.checked)}}),m.createElement(bt._,{description:"Allow viewers to change time range"},"Time range picker enabled")),m.createElement(Fe.Ar,{orientation:0,spacing:"sm"},m.createElement(qe.r,{...Yt("isAnnotationsEnabled"),onChange:An=>{We(An.currentTarget.checked?"enable_annotations":"disable_annotations",ne.publicDashboard),Jt("isAnnotationsEnabled",An.currentTarget.checked)},"data-testid":at.EnableAnnotationsSwitch}),m.createElement(bt._,{description:"Show annotations on public dashboard"},"Show annotations")))));var st=e(48824),Pt=e(9006),we=e(20454);function Le(){return config.bootData.user.isGrafanaAdmin}function Ke(){return Ue.Vt.hasRole("Admin")}function ht(){return contextSrv.hasPermission(AccessControlAction.DataSourcesCreate)&&contextSrv.hasPermission(AccessControlAction.DataSourcesWrite)}const xt=[{label:"Anyone with a link",value:de.PUBLIC},{label:"Only specified people",value:de.EMAIL}],lt=ue.wl.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,Rt=({recipients:Nt,dashboardUid:Jt,publicDashboardUid:Yt})=>{const vn=(0,x.wW)(Xt),[An,{isLoading:xn}]=(0,E.r5)(),[Un,{isLoading:xa}]=(0,E.RS)(),za=xn||xa,is=Ta=>{We("delete_email",ne.publicDashboard),An({recipientUid:Ta,dashboardUid:Jt,uid:Yt})},$a=Ta=>{We("reshare_email",ne.publicDashboard),Un({recipientUid:Ta,uid:Yt})};return m.createElement("table",{className:vn.table,"data-testid":lt.EmailSharingList},m.createElement("tbody",null,Nt.map((Ta,as)=>m.createElement("tr",{key:Ta.uid},m.createElement("td",null,Ta.recipient),m.createElement("td",null,m.createElement(st.h,{className:vn.tableButtonsContainer},m.createElement(ze.zx,{type:"button",variant:"destructive",fill:"text","aria-label":"Revoke",title:"Revoke",size:"sm",disabled:za,onClick:()=>is(Ta.uid),"data-testid":`${lt.DeleteEmail}-${as}`},"Revoke"),m.createElement(ze.zx,{type:"button",variant:"primary",fill:"text","aria-label":"Resend",title:"Resend",size:"sm",disabled:za,onClick:()=>$a(Ta.uid),"data-testid":`${lt.ReshareLink}-${as}`},"Resend")))))))},Ut=()=>{const{width:Nt}=(0,Qt.Z)(),Jt=(0,x.wW)(Xt),vn=(0,it.useSelector)(Bs=>Bs.dashboard).getModel(),{data:An}=(0,E.Ym)(vn.uid),[xn]=(0,E.Mi)(),[Un,{isLoading:xa}]=(0,E.FJ)(),za=Ue.Vt.hasAccess(it.AccessControlAction.DashboardsPublicWrite,Ke()),{register:is,setValue:$a,control:Ta,watch:as,handleSubmit:la,formState:{errors:Wa},reset:ss}=(0,ge.cI)({defaultValues:{shareType:An?.share||de.PUBLIC,email:""},mode:"onSubmit"}),Ps=Bs=>{const Ms={dashboard:vn,payload:{...An,share:Bs}};xn(Ms)},tr=async Bs=>{We("invite_email",ne.publicDashboard),await Un({recipient:Bs.email,uid:An.uid,dashboardUid:vn.uid}).unwrap(),ss({email:"",shareType:de.EMAIL})};return m.createElement("form",{onSubmit:la(tr)},m.createElement(xe.C,{disabled:!za,"data-testid":lt.Container,className:Jt.container},m.createElement(Qe.g,{label:"Can view dashboard",className:Jt.field},m.createElement(Pt.g,{name:"shareType",control:Ta,render:({field:Bs})=>{const{ref:Ms,...Rr}=Bs;return m.createElement(we.S,{...Rr,size:Nt<480?"sm":"md",options:xt,onChange:br=>{We(`share_type_${br===de.EMAIL?"email":"public"}`,ne.publicDashboard),$a("shareType",br),Ps(br)}})}})),as("shareType")===de.EMAIL&&m.createElement(m.Fragment,null,m.createElement(Qe.g,{label:"Invite",description:"Invite people by email",error:Wa.email?.message,invalid:!!Wa.email?.message||void 0,className:Jt.field},m.createElement("div",{className:Jt.emailContainer},m.createElement(Me.I,{className:Jt.emailInput,placeholder:"email",autoCapitalize:"none",...is("email",{required:"Email is required",pattern:{value:le,message:"Invalid email"}}),"data-testid":lt.EmailSharingInput}),m.createElement(ze.zx,{type:"submit",variant:"primary",disabled:xa,"data-testid":lt.EmailSharingInviteButton},"Invite ",xa&&m.createElement(v.$,null)))),!!An?.recipients?.length&&m.createElement(Rt,{recipients:An.recipients,dashboardUid:vn.uid,publicDashboardUid:An.uid}))))},Xt=Nt=>({container:(0,p.css)`
    label: emailConfigContainer;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${Nt.spacing(3)};
  `,field:(0,p.css)`
    label: field-noMargin;
    margin-bottom: 0;
  `,emailContainer:(0,p.css)`
    label: emailContainer;
    display: flex;
    gap: ${Nt.spacing(1)};
  `,emailInput:(0,p.css)`
    label: emailInput;
    flex-grow: 1;
  `,table:(0,p.css)`
    label: table;
    display: flex;
    max-height: 220px;
    overflow-y: scroll;

    & tbody {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    & tr {
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${Nt.spacing(.5,1)};

      :nth-child(odd) {
        background: ${Nt.colors.background.secondary};
      }
    }
  `,tableButtonsContainer:(0,p.css)`
    display: flex;
    justify-content: end;
  `});var $n=e(82360),Mt=e(68497);function yt({headerElement:Nt,isContentVisible:Jt=!1,onRowToggle:Yt,title:vn,...An}){const xn=(0,x.wW)(At),Un=Nt&&$n.renderOrCallToRender(Nt,{className:xn.summaryWrapper});return m.createElement("div",{className:xn.wrapper},m.createElement("div",{className:xn.header},m.createElement(Mt.h,{name:Jt?"angle-down":"angle-right",tooltip:Jt?"Collapse settings":"Expand settings",className:xn.collapseIcon,onClick:Yt,"aria-expanded":Jt,...An}),vn&&m.createElement("div",{className:xn.titleWrapper,onClick:Yt},m.createElement("span",{className:xn.title},vn)),Un))}yt.displayName="SettingsBarHeader";function At(Nt){return{wrapper:(0,p.css)({label:"header",padding:Nt.spacing(.5,.5),borderRadius:Nt.shape.radius.default,background:Nt.colors.background.secondary,minHeight:Nt.spacing(4),"&:focus":{outline:"none"}}),header:(0,p.css)({label:"column",display:"flex",alignItems:"center",whiteSpace:"nowrap"}),collapseIcon:(0,p.css)({marginLeft:Nt.spacing(.5),color:Nt.colors.text.disabled}),titleWrapper:(0,p.css)({display:"flex",alignItems:"center",cursor:"pointer",overflow:"hidden",marginRight:`${Nt.spacing(.5)}`,[Nt.breakpoints.down("sm")]:{flex:"1 1"}}),title:(0,p.css)({fontWeight:Nt.typography.fontWeightBold,marginLeft:Nt.spacing(.5),overflow:"hidden",textOverflow:"ellipsis"}),summaryWrapper:(0,p.css)({display:"flex",flexWrap:"wrap",[Nt.breakpoints.down("sm")]:{flex:"2 2"}})}}function Ht({children:Nt,title:Jt,headerElement:Yt,...vn}){const An=(0,x.wW)(tn),[xn,Un]=(0,m.useState)(!1);function xa(){Un(za=>!za)}return m.createElement(m.Fragment,null,m.createElement(yt,{onRowToggle:xa,isContentVisible:xn,title:Jt,headerElement:Yt,...vn}),xn&&m.createElement("div",{className:An.content},Nt))}Ht.displayName="SettingsBar";const tn=Nt=>({content:(0,p.css)({marginTop:Nt.spacing(1),marginLeft:Nt.spacing(4)})});var gn=e(48408);function mn({className:Nt,isDataLoading:Jt=!1,timeRange:Yt,timeSelectionEnabled:vn,annotationsEnabled:An}){const xn=(0,x.wW)(Tn);return Jt?m.createElement("div",{className:(0,p.cx)(xn.summaryWrapper,Nt)},m.createElement(v.$,{className:xn.summary,inline:!0,size:14})):m.createElement("div",{className:(0,p.cx)(xn.summaryWrapper,Nt)},m.createElement("span",{className:xn.summary},"Time range = ",m.createElement(gn.q,{className:xn.timeRange,value:Yt})),m.createElement("span",{className:xn.summary},`Time range picker = ${vn?"enabled":"disabled"}`),m.createElement("span",{className:xn.summary},`Annotations = ${An?"show":"hide"}`))}mn.displayName="SettingsSummary";const Tn=Nt=>({summaryWrapper:(0,p.css)({display:"flex"}),summary:(0,p.css)`
      label: collapsedText;
      margin-left: ${Nt.spacing.gridSize*2}px;
      font-size: ${Nt.typography.bodySmall.fontSize};
      color: ${Nt.colors.text.secondary};
    `,timeRange:(0,p.css)({display:"inline-block"})}),ln=ue.wl.pages.ShareDashboardModal.PublicDashboard,Wn=()=>{const Nt=(0,x.wW)(On),Jt=yn(),{showModal:Yt,hideModal:vn}=(0,m.useContext)(ot.kr),An=Ue.Vt.hasPermission(it.AccessControlAction.DashboardsPublicWrite),xn=!!I.config.featureToggles.publicDashboardsEmailSharing&&(0,Ie.v)("publicDashboardsEmailSharing"),xa=(0,it.useSelector)(pr=>pr.dashboard).getModel(),za=xa.getVariables(),{unsupportedDataSources:is}=ve(xa),{data:$a,isFetching:Ta}=(0,E.Ym)(xa.uid),[as,{isLoading:la}]=(0,E.Mi)(),Wa=la||Ta,ss=!An||Wa,Ps=(0,Ve.O)(xa.getDefaultTime(),xa),{handleSubmit:tr,setValue:Bs,register:Ms}=(0,ge.cI)({defaultValues:{isAnnotationsEnabled:$a?.annotationsEnabled,isTimeSelectionEnabled:$a?.timeSelectionEnabled,isPaused:!$a?.isEnabled}}),Rr=async pr=>{const{isAnnotationsEnabled:Ar,isTimeSelectionEnabled:xr,isPaused:Oe}=pr,ke={dashboard:xa,payload:{...$a,annotationsEnabled:Ar,timeSelectionEnabled:xr,isEnabled:!Oe}};as(ke)},br=async(pr,Ar)=>{Bs(pr,Ar),await tr(xr=>Rr(xr))()},si=()=>{Yt(qs,{dashboard:xa,onDismiss:vn,activeTab:ne.publicDashboard})};function fo(){We("copy_public_url",ne.publicDashboard)}return m.createElement("div",{className:Nt.configContainer},An&&xa.hasUnsavedChanges()&&m.createElement(ft,null),!An&&m.createElement(pt,{mode:"edit"}),Pe(za)&&m.createElement(ae,null),!!is.length&&m.createElement(oe,{unsupportedDataSources:is.join(", ")}),xn&&m.createElement(Ut,null),m.createElement(Qe.g,{label:"Dashboard URL",className:Nt.fieldSpace},m.createElement(Me.I,{value:me($a.accessToken),readOnly:!0,disabled:!$a?.isEnabled,"data-testid":ln.CopyUrlInput,addonAfter:m.createElement(Ne.m,{"data-testid":ln.CopyUrlButton,variant:"primary",disabled:!$a?.isEnabled,getText:()=>me($a.accessToken),onClipboardCopy:fo},"Copy")})),m.createElement(Qe.g,{className:Nt.fieldSpace},m.createElement(Fe.Ar,null,m.createElement(qe.r,{...Ms("isPaused"),disabled:ss,onChange:pr=>{We(pr.currentTarget.checked?"disable_sharing":"enable_sharing",ne.publicDashboard),br("isPaused",pr.currentTarget.checked)},"data-testid":ln.PauseSwitch}),m.createElement(bt._,{className:(0,p.css)`
              margin-bottom: 0;
            `},"Pause sharing dashboard"))),m.createElement(Qe.g,{className:Nt.fieldSpace},m.createElement(Ht,{title:"Settings",headerElement:({className:pr})=>m.createElement(mn,{className:pr,isDataLoading:Wa,timeRange:Ps,timeSelectionEnabled:$a?.timeSelectionEnabled,annotationsEnabled:$a?.annotationsEnabled}),"data-testid":ln.SettingsDropdown},m.createElement(dt,{disabled:ss,onChange:br,register:Ms,timeRange:Ps}))),m.createElement(Fe.Ar,{orientation:Jt?0:1,justify:Jt?"flex-end":"flex-start",align:Jt?"center":"normal"},m.createElement(Fe.Lh,{justify:"flex-end"},m.createElement(qt,{type:"button",disabled:ss,"data-testid":ln.DeleteButton,onDismiss:si,variant:"destructive",fill:"outline",dashboard:xa,publicDashboard:{uid:$a.uid,dashboardUid:xa.uid,title:xa.title}},"Revoke public URL"))))},On=Nt=>({configContainer:(0,p.css)`
    label: config container;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${Nt.spacing(3)};
  `,fieldSpace:(0,p.css)`
    label: field space;
    width: 100%;
    margin-bottom: 0;
  `,timeRange:(0,p.css)({display:"inline-block"})}),Nn=Wn;var ia=e(85830),da=e(13026);const Da=ue.wl.pages.ShareDashboardModal.PublicDashboard,ja=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public*",testId:Da.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of data sources*",testId:Da.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public will cause queries to run each time is viewed, which may increase costs*",testId:Da.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],Na=({disabled:Nt,register:Jt})=>{const Yt=(0,x.wW)(Ha);return m.createElement(m.Fragment,null,m.createElement("p",{className:Yt.title},"Before you make the dashboard public, acknowledge the following:"),m.createElement(xe.C,{disabled:Nt},m.createElement(Fe.wc,{spacing:"md"},ja.map(vn=>m.createElement(Fe.Lh,{key:vn.type,spacing:"none",align:"center"},m.createElement(da.X,{...Jt(vn.type,{required:!0}),label:vn.description,"data-testid":vn.testId}),m.createElement(ze.Qj,{variant:"primary",href:vn.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:vn.info.tooltip}))))))},Ha=Nt=>({title:(0,p.css)`
    font-weight: ${Nt.typography.fontWeightBold};
  `}),gt=ue.wl.pages.ShareDashboardModal.PublicDashboard,Ft=({isError:Nt})=>{const Jt=(0,x.wW)(jt),Yt=Ue.Vt.hasPermission(it.AccessControlAction.DashboardsPublicWrite),An=(0,it.useSelector)($a=>$a.dashboard).getModel(),{unsupportedDataSources:xn}=ve(An),[Un,{isLoading:xa}]=(0,E.zZ)(),za=!Yt||xa||Nt,is=async()=>{We("generate_public_url",ne.publicDashboard),Un({dashboard:An,payload:{isEnabled:!0}})};return m.createElement("div",{className:Jt.container},m.createElement("div",null,m.createElement("p",{className:Jt.title},"Welcome to public dashboards public preview!"),m.createElement("p",{className:Jt.description},"Currently, we don\u2019t support template variables or frontend data sources")),!Yt&&m.createElement(pt,{mode:"create"}),Pe(An.getVariables())&&m.createElement(ae,null),!!xn.length&&m.createElement(oe,{unsupportedDataSources:xn.join(", ")}),m.createElement(ia.l,{onSubmit:is,validateOn:"onChange",maxWidth:"none"},({register:$a,formState:{isValid:Ta}})=>m.createElement(m.Fragment,null,m.createElement("div",{className:Jt.checkboxes},m.createElement(Na,{disabled:za,register:$a})),m.createElement("div",{className:Jt.buttonContainer},m.createElement(ze.zx,{type:"submit",disabled:za||!Ta,"data-testid":gt.CreateButton},"Generate public URL ",xa&&m.createElement(v.$,{className:Jt.loadingSpinner}))))))},jt=Nt=>({container:(0,p.css)`
    display: flex;
    flex-direction: column;
    gap: ${Nt.spacing(4)};
  `,title:(0,p.css)`
    font-size: ${Nt.typography.h4.fontSize};
    margin: ${Nt.spacing(0,0,2)};
  `,description:(0,p.css)`
    color: ${Nt.colors.text.secondary};
    margin-bottom: ${Nt.spacing(0)};
  `,checkboxes:(0,p.css)`
    margin: ${Nt.spacing(0,0,4)};
  `,buttonContainer:(0,p.css)`
    display: flex;
    justify-content: end;
  `,loadingSpinner:(0,p.css)`
    margin-left: ${Nt.spacing(1)};
  `}),an=Ft,cn=()=>{const Nt=(0,x.wW)(rn);return m.createElement(Ee,{className:Nt.loadingContainer},m.createElement(m.Fragment,null,"Loading configuration",m.createElement(v.$,{size:20,className:Nt.spinner})))},hn=Nt=>{const{data:Jt,isLoading:Yt,isError:vn}=(0,E.Ym)(Nt.dashboard.uid);return m.createElement(m.Fragment,null,Yt?m.createElement(cn,null):ye(Jt)?m.createElement(Nn,null):m.createElement(an,{isError:vn}))},rn=Nt=>({loadingContainer:(0,p.css)`
    height: 280px;
    align-items: center;
    justify-content: center;
    gap: ${Nt.spacing(1)};
  `,spinner:(0,p.css)`
    margin-bottom: ${Nt.spacing(0)};
  `});var un=e(33784),nt=e(68421);const Be=({selectedTheme:Nt="current",onChange:Jt})=>{const Yt=[{label:(0,g.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,g.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,g.t)("share-modal.theme-picker.light","Light"),value:"light"}];return m.createElement(Qe.g,{label:(0,g.t)("share-modal.theme-picker.field-name","Theme")},m.createElement(we.S,{options:Yt,value:Nt,onChange:Jt}))};class et extends m.PureComponent{constructor(Jt){super(Jt),this.buildIframeHtml=()=>{const{panel:Yt,dashboard:vn}=this.props,{useCurrentTimeRange:An,selectedTheme:xn}=this.state,Un=Q(An,vn.uid,xn,Yt);this.setState({iframeHtml:Un})},this.onIframeHtmlChange=Yt=>{this.setState({iframeHtml:Yt.currentTarget.value})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)},this.onThemeChange=Yt=>{this.setState({selectedTheme:Yt},this.buildIframeHtml)},this.getIframeHtml=()=>this.state.iframeHtml,this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,Zt.ff)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:Jt,selectedTheme:Yt,iframeHtml:vn}=this.state,xn=(this.props.dashboard?this.props.dashboard.time.to==="now":!1)?(0,g.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return m.createElement(m.Fragment,null,m.createElement("p",{className:"share-modal-info-text"},m.createElement(g.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),m.createElement(Qe.g,{label:(0,g.t)("share-modal.embed.time-range","Current time range"),description:xn},m.createElement(qe.r,{id:"share-current-time-range",value:Jt,onChange:this.onUseCurrentTimeRangeChange})),m.createElement(Be,{selectedTheme:Yt,onChange:this.onThemeChange}),m.createElement(Qe.g,{label:(0,g.t)("share-modal.embed.html","Embed HTML"),description:(0,g.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},m.createElement(nt.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:vn,onChange:this.onIframeHtmlChange})),m.createElement(h.u.ButtonRow,null,m.createElement(Ne.m,{icon:"copy",variant:"primary",getText:this.getIframeHtml},m.createElement(g.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}}var kt=e(22160),nn=e(1277),Pn=e(26205),pn=e(64840),In=e(84796),Qn=e(77242),Fn=e(68734);function Ea(Nt){return Nt.libraryPanel&&typeof Nt.libraryPanel.name=="string"&&typeof Nt.libraryPanel.uid=="string"}class ut{async makeExportable(Jt){Jt.cleanUpRepeats();const Yt=Jt.getSaveModelClone();Yt.id=null,Jt.processRepeats();const vn=[],An={},xn={},Un={},xa=new Map;for(const Ta of Yt.getVariables())Un[Ta.name]=Ta;const za=(Ta,as)=>{if(Ta.datasource===void 0){Ta.datasource=as;return}let la=Ta.datasource,Wa=null;const ss=la?.uid;return ss&&ss.indexOf("$")===0&&(Wa=Un[ss.substring(1)],Wa&&Wa.current&&(la=Wa.current.value)),(0,Pn.F)().get(la).then(Ps=>{if(Ps.meta?.builtIn||(An["datasource"+Ps.meta?.id]={type:"datasource",id:Ps.meta.id,name:Ps.meta.name,version:Ps.meta.info.version||"1.0.0"},Wa))return;const tr=Ta.libraryPanel,Bs=tr?"-for-library-panel":"";let Ms="DS_"+Ps.name.replace(" ","_").toUpperCase()+Bs.toUpperCase();if(xn[Ms]={name:Ms,label:Ps.name,description:"",type:"datasource",pluginId:Ps.meta?.id,pluginName:Ps.meta?.name,usage:xn[Ms]?.usage},tr){const Rr=xn[Ms]?.usage?.libraryPanels||[];Rr.push({name:tr.name,uid:tr.uid}),xn[Ms].usage={libraryPanels:Rr}}Ta.datasource={type:Ps.meta.id,uid:"${"+Ms+"}"}})},is=async Ta=>{if(Ta.type!=="row"){if(await za(Ta),Ta.targets)for(const la of Ta.targets)await za(la,Ta.datasource);const as=l.default.panels[Ta.type];as&&(An["panel"+as.id]={type:"panel",id:as.id,name:as.name,version:as.info.version})}},$a=async Ta=>{if((0,un.V)(Ta)){const{name:as,uid:la}=Ta.libraryPanel;let Wa=Ta.libraryPanel.model;Wa||(Wa=(await(0,pn.Mh)(la,!0)).model),await za(Wa);const{gridPos:ss,id:Ps,...tr}=Wa;xa.has(la)||xa.set(la,{name:as,uid:la,kind:In.V.Panel,model:tr})}};try{for(const la of Yt.panels)if(await is(la),la.collapsed!==void 0&&la.collapsed===!0&&la.panels)for(const Wa of la.panels)await is(Wa);for(const la of Yt.getVariables())(0,Qn.Xh)(la)&&(await za(la),la.options=[],la.current={},la.refresh=la.refresh!==Fn.Bd.never?la.refresh:Fn.Bd.onDashboardLoad);for(const la of Yt.annotations.list)await za(la);An.grafana={type:"grafana",id:"grafana",name:"Grafana",version:l.default.buildInfo.version};for(const la of Yt.panels)if(await $a(la),la.collapsed!==void 0&&la.collapsed===!0&&la.panels)for(const Wa of la.panels)await $a(Wa);(0,t.each)(xn,la=>{vn.push(la)});for(const la of Yt.getVariables())if((0,Qn.VC)(la)){const Wa="VAR_"+la.name.replace(" ","_").toUpperCase();vn.push({name:Wa,type:"constant",label:la.label||la.name,value:la.query,description:""}),la.query="${"+Wa+"}",la.current={value:la.query,text:la.query,selected:!1},la.options=[la.current]}const Ta=[...xa.entries()].reduce((la,[Wa,ss])=>(la[Wa]=ss,la),{}),as=(0,t.defaults)({__inputs:vn,__elements:Ta,__requires:(0,t.sortBy)(An,["id"])},Yt);for(let la=0;la<as.panels.length;la++){const Wa=as.panels[la];Ea(Wa)&&(as.panels[la]={gridPos:Wa.gridPos,id:Wa.id,libraryPanel:{uid:Wa.libraryPanel.uid,name:Wa.libraryPanel.name}})}return as}catch(Ta){return console.error("Export failed:",Ta),{error:Ta}}}}var vt=e(73431),Et=e(19977),It=e(84541);function en({json:Nt,onDismiss:Jt}){const Yt=(0,m.useCallback)(()=>Nt,[Nt]);return m.createElement(h.u,{title:"JSON",onDismiss:Jt,onClickBackdrop:Jt,isOpen:!0},m.createElement(Et.Z,{disableHeight:!0},({width:vn})=>m.createElement(It.p,{value:Nt,language:"json",showMiniMap:!1,height:"500px",width:vn})),m.createElement(h.u.ButtonRow,null,m.createElement(Ne.m,{icon:"copy",getText:Yt},m.createElement(g.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class Gt extends m.PureComponent{constructor(Jt){super(Jt),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onTrimDefaultsChange=()=>{this.setState({trimDefaults:!this.state.trimDefaults})},this.onSaveAsFile=()=>{const{dashboard:Yt}=this.props,{shareExternally:vn}=this.state,{trimDefaults:An}=this.state;vn?this.exporter.makeExportable(Yt).then(xn=>{An?(0,nn.i)().post("/api/dashboards/trim",{dashboard:xn}).then(Un=>{this.openSaveAsDialog(Un.dashboard)}):this.openSaveAsDialog(xn)}):An?(0,nn.i)().post("/api/dashboards/trim",{dashboard:Yt.getSaveModelClone()}).then(xn=>{this.openSaveAsDialog(xn.dashboard)}):this.openSaveAsDialog(Yt.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:Yt}=this.props,{shareExternally:vn}=this.state,{trimDefaults:An}=this.state;vn?this.exporter.makeExportable(Yt).then(xn=>{An?(0,nn.i)().post("/api/dashboards/trim",{dashboard:xn}).then(Un=>{this.openJsonModal(Un.dashboard)}):this.openJsonModal(xn)}):An?(0,nn.i)().post("/api/dashboards/trim",{dashboard:Yt.getSaveModelClone()}).then(xn=>{this.openJsonModal(xn.dashboard)}):this.openJsonModal(Yt.getSaveModelClone())},this.openSaveAsDialog=Yt=>{const vn=JSON.stringify(Yt,null,2),An=new Blob([vn],{type:"application/json;charset=utf-8"}),xn=new Date().getTime();(0,kt.saveAs)(An,`${Yt.title}-${xn}.json`),We("save_export",ne.export)},this.openJsonModal=Yt=>{b.h$.publish(new vt.Dn({props:{json:JSON.stringify(Yt,null,2)},component:en})),this.props.onDismiss?.()},this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new ut}render(){const{onDismiss:Jt}=this.props,{shareExternally:Yt}=this.state,{trimDefaults:vn}=this.state,An=(0,g.t)("share-modal.export.share-externally-label","Export for sharing externally"),xn=(0,g.t)("share-modal.export.share-default-label","Export with default values removed");return m.createElement(m.Fragment,null,m.createElement("p",{className:"share-modal-info-text"},m.createElement(g.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),m.createElement(Qe.g,{label:An},m.createElement(qe.r,{id:"share-externally-toggle",value:Yt,onChange:this.onShareExternallyChange})),I.config.featureToggles.trimDefaults&&m.createElement(Qe.g,{label:xn},m.createElement(qe.r,{id:"trim-defaults-toggle",value:vn,onChange:this.onTrimDefaultsChange})),m.createElement(h.u.ButtonRow,null,m.createElement(ze.zx,{variant:"secondary",onClick:Jt,fill:"outline"},m.createElement(g.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),m.createElement(ze.zx,{variant:"secondary",onClick:this.onViewJson},m.createElement(g.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),m.createElement(ze.zx,{variant:"primary",onClick:this.onSaveAsFile},m.createElement(g.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var Ln=e(48993),jn=e(20653),zn=e(98837),qn=e(95681);async function Ia(Nt,Jt){const Yt=va(Nt),vn=await ta(Yt,Jt);return aa(Nt,vn),vn}function va(Nt){let{scopedVars:Jt,...Yt}=Nt.getSaveModel();return Yt={libraryPanel:{name:Nt.title,uid:void 0},...Yt},Yt}function aa(Nt,Jt){Nt.restoreModel({...Jt.model,configRev:0,libraryPanel:Jt,title:Nt.title}),Nt.hasSavedPanelEditChange=!0,Nt.refresh()}function ta(Nt,Jt){return Nt.libraryPanel?Nt.libraryPanel&&Nt.libraryPanel.uid===""?(0,pn.Kq)(Nt,Jt):(0,pn.Ob)(Nt):Promise.reject()}const ha=()=>{const Nt=(0,o.iG)(),[Jt,Yt]=(0,qn.default)(async(vn,An)=>{try{const xn=await Ia(vn,An);return Nt.success((0,g.t)("library-panels.save.success","Library panel saved")),xn}catch(xn){throw(0,O.kW)(xn)&&(xn.isHandled=!0,Nt.error((0,g.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:xn.message??xn.data.message}))),xn}},[]);return{state:Jt,saveLibraryPanel:Yt}},ma=({panel:Nt,initialFolderUid:Jt,onDismiss:Yt})=>{const[vn,An]=(0,m.useState)(Jt),[xn,Un]=(0,m.useState)(Nt.title),[xa,za]=(0,m.useState)(Nt.title),[is,$a]=(0,m.useState)(!1);(0,m.useEffect)(()=>$a(!0),[xn]),(0,Ln.Z)(()=>za(xn),350,[xn]);const{saveLibraryPanel:Ta}=ha(),as=(0,m.useCallback)(()=>{Nt.libraryPanel={uid:"",name:xn},Ta(Nt,vn).then(ss=>{ss instanceof Error||Yt()})},[Nt,xn,vn,Yt,Ta]),la=(0,jn.Z)(async()=>{try{return!(await(0,pn.jh)(xn)).some(ss=>ss.folderUid===vn)}catch(ss){return(0,O.kW)(ss)&&(ss.isHandled=!0),!0}finally{$a(!1)}},[xa,vn]),Wa=!la?.value&&la.value!==void 0&&xn===xa&&!is;return m.createElement(m.Fragment,null,m.createElement(Qe.g,{label:(0,g.t)("library-panel.add-modal.name","Library panel name"),invalid:Wa,error:Wa?(0,g.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},m.createElement(Me.I,{id:"share-panel-library-panel-name-input",name:"name",value:xn,onChange:ss=>Un(ss.currentTarget.value)})),m.createElement(Qe.g,{label:(0,g.t)("library-panel.add-modal.folder","Save in folder"),description:(0,g.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},m.createElement(zn.Fz,{onChange:({uid:ss})=>An(ss),initialFolderUid:Jt,inputId:"share-panel-library-panel-folder-picker"})),m.createElement(h.u.ButtonRow,null,m.createElement(ze.zx,{variant:"secondary",onClick:Yt,fill:"outline"},m.createElement(g.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),m.createElement(ze.zx,{onClick:as,disabled:Wa},m.createElement(g.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},_a=({isOpen:Nt=!1,panel:Jt,initialFolderUid:Yt,...vn})=>m.createElement(h.u,{title:"Create library panel",isOpen:Nt,onDismiss:vn.onDismiss},m.createElement(ma,{panel:Jt,initialFolderUid:Yt,onDismiss:vn.onDismiss})),Qa=({panel:Nt,initialFolderUid:Jt,onDismiss:Yt})=>((0,m.useEffect)(()=>{(0,Zt.ff)("grafana_dashboards_library_panel_share_viewed")},[]),Nt?m.createElement(m.Fragment,null,m.createElement("p",{className:"share-modal-info-text"},m.createElement(g.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),m.createElement(ma,{panel:Nt,initialFolderUid:Jt,onDismiss:Yt})):null);var Xa=e(39285);class ts extends m.PureComponent{constructor(Jt){super(Jt),this.buildUrl=async()=>{const{panel:Yt,dashboard:vn}=this.props,{useCurrentTimeRange:An,useShortUrl:xn,selectedTheme:Un}=this.state,xa=await z(An,Un,Yt,xn),za=J(An,vn.uid,Un,Yt);this.setState({shareUrl:xa,imageUrl:za})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=Yt=>{this.setState({selectedTheme:Yt})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){this.buildUrl()}componentDidUpdate(Jt,Yt){const{useCurrentTimeRange:vn,useShortUrl:An,selectedTheme:xn}=this.state;(Yt.useCurrentTimeRange!==vn||Yt.selectedTheme!==xn||Yt.useShortUrl!==An)&&this.buildUrl()}onCopy(){We("copy_link",ne.link)}render(){const{panel:Jt,dashboard:Yt}=this.props,vn=Yt?Yt.time.to==="now":!1,{useCurrentTimeRange:An,useShortUrl:xn,selectedTheme:Un,shareUrl:xa,imageUrl:za}=this.state,is=ue.wl.pages.SharePanelModal,$a=!!Yt.id,Ta=(0,g.t)("share-modal.link.time-range-label","Lock time range"),as=(0,g.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),la=(0,g.t)("share-modal.link.shorten-url","Shorten URL"),Wa=(0,g.t)("share-modal.link.link-url","Link URL");return m.createElement(m.Fragment,null,m.createElement("p",{className:"share-modal-info-text"},m.createElement(g.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),m.createElement(xe.C,null,m.createElement(Qe.g,{label:Ta,description:vn?as:""},m.createElement(qe.r,{id:"share-current-time-range",value:An,onChange:this.onUseCurrentTimeRangeChange})),m.createElement(Be,{selectedTheme:Un,onChange:this.onThemeChange}),m.createElement(Qe.g,{label:la},m.createElement(qe.r,{id:"share-shorten-url",value:xn,onChange:this.onUrlShorten})),m.createElement(Qe.g,{label:Wa},m.createElement(Me.I,{id:"link-url-input",value:xa,readOnly:!0,addonAfter:m.createElement(Ne.m,{icon:"copy",variant:"primary",getText:this.getShareUrl,onClipboardCopy:this.onCopy},m.createElement(g.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),Jt&&l.default.rendererAvailable&&m.createElement(m.Fragment,null,$a&&m.createElement("div",{className:"gf-form"},m.createElement("a",{href:za,target:"_blank",rel:"noreferrer","aria-label":is.linkToRenderedImage},m.createElement(Xa.J,{name:"camera"}),"\xA0",m.createElement(g.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!$a&&m.createElement(Je.b,{severity:"info",title:(0,g.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},m.createElement(g.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),Jt&&!l.default.rendererAvailable&&m.createElement(Je.b,{severity:"info",title:(0,g.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},m.createElement(g.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the",m.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var ga=e(69084),es=e(9558);const bs="/api/snapshots";class vs extends m.PureComponent{constructor(Jt){super(Jt),this.createSnapshot=Yt=>()=>{const{timeoutSeconds:vn}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,Yt)},vn*1e3)},this.saveSnapshot=async(Yt,vn)=>{const{snapshotExpires:An}=this.state,xn=this.dashboard.getSaveModelClone();this.scrubDashboard(xn);const Un={dashboard:xn,name:xn.title,expires:An,external:vn};try{const xa=await(0,O.i)().post(bs,Un);this.setState({deleteUrl:xa.deleteUrl,snapshotUrl:xa.url,step:2})}finally{We(vn?"publish_snapshot":"local_snapshot",ne.snapshot),this.setState({isLoading:!1})}},this.scrubDashboard=Yt=>{const{panel:vn}=this.props,{snapshotName:An}=this.state;Yt.title=An,Yt.time=(0,k.$t)().timeRange(),Yt.links=[],Yt.panels.forEach(Un=>{Un.targets=[],Un.links=[],Un.datasource=null});const xn=Yt.annotations.list.filter(Un=>Un.enable);if(Yt.annotations.list=xn.map(Un=>({name:Un.name,enable:Un.enable,iconColor:Un.iconColor,snapshotData:Un.snapshotData,type:Un.type,builtIn:Un.builtIn,hide:Un.hide})),Yt.getVariables().forEach(Un=>{"query"in Un&&(Un.query=""),"options"in Un&&(Un.options=Un.current&&!(0,ga.Q)(Un.current)?[Un.current]:[]),"refresh"in Un&&(Un.refresh=Fn.Bd.never)}),vn){const Un=vn.getSaveModel();Un.gridPos.w=24,Un.gridPos.x=0,Un.gridPos.y=0,Un.gridPos.h=20,Yt.panels=[Un]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(Un=>{delete Un.snapshotData}),this.dashboard.annotations.list.forEach(Un=>{delete Un.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:Yt}=this.state;await(0,O.i)().get(Yt),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=Yt=>{this.setState({snapshotName:Yt.target.value})},this.onTimeoutChange=Yt=>{this.setState({timeoutSeconds:Number(Yt.target.value)})},this.onExpireChange=Yt=>{this.setState({selectedExpireOption:Yt,snapshotExpires:Yt.value})},this.dashboard=Jt.dashboard,this.expireOptions=[{label:(0,g.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,g.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,g.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,g.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:Jt.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const Jt=await(0,O.i)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:Jt.externalSnapshotName,externalEnabled:Jt.externalEnabled})}renderStep1(){const{onDismiss:Jt}=this.props,{snapshotName:Yt,selectedExpireOption:vn,timeoutSeconds:An,isLoading:xn,sharingButtonText:Un,externalEnabled:xa}=this.state,za=(0,g.t)("share-modal.snapshot.name","Snapshot name"),is=(0,g.t)("share-modal.snapshot.expire","Expire"),$a=(0,g.t)("share-modal.snapshot.timeout","Timeout (seconds)"),Ta=(0,g.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return m.createElement(m.Fragment,null,m.createElement("div",null,m.createElement("p",{className:"share-modal-info-text"},m.createElement(g.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),m.createElement("p",{className:"share-modal-info-text"},m.createElement(g.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",m.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),m.createElement(Qe.g,{label:za},m.createElement(Me.I,{id:"snapshot-name-input",width:30,value:Yt,onChange:this.onSnapshotNameChange})),m.createElement(Qe.g,{label:is},m.createElement(es.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:vn,onChange:this.onExpireChange})),m.createElement(Qe.g,{label:$a,description:Ta},m.createElement(Me.I,{id:"timeout-input",type:"number",width:21,value:An,onChange:this.onTimeoutChange})),m.createElement(h.u.ButtonRow,null,m.createElement(ze.zx,{variant:"secondary",onClick:Jt,fill:"outline"},m.createElement(g.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),xa&&m.createElement(ze.zx,{variant:"secondary",disabled:xn,onClick:this.createSnapshot(!0)},Un),m.createElement(ze.zx,{variant:"primary",disabled:xn,onClick:this.createSnapshot()},m.createElement(g.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:Jt}=this.state;return m.createElement(m.Fragment,null,m.createElement(Qe.g,{label:(0,g.t)("share-modal.snapshot.url-label","Snapshot URL")},m.createElement(Me.I,{id:"snapshot-url-input",value:Jt,readOnly:!0,addonAfter:m.createElement(Ne.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},m.createElement(g.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),m.createElement("div",{className:"pull-right",style:{padding:"5px"}},m.createElement(g.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",m.createElement(ze.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},m.createElement(g.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return m.createElement("div",{className:"share-modal-header"},m.createElement("p",{className:"share-modal-info-text"},m.createElement(g.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:Jt,step:Yt}=this.state;return m.createElement(m.Fragment,null,Yt===1&&this.renderStep1(),Yt===2&&this.renderStep2(),Yt===3&&this.renderStep3(),Jt&&m.createElement(v.$,{inline:!0}))}}const Za=[],cs=[];function ds(Nt){Za.push(Nt)}function gr(Nt){cs.push(Nt)}function Vs(Nt,Jt){const vn=[{label:(0,g.t)("share-modal.tab-title.link","Link"),value:ne.link,component:ts}];if(b.Vt.isSignedIn&&l.config.snapshotEnabled){const xn=(0,g.t)("share-modal.tab-title.snapshot","Snapshot");vn.push({label:xn,value:ne.snapshot,component:vs})}if(Nt){const xn=(0,g.t)("share-modal.tab-title.embed","Embed");if(vn.push({label:xn,value:ne.embed,component:et}),!(0,un.V)(Nt)){const Un=(0,g.t)("share-modal.tab-title.library-panel","Library panel");vn.push({label:Un,value:ne.libraryPanel,component:Qa})}vn.push(...cs)}else{const xn=(0,g.t)("share-modal.tab-title.export","Export");vn.push({label:xn,value:ne.export,component:Gt}),vn.push(...Za)}l.config.featureToggles.publicDashboards&&vn.push({label:"Public dashboard",value:ne.publicDashboard,component:hn});const An=vn.find(xn=>xn.value===Jt);return{tabs:vn,activeTab:An?.value??vn[0].value}}function Xs(Nt){const{tabs:Jt,activeTab:Yt}=Vs(Nt.panel,Nt.activeTab);return{tabs:Jt,activeTab:Yt}}class rr extends m.Component{constructor(Jt){super(Jt),this.onSelectTab=Yt=>{this.setState(vn=>({...vn,activeTab:Yt.value})),Te(Yt.value)},this.state=Xs(Jt)}getActiveTab(){const{tabs:Jt,activeTab:Yt}=this.state;return Jt.find(vn=>vn.value===Yt)}renderTitle(){const{panel:Jt}=this.props,{activeTab:Yt}=this.state,vn=Jt?(0,g.t)("share-modal.panel.title","Share Panel"):(0,g.t)("share-modal.dashboard.title","Share"),An=Vs(this.props.panel,this.state.activeTab).tabs;return m.createElement(u.H,{title:vn,icon:"share-alt",tabs:An,activeTab:Yt,onChangeTab:this.onSelectTab})}render(){const{dashboard:Jt,panel:Yt}=this.props,An=this.getActiveTab().component;return m.createElement(h.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},m.createElement(C.I,null,m.createElement(An,{dashboard:Jt,panel:Yt,onDismiss:this.props.onDismiss})))}}const qs=(0,x.HE)(rr);var or=e(3706);const oa=({isOpen:Nt,onConfirm:Jt,onDismiss:Yt})=>m.createElement(Xe.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{Jt(),Yt()},onDismiss:Yt,isOpen:Nt});var Ra=e(51201);const $t=(Nt,Jt,Yt)=>{if(Yt!==!1){const vn=Jt.alert&&!l.default.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,An=Jt.alert?"YES":void 0;c.Z.publish(new vt.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:vn,icon:"trash-alt",confirmText:An,yesText:"Remove",onConfirm:()=>$t(Nt,Jt,!1)}));return}Nt.removePanel(Jt),(0,w.WI)((0,Ra.qj)(Jt.key))},Ya=(Nt,Jt)=>{Nt.duplicatePanel(Jt)},Ks=Nt=>{let Jt=Nt;Nt instanceof or.rY&&(Jt=Nt.getSaveModel()),f.Z.set(d.zF,JSON.stringify(Jt)),c.Z.emit(n.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},As=(Nt,Jt)=>{c.Z.publish(new vt.Dn({component:qs,props:{dashboard:Nt,panel:Jt}}))},er=(Nt,Jt)=>{c.Z.publish(new vt.Dn({component:_a,props:{panel:Jt,initialFolderUid:Nt.meta.folderUid,isOpen:!0}}))},ir=Nt=>{c.Z.publish(new vt.Dn({component:oa,props:{onConfirm:()=>Nt.unlinkLibraryPanel(),isOpen:!0}}))},ws=Nt=>{Nt.refresh()},lr=Nt=>{const Jt={...Nt.options};Jt.legend.showLegend===!0?Jt.legend.showLegend=!1:Jt.legend.showLegend=!0,Nt.updateOptions(Jt)};function Ls(Nt,Jt){const Yt={timeInfo:"",timeRange:Jt};if(Nt.timeFrom){const vn=(0,y.J)().replace(Nt.timeFrom,Nt.scopedVars),An=r.describeTextRange(vn);if(An.invalid)return Yt.timeInfo="invalid time override",Yt;if((0,t.isString)(Jt.raw.from)){const xn=(0,a.C_)(Jt.from).tz(),Un=(0,a.C_)(Jt.to).tz(),xa=i.parse(An.from,void 0,xn);Yt.timeInfo=An.display,Yt.timeRange={from:xa,to:i.parse(An.to,void 0,Un),raw:{from:An.from,to:An.to}}}}if(Nt.timeShift){const vn=(0,y.J)().replace(Nt.timeShift,Nt.scopedVars);if(r.describeTextRange(vn).invalid)return Yt.timeInfo="invalid timeshift",Yt;const xn="-"+vn;Yt.timeInfo+=" timeshift "+xn;const Un=i.parseDateMath(xn,Yt.timeRange.from,!1),xa=i.parseDateMath(xn,Yt.timeRange.to,!0);Yt.timeRange={from:Un,to:xa,raw:{from:Un,to:xa}}}return Nt.hideTimeOverride&&(Yt.timeInfo=""),Yt}function Vr(Nt){const Yt=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return Nt.maxDataPoints?Nt.maxDataPoints:Math.ceil(Yt*(Nt.gridPos.w/24))}function Xr(Nt,Jt){const Yt=Nt.plugin&&Nt.plugin.noPadding?0:config.theme.panelPadding*2,vn=Nt.hasTitle()?config.theme.panelHeaderHeight:0;return Jt-vn-Yt-PANEL_BORDER}function Or(Nt){for(const Yt of Nt.panelIterator())Yt.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},20111:(X,L,e)=>{"use strict";e.d(L,{O:()=>r});var t=e(92403),n=e(77877);const r=(a,i)=>{const y={from:(0,t.v9)(a.from)?(0,t.CQ)(a.from):a.from,to:(0,t.v9)(a.to)?(0,t.CQ)(a.to):a.to},c=i?i.getTimezone():void 0;return{from:n.parse(y.from,!1,c,i?.fiscalYearStartMonth),to:n.parse(y.to,!0,c,i?.fiscalYearStartMonth),raw:y}}},7635:(X,L,e)=>{"use strict";e.d(L,{DK:()=>y,eM:()=>i,dg:()=>c});var t=e(36497),n=e(53305);function r(l){const d=new Set;return Object.keys(l).forEach(f=>{l[f].forEach(m=>{d.add(m)})}),d}function a(l){const d=Array.from(r(l));return d.length===1?d[0]:`${d.slice(0,-1).join(", ")} or ${d.slice(-1)}`}function i(l){return new t.y(d=>{let f=0;Promise.all([e.e(7452),e.e(4833)]).then(e.bind(e,47452)).then(m=>{l.forEach(u=>{const h=new FileReader;h.readAsArrayBuffer(u),h.onload=()=>{const C=h.result;if(C&&C instanceof ArrayBuffer){if(u.type==="application/json"){const x=new TextDecoder("utf-8"),b=JSON.parse(x.decode(C));d.next({dataFrames:[(0,n.g0)(b)],file:u})}else d.next({dataFrames:m.readSpreadsheet(C),file:u});++f>=l.length&&d.complete()}}})}).catch(()=>{throw"Failed to load sheets module"})})}const y={"text/plain":[".csv",".txt"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"],"application/vnd.apple.numbers":[".numbers"],"application/vnd.oasis.opendocument.spreadsheet":[".ods"],"application/json":[".json"]},c=5e5},11286:(X,L,e)=>{"use strict";e.d(L,{q:()=>Zt});var t=e(39953),n=e(39458),r=e(50820),a=e(41407),i=e(41056),y=e(30064),c=e(17037),l=e(76941),d=e(75766),f=e(72639),m=e(82803),u=e(38637),h=e(39285),C=e(70393),x=e(64447),b=e(39106),g=e(4919),p=e(26843),v=e(23997);function E(){const re=(0,t.useRef)(new v.x);return{keyboardEvents:re.current,onKeyDown:Te=>{switch(Te.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":re.current.next(Te);default:}}}}function P(re,Te,We){const Je=useRef({x:0,y:-1}),[je,pt]=useState({x:0,y:-1}),ft=useRef();return useEffect(()=>{ft.current=We.view.fields.url,Je.current.x=0,Je.current.y=-1,pt({...Je.current})},[We]),useEffect(()=>{const Tt=re.subscribe({next:Ye=>{switch(Ye?.code){case"ArrowDown":{Je.current.y++,pt({...Je.current});break}case"ArrowUp":Je.current.y=Math.max(0,Je.current.y-1),pt({...Je.current});break;case"ArrowRight":{Te>0&&(Je.current.x=Math.min(Te,Je.current.x+1),pt({...Je.current}));break}case"ArrowLeft":{Te>0&&(Je.current.x=Math.max(0,Je.current.x-1),pt({...Je.current}));break}case"Enter":if(!ft.current)break;const Ce=Je.current.x*Te+Je.current.y;if(Ce<0){Je.current.x=0,Je.current.y=0,pt({...Je.current});break}const oe=ft.current.values?.[Ce];oe&&locationService.push(locationUtil.stripBaseFromUrl(oe))}}});return()=>Tt.unsubscribe()},[re,Te]),je}var S=e(39064),M=e(973),R=e(26205);const I="grafana.features.datasources.components.picker.DataSourceDropDown.history";function A(){const[re=[],Te]=(0,M.Z)(I,[]),We=(0,t.useCallback)(Je=>{Je.meta.builtIn||(re.includes(Je.uid)?(re.splice(re.findIndex(je=>Je.uid===je),1),Te([...re,Je.uid])):Te([...re,Je.uid].slice(1,6)))},[re,Te]);return[re,We]}function O(re){return(0,R.F)().getList(re)}function N(re){const Te=(0,R.F)();return Te.getInstanceSettings(re)}function o(re){const{keyboardEvents:Te,containerRef:We}=re,Je=(0,t.useRef)(0),je="data-role",pt="keyboardSelectableItem",ft={[je]:pt},Tt=`[${je}="${pt}"`,Ye="data-selectedItem",Ce=`[${Ye}="true"]`,oe=(0,t.useCallback)(Re=>{const ae=We?.current?.querySelectorAll(Tt),ve=ae?.item(Re%ae?.length);ae?.forEach(xe=>xe.setAttribute(Ye,"false")),ve&&(ve.scrollIntoView({block:"center"}),ve.setAttribute(Ye,"true"))},[We,Tt]),pe=(0,t.useCallback)(()=>{We?.current?.querySelector(Ce)?.querySelector("button")?.click()},[We,Ce]);return(0,t.useEffect)(()=>{if(!Te)return;const Re=Te.subscribe({next:ae=>{switch(ae?.code){case"ArrowDown":{oe(++Je.current),ae.preventDefault();break}case"ArrowUp":Je.current=Je.current>0?Je.current-1:Je.current,oe(Je.current),ae.preventDefault();break;case"Enter":pe();break}}});return()=>Re.unsubscribe()},[Te,oe,pe]),(0,t.useEffect)(()=>{const Re=new MutationObserver(ae=>{ae.some(xe=>xe.addedNodes&&xe.addedNodes.length>0||xe.removedNodes&&xe.removedNodes.length>0)&&oe(0)});return We.current&&Re.observe(We.current,{childList:!0}),()=>{Re.disconnect()}},[We,Tt,oe]),[ft,Ce]}var w=e(79059),K=e(21308),V=e(91473),_=e(21527);function U({variant:re,onClick:Te}){const We=K.Vt.hasPermission(_.AccessControlAction.DataSourcesCreate),Je=V.Z.DataSourcesNew;return t.createElement(g.Qj,{variant:re||"primary",href:Je,disabled:!We,tooltip:We?void 0:"You do not have permission to configure new data sources",onClick:Te,target:"_blank"},"Configure a new data source")}var $=e(4236),k=e(3532);function H({ds:re,onClick:Te,selected:We,description:Je,...je}){const pt=(0,m.l4)(),ft=j(pt,re.meta.builtIn);return t.createElement($.Z,{key:re.uid,onClick:Te,className:(0,a.cx)(ft.card,We?ft.selected:void 0),...je},t.createElement($.Z.Heading,{className:ft.heading},t.createElement("div",{className:ft.headingContent},t.createElement("span",{className:ft.name},re.name," ",re.isDefault?t.createElement(k.P,{tags:["default"]}):null),t.createElement("small",{className:ft.type},Je||re.meta.name))),t.createElement($.Z.Figure,{className:ft.logo},t.createElement("img",{src:re.meta.info.logos.small,alt:`${re.meta.name} Logo`})))}function j(re,Te=!1){return{card:(0,a.css)`
      cursor: pointer;
      background-color: ${re.colors.background.primary};
      border-bottom: 1px solid ${re.colors.border.weak};
      // Move to list component
      margin-bottom: 0;
      border-radius: 0;
      padding: ${re.spacing(1)};
    `,heading:(0,a.css)`
      width: 100%;
      overflow: hidden;
      // This is needed to enable ellipsis when text overlfows
      > button {
        width: 100%;
      }
    `,headingContent:(0,a.css)`
      color: ${re.colors.text.secondary};
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      justify-content: space-between;
    `,logo:(0,a.css)`
      width: 32px;
      height: 32px;
      padding: ${re.spacing(0,1)};
      display: flex;
      align-items: center;

      > img {
        max-height: 100%;
        min-width: 24px;
        filter: invert(${Te&&re.isLight?1:0});
      }
    `,name:(0,a.css)`
      color: ${re.colors.text.primary};
      display: flex;
      gap: ${re.spacing(2)};
    `,type:(0,a.css)`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      align-items: center;
    `,separator:(0,a.css)`
      margin: 0 ${re.spacing(1)};
      color: ${re.colors.border.weak};
    `,selected:(0,a.css)`
      background-color: ${re.colors.background.secondary};
    `,meta:(0,a.css)`
      display: block;
      overflow-wrap: unset;
      white-space: nowrap;
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
    `}}function z(re,Te){return!re||!Te?!1:typeof Te=="string"?re.uid===Te:re.uid===Te.uid}function F(re){if(re){if(typeof re=="string")return`${re} - not found`;if("name"in re)return re.name;if(re.uid)return`${re.uid} - not found`}}function J(re,Te,We){return(je,pt)=>{const ft=je.name.toUpperCase(),Tt=pt.name.toUpperCase();if(re&&z(je,re))return-1;if(re&&z(pt,re))return 1;const Ye=Te.indexOf(je.uid),Ce=Te.indexOf(pt.uid);if(Ye>-1&&Ye>Ce)return-1;if(Ce>-1&&Ce>Ye)return 1;const oe=We.includes(je.uid),pe=We.includes(pt.uid);return oe&&!pe?-1:pe&&!oe||je.meta.builtIn&&!pt.meta.builtIn?1:pt.meta.builtIn&&!je.meta.builtIn||ft<Tt?-1:1}}function Q(re,Te=""){return re.name.toLowerCase().includes(Te.toLowerCase())}function Z(re){const Te=(0,t.useRef)(null),[We,Je]=o({keyboardEvents:re.keyboardEvents,containerRef:Te}),je=(0,m.l4)(),pt=Pe(je,Je),{className:ft,current:Tt,onChange:Ye,enableKeyboardNavigation:Ce,onClickEmptyStateCTA:oe}=re,pe=O({alerting:re.alerting,annotations:re.annotations,dashboard:re.dashboard,logs:re.logs,metrics:re.metrics,mixed:re.mixed,pluginId:re.pluginId,tracing:re.tracing,type:re.type,variables:re.variables}),[Re,ae]=A(),ve=re.filter?pe.filter(re.filter):pe;return t.createElement("div",{ref:Te,className:(0,a.cx)(ft,pt.container),"data-testid":"data-sources-list"},ve.length===0&&t.createElement(ne,{className:pt.emptyState,onClickCTA:oe}),ve.sort(J(Tt,Re,de())).map(xe=>t.createElement(H,{"data-testid":"data-source-card",key:xe.uid,ds:xe,onClick:()=>{ae(xe),Ye(xe)},selected:z(xe,Tt),...Ce?We:{}})))}function ne({className:re,onClickCTA:Te}){const We=(0,m.wW)(ee);return t.createElement("div",{className:(0,a.cx)(re,We.container)},t.createElement("p",{className:We.message},"No data sources found"),t.createElement(U,{onClick:Te}))}function ee(re){return{container:(0,a.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    `,message:(0,a.css)`
      margin-bottom: ${re.spacing(3)};
    `}}function de(){return(0,w.J)().getVariables().filter(Te=>Te.type==="datasource").map(Te=>`\${${Te.id}}`)}function Pe(re,Te){return{container:(0,a.css)`
      display: flex;
      flex-direction: column;
      ${Te} {
        background-color: ${re.colors.background.secondary};
      }
    `,emptyState:(0,a.css)`
      height: 100%;
      flex: 1;
    `}}function ye(re){const{dataSource:Te}=re,We=(0,m.l4)(),Je=me(We,Te?.meta.builtIn);return Te?t.createElement("img",{className:Je.pickerDSLogo,alt:`${Te.meta.name} logo`,src:Te.meta.info.logos.small}):he()}function he(){const re=(0,m.wW)(me);return t.createElement("div",{className:re.pickerDSLogo})}function me(re,Te=!1){return{pickerDSLogo:(0,a.css)`
      height: 20px;
      width: 20px;
      filter: invert(${Te&&re.isLight?1:0});
    `}}var De=e(86832),le=e(32688),Ee=e(73075),be=e(17789),ge=e(7635),ue=e(65355);const Ie={grafana:"Discover visualizations using mock data","-- Mixed --":"Use multiple data sources","-- Dashboard --":"Reuse query results from other visualizations"};function ot({className:re,current:Te,onChange:We,tracing:Je,dashboard:je,mixed:pt,metrics:ft,type:Tt,annotations:Ye,variables:Ce,alerting:oe,pluginId:pe,logs:Re,filter:ae}){const xe=O({tracing:Je,dashboard:je,mixed:pt,metrics:ft,type:Tt,annotations:Ye,variables:Ce,alerting:oe,pluginId:pe,logs:Re}).filter(Ge=>(ae?ae?.(Ge):!0)&&!!Ge.meta.builtIn);return t.createElement("div",{className:re,"data-testid":"built-in-data-sources-list"},xe.map(Ge=>t.createElement(H,{key:Ge.uid,ds:Ge,description:Ie[Ge.uid],selected:z(Ge,Te),onClick:()=>We(Ge)})))}const Qe="dashboards_dspickermodal_clicked",Me={SELECT_DS:"select_ds",UPLOAD_FILE:"upload_file",CONFIG_NEW_DS:"config_new_ds",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state",SEARCH:"search",DISMISS:"dismiss"};function Ne({tracing:re,dashboard:Te,mixed:We,metrics:Je,type:je,annotations:pt,variables:ft,alerting:Tt,pluginId:Ye,logs:Ce,uploadFile:oe,filter:pe,onChange:Re,current:ae,onDismiss:ve,reportedInteractionFrom:xe}){const Ge=(0,m.wW)(qe),[at,dt]=(0,t.useState)(""),st=xe||"modal",Pt=()=>{ve(),(0,f.ff)(Qe,{item:Me.DISMISS,src:st})},we=lt=>{Re(lt),(0,f.ff)(Qe,{item:Me.SELECT_DS,ds_type:lt.type,src:st})},Le=t.useMemo(()=>(0,De.once)(()=>{(0,f.ff)(Qe,{item:"search",src:st})}),[st]),Ke=N("-- Grafana --"),ht=(0,ue.k)((lt,Rt)=>{Ke&&(Re(Ke,[lt]),(0,f.ff)(Qe,{item:Me.UPLOAD_FILE,src:st}),Rt.length<1&&ve())}),xt=({className:lt})=>t.createElement(ot,{className:lt,onChange:we,current:ae,filter:pe,variables:ft,tracing:re,metrics:Je,type:je,annotations:pt,alerting:Tt,pluginId:Ye,logs:Ce,dashboard:Te,mixed:We});return t.createElement(Ee.u,{title:"Select data source",closeOnEscape:!0,closeOnBackdropClick:!0,isOpen:!0,className:Ge.modal,contentClassName:Ge.modalContent,onClickBackdrop:Pt,onDismiss:Pt},t.createElement("div",{className:Ge.leftColumn},t.createElement(u.I,{type:"search",autoFocus:!0,className:Ge.searchInput,value:at,prefix:t.createElement(h.J,{name:"search"}),placeholder:"Search data source",onChange:lt=>{dt(lt.currentTarget.value),Le()}}),t.createElement(x.$,null,t.createElement(Z,{onChange:we,current:ae,onClickEmptyStateCTA:()=>(0,f.ff)(Qe,{item:Me.CONFIG_NEW_DS_EMPTY_STATE,src:st}),filter:lt=>(pe?pe?.(lt):!0)&&Q(lt,at)&&!lt.meta.builtIn,variables:ft,tracing:re,metrics:Je,type:je,annotations:pt,alerting:Tt,pluginId:Ye,logs:Ce,dashboard:Te,mixed:We}),t.createElement(xt,{className:Ge.appendBuiltInDataSourcesList}))),t.createElement("div",{className:Ge.rightColumn},t.createElement("div",{className:Ge.builtInDataSources},t.createElement(x.$,{className:Ge.builtInDataSourcesList},t.createElement(xt,null)),oe&&le.config.featureToggles.editPanelCSVDragAndDrop&&t.createElement(be.Yo,{readAs:"readAsArrayBuffer",fileListRenderer:()=>{},options:{maxSize:ge.dg,multiple:!1,accept:ge.DK,onDrop:ht}},t.createElement(be.A_,null))),t.createElement("div",{className:Ge.newDSSection},t.createElement("span",{className:Ge.newDSDescription},"Open a new tab and configure a data source"),t.createElement(U,{variant:"secondary",onClick:()=>{(0,f.ff)(Qe,{item:Me.CONFIG_NEW_DS,src:st}),ve()}}))))}function qe(re){return{modal:(0,a.css)`
      width: 80%;
      height: 80%;
      max-width: 1200px;
      max-height: 900px;

      ${re.breakpoints.down("md")} {
        width: 100%;
      }
    `,modalContent:(0,a.css)`
      display: flex;
      flex-direction: row;
      height: 100%;

      ${re.breakpoints.down("md")} {
        flex-direction: column;
      }
    `,leftColumn:(0,a.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      padding-right: ${re.spacing(4)};
      border-right: 1px solid ${re.colors.border.weak};

      ${re.breakpoints.down("md")} {
        width: 100%;
        border-right: 0;
        padding-right: 0;
        flex: 1;
        overflow-y: auto;
      }
    `,rightColumn:(0,a.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      justify-items: space-evenly;
      align-items: stretch;
      padding-left: ${re.spacing(4)};

      ${re.breakpoints.down("md")} {
        width: 100%;
        padding-left: 0;
        flex: 0;
      }
    `,builtInDataSources:(0,a.css)`
      flex: 1 1;
      margin-bottom: ${re.spacing(4)};

      ${re.breakpoints.down("md")} {
        flex: 0;
      }
    `,builtInDataSourcesList:(0,a.css)`
      ${re.breakpoints.down("md")} {
        display: none;
        margin-bottom: 0;
      }

      margin-bottom: ${re.spacing(4)};
    `,appendBuiltInDataSourcesList:(0,a.css)`
      ${re.breakpoints.up("md")} {
        display: none;
      }
    `,newDSSection:(0,a.css)`
      display: flex;
      flex-direction: row;
      width: 100%;
      justify-content: space-between;
      align-items: center;
    `,newDSDescription:(0,a.css)`
      flex: 1 0;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      color: ${re.colors.text.secondary};
    `,searchInput:(0,a.css)`
      width: 100%;
      min-height: 32px;
      margin-bottom: ${re.spacing(1)};
    `}}var bt=e(87115);const Fe=20,Ve=200,Ue={name:"maxSize",enabled:!0,phase:"main",requires:["offset","preventOverflow","flip"],fn({state:re,name:Te,options:We}){const Je=(0,bt.Z)(re,We),{x:je,y:pt}=re.modifiersData.preventOverflow||{x:0,y:0},{width:ft,height:Tt}=re.rects.popper,{width:Ye}=re.rects.reference,[Ce]=re.placement.split("-"),oe=Ce==="left"?"left":"right",pe=Ce==="top"?"top":"bottom";re.modifiersData[Te]={maxWidth:ft-Je[oe]-je,maxHeight:Tt-Je[pe]-pt,minWidth:Ye}}},it={name:"applyMaxSize",enabled:!0,phase:"beforeWrite",requires:["maxSize"],fn({state:re}){const{maxHeight:Te,maxWidth:We,minWidth:Je}=re.modifiersData.maxSize;re.styles.popper.maxHeight??=`${Te-Fe}px`,re.styles.popper.minHeight??=`${Ve}px`,re.styles.popper.maxWidth??=We,re.styles.popper.minWidth??=Je}},ze="dashboards_dspicker_clicked",Xe={OPEN_DROPDOWN:"open_dspicker",SELECT_DS:"select_ds",ADD_FILE:"add_file",OPEN_ADVANCED_DS_PICKER:"open_advanced_ds_picker",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state"};function St(re){const{current:Te,onChange:We,hideTextValue:Je=!1,width:je,inputId:pt,noDefault:ft=!1,disabled:Tt=!1,placeholder:Ye="Select data source",...Ce}=re,oe=(0,m.wW)(ln=>Bt(ln,re)),[pe,Re]=(0,t.useState)(!1),[ae,ve]=(0,t.useState)(!1),[xe,Ge]=(0,t.useState)(""),{onKeyDown:at,keyboardEvents:dt}=E(),st=(0,t.useRef)(null),[Pt,we]=(0,t.useState)(),[Le,Ke]=(0,t.useState)(),[ht,xt]=(0,t.useState)(),lt=N(Te),Rt=N("-- Grafana --"),Ut=!Te&&ft?void 0:lt,Xt=xe&&pe?t.createElement(he,null):t.createElement(ye,{dataSource:Ut}),$n=(0,l.D)(Pt,Le,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}},Ue,it]}),Mt=(0,t.useCallback)(()=>{Ge(""),Re(!1),Pt?.focus()},[Re,Pt]),{overlayProps:yt,underlayProps:At}=(0,c.Ir)({onClose:Mt,isDismissable:!0,isOpen:pe,shouldCloseOnInteractOutside:ln=>Pt?!Pt.isSameNode(ln):!1},st),{dialogProps:Ht}=(0,i.R)({"aria-label":"Opened data source picker list"},st);function tn(){(0,f.ff)(ze,{item:Xe.OPEN_DROPDOWN}),Re(!0),Pt?.focus()}function gn(){Rt&&We(Rt,[S.ip])}function mn(ln){ln.key==="Tab"&&!ln.shiftKey&&pe&&(ln.preventDefault(),ht?.focus()),ln.key==="Tab"&&ln.shiftKey&&pe&&Mt(),at(ln)}function Tn(ln){ln.shiftKey?(ln.preventDefault(),Pt?.focus()):Mt()}return(0,t.useEffect)(()=>{const ln=dt.subscribe({next:Wn=>{switch(Wn?.code){case"ArrowDown":tn(),Wn.preventDefault();break;case"ArrowUp":tn(),Wn.preventDefault();break;case"Escape":Mt(),Wn.preventDefault();break}}});return()=>ln.unsubscribe()}),t.createElement("div",{className:oe.container,"data-testid":d.wl.components.DataSourcePicker.container},t.createElement("div",{className:oe.trigger,onClick:tn},t.createElement(u.I,{id:pt||"data-source-picker",className:ae?void 0:oe.input,"data-testid":d.wl.components.DataSourcePicker.inputV2,"aria-label":"Select a data source",prefix:Ut?Xt:void 0,suffix:t.createElement(h.J,{name:pe?"search":"angle-down"}),placeholder:Je?"":F(Ut)||Ye,onFocus:()=>{ve(!0)},onBlur:()=>{ve(!1)},onKeyDown:mn,value:xe,onChange:ln=>{tn(),Ge(ln.currentTarget.value)},ref:we,disabled:Tt})),pe?t.createElement(C.h_,null,t.createElement("div",{...At}),t.createElement("div",{ref:st,...yt,...Ht},t.createElement(zt,{...Ce,...$n.attributes.popper,style:$n.styles.popper,ref:Ke,footerRef:xt,current:Ut,filterTerm:xe,keyboardEvents:dt,onChange:(ln,Wn)=>{Mt(),ln.uid!==Ut?.uid&&(We(ln,Wn),(0,f.ff)(ze,{item:Xe.SELECT_DS,ds_type:ln.type}))},onClose:Mt,onClickAddCSV:gn,onDismiss:Mt,onNavigateOutsiteFooter:Tn}))):null)}function Bt(re,Te){return{container:(0,a.css)`
      position: relative;
      cursor: ${Te.disabled?"not-allowed":"pointer"};
      width: ${re.spacing(Te.width||"auto")};
    `,trigger:(0,a.css)`
      cursor: pointer;
      ${Te.disabled&&"pointer-events: none;"}
    `,input:(0,a.css)`
      input::placeholder {
        color: ${Te.disabled?re.colors.action.disabledText:re.colors.text.primary};
      }
    `}}const zt=t.forwardRef((re,Te)=>{const{filterTerm:We,onChange:Je,onClose:je,onClickAddCSV:pt,current:ft,filter:Tt}=re,Ye=(0,t.useCallback)(pe=>{Je(pe)},[Je]),Ce=(0,t.useCallback)(()=>{pt?.(),je(),(0,f.ff)(ze,{item:Xe.ADD_FILE})},[pt,je]),oe=(0,m.wW)(qt);return t.createElement("div",{style:re.style,ref:Te,className:oe.container},t.createElement(x.$,null,t.createElement(Z,{...re,enableKeyboardNavigation:!0,className:oe.dataSourceList,current:ft,onChange:Ye,filter:pe=>(Tt?Tt?.(pe):!0)&&Q(pe,We),onClickEmptyStateCTA:()=>(0,f.ff)(ze,{item:Xe.CONFIG_NEW_DS_EMPTY_STATE})})),t.createElement(y.MT,null,t.createElement(Qt,{...re,onClickAddCSV:Ce,onChange:Ye,onNavigateOutsiteFooter:re.onNavigateOutsiteFooter})))});zt.displayName="PickerContent";function qt(re){return{container:(0,a.css)`
      display: flex;
      flex-direction: column;
      background: ${re.colors.background.primary};
      box-shadow: ${re.shadows.z3};
    `,picker:(0,a.css)`
      background: ${re.colors.background.secondary};
    `,dataSourceList:(0,a.css)`
      flex: 1;
    `,footer:(0,a.css)`
      flex: 0;
      display: flex;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: ${re.spacing(1.5)};
      border-top: 1px solid ${re.colors.border.weak};
      background-color: ${re.colors.background.secondary};
    `}}function Qt({onClose:re,onChange:Te,onClickAddCSV:We,...Je}){const je=(0,m.wW)(yn),pt=Je.uploadFile&&r.default.featureToggles.editPanelCSVDragAndDrop,ft=Ye=>{Ye.key==="Tab"&&Je.onNavigateOutsiteFooter(Ye)},Tt=Ye=>{Ye.key==="Tab"&&Ye.shiftKey&&Je.onNavigateOutsiteFooter(Ye)};return t.createElement("div",{className:je.footer},t.createElement(b.JY,null,({showModal:Ye,hideModal:Ce})=>t.createElement(g.zx,{size:"sm",variant:"secondary",fill:"text",onClick:()=>{re(),Ye(Ne,{reportedInteractionFrom:"ds_picker",tracing:Je.tracing,dashboard:Je.dashboard,mixed:Je.mixed,metrics:Je.metrics,type:Je.type,annotations:Je.annotations,variables:Je.variables,alerting:Je.alerting,pluginId:Je.pluginId,logs:Je.logs,filter:Je.filter,uploadFile:Je.uploadFile,current:Je.current,onDismiss:Ce,onChange:(oe,pe)=>{Te(oe,pe),Ce()}}),(0,f.ff)(ze,{item:Xe.OPEN_ADVANCED_DS_PICKER})},ref:Je.footerRef,onKeyDown:pt?Tt:ft},t.createElement(p.cC,{i18nKey:"data-source-picker.open-advanced-button"},"Open advanced data source picker"),t.createElement(h.J,{name:"arrow-right"}))),pt&&t.createElement(g.zx,{variant:"secondary",size:"sm",onClick:We,onKeyDown:ft},"Add csv or spreadsheet"))}function yn(re){return{footer:(0,a.css)`
      flex: 0;
      display: flex;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: ${re.spacing(1.5)};
      border-top: 1px solid ${re.colors.border.weak};
      background-color: ${re.colors.background.secondary};
    `}}function Zt(re){return r.config.featureToggles.advancedDataSourcePicker?t.createElement(St,{...re}):t.createElement(n.q,{...re})}},96483:(X,L,e)=>{"use strict";e.d(L,{Aq:()=>S,ZP:()=>R,rl:()=>a});var t=e(77960),n=e(94562);const r={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},a=(0,t.PH)("dataSources/dataSourceLoaded"),i=(0,t.PH)("dataSources/dataSourcesLoad"),y=(0,t.PH)("dataSources/dataSourcesLoaded"),c=(0,t.PH)("dataSources/dataSourceMetaLoaded"),l=(0,t.PH)("dataSources/dataSourcePluginsLoad"),d=(0,t.PH)("dataSources/dataSourcePluginsLoaded"),f=(0,t.PH)("dataSources/setDataSourcesSearchQuery"),m=(0,t.PH)("dataSources/setDataSourcesLayoutMode"),u=(0,t.PH)("dataSources/setDataSourceTypeSearchQuery"),h=(0,t.PH)("dataSources/setDataSourceName"),C=(0,t.PH)("dataSources/setIsDefault"),x=(0,t.PH)("dataSources/setIsSortAscending"),b=(I=r,A)=>i.match(A)?{...I,isLoadingDataSources:!0}:y.match(A)?{...I,isLoadingDataSources:!1,dataSources:A.payload,dataSourcesCount:A.payload.length}:a.match(A)?{...I,dataSource:A.payload}:f.match(A)?{...I,searchQuery:A.payload}:m.match(A)?{...I,layoutMode:A.payload}:l.match(A)?{...I,plugins:[],isLoadingDataSourcePlugins:!0}:d.match(A)?{...I,plugins:A.payload.plugins,categories:A.payload.categories,isLoadingDataSourcePlugins:!1}:u.match(A)?{...I,dataSourceTypeSearchQuery:A.payload}:c.match(A)?{...I,dataSourceMeta:A.payload}:h.match(A)?{...I,dataSource:{...I.dataSource,name:A.payload}}:C.match(A)?{...I,dataSource:{...I.dataSource,isDefault:A.payload}}:x.match(A)?{...I,isSortAscending:A.payload}:I,g={testingStatus:{},loadError:null,loading:!0,plugin:null},p=(0,t.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),v=(0,t.PH)("dataSourceSettings/initDataSourceSettingsFailed"),E=(0,t.PH)("dataSourceSettings/testDataSourceStarting"),P=(0,t.PH)("dataSourceSettings/testDataSourceSucceeded"),S=(0,t.PH)("dataSourceSettings/testDataSourceFailed"),R={dataSources:b,dataSourceSettings:(I=g,A)=>p.match(A)?{...I,plugin:A.payload,loadError:null,loading:!1}:v.match(A)?{...I,plugin:null,loadError:A.payload.message,loading:!1}:E.match(A)?{...I,testingStatus:{message:"Testing... this could take up to a couple of minutes",status:"info"}}:P.match(A)?{...I,testingStatus:{status:A.payload?.status,message:A.payload?.message,details:A.payload?.details}}:S.match(A)?{...I,testingStatus:{status:"error",message:A.payload?.message,details:A.payload?.details}}:I}},23482:()=>{"use strict"},29080:(X,L,e)=>{"use strict";e.d(L,{L:()=>l});var t=e(41407),n=e(39953),r=e(82803),a=e(9558),i=e(69360),y=e(29711);const c={label:"Fixed color",value:"_____fixed_____"},l=f=>{const{value:m,context:u,onChange:h}=f,C="dark-green",x=(0,r.wW)(d),b=m?.field,g=!b,p=(0,y.IX)(u.data),v=(0,y.nw)(p,b,c),E=(0,n.useCallback)(M=>{const R=M.value;if(R&&R!==c.value)h({...m,field:R});else{const I=m?.fixed??C;h({...m,field:void 0,fixed:I})}},[h,m]),P=(0,n.useCallback)(M=>{h({field:void 0,fixed:M??C})},[h]),S=g?c:v.find(M=>M.value===b);return n.createElement(n.Fragment,null,n.createElement("div",{className:x.container},n.createElement(a.Ph,{value:S,options:v,onChange:E,noOptionsMessage:"No fields found"}),g&&n.createElement("div",{className:x.picker},n.createElement(i.zH,{color:m?.fixed??C,onChange:P,enableNamedColors:!0}))))},d=f=>({container:(0,t.css)`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:(0,t.css)`
    padding-left: 8px;
  `})},57346:(X,L,e)=>{"use strict";e.d(L,{E:()=>x});var t=e(41407),n=e(39953),r=e(82803),a=e(4919),i=e(74661),y=e(69171),c=e(38637),l=e(66557),d=e(55407),f=e(58842),m=e(65132),u=e(47850),h=e(11925),C=e(44207);const x=p=>{const{value:v,src:E,name:P,placeholder:S,onChange:M,onClear:R,mediaType:I,folderName:A,size:O,color:N}=p,o=(0,r.wW)(g),w=(0,r.l4)(),K=(0,n.createRef)(),V=n.createElement(C.Y,{onChange:M,value:v,mediaType:I,folderName:A});let _=E;!_&&v&&(_=(0,u.t)(v));const U=N&&{fill:w.visualization.getColorByName(N)},$=()=>v&&_?n.createElement(m.V,{src:_,className:o.icon,style:{...U}}):n.createElement(a.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),k=()=>n.createElement(i.Z,null,n.createElement(y._,{label:null,grow:!0},n.createElement(c.I,{value:b(E,P),placeholder:S,readOnly:!0,prefix:_&&n.createElement(m.V,{src:_,className:o.icon,style:{...U}}),suffix:n.createElement(a.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:R})})));return n.createElement(l.D,{content:V},(H,j,z)=>n.createElement(n.Fragment,null,K.current&&n.createElement(d.J,{...z,referenceElement:K.current,onMouseEnter:H,onKeyDown:F=>{(0,f.i)(F,j)}}),n.createElement("div",{ref:K,className:o.pointer,onClick:H,onKeyDown:F=>{F.key==="Enter"&&H()},role:"button",tabIndex:0},O===h.zc.SMALL&&$(),O===h.zc.NORMAL&&k())))};function b(p,v){if(p?.startsWith("public/img/icons")){const E=v?.lastIndexOf(".svg")??0;if(E>0)return v.substring(0,E)}return v}const g=p=>({pointer:(0,t.css)`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:(0,t.css)`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},44207:(X,L,e)=>{"use strict";e.d(L,{Y:()=>$});var t=e(41407),n=e(41056),r=e(30064),a=e(17037),i=e(39953),y=e(4148),c=e(82803),l=e(4919),d=e(50820),f=e(11925),m=e(96227),u=e(17789),h=e(65132);function C({secondaryText:H="Drag and drop here or browse"}){const j=(0,c.wW)(b);return i.createElement("div",{className:j.iconWrapper},i.createElement("small",{className:j.small},H),i.createElement(l.zx,{type:"button",icon:"upload"},"Upload"))}const x=({mediaType:H,setFormData:j,setUpload:z,error:F})=>{const J=(0,c.wW)(b),[Q,Z]=(0,i.useState)(!1),[ne,ee]=(0,i.useState)(""),de=()=>i.createElement(m.g,{label:"Preview"},i.createElement("div",{className:J.iconPreview},H===f.DD.Icon&&i.createElement(h.V,{src:ne,className:J.img}),H===f.DD.Image&&i.createElement("img",{src:ne,alt:"Preview of the uploaded file",className:J.img}))),Pe=he=>{fetch(`/api/storage/delete/upload/${he.file.name}`,{method:"DELETE"}).catch(me=>console.error("cannot delete file",me))},ye=H==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return i.createElement(u.Yo,{readAs:"readAsBinaryString",onFileRemove:Pe,options:{accept:ye,multiple:!1,onDrop:he=>{let me=new FormData;me.append("file",he[0]),ee(URL.createObjectURL(he[0])),Z(!0),j(me),z(!0)}}},F.message!==""&&Q?i.createElement("p",null,F.message):Q?i.createElement(de,null):i.createElement(C,null))};function b(H,j){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:(0,t.css)`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${H.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${H.colors.border.medium};
      background-color: ${j?H.colors.background.secondary:H.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:(0,t.css)`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:(0,t.css)`
      margin: ${H.spacing(2,0,1)};
    `,small:(0,t.css)`
      color: ${H.colors.text.secondary};
      margin-bottom: ${H.spacing(2)};
    `,iconContainer:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:(0,t.css)`
      width: 238px;
      height: 198px;
      border: 1px solid ${H.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:(0,t.css)`
      width: 147px;
      height: 147px;
      fill: ${H.colors.text.primary};
    `}}var g=e(9558),p=e(41245),v=e(52436),E=e(19977),P=e(68084),S=e(64084);const M=(0,i.memo)(function(j){const{columnIndex:z,rowIndex:F,style:J,data:Q}=j,{cards:Z,columnCount:ne,onChange:ee,selected:de}=Q,Pe=z+F*ne,ye=Z[Pe],he=(0,c.l4)(),me=R(he);return i.createElement("div",{style:J},ye&&i.createElement("div",{key:ye.value,className:de===ye.value?(0,t.cx)(me.card,me.selected):me.card,onClick:()=>ee(ye.value),onKeyDown:De=>{De.key==="Enter"&&ee(ye.value)},role:"button",tabIndex:0},ye.imgUrl.endsWith(".svg")?i.createElement(h.V,{src:ye.imgUrl,className:me.img}):i.createElement("img",{src:ye.imgUrl,alt:"",className:me.img}),i.createElement("h6",{className:me.text},ye.label.slice(0,-4))))},P.wy),R=(0,S.B)(H=>({card:(0,t.css)`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${H.colors.action.hover};
        box-shadow: ${H.shadows.z2};
      }
    `,selected:(0,t.css)`
      border: 2px solid ${H.colors.primary.main};
      :hover {
        border-color: ${H.colors.primary.main};
      }
    `,img:(0,t.css)`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${H.colors.text.primary};
    `,text:(0,t.css)`
      color: ${H.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:(0,t.css)`
      border: 1px solid ${H.colors.border.medium};
    `})),I=H=>{const{onChange:j,cards:z,value:F}=H,J=(0,c.l4)(),Q=R(J);return i.createElement(E.Z,{defaultWidth:680},({width:Z,height:ne})=>{const Pe=Math.floor(Z/90),ye=Math.ceil(z.length/Pe);return i.createElement(P.Ym,{width:Z,height:ne,columnCount:Pe,columnWidth:90,rowCount:ye,rowHeight:90,itemData:{cards:z,columnCount:Pe,onChange:j,selected:F},className:Q.grid},M)})},A=H=>H===f.DD.Icon?[f.QS.Icon,f.QS.IOT,f.QS.Marker]:[f.QS.BG],O=(H,j)=>H.find(z=>j.startsWith(z.value))??H[0],N=H=>{const{value:j,mediaType:z,folderName:F,newValue:J,setNewValue:Q}=H,Z=(0,c.wW)(o),ne=A(z).map(be=>({label:be,value:be})),[ee,de]=(0,i.useState)(),[Pe,ye]=(0,i.useState)(O(ne,j?.length?j:F)),[he,me]=(0,i.useState)([]),[De,le]=(0,i.useState)([]),Ee=be=>{be?(be=be.toLowerCase(),le(he.filter(ge=>ge.search.includes(be)))):le(he)};return(0,i.useEffect)(()=>{const be=Pe?.value;if(be){const ge=z===f.DD.Icon?ue=>ue.name.endsWith(".svg"):ue=>ue.name.endsWith(".png")||ue.name.endsWith(".gif");(0,v.ak)().get("-- Grafana --").then(ue=>{ue.listFiles(be).subscribe({next:Ie=>{const ot=[];Ie.forEach(Qe=>{if(ge(Qe)){const Me=Qe.name.lastIndexOf(".");ot.push({value:`${be}/${Qe.name}`,label:Qe.name,search:(Me?Qe.name.substring(0,Me):Qe.name).toLowerCase(),imgUrl:`public/${be}/${Qe.name}`})}}),me(ot),le(ot)}})})}},[z,Pe]),i.createElement(i.Fragment,null,i.createElement(m.g,null,i.createElement(g.Ph,{options:ne,onChange:ye,value:Pe,menuShouldPortal:!1})),i.createElement(m.g,null,i.createElement(p.H,{value:ee??"",placeholder:"Search",onChange:be=>{Ee(be),de(be)}})),De&&i.createElement("div",{className:Z.cardsWrapper},i.createElement(I,{cards:De,onChange:be=>Q(be),value:J})))},o=H=>({cardsWrapper:(0,t.css)`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var w=e(38637),K=e(36495),V=e(47850);const _=H=>{const{newValue:j,setNewValue:z,mediaType:F}=H,J=(0,c.wW)(U),Q=(0,V.t)(j);let Z=j?.substring(j.lastIndexOf("/")+1,j.lastIndexOf("."));return Z.length>20&&(Z=Z.substring(0,20)+"..."),i.createElement(i.Fragment,null,i.createElement(m.g,null,i.createElement(w.I,{onChange:ne=>z(ne.currentTarget.value),value:j})),i.createElement("div",{className:J.iconContainer},i.createElement(m.g,{label:"Preview"},i.createElement("div",{className:J.iconPreview},F===f.DD.Icon&&i.createElement(h.V,{src:Q,className:J.img}),F===f.DD.Image&&j&&i.createElement("img",{src:Q,alt:"Preview of the selected URL",className:J.img}))),i.createElement(K._,null,Z)))},U=H=>({iconContainer:(0,t.css)`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:(0,t.css)`
    width: 238px;
    height: 198px;
    border: 1px solid ${H.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:(0,t.css)`
    width: 147px;
    height: 147px;
    fill: ${H.colors.text.primary};
  `}),$=H=>{const{value:j,onChange:z,mediaType:F,folderName:J}=H,Q=(0,c.wW)(k),Z=()=>{z(j)},ne=(0,i.createRef)(),{dialogProps:ee}=(0,n.R)({},ne),{overlayProps:de}=(0,a.Ir)({onClose:Z,isDismissable:!0,isOpen:!0},ne),Pe=j&&j.includes("://"),[ye,he]=(0,i.useState)(j??""),[me,De]=(0,i.useState)(Pe?f.hQ.URL:f.hQ.Folder),[le,Ee]=(0,i.useState)(new FormData),[be,ge]=(0,i.useState)(!1),[ue,Ie]=(0,i.useState)({message:""}),ot=bt=>`${Q.resourcePickerPopoverTab} ${me===bt&&Q.resourcePickerPopoverActiveTab}`,Qe=()=>i.createElement(N,{value:j,mediaType:F,folderName:J,newValue:ye,setNewValue:he}),Me=()=>i.createElement(_,{newValue:ye,setNewValue:he,mediaType:F}),Ne=()=>i.createElement(x,{mediaType:F,setFormData:Ee,setUpload:ge,newValue:ye,error:ue}),qe=()=>{switch(me){case f.hQ.Folder:return Qe();case f.hQ.URL:return Me();case f.hQ.Upload:return Ne();default:return Qe()}};return i.createElement(r.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("section",{ref:ne,...de,...ee},i.createElement("div",{className:Q.resourcePickerPopover},i.createElement("div",{className:Q.resourcePickerPopoverTabs},i.createElement("button",{className:ot(f.hQ.Folder),onClick:()=>De(f.hQ.Folder)},"Folder"),i.createElement("button",{className:ot(f.hQ.URL),onClick:()=>De(f.hQ.URL)},"URL")),i.createElement("div",{className:Q.resourcePickerPopoverContent},qe(),i.createElement("div",{className:Q.buttonRow},i.createElement(l.zx,{variant:"secondary",onClick:()=>Z(),fill:"outline"},"Cancel"),i.createElement(l.zx,{variant:ye&&ye!==j?"primary":"secondary",onClick:()=>{be?fetch("/api/storage/upload",{method:"POST",body:le}).then(bt=>{if(bt.status>=400){bt.json().then(Fe=>Ie(Fe));return}else return bt.json()}).then(bt=>{(0,y.i)().get(`api/storage/read/${bt.path}`).then(()=>he(`${d.config.appUrl}api/storage/read/${bt.path}`)).then(()=>z(`${d.config.appUrl}api/storage/read/${bt.path}`))}).catch(bt=>console.error(bt)):z(ye)}},"Select"))))))},k=H=>({resourcePickerPopover:(0,t.css)`
    border-radius: ${H.shape.radius.default};
    box-shadow: ${H.shadows.z3};
    background: ${H.colors.background.primary};
    border: 1px solid ${H.colors.border.weak};
  `,resourcePickerPopoverTab:(0,t.css)`
    width: 50%;
    text-align: center;
    padding: ${H.spacing(1,0)};
    background: ${H.colors.background.secondary};
    color: ${H.colors.text.secondary};
    font-size: ${H.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:(0,t.css)`
    color: ${H.colors.text.primary};
    font-weight: ${H.typography.fontWeightMedium};
    background: ${H.colors.background.primary};
  `,resourcePickerPopoverContent:(0,t.css)`
    width: 315px;
    font-size: ${H.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${H.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:(0,t.css)`
    display: flex;
    width: 100%;
    border-radius: ${H.shape.radius.default} ${H.shape.radius.default} 0 0;
  `,buttonRow:(0,t.css)({display:"flex",justifyContent:"center",gap:H.spacing(2),padding:H.spacing(1)})})},19226:(X,L,e)=>{"use strict";e.d(L,{$:()=>u});var t=e(39953),n=e(34547),r=e(74661),a=e(69171),i=e(20454),y=e(4919),c=e(57669),l=e(40866);const d=[{label:"Fixed",value:n.xy.Fixed,description:"Fixed value"},{label:"Field",value:n.xy.Field,description:"Display field value"}],f={settings:{}},m={settings:{}},u=({value:h,context:C,onChange:x})=>{const g=(0,t.useCallback)(S=>{x({...h,mode:S})},[x,h]),p=(0,t.useCallback)(S=>{x({...h,field:S})},[x,h]),v=(0,t.useCallback)((S="")=>{x({...h,fixed:S})},[x,h]),E=()=>{v("")},P=h?.mode??n.xy.Fixed;return t.createElement(t.Fragment,null,t.createElement(r.Z,null,t.createElement(a._,{label:"Source",labelWidth:9,grow:!0},t.createElement(i.S,{value:P,options:d,onChange:g,fullWidth:!0}))),P!==n.xy.Fixed&&t.createElement(r.Z,null,t.createElement(a._,{label:"Field",labelWidth:9,grow:!0},t.createElement(c.b,{context:C,value:h.field??"",onChange:p,item:f}))),P===n.xy.Fixed&&t.createElement(r.Z,{key:h?.fixed},t.createElement(a._,{label:"Value",labelWidth:9,grow:!0},t.createElement(l.A,{context:C,value:h?.fixed,onChange:v,item:m,suffix:h?.fixed&&t.createElement(y.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:E})}))),P===n.xy.Template&&t.createElement(r.Z,null,t.createElement(a._,{label:"Template",labelWidth:9,grow:!0},t.createElement(l.A,{context:C,value:h?.fixed,onChange:v,item:m}))))}},473:(X,L,e)=>{"use strict";e.d(L,{Lm:()=>t.L,Lv:()=>x,k9:()=>o,cL:()=>R,$2:()=>K.$});var t=e(29080),n=e(39953);const r=({value:V,onChange:_})=>{const[U,$]=useState(V?[{value:V,label:V}]:[]),[k,H]=useState(),j=window.__grafana_public_path__+"img/icons/unicons/",z=F=>{_(F),H(F)};return useEffect(()=>{getBackendSrv().get(`${j}/index.json`).then(F=>{$(F.files.map(J=>({value:J,label:J})))})},[j]),React.createElement(Select,{options:U,value:k,onChange:F=>{z(F.value)}})},a=null;var i=e(34547),y=e(74661),c=e(69171),l=e(20454),d=e(57669),f=e(85256),m=e(11925),u=e(57346);const h=[{label:"Fixed",value:i.Q8.Fixed,description:"Fixed value"},{label:"Field",value:i.Q8.Field,description:"Use a string field result"}],C={settings:{}},x=V=>{const{value:_,context:U,onChange:$,item:k}=V,H=9,j=(0,n.useCallback)(Pe=>{$({..._,mode:Pe})},[$,_]),z=(0,n.useCallback)((Pe="")=>{$({..._,field:Pe})},[$,_]),F=(0,n.useCallback)(Pe=>{$({..._,fixed:Pe??""})},[$,_]),J=Pe=>{Pe.stopPropagation(),$({mode:i.Q8.Fixed,fixed:"",field:""})},Q=_?.mode??i.Q8.Fixed,Z=k.settings?.showSourceRadio??!0,ne=k.settings?.resourceType??m.DD.Icon,ee=k.settings?.folderName??f.ResourceFolderName.Icon;let de="";return ne===m.DD.Icon&&(_?.fixed?de=(0,f.getPublicOrAbsoluteUrl)(_.fixed):k.settings?.placeholderValue&&(de=(0,f.getPublicOrAbsoluteUrl)(k.settings.placeholderValue))),n.createElement(n.Fragment,null,Z&&n.createElement(y.Z,null,n.createElement(c._,{label:"Source",labelWidth:H,grow:!0},n.createElement(l.S,{value:Q,options:h,onChange:j,fullWidth:!0}))),Q!==i.Q8.Fixed&&n.createElement(y.Z,null,n.createElement(c._,{label:"Field",labelWidth:H,grow:!0},n.createElement(d.b,{context:U,value:_.field??"",onChange:z,item:C}))),Q===i.Q8.Fixed&&n.createElement(u.E,{onChange:F,onClear:J,value:_?.fixed,src:de,placeholder:k.settings?.placeholderText??"Select a value",name:b(_?.fixed)??"",mediaType:ne,folderName:ee,size:m.zc.NORMAL}),Q===i.Q8.Mapping&&n.createElement(y.Z,null,n.createElement(c._,{label:"Mappings",labelWidth:H,grow:!0},n.createElement("div",null,"TODO mappings editor!"))))};function b(V){if(!V)return;const _=V.lastIndexOf("/");return _>0?V.substring(_+1):V}var g=e(41407),p=e(82803),v=e(9558),E=e(29711),P=e(30359),S=e(11155);const M={label:"Fixed value",value:"_____fixed_____"},R=V=>{const{value:_,context:U,onChange:$,item:k}=V,{settings:H}=k,j=(0,p.wW)(I),z=_?.field,F=!z,J=(0,E.IX)(U.data),Q=(0,E.nw)(J,z,M),Z=(0,n.useMemo)(()=>(0,S.x5)(H),[H]),ne=(0,n.useCallback)(De=>{$((0,S.C)(De,Z))},[$,Z]),ee=(0,n.useCallback)(De=>{const le=De.value;le&&le!==M.value?ne({..._,field:le}):ne({..._,field:void 0})},[ne,_]),de=(0,n.useCallback)(De=>{De!==void 0&&ne({..._,min:De})},[ne,_]),Pe=(0,n.useCallback)(De=>{De!==void 0&&ne({..._,max:De})},[ne,_]),ye=(0,n.useCallback)(De=>{De!==void 0&&ne({..._,fixed:De})},[ne,_]),he=_??{},me=F?M:Q.find(De=>De.value===z);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(v.Ph,{value:me,options:Q,onChange:ee,noOptionsMessage:"No fields found"})),n.createElement("div",{className:j.range},F&&n.createElement(y.Z,null,n.createElement(c._,{label:"Value",labelWidth:8,grow:!0},n.createElement(P.Y,{value:he.fixed,...Z,onChange:ye}))),!F&&!Z.hideRange&&n.createElement(n.Fragment,null,n.createElement(y.Z,null,n.createElement(c._,{label:"Min",labelWidth:8,grow:!0},n.createElement(P.Y,{value:he.min,...Z,onChange:de}))),n.createElement(y.Z,null,n.createElement(c._,{label:"Max",labelWidth:8,grow:!0},n.createElement(P.Y,{value:he.max,...Z,onChange:Pe}))))))},I=V=>({range:(0,g.css)`
    padding-top: 8px;
  `});var A=e(89591);const O={label:"Fixed value",value:"_____fixed_____"},N=[{label:"Mod",value:i.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:i.eK.Clamped,description:"Use field values, clamped to max and min"}],o=({value:V,context:_,onChange:U,item:$})=>{const{settings:k}=$,H=0,j=V?.field,z=!j,F=(0,E.IX)(_.data),J=(0,E.nw)(F,j,O,A.fS.number),Q=(0,p.wW)(w),Z=(0,n.useCallback)(he=>{const me=he.value;if(me&&me!==O.value)U({...V,field:me});else{const De=V.fixed??H;U({...V,field:void 0,fixed:De})}},[U,V]),ne=(0,n.useCallback)(he=>{U({...V,mode:he})},[U,V]),ee=(0,n.useCallback)(he=>{U({...V,field:void 0,fixed:he??H})},[U,V]),de=V??{},Pe=V?.mode??i.eK.Mod,ye=z?O:J.find(he=>he.value===j);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(y.Z,null,n.createElement(c._,{label:"Limit",labelWidth:8,grow:!0},n.createElement(l.S,{value:Pe,options:N,onChange:ne,fullWidth:!0}))),n.createElement(v.Ph,{value:ye,options:J,onChange:Z,noOptionsMessage:"No fields found"})),n.createElement("div",{className:Q.range},z&&n.createElement(y.Z,null,n.createElement(c._,{label:"Value",labelWidth:8,grow:!0},n.createElement(P.Y,{value:de?.fixed??H,onChange:ee,max:k?.max,min:k?.min})))))},w=V=>({range:(0,g.css)`
    padding-top: 8px;
  `});var K=e(19226)},85256:(X,L,e)=>{"use strict";e.d(L,{MediaType:()=>t.DD,ResourceFolderName:()=>t.QS,findField:()=>i.PI,findFieldIndex:()=>i.rj,getColorDimension:()=>y,getPublicOrAbsoluteUrl:()=>C.t,getResourceDimension:()=>C.I,getScalarDimension:()=>b.y,getScaledDimension:()=>l.W8,getScaledDimensionForField:()=>l.A,getTextDimension:()=>u});var t=e(11925),n=e(73254),r=e(10124),a=e(94123),i=e(56501);function y(g,p,v){return c((0,i.PI)(g,p.field),p,v)}function c(g,p,v){if(!g){const S=v.visualization.getColorByName(p.fixed??"grey");return{isAssumed:!!p.field?.length||!p.fixed,fixed:S,value:()=>S,get:M=>S}}const E=(0,n.fD)(g);if(E.isByValue||g.config.mappings?.length){const S=(0,r.xD)(g,!0);S!==g.config&&(g={...g,config:S},g.state=void 0);const M=(0,a.U)({field:g,theme:v}),R=I=>M(I).color??"#ccc";return{field:g,get:I=>R(g.values[I]),value:()=>R((0,i.cR)(g))}}const P=E.getCalculator(g,v)(0,0);return{fixed:P,value:()=>P,get:S=>P,field:g}}var l=e(11155),d=e(89591),f=e(83502),m=e(34547);function u(g,p){const v=p.field?(0,i.PI)(g,p.field):g?.fields.find(E=>E.type===d.fS.string);return h(v,p)}function h(g,p){let v=p.fixed;const E=p.mode??m.xy.Fixed;if(E===m.xy.Fixed)return{isAssumed:!v,fixed:v,value:()=>v,get:S=>v};if(E===m.xy.Template){const S=M=>`TEMPLATE[${p.fixed} // ${M}]`;return g?{field:g,get:M=>S(g.values[M]),value:()=>S((0,i.cR)(g))}:(v=S(""),{isAssumed:!0,fixed:v,value:()=>v,get:M=>v})}if(!g)return{isAssumed:!0,fixed:v,value:()=>v,get:S=>v};let P=S=>(0,f.zc)(g.display(S));return{field:g,get:S=>P(g.values[S]),value:()=>P((0,i.cR)(g))}}var C=e(47850),x=e(23482),b=e(6348)},47850:(X,L,e)=>{"use strict";e.d(L,{I:()=>a,t:()=>r});var t=e(34547),n=e(56501);function r(i){return i?i.indexOf(":/")>0?i:window.__grafana_public_path__+i:""}function a(i,y){const c=y.mode??t.Q8.Fixed;if(c===t.Q8.Fixed){const f=r(y.fixed);return{isAssumed:!f,fixed:f,value:()=>f,get:m=>f}}const l=(0,n.PI)(i,y.field);if(!l){const f="";return{isAssumed:!0,fixed:f,value:()=>f,get:m=>f}}if(c===t.Q8.Mapping){const f=m=>r(`${m}`);return{field:l,get:m=>f(l.values[m]),value:()=>f((0,n.cR)(l))}}const d=f=>{if(l&&l.display){const m=l.display(f).icon;return r(m??"")}return""};return{field:l,get:f=>d(l.values[f]),value:()=>d((0,n.cR)(l))}}},6348:(X,L,e)=>{"use strict";e.d(L,{y:()=>r});var t=e(34547),n=e(56501);function r(i,y){return a((0,n.PI)(i,y?.field),y)}function a(i,y){if(!i){const d=y.fixed??0;return{isAssumed:!!y.field?.length||!y.fixed,fixed:d,value:()=>d,get:()=>d}}let c=d=>d%y.max;return y.mode===t.eK.Clamped&&(c=d=>d<y.min?y.min:d>y.max?y.max:d),{field:i,get:d=>{const f=i.values[d];return f===null||typeof f!="number"?0:c(f)},value:()=>(0,n.cR)(i)}}},11155:(X,L,e)=>{"use strict";e.d(L,{A:()=>i,C:()=>c,W8:()=>a,x5:()=>y});var t=e(10124),n=e(34547),r=e(56501);function a(l,d){return i((0,r.PI)(l,d?.field),d)}function i(l,d,f){if(!l){const b=d.fixed??0;return{isAssumed:!!d.field?.length||!d.fixed,fixed:b,value:()=>b,get:()=>b}}const m=(0,t.dz)(l),u=d.max-d.min;if(l.values.length<1||u<=0||m.delta<=0)return{fixed:d.min,value:()=>d.min,get:()=>d.min};let C=b=>d.min+b*u;if(f===n.B5.Quad){const b=Math.PI*(d.max/2)**2,g=Math.PI*(d.min/2)**2,p=b-g;C=v=>{let E=g+p*v;return Math.sqrt(E/Math.PI)*2}}const x=b=>{const g=l.values[b];let p=0;return g!==-1/0&&(p=(g-m.min)/m.delta),p>1?p=1:p<0&&(p=0),C(p)};return{get:x,value:()=>x((0,r.cR)(l)),field:l}}function y(l){return l||(l={min:0,max:1}),l.min==null&&(l.min=0),l.max==null&&(l.max=1),l}function c(l,d){let{min:f,max:m}=y(d);if(l||(l={}),l.max==null&&(l.max=m),l.min==null&&(l.min=f),l.min>l.max){const u=l.max;l.max=l.min,l.min=u}return l.min<f&&(l.min=f),l.max>m&&(l.max=m),l.fixed==null&&(l.fixed=l.min+(l.max-l.min)/2),l.field||(l.fixed>m?l.fixed=m:l.fixed<f&&(l.fixed=f)),l}},11925:(X,L,e)=>{"use strict";e.d(L,{DD:()=>a,QS:()=>r,hQ:()=>i,qj:()=>n,zc:()=>y});var t=e(34547);const n=Object.freeze({fixed:"",mode:t.xy.Field,field:""});var r=(c=>(c.Icon="img/icons/unicons",c.IOT="img/icons/iot",c.Marker="img/icons/marker",c.BG="img/bg",c))(r||{}),a=(c=>(c.Icon="icon",c.Image="image",c))(a||{}),i=(c=>(c.Folder="folder",c.URL="url",c.Upload="upload",c))(i||{}),y=(c=>(c.SMALL="small",c.NORMAL="normal",c))(y||{})},56501:(X,L,e)=>{"use strict";e.d(L,{FP:()=>y,PI:()=>m,Qz:()=>d,WO:()=>f,cR:()=>h,pb:()=>c,rj:()=>u,z2:()=>l});var t=e(69330),n=e(53470),r=e(32688),a=e(85256),i=e(6348);function y(C,x){if(C?.series&&x.field)for(const b of C.series){const g=(0,a.getColorDimension)(b,x,r.config.theme2);if(!g.isAssumed||C.series.length===1)return g}return(0,a.getColorDimension)(void 0,x,r.config.theme2)}function c(C,x){if(C?.series&&x.field)for(const b of C.series){const g=(0,a.getScaledDimension)(b,x);if(!g.isAssumed||C.series.length===1)return g}return(0,a.getScaledDimension)(void 0,x)}function l(C,x){if(C?.series&&x.field)for(const b of C.series){const g=(0,i.y)(b,x);if(!g.isAssumed||C.series.length===1)return g}return(0,i.y)(void 0,x)}function d(C,x){if(C?.series&&x.field)for(const b of C.series){const g=(0,a.getResourceDimension)(b,x);if(!g.isAssumed||C.series.length===1)return g}return(0,a.getResourceDimension)(void 0,x)}function f(C,x){if(C?.series&&x.field)for(const b of C.series){const g=(0,a.getTextDimension)(b,x);if(!g.isAssumed||C.series.length===1)return g}return(0,a.getTextDimension)(void 0,x)}function m(C,x){const b=u(C,x);return b==null?void 0:C.fields[b]}function u(C,x){if(!(!C||!x?.length))for(let b=0;b<C.fields.length;b++){const g=C.fields[b];if(x===g.name)return b;const p=(0,t.CZ)(g,C);if(x===p)return b}}function h(C){const x=C.state?.calcs;if(x){const p=x[n.gz.lastNotNull];if(p!=null)return p}const b=C.values;let g=b.length-1;for(;g>=0;){const p=b[g--];if(p!=null)return p}}},77896:(X,L,e)=>{"use strict";e.d(L,{h:()=>n});var t=e(63374);function n(r,a,i){if(r.isLight)return a;{if(i){const l=(0,t.Z)(a);return t.Z.mostReadable(i,[l.clone().lighten(25),l.clone().lighten(10),l,l.clone().darken(10),l.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const y=(0,t.Z)(a).toHsl();y.l=1-y.l;const c=(0,t.Z)(y);return c.isLight()?c.darken(5).toHex8String():c.lighten(5).toHex8String()}}},29016:(X,L,e)=>{"use strict";e.d(L,{Z:()=>d});var t=e(41407),n=e(77814),r=e.n(n),a=e(39953),i=e(82803),y=e(77896),c=e(57339);const l=f=>({Ticks:(0,t.css)`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:(0,t.css)`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,y.h)(f,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:(0,t.css)`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:(0,t.css)`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function d(f){const{endTime:m,numTicks:u,showLabels:h,startTime:C}=f;let x;if(h){x=[];const p=(m||0)-(C||0);for(let v=0;v<u;v++){const E=(C||0)+v/(u-1)*p;x.push((0,c.LU)(E))}}const b=(0,i.wW)(l),g=[];for(let p=0;p<u;p++){const v=p/(u-1);g.push(a.createElement("div",{"data-testid":"TicksID",key:v,className:b.TicksTick,style:{left:`${v*100}%`}},x&&a.createElement("span",{className:r()(b.TicksTickLabel,{[b.TicksTickLabelEndAnchor]:v>=1})},x[p])))}return a.createElement("div",{className:b.Ticks},g)}d.defaultProps={endTime:null,showLabels:null,startTime:null}},71369:(X,L,e)=>{"use strict";e.d(L,{Z:()=>l});var t=e(41407),n=e(77814),r=e.n(n),a=e(39953),i=e(82803),y=e(51752);const c=()=>({flexRow:(0,t.css)`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function l(f){const{children:m,className:u="",...h}=f,C=(0,i.wW)(c);return a.createElement("div",{className:r()(C.flexRow,u),...h},m)}l.defaultProps={className:""};function d(f){const{children:m,className:u="",width:h,style:C,...x}=f,b=`${h*100}%`,g={...C,flexBasis:b,maxWidth:b};return a.createElement("div",{className:r()(y.WW,u),style:g,"data-testid":"TimelineRowCell",...x},m)}d.defaultProps={className:"",style:{}},l.Cell=d},42583:(X,L,e)=>{"use strict";e.d(L,{l4:()=>Pt,ZP:()=>$n});var t=e(41407),n=e(86832),r=e(16360),a=e(39953),i=e(72639),y=e(32688),c=e(64084),l=e(3839),d=e(82803);const f="peer.service";var m=e(27523);class u{constructor(yt){this.ys=[],this.heights=[],this.bufferLen=yt,this.dataLen=-1,this.lastI=-1}profileData(yt){yt!==this.dataLen&&(this.dataLen=yt,this.ys.length=yt,this.heights.length=yt,this.lastI>=yt&&(this.lastI=yt-1))}calcHeights(yt,At,Ht){Ht!=null&&(this.lastI=Ht);let tn=yt+this.bufferLen;if(tn<=this.lastI)return;tn>=this.heights.length&&(tn=this.heights.length-1);let gn=this.lastI;for(this.lastI===-1&&(gn=0,this.ys[0]=0);gn<=tn;){const mn=this.heights[gn]=At(gn);this.ys[gn+1]=this.ys[gn]+mn,gn++}this.lastI=tn}calcYs(yt,At){for(;(this.ys[this.lastI]==null||yt>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,At)}confirmHeight(yt,At){let Ht=yt;if(Ht>this.lastI){this.calcHeights(Ht,At);return}const tn=At(Ht);if(tn===this.heights[Ht])return;const gn=tn-this.heights[Ht];for(this.heights[Ht]=tn;++Ht<=this.lastI;)this.ys[Ht]+=gn;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=gn)}findFloorIndex(yt,At){this.calcYs(yt,At);let Ht=0,tn=this.lastI;if(this.ys.length<2||yt<this.ys[1])return 0;if(yt>this.ys[tn])return tn;let gn;for(;Ht<tn;)if(gn=Ht+.5*(tn-Ht)|0,yt>this.ys[gn]){if(yt<=this.ys[gn+1])return gn;Ht=gn}else if(yt<this.ys[gn]){if(yt>=this.ys[gn-1])return gn-1;tn=gn}else return gn;throw new Error(`unable to find floor index for y=${yt}`)}getRowPosition(yt,At){return this.confirmHeight(yt,At),{height:this.heights[yt],y:this.ys[yt]}}getEstimatedHeight(){const yt=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?yt|0:yt/(this.lastI+1)*this.heights.length|0}}const h=100;class C extends a.Component{constructor(yt){super(yt),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const At=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(At,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=At=>this._yPositions.getRowPosition(At,this._getHeight),this.scrollToIndex=(At,Ht)=>{const{scrollElement:tn}=this.props,gn=tn?.getBoundingClientRect().top||0,Tn=(tn?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-gn,ln=this.getRowPosition(At).y;this.props.scrollElement?.scrollTo({top:ln+Tn-Ht-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const At=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,Ht=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(At<this._startIndexDrawn||Ht>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=At=>{this.props.windowScroller&&(this._wrapperElm=At,At&&(this._viewHeight=At.clientHeight))},this._initItemHolder=At=>{this._itemHolderElm=At,this._scanItemHeights()},this._scanItemHeights=()=>{const At=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let Ht=null,tn=null,gn=!1;const mn=this._itemHolderElm.childNodes,Tn=mn.length;for(let ln=0;ln<Tn;ln++){const Wn=mn[ln];if(Wn instanceof HTMLElement){const On=Wn.getAttribute("data-item-key");if(!On){console.warn("itemKey not found");continue}const ia=(Wn.firstElementChild||Wn).clientHeight,da=this._knownHeights.get(On);ia!==da&&(this._knownHeights.set(On,ia),gn?tn=On:(gn=!0,Ht=tn=On))}}if(Ht!=null&&tn!=null){const ln=At(Ht),Wn=tn===Ht?ln:At(tn);this._yPositions.calcHeights(Wn,this._getHeight,ln),this.forceUpdate()}},this._getHeight=At=>{const Ht=this.props.getKeyFromIndex(At),tn=this._knownHeights.get(Ht);return tn!=null&&tn===tn?tn:this.props.itemHeightGetter(At,Ht)},this._yPositions=new u(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:yt}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=yt+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(yt){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&yt.scrollElement!==this.props.scrollElement&&(yt.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const yt=this.props.windowScroller,At=yt?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,Ht=yt?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return At!==this._viewHeight||Ht!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const At=this._scrollTop,Ht=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(At,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(Ht,this._getHeight)}render(){const{dataLength:yt,getKeyFromIndex:At,initialDraw:Ht=h,itemRenderer:tn,viewBuffer:gn,viewBufferMin:mn}=this.props,Tn=this._getHeight,ln=[];let Wn,On;if(this._yPositions.profileData(yt),!this._wrapperElm)Wn=0,On=(Ht<yt?Ht:yt)-1;else{this._isViewChanged()&&this._calcViewIndexes();const da=mn>this._startIndex?0:this._startIndex-mn,Da=mn<yt-this._endIndex?this._endIndex+mn:yt-1;da<this._startIndexDrawn||Da>this._endIndexDrawn?(Wn=gn>this._startIndex?0:this._startIndex-gn,On=this._endIndex+gn,On>=yt&&(On=yt-1)):(Wn=this._startIndexDrawn>yt-1?0:this._startIndexDrawn,On=this._endIndexDrawn>yt-1?yt-1:this._endIndexDrawn)}this._yPositions.calcHeights(On,Tn,Wn||-1),this._startIndexDrawn=Wn,this._endIndexDrawn=On,ln.length=On-Wn+1;for(let da=Wn;da<=On;da++){const{y:Da,height:ja}=this._yPositions.getRowPosition(da,Tn),Na={height:ja,top:Da,position:"absolute"},Ha=At(da),gt={"data-item-key":Ha};ln.push(tn(Ha,Na,da,gt))}const Nn={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(Nn.onScroll=this._onScroll,Nn.style.height="100%",Nn.style.overflowY="auto");const ia={position:"relative",height:this._yPositions.getEstimatedHeight()};return a.createElement("div",{...Nn,"data-testid":"ListView"},a.createElement("div",{style:ia},a.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},ln)))}}C.defaultProps={initialDraw:h,itemsWrapperClassName:"",windowScroller:!1};var x=e(77814),b=e.n(x),g=e(39285),p=e(77896),v=e(95577),E=e(75766),P=e(66557),S=e(55407);function M({children:Mt,content:yt,overlayClassName:At}){const Ht=(0,a.useRef)(null);return a.createElement(P.D,{content:yt,hideAfter:300},(tn,gn,mn)=>a.createElement(a.Fragment,null,Ht.current&&a.createElement(S.J,{...mn,referenceElement:Ht.current,wrapperClassName:At,onMouseLeave:gn,onMouseEnter:tn}),a.cloneElement(Mt,{ref:Ht,onMouseEnter:tn,onMouseLeave:gn})))}var R=e(51752),I=e(57339);const A="label";var O=e(69865),N=e(4919);const o=()=>({CopyIcon:(0,t.css)`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function w(Mt){const yt=(0,d.wW)(o),[At,Ht]=(0,a.useState)(!1),tn=()=>{navigator.clipboard.writeText(Mt.copyText),Ht(!0)};return a.createElement(O.u,{content:At?"Copied":Mt.tooltipTitle},a.createElement(N.zx,{className:b()(yt.CopyIcon),type:"button",icon:Mt.icon,onClick:tn}))}w.defaultProps={icon:"copy",className:void 0};var K=e(23932),V=e.n(K);const _="copyIcon",U=Mt=>({KeyValueTable:(0,t.css)`
      label: KeyValueTable;
      background: ${(0,p.h)(Mt,"#fff")};
      border: 1px solid ${(0,p.h)(Mt,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:(0,t.css)`
      label: body;
      vertical-align: baseline;
    `,row:(0,t.css)`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,p.h)(Mt,"#f5f5f5")};
      }
      &:not(:hover) .${_} {
        visibility: hidden;
      }
    `,keyColumn:(0,t.css)`
      label: keyColumn;
      color: ${(0,p.h)(Mt,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:(0,t.css)`
      label: copyColumn;
      text-align: right;
    `,linkIcon:(0,t.css)`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),$=/^(\[|\{)/;function k(Mt){if(typeof Mt=="string"&&$.test(Mt))try{return JSON.parse(Mt)}catch{}return Mt}const H=Mt=>a.createElement("a",{href:Mt.href,title:Mt.title,target:"_blank",rel:"noopener noreferrer"},Mt.children," ",a.createElement(g.J,{name:"external-link-alt"}));H.defaultProps={title:""};function j(Mt){const{data:yt,linksGetter:At}=Mt,Ht=(0,d.wW)(U);return a.createElement("div",{className:b()(Ht.KeyValueTable),"data-testid":"KeyValueTable"},a.createElement("table",{className:R.K9},a.createElement("tbody",{className:Ht.body},yt.map((tn,gn)=>{const mn={__html:V()(k(tn.value))},Tn=a.createElement("div",{className:R.b$,dangerouslySetInnerHTML:mn}),ln=At?At(yt,gn):null;let Wn;return ln&&ln.length?Wn=a.createElement("div",null,a.createElement(H,{href:ln[0].url,title:ln[0].text},Tn)):Wn=Tn,a.createElement("tr",{className:Ht.row,key:`${tn.key}-${gn}`},a.createElement("td",{className:Ht.keyColumn,"data-testid":"KeyValueTable--keyColumn"},tn.key),a.createElement("td",null,Wn),a.createElement("td",{className:Ht.copyColumn},a.createElement(w,{className:_,copyText:JSON.stringify(tn,null,2),tooltipTitle:"Copy JSON"})))}))))}const z=Mt=>({header:(0,t.css)`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,p.h)(Mt,"#e8e8e8")};
      }
    `,headerEmpty:(0,t.css)`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:(0,t.css)`
      label: headerHighContrast;
      &:hover {
        background: ${(0,p.h)(Mt,"#ddd")};
      }
    `,emptyIcon:(0,t.css)`
      label: emptyIcon;
      color: ${(0,p.h)(Mt,"#aaa")};
    `,summary:(0,t.css)`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:(0,t.css)`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,p.h)(Mt,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:(0,t.css)`
      label: summaryLabel;
      color: ${(0,p.h)(Mt,"#777")};
    `,summaryDelim:(0,t.css)`
      label: summaryDelim;
      color: ${(0,p.h)(Mt,"#bbb")};
      padding: 0 0.2em;
    `});function F(Mt){const{data:yt}=Mt,At=(0,d.wW)(z);return!Array.isArray(yt)||!yt.length?null:a.createElement("ul",{className:At.summary},yt.map((Ht,tn)=>a.createElement("li",{className:At.summaryItem,key:`${Ht.key}-${tn}`},a.createElement("span",{className:At.summaryLabel},Ht.key),a.createElement("span",{className:At.summaryDelim},"="),String(Ht.value))))}F.defaultProps={data:null};function J(Mt){const{className:yt,data:At,highContrast:Ht,interactive:tn,isOpen:gn,label:mn,linksGetter:Tn,onToggle:ln}=Mt,Wn=!Array.isArray(At)||!At.length,On=(0,d.wW)(z),Nn=b()(R.Im,{[On.emptyIcon]:Wn});let ia=null,da=null;return tn&&(ia=gn?a.createElement(g.J,{name:"angle-down",className:Nn}):a.createElement(g.J,{name:"angle-right",className:Nn}),da={"aria-checked":gn,onClick:Wn?null:ln,role:"switch"}),a.createElement("div",{className:b()(yt,R.ty)},a.createElement("div",{className:b()(On.header,{[On.headerEmpty]:Wn,[On.headerHighContrast]:Ht&&!Wn}),...da,"data-testid":"AccordianKeyValues--header"},ia,a.createElement("strong",{"data-test":A},mn,gn||":"),!gn&&a.createElement(F,{data:At})),gn&&a.createElement(j,{data:At,linksGetter:Tn}))}J.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const Q=Mt=>({AccordianLogs:(0,t.css)`
      label: AccordianLogs;
      border: 1px solid ${(0,p.h)(Mt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:(0,t.css)`
      label: AccordianLogsHeader;
      background: ${(0,p.h)(Mt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,p.h)(Mt,"#dadada")};
      }
    `,AccordianLogsContent:(0,t.css)`
      label: AccordianLogsContent;
      background: ${(0,p.h)(Mt,"#f0f0f0")};
      border-top: 1px solid ${(0,p.h)(Mt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:(0,t.css)`
      label: AccordianLogsFooter;
      color: ${(0,p.h)(Mt,"#999")};
    `});function Z(Mt){const{interactive:yt,isOpen:At,linksGetter:Ht,logs:tn,openedItems:gn,onItemToggle:mn,onToggle:Tn,timestamp:ln}=Mt;let Wn=null,On="span",Nn=null;yt&&(Wn=At?a.createElement(g.J,{name:"angle-down",className:R.Im}):a.createElement(g.J,{name:"angle-right",className:"u-align-icon"}),On="a",Nn={"aria-checked":At,onClick:Tn,role:"switch"});const ia=(0,d.wW)(Q);return a.createElement("div",{className:ia.AccordianLogs},a.createElement(On,{className:ia.AccordianLogsHeader,...Nn},Wn," ",a.createElement("strong",null,"Events")," (",tn.length,")"),At&&a.createElement("div",{className:ia.AccordianLogsContent},(0,n.sortBy)(tn,"timestamp").map((da,Da)=>a.createElement(J,{key:`${da.timestamp}-${Da}`,className:Da<tn.length-1?R.bi:null,data:da.fields||[],highContrast:!0,interactive:yt,isOpen:gn?gn.has(da):!1,label:`${(0,I.LU)(da.timestamp-ln)}`,linksGetter:Ht,onToggle:yt&&mn?()=>mn(da):null})),a.createElement("small",{className:ia.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}Z.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const ne=Mt=>({wrapper:(0,t.css)`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:(0,t.css)`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:(0,t.css)`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:(0,t.css)`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:(0,t.css)`
      label: logMarker;
      background-color: ${(0,p.h)(Mt,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,p.h)(Mt,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function ee(Mt){return`${(Mt*100).toFixed(1)}%`}function de({viewEnd:Mt,viewStart:yt,getViewedBounds:At,color:Ht,shortLabel:tn,longLabel:gn,onClick:mn,rpc:Tn,traceStartTime:ln,span:Wn,className:On,labelClassName:Nn}){const[ia,da]=(0,a.useState)(tn),Da=()=>da(tn),ja=()=>da(gn),Na=(0,n.groupBy)(Wn.logs,gt=>{const Ft=At(gt.timestamp,gt.timestamp).start;return ee(Math.round(Ft*500)/500)}),Ha=(0,d.wW)(ne);return a.createElement("div",{className:b()(Ha.wrapper,On),onBlur:Da,onClick:mn,onFocus:ja,onMouseOut:Da,onMouseOver:ja,"aria-hidden":!0,"data-testid":E.wl.components.TraceViewer.spanBar},a.createElement("div",{"aria-label":ia,className:Ha.bar,style:{background:Ht,left:ee(yt),width:ee(Mt-yt)}},a.createElement("div",{className:b()(Ha.label,Nn),"data-testid":"SpanBar--label"},ia)),a.createElement("div",null,Object.keys(Na).map(gt=>a.createElement(M,{key:gt,content:a.createElement(Z,{interactive:!1,isOpen:!0,logs:Na[gt],timestamp:ln})},a.createElement("div",{"data-testid":"SpanBar--logMarker",className:Ha.logMarker,style:{left:gt}})))),Tn&&a.createElement("div",{className:Ha.rpc,style:{background:Tn.color,left:ee(Tn.viewStart),width:ee(Tn.viewEnd-Tn.viewStart)}}))}const Pe=a.memo(de);var ye=e(85001),he=e(53790);const me=(Mt,yt,At,Ht)=>(Mt.sort(function(tn,gn){return(tn.title||"link").toLowerCase().localeCompare((gn.title||"link").toLowerCase())}),Mt.map((tn,gn)=>a.createElement(ye.s,{key:gn,label:tn.title||"Link",onClick:tn.onClick?mn=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Ht,grafana_version:y.config.buildInfo.version,type:tn.type,location:"menu"}),mn?.preventDefault(),tn.onClick(mn),At()}:void 0,url:tn.href,className:yt.menuItem}))),De=({links:Mt,datasourceType:yt})=>{const At=(0,d.wW)(le),[Ht,tn]=(0,a.useState)(!1),[gn,mn]=(0,a.useState)({x:0,y:0}),Tn=()=>tn(!1);return a.createElement("div",{"data-testid":"SpanLinksMenu"},a.createElement("button",{onClick:ln=>{tn(!0),mn({x:ln.pageX,y:ln.pageY})},className:At.button},a.createElement(g.J,{name:"link",className:At.button})),Ht?a.createElement(he.x,{onClose:()=>tn(!1),renderMenuItems:()=>me(Mt,At,Tn,yt),focusOnOpen:!1,x:gn.x,y:gn.y}):null)},le=()=>({button:(0,t.css)`
      background: transparent;
      border: none;
      padding: 0;
      margin: 0 3px 0 0;
    `,menuItem:(0,t.css)`
      max-width: 60ch;
      overflow: hidden;
    `});function Ee(Mt){return(0,n.get)((0,n.find)(Mt.references,({span:yt,refType:At})=>yt&&yt.spanID&&(At==="CHILD_OF"||At==="FOLLOWS_FROM")),"span")}function be(Mt){const yt=[];if(!Mt)return yt;let At=Ee(Mt);for(;At;)yt.push(At.spanID),At=Ee(At);return yt}const ge=(0,c.B)(Mt=>({SpanTreeOffset:(0,t.css)`
      label: SpanTreeOffset;
      color: ${(0,p.h)(Mt,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:(0,t.css)`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:(0,t.css)`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: calc(0.5rem + 12px);
      height: 100%;
      border-left: 3px solid transparent;
      display: inline-flex;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,p.h)(Mt,"lightgrey")};
      }
    `,indentGuideActive:(0,t.css)`
      label: indentGuideActive;
      border-color: ${(0,p.h)(Mt,"darkgrey")};
      &::before {
        background-color: transparent;
      }
    `,iconWrapper:(0,t.css)`
      label: iconWrapper;
      position: absolute;
      right: 0.25rem;
    `}));class ue extends a.PureComponent{constructor(yt){super(yt),this.handleMouseLeave=(At,Ht)=>{(!(At.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(At,"relatedTarget.dataset.ancestorId")!==Ht)&&this.props.removeHoverIndentGuideId(Ht)},this.handleMouseEnter=(At,Ht)=>{(!(At.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(At,"relatedTarget.dataset.ancestorId")!==Ht)&&this.props.addHoverIndentGuideId(Ht)},this.ancestorIds=be(yt.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:yt,onClick:At,showChildrenIcon:Ht,span:tn,theme:gn}=this.props,{hasChildren:mn,spanID:Tn}=tn,ln=mn?{onClick:At,role:"switch","aria-checked":yt}:null,Wn=Ht&&mn&&(yt?a.createElement(g.J,{name:"angle-down","data-testid":"icon-arrow-down"}):a.createElement(g.J,{name:"angle-right","data-testid":"icon-arrow-right"})),On=ge(gn);return a.createElement("span",{className:b()(On.SpanTreeOffset,{[On.SpanTreeOffsetParent]:mn}),...ln},this.ancestorIds.map(Nn=>a.createElement("span",{key:Nn,className:b()(On.indentGuide,{[On.indentGuideActive]:this.props.hoverIndentGuideIds.has(Nn)}),"data-ancestor-id":Nn,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:ia=>this.handleMouseEnter(ia,Nn),onMouseLeave:ia=>this.handleMouseLeave(ia,Nn)})),Wn&&a.createElement("span",{className:On.iconWrapper,onMouseEnter:Nn=>this.handleMouseEnter(Nn,Tn),onMouseLeave:Nn=>this.handleMouseLeave(Nn,Tn),"data-testid":"icon-wrapper"},Wn))}}ue.displayName="UnthemedSpanTreeOffset",ue.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const Ie=(0,d.HE)(ue);var ot=e(29016),Qe=e(71369);const Me="spanBar",Ne="spanBarLabel",qe="nameWrapper",bt="nameWrapperMatchingFilter",Fe="jaegerView",Ve="nameColumn",Ue=(0,c.B)((Mt,yt)=>{const At={label:"flash",flash:(0,t.keyframes)`
    from {
      background-color: ${(0,p.h)(Mt,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `},Ht=yt?"":(0,p.h)(Mt,"#fffce4");return{nameWrapper:(0,t.css)`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:(0,t.css)`
      label: nameWrapperMatchingFilter;
      background-color: ${Ht};
    `,nameColumn:(0,t.css)`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:(0,t.css)`
      label: endpointName;
      color: ${(0,p.h)(Mt,"#808080")};
    `,view:(0,t.css)`
      label: view;
      position: relative;
    `,viewExpanded:(0,t.css)`
      label: viewExpanded;
      background: ${(0,p.h)(Mt,"#f8f8f8")};
      outline: 1px solid ${(0,p.h)(Mt,"#ddd")};
    `,viewExpandedAndMatchingFilter:(0,t.css)`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,p.h)(Mt,"#fff3d7")};
      outline: 1px solid ${(0,p.h)(Mt,"#ddd")};
    `,row:(0,t.css)`
      label: row;
      &:hover .${Me} {
        opacity: 1;
      }
      &:hover .${Ne} {
        color: ${(0,p.h)(Mt,"#000")};
      }
      &:hover .${qe} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,p.h)(Mt,"#fafafa")},
          ${(0,p.h)(Mt,"#f8f8f8")} 75%,
          ${(0,p.h)(Mt,"#eee")}
        );
      }
      &:hover .${Fe} {
        background-color: ${(0,p.h)(Mt,"#f5f5f5")};
        outline: 1px solid ${(0,p.h)(Mt,"#ddd")};
      }
    `,rowClippingLeft:(0,t.css)`
      label: rowClippingLeft;
      & .${Ve}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,p.h)(Mt,"rgba(25, 25, 25, 0.25)")},
          ${(0,p.h)(Mt,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:(0,t.css)`
      label: rowClippingRight;
      & .${Fe}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,p.h)(Mt,"rgba(25, 25, 25, 0.25)")},
          ${(0,p.h)(Mt,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:(0,t.css)`
      label: rowExpanded;
      & .${Me} {
        opacity: 1;
      }
      & .${Ne} {
        color: ${(0,p.h)(Mt,"#000")};
      }
      & .${qe}, &:hover .${qe} {
        background: ${(0,p.h)(Mt,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,p.h)(Mt,"#ddd")};
      }
      & .${bt} {
        background: ${(0,p.h)(Mt,"#fff3d7")};
      }
      &:hover .${Fe} {
        background: ${(0,p.h)(Mt,"#eee")};
      }
    `,rowMatchingFilter:(0,t.css)`
      label: rowMatchingFilter;
      // background-color: ${(0,p.h)(Mt,"#fffbde")};
      &:hover .${qe} {
        background: linear-gradient(
          90deg,
          ${(0,p.h)(Mt,"#fffbde")},
          ${(0,p.h)(Mt,"#fffbde")} 75%,
          ${(0,p.h)(Mt,"#f7f1c6")}
        );
      }
      &:hover .${Fe} {
        background-color: ${(0,p.h)(Mt,"#f7f1c6")};
        outline: 1px solid ${(0,p.h)(Mt,"#ddd")};
      }
    `,rowFocused:(0,t.css)`
      label: rowFocused;
      background-color: ${(0,p.h)(Mt,"#cbe7ff")};
      animation: ${At.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${qe}, .${Fe}, .${bt} {
        background-color: ${(0,p.h)(Mt,"#cbe7ff")};
        animation: ${At.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Me} {
        opacity: 1;
      }
      & .${Ne} {
        color: ${(0,p.h)(Mt,"#000")};
      }
      &:hover .${qe}, :hover .${Fe} {
        background: ${(0,p.h)(Mt,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,p.h)(Mt,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:(0,t.css)`
      label: rowExpandedAndMatchingFilter;
      &:hover .${Fe} {
        background: ${(0,p.h)(Mt,"#ffeccf")};
      }
    `,name:(0,t.css)`
      label: name;
      color: ${(0,p.h)(Mt,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      margin-right: 8px;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &::before {
        content: ' ';
        position: absolute;
        top: 4px;
        bottom: 4px;
        left: 0;
        border-left: 4px solid;
        border-left-color: inherit;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > small {
        color: ${(0,p.h)(Mt,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
    `,nameDetailExpanded:(0,t.css)`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:(0,t.css)`
      label: svcName;
      padding: 0 0.25rem 0 0.5rem;
      font-size: 1.05em;
    `,svcNameChildrenCollapsed:(0,t.css)`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:(0,t.css)`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,p.h)(Mt,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:(0,t.css)`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:(0,t.css)`
      label: labelRight;
      left: 100%;
    `,labelLeft:(0,t.css)`
      label: labelLeft;
      right: 100%;
    `}});class it extends a.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(yt,At,Ht)=>{const tn=At?.type??"";if(tn===v.Hn)return"";if(tn===""||tn===v.th)return`(${Ht})`;if(tn===v.Kg){const gn=At?.tag?.trim()??"";if(gn!==""&&yt.tags){const mn=yt.tags?.find(ln=>ln.key===gn);if(mn)return`(${mn.value})`;const Tn=yt.process?.tags?.find(ln=>ln.key===gn);if(Tn)return`(${Tn.value})`}}return""}}render(){const{className:yt,color:At,spanBarOptions:Ht,columnDivision:tn,isChildrenExpanded:gn,isDetailExpanded:mn,isMatchingFilter:Tn,showSpanFilterMatchesOnly:ln,isFocused:Wn,numTicks:On,rpc:Nn,noInstrumentedServer:ia,showErrorIcon:da,getViewedBounds:Da,traceStartTime:ja,span:Na,hoverIndentGuideIds:Ha,addHoverIndentGuideId:gt,removeHoverIndentGuideId:Ft,clippingLeft:jt,clippingRight:an,theme:cn,createSpanLink:hn,datasourceType:rn}=this.props,{duration:un,hasChildren:nt,operationName:Be,process:{serviceName:et}}=Na,kt=(0,I.LU)(un),nn=Da(Na.startTime,Na.startTime+Na.duration),Pn=nn.start,pn=nn.end,In=Ue(cn,ln),Qn=`${et}::${Be}`;let Fn,Ea;return Pn>1-pn?(Fn=`${Qn} | ${kt}`,Ea=In.labelLeft):(Fn=`${kt} | ${Qn}`,Ea=In.labelRight),a.createElement(Qe.Z,{className:b()(In.row,{[In.rowExpanded]:mn,[In.rowMatchingFilter]:Tn,[In.rowExpandedAndMatchingFilter]:Tn&&mn,[In.rowFocused]:Wn,[In.rowClippingLeft]:jt,[In.rowClippingRight]:an},yt)},a.createElement(Qe.Z.Cell,{className:b()(In.nameColumn,Ve),width:tn},a.createElement("div",{className:b()(In.nameWrapper,qe,{[In.nameWrapperMatchingFilter]:Tn,nameWrapperMatchingFilter:Tn})},a.createElement(Ie,{onClick:nt?this._childrenToggle:void 0,childrenVisible:gn,span:Na,hoverIndentGuideIds:Ha,addHoverIndentGuideId:gt,removeHoverIndentGuideId:Ft}),a.createElement("button",{type:"button",className:b()(In.name,{[In.nameDetailExpanded]:mn}),"aria-checked":mn,title:Qn,onClick:this._detailToggle,role:"switch",style:{borderColor:At},tabIndex:0},a.createElement("span",{className:b()(In.svcName,{[In.svcNameChildrenCollapsed]:nt&&!gn})},da&&a.createElement(g.J,{name:"exclamation-circle",style:{backgroundColor:Na.errorIconColor?(0,p.h)(cn,Na.errorIconColor):(0,p.h)(cn,"#db2828")},className:In.errorIcon}),et," ",Nn&&a.createElement("span",null,a.createElement(g.J,{name:"arrow-right"})," ",a.createElement("i",{className:In.rpcColorMarker,style:{background:Nn.color}}),Nn.serviceName),ia&&a.createElement("span",null,a.createElement(g.J,{name:"arrow-right"})," ",a.createElement("i",{className:In.rpcColorMarker,style:{background:ia.color}}),ia.serviceName)),a.createElement("small",{className:In.endpointName},Nn?Nn.operationName:Be),a.createElement("small",{className:In.endpointName}," ",this.getSpanBarLabel(Na,Ht,kt))),hn&&(()=>{const ut=hn(Na),vt=ut?.length||0;return ut&&vt===1?ut[0]?a.createElement("a",{href:ut[0].href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:ut[0].onClick?Et=>{!(Et.ctrlKey||Et.metaKey||Et.shiftKey)&&ut[0].onClick&&(Et.preventDefault(),ut[0].onClick(Et))}:void 0},ut[0].content):null:ut&&vt>1?a.createElement(De,{links:ut,datasourceType:rn}):null})())),a.createElement(Qe.Z.Cell,{className:b()(In.view,Fe,{[In.viewExpanded]:mn,[In.viewExpandedAndMatchingFilter]:Tn&&mn}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-tn,onClick:this._detailToggle},a.createElement(ot.Z,{numTicks:On}),a.createElement(Pe,{rpc:Nn,viewStart:Pn,viewEnd:pn,getViewedBounds:Da,color:At,shortLabel:kt,longLabel:Fn,traceStartTime:ja,span:Na,labelClassName:`${Ne} ${Ea}`,className:Me})))}}it.displayName="UnthemedSpanBarRow",it.defaultProps={className:"",rpc:null};const ze=(0,d.HE)(it);var Xe=e(99114),St=e(48069),Bt=e(13601),zt=e(39960),qt=e(68421);const Qt=Mt=>({Divider:(0,t.css)`
      background: ${(0,p.h)(Mt,"#ddd")};
    `,DividerVertical:(0,t.css)`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:(0,t.css)`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function yn({className:Mt,style:yt,type:At}){const Ht=(0,d.wW)(Qt);return a.createElement("div",{style:yt,className:(0,t.cx)(Ht.Divider,At==="horizontal"?Ht.DividerHorizontal:Ht.DividerVertical,Mt)})}const Zt=Mt=>yt=>({LabeledList:(0,t.css)`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${Mt&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:(0,t.css)`
      label: LabeledListItem;
      display: inline-block;
      ${Mt&&`
        border-right: 1px solid ${(0,p.h)(yt,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:(0,t.css)`
      label: LabeledListLabel;
      color: ${yt.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:(0,t.css)`
      label: LabeledListValue;
      ${!Mt&&"margin-right: 0.55rem;"}
    `});function re(Mt){const{className:yt,divider:At=!1,items:Ht}=Mt,tn=(0,d.wW)(Zt(At));return a.createElement("ul",{className:b()(tn.LabeledList,yt)},Ht.map(({key:gn,label:mn,value:Tn})=>a.createElement("li",{className:tn.LabeledListItem,key:`${gn}`},a.createElement("span",{className:tn.LabeledListLabel},mn),a.createElement("strong",{className:tn.LabeledListValue},Tn))))}var Te=e(96150),We=e(83568);function Je(Mt){const{reference:yt,children:At,createFocusSpanLink:Ht}=Mt,tn=Ht(yt.traceID,yt.spanID);return a.createElement("a",{href:tn.href,target:tn.target,rel:"noopener noreferrer",onClick:tn.onClick?gn=>{gn.preventDefault(),tn.onClick(gn)}:void 0},At)}const je=Mt=>({AccordianReferenceItem:(0,t.css)`
      border-bottom: 1px solid ${(0,p.h)(Mt,"#d8d8d8")};
    `,AccordianKeyValues:(0,t.css)`
      margin-left: 10px;
    `,AccordianReferences:(0,t.css)`
      label: AccordianReferences;
      border: 1px solid ${(0,p.h)(Mt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:(0,t.css)`
      label: AccordianReferencesHeader;
      background: ${(0,p.h)(Mt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,p.h)(Mt,"#dadada")};
      }
    `,AccordianReferencesContent:(0,t.css)`
      label: AccordianReferencesContent;
      background: ${(0,p.h)(Mt,"#f0f0f0")};
      border-top: 1px solid ${(0,p.h)(Mt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:(0,t.css)`
      label: AccordianReferencesFooter;
      color: ${(0,p.h)(Mt,"#999")};
    `,ReferencesList:(0,t.css)`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:(0,t.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:(0,t.css)`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:(0,t.css)`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:(0,t.css)`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:(0,t.css)`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:(0,t.css)`
      margin-right: 8px;
    `,title:(0,t.css)`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function pt(Mt){const{data:yt,createFocusSpanLink:At,openedItems:Ht,onItemToggle:tn,interactive:gn}=Mt,mn=(0,d.wW)(je);return a.createElement("div",{className:mn.AccordianReferencesContent},yt.map((Tn,ln)=>a.createElement("div",{className:ln<yt.length-1?mn.AccordianReferenceItem:void 0,key:ln},a.createElement("div",{className:mn.item,key:`${Tn.spanID}`},a.createElement(Je,{reference:Tn,createFocusSpanLink:At},a.createElement("span",{className:mn.itemContent},Tn.span?a.createElement("span",null,a.createElement("span",{className:(0,t.cx)("span-svc-name",mn.serviceName)},Tn.span.process.serviceName),a.createElement("small",{className:"endpoint-name"},Tn.span.operationName)):a.createElement("span",{className:(0,t.cx)("span-svc-name",mn.title)},"View Linked Span ",a.createElement(g.J,{name:"external-link-alt"})),a.createElement("small",{className:mn.debugInfo},a.createElement("span",{className:mn.debugLabel,"data-label":"TraceID:"},Tn.traceID),a.createElement("span",{className:mn.debugLabel,"data-label":"SpanID:"},Tn.spanID))))),!!Tn.tags?.length&&a.createElement("div",{className:mn.AccordianKeyValues},a.createElement(J,{className:ln<yt.length-1?R.bi:null,data:Tn.tags||[],highContrast:!0,interactive:gn,isOpen:Ht?Ht.has(Tn):!1,label:"attributes",linksGetter:null,onToggle:gn&&tn?()=>tn(Tn):null})))))}const ft=({data:Mt,interactive:yt=!0,isOpen:At,onToggle:Ht,onItemToggle:tn,openedItems:gn,createFocusSpanLink:mn})=>{const Tn=!Array.isArray(Mt)||!Mt.length;let ln=null,Wn="span",On=null;yt&&(ln=At?a.createElement(g.J,{name:"angle-down",className:R.Im}):a.createElement(g.J,{name:"angle-right",className:R.Im}),Wn="a",On={"aria-checked":At,onClick:Tn?null:Ht,role:"switch"});const Nn=(0,d.wW)(je);return a.createElement("div",{className:Nn.AccordianReferences},a.createElement(Wn,{className:Nn.AccordianReferencesHeader,...On},ln,a.createElement("strong",null,a.createElement("span",null,"References"))," ","(",Mt.length,")"),At&&a.createElement(pt,{data:Mt,openedItems:gn,createFocusSpanLink:mn,onItemToggle:tn,interactive:yt}))},Tt=a.memo(ft),Ye=()=>({TextList:(0,t.css)`
      max-height: 450px;
      overflow: auto;
    `,List:(0,t.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:(0,t.css)`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function Ce(Mt){const{data:yt}=Mt,At=(0,d.wW)(Ye);return a.createElement("div",{className:b()(At.TextList),"data-testid":"TextList"},a.createElement("ul",{className:At.List},yt.map((Ht,tn)=>a.createElement("li",{className:At.item,key:`${tn}`},Ht))))}const oe=Mt=>({header:(0,t.css)`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,p.h)(Mt,"#e8e8e8")};
      }
    `});function pe({data:Mt}){return a.createElement(Ce,{data:Mt})}function Re(Mt){const{className:yt,data:At,headerClassName:Ht,interactive:tn,isOpen:gn,label:mn,onToggle:Tn,TextComponent:ln=pe}=Mt,Wn=!Array.isArray(At)||!At.length,On=(0,d.wW)(z),Nn=b()(R.Im,{[On.emptyIcon]:Wn});let ia=null,da=null;tn&&(ia=gn?a.createElement(g.J,{name:"angle-down",className:Nn}):a.createElement(g.J,{name:"angle-right",className:Nn}),da={"aria-checked":gn,onClick:Wn?null:Tn,role:"switch"});const Da=(0,d.wW)(oe);return a.createElement("div",{className:yt||""},a.createElement("div",{className:b()(Da.header,Ht),...da,"data-testid":"AccordianText--header"},ia,a.createElement("strong",null,mn)," (",At.length,")"),gn&&a.createElement(ln,{data:At}))}Re.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const ae=Mt=>({header:(0,t.css)`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:(0,t.css)`
      overflow: hidden;
    `,debugInfo:(0,t.css)`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:(0,t.css)`
      label: debugLabel;
      &::before {
        color: ${(0,p.h)(Mt,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:(0,t.css)`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,p.h)(Mt,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,p.h)(Mt,"#333")};
      }
    `,AccordianWarnings:(0,t.css)`
      label: AccordianWarnings;
      background: ${(0,p.h)(Mt,"#fafafa")};
      border: 1px solid ${(0,p.h)(Mt,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:(0,t.css)`
      label: AccordianWarningsHeader;
      background: ${(0,p.h)(Mt,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,p.h)(Mt,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:(0,t.css)`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,p.h)(Mt,"#e8e8e8")};
    `,AccordianWarningsLabel:(0,t.css)`
      label: AccordianWarningsLabel;
      color: ${(0,p.h)(Mt,"#d36c08")};
    `,Textarea:(0,t.css)`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:(0,t.css)`
      font-size: 1.5em;
    `});function ve(Mt){const{detailState:yt,linksGetter:At,logItemToggle:Ht,logsToggle:tn,processToggle:gn,span:mn,tagsToggle:Tn,traceStartTime:ln,warningsToggle:Wn,stackTracesToggle:On,referencesToggle:Nn,referenceItemToggle:ia,createSpanLink:da,createFocusSpanLink:Da,topOfViewRefType:ja,datasourceType:Na}=Mt,{isTagsOpen:Ha,isProcessOpen:gt,logs:Ft,isWarningsOpen:jt,references:an,isStackTracesOpen:cn}=yt,{operationName:hn,process:rn,duration:un,relativeStartTime:nt,startTime:Be,traceID:et,spanID:kt,logs:nn,tags:Pn,warnings:pn,references:In,stackTraces:Qn}=mn,{timeZone:Fn}=Mt;let Ea=[{key:"svc",label:"Service:",value:rn.serviceName},{key:"duration",label:"Duration:",value:(0,I.LU)(un)},{key:"start",label:"Start Time:",value:(0,I.LU)(nt)+xe(Be,Fn)},...mn.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:mn.childSpanCount}]:[]];mn.kind&&Ea.push({key:Te.TO,label:"Kind:",value:mn.kind}),mn.statusCode!==void 0&&Ea.push({key:Te.Q_,label:"Status:",value:Xe.Q[mn.statusCode].toLowerCase()}),mn.statusMessage&&Ea.push({key:Te.S2,label:"Status Message:",value:mn.statusMessage}),mn.instrumentationLibraryName&&Ea.push({key:Te.cG,label:"Library Name:",value:mn.instrumentationLibraryName}),mn.instrumentationLibraryVersion&&Ea.push({key:Te.gc,label:"Library Version:",value:mn.instrumentationLibraryVersion}),mn.traceState&&Ea.push({key:Te.vB,label:"Trace State:",value:mn.traceState});const ut=(0,d.wW)(ae);let vt;if(da){const It=da(mn),en=It?.filter(Gt=>Gt.type===We.u.Logs);It&&en&&en.length>0&&(vt=a.createElement(zt.k,{link:{...en[0],title:"Logs for this span",target:"_blank",origin:en[0].field,onClick:Gt=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Na,grafana_version:y.config.buildInfo.version,type:"log",location:"spanDetails"}),en?.[0].onClick?en?.[0].onClick?.(Gt):Bt.E1.push(en?.[0].href)}},buttonProps:{icon:"gf-logs"}}))}const Et=Da(et,kt);return a.createElement("div",{"data-testid":"span-detail-component"},a.createElement("div",{className:ut.header},a.createElement("h2",{className:b()(R.h2)},hn),a.createElement("div",{className:ut.listWrapper},a.createElement(re,{className:R.xb,divider:!0,items:Ea}))),vt,a.createElement(yn,{className:R.im,type:"horizontal"}),a.createElement("div",null,a.createElement("div",null,a.createElement(J,{data:Pn,label:"Span Attributes",linksGetter:At,isOpen:Ha,onToggle:()=>Tn(kt)}),rn.tags&&a.createElement(J,{className:R.bi,data:rn.tags,label:"Resource Attributes",linksGetter:At,isOpen:gt,onToggle:()=>gn(kt)})),nn&&nn.length>0&&a.createElement(Z,{linksGetter:At,logs:nn,isOpen:Ft.isOpen,openedItems:Ft.openedItems,onToggle:()=>tn(kt),onItemToggle:It=>Ht(kt,It),timestamp:ln}),pn&&pn.length>0&&a.createElement(Re,{className:ut.AccordianWarnings,headerClassName:ut.AccordianWarningsHeader,label:a.createElement("span",{className:ut.AccordianWarningsLabel},"Warnings"),data:pn,isOpen:jt,onToggle:()=>Wn(kt)}),Qn?.length?a.createElement(Re,{label:"Stack trace",data:Qn,isOpen:cn,TextComponent:It=>{let en;return It.data?.length>1?en=It.data.map((Gt,Ln)=>`StackTrace ${Ln+1}:
${Gt}`).join(`
`):en=It.data?.[0],a.createElement(qt.K,{className:ut.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:en})},onToggle:()=>On(kt)}):null,In&&In.length>0&&(In.length>1||In[0].refType!=="CHILD_OF")&&a.createElement(Tt,{data:In,isOpen:an.isOpen,openedItems:an.openedItems,onToggle:()=>Nn(kt),onItemToggle:It=>ia(kt,It),createFocusSpanLink:Da}),ja===Pt.Explore&&a.createElement("small",{className:ut.debugInfo},a.createElement("a",{...Et,onClick:It=>{Et.onClick&&It.button===0&&(!It.currentTarget.target||It.currentTarget.target==="_self")&&!(It.metaKey||It.altKey||It.ctrlKey||It.shiftKey)&&(It.preventDefault(),Et.onClick(It))}},a.createElement(g.J,{name:"link",className:b()(R.Im,ut.LinkIcon)})),a.createElement("span",{className:ut.debugLabel,"data-label":"SpanID:"})," ",kt)))}const xe=(Mt,yt)=>{const At=(0,St.dq)(Mt/1e3,{timeZone:yt,defaultWithMS:!0}),Ht=At.split(" ");return` (${Ht[1]?Ht[1]:At})`},Ge=(0,c.B)(Mt=>({expandedAccent:(0,t.css)`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 4px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:(0,t.css)`
      label: infoWrapper;
      border: 1px solid ${(0,p.h)(Mt,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class at extends a.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(yt,At)=>{const{linksGetter:Ht,span:tn}=this.props;return Ht(tn,yt,At)}}render(){const{color:yt,columnDivision:At,detailState:Ht,logItemToggle:tn,logsToggle:gn,processToggle:mn,referenceItemToggle:Tn,referencesToggle:ln,warningsToggle:Wn,stackTracesToggle:On,span:Nn,timeZone:ia,tagsToggle:da,traceStartTime:Da,hoverIndentGuideIds:ja,addHoverIndentGuideId:Na,removeHoverIndentGuideId:Ha,theme:gt,createSpanLink:Ft,focusedSpanId:jt,createFocusSpanLink:an,topOfViewRefType:cn,datasourceType:hn}=this.props,rn=Ge(gt);return a.createElement(Qe.Z,null,a.createElement(Qe.Z.Cell,{width:At,style:{overflow:"hidden"}},a.createElement(Ie,{span:Nn,showChildrenIcon:!1,hoverIndentGuideIds:ja,addHoverIndentGuideId:Na,removeHoverIndentGuideId:Ha}),a.createElement(N.zx,{fill:"text",onClick:this._detailToggle,className:b()(rn.expandedAccent,(0,N.gN)(gt)),style:{borderColor:yt},"data-testid":"detail-row-expanded-accent"})),a.createElement(Qe.Z.Cell,{width:1-At},a.createElement("div",{className:rn.infoWrapper,style:{borderTopColor:yt}},a.createElement(ve,{detailState:Ht,linksGetter:this._linksGetter,logItemToggle:tn,logsToggle:gn,processToggle:mn,referenceItemToggle:Tn,referencesToggle:ln,warningsToggle:Wn,stackTracesToggle:On,span:Nn,timeZone:ia,tagsToggle:da,traceStartTime:Da,createSpanLink:Ft,focusedSpanId:jt,createFocusSpanLink:an,topOfViewRefType:cn,datasourceType:hn}))))}}const dt=(0,d.HE)(at),st=(0,c.B)(Mt=>{const{topOfViewRefType:yt}=Mt,At=yt==="Explore"?"fixed":"absolute";return{rowsWrapper:(0,t.css)`
      width: 100%;
    `,row:(0,t.css)`
      width: 100%;
    `,scrollToTopButton:(0,t.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${At};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}});var Pt=(Mt=>(Mt.Explore="Explore",Mt.Panel="Panel",Mt))(Pt||{});const we={bar:28,detail:161,detailWithLogs:197},Le=5;function Ke(Mt,yt,At,Ht,tn){if(!Mt)return[];tn&&Ht&&(Mt=Mt.filter(Tn=>Ht.has(Tn.spanID)));let gn=null;const mn=[];for(let Tn=0;Tn<Mt.length;Tn++){const ln=Mt[Tn],{spanID:Wn,depth:On}=ln;let Nn=!1;gn!=null&&(On>=gn?Nn=!0:gn=null),!Nn&&(yt.has(Wn)&&(gn=On+1),mn.push({span:ln,isDetail:!1,spanIndex:Tn}),At.has(Wn)&&mn.push({span:ln,isDetail:!0,spanIndex:Tn}))}return mn}function ht(Mt){const[yt,At]=Mt;return{left:yt>0,right:At<1}}function xt(Mt,yt,At,Ht,tn){return Mt?Ke(Mt.spans,yt,At,Ht,tn):[]}const lt=(0,r.Z)(xt),Rt=(0,r.Z)(I._h,n.isEqual),Ut=(0,r.Z)(ht,n.isEqual);class Xt extends a.Component{constructor(){super(...arguments),this.hasScrolledToSpan=!1,this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=yt=>this.getRowStates()[yt].spanIndex,this.mapSpanIndexToRowIndex=yt=>{const At=this.getRowStates().length;for(let Ht=0;Ht<At;Ht++){const{spanIndex:tn}=this.getRowStates()[Ht];if(tn===yt)return Ht}throw new Error(`unable to find row for span index: ${yt}`)},this.setListView=yt=>{this.listView=yt},this.getKeyFromIndex=yt=>{const{isDetail:At,span:Ht}=this.getRowStates()[yt];return`${Ht.traceID}--${Ht.spanID}--${At?"detail":"bar"}`},this.getIndexFromKey=yt=>{const At=yt.split("--"),Ht=At[0],tn=At[1],gn=At[2]==="detail",mn=this.getRowStates().length;for(let Tn=0;Tn<mn;Tn++){const{span:ln,isDetail:Wn}=this.getRowStates()[Tn];if(ln.spanID===tn&&ln.traceID===Ht&&Wn===gn)return Tn}return-1},this.getRowHeight=yt=>{const{span:At,isDetail:Ht}=this.getRowStates()[yt];return Ht?Array.isArray(At.logs)&&At.logs.length?we.detailWithLogs:we.detail:we.bar},this.renderRow=(yt,At,Ht,tn)=>{const{isDetail:gn,span:mn,spanIndex:Tn}=this.getRowStates()[Ht];return gn?this.renderSpanDetailRow(mn,yt,At,tn):this.renderSpanBarRow(mn,Tn,yt,At,tn)},this.scrollToSpan=(yt,At)=>{if(At==null)return;const Ht=this.getRowStates().findIndex(tn=>tn.span.spanID===At);Ht>=0&&this.listView?.scrollToIndex(Ht,yt)},this.scrollToTop=()=>{const{topOfViewRef:yt,datasourceType:At,trace:Ht}=this.props;yt?.current?.scrollIntoView({behavior:"smooth"}),(0,i.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:At,grafana_version:y.config.buildInfo.version,numServices:Ht.services.length,numSpans:Ht.spans.length})}}componentDidMount(){this.scrollToSpan(this.props.headerHeight,this.props.focusedSpanId)}shouldComponentUpdate(yt){let At;for(At in yt)if(yt[At]!==this.props[At])return!0;return!1}componentDidUpdate(yt){const{headerHeight:At,focusedSpanId:Ht,focusedSpanIdForSearch:tn}=this.props;this.hasScrolledToSpan||(this.scrollToSpan(At,Ht),this.hasScrolledToSpan=!0),Ht!==yt.focusedSpanId&&this.scrollToSpan(At,Ht),tn!==yt.focusedSpanIdForSearch&&this.scrollToSpan(At,tn)}getRowStates(){const{childrenHiddenIDs:yt,detailStates:At,trace:Ht,findMatchesIDs:tn,showSpanFilterMatchesOnly:gn}=this.props;return lt(Ht,yt,At,tn,gn)}getClipping(){const{currentViewRangeTime:yt}=this.props;return Ut(yt)}getViewedBounds(){const{currentViewRangeTime:yt,trace:At}=this.props,[Ht,tn]=yt;return Rt({min:At.startTime,max:At.endTime,viewStart:Ht,viewEnd:tn})}getAccessors(){const yt=this.listView;if(!yt)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:yt.getViewHeight,getBottomRowIndexVisible:yt.getBottomVisibleIndex,getTopRowIndexVisible:yt.getTopVisibleIndex,getRowPosition:yt.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(yt,At,Ht,tn,gn){const{spanID:mn}=yt,{serviceName:Tn}=yt.process,{childrenHiddenIDs:ln,childrenToggle:Wn,detailStates:On,detailToggle:Nn,findMatchesIDs:ia,spanNameColumnWidth:da,trace:Da,spanBarOptions:ja,hoverIndentGuideIds:Na,addHoverIndentGuideId:Ha,removeHoverIndentGuideId:gt,createSpanLink:Ft,focusedSpanId:jt,focusedSpanIdForSearch:an,showSpanFilterMatchesOnly:cn,theme:hn,datasourceType:rn}=this.props;if(!Da)return null;const un=(0,m._K)(Tn,hn),nt=ln.has(mn),Be=On.has(mn),et=ia?ia.has(mn):!1,kt=mn===jt||mn===an,nn=(0,I.yM)(yt)||nt&&(0,I.Qx)(Da.spans,At);let Pn=null;if(nt){const Fn=(0,I.s2)(Da.spans.slice(At));if(Fn){const Ea=this.getViewedBounds()(Fn.startTime,Fn.startTime+Fn.duration);Pn={color:(0,m._K)(Fn.process.serviceName,hn),operationName:Fn.operationName,serviceName:Fn.process.serviceName,viewEnd:Ea.end,viewStart:Ea.start}}}const pn=yt.tags.find(Fn=>Fn.key===f);let In=null;!yt.hasChildren&&pn&&(0,I.JE)(yt)&&(In={serviceName:pn.value,color:(0,m._K)(pn.value,hn)});const Qn=st(this.props);return a.createElement("div",{className:Qn.row,key:Ht,style:tn,...gn},a.createElement(ze,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:un,spanBarOptions:ja,columnDivision:da,isChildrenExpanded:!nt,isDetailExpanded:Be,isMatchingFilter:et,isFocused:kt,showSpanFilterMatchesOnly:cn,numTicks:Le,onDetailToggled:Nn,onChildrenToggled:Wn,rpc:Pn,noInstrumentedServer:In,showErrorIcon:nn,getViewedBounds:this.getViewedBounds(),traceStartTime:Da.startTime,span:yt,hoverIndentGuideIds:Na,addHoverIndentGuideId:Ha,removeHoverIndentGuideId:gt,createSpanLink:Ft,datasourceType:rn}))}renderSpanDetailRow(yt,At,Ht,tn){const{spanID:gn}=yt,{serviceName:mn}=yt.process,{detailLogItemToggle:Tn,detailLogsToggle:ln,detailProcessToggle:Wn,detailReferencesToggle:On,detailReferenceItemToggle:Nn,detailWarningsToggle:ia,detailStackTracesToggle:da,detailStates:Da,detailTagsToggle:ja,detailToggle:Na,spanNameColumnWidth:Ha,trace:gt,timeZone:Ft,hoverIndentGuideIds:jt,addHoverIndentGuideId:an,removeHoverIndentGuideId:cn,linksGetter:hn,createSpanLink:rn,focusedSpanId:un,createFocusSpanLink:nt,topOfViewRefType:Be,theme:et,datasourceType:kt}=this.props,nn=Da.get(gn);if(!gt||!nn)return null;const Pn=(0,m._K)(mn,et),pn=st(this.props);return a.createElement("div",{className:pn.row,key:At,style:{...Ht,zIndex:1},...tn},a.createElement(dt,{color:Pn,columnDivision:Ha,onDetailToggled:Na,detailState:nn,linksGetter:hn,logItemToggle:Tn,logsToggle:ln,processToggle:Wn,referenceItemToggle:Nn,referencesToggle:On,warningsToggle:ia,stackTracesToggle:da,span:yt,timeZone:Ft,tagsToggle:ja,traceStartTime:gt.startTime,hoverIndentGuideIds:jt,addHoverIndentGuideId:an,removeHoverIndentGuideId:cn,createSpanLink:rn,focusedSpanId:un,createFocusSpanLink:nt,topOfViewRefType:Be,datasourceType:kt}))}render(){const yt=st(this.props),{scrollElement:At}=this.props;return a.createElement(a.Fragment,null,a.createElement(C,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:yt.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:At}),a.createElement(l.h,{className:yt.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const $n=(0,d.HE)(Xt)},57339:(X,L,e)=>{"use strict";e.d(L,{JE:()=>b,LU:()=>t.LU,Qx:()=>C,_h:()=>n,s2:()=>x,yM:()=>h});var t=e(81355);function n(g){const{min:p,max:v,viewStart:E,viewEnd:P}=g,S=v-p,M=p+E*S,I=v-(1-P)*S-M;return(A,O)=>({start:(A-M)/I,end:(O-M)/I})}function r(g,p,v){return!Array.isArray(v.tags)||!v.tags.length?!1:v.tags.some(E=>E.key===g&&E.value===p)}const a=g=>g.kind==="client",i=r.bind(null,"span.kind","client"),y=g=>a(g)||i(g),c=g=>g.kind==="server",l=r.bind(null,"span.kind","server"),d=g=>c(g)||l(g),f=g=>g.statusCode===2,m=r.bind(null,"error",!0),u=r.bind(null,"error","true"),h=g=>f(g)||m(g)||u(g);function C(g,p){const{depth:v}=g[p];let E=p+1;for(;E<g.length&&g[E].depth>v;E++)if(h(g[E]))return!0;return!1}function x(g){if(g.length<=1||!y(g[0]))return!1;const v=g[0].depth+1;let E=1;for(;E<g.length&&g[E].depth===v;){if(d(g[E]))return g[E];E++}return null}const b=g=>g.kind?g.kind==="client":g.tags.some(({key:p,value:v})=>p==="span.kind"&&v==="client")},96150:(X,L,e)=>{"use strict";e.d(L,{ID:()=>c,Q_:()=>n,S2:()=>r,TO:()=>t,cG:()=>a,gc:()=>i,vB:()=>y});const t="kind",n="status",r="status.message",a="library.name",i="library.version",y="trace.state",c="id"},29788:(X,L,e)=>{"use strict";e.d(L,{DetailState:()=>cn,TracePageHeader:()=>gt,TraceTimelineViewer:()=>F,filterSpans:()=>gn,transformTraceData:()=>Ea});var t=e(41407),n=e(39953),r=e(72639),a=e(32688),i=e(64084),y=e(82803),c=e(77896),l=e(9665),d=e.n(l);const m={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let u;function h(){if(u)return u;const ut=new(d())(document.body);return u=ut,ut}function C(ut){const vt=h();Object.keys(ut).forEach(Et=>{const It=ut[Et];It&&vt.bind(m[Et].binding,It)})}function x(){h().reset()}var b=e(77814),g=e.n(b),p=e(51752),v=e(29016),E=e(71369),P=e(68497);const S=()=>({TimelineCollapser:(0,t.css)`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function M(ut){const{onExpandAll:vt,onExpandOne:Et,onCollapseAll:It,onCollapseOne:en}=ut,Gt=(0,y.wW)(S);return n.createElement("div",{className:Gt.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(P.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:Et}),n.createElement(P.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:en}),n.createElement(P.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:vt}),n.createElement(P.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:It}))}var R=e(80185);const I=(0,i.B)(()=>({TimelineColumnResizer:(0,t.css)`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:(0,t.css)`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:(0,t.css)`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:(0,t.css)`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:(0,t.css)`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:(0,t.css)`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:(0,t.css)`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:(0,t.css)`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class A extends n.PureComponent{constructor(vt){super(vt),this._setRootElm=Et=>{this._rootElm=Et},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:Et,width:It}=this._rootElm.getBoundingClientRect(),{min:en,max:Gt}=this.props;return{clientXLeft:Et,width:It,maxValue:Gt,minValue:en}},this._handleDragUpdate=({value:Et})=>{this.setState({dragPosition:Et})},this._handleDragEnd=({manager:Et,value:It})=>{Et.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(It)},this._dragManager=new R.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let vt,Et;const{position:It,columnResizeHandleHeight:en}=this.props,{dragPosition:Gt}=this.state;vt=`${It*100}%`;const Ln={left:vt};let jn=!1,zn=!1;const qn=I();if(this._dragManager.isDragging()&&this._rootElm&&Gt!=null){jn=Gt<It,zn=Gt>It;const va=`${Math.min(It,Gt)*100}%`,aa=`calc(${(1-Math.max(It,Gt))*100}% - 1px)`;Et={left:va,right:aa}}else Et=Ln;Et.height=en;const Ia=jn||zn;return n.createElement("div",{className:qn.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:g()(qn.gripIcon,Ia&&qn.gripIconDragging),style:Ln,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:g()(qn.dragger,Ia&&qn.draggerDragging,zn&&qn.draggerDraggingRight,jn&&qn.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:Et,"data-testid":"TimelineColumnResizer--dragger"}))}}const O=(0,i.B)(()=>({TimelineViewingLayer:(0,t.css)`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:(0,t.css)`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:(0,t.css)`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:(0,t.css)`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:(0,t.css)`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:(0,t.css)`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:(0,t.css)`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:(0,t.css)`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function N(ut){return Reflect.has(ut,"isOutOfView")}function o(ut,vt,Et){return ut+Et*(vt-ut)}function w(ut,vt,Et){return(Et-ut)/(vt-ut)}function K(ut,vt){let[Et,It]=ut<vt?[ut,vt]:[vt,ut];return Et>=1||It<=0?{isOutOfView:!0}:(Et<0&&(Et=0),It>1&&(It=1),{isDraggingLeft:ut>vt,left:`${Et*100}%`,width:`${(It-Et)*100}%`})}function V(ut,vt,Et,It,en){const Gt=w(ut,vt,Et),Ln=w(ut,vt,It),jn=K(Gt,Ln);if(N(jn))return null;const{isDraggingLeft:zn,left:qn,width:Ia}=jn,va=O(),aa=(0,t.cx)({[va.TimelineViewingLayerDraggedDraggingRight]:!zn,[va.TimelineViewingLayerDraggedReframeDrag]:!en,[va.TimelineViewingLayerDraggedShiftDrag]:en});return n.createElement("div",{className:(0,t.cx)(va.TimelineViewingLayerDragged,va.TimelineViewingLayerDraggedDraggingLeft,aa),style:{left:qn,width:Ia},"data-testid":"Dragged"})}class _ extends n.PureComponent{constructor(vt){super(vt),this._setRoot=Et=>{this._root=Et},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:Et,width:It}=this._root.getBoundingClientRect();return{clientXLeft:Et,width:It}},this._handleReframeMouseMove=({value:Et})=>{const[It,en]=this.props.viewRangeTime.current,Gt=o(It,en,Et);this.props.updateNextViewRangeTime({cursor:Gt})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:Et})=>{const{current:It,reframe:en}=this.props.viewRangeTime,[Gt,Ln]=It,jn=o(Gt,Ln,Et),qn={reframe:{anchor:en?en.anchor:jn,shift:jn}};this.props.updateNextViewRangeTime(qn)},this._handleReframeDragEnd=({manager:Et,value:It})=>{const{current:en,reframe:Gt}=this.props.viewRangeTime,[Ln,jn]=en,zn=o(Ln,jn,It),qn=Gt?Gt.anchor:zn,[Ia,va]=zn<qn?[zn,qn]:[qn,zn];Et.resetBounds(),this.props.updateViewRangeTime(Ia,va,"timeline-header")},this._draggerReframe=new R.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(vt){const{boundsInvalidator:Et}=this.props;Et!==vt.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:vt}=this.props,{current:Et,cursor:It,reframe:en,shiftEnd:Gt,shiftStart:Ln}=vt,[jn,zn]=Et,qn=en!=null||Gt!=null||Ln!=null;let Ia;!qn&&It!=null&&It>=jn&&It<=zn&&(Ia=`${w(jn,zn,It)*100}%`);const va=O();return n.createElement("div",{"aria-hidden":!0,className:va.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},Ia!=null&&n.createElement("div",{className:va.TimelineViewingLayerCursorGuide,style:{left:Ia},"data-testid":"TimelineViewingLayer--cursorGuide"}),en!=null&&V(jn,zn,en.anchor,en.shift,!1),Gt!=null&&V(jn,zn,zn,Gt,!0),Ln!=null&&V(jn,zn,jn,Ln,!0))}}const U=ut=>({TimelineHeaderRow:(0,t.css)`
      label: TimelineHeaderRow;
      background: ${(0,c.h)(ut,"#ececec")};
      border-bottom: 1px solid ${(0,c.h)(ut,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:(0,t.css)`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:(0,t.css)`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function $(ut){const{duration:vt,nameColumnWidth:Et,numTicks:It,onCollapseAll:en,onCollapseOne:Gt,onColummWidthChange:Ln,onExpandAll:jn,onExpandOne:zn,updateViewRangeTime:qn,updateNextViewRangeTime:Ia,viewRangeTime:va,columnResizeHandleHeight:aa}=ut,[ta,ha]=va.current,ma=(0,y.wW)(U);return n.createElement(E.Z,{className:ma.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(E.Z.Cell,{className:g()(p.oD,p.H3,ma.TimelineHeaderWrapper),width:Et},n.createElement("h4",{className:ma.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(M,{onCollapseAll:en,onExpandAll:jn,onCollapseOne:Gt,onExpandOne:zn})),n.createElement(E.Z.Cell,{width:1-Et},n.createElement(_,{boundsInvalidator:Et,updateNextViewRangeTime:Ia,updateViewRangeTime:qn,viewRangeTime:va}),n.createElement(v.Z,{numTicks:It,startTime:ta*vt,endTime:ha*vt,showLabels:!0})),n.createElement(A,{columnResizeHandleHeight:aa,position:Et,onChange:Ln,min:.2,max:.85}))}var k=e(42583);const H=(0,i.B)(ut=>({TraceTimelineViewer:(0,t.css)`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,c.h)(ut,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,c.h)(ut,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,c.h)(ut,"teal")};
      }

      & .json-markup-null {
        color: ${(0,c.h)(ut,"teal")};
      }

      & .json-markup-number {
        color: ${(0,c.h)(ut,"blue","black")};
      }
    `})),j=5;class z extends n.PureComponent{constructor(vt){super(vt),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,r.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:a.config.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,r.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:a.config.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,r.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:a.config.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,r.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:a.config.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){C({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:vt,updateNextViewRangeTime:Et,updateViewRangeTime:It,viewRange:en,traceTimeline:Gt,theme:Ln,topOfViewRef:jn,focusedSpanIdForSearch:zn,...qn}=this.props,{trace:Ia}=qn,va=H(Ln);return n.createElement("div",{className:va.TraceTimelineViewer,ref:aa=>aa&&this.setState({height:aa.getBoundingClientRect().height})},n.createElement($,{duration:Ia.duration,nameColumnWidth:Gt.spanNameColumnWidth,numTicks:j,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:vt,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:en.time,updateNextViewRangeTime:Et,updateViewRangeTime:It,columnResizeHandleHeight:this.state.height}),n.createElement(k.ZP,{...qn,...Gt,setSpanNameColumnWidth:vt,currentViewRangeTime:en.time.current,topOfViewRef:jn,focusedSpanIdForSearch:zn,datasourceType:this.props.datasourceType}))}}const F=(0,y.HE)(z);var J=e(48069),Q=e(69865),Z=e(12608),ne=e(39285);const ee=()=>({NewWindowIconLarge:(0,t.css)`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function de(ut){const{isLarge:vt,className:Et,...It}=ut,en=(0,y.wW)(ee),Gt=g()({[en.NewWindowIconLarge]:vt},Et);return n.createElement(ne.J,{className:Gt,name:"anchor",...It})}de.defaultProps={isLarge:!1};const Pe=ut=>n.createElement("a",{href:ut.href,title:ut.title,target:"_blank",rel:"noopener noreferrer",className:ut.className},ut.children," ",n.createElement(de,null));function ye(ut){const{links:vt}=ut;return n.createElement(Pe,{href:vt[0].url,title:vt[0].text,className:ut.className})}const he=100,me="<trace-without-root-span>",De=()=>({BreakableText:(0,t.css)`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),le=/\W*\w+\W*/g;function Ee(ut){const{className:vt,text:Et,wordRegexp:It=le}=ut,en=(0,y.wW)(De);if(!Et)return null;const Gt=[];It.exec("");let Ln=It.exec(Et)||[Et];for(;Ln;)Gt.push(n.createElement("span",{key:`${Et}-${Gt.length}`,className:vt||en.BreakableText},Ln[0])),Ln=It.exec(Et);return n.createElement(n.Fragment,null,Gt)}Ee.defaultProps={wordRegexp:le};const be=ut=>({TraceName:(0,t.css)`
      label: TraceName;
      font-size: ${ut.typography.size.lg};
    `});function ge(ut){const{className:vt,traceName:Et}=ut,It=(0,y.wW)(be),en=String(Et||me),Gt=n.createElement(Ee,{text:en});return n.createElement("span",{className:g()(It.TraceName,vt)},Gt)}var ue=e(86832),Ie=e(61950);const ot=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:he,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function Qe(){return ot}function Me(ut){return(0,ue.get)(Qe(),ut)}function Ne(ut){const vt=ut.references?ut.references.find(Et=>Et.refType==="CHILD_OF"):null;return vt?vt.span:null}const qe=/#\{([^{}]*)\}/g;function bt(ut){const vt=new Set;return ut.replace(qe,(Et,It)=>(vt.add(It),Et)),Array.from(vt)}function Fe(ut,vt,Et){return ut.replace(qe,(It,en)=>{const Gt=Et[en];return Gt==null?"":vt(Gt)})}function Ve(ut,vt){if(typeof ut!="string")throw new Error("Invalid template");return{parameters:bt(ut),template:Fe.bind(null,ut,vt)}}function Ue(ut){if(typeof ut=="string")return vt=>vt===ut;if(Array.isArray(ut))return vt=>ut.indexOf(vt)>-1;if(ut==null)return()=>!0;throw new Error(`Invalid value: ${ut}`)}const it=ut=>ut;function ze(ut){try{const vt=Ve(ut.url,encodeURIComponent),Et=Ve(ut.text,it);return{object:ut,type:Ue(ut.type),key:Ue(ut.key),value:Ue(ut.value),url:vt,text:Et,parameters:(0,ue.uniq)(vt.parameters.concat(Et.parameters))}}catch(vt){return console.error(`Ignoring invalid link pattern: ${vt}`,ut),null}}function Xe(ut,vt){if(vt)return vt.find(Et=>Et.key===ut)}function St(ut,vt){let Et=vt;for(;Et;){const It=Xe(ut,Et.tags)||Xe(ut,Et.process.tags);if(It)return It;Et=Ne(Et)}}function Bt(ut,vt){return ut.template(vt)}function zt(ut,vt){const Et=[],It=Object.keys(vt).filter(en=>typeof vt[en]=="string"||vt[en]==="number");return ut?.filter(en=>en?.type("traces")).forEach(en=>{const Gt={};en?.parameters.every(jn=>{const zn=jn;return It.includes(zn)?(Gt[jn]=vt[zn],!0):!1})&&Et.push({url:Bt(en.url,Gt),text:Bt(en.text,Gt)})}),Et}function qt(ut,vt,Et,It){const en=Et[It];let Gt="logs";const Ln=vt.process.tags===Et;Ln&&(Gt="process"),vt.tags===Et&&(Gt="tags");const zn=[];return ut.forEach(qn=>{if(qn.type(Gt)&&qn.key(en.key)&&qn.value(en.value)){const Ia={};qn.parameters.every(aa=>{let ta=Xe(aa,Et);return!ta&&!Ln&&(ta=St(aa,vt)),ta?(Ia[aa]=ta.value,!0):(console.warn(`Skipping link pattern, missing parameter ${aa} for key ${en.key} in ${Gt}.`,qn.object),!1)})&&zn.push({url:Bt(qn.url,Ia),text:Bt(qn.text,Ia)})}}),zn}function Qt(ut,vt){return(Et,It,en)=>{if(ut.length===0)return[];const Gt=It[en];let Ln=vt.get(Gt);return Ln||(Ln=qt(ut,Et,It,en),vt.set(Gt,Ln)),Ln}}const yn=(Me("linkPatterns")||[]).map(ze).filter(ut=>!!ut),Zt=(0,Ie.Z)(10)(ut=>{const vt=[];return ut?zt(yn,ut):vt}),re=Qt(yn,new WeakMap);function Te(ut){let vt;const Et=new Set(ut.map(({spanID:It})=>It));for(let It=0;It<ut.length;It++){if(ut[It].references&&ut[It].references.some(({traceID:jn,spanID:zn})=>jn===ut[It].traceID&&Et.has(zn)))continue;if(!vt){vt=ut[It];continue}const Gt=ut[It].references&&ut[It].references.length||0,Ln=vt.references&&vt.references.length||0;(Gt<Ln||Gt===Ln&&ut[It].startTime<vt.startTime)&&(vt=ut[It])}return vt?`${vt.process.serviceName}: ${vt.operationName}`:""}const We=(0,ue.memoize)(Te,ut=>ut.length?ut[0].traceID:0);function Je(ut){for(let vt=0;vt<ut.length;vt++){const Et=ut[vt].tags.filter(Gt=>Gt.key==="http.method"),It=ut[vt].tags.filter(Gt=>Gt.key==="http.status_code"),en=ut[vt].tags.filter(Gt=>Gt.key==="http.url"||Gt.key==="http.target"||Gt.key==="http.path");if(Et.length>0||It.length>0||en.length>0)return{method:Et,status:It,url:en}}return{}}const je=(0,ue.memoize)(Je,ut=>ut.length?ut[0].traceID:0);var pt=e(81355),ft=e(50820),Tt=e(22160),Ye=e.n(Tt),Ce=e(7906),oe=e(26923),pe=e(94776),Re=e(66820);function ae(ut,vt){let Et="";ut.meta?.forEach(Gt=>{const Ln=`${Gt.label}: ${JSON.stringify(Gt.value)}
`;Et=Et+Ln}),Et=Et+`

`,ut.rows.forEach(Gt=>{const Ln=dateTimeFormat(Gt.timeEpochMs,{defaultWithMS:!0})+"	"+Gt.entry+`
`;Et=Et+Ln});const It=new Blob([Et],{type:"text/plain;charset=utf-8"}),en=`${vt}-logs-${dateTimeFormat(new Date)}.txt`;saveAs(It,en)}function ve(ut,vt,Et,It=DataTransformerID.noop){const en=toCSV([ut],Et),Gt=new Blob([String.fromCharCode(65279),en],{type:"text/csv;charset=utf-8"}),Ln=It!==DataTransformerID.noop?"-as-"+It.toLocaleLowerCase():"",jn=`${vt}-data${Ln}-${dateTimeFormat(new Date)}.csv`;saveAs(Gt,jn)}function xe(ut,vt){const Et=new Blob([JSON.stringify(ut)],{type:"application/json"}),It=`${vt}-${(0,J.dq)(new Date)}.json`;Ye()(Et,It)}function Ge(ut,vt){let Et="otlp";switch(ut.meta?.custom?.traceFormat){case"jaeger":{let It=(0,oe.c6)(new Ce.v(ut));xe(It,vt),Et="jaeger";break}case"zipkin":{let It=(0,Re.H)(new Ce.v(ut));xe(It,vt),Et="zipkin";break}case"otlp":default:{let It=(0,pe.g9)(new Ce.v(ut));xe(It,vt);break}}return Et}var at=e(4919);const dt=ut=>({ActionButton:(0,t.css)`
      label: ActionButton;
      overflow: hidden;
      position: relative;
      &:after {
        content: '';
        background: ${ut.colors.primary.main};
        display: block;
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: all 0.8s;
      }
      &:active:after {
        margin: 0;
        opacity: 0.3;
        transition: 0s;
      }
    `});function st(ut){const{onClick:vt,ariaLabel:Et,label:It,icon:en}=ut,Gt=(0,y.wW)(dt);return n.createElement(at.zx,{className:Gt.ActionButton,size:"sm",variant:"secondary",fill:"outline",type:"button",icon:en,"aria-label":Et,onClick:vt},It)}const Pt=ut=>({TracePageActions:(0,t.css)`
      label: TracePageActions;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    `,feedback:(0,t.css)`
      margin: 6px;
      color: ${ut.colors.text.secondary};
      font-size: ${ut.typography.bodySmall.fontSize};
      &:hover {
        color: ${ut.colors.text.link};
      }
    `});function we(ut){const{traceId:vt,data:Et,app:It}=ut,en=(0,y.l4)(),Gt=Pt(en),[Ln,jn]=(0,n.useState)(!1),zn=()=>{navigator.clipboard.writeText(vt),jn(!0),setTimeout(()=>{jn(!1)},5e3)},qn=()=>{const Ia=Ge(Et,"Trace-"+vt.substring(vt.length-6));(0,r.ff)("grafana_traces_download_traces_clicked",{app:It,grafana_version:ft.config.buildInfo.version,trace_format:Ia,location:"trace-view"})};return n.createElement("div",{className:Gt.TracePageActions},n.createElement("a",{href:"https://forms.gle/RZDEx8ScyZNguDoC8",className:Gt.feedback,title:"Share your thoughts about tracing in Grafana.",target:"_blank",rel:"noreferrer noopener"},n.createElement(ne.J,{name:"comment-alt-message"})," Give feedback"),n.createElement(st,{onClick:zn,ariaLabel:"Copy Trace ID",label:Ln?"Copied!":"Trace ID",icon:"copy"}),n.createElement(st,{onClick:qn,ariaLabel:"Export Trace",label:"Export",icon:"save"}))}var Le=e(99114),Ke=e(99456),ht=e(81803),xt=e(62818),lt=e(74661),Rt=e(69171),Ut=e(12223),Xt=e(9558),$n=e(13273),Mt=e(33914),yt=e(96150);const At=(0,n.memo)(function(vt){const{trace:Et,spanFilterMatches:It,setFocusedSpanIdForSearch:en,focusedSpanIndexForSearch:Gt,setFocusedSpanIndexForSearch:Ln,datasourceType:jn,showSpanFilters:zn}=vt,qn=Ht((0,y.l4)(),zn);(0,n.useEffect)(()=>{if(It&&Gt!==-1){const ga=Array.from(It);en(ga[Gt])}},[Gt,en,It]);const Ia=(ga,es)=>{if(ga.preventDefault(),ga.stopPropagation(),es){if((0,r.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:jn,grafana_version:a.config.buildInfo.version,direction:"next"}),Gt===-1||It&&Gt===It.size-1){Ln(0);return}Ln(Gt+1)}},va=(ga,es)=>{if(ga.preventDefault(),ga.stopPropagation(),es){if((0,r.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:jn,grafana_version:a.config.buildInfo.version,direction:"prev"}),It&&(Gt===-1||Gt===0)){Ln(It.size-1);return}Ln(Gt-1)}},aa=(ga,es)=>{ga.key==="Enter"&&Ia(ga,es)},ta=(ga,es)=>{ga.key==="Enter"&&va(ga,es)},ha=(It&&It?.size>0)??!1,ma=ha?qn.button:(0,t.cx)(qn.button,qn.buttonDisabled),_a=(0,n.useCallback)(ga=>n.createElement(Q.u,{content:ga,placement:"top"},n.createElement("span",{className:qn.tooltip},n.createElement(ne.J,{name:"info-circle",size:"md"}))),[qn.tooltip]),Qa=(0,n.useCallback)((ga,es)=>{const bs=[],vs=[];let Za=n.createElement(n.Fragment,null,n.createElement("span",null,`${Et.spans.length} spans`),_a(n.createElement(n.Fragment,null,n.createElement("div",null,"Services: ",es),n.createElement("div",null,"Depth: ",ga))));if(It)if(It.forEach(cs=>{Et.processes[cs]&&(bs.push(Et.processes[cs].serviceName),vs.push(Et.spans.find(ds=>ds.spanID===cs)?.depth||0))}),It.size===0)Za=n.createElement(n.Fragment,null,n.createElement("span",null,"0 matches"),_a("There are 0 span matches for the filters selected. Please try removing some of the selected filters."));else{const cs=It.size===1?"match":"matches",ds=Gt!==-1?`${Gt+1}/${It.size} ${cs}`:`${It.size} ${cs}`;Za=n.createElement(n.Fragment,null,n.createElement("span",null,ds),_a(n.createElement(n.Fragment,null,n.createElement("div",null,"Services: ",new Set(bs).size,"/",es),n.createElement("div",null,"Depth: ",new Set(vs).size,"/",ga))))}return Za},[Gt,_a,It,Et.processes,Et.spans]),Xa=new Set((0,ue.values)(Et.processes).map(ga=>ga.serviceName)).size,ts=(0,ue.get)((0,ue.maxBy)(Et.spans,"depth"),"depth",0)+1;return n.createElement(n.Fragment,null,n.createElement("span",{className:qn.matches},Qa(ts,Xa)),n.createElement("div",{className:ha?qn.buttons:(0,t.cx)(qn.buttons,qn.buttonsDisabled)},n.createElement("div",{"aria-label":"Prev result button",className:ma,onClick:ga=>va(ga,ha),onKeyDown:ga=>ta(ga,ha),role:"button",tabIndex:ha?0:-1},"Prev"),n.createElement("div",{"aria-label":"Next result button",className:ma,onClick:ga=>Ia(ga,ha),onKeyDown:ga=>aa(ga,ha),role:"button",tabIndex:ha?0:-1},"Next")))}),Ht=(ut,vt)=>{const Et=(0,at.fW)({theme:ut,variant:"secondary",size:vt?"md":"sm",iconOnly:!1,fill:"outline"});return{buttons:(0,t.css)`
      display: inline-flex;
      gap: 4px;
    `,buttonsDisabled:(0,t.css)`
      cursor: not-allowed;
    `,button:(0,t.css)`
      ${Et.button};
    `,buttonDisabled:(0,t.css)`
      ${Et.disabled};
      pointer-events: none;
    `,matches:(0,t.css)`
      margin-right: ${ut.spacing(2)};
    `,tooltip:(0,t.css)`
      color: #aaa;
      margin: 0 0 0 5px;
    `}};var tn=e(26286);function gn(ut,vt){if(!vt)return;let Et=!1;ut.serviceName&&(vt=On(vt,ut),Et=!0),ut.spanName&&(vt=Nn(vt,ut),Et=!0),(ut.from||ut.to)&&(vt=ia(vt,ut),Et=!0);const It=mn(vt,ut.tags);return It&&(vt=It,Et=!0),Et?new Set(vt.map(en=>en.spanID)):void 0}const mn=(ut,vt)=>{if(vt=vt.filter(Et=>Et.key&&Et.key!==""||Et.value),vt.length>0)return ut.filter(Et=>vt.every(It=>{if(It.key&&It.value){if(Et.tags.some(en=>ln(It,en))||Et.process.tags.some(en=>ln(It,en))||Et.logs&&Et.logs.some(en=>en.fields.some(Gt=>ln(It,Gt)))||Et.kind&&It.key===yt.TO&&It.value===Et.kind||Et.statusCode!==void 0&&It.key===yt.Q_&&It.value===Le.Q[Et.statusCode].toLowerCase()||Et.statusMessage&&It.key===yt.S2&&It.value===Et.statusMessage||Et.instrumentationLibraryName&&It.key===yt.cG&&It.value===Et.instrumentationLibraryName||Et.instrumentationLibraryVersion&&It.key===yt.gc&&It.value===Et.instrumentationLibraryVersion||Et.traceState&&It.key===yt.vB&&It.value===Et.traceState||It.key===yt.ID&&It.value===Et.spanID)return Wn(It.operator,!0)}else if(It.key&&(Et.tags.some(en=>Tn(It.key,en.key))||Et.process.tags.some(en=>Tn(It.key,en.key))||Et.logs&&Et.logs.some(en=>en.fields.some(Gt=>Tn(It.key,Gt.key)))||Et.kind&&It.key===yt.TO||Et.statusCode!==void 0&&It.key===yt.Q_||Et.statusMessage&&It.key===yt.S2||Et.instrumentationLibraryName&&It.key===yt.cG||Et.instrumentationLibraryVersion&&It.key===yt.gc||Et.traceState&&It.key===yt.vB||It.key===yt.ID))return Wn(It.operator,!0);return Wn(It.operator,!1)}))},Tn=(ut,vt)=>ut===vt.toString(),ln=(ut,vt)=>ut.key===vt.key.toString()&&ut.value===vt.value.toString(),Wn=(ut,vt)=>ut==="="?vt:!vt,On=(ut,vt)=>ut.filter(Et=>vt.serviceNameOperator==="="?Et.process.serviceName===vt.serviceName:Et.process.serviceName!==vt.serviceName),Nn=(ut,vt)=>ut.filter(Et=>vt.spanNameOperator==="="?Et.operationName===vt.spanName:Et.operationName!==vt.spanName),ia=(ut,vt)=>{const Et=da(vt?.from||""),It=da(vt?.to||"");let en=[];if(Et&&(en=ut.filter(Gt=>vt.fromOperator===">"?Gt.duration>Et:Gt.duration>=Et)),It){const Gt=Ln=>vt.toOperator==="<"?Ln.duration<It:Ln.duration<=It;en=en.length>0?en.filter(Ln=>Gt(Ln)):ut.filter(Ln=>Gt(Ln))}return en},da=ut=>{if(ut.includes("ns"))return parseFloat(ut.split("ns")[0])/1e3;if(ut.includes("us"))return parseFloat(ut.split("us")[0]);if(ut.includes("\xB5s"))return parseFloat(ut.split("\xB5s")[0]);if(ut.includes("ms"))return parseFloat(ut.split("ms")[0])*1e3;if(ut.includes("s"))return parseFloat(ut.split("s")[0])*1e3*1e3;if(ut.includes("m"))return parseFloat(ut.split("m")[0])*1e3*1e3*60;if(ut.includes("h"))return parseFloat(ut.split("h")[0])*1e3*1e3*60*60},Da=(0,n.memo)(function(vt){const{trace:Et,search:It,spanFilterMatches:en,showSpanFilterMatchesOnly:Gt,setShowSpanFilterMatchesOnly:Ln,focusedSpanIndexForSearch:jn,setFocusedSpanIndexForSearch:zn,setFocusedSpanIdForSearch:qn,datasourceType:Ia,clear:va,showSpanFilters:aa}=vt,ta=(0,y.wW)(ja),ha=(0,n.useMemo)(()=>It.serviceName&&It.serviceName!==""||It.spanName&&It.spanName!==""||da(It.from||"")||da(It.to||"")||It.tags.length>1||It.tags.some(ma=>ma.key)||Gt,[It.serviceName,It.spanName,It.from,It.to,It.tags,Gt]);return n.createElement("div",{className:ta.container},n.createElement("div",{className:ta.controls},n.createElement(n.Fragment,null,n.createElement("div",{className:ta.clearButton},n.createElement(at.zx,{variant:"destructive",disabled:!ha,type:"button",fill:"outline","aria-label":"Clear filters button",onClick:va},"Clear"),n.createElement("div",{className:ta.matchesOnly},n.createElement(tn.r,{value:Gt,onChange:ma=>Ln(ma.currentTarget.checked??!1),label:"Show matches only switch"}),n.createElement(at.zx,{onClick:()=>Ln(!Gt),className:ta.clearMatchesButton,variant:"secondary",fill:"text"},"Show matches only"))),n.createElement("div",{className:ta.nextPrevResult},n.createElement(At,{trace:Et,spanFilterMatches:en,setFocusedSpanIdForSearch:qn,focusedSpanIndexForSearch:jn,setFocusedSpanIndexForSearch:zn,datasourceType:Ia,showSpanFilters:aa})))))}),ja=ut=>{const vt=(0,at.fW)({theme:ut,variant:"secondary",size:"md",iconOnly:!1,fill:"outline"});return{button:(0,t.css)(vt.button),buttonDisabled:(0,t.css)(vt.disabled,{pointerEvents:"none",cursor:"not-allowed"}),container:(0,t.css)`
      display: inline;
    `,controls:(0,t.css)`
      display: flex;
      justify-content: flex-end;
      margin: 5px 0 0 0;
    `,clearButton:(0,t.css)`
      order: 1;
    `,matchesOnly:(0,t.css)`
      display: inline-flex;
      margin: 0 0 0 25px;
      vertical-align: middle;
      align-items: center;

      span {
        cursor: pointer;
      }
    `,clearMatchesButton:(0,t.css)`
      color: ${ut.colors.text.primary};
      &:hover {
        background: inherit;
        color: inherit;
      }
    `,nextPrevResult:(0,t.css)`
      margin-left: auto;
      order: 2;
    `}},Na=(0,n.memo)(ut=>{const{trace:vt,search:Et,setSearch:It,showSpanFilters:en,setShowSpanFilters:Gt,showSpanFilterMatchesOnly:Ln,setShowSpanFilterMatchesOnly:jn,setFocusedSpanIdForSearch:zn,spanFilterMatches:qn,datasourceType:Ia}=ut,va={...(0,y.wW)(Ha)},[aa,ta]=(0,n.useState)(),[ha,ma]=(0,n.useState)(),[_a,Qa]=(0,n.useState)(),[Xa,ts]=(0,n.useState)({}),[ga,es]=(0,n.useState)(-1),bs=/^\d+(?:\.\d)?\d*(?:ns|us|µs|ms|s|m|h)$/,vs=(0,n.useCallback)(()=>{ta(void 0),ma(void 0),Qa(void 0),ts({}),It(Mt.js),jn(!1)},[It,jn]);if((0,n.useEffect)(()=>{vs()},[vs,vt]),!vt)return null;const Za=oa=>{es(-1),zn(""),It(oa)},cs=()=>{if(!aa){const oa=vt.spans.map(Ra=>Ra.process.serviceName);ta((0,ue.uniq)(oa).sort().map(Ke.E))}},ds=()=>{if(!ha){const oa=vt.spans.map(Ra=>Ra.operationName);ma((0,ue.uniq)(oa).sort().map(Ke.E))}},gr=()=>{if(!_a){let oa=[],Ra=[];vt.spans.forEach($t=>{$t.tags.forEach(Ya=>{oa.push(Ya.key)}),$t.process.tags.forEach(Ya=>{oa.push(Ya.key)}),$t.logs!==null&&$t.logs.forEach(Ya=>{Ya.fields.forEach(Ks=>{Ra.push(Ks.key)})}),$t.kind&&oa.push(yt.TO),$t.statusCode!==void 0&&oa.push(yt.Q_),$t.statusMessage&&oa.push(yt.S2),$t.instrumentationLibraryName&&oa.push(yt.cG),$t.instrumentationLibraryVersion&&oa.push(yt.gc),$t.traceState&&oa.push(yt.vB),oa.push(yt.ID)}),oa=(0,ue.uniq)(oa).sort(),Ra=(0,ue.uniq)(Ra).sort(),Qa([...oa,...Ra].map(Ke.E))}},Vs=async oa=>{const Ra=[];return vt.spans.forEach($t=>{const Ya=$t.tags.find(As=>As.key===oa)?.value;Ya&&Ra.push(Ya.toString());const Ks=$t.process.tags.find(As=>As.key===oa)?.value;switch(Ks&&Ra.push(Ks.toString()),$t.logs!==null&&$t.logs.forEach(As=>{const er=As.fields.find(ir=>ir.key===oa)?.value;er&&Ra.push(er.toString())}),oa){case yt.TO:$t.kind&&Ra.push($t.kind);break;case yt.Q_:$t.statusCode!==void 0&&Ra.push(Le.Q[$t.statusCode].toLowerCase());break;case yt.S2:$t.statusMessage&&Ra.push($t.statusMessage);break;case yt.cG:$t.instrumentationLibraryName&&Ra.push($t.instrumentationLibraryName);break;case yt.gc:$t.instrumentationLibraryVersion&&Ra.push($t.instrumentationLibraryVersion);break;case yt.vB:$t.traceState&&Ra.push($t.traceState);break;case yt.ID:Ra.push($t.spanID);break;default:break}}),(0,ue.uniq)(Ra).sort().map(Ke.E)},Xs=(oa,Ra)=>{It({...Et,tags:Et.tags?.map(Ya=>Ya.id===oa.id?{...Ya,key:Ra?.value||"",value:void 0}:Ya)}),(async()=>{if(Ra?.value)ts({...Xa,[oa.id]:await Vs(Ra.value)});else{const Ya={...Xa};Ya[oa.id]&&delete Ya[oa.id],ts(Ya)}})()},rr=()=>{const oa={id:(0,Mt.kb)(),operator:"="};It({...Et,tags:[...Et.tags,oa]})},qs=oa=>{let Ra=Et.tags.filter($t=>$t.id!==oa);Ra.length===0&&(Ra=[{id:(0,Mt.kb)(),operator:"="}]),It({...Et,tags:Ra})},or=n.createElement(n.Fragment,null,n.createElement(Q.u,{content:"Filter your spans below. You can continue to apply filters until you have narrowed down your resulting spans to the select few you are most interested in.",placement:"right"},n.createElement("span",{className:va.collapseLabel},"Span Filters",n.createElement(ne.J,{size:"md",name:"info-circle"}))),!en&&n.createElement("div",{className:va.nextPrevResult},n.createElement(At,{trace:vt,spanFilterMatches:qn,setFocusedSpanIdForSearch:zn,focusedSpanIndexForSearch:ga,setFocusedSpanIndexForSearch:es,datasourceType:Ia,showSpanFilters:en})));return n.createElement("div",{className:va.container},n.createElement(xt.U,{label:or,collapsible:!0,isOpen:en,onToggle:Gt},n.createElement(lt.Z,null,n.createElement(Rt._,{label:"Service Name",labelWidth:16},n.createElement(Ut.Lh,{spacing:"xs"},n.createElement(Xt.Ph,{"aria-label":"Select service name operator",onChange:oa=>Za({...Et,serviceNameOperator:oa.value}),options:[(0,Ke.E)("="),(0,Ke.E)("!=")],value:Et.serviceNameOperator}),n.createElement(Xt.Ph,{"aria-label":"Select service name",isClearable:!0,onChange:oa=>Za({...Et,serviceName:oa?.value||""}),onOpenMenu:cs,options:aa,placeholder:"All service names",value:Et.serviceName||null})))),n.createElement(lt.Z,null,n.createElement(Rt._,{label:"Span Name",labelWidth:16},n.createElement(Ut.Lh,{spacing:"xs"},n.createElement(Xt.Ph,{"aria-label":"Select span name operator",onChange:oa=>Za({...Et,spanNameOperator:oa.value}),options:[(0,Ke.E)("="),(0,Ke.E)("!=")],value:Et.spanNameOperator}),n.createElement(Xt.Ph,{"aria-label":"Select span name",isClearable:!0,onChange:oa=>Za({...Et,spanName:oa?.value||""}),onOpenMenu:ds,options:ha,placeholder:"All span names",value:Et.spanName||null})))),n.createElement(lt.Z,null,n.createElement(Rt._,{label:"Duration",labelWidth:16,tooltip:"Filter by duration. Accepted units are ns, us, ms, s, m, h"},n.createElement(Ut.Lh,{spacing:"xs",align:"flex-start"},n.createElement(Xt.Ph,{"aria-label":"Select min span operator",onChange:oa=>Za({...Et,fromOperator:oa.value}),options:[(0,Ke.E)(">"),(0,Ke.E)(">=")],value:Et.fromOperator}),n.createElement("div",{className:va.intervalInput},n.createElement($n.w,{ariaLabel:"Select min span duration",onChange:oa=>Za({...Et,from:oa}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:Et.from||"",validationRegex:bs})),n.createElement(Xt.Ph,{"aria-label":"Select max span operator",onChange:oa=>Za({...Et,toOperator:oa.value}),options:[(0,Ke.E)("<"),(0,Ke.E)("<=")],value:Et.toOperator}),n.createElement($n.w,{ariaLabel:"Select max span duration",onChange:oa=>Za({...Et,to:oa}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:Et.to||"",validationRegex:bs})))),n.createElement(lt.Z,{className:va.tagsRow},n.createElement(Rt._,{label:"Tags",labelWidth:16,tooltip:"Filter by tags, process tags or log fields in your spans."},n.createElement("div",null,Et.tags.map((oa,Ra)=>n.createElement("div",{key:Ra},n.createElement(Ut.Lh,{spacing:"xs",width:"auto"},n.createElement(Xt.Ph,{"aria-label":"Select tag key",isClearable:!0,key:oa.key,onChange:$t=>Xs(oa,$t),onOpenMenu:gr,options:_a,placeholder:"Select tag",value:oa.key||null}),n.createElement(Xt.Ph,{"aria-label":"Select tag operator",onChange:$t=>{Za({...Et,tags:Et.tags?.map(Ya=>Ya.id===oa.id?{...Ya,operator:$t.value}:Ya)})},options:[(0,Ke.E)("="),(0,Ke.E)("!=")],value:oa.operator}),n.createElement("span",{className:va.tagValues},n.createElement(Xt.Ph,{"aria-label":"Select tag value",isClearable:!0,key:oa.value,onChange:$t=>{Za({...Et,tags:Et.tags?.map(Ya=>Ya.id===oa.id?{...Ya,value:$t?.value||""}:Ya)})},options:Xa[oa.id]?Xa[oa.id]:[],placeholder:"Select value",value:oa.value})),n.createElement(ht._,{"aria-label":"Remove tag",variant:"secondary",icon:"times",onClick:()=>qs(oa.id),title:"Remove tag"}),n.createElement("span",{className:va.addTag},Et?.tags?.length&&Ra===Et.tags.length-1&&n.createElement(ht._,{"aria-label":"Add tag",variant:"secondary",icon:"plus",onClick:rr,title:"Add tag"})))))))),n.createElement(Da,{trace:vt,search:Et,spanFilterMatches:qn,showSpanFilterMatchesOnly:Ln,setShowSpanFilterMatchesOnly:jn,setFocusedSpanIdForSearch:zn,focusedSpanIndexForSearch:ga,setFocusedSpanIndexForSearch:es,datasourceType:Ia,clear:vs,showSpanFilters:en})))});Na.displayName="SpanFilters";const Ha=ut=>({container:(0,t.css)`
      margin: 0.5em 0 -${ut.spacing(1)} 0;
      z-index: 5;

      & > div {
        border-left: none;
        border-right: none;
      }
    `,collapseLabel:(0,t.css)`
      svg {
        color: #aaa;
        margin: -2px 0 0 10px;
      }
    `,addTag:(0,t.css)`
      margin: 0 0 0 10px;
    `,intervalInput:(0,t.css)`
      margin: 0 -4px 0 0;
    `,tagsRow:(0,t.css)`
      margin: -4px 0 0 0;
    `,tagValues:(0,t.css)`
      max-width: 200px;
    `,nextPrevResult:(0,t.css)`
      flex: 1;
      align-items: center;
      display: flex;
      justify-content: flex-end;
      margin-right: ${ut.spacing(1)};
    `}),gt=(0,n.memo)(ut=>{const{trace:vt,data:Et,app:It,timeZone:en,search:Gt,setSearch:Ln,showSpanFilters:jn,setShowSpanFilters:zn,showSpanFilterMatchesOnly:qn,setShowSpanFilterMatchesOnly:Ia,setFocusedSpanIdForSearch:va,spanFilterMatches:aa,datasourceType:ta,setHeaderHeight:ha}=ut,ma=(0,y.wW)(Ft);(0,n.useEffect)(()=>{ha(document.querySelector("."+ma.header)?.scrollHeight??0)},[ha,jn,ma.header]);const _a=(0,n.useMemo)(()=>vt?Zt(vt):[],[vt]);if(!vt)return null;const Qa=(vs,Za)=>{const cs=(0,J.dq)(vs.startTime/1e3,{timeZone:Za,defaultWithMS:!0}),ds=cs.match(/^(.+)(:\d\d\.\d+)$/);return ds?n.createElement("span",{className:ma.TracePageHeaderOverviewItemValue},ds[1],n.createElement("span",{className:ma.TracePageHeaderOverviewItemValueDetail},ds[2])):cs},Xa=n.createElement("h1",{className:g()(ma.title)},n.createElement(ge,{traceName:We(vt.spans)}),n.createElement("small",{className:ma.duration},(0,pt.LU)(vt.duration))),{method:ts,status:ga,url:es}=je(vt.spans);let bs="green";return ga&&ga.length>0&&(ga[0].value.toString().charAt(0)==="4"?bs="orange":ga[0].value.toString().charAt(0)==="5"&&(bs="red")),n.createElement("header",{className:ma.header},n.createElement("div",{className:ma.titleRow},_a&&_a.length>0&&n.createElement(ye,{links:_a,className:ma.TracePageHeaderBack}),Xa,n.createElement(we,{traceId:vt.traceID,data:Et,app:It})),n.createElement("div",{className:ma.subtitle},n.createElement("span",{className:ma.timestamp},Qa(vt,en)),n.createElement("span",{className:ma.tagMeta},ts&&ts.length>0&&n.createElement(Q.u,{content:"http.method",interactive:!0},n.createElement("span",{className:ma.tag},n.createElement(Z.C,{text:ts[0].value,color:"blue"}))),ga&&ga.length>0&&n.createElement(Q.u,{content:"http.status_code",interactive:!0},n.createElement("span",{className:ma.tag},n.createElement(Z.C,{text:ga[0].value,color:bs}))),es&&es.length>0&&n.createElement(Q.u,{content:"http.url or http.target or http.path",interactive:!0},n.createElement("span",{className:ma.url},es[0].value)))),n.createElement(Na,{trace:vt,showSpanFilters:jn,setShowSpanFilters:zn,showSpanFilterMatchesOnly:qn,setShowSpanFilterMatchesOnly:Ia,search:Gt,setSearch:Ln,spanFilterMatches:aa,setFocusedSpanIdForSearch:va,datasourceType:ta}))});gt.displayName="TracePageHeader";const Ft=ut=>({TracePageHeaderBack:(0,t.css)`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderOverviewItemValueDetail:g()((0,t.css)`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:(0,t.css)`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,header:(0,t.css)`
      label: TracePageHeader;
      background-color: ${ut.colors.background.primary};
      padding: 0.5em 0 0 0;
      position: sticky;
      top: 0;
      z-index: 5;
    `,titleRow:(0,t.css)`
      align-items: flex-start;
      display: flex;
      padding: 0 8px;
    `,title:(0,t.css)`
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
    `,subtitle:(0,t.css)`
      flex: 1;
      line-height: 1em;
      margin: -0.5em 0.5em 0.75em 0.5em;
    `,tag:(0,t.css)`
      margin: 0 0.5em 0 0;
    `,duration:(0,t.css)`
      color: #aaa;
      margin: 0 0.75em;
    `,timestamp:(0,t.css)`
      vertical-align: middle;
    `,tagMeta:(0,t.css)`
      margin: 0 0.75em;
      vertical-align: text-top;
    `,url:(0,t.css)`
      margin: -2.5px 0.3em;
      height: 15px;
      overflow: hidden;
      word-break: break-all;
      line-height: 20px;
    `,TracePageHeaderTraceId:(0,t.css)`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 30%;
      display: inline-block;
    `});var jt=e(95577),an=e(83568);class cn{constructor(vt){const{isTagsOpen:Et,isProcessOpen:It,isReferencesOpen:en,isWarningsOpen:Gt,isStackTracesOpen:Ln,logs:jn,references:zn}=vt||{};this.isTagsOpen=!!Et,this.isProcessOpen=!!It,this.isReferencesOpen=!!en,this.isWarningsOpen=!!Gt,this.isStackTracesOpen=!!Ln,this.logs={isOpen:!!(jn&&jn.isOpen),openedItems:jn&&jn.openedItems?new Set(jn.openedItems):new Set},this.references={isOpen:!!(zn&&zn.isOpen),openedItems:zn&&zn.openedItems?new Set(zn.openedItems):new Set}}toggleTags(){const vt=new cn(this);return vt.isTagsOpen=!this.isTagsOpen,vt}toggleProcess(){const vt=new cn(this);return vt.isProcessOpen=!this.isProcessOpen,vt}toggleReferences(){const vt=new cn(this);return vt.references.isOpen=!this.references.isOpen,vt}toggleReferenceItem(vt){const Et=new cn(this);return Et.references.openedItems.has(vt)?Et.references.openedItems.delete(vt):Et.references.openedItems.add(vt),Et}toggleWarnings(){const vt=new cn(this);return vt.isWarningsOpen=!this.isWarningsOpen,vt}toggleStackTraces(){const vt=new cn(this);return vt.isStackTracesOpen=!this.isStackTracesOpen,vt}toggleLogs(){const vt=new cn(this);return vt.logs.isOpen=!this.logs.isOpen,vt}toggleLogItem(vt){const Et=new cn(this);return Et.logs.openedItems.has(vt)?Et.logs.openedItems.delete(vt):Et.logs.openedItems.add(vt),Et}}var hn=e(38874);class rn{static iterFunction(vt,Et=0){return It=>vt(It.value,It,Et)}static searchFunction(vt){return typeof vt=="function"?vt:(Et,It)=>vt instanceof rn?It===vt:Et===vt}constructor(vt,Et=[]){this.value=vt,this.children=Et}get depth(){return this.children?.reduce((vt,Et)=>Math.max(Et.depth+1,vt),1)}get size(){let vt=0;return this.walk(()=>vt++),vt}addChild(vt){return this.children?.push(vt instanceof rn?vt:new rn(vt)),this}find(vt){if(rn.iterFunction(rn.searchFunction(vt))(this))return this;for(let It=0;It<this.children.length;It++){const en=this.children[It].find(vt);if(en)return en}return null}getPath(vt){const Et=rn.iterFunction(rn.searchFunction(vt)),It=(en,Gt)=>{const Ln=Gt.concat([en]);if(Et(en))return Ln;for(let jn=0;jn<en.children.length;jn++){const zn=en.children[jn],qn=It(zn,Ln);if(qn)return qn}return null};return It(this,[])}walk(vt,Et=0){const It=[];let en=Et;for(It.push({node:this,depth:en});It.length;){const Gt=It.pop();if(Gt){const{node:Ln,depth:jn}=Gt;vt(Ln.value,Ln,jn),en=(jn||0)+1;let zn=Ln.children.length-1;for(;zn>=0;)It.push({node:Ln.children[zn],depth:en}),zn--}}}}const un=ut=>ut.spanID,nt=ut=>ut.references||[],Be=(0,hn.P1)((0,hn.P1)(({span:ut})=>ut,nt),({type:ut})=>ut,(ut,vt)=>ut.find(Et=>Et.refType===vt)),et=(0,hn.P1)(ut=>Be({span:ut,type:"CHILD_OF"}),ut=>ut?ut.spanID:null),kt=ut=>ut.spans,nn=(0,hn.P1)(kt,ut=>ut.reduce((vt,Et)=>vt.set(un(Et),Et),new Map)),Pn="__root__";function pn(ut){const vt=new Map(ut.spans.map(Gt=>[Gt.spanID,new rn(Gt.spanID)])),Et=new Map(ut.spans.map(Gt=>[Gt.spanID,Gt])),It=new rn(Pn);ut.spans.forEach(Gt=>{const Ln=vt.get(Gt.spanID);if(Array.isArray(Gt.references)&&Gt.references.length){const{refType:jn,spanID:zn}=Gt.references[0];if(jn==="CHILD_OF"||jn==="FOLLOWS_FROM")(vt.get(zn)||It).children?.push(Ln);else throw new Error(`Unrecognized ref type: ${jn}`)}else It.children.push(Ln)});const en=(Gt,Ln)=>{const jn=Gt?.value?Et.get(Gt.value.toString()):void 0,zn=Ln?.value?Et.get(Ln.value.toString()):void 0;return+(jn?.startTime>zn?.startTime)||+(jn?.startTime===zn?.startTime)-1};return ut.spans.forEach(Gt=>{const Ln=vt.get(Gt.spanID);Ln.children.length>1&&Ln?.children.sort(en)}),It.children.sort(en),It}const In=(0,hn.P1)(({spans:ut})=>ut,(0,hn.P1)(({trace:ut})=>ut,pn),({collapsed:ut})=>ut,(ut,vt,Et)=>{const It=Et.reduce((en,Gt)=>(vt.find(Gt).walk(Ln=>Ln!==Gt&&en.add(Ln)),en),new Set);return It.size>0?ut.filter(en=>!It.has(un(en))):ut});function Qn(ut){const vt=new Map,Et=ut.reduce((en,Gt)=>(en.some(Ln=>Ln.key===Gt.key&&Ln.value===Gt.value)?vt.set(`${Gt.key}:${Gt.value}`,`Duplicate tag "${Gt.key}:${Gt.value}"`):en.push(Gt),en),[]),It=Array.from(vt.values());return{dedupedTags:Et,warnings:It}}function Fn(ut,vt){const Et=ut?.slice()??[],It=(vt||[]).map(en=>en.toLowerCase());return Et.sort((en,Gt)=>{const Ln=en.key.toLowerCase(),jn=Gt.key.toLowerCase();for(let zn=0;zn<It.length;zn++){const qn=It[zn];if(Ln.startsWith(qn)&&!jn.startsWith(qn))return-1;if(!Ln.startsWith(qn)&&jn.startsWith(qn))return 1}return Ln>jn?1:Ln<jn?-1:0}),Et}function Ea(ut){if(!ut?.traceID)return null;const vt=ut.traceID.toLowerCase();let Et=0,It=Number.MAX_SAFE_INTEGER;const en=new Map,Gt=new Map;ut.spans=ut.spans.filter(aa=>!!aa.startTime),ut.processes=Object.entries(ut.processes).reduce((aa,[ta,ha])=>(aa[ta]={...ha,tags:Fn(ha.tags)},aa),{});const Ln=ut.spans.length;for(let aa=0;aa<Ln;aa++){const ta=ut.spans[aa],{startTime:ha,duration:ma,processID:_a}=ta;let Qa=ta.spanID;ha<It&&(It=ha),ha+ma>Et&&(Et=ha+ma);const Xa=en.get(Qa);Xa!=null?(console.warn(`Dupe spanID, ${Xa+1} x ${Qa}`,ta,Gt.get(Qa)),(0,ue.isEqual)(ta,Gt.get(Qa))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),en.set(Qa,Xa+1),Qa=`${Qa}_${Xa}`,ta.spanID=Qa):en.set(Qa,1),ta.process=ut.processes[_a],Gt.set(Qa,ta)}const jn=pn(ut),zn=[],qn={};jn.walk((aa,ta,ha=0)=>{if(aa==="__root__"||typeof aa!="string")return;const ma=Gt.get(aa);if(!ma)return;const{serviceName:_a}=ma.process;qn[_a]=(qn[_a]||0)+1,ma.relativeStartTime=ma.startTime-It,ma.depth=ha-1,ma.hasChildren=ta.children.length>0,ma.childSpanCount=ta.children.length,ma.warnings=ma.warnings||[],ma.tags=ma.tags||[],ma.references=ma.references||[];const Qa=Qn(ma.tags);ma.tags=Fn(Qa.dedupedTags,Me("topTagPrefixes")),ma.warnings=ma.warnings.concat(Qa.warnings),ma.references.forEach((Xa,ts)=>{const ga=Gt.get(Xa.spanID);ga&&(Xa.span=ga,ts>0&&(ga.subsidiarilyReferencedBy=ga.subsidiarilyReferencedBy||[],ga.subsidiarilyReferencedBy.push({spanID:aa,traceID:vt,span:ma,refType:Xa.refType})))}),zn.push(ma)});const Ia=We(zn);return{services:Object.keys(qn).map(aa=>({name:aa,numberOfSpans:qn[aa]})),spans:zn,traceID:vt,traceName:Ia,processes:ut.processes,duration:Et-It,startTime:It,endTime:Et}}},95577:(X,L,e)=>{"use strict";e.d(L,{Hn:()=>u,Kg:()=>C,th:()=>h,vc:()=>b});var t=e(41407),n=e(39953),r=e(99456),a=e(47635),i=e(99242),y=e(82803),c=e(74661),l=e(69171),d=e(9558),f=e(38637),m=e(43997);const u="None",h="Duration",C="Tag";function x({options:p,onOptionsChange:v}){const E=(0,y.wW)(g),P=[u,h,C].map(r.E);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement(c.Z,{className:E.row},n.createElement(l._,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},n.createElement(d.Ph,{inputId:"label",options:P,value:p.jsonData.spanBar?.type||"",onChange:S=>{(0,a.tp)({onOptionsChange:v,options:p},"spanBar",{...p.jsonData.spanBar,type:S?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),p.jsonData.spanBar?.type===C&&n.createElement(c.Z,{className:E.row},n.createElement(l._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},n.createElement(f.I,{type:"text",placeholder:"Enter tag key",onChange:S=>(0,a.tp)({onOptionsChange:v,options:p},"spanBar",{...p.jsonData.spanBar,tag:S.currentTarget.value}),value:p.jsonData.spanBar?.tag||"",width:40}))))}const b=({options:p,onOptionsChange:v})=>n.createElement(i._,{title:"Span bar",description:n.createElement(m.W,{description:"Add additional info next to the service and operation on a span bar row in the trace view.",suffix:`${p.type}/#span-bar`,feature:"the span bar"})},n.createElement(x,{options:p,onOptionsChange:v})),g=p=>({infoText:(0,t.css)`
    label: infoText;
    padding-bottom: ${p.spacing(2)};
    color: ${p.colors.text.secondary};
  `,row:(0,t.css)`
    label: row;
    align-items: baseline;
  `})},83568:(X,L,e)=>{"use strict";e.d(L,{u:()=>t});var t=(n=>(n.Logs="log",n.Traces="trace",n.Metrics="metric",n.Unknown="unknown",n))(t||{})},51752:(X,L,e)=>{"use strict";e.d(L,{GL:()=>c,H3:()=>y,Im:()=>C,K9:()=>b,WW:()=>n,b$:()=>h,bi:()=>r,h2:()=>i,im:()=>a,oD:()=>l,ty:()=>x,xb:()=>u});var t=e(41407);const n=(0,t.css)`
  position: relative;
`,r=(0,t.css)`
  margin-bottom: 0.25rem;
`,a=(0,t.css)`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,i=(0,t.css)`
  margin: 0;
`,y=(0,t.css)`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,c=(0,t.css)`
  padding-bottom: 0.5rem;
`,l=(0,t.css)`
  display: flex;
`,d=(0,t.css)`
  align-items: center;
`,f=(0,t.css)`
  align-items: start;
`,m=(0,t.css)`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,u=(0,t.css)`
  text-align: right;
`,h=(0,t.css)`
  display: inline-block;
`,C=(0,t.css)`
  margin: -0.2rem 0.25rem 0 0;
`,x=(0,t.css)`
  text-overflow: ellipsis;
`,b=(0,t.css)`
  width: 100%;
`,g=(0,t.css)`
  color: #aaa;
`,p=(0,t.css)`
  justify-content: flex-end;
`},80185:(X,L,e)=>{"use strict";e.d(L,{EUpdateTypes:()=>n,default:()=>i});var t=(y=>(y.DragEnd="DragEnd",y.DragMove="DragMove",y.DragStart="DragStart",y.MouseEnter="MouseEnter",y.MouseLeave="MouseLeave",y.MouseMove="MouseMove",y))(t||{});const n=t;var r=e(86832);const a=0;class i{constructor({getBounds:c,tag:l,resetBoundsOnResize:d=!0,...f}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=m=>{const{button:u,clientX:h,type:C}=m;if(this._isDragging||u!==a)return;let x=null,b;if(C==="mouseenter")x=n.MouseEnter,b=this._onMouseEnter;else if(C==="mouseleave")x=n.MouseLeave,b=this._onMouseLeave;else if(C==="mousemove")x=n.MouseMove,b=this._onMouseMove;else throw new Error(`invalid event type: ${C}`);if(!b)return;const{value:g,x:p}=this._getPosition(h);b({event:m,type:x,value:g,x:p,manager:this,tag:this.tag})},this._handleDragEvent=m=>{const{button:u,clientX:h,type:C}=m;let x=null,b;if(C==="mousedown"){if(this._isDragging||u!==a)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const v=(0,r.get)(document,"body.style");v&&(v.userSelect="none"),this._isDragging=!0,x=n.DragStart,b=this._onDragStart}else if(C==="mousemove"){if(!this._isDragging)return;x=n.DragMove,b=this._onDragMove}else if(C==="mouseup"){if(!this._isDragging)return;this._stopDragging(),x=n.DragEnd,b=this._onDragEnd}else throw new Error(`invalid event type: ${C}`);if(!b)return;const{value:g,x:p}=this._getPosition(h);b({event:m,type:x,value:g,x:p,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=c,this.tag=l,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=!!d,this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=f.onMouseEnter,this._onMouseLeave=f.onMouseLeave,this._onMouseMove=f.onMouseMove,this._onDragStart=f.onDragStart,this._onDragMove=f.onDragMove,this._onDragEnd=f.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(c){const{clientXLeft:l,maxValue:d,minValue:f,width:m}=this._getBounds();let u=c-l,h=u/m;return f!=null&&h<f?(h=f,u=f*m):d!=null&&h>d&&(h=d,u=d*m),{value:h,x:u}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const c=(0,r.get)(document,"body.style");c&&(c.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}},27523:(X,L,e)=>{"use strict";e.d(L,{_K:()=>l,e6:()=>d});var t=e(16360),n=e(63374),r=e(59561);function a(m){if(m.length!==7)return[0,0,0];const u=m.slice(1,3),h=m.slice(3,5),C=m.slice(5);return[parseInt(u,16),parseInt(h,16),parseInt(C,16)]}class i{constructor(u,h){const C=f(u,h);this.colorsHex=C,this.colorsRgb=C.map(a),this.cache=new Map,this.prevColorIndex=void 0}_getColorIndex(u){let h=this.cache.get(u);if(h==null){const C=this.hashCode(u.toLowerCase());if(h=Math.abs(C%this.colorsHex.length),this.prevColorIndex!==void 0){this.prevColorIndex===h&&(h=this.getNextIndex(h));const x=this.colorsHex[this.prevColorIndex];if(n.Z.readability(x,this.colorsHex[h])<1.5){let b=h;for(let g=0;g<this.colorsHex.length;g++)if(b=this.getNextIndex(b),n.Z.readability(x,this.colorsHex[b])>1.5){h=b;break}}}this.cache.set(u,h),this.prevColorIndex=h}return h}getNextIndex(u){return u+1<this.colorsHex.length?u+1:0}hashCode(u){let h=0,C,x;for(C=0;C<u.length;C++)x=u.charCodeAt(C),h=(h<<5)-h+x;return h}getColorByKey(u){const h=this._getColorIndex(u);return this.colorsHex[h]}getRgbColorByKey(u){const h=this._getColorIndex(u);return this.colorsRgb[h]}clear(){this.cache.clear()}}const y=(0,t.Z)((m,u)=>new i(m,u));function c(m){y([],m)}function l(m,u){return y(r.O9,u).getColorByKey(m)}function d(m,u){return y(r.O9,u).getRgbColorByKey(m)}function f(m,u){const h=[...m],C=h.indexOf("#E24D42");C>-1&&h.splice(C,1);const x=m.indexOf("#BF1B00");x>-1&&h.splice(x,1);let b=[];for(const g of h)n.Z.readability(u.colors.background.primary,g)>=3&&b.push(g);return b}},81355:(X,L,e)=>{"use strict";e.d(L,{LU:()=>v});var t=e(86832),n=e.n(t),r=e(21306),a=e.n(r);const i="YYYY-MM-DD",y="HH:mm",c=1e3,l=1e3*c,d=60*l,f=60*d,m=24*f,u=Math.log10(c),h=[{unit:"d",microseconds:m,ofPrevious:24},{unit:"h",microseconds:f,ofPrevious:60},{unit:"m",microseconds:d,ofPrevious:60},{unit:"s",microseconds:l,ofPrevious:1e3},{unit:"ms",microseconds:c,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],C=(E,P,S)=>toFloatPrecision(E/S,P)*S;function x(E){return moment(E/c).format(i)}function b(E){return moment(E/c).format(y)}function g(E){const P=C(E,u,c);return`${moment.duration(P/c).asMilliseconds()}ms`}function p(E){const P=C(E,u,l);return`${moment.duration(P/c).asSeconds()}s`}function v(E){const[P,S]=(0,t.dropWhile)(h,({microseconds:O},N)=>N<h.length-1&&O>E);if(P.ofPrevious===1e3)return`${(0,t.round)(E/P.microseconds,2)}${P.unit}`;const R=`${Math.floor(E/P.microseconds)}${P.unit}`,I=Math.round(E/S.microseconds%P.ofPrevious),A=`${I}${S.unit}`;return I===0?R:`${R} ${A}`}},33914:(X,L,e)=>{"use strict";e.d(L,{Rx:()=>c,js:()=>y,kb:()=>a});var t=e(39953),n=e(34032),r=e(29788);const a=()=>(0,n.Z)().slice(0,12),y={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[{id:a(),operator:"="}]};function c(l){const[d,f]=(0,t.useState)(y),m=(0,t.useMemo)(()=>l&&(0,r.filterSpans)(d,l),[d,l]);return{search:d,setSearch:f,spanFilterMatches:m}}},19672:(X,L,e)=>{"use strict";e.d(L,{km:()=>Rr,CK:()=>Ar,iz:()=>xr,CL:()=>fo});var t=e(77960),n=e(44951),r=e(31312),a=e(69733),i=e(4148),y=e(41407),c=e(39953),l=e(93676);const d=(Oe,ke)=>({rowWrapper:css`
    position: relative;
    min-width: ${rawListItemColumnWidth};
    padding-right: 5px;
  `,rowValue:css`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    display: block;
    padding-right: 10px;

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:before {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(to right, transparent calc(100% - 25px), ${Oe.colors.background.primary});
    }
  `,rowValuesWrap:css`
    padding-left: ${rawListPaddingToHoldSpaceForCopyIcon};
    width: calc(${ke} * ${rawListItemColumnWidth});
    display: flex;
  `}),f=({totalNumberOfValues:Oe,values:ke,hideFieldsWithoutValues:ct})=>{const Dt=useStyles2(Kt=>d(Kt,Oe));return React.createElement("div",{role:"cell",className:Dt.rowValuesWrap},ke?.map(Kt=>ct&&(Kt.value===void 0||Kt.value===RawPrometheusListItemEmptyValue)?null:React.createElement("span",{key:Kt.key,className:Dt.rowWrapper},React.createElement("span",{className:Dt.rowValue},Kt.value))))},m=Oe=>{const ke=Oe.isDark?"#ce9178":"#a31515",ct=Oe.isDark?"#73bf69":"#56a64b";return{metricName:css`
      color: ${ct};
    `,metricValue:css`
      color: ${ke};
    `,expanded:css`
      display: block;
      text-indent: 1em;
    `}},u=({value:Oe,index:ke,length:ct,isExpandedView:Dt})=>{const Kt=useStyles2(m),fn=Oe.key,Bn=Oe.value;return React.createElement("span",{className:Dt?Kt.expanded:"",key:ke},React.createElement("span",{className:Kt.metricName},fn),React.createElement("span",null,"="),React.createElement("span",null,'"'),React.createElement("span",{className:Kt.metricValue},Bn),React.createElement("span",null,'"'),ke<ct-1&&React.createElement("span",null,", "))},h=null,C="20px",x="80px",b="25px",g=(Oe,ke,ct)=>({rowWrapper:css`
    border-bottom: 1px solid ${Oe.colors.border.medium};
    display: flex;
    position: relative;
    padding-left: 22px;
    ${ct?"":"align-items: center;"}
    ${ct?"":"height: 100%;"}
  `,copyToClipboardWrapper:css`
    position: absolute;
    left: 0;
    ${ct?"":"bottom: 0;"}
    ${ct?"top: 4px;":"top: 0;"}
    margin: auto;
    z-index: 1;
    height: 16px;
    width: 16px;
  `,rowLabelWrapWrap:css`
    position: relative;
    width: calc(100% - (${ke} * ${x}) - ${b});
  `,rowLabelWrap:css`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    padding-right: ${C};

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:after {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(
        to right,
        transparent calc(100% - ${C}),
        ${Oe.colors.background.primary}
      );
    }
  `});function p(Oe){let ke=[],ct=[];for(const Dt in Oe)Dt in Oe&&Oe[Dt]&&!Dt.includes("Value")?ke.push({key:Dt,value:Oe[Dt]}):Dt in Oe&&Oe[Dt]&&Dt.includes("Value")&&ct.push({key:Dt,value:Oe[Dt]});return{values:ct,attributeValues:ke}}const v=({listItemData:Oe,listKey:ke,totalNumberOfValues:ct,valueLabels:Dt,isExpandedView:Kt})=>{const{__name__:fn,...Bn}=Oe,[Hn,na]=useCopyToClipboard(),sa=Dt?.length??ct,Sa=useStyles2(Fs=>g(Fs,sa,Kt)),{values:La,attributeValues:ks}=p(Bn),Ns=Fs=>Fs==="\u221E"||Fs==="Infinity"?"+Inf":Fs,js=`${fn}{${ks.map(Fs=>`${Fs.key}="${Ns(Fs.value)}"`)}}`,Lr=!!(Dt&&Dt?.length);return React.createElement(React.Fragment,null,Dt!==void 0&&Kt&&React.createElement(ItemLabels,{valueLabels:Dt,expanded:Kt}),React.createElement("div",{key:ke,className:Sa.rowWrapper},React.createElement("span",{className:Sa.copyToClipboardWrapper},React.createElement(IconButton,{tooltip:"Copy to clipboard",onClick:()=>{reportInteraction("grafana_explore_prometheus_instant_query_ui_raw_toggle_expand"),na(js)},name:"copy"})),React.createElement("span",{role:"cell",className:Sa.rowLabelWrapWrap},React.createElement("div",{className:Sa.rowLabelWrap},React.createElement("span",null,fn),React.createElement("span",null,"{"),React.createElement("span",null,ks.map((Fs,Sr)=>React.createElement(RawListItemAttributes,{isExpandedView:Kt,value:Fs,key:Sr,index:Sr,length:ks.length}))),React.createElement("span",null,"}"))),React.createElement(ItemValues,{hideFieldsWithoutValues:Lr,totalNumberOfValues:sa,values:La})))},E=null,P=(Oe,ke)=>({valueNavigation:css`
      width: ${rawListItemColumnWidth};
      font-weight: bold;
    `,valueNavigationWrapper:css`
      display: flex;
      justify-content: flex-end;
    `,itemLabelsWrap:css`
      ${ke?"":`border-bottom: 1px solid ${Oe.colors.border.medium}`};
    `}),S=Oe=>Oe.includes(l.QG)?Oe.replace(l.QG,""):Oe,M=({valueLabels:Oe,expanded:ke})=>{const ct=useStyles2(Dt=>P(Dt,ke));return React.createElement("div",{className:ct.itemLabelsWrap},React.createElement("div",{className:ct.valueNavigationWrapper},Oe.map((Dt,Kt)=>React.createElement("span",{className:ct.valueNavigation,key:Dt.name},S(Dt.name)))))};var R=e(26205);const I=c.createContext(void 0);function A(){const Oe=useContext(I);if(!Oe)throw new Error("No GrafanaContext found");return Oe}const O=({sourceUID:Oe,targetUID:ke,...ct})=>{const Dt=(0,R.F)().getInstanceSettings(Oe),Kt=(0,R.F)().getInstanceSettings(ke);if(Dt&&Dt?.uid!==void 0&&Kt&&Kt.uid!==void 0)return{...ct,source:Dt,target:Kt}},N=Oe=>!!Oe,o=Oe=>({...Oe,correlations:Oe.correlations.map(O).filter(N)});function w(Oe){return Oe.data}const K=()=>{const{backend:Oe}=useGrafana(),[ke,ct]=useAsyncFn(sa=>lastValueFrom(Oe.fetch({url:"/api/datasources/correlations",params:{page:sa.page},method:"GET",showErrorAlert:!1})).then(w).then(o),[Oe]),[Dt,Kt]=useAsyncFn(({sourceUID:sa,...Sa})=>Oe.post(`/api/datasources/uid/${sa}/correlations`,Sa).then(La=>{const ks=O(La.result);if(ks!==void 0)return ks;throw new Error("invalid sourceUID")}),[Oe]),[fn,Bn]=useAsyncFn(({sourceUID:sa,uid:Sa})=>Oe.delete(`/api/datasources/uid/${sa}/correlations/${Sa}`),[Oe]),[Hn,na]=useAsyncFn(({sourceUID:sa,uid:Sa,...La})=>Oe.patch(`/api/datasources/uid/${sa}/correlations/${Sa}`,La).then(ks=>{const Ns=O(ks.result);if(Ns!==void 0)return Ns;throw new Error("invalid sourceUID")}),[Oe]);return{create:{execute:Kt,...Dt},update:{execute:na,...Hn},get:{execute:ct,...ke},remove:{execute:Bn,...fn}}},V=(Oe,ke,ct)=>(Oe.forEach(Dt=>{const Kt=Dt.refId;if(!Kt)return;let fn=ct[Kt];if(fn===void 0&&Dt.meta?.preferredVisualisationType==="rawPrometheus"){const Hn=S(Kt);fn=ct[Hn]}const Bn=ke.filter(Hn=>Hn.source.uid===fn);_(Dt,Bn)}),Oe),_=(Oe,ke)=>{Oe.fields.forEach(ct=>{ct.config.links=ct.config.links?.filter(Dt=>Dt.origin!==a.n1.Correlations)||[],ke.map(Dt=>{Dt.config?.field===ct.name&&ct.config.links.push({internal:{query:Dt.config?.target,datasourceUid:Dt.target.uid,datasourceName:Dt.target.name,transformations:Dt.config?.transformations},url:"",title:Dt.label||Dt.target.name,origin:a.n1.Correlations})})})},U=async Oe=>(0,r.n)((0,i.i)().fetch({url:"/api/datasources/correlations",method:"GET",showErrorAlert:!1,params:{sourceUID:Oe}})).then(w).then(o);var $=e(2190),k=e(21527),H=e(86936),j=e(89162),z=e.n(j),F=e(86832),J=e(53323),Q=e(63302),Z=e(93105),ne=e(36497),ee=e(84289),de=e(63646),Pe=e(30976),ye=e(10694),he=e(69323),me=e(54721),De=e(71519),le=e(53305),Ee=e(72639),be=e(32688),ge=e(56858),ue=e(24677),Ie=e(74600),ot=e(97316),Qe=e(14687),Me=e(11164),Ne=e(71476),qe=e(23738),bt=e(94123),Fe=e(89591),Ve=e(41891),Ue=e(20810),it=e(13090);const ze=Oe=>{const ke=[],ct=[],Dt=[],Kt=[],fn=[],Bn=[],Hn=[],na=[];for(const sa of Oe.series){if(Zt(sa)){na.push(sa);continue}switch(sa.meta?.preferredVisualisationType){case"logs":Kt.push(sa);break;case"graph":ke.push(sa);break;case"trace":fn.push(sa);break;case"table":ct.push(sa);break;case"rawPrometheus":Dt.push(sa);break;case"nodeGraph":Bn.push(sa);break;case"flamegraph":Hn.push(sa);break;default:yn(sa)&&ke.push(sa),ct.push(sa)}}return{...Oe,graphFrames:ke,tableFrames:ct,logsFrames:Kt,traceFrames:fn,nodeGraphFrames:Bn,customFrames:na,flameGraphFrames:Hn,rawPrometheusFrames:Dt,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},Xe=({queries:Oe,correlations:ke})=>ct=>{if(Oe?.length&&ke?.length){const Dt=(0,F.mapValues)((0,F.groupBy)(Oe,"refId"),"0.datasource.uid");V(ct.series,ke,Dt)}return ct},St=Oe=>Oe.graphFrames.length?{...Oe,graphResult:Oe.graphFrames}:{...Oe,graphResult:null},Bt=Oe=>{if(Oe.tableFrames.length===0)return(0,Q.of)({...Oe,tableResult:null});Oe.tableFrames.sort((Kt,fn)=>{const Bn=Kt.refId,Hn=fn.refId;return Bn>Hn?1:Bn<Hn?-1:0});const ke=Oe.tableFrames.every(Kt=>yn(Kt)),ct={interpolate:Kt=>Kt};return(ke?(0,Q.of)(Oe.tableFrames).pipe(qe.Y.joinByFieldTransformer.operator({},ct)):(0,Q.of)(Oe.tableFrames).pipe(qe.Y.mergeTransformer.operator({},ct))).pipe((0,Ne.U)(Kt=>{for(const fn of Kt)for(const Bn of fn.fields)Bn.display=Bn.display??(0,bt.U)({field:Bn,theme:be.config.theme2,timeZone:Oe.request?.timezone??"browser"});return{...Oe,tableResult:Kt}}))},zt=Oe=>{const ke=Oe.rawPrometheusFrames;if(!ke||ke.length===0)return(0,Q.of)({...Oe,tableResult:null});ke.sort((fn,Bn)=>{const Hn=fn.refId,na=Bn.refId;return Hn>na?1:Hn<na?-1:0});const ct=ke.every(fn=>yn(fn)),Dt={interpolate:fn=>fn};return(ct?(0,Q.of)(ke).pipe(qe.Y.joinByFieldTransformer.operator({},Dt)):(0,Q.of)(ke).pipe(qe.Y.mergeTransformer.operator({},Dt))).pipe((0,Ne.U)(fn=>{const Bn=fn[0];for(const Hn of Bn.fields)Hn.display=Hn.display??(0,bt.U)({field:Hn,theme:be.config.theme2,timeZone:Oe.request?.timezone??"browser"});return{...Oe,rawPrometheusResult:Bn}}))},qt=(Oe={})=>ke=>{if(ke.logsFrames.length===0)return{...ke,logsResult:null};const ct=ke.request?.intervalMs,Dt=(0,Ve.aB)(ke.logsFrames,ct,Oe.absoluteRange,Oe.queries),Kt=(0,n.Oy)(Oe.refreshInterval),fn=(0,Ue.j0)(Dt,Kt),Bn=fn.rows,Hn=fn.series,na={...fn,rows:Bn,series:Hn};return{...ke,logsResult:na}};function Qt(Oe,ke,ct,Dt,Kt,fn){return(0,Q.of)(Oe).pipe((0,Ne.U)(Bn=>(0,le.zR)(Bn,ke)),(0,Ne.U)(Xe({queries:Kt,correlations:fn})),(0,Ne.U)(ze),(0,Ne.U)(St),(0,Ne.U)(qt({absoluteRange:ct,refreshInterval:Dt,queries:Kt})),(0,ee.z)(zt),(0,ee.z)(Bt))}function yn(Oe){const ke=(0,F.groupBy)(Oe.fields,ct=>ct.type);return!!(Object.keys(ke).length===2&&ke[Fe.fS.time]?.length===1&&ke[Fe.fS.number])}function Zt(Oe){return Oe.meta?.preferredVisualisationPluginId?(0,it.eD)(Oe.meta?.preferredVisualisationPluginId):!1}var re=(Oe=>(Oe.StorageFull="StorageFull",Oe.DuplicatedEntry="DuplicatedEntry",Oe))(re||{}),Te=(Oe=>(Oe.LimitExceeded="LimitExceeded",Oe))(Te||{}),We=e(21308),Je=(Oe=>(Oe.Descending="Descending",Oe.Ascending="Ascending",Oe.DatasourceAZ="Datasource A-Z",Oe.DatasourceZA="Datasource Z-A",Oe))(Je||{}),je=e(23062);const pt=Oe=>{const ke=(0,R.F)().getInstanceSettings(Oe.datasourceName);return{id:Oe.ts.toString(),createdAt:Oe.ts,datasourceName:Oe.datasourceName,datasourceUid:ke?.uid||"",starred:Oe.starred,comment:Oe.comment,queries:Oe.queries}},ft=Oe=>{if(!(0,R.F)().getInstanceSettings({uid:Oe.datasourceUid}))throw new Error("Datasource not found.");return{ts:Oe.createdAt,datasourceName:Oe.datasourceName,starred:Oe.starred,comment:Oe.comment,queries:Oe.queries}};function Tt(Oe,ke,ct,Dt,Kt){const fn=oe(Oe,ct),Bn=pe(fn,Dt),Hn=Kt?Ce(Bn,Kt):Bn;return Re(Hn,ke)}const Ye=(Oe,ke)=>{const ct=new Date,Dt=new Date(ct.setDate(ct.getDate()-Oe));return ke?Dt.setHours(24,0,0,0):Dt.setHours(0,0,0,0)};function Ce(Oe,ke){const ct=Ye(ke[0],!0),Dt=Ye(ke[1],!1);return Oe.filter(Kt=>Kt.createdAt<ct&&Kt.createdAt>Dt)}function oe(Oe,ke){return ke.length>0?Oe.filter(ct=>ke.includes(ct.datasourceName)):Oe}function pe(Oe,ke){return Oe.filter(ct=>ct.comment.includes(ke)?!0:ct.queries.filter(Kt=>Object.values((0,F.omit)(Kt,["datasource","key","refId","hide","queryType"])).some(fn=>fn?.toString().includes(ke))).length>0)}const Re=(Oe,ke)=>{let ct;return ke===Je.Ascending&&(ct=(Dt,Kt)=>Dt.createdAt<Kt.createdAt?-1:Dt.createdAt>Kt.createdAt?1:0),ke===Je.Descending&&(ct=(Dt,Kt)=>Dt.createdAt<Kt.createdAt?1:Dt.createdAt>Kt.createdAt?-1:0),ke===Je.DatasourceZA&&(ct=(Dt,Kt)=>Dt.datasourceName<Kt.datasourceName?-1:Dt.datasourceName>Kt.datasourceName?1:0),ke===Je.DatasourceAZ&&(ct=(Dt,Kt)=>Dt.datasourceName<Kt.datasourceName?1:Dt.datasourceName>Kt.datasourceName?-1:0),Oe.sort(ct)},ae={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"},ve="grafana.explore.richHistory",xe=1e4;class Ge{async getRichHistory(ke){const ct=Pt().map(pt),Dt=ke.starred?ct.filter(fn=>fn.starred===!0):ct,Kt=Tt(Dt,ke.sortOrder,ke.datasourceFilters,ke.search,[ke.from,ke.to]);return{richHistory:Kt,total:Kt.length}}async addToRichHistory(ke){const ct=Date.now(),Dt={id:ct.toString(),createdAt:ct,...ke},Kt=ft(Dt),fn=dt(Pt()),Bn=Kt.queries.map(La=>(0,F.omit)(La,["key","refId"])),Hn=fn.length>0&&fn[0].queries.map(La=>(0,F.omit)(La,["key","refId"]));if((0,F.isEqual)(Bn,Hn)){const La=new Error("Entry already exists");throw La.name=re.DuplicatedEntry,La}const{queriesToKeep:na,limitExceeded:sa}=st(fn),Sa=[Kt,...na];try{je.Z.setObject(ve,Sa)}catch(La){if(La instanceof Error&&La.name==="QuotaExceededError")ht(re.StorageFull,`Saving rich history failed: ${La.message}`);else throw La}return sa?{warning:{type:Te.LimitExceeded,message:`Query history reached the limit of ${xe}. Old, not-starred items have been removed.`},richHistoryQuery:Dt}:{richHistoryQuery:Dt}}async deleteAll(){je.Z.delete(ve)}async deleteRichHistory(ke){const ct=parseInt(ke,10),Kt=je.Z.getObject(ve,[]).filter(fn=>fn.ts!==ct);je.Z.setObject(ve,Kt)}async updateStarred(ke,ct){return at(ke,Dt=>Dt.starred=ct)}async updateComment(ke,ct){return at(ke,Dt=>Dt.comment=ct)}async getSettings(){return{activeDatasourceOnly:je.Z.getObject(ae.activeDatasourceOnly,!1),retentionPeriod:je.Z.getObject(ae.retentionPeriod,7),starredTabAsFirstTab:je.Z.getBool(ae.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:je.Z.getObject(ae.datasourceFilters,[]).map(ke=>ke.value)}}async updateSettings(ke){je.Z.set(ae.activeDatasourceOnly,ke.activeDatasourceOnly),je.Z.set(ae.retentionPeriod,ke.retentionPeriod),je.Z.set(ae.starredTabAsFirstTab,ke.starredTabAsFirstTab),je.Z.setObject(ae.datasourceFilters,(ke.lastUsedDatasourceFilters||[]).map(ct=>({value:ct})))}}function at(Oe,ke){const ct=parseInt(Oe,10),Dt=je.Z.getObject(ve,[]),Kt=(0,F.find)(Dt,{ts:ct});if(!Kt)throw new Error("Rich history item not found.");return ke(Kt),je.Z.setObject(ve,Dt),pt(Kt)}function dt(Oe){const ke=je.Z.getObject(ae.retentionPeriod,7),ct=Ye(ke,!1);return Oe.filter(Dt=>Dt.ts>ct||Dt.starred===!0)||[]}function st(Oe){let ke=!1,ct=Oe.length-1;for(;ct>=0&&Oe.length>=xe;)Oe[ct].starred||(Oe.splice(ct,1),ke=!0),ct--;return{queriesToKeep:Oe,limitExceeded:ke}}function Pt(){const Oe=je.Z.getObject(ve,[]);return we(Oe)}function we(Oe){return Oe.map(ct=>{const Dt=ct.queries.map((Kt,fn)=>Le(ct,Kt,fn));return{...ct,queries:Dt}})}function Le(Oe,ke,ct){const Dt="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof ke=="object"?ke:Ke(ke)?JSON.parse(ke):{expr:ke,refId:Dt[ct]}}function Ke(Oe){try{JSON.parse(Oe)}catch{return!1}return!0}function ht(Oe,ke){const ct=new Error(ke);throw ct.name=Oe,ct}var xt=e(1277);class lt{constructor(ke){this.resourceUri=ke}update(ke){return xt.ae.put(`/api/${this.resourceUri}/preferences`,ke)}patch(ke){return xt.ae.patch(`/api/${this.resourceUri}/preferences`,ke)}load(){return xt.ae.get(`/api/${this.resourceUri}/preferences`)}}const Rt=Oe=>{const ke=(0,R.F)().getInstanceSettings({uid:Oe.datasourceUid});return{id:Oe.uid,createdAt:Oe.createdAt*1e3,datasourceName:ke?.name||"",datasourceUid:Oe.datasourceUid,starred:Oe.starred,comment:Oe.comment,queries:Oe.queries}},Ut=Oe=>({uid:Oe.id,createdAt:Math.floor(Oe.createdAt/1e3),datasourceUid:Oe.datasourceUid,starred:Oe.starred,comment:Oe.comment,queries:Oe.queries});class Xt{constructor(){this.preferenceService=new lt("user")}async addToRichHistory(ke){const{result:ct}=await(0,i.i)().post("/api/query-history",{dataSourceUid:ke.datasourceUid,queries:ke.queries});return{richHistoryQuery:Rt(ct)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(ke){(0,i.i)().delete(`/api/query-history/${ke}`)}async getRichHistory(ke){const ct=$n(ke);let Dt="query-history-get-all";ke.starred&&(Dt="query-history-get-starred");const fn=(await(0,r.n)((0,i.i)().fetch({method:"GET",url:`/api/query-history?${ct}`,requestId:Dt}))).data,Bn=(fn.result.queryHistory||[]).map(Rt),Hn=fn.result.totalCount||0;return{richHistory:Bn,total:Hn}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(ke,ct){const Dt=await(0,i.i)().patch(`/api/query-history/${ke}`,{comment:ct});return Rt(Dt.result)}updateSettings(ke){return this.preferenceService.patch({queryHistory:{homeTab:ke.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(ke,ct){let Dt;return ct?Dt=await(0,i.i)().post(`/api/query-history/star/${ke}`):Dt=await(0,i.i)().delete(`/api/query-history/star/${ke}`),Rt(Dt.result)}}function $n(Oe){let ke=`${Oe.datasourceFilters.map(ct=>{const Dt=(0,R.F)().getInstanceSettings(ct).uid;return`datasourceUid=${encodeURIComponent(Dt)}`}).join("&")}`;if(Oe.search&&(ke=ke+`&searchString=${Oe.search}`),Oe.sortOrder&&(ke=ke+`&sort=${Oe.sortOrder===Je.Ascending?"time-asc":"time-desc"}`),!Oe.starred){const ct=Oe.from===0?"now":`now-${Oe.from}d`,Dt=Oe.to===0?"now":`now-${Oe.to}d`;ke=ke+`&to=${ct}`,ke=ke+`&from=${Dt}`}return ke=ke+"&limit=100",ke=ke+`&page=${Oe.page||1}`,Oe.starred&&(ke=ke+`&onlyStarred=${Oe.starred}`),ke}const Mt=new Ge,yt=new Xt,At=()=>be.config.queryHistoryEnabled?yt:Mt,Ht=()=>config.queryHistoryEnabled?{availableFilters:[SortOrder.Descending,SortOrder.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:contextSrv.isSignedIn}:{availableFilters:[SortOrder.Descending,SortOrder.Ascending,SortOrder.DatasourceAZ,SortOrder.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0};async function tn(Oe,ke,ct,Dt,Kt,fn,Bn){const Hn=ct&&ct.filter(na=>jt(na));if(Hn.length>0){let na=!1,sa=!1,Sa;try{Sa=(await At().addToRichHistory({datasourceUid:Oe,datasourceName:ke??"",queries:Hn,starred:Dt,comment:Kt??""})).warning}catch(La){return La instanceof Error&&(La.name===re.StorageFull?(na=!0,fn&&(0,Ie.WI)((0,ot.$l)((0,Qe.t_)(La.message)))):La.name!==re.DuplicatedEntry&&(0,Ie.WI)((0,ot.$l)((0,Qe.t_)("Rich History update failed",La.message)))),{richHistoryStorageFull:na,limitExceeded:sa}}return Sa&&Sa.type===Te.LimitExceeded&&(sa=!0,Bn&&(0,Ie.WI)((0,ot.$l)((0,Qe.ZR)(Sa.message)))),{richHistoryStorageFull:na,limitExceeded:sa}}return{}}async function gn(Oe){return await At().getRichHistory(Oe)}async function mn(Oe){await getRichHistoryStorage().updateSettings(Oe)}async function Tn(){return await getRichHistoryStorage().getSettings()}async function ln(){return getRichHistoryStorage().deleteAll()}async function Wn(Oe,ke){try{return await getRichHistoryStorage().updateStarred(Oe,ke)}catch(ct){ct instanceof Error&&dispatch(notifyApp(createErrorNotification("Saving rich history failed",ct.message)));return}}async function On(Oe,ke){try{return await getRichHistoryStorage().updateComment(Oe,ke)}catch(ct){ct instanceof Error&&dispatch(notifyApp(createErrorNotification("Saving rich history failed",ct.message)));return}}async function Nn(Oe){try{return await getRichHistoryStorage().deleteRichHistory(Oe),Oe}catch(ke){ke instanceof Error&&dispatch(notifyApp(createErrorNotification("Saving rich history failed",ke.message)));return}}const ia=Oe=>{const ke={range:{from:"now-1h",to:"now"},datasource:Oe.datasourceName,queries:Oe.queries},ct=serializeStateToUrlParam(ke),Dt=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return urlUtil.renderUrl(`${Dt}/explore`,{left:ct})},da=Oe=>{let ke;switch(Oe){case 0:ke="today";break;case 1:ke="yesterday";break;case 7:ke="a week ago";break;case 14:ke="two weeks ago";break;default:ke=`${Oe} days ago`}return ke};function Da(Oe){return dateTimeFormat(Oe,{format:"MMMM D"})}function ja(Oe){const ke=omit(Oe,["key","refId","datasource"]);return JSON.stringify(ke)}function Na(Oe,ke){let ct="";return ke===SortOrder.DatasourceAZ||ke===SortOrder.DatasourceZA?ct=Oe.datasourceName:ct=Da(Oe.createdAt),ct}function Ha(Oe,ke){return ke?.getQueryDisplayText?ke.getQueryDisplayText(Oe):ja(Oe)}function gt(Oe,ke){let ct={};return Oe.forEach(Dt=>{let Kt=Na(Dt,ke);Kt in ct?ct[Kt]=[...ct[Kt],Dt]:ct[Kt]=[Dt]}),ct}function Ft(){return getDataSourceSrv().getList({mixed:!0}).map(Oe=>({name:Oe.name,uid:Oe.uid}))}function jt(Oe){const ke=(0,F.omit)(Oe,["key","refId","datasource"]);return Object.keys(ke).length>0}var an=e(86561),cn=e(38874);const hn=Oe=>Oe.explore.panes,rn=(0,cn.P1)(hn,Object.entries),un=(0,cn.P1)(rn,Oe=>Oe.length>1),nt=Oe=>createSelector(hn,ke=>ke[Oe]),Be=(0,t.PH)("explore/historyUpdated"),et=({updatedQuery:Oe,deletedId:ke})=>async(ct,Dt)=>{kt(Dt().explore,(Kt,fn)=>{const Bn=Kt.richHistory.map(na=>na.id===Oe?.id?Oe:na).filter(na=>na.id!==ke),Hn=Kt.richHistory.length-Bn.length;ct(richHistoryUpdatedAction({richHistoryResults:{richHistory:Bn,total:Kt.richHistoryTotal-Hn},exploreId:fn}))})},kt=(Oe,ke)=>{Object.entries(Oe.panes).forEach(([ct,Dt])=>{Dt&&ke(Dt,ct)})},nn=(Oe,ke,ct)=>async(Dt,Kt)=>{const{richHistoryStorageFull:fn,limitExceeded:Bn}=await tn(Oe,ke,ct,!1,"",!Kt().explore.richHistoryStorageFull,!Kt().explore.richHistoryLimitExceededWarningShown);fn&&Dt((0,an.fm)()),Bn&&Dt((0,an.QN)())},Pn=(Oe,ke)=>async(ct,Dt)=>{const Kt=await updateStarredInRichHistory(Oe,ke);ct(et({updatedQuery:Kt}))},pn=(Oe,ke)=>async ct=>{const Dt=await updateCommentInRichHistory(Oe,ke);ct(et({updatedQuery:Dt}))},In=Oe=>async ke=>{const ct=await deleteQueryInRichHistory(Oe);ke(et({deletedId:ct}))},Qn=()=>async(Oe,ke)=>{await deleteAllFromRichHistory(),selectPanesEntries(ke()).forEach(([ct])=>{Oe(richHistoryUpdatedAction({richHistoryResults:{richHistory:[],total:0},exploreId:ct})),Oe(richHistoryUpdatedAction({richHistoryResults:{richHistory:[],total:0},exploreId:ct}))})},Fn=Oe=>async(ke,ct)=>{const Dt=ct().explore.panes[Oe].richHistorySearchFilters;if(Dt){const Kt=await gn(Dt);ke((0,an.ZU)({richHistoryResults:Kt,exploreId:Oe}))}},Ea=Oe=>async(ke,ct)=>{const Dt=ct().explore.panes[Oe]?.richHistorySearchFilters,Kt=ct().explore.panes[Oe]?.richHistory;if(Dt&&Kt){const fn={...Dt,page:(Dt?.page||1)+1},Bn=await getRichHistory(fn),Hn=[...Kt,...Bn.richHistory];ke(richHistorySearchFiltersUpdatedAction({filters:fn,exploreId:Oe})),ke(richHistoryUpdatedAction({richHistoryResults:{richHistory:Hn,total:Bn.total},exploreId:Oe}))}},ut=Oe=>async ke=>{ke(richHistorySearchFiltersUpdatedAction({filters:void 0,exploreId:Oe})),ke(richHistoryUpdatedAction({richHistoryResults:{richHistory:[],total:0},exploreId:Oe}))},vt=()=>async(Oe,ke)=>{let ct=ke().explore.richHistorySettings;ct||(ct=await getRichHistorySettings(),Oe(richHistorySettingsUpdatedAction(ct)))},Et=Oe=>async ke=>{ke(richHistorySettingsUpdatedAction(Oe)),await updateRichHistorySettings(Oe)},It=(Oe,ke)=>async(ct,Dt)=>{await ct(richHistorySearchFiltersUpdatedAction({exploreId:Oe,filters:{...ke}}));const Kt=Dt().explore.richHistorySettings;supportedFeatures().lastUsedDataSourcesAvailable&&await ct(Et({...Kt,lastUsedDatasourceFilters:ke.datasourceFilters}))},en=(Oe,ke)=>Be.match(ke)?{...Oe,history:ke.payload.history}:Oe;var Gt=e(92403),Ln=e(79059),jn=e(82563),zn=e(6278);const qn=(0,t.PH)("explore/changeRange"),Ia=(0,t.PH)("explore/changeRefreshInterval"),va=Oe=>(ke,ct)=>{const{syncedTimes:Dt}=ct().explore;Dt?Object.keys(ct().explore.panes).forEach(Kt=>{ke(aa({...Oe,exploreId:Kt})),ke(runQueries({exploreId:Kt,preserveCache:!0}))}):(ke(aa({...Oe})),ke(runQueries({exploreId:Oe.exploreId,preserveCache:!0})))},aa=Oe=>(ke,ct)=>{const{exploreId:Dt,absoluteRange:Kt,rawRange:fn}=Oe,Bn=ct().explore.panes[Dt],Hn=(0,$.Z)(ct().user),na=(0,$.i)(ct().user),{range:sa}=Bn;let Sa=sa.raw;Kt&&(Sa={from:(0,Gt.GY)(Hn,Kt.from),to:(0,Gt.GY)(Hn,Kt.to)}),fn&&(Sa=fn);const La=(0,n.OQ)(Hn,Sa,na),ks={from:La.from.valueOf(),to:La.to.valueOf()};(0,zn.$t)().init({timepicker:{},getTimezone:()=>Hn,timeRangeUpdated(Ns){},time:La.raw}),(0,Ln.J)().updateTimeRange(La),ke(qn({exploreId:Dt,range:La,absoluteRange:ks}))};function ta(Oe){return(ke,ct)=>{const Dt=ct().explore.panes[Oe].range.raw;Object.keys(ct().explore.panes).filter(fn=>fn!==Oe).forEach(fn=>{ke(va({exploreId:fn,rawRange:Dt}))});const Kt=ct().explore.syncedTimes;ke(syncTimesAction({syncedTimes:!Kt}))}}function ha(Oe){return(ke,ct)=>{const Dt=getTimeZone(ct().user),Kt=getFiscalYearStartMonth(ct().user);Object.entries(ct().explore.panes).forEach(([fn,Bn])=>{const Hn=getTimeRange(Dt,Bn.range.raw,Kt);Oe(fn,Bn,Hn,ke)})}}function ma(){return ha((Oe,ke,ct,Dt)=>{const Kt={from:ct.from.valueOf(),to:ct.to.valueOf()};Dt(va({exploreId:Oe,absoluteRange:Kt}))})}function _a(Oe){return ha((ke,ct,Dt,Kt)=>{const fn=getShiftedTimeRange(Oe,Dt);Kt(va({exploreId:ke,absoluteRange:fn}))})}function Qa(Oe){return ha((ke,ct,Dt,Kt)=>{const fn=getZoomedTimeRange(Dt,Oe);Kt(va({exploreId:ke,absoluteRange:fn}))})}const Xa=(Oe,ke)=>{if(Ia.match(ke)){const{refreshInterval:ct}=ke.payload,Dt=jn.dP.isLive(ct),Kt=(0,n.Oy)(ct),fn=(0,Ue.j0)(Oe.logsResult,Kt);return jn.dP.isLive(Oe.refreshInterval)&&!Dt&&(0,n.RZ)(Oe.querySubscription),{...Oe,refreshInterval:ct,queryResponse:{...Oe.queryResponse,state:Dt?ye.Gu.Streaming:ye.Gu.Done},isLive:Dt,isPaused:Dt?!1:Oe.isPaused,logsResult:fn}}if(qn.match(ke)){const{range:ct,absoluteRange:Dt}=ke.payload;return{...Oe,range:ct,absoluteRange:Dt}}return Oe};var ts=e(47203);const ga=Oe=>ke=>{const ct=ke.explore.panes[Oe];return ct&&ct.queryResponse?ct.queryResponse.state===LoadingState.Loading||ct.queryResponse.state===LoadingState.Streaming:!1},es=(0,t.PH)("explore/addQueryRow"),bs=(0,t.PH)("explore/changeQueries"),vs=(0,t.PH)("explore/cancelQueries"),Za=(0,t.PH)("explore/queriesImported"),cs=(0,t.PH)("explore/queryStoreSubscription"),ds=(0,t.PH)("explore/setSupplementaryQueryEnabledAction"),gr=(0,t.PH)("explore/storeSupplementaryQueryDataProviderAction"),Vs=(0,t.PH)("explore/cleanSupplementaryQueryDataProviderAction"),Xs=(0,t.PH)("explore/cleanSupplementaryQueryAction"),rr=(0,t.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),qs=(0,t.PH)("explore/updateSupplementaryQueryDataAction"),or=(0,t.PH)("explore/queryStreamUpdated"),oa=(0,t.PH)("explore/setQueries"),Ra=(0,t.PH)("changeLoadingState"),$t=(0,t.PH)("explore/setPausedState"),Ya=(0,t.PH)("explore/clearLogs"),Ks=(0,t.PH)("explore/scanStart"),As=(0,t.PH)("explore/scanStop"),er=(0,t.PH)("explore/addResultsToCache"),ir=(0,t.PH)("explore/clearCache");function ws(Oe,ke){return async(ct,Dt)=>{const Kt=Dt().explore.panes[Oe];let fn;Kt.datasourceInstance?.meta.mixed?fn=findLast(Kt.queries,Hn=>!!Hn.datasource)?.datasource||void 0:fn=Kt.datasourceInstance?.getRef();const Bn=await generateEmptyQuery(Kt.queries,ke,fn);ct(es({exploreId:Oe,index:ke,query:Bn}))}}function lr(Oe){return(ke,ct)=>{ke(As({exploreId:Oe})),ke(vs({exploreId:Oe}));const Dt=ct().explore.panes[Oe].supplementaryQueries;for(const Kt of supplementaryQueryTypes)ke(Vs({exploreId:Oe,type:Kt})),Dt[Kt]?.data?.state!==LoadingState.Done&&ke(Xs({exploreId:Oe,type:Kt}))}}const Ls=(Oe,ke)=>{const ct=Oe.getRef();return ke.map(Dt=>({...Dt,datasource:ct}))},Vr=async(Oe,ke,ct)=>{let Dt=[];if(ke.meta?.id===Oe.meta?.id)Dt=ct;else if((0,Pe.p)(ke)&&(0,Pe.CZ)(Oe)){const Kt=await ke.exportToAbstractQueries(ct);Dt=await Oe.importFromAbstractQueries(Kt)}else Oe.importQueries&&(Dt=await Oe.importQueries(ct,ke));return Ls(Oe,Dt)},Xr=(0,k.createAsyncThunk)("explore/changeQueries",async({queries:Oe,exploreId:ke},{getState:ct,dispatch:Dt})=>{let Kt=!1;const fn=ct().explore.panes[ke].queries,Bn=ct().explore.panes[ke].datasourceInstance?.uid;for(const Hn of Oe)for(const na of fn){if(Hn.refId===na.refId&&Hn.datasource?.type!==na.datasource?.type){const sa=await(0,R.F)().get(na.datasource),Sa=await(0,R.F)().get({uid:Hn.datasource?.uid});await Dt(Or(ke,fn,sa,Sa,Hn.refId)),Kt=!0}if(Bn===ue.D&&Hn.refId===na.refId&&Hn.datasource?.uid!==na.datasource?.uid){const sa=(0,ts.e1)(ue.D,Oe),Sa=await U(sa);Dt(fo({exploreId:ke,correlations:Sa.correlations||[]}))}}Kt||Dt(bs({queries:Oe,exploreId:ke})),Oe.length<fn.length&&Dt(Yt({exploreId:ke}))}),Or=(Oe,ke,ct,Dt,Kt)=>async fn=>{if(!ct){fn(Za({exploreId:Oe,queries:ke}));return}let Bn=ke;if(Dt.uid===ue.D)Bn=ke.map(na=>({...na,datasource:ct.getRef()}));else if(ct.uid===ue.D){const na=(0,F.groupBy)(ke,Sa=>Sa.datasource?.uid),sa=await Promise.all(Object.keys(na).map(async Sa=>{const La=await(0,R.F)().get({uid:Sa});return await Vr(Dt,La,na[Sa])}));Bn=(0,F.flatten)(sa.filter(Sa=>Sa.length>0))}else{let na=ke;if(Kt!==void 0){const sa=ke.find(Sa=>Sa.refId===Kt);sa&&(na=[sa])}Bn=await Vr(Dt,ct,na)}let Hn=await(0,n.Z8)(Bn,Dt.getRef());if(Kt!==void 0){Bn.length===0&&(Bn=[await(0,n.Xk)([],void 0,Dt.getRef())]);const na=ke.findIndex(Sa=>Sa.refId===Kt),sa={...Hn[0],refId:ke[na].refId};Hn=[...ke],Hn[na]=sa}return fn(Za({exploreId:Oe,queries:Hn})),Hn};function Nt(Oe,ke,ct){return async(Dt,Kt)=>{const fn=Kt().explore.panes[Oe],{queries:Bn}=fn,na=(await Promise.all(Bn.map(sa=>ct({...sa},ke)))).map((sa,Sa)=>generateNewKeyAndAddRefIdIfMissing(sa,Bn,Sa));Dt(oa({exploreId:Oe,queries:na})),ke.preventSubmit||Dt(Yt({exploreId:Oe}))}}async function Jt(Oe,ke,ct,Dt,Kt,fn){const Bn=Dt.meta.id,Hn=(0,n._Q)(ct,Bn,Kt);Oe(Be({exploreId:fn,history:Hn})),Oe(nn(Dt.uid,Dt.name,Kt));for(const na in ke.panes)await Oe(Fn(na))}const Yt=(0,k.createAsyncThunk)("explore/runQueries",async({exploreId:Oe,preserveCache:ke},{dispatch:ct,getState:Dt})=>{ct(aa({exploreId:Oe}));const Kt=la(Oe);ke!==!0&&ct(is(Oe));const fn=Dt().explore.panes[Oe],{datasourceInstance:Bn,containerWidth:Hn,isLive:na,range:sa,scanning:Sa,queryResponse:La,querySubscription:ks,refreshInterval:Ns,absoluteRange:js,cache:Lr,supplementaryQueries:Fs}=fn;let Sr,go;const Kr=fn.queries.map(wr=>({...wr,datasource:wr.datasource||Bn?.getRef()}));Bn!=null&&Jt(ct,Dt().explore,fn.history,Bn,Kr,Oe);const Ko=(0,ts.M0)(Lr,js);if(Ko)Sr=(0,J.a)([(0,Q.of)(Ko),Kt]).pipe((0,ee.z)(([wr,po])=>Qt(wr,La,js,Ns,Kr,po))),go=Sr.subscribe(wr=>{ct(or({exploreId:Oe,response:wr}))});else{if(!(0,n.z_)(Kr)||!Bn)return;const wr=Bn?.interval;(0,n.RZ)(ks);const po={minInterval:wr,maxDataPoints:Hn,liveStreaming:na},ko=(0,$.Z)(Dt().user),ri=(0,n.Zf)(Oe,Kr,po,sa,Sa,ko);if(ct(Ra({exploreId:Oe,loadingState:ye.Gu.Loading})),Sr=(0,J.a)([(0,Me.v7)(Bn,ri.request).pipe(na?(0,de.p)(500):Z.y),Kt]).pipe((0,ee.z)(([zs,kr])=>Qt(zs,La,js,Ns,Kr,kr))),go=Sr.subscribe({next(zs){if(zs.logsResult!==null&&zs.state===ye.Gu.Done&&(0,Ee.ff)("grafana_explore_logs_result_displayed",{datasourceType:Bn.type}),ct(or({exploreId:Oe,response:zs})),Dt().explore.panes[Oe].scanning)if(zs.state===ye.Gu.Done&&zs.series.length===0){const kr=(0,ge.e)(-1,Dt().explore.panes[Oe].range);ct(aa({exploreId:Oe,absoluteRange:kr})),ct(Yt({exploreId:Oe}))}else ct(As({exploreId:Oe}))},error(zs){ct((0,ot.$l)((0,Qe.t_)("Query processing error",zs))),ct(Ra({exploreId:Oe,loadingState:ye.Gu.Error})),console.error(zs)},complete(){Dt().explore.panes[Oe].queryResponse.state===ye.Gu.Loading&&ct(Ra({exploreId:Oe,loadingState:ye.Gu.Done}))}}),na)for(const zs of H.SY)ct(Vs({exploreId:Oe,type:zs})),ct(Xs({exploreId:Oe,type:zs}));else ct(An({exploreId:Oe,datasourceInstance:Bn,transaction:ri,newQuerySource:Sr,supplementaryQueries:Fs,queries:Kr,absoluteRange:js}))}ct(cs({exploreId:Oe,querySubscription:go}))}),vn=async(Oe,ke)=>{const ct=Oe.filter(Kt=>Kt.datasource?.uid!==ue.D),Dt=(0,F.groupBy)(ct,"datasource.uid");return await Promise.all(Object.values(Dt).map(async Kt=>({datasource:await(0,R.F)().get(Kt[0].datasource,ke),targets:Kt})))},An=(0,k.createAsyncThunk)("explore/handleSupplementaryQueries",async({datasourceInstance:Oe,exploreId:ke,transaction:ct,newQuerySource:Dt,supplementaryQueries:Kt,queries:fn,absoluteRange:Bn},{dispatch:Hn})=>{let na;Oe.meta.mixed?na=await vn(ct.request.targets,ct.request.scopedVars):na=[{datasource:Oe,targets:ct.request.targets}];for(const sa of H.SY){const Sa=(0,H.Z9)(na,sa,{...ct.request,requestId:`${ct.request.requestId}_${(0,F.snakeCase)(sa)}`},Dt);Sa?(Hn(gr({exploreId:ke,type:sa,dataProvider:Sa})),xn(Kt[sa].data,fn,Bn)||(Hn(Xs({exploreId:ke,type:sa})),Kt[sa].enabled&&Hn($a(ke,sa)))):Hn(Vs({exploreId:ke,type:sa}))}});function xn(Oe,ke,ct){if(!Oe)return!1;const Dt=(0,F.zipObject)((0,F.map)(ke,"refId"),ke),Kt=(0,F.mapValues)((0,F.groupBy)(Oe.data.map(na=>na.meta?.custom?.sourceQuery),"refId"),F.head),fn=Oe.data.every(na=>na.meta?.custom?.logsVolumeType===he.o8.FullRange),Bn=z()(Dt,Kt),Hn=Oe.data.every(na=>{const sa=na.meta?.custom?.absoluteRange;return sa?sa&&sa.from<=ct.from&&ct.to<=sa.to:!0});return fn&&Bn&&Hn}function Un(Oe,ke){return(ct,Dt)=>{const Kt=Dt().explore.panes[Oe].queries,fn=ke.map((Bn,Hn)=>generateNewKeyAndAddRefIdIfMissing(Bn,Kt,Hn));ct(oa({exploreId:Oe,queries:fn})),ct(Yt({exploreId:Oe}))}}function xa(Oe){return(ke,ct)=>{ke(Ks({exploreId:Oe}));const Dt=getShiftedTimeRange(-1,ct().explore.panes[Oe].range);ke(updateTime({exploreId:Oe,absoluteRange:Dt})),ke(Yt({exploreId:Oe}))}}function za(Oe){return(ke,ct)=>{const Dt=ct().explore.panes[Oe].queryResponse,Kt=ct().explore.panes[Oe].absoluteRange,fn=createCacheKey(Kt);Dt.state===LoadingState.Done&&ke(er({exploreId:Oe,cacheKey:fn,queryResponse:Dt}))}}function is(Oe){return(ke,ct)=>{ke(ir({exploreId:Oe}))}}function $a(Oe,ke){return(ct,Dt)=>{const{supplementaryQueries:Kt}=Dt().explore.panes[Oe],fn=Kt[ke].dataProvider;if(fn){const Bn=fn.subscribe({next:Hn=>{ct(qs({exploreId:Oe,type:ke,data:Hn}))}});ct(rr({exploreId:Oe,type:ke,dataSubscription:Bn}))}}}function Ta(Oe,ke,ct){return(Dt,Kt)=>{Dt(ds({exploreId:Oe,enabled:ke,type:ct})),storeSupplementaryQueryEnabled(ke,ct),ke&&Dt($a(Oe,ct))}}const as=(Oe,ke)=>{if(es.match(ke)){const{queries:ct}=Oe,{index:Dt,query:Kt}=ke.payload,fn=[...ct.slice(0,Dt+1),{...Kt},...ct.slice(Dt+1)];return{...Oe,queries:fn,queryKeys:(0,n.$$)(fn)}}if(bs.match(ke)){const{queries:ct}=ke.payload;return{...Oe,queries:ct}}if(vs.match(ke))return(0,n.RZ)(Oe.querySubscription),{...Oe,queryResponse:{...Oe.queryResponse,state:ye.Gu.Done}};if(oa.match(ke)){const{queries:ct}=ke.payload;return{...Oe,queries:ct.slice(),queryKeys:(0,n.$$)(ct)}}if(cs.match(ke)){const{querySubscription:ct}=ke.payload;return{...Oe,querySubscription:ct}}if(ds.match(ke)){const{enabled:ct,type:Dt}=ke.payload,{supplementaryQueries:Kt}=Oe,fn=Kt[Dt].dataSubscription;!ct&&fn&&fn.unsubscribe();const Bn={...Kt,[Dt]:{...Kt[Dt],enabled:ct,data:void 0}};return{...Oe,supplementaryQueries:Bn}}if(gr.match(ke)){const{dataProvider:ct,type:Dt}=ke.payload,{supplementaryQueries:Kt}=Oe,fn=Kt[Dt];fn?.dataSubscription&&fn.dataSubscription.unsubscribe();const Bn={...Kt,[Dt]:{...fn,dataProvider:ct,dataSubscription:void 0}};return{...Oe,supplementaryQueries:Bn}}if(Vs.match(ke)){const{type:ct}=ke.payload,{supplementaryQueries:Dt}=Oe,Kt=Dt[ct];Kt?.dataSubscription&&Kt.dataSubscription.unsubscribe();const fn={...Dt,[ct]:{...Kt,dataProvider:void 0,dataSubscription:void 0}};return{...Oe,supplementaryQueries:fn}}if(Xs.match(ke)){const{type:ct}=ke.payload,{supplementaryQueries:Dt}=Oe,Kt={...Dt,[ct]:{...Dt[ct],data:void 0}};return{...Oe,supplementaryQueries:Kt}}if(rr.match(ke)){const{dataSubscription:ct,type:Dt}=ke.payload,{supplementaryQueries:Kt}=Oe,fn={...Kt,[Dt]:{...Kt[Dt],dataSubscription:ct}};return{...Oe,supplementaryQueries:fn}}if(qs.match(ke)){let{data:ct,type:Dt}=ke.payload;const{supplementaryQueries:Kt}=Oe,fn={...Kt,[Dt]:{...Kt[Dt],data:ct}};return{...Oe,supplementaryQueries:fn}}if(or.match(ke))return Wa(Oe,ke);if(Za.match(ke)){const{queries:ct}=ke.payload;return{...Oe,queries:ct,queryKeys:(0,n.$$)(ct)}}if(Ra.match(ke)){const{loadingState:ct}=ke.payload;return{...Oe,queryResponse:{...Oe.queryResponse,state:ct}}}if($t.match(ke)){const{isPaused:ct}=ke.payload;return{...Oe,isPaused:ct}}if(Ks.match(ke))return{...Oe,scanning:!0};if(As.match(ke))return{...Oe,scanning:!1,scanRange:void 0};if(er.match(ke)){const{cache:Dt}=Oe,{queryResponse:Kt,cacheKey:fn}=ke.payload;let Bn=[...Dt];return Bn.some(na=>na.key===fn)||(Bn=[{key:fn,value:Kt},...Bn].slice(0,5)),{...Oe,cache:Bn}}if(ir.match(ke))return{...Oe,cache:[]};if(Ya.match(ke)){if(!Oe.logsResult)return{...Oe,clearedAtIndex:null};if(Oe.queryResponse.state===ye.Gu.Loading)return{...Oe,clearedAtIndex:null,logsResult:{...Oe.logsResult,rows:[]}};const ct=Oe.clearedAtIndex?Oe.clearedAtIndex+Oe.logsResult.rows.length:Oe.logsResult.rows.length-1;return{...Oe,clearedAtIndex:ct,logsResult:{...Oe.logsResult,rows:[]}}}return Oe},la=Oe=>new ne.y(ke=>{const ct=Ie.h.getState().explore.panes[Oe]?.correlations;if(ct)ke.next(ct),ke.complete();else{const Dt=Ie.h.subscribe(()=>{const Kt=Ie.h.getState().explore.panes[Oe]?.correlations;Kt&&(Dt(),ke.next(Kt),ke.complete())})}}),Wa=(Oe,ke)=>{const{response:ct}=ke.payload,{request:Dt,series:Kt,error:fn,graphResult:Bn,logsResult:Hn,tableResult:na,rawPrometheusResult:sa,traceFrames:Sa,nodeGraphFrames:La,flameGraphFrames:ks,rawPrometheusFrames:Ns,customFrames:js}=ct;if(fn){if(fn.type===me.eA.Timeout||fn.type===me.eA.Cancelled)return{...Oe};be.config.angularSupportEnabled&&Oe.datasourceInstance?.components?.QueryCtrl&&Oe.eventBridge.emit(De.Kh.dataError,fn)}if(!Dt)return{...Oe};if(be.config.angularSupportEnabled&&Oe.datasourceInstance?.components?.QueryCtrl){const Lr=Kt.map(Fs=>(0,le.Zr)(Fs));Oe.eventBridge.emit(De.Kh.dataReceived,Lr)}return{...Oe,queryResponse:ct,graphResult:Bn,tableResult:na,rawPrometheusResult:sa,logsResult:Oe.isLive&&Hn?{...Hn,rows:(0,ts.bG)(Oe.clearedAtIndex,Hn.rows)}:Hn,showLogs:!!Hn,showMetrics:!!Bn,showTable:!!na?.length,showTrace:!!Sa.length,showNodeGraph:!!La.length,showRawPrometheus:!!Ns.length,showFlameGraph:!!ks.length,showCustom:!!js?.length,clearedAtIndex:Oe.isLive?Oe.clearedAtIndex:null}},ss=(0,t.PH)("explore/updateDatasourceInstance");function Ps(Oe,ke,ct){return async(Dt,Kt)=>{const fn=Kt().user.orgId,{history:Bn,instance:Hn}=await loadAndInitDatasource(fn,ke),na=Kt().explore.panes[Oe].datasourceInstance;reportInteraction("explore_change_ds",{from:(na?.meta?.mixed?"mixed":na?.type)||"unknown",to:Hn.meta.mixed?"mixed":Hn.type,exploreId:Oe}),Dt(ss({exploreId:Oe,datasourceInstance:Hn,history:Bn}));const sa=Kt().explore.panes[Oe].queries,Sa=getDatasourceUIDs(Hn.uid,sa),La=await getCorrelationsBySourceUIDs(Sa);Dt(saveCorrelationsAction({exploreId:Oe,correlations:La.correlations||[]})),ct?.importQueries&&await Dt(importQueries(Oe,sa,na,Hn)),Kt().explore.panes[Oe].isLive&&Dt(changeRefreshInterval({exploreId:Oe,refreshInterval:RefreshPicker.offOption.value})),ct?.importQueries&&Dt(runQueries({exploreId:Oe}))}}const tr=(Oe,ke)=>{if(ss.match(ke)){const{datasourceInstance:ct,history:Dt}=ke.payload;return(0,n.RZ)(Oe.querySubscription),{...Oe,datasourceInstance:ct,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,H.DK)(),queryResponse:(0,ts.lp)(),queryKeys:[],history:Dt}}return Oe},Bs=(0,t.PH)("explore/changeSize"),Ms=(0,t.PH)("explore/changePanels");function Rr(Oe,ke,ct){return async(Dt,Kt)=>{const fn=Kt().explore.panes[Oe];if(fn===void 0)return;const{panelsState:Bn}=fn;Dt(Ms({exploreId:Oe,panelsState:{...Bn,[ke]:ct}}))}}const br=(0,t.PH)("explore/initializeExploreAction"),si=(0,t.PH)("explore/setUrlReplaced"),fo=(0,t.PH)("explore/saveCorrelationsAction");function pr(Oe,{width:ke}){return Bs({exploreId:Oe,width:ke})}const Ar=(0,k.createAsyncThunk)("explore/initializeExplore",async({exploreId:Oe,datasource:ke,queries:ct,range:Dt,panelsState:Kt},{dispatch:fn,getState:Bn,fulfillWithValue:Hn})=>{let na,sa=[];if(ke){const Sa=Bn().user.orgId,La=await(0,ts.r_)(Sa,ke);na=La.instance,sa=La.history}if(fn(br({exploreId:Oe,queries:ct,range:(0,ts.rx)(Dt,(0,$.Z)(Bn().user)),datasourceInstance:na,history:sa})),Kt!==void 0&&fn(Ms({exploreId:Oe,panelsState:Kt})),fn(aa({exploreId:Oe})),na){const Sa=(0,ts.e1)(na.uid,ct),La=await U(Sa);fn(fo({exploreId:Oe,correlations:La.correlations||[]})),fn(Yt({exploreId:Oe}))}return Hn({exploreId:Oe,state:Bn().explore.panes[Oe]})}),xr=(Oe=(0,ts.t5)(),ke)=>{if(Oe=as(Oe,ke),Oe=tr(Oe,ke),Oe=Xa(Oe,ke),Oe=en(Oe,ke),an.ZU.match(ke)){const{richHistory:ct,total:Dt}=ke.payload.richHistoryResults;return{...Oe,richHistory:ct,richHistoryTotal:Dt}}if(an.Zy.match(ke)){const ct=ke.payload.filters;return{...Oe,richHistorySearchFilters:ct}}if(Bs.match(ke)){const ct=ke.payload.width;return{...Oe,containerWidth:ct}}if(Ms.match(ke)){const{panelsState:ct}=ke.payload;return{...Oe,panelsState:ct}}if(fo.match(ke))return{...Oe,correlations:ke.payload.correlations};if(br.match(ke)){const{queries:ct,range:Dt,datasourceInstance:Kt,history:fn}=ke.payload;return{...Oe,range:Dt,queries:ct,initialized:!0,queryKeys:(0,n.$$)(ct),datasourceInstance:Kt,history:fn,queryResponse:(0,ts.lp)(),cache:[],correlations:[]}}return Oe}},86561:(X,L,e)=>{"use strict";e.d(L,{ZP:()=>O,m$:()=>M,QN:()=>u,Zy:()=>C,fm:()=>m,ZU:()=>f});var t=e(77960),n=e(13601),r=e(44951),a=e(21527),i=e(78354);function y(N){const o=new Set(N.map(w=>w.refId).filter(Boolean));return o.size===N.length?N:(o.clear(),N.map(w=>{if(w.refId&&!o.has(w.refId))return o.add(w.refId),w;const K=(0,i.Hs)(N);return o.add(K),{...w,refId:K}}))}var c=e(19672),l=e(47203);const d=(0,t.PH)("explore/syncTimes"),f=(0,t.PH)("explore/richHistoryUpdated"),m=(0,t.PH)("explore/richHistoryStorageFullAction"),u=(0,t.PH)("explore/richHistoryLimitExceededAction"),h=(0,t.PH)("explore/richHistorySettingsUpdated"),C=(0,t.PH)("explore/richHistorySearchFiltersUpdatedAction"),x=(0,t.PH)("explore/splitSizeUpdateAction"),b=(0,t.PH)("explore/maximizePaneAction"),g=(0,t.PH)("explore/evenPaneResizeAction"),p=(0,t.PH)("explore/splitClose"),v=(0,t.PH)("explore/setPaneState"),E=(0,t.PH)("explore/clearPanes"),P=(0,a.createAsyncThunk)("explore/splitOpen",async(N,{getState:o,dispatch:w,requestId:K})=>{const V=Object.values(o().explore.panes)[0],_=N?.queries??(N?.query?[N?.query]:V?.queries||[]);Object.keys(o().explore.panes).forEach((U,$)=>{$>=1&&w(p(U))}),await w(S({exploreId:K,datasource:N?.datasourceUid||V?.datasourceInstance?.getRef(),queries:y(_),range:N?.range||V?.range.raw||l.UI,panelsState:N?.panelsState||V?.panelsState}))},{idGenerator:r.z0}),S=(0,a.createAsyncThunk)("explore/createNewSplitOpen",async(N,{dispatch:o})=>{await o((0,c.CK)(N))}),M=(N,o)=>async w=>{const{timeRange:K,getExploreUrl:V,openInNewWindow:_}=o,U=await V({queries:N.targets,dsRef:N.datasource,scopedVars:N.scopedVars,timeRange:K});if(_&&U){_(U);return}n.E1.push(U)},R=(0,l.t5)(),I={syncedTimes:!1,panes:{},richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},O={explore:(N=I,o)=>{if(p.match(o)){const{[o.payload]:K,...V}={...N.panes};return{...N,panes:V,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(x.match(o)){const{largerExploreId:K}=o.payload;return{...N,largerExploreId:K,maxedExploreId:void 0,evenSplitPanes:K===void 0}}if(b.match(o)){const{exploreId:K}=o.payload;return{...N,largerExploreId:K,maxedExploreId:K,evenSplitPanes:!1}}if(g.match(o))return{...N,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(d.match(o))return{...N,syncedTimes:o.payload.syncedTimes};if(m.match(o))return{...N,richHistoryStorageFull:!0};if(u.match(o))return{...N,richHistoryLimitExceededWarningShown:!0};if(h.match(o)){const K=o.payload;return{...N,richHistorySettings:K}}if(S.pending.match(o))return{...N,panes:{...N.panes,[o.meta.arg.exploreId]:R}};if(c.CK.pending.match(o)){const K=Object.entries(N.panes),V=K.slice(0,o.meta.arg.position),_=K.slice(V.length),U=[...V,[o.meta.arg.exploreId,R],..._].reduce(($,[k,H])=>({...$,[k]:H}),{});return{...N,panes:U}}if(E.match(o))return{...N,panes:{}};const w=o.payload?.exploreId;return typeof w=="string"?{...N,panes:Object.entries(N.panes).reduce((K,[V,_])=>({...K,[V]:V===w?(0,c.iz)(_,o):_}),{})}:N}}},47203:(X,L,e)=>{"use strict";e.d(L,{M0:()=>p,UI:()=>m,bG:()=>S,e1:()=>M,lp:()=>x,r_:()=>b,rx:()=>v,t5:()=>C});var t=e(86832),n=e.n(t),r=e(10694),a=e(54554),i=e(77877),y=e(24677),c=e(23062),l=e(44951),d=e(52436),f=e(86936);const m={from:"now-6h",to:"now"},u="grafana.explore.style.graph",h=R=>{store.set(u,R)},C=R=>({containerWidth:0,datasourceInstance:null,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:m},absoluteRange:{from:null,to:null},scanning:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:x(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,f.DK)(),panelsState:{},correlations:void 0,...R}),x=()=>({state:r.Gu.NotStarted,series:[],timeRange:(0,a.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],customFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function b(R,I){let A;try{A=await(0,d.ak)().get(I)}catch{A=await(0,d.ak)().get()}if(A.init)try{A.init()}catch(o){console.error(o)}const O=`grafana.explore.history.${A.meta?.id}`,N=c.Z.getObject(O,[]);return(0,l.ET)(R,A.uid),{history:N,instance:A}}function g(R){const I={from:R.from,to:R.to};return Object.entries(I).map(([O,N])=>`${encodeURIComponent(O)}=${encodeURIComponent(N.toString())}`).join("&")}function p(R,I){const A=g(I),O=R.findIndex(o=>o.key===A);return O>=0?R[O].value:void 0}function v(R,I){return{from:i.parse(R.from,!1,I),to:i.parse(R.to,!0,I),raw:R}}function E(R){let I=m,A={from:P(R.from),to:P(R.to)};return A.from!==null&&A.to!==null&&(I={from:A.from,to:A.to}),I}function P(R){if(R===null)return null;if(isDateTime(R))return R;if(typeof R!="string")return null;const I=R;if(I.indexOf("now")!==-1)return I;if(I.length===8)return toUtc(I,"YYYYMMDD");if(I.length===15)return toUtc(I,"YYYYMMDDTHHmmss");if(I.length===19)return toUtc(I,"YYYY-MM-DD HH:mm:ss");if(I.match(/^\d+$/)){const O=parseInt(I,10);return toUtc(O)}const A=toUtc(I);return A.isValid()?A:null}const S=(R,I)=>I?R?I.slice(R+1):I:[],M=(R,I)=>R===y.D?(0,t.uniq)(I.map(A=>A.datasource?.uid).filter(A=>!!A)):[R]},42512:(X,L,e)=>{"use strict";e.d(L,{a_:()=>v,Rb:()=>E,lt:()=>M,u8:()=>P});var t=e(86832),n=e(39953),r=e(86127),a=e(69733),i=e(96083),y=e(24824),c=e(79059),l=e(72639),d=e(97125),f=e(49036),m=e.n(f),u=e(44951);const h=(I,A,O)=>{let N={},o={};if(I.type===a.sN.Regex&&I.expression){const w=new RegExp(I.expression,"gi"),V=(typeof A=="string"?A:(0,u.Xh)(A)).matchAll(w);for(const _ of V)_.groups?o=_.groups:o[I.mapValue||O]=_[1]||_[0]}else I.type===a.sN.Logfmt&&(o=m().parse(A));return Object.keys(o).forEach(w=>{const K=typeof o[w]=="string"?o[w]:(0,u.Xh)(o[w]);N[w]={value:K}}),N};var C=e(84278);const b=[I=>!I.internal||d.Vt.hasAccessToExplore()],g="grafana_data_link_clicked",p=(I,A)=>N=>{const{field:o,dataLinkScopedVars:w,frame:K,link:V,linkModel:_}=N,{valueRowIndex:U}=N.config;if(!V.internal||U===void 0)return _;const $=v({field:o,rowIndex:U,splitOpenFn:I,range:A,vars:w,dataFrame:K,linksToProcess:[V]});return $.length?first($):void 0},v=I=>{const{field:A,vars:O,splitOpenFn:N,range:o,rowIndex:w,dataFrame:K}=I,V={...O||{}};V.__value={value:{raw:A.values[w]},text:"Raw value"};let _;K&&(_=(0,r.z)({frame:K,rowIndex:w}),V.__data={value:{name:K.name,refId:K.refId,fields:_},text:"Data"},K.fields.forEach($=>{_&&_[$.name]&&(V[$.name]={value:_[$.name]})}),V.__targetField={value:_[A.name]});const U=I.linksToProcess||A.config.links;return U?U.filter(H=>b.every(j=>j(H,V))).map(H=>{if(H.internal){let j={};H.internal?.transformations&&H.internal?.transformations.forEach(Z=>{let ne;Z.field?ne=K?.fields.find(de=>de.name===Z.field)?.values[w]:ne=A.values[w],j={...j,...h(Z,ne,A.name)}});const z={...V,...j},F=M(H,z);let J=[];if(F.variables.length===0){const Z=A.name.toString();J.push({variableName:Z,value:"",match:""})}else J=F.variables;const Q=Z=>{(0,l.ff)(g,{origin:H.origin||a.n1.Datasource,app:i.zj.Explore,internal:!0}),N?.(Z)};return F.allVariablesDefined?{...(0,y._)({link:H,internalLink:H.internal,scopedVars:z,range:o,field:A,onClickFn:I.splitOpenFn?ne=>Q(ne):void 0,replaceVariables:(0,c.J)().replace.bind((0,c.J)())}),variables:J}:void 0}else{const j=(F,J)=>(0,c.J)().replace(F,{...J,...V}),z=(0,C.Bq)().getDataLinkUIModel(H,j,A);return z.title||(z.title=E(z.href)),z}}).filter(H=>!!H):[]};function E(I){I.indexOf("://")<0&&(I=`http://${I}`);let A;try{A=new URL(I).hostname}catch{A=I}return A}function P(I,A){return(0,n.useCallback)((O,N)=>O.fields.flatMap(o=>o.config?.links&&o.config?.links.length?v({field:o,rowIndex:N,range:I,dataFrame:O,splitOpenFn:A}):[]),[I,A])}const S=["__from","__to","__interval","__interval_ms","__org","__user","__range","__rate_interval","__timeFilter","timeFilter"];function M(I,A){let O=[];return(0,c.J)().replace.bind((0,c.J)())(R(I),A,void 0,O),O=(0,t.uniqBy)(O,"variableName"),{variables:O,allVariablesDefined:O.filter(o=>!S.includes(o.variableName)).every(o=>o.found)}}function R(I){let A="",O;for(O in I)typeof I[O]=="string"?A+=" "+I[O]:typeof I[O]=="object"&&(A+=" "+R(I[O]));return A}},86936:(X,L,e)=>{"use strict";e.d(L,{DK:()=>C,SY:()=>m,Z9:()=>g});var t=e(86832),n=e.n(t),r=e(36497),a=e(3195),i=e(38947),y=e(68040),c=e(69323),l=e(10694),d=e(23062),f=e(41891);const m=[c.v8.LogsVolume,c.v8.LogsSample],u=p=>`grafana.explore.logs.enable${p}`,h=(p,v)=>{store.set(u(v),p?"true":"false")},C=()=>{let p={[c.v8.LogsVolume]:{enabled:!0},[c.v8.LogsSample]:{enabled:!1}};for(const v of m){if(v===c.v8.LogsSample)continue;d.Z.get(u(v))==="false"&&(p[v]={enabled:!1})}return p},x=(p,v,E)=>new r.y(P=>p.subscribe(S=>{if(S.logsResult&&S.logsResult.rows&&S.logsResult.visibleRange&&S.logsResult.bucketSize!==void 0&&S.state===l.Gu.Done){const M=S.logsResult.bucketSize,R=v.map(O=>O.refId),I=(0,t.groupBy)(S.logsResult.rows,"dataFrame.refId");let A=[];R.forEach(O=>{if(I[O]?.length){const N=(0,f.Nw)(I[O],M);A=[...A,...N];const o={logsVolumeType:c.o8.Limited,absoluteRange:S.logsResult?.visibleRange,datasourceName:E,sourceQuery:v.find(w=>w.refId===O)};P.next({data:A.map(w=>{const K=w.meta?.custom||{};return{...w,meta:{custom:{...K,...o}}}}),state:S.state})}}),P.complete()}})),b=(p,v,E,P)=>{if(p===c.v8.LogsVolume)return x(v,E,P)},g=(p,v,E,P)=>{const M=p.map(({datasource:R,targets:I},A)=>{const O=(0,t.cloneDeep)(E);return O.requestId=`${O.requestId||""}_${A}`,O.targets=I,(0,c.mN)(R,v)?R.getDataProvider(v,O):b(v,P,I,R.name)}).filter(l.fQ);if(M.length!==0)return M.length===1?M[0]:(0,a.T)(...M).pipe((0,y.R)((R,I)=>R.errors&&R.errors.length||I.state===l.Gu.NotStarted?R:I.state===l.Gu.Loading&&R.state===l.Gu.NotStarted?{...R,state:l.Gu.Loading}:I.state&&I.state!==l.Gu.Done?R:{...R,data:[...R.data,...I.data],state:l.Gu.Done},{data:[],state:l.Gu.NotStarted}),(0,i.E)())}},12028:(X,L,e)=>{"use strict";e.d(L,{mV:()=>ye,bE:()=>Pe});var t=e(22605),n=e(84289),r=e(30670),a=e(92743),i=e(79059),y=e(26205),c=e(39953),l=e(69171),d=e(9558),f=e(74661),m=e(4919),u=e(39285),h=e(53470),C=e(5026),x=e(29409);const b=he=>{switch(he.type){case x.Us.reduce:he.reducer||(he.reducer=h.gz.mean);break;case x.Us.resample:he.downsampler||(he.downsampler=h.gz.mean),he.upsampler||(he.upsampler="fillna"),he.reducer=void 0;break;case x.Us.math:he.expression=void 0;break;case x.Us.classic:he.conditions||(he.conditions=[g]);break;default:he.reducer=void 0}return he},g={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:C.$.IsAbove}};var p=e(41407),v=e(27366),E=e(82803),P=e(5222),S=e(38637);const M=C.Z.reducerTypes.map(he=>({label:he.text,value:he.value})),R=C.Z.evalOperators.map(he=>({label:he.text,value:he.value})),I=C.Z.evalFunctions.map(he=>({label:he.text,value:he.value})),A=({condition:he,index:me,onChange:De,onRemoveCondition:le,refIds:Ee})=>{const be=(0,E.wW)(O),ge=qe=>{De({...he,operator:{type:qe.value}})},ue=qe=>{De({...he,reducer:{type:qe.value,params:[]}})},Ie=qe=>{De({...he,query:{params:[qe.value]}})},ot=qe=>{De({...he,evaluator:{params:he.evaluator.params,type:qe.value}})},Qe=(qe,bt)=>{const Fe=parseFloat(qe.currentTarget.value),Ve=[...he.evaluator.params];Ve[bt]=Fe,De({...he,evaluator:{...he.evaluator,params:Ve}})},Me=(0,p.css)`
    width: 60px;
  `,Ne=he.evaluator.type===C.$.IsWithinRange||he.evaluator.type===C.$.IsOutsideRange;return c.createElement(v.K,{direction:"row"},c.createElement("div",{style:{flex:1}},c.createElement(f.Z,null,me===0?c.createElement("div",{className:(0,p.cx)(be.button,Me)},"WHEN"):c.createElement(P.d,{className:(0,p.cx)(be.buttonSelectText,Me),options:R,onChange:ge,value:R.find(qe=>qe.value===he.operator.type)}),c.createElement(d.Ph,{options:M,onChange:ue,width:20,value:M.find(qe=>qe.value===he.reducer.type)}),c.createElement("div",{className:be.button},"OF"),c.createElement(d.Ph,{onChange:Ie,options:Ee,width:"auto",value:Ee.find(qe=>qe.value===he.query.params[0])})),c.createElement(f.Z,null,c.createElement(P.d,{className:be.buttonSelectText,options:I,onChange:ot,value:I.find(qe=>qe.value===he.evaluator.type)}),Ne?c.createElement(c.Fragment,null,c.createElement(S.I,{type:"number",width:10,onChange:qe=>Qe(qe,0),value:he.evaluator.params[0]}),c.createElement("div",{className:be.button},"TO"),c.createElement(S.I,{type:"number",width:10,onChange:qe=>Qe(qe,1),value:he.evaluator.params[1]})):he.evaluator.type!==C.$.HasNoValue?c.createElement(S.I,{type:"number",width:10,onChange:qe=>Qe(qe,0),value:he.evaluator.params[0]}):null)),c.createElement(m.zx,{variant:"secondary",type:"button",onClick:()=>le(me)},c.createElement(u.J,{name:"trash-alt"})))},O=he=>{const me=(0,p.css)`
    color: ${he.colors.primary.text};
    font-size: ${he.typography.bodySmall.fontSize};
  `;return{buttonSelectText:me,button:(0,p.cx)((0,p.css)`
        display: flex;
        align-items: center;
        border-radius: ${he.shape.radius.default};
        font-weight: ${he.typography.fontWeightMedium};
        border: 1px solid ${he.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${he.spacing(1)};
        background-color: ${he.colors.background.canvas};
      `,me)}},N=({onChange:he,query:me,refIds:De})=>{const le=(ge,ue)=>{me.conditions&&he({...me,conditions:[...me.conditions.slice(0,ue),ge,...me.conditions.slice(ue+1)]})},Ee=()=>{if(me.conditions){const ge=me.conditions.at(-1)?.query?.params??[],ue={...g,query:{params:ge}};he({...me,conditions:me.conditions.length>0?[...me.conditions,ue]:[ue]})}},be=ge=>{if(me.conditions){const ue=me.conditions[ge],Ie=me.conditions.filter(ot=>ot!==ue).map((ot,Qe)=>Qe===0?{...ot,operator:{type:"when"}}:ot);he({...me,conditions:Ie})}};return c.createElement("div",null,c.createElement(f.Z,null,c.createElement(l._,{label:"Conditions",labelWidth:14},c.createElement("div",null,me.conditions?.map((ge,ue)=>{if(ge)return c.createElement(A,{key:ue,index:ue,condition:ge,onChange:Ie=>le(Ie,ue),onRemoveCondition:be,refIds:De})})))),c.createElement(m.zx,{variant:"secondary",type:"button",onClick:Ee},c.createElement(u.J,{name:"plus-circle"})))};var o=e(99491),w=e(36884),K=e(68421);const V="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",_=({labelWidth:he,onChange:me,query:De,onRunQuery:le})=>{const Ee=ue=>{me({...De,expression:ue.target.value})},be=(0,E.wW)($),ge=()=>{De.expression&&le()};return c.createElement(v.K,{direction:"row"},c.createElement(l._,{label:c.createElement(o.W,{width:"auto"},c.createElement(w.P,{fitContent:!0,content:c.createElement("div",{className:be.documentationContainer},c.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",c.createElement("br",null),"Example: ",c.createElement("code",null,"$A + $B")),c.createElement("header",{className:be.documentationHeader},"Available Math functions"),c.createElement("div",{className:be.documentationFunctions},c.createElement(U,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),c.createElement(U,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),c.createElement(U,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),c.createElement(U,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),c.createElement(U,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),c.createElement(U,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),c.createElement(U,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),c.createElement(U,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),c.createElement(U,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),c.createElement(U,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."}))),title:c.createElement(v.K,{gap:1,direction:"row"},c.createElement(u.J,{name:"book-open"})," Math operator"),footer:c.createElement("div",null,"See our additional documentation on"," ",c.createElement("a",{className:be.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},c.createElement(u.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."),closeButton:!0,placement:"bottom-start"},c.createElement("div",{className:be.info},"Expression ",c.createElement(u.J,{name:"info-circle"})))),labelWidth:he,grow:!0,shrink:!0},c.createElement(K.K,{value:De.expression,onChange:Ee,rows:1,placeholder:V,onBlur:ge,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},U=({name:he,description:me})=>{const De=(0,E.wW)(k);return c.createElement(c.Fragment,null,c.createElement("span",{className:De.name},he),c.createElement("span",{className:De.description},me))},$=he=>({documentationHeader:(0,p.css)`
    font-size: ${he.typography.h5.fontSize};
    font-weight: ${he.typography.h5.fontWeight};
  `,documentationLink:(0,p.css)`
    color: ${he.colors.text.link};
  `,documentationContainer:(0,p.css)`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${he.spacing(2)};

    padding: ${he.spacing(1)} ${he.spacing(2)};
  `,documentationFunctions:(0,p.css)`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${he.spacing(2)};
  `,info:(0,p.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    cursor: pointer;
    gap: ${he.spacing(1)};
  `}),k=he=>({name:(0,p.css)`
    font-weight: ${he.typography.fontWeightBold};
  `,description:(0,p.css)`
    font-size: ${he.typography.bodySmall.fontSize};
    color: ${he.colors.text.disabled};
  `}),H=({labelWidth:he="auto",onChange:me,refIds:De,query:le})=>{const Ee=x.SQ.find(Ne=>Ne.value===le.reducer),be=Ne=>{me({...le,expression:Ne.value})},ge=Ne=>{me({...le,reducer:Ne.value})},ue=Ne=>{me({...le,settings:Ne})},Ie=Ne=>{let qe;switch(Ne.value){case x.kN.ReplaceNonNumbers:let bt=0;le.settings?.mode===x.kN.ReplaceNonNumbers&&(bt=le.settings?.replaceWithValue??0),qe={mode:x.kN.ReplaceNonNumbers,replaceWithValue:bt};break;default:qe={mode:Ne.value}}ue(qe)},ot=Ne=>{const qe=Ne.currentTarget.valueAsNumber;ue({mode:x.kN.ReplaceNonNumbers,replaceWithValue:qe??0})},Qe=le.settings?.mode??x.kN.Strict,Me=()=>{if(Qe===x.kN.ReplaceNonNumbers)return c.createElement(l._,{label:"Replace With",labelWidth:he},c.createElement(S.I,{type:"number",width:10,onChange:ot,value:le.settings?.replaceWithValue??0}))};return c.createElement(c.Fragment,null,c.createElement(f.Z,null,c.createElement(l._,{label:"Input",labelWidth:he},c.createElement(d.Ph,{onChange:be,options:De,value:le.expression,width:"auto"}))),c.createElement(f.Z,null,c.createElement(l._,{label:"Function",labelWidth:he},c.createElement(d.Ph,{options:x.SQ,value:Ee,onChange:ge,width:20})),c.createElement(l._,{label:"Mode",labelWidth:he},c.createElement(d.Ph,{onChange:Ie,options:x.YM,value:Qe,width:25})),Me()))},j=({labelWidth:he="auto",onChange:me,refIds:De,query:le})=>{const Ee=x.Fr.find(Qe=>Qe.value===le.downsampler),be=x.r8.find(Qe=>Qe.value===le.upsampler),ge=Qe=>{me({...le,window:Qe.target.value})},ue=Qe=>{me({...le,expression:Qe.value})},Ie=Qe=>{me({...le,downsampler:Qe.value})},ot=Qe=>{me({...le,upsampler:Qe.value})};return c.createElement(c.Fragment,null,c.createElement(f.Z,null,c.createElement(l._,{label:"Input",labelWidth:he},c.createElement(d.Ph,{onChange:ue,options:De,value:le.expression,width:20}))),c.createElement(f.Z,null,c.createElement(l._,{label:"Resample to",labelWidth:he,tooltip:"10s, 1m, 30m, 1h"},c.createElement(S.I,{onChange:ge,value:le.window,width:15})),c.createElement(l._,{label:"Downsample"},c.createElement(d.Ph,{options:x.Fr,value:Ee,onChange:Ie,width:25})),c.createElement(l._,{label:"Upsample"},c.createElement(d.Ph,{options:x.r8,value:be,onChange:ot,width:25}))))},z=C.$.IsAbove,F=({labelWidth:he,onChange:me,refIds:De,query:le})=>{const Ee=(0,E.wW)(Q),be={type:"query",evaluator:{type:z,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},ge=le.conditions?.length?le.conditions:[be],ue=ge[0],Ie=x.Mi.find(qe=>qe.value===ge[0].evaluator?.type),ot=qe=>{me({...le,expression:qe.value})},Qe=qe=>{const bt=qe.value??z;me({...le,conditions:J(ge,{type:bt})})},Me=(qe,bt)=>{const Fe=parseFloat(qe.currentTarget.value),Ve=[...ue.evaluator.params];Ve[bt]=Fe,me({...le,conditions:J(ge,{params:Ve})})},Ne=ue.evaluator.type===C.$.IsWithinRange||ue.evaluator.type===C.$.IsOutsideRange;return c.createElement(c.Fragment,null,c.createElement(f.Z,null,c.createElement(l._,{label:"Input",labelWidth:he},c.createElement(d.Ph,{onChange:ot,options:De,value:le.expression,width:20}))),c.createElement(f.Z,null,c.createElement(P.d,{className:Ee.buttonSelectText,options:x.Mi,onChange:Qe,value:Ie}),Ne?c.createElement(c.Fragment,null,c.createElement(S.I,{type:"number",width:10,onChange:qe=>Me(qe,0),defaultValue:ue.evaluator.params[0]}),c.createElement("div",{className:Ee.button},"TO"),c.createElement(S.I,{type:"number",width:10,onChange:qe=>Me(qe,1),defaultValue:ue.evaluator.params[1]})):c.createElement(S.I,{type:"number",width:10,onChange:qe=>Me(qe,0),defaultValue:ge[0].evaluator.params[0]||0})))};function J(he,me){return[{...he[0],evaluator:{...he[0].evaluator,...me}}]}const Q=he=>({buttonSelectText:(0,p.css)`
    color: ${he.colors.primary.text};
    font-size: ${he.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:(0,p.css)`
    height: 32px;

    color: ${he.colors.primary.text};
    font-size: ${he.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${he.shape.radius.default};
    font-weight: ${he.typography.fontWeightBold};
    border: 1px solid ${he.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${he.spacing(1)};
    background-color: ${he.colors.background.primary};
  `}),Z=15;function ne(){const he=(0,c.useRef)({}),me=(0,c.useCallback)(le=>{switch(le){case x.Us.math:case x.Us.reduce:case x.Us.resample:case x.Us.threshold:return he.current[le];case x.Us.classic:return}},[]),De=(0,c.useCallback)((le,Ee)=>{switch(le){case x.Us.math:he.current.math=Ee;break;case x.Us.reduce:case x.Us.resample:case x.Us.resample:he.current.reduce=Ee,he.current.resample=Ee,he.current.threshold=Ee;break}},[]);return{getCachedExpression:me,setCachedExpression:De}}function ee(he){const{query:me,queries:De,onRunQuery:le,onChange:Ee}=he,{getCachedExpression:be,setCachedExpression:ge}=ne();(0,c.useEffect)(()=>{ge(me.type,me.expression)},[me.expression,me.type,ge]);const ue=(0,c.useCallback)(Qe=>{const Me=be(Qe.value),Ne=b({...me,type:Qe.value});Ee({...Ne,expression:Me??Ne.expression})},[me,Ee,be]),Ie=()=>{const Qe=De.filter(Me=>me.refId!==Me.refId).map(Me=>({value:Me.refId,label:Me.refId}));switch(me.type){case x.Us.math:return c.createElement(_,{onChange:Ee,query:me,labelWidth:Z,onRunQuery:le});case x.Us.reduce:return c.createElement(H,{refIds:Qe,onChange:Ee,labelWidth:Z,query:me});case x.Us.resample:return c.createElement(j,{query:me,labelWidth:Z,onChange:Ee,refIds:Qe});case x.Us.classic:return c.createElement(N,{onChange:Ee,query:me,refIds:Qe});case x.Us.threshold:return c.createElement(F,{onChange:Ee,query:me,labelWidth:Z,refIds:Qe})}},ot=x.EJ.find(Qe=>Qe.value===me.type);return c.createElement("div",null,c.createElement(l._,{label:"Operation",labelWidth:Z},c.createElement(d.Ph,{options:x.EJ,value:ot,onChange:ue,width:25})),Ie())}class de extends a.CK{constructor(me){super(me),this.instanceSettings=me}applyTemplateVariables(me,De){const le=(0,i.J)();return{...me,expression:le.replace(me.expression,De),window:le.replace(me.window,De)}}getCollapsedText(me){return`Expression: ${me.type}`}query(me){let De=me.targets.map(async Ee=>{const be=await(0,y.F)().get(Ee.datasource);return be.interpolateVariablesInQueries?be?.interpolateVariablesInQueries([Ee],me.scopedVars,me.filters)[0]:Ee});return(0,t.D)(Promise.all(De)).pipe((0,n.z)(Ee=>super.query({...me,targets:Ee})))}newQuery(me){return{refId:"--",datasource:a.hr,type:me?.type??x.Us.math,...me}}}const Pe={id:-100,uid:x.Yq,name:a.hr.name,type:a.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:r.zV.datasource,name:a.hr.type,id:a.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},ye=new de(Pe);ye.meta={id:a.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},ye.components={QueryEditor:ee}},29409:(X,L,e)=>{"use strict";e.d(L,{EJ:()=>y,Fr:()=>f,Mi:()=>u,SQ:()=>c,Us:()=>a,YM:()=>d,Yq:()=>r,kN:()=>l,r8:()=>m});var t=e(53470),n=e(5026);const r="__expr__";var a=(h=>(h.math="math",h.reduce="reduce",h.resample="resample",h.classic="classic_conditions",h.threshold="threshold",h))(a||{});const i=h=>{switch(h){case"math":return"Math";case"reduce":return"Reduce";case"resample":return"Resample";case"classic_conditions":return"Classic condition";case"threshold":return"Threshold"}},y=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition. Disables multi-dimensional alerts for this rule."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],c=[{value:t.gz.min,label:"Min",description:"Get the minimum value"},{value:t.gz.max,label:"Max",description:"Get the maximum value"},{value:t.gz.mean,label:"Mean",description:"Get the average value"},{value:t.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gz.count,label:"Count",description:"Get the number of values"},{value:t.gz.last,label:"Last",description:"Get the last value"}];var l=(h=>(h.Strict="",h.ReplaceNonNumbers="replaceNN",h.DropNonNumbers="dropNN",h))(l||{});const d=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],f=[{value:t.gz.last,label:"Last",description:"Fill with the last value"},{value:t.gz.min,label:"Min",description:"Fill with the minimum value"},{value:t.gz.max,label:"Max",description:"Fill with the maximum value"},{value:t.gz.mean,label:"Mean",description:"Fill with the average value"},{value:t.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],m=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],u=[{value:n.$.IsAbove,label:"Is above"},{value:n.$.IsBelow,label:"Is below"},{value:n.$.IsWithinRange,label:"Is within range"},{value:n.$.IsOutsideRange,label:"Is outside range"}]},33784:(X,L,e)=>{"use strict";e.d(L,{V:()=>t});function t(n){return!!n.libraryPanel?.uid}},64840:(X,L,e)=>{"use strict";e.d(L,{E8:()=>h,Kq:()=>d,Mh:()=>c,Ob:()=>f,Pq:()=>y,UO:()=>m,jh:()=>l});var t=e(31312),n=e(61606),r=e(75397),a=e(1277),i=e(84796);async function y({searchString:C="",perPage:x=100,page:b=1,excludeUid:g="",sortDirection:p="",typeFilter:v=[],folderFilterUIDs:E=[]}={}){const P=new URLSearchParams;P.append("searchString",C),P.append("sortDirection",p),P.append("typeFilter",v.join(",")),P.append("folderFilterUIDs",E.join(",")),P.append("excludeUid",g),P.append("perPage",x.toString(10)),P.append("page",b.toString(10)),P.append("kind",i.V.Panel.toString(10));const{result:S}=await(0,a.i)().get(`/api/library-elements?${P.toString()}`);return S}async function c(C,x=!1){const b=await(0,t.n)((0,a.i)().fetch({method:"GET",url:`/api/library-elements/${C}`,showSuccessAlert:!x,showErrorAlert:!x})),{result:g}=b.data,p=new r.f({...n.Ql,schemaVersion:35,panels:[g.model]}),{scopedVars:v,...E}=p.panels[0].getSaveModel();return p.destroy(),{...g,model:E}}async function l(C){const{result:x}=await(0,a.i)().get(`/api/library-elements/name/${C}`);return x}async function d(C,x){const{result:b}=await(0,a.i)().post("/api/library-elements",{folderUid:x,name:C.libraryPanel.name,model:C,kind:i.V.Panel});return b}async function f(C){const{libraryPanel:x,...b}=C,{uid:g,name:p,version:v,folderUid:E}=x,P=i.V.Panel,{result:S}=await(0,a.i)().patch(`/api/library-elements/${g}`,{folderUid:E,name:p,model:b,version:v,kind:P});return S}function m(C){return(0,a.i)().delete(`/api/library-elements/${C}`)}async function u(C){const{result:x}=await(0,a.i)().get(`/api/library-elements/${C}/connections`);return x}async function h(C){const x=await u(C);return x.length===0?[]:await(0,a.i)().search({dashboardUIDs:x.map(g=>g.connectionUid)})}},84796:(X,L,e)=>{"use strict";e.d(L,{V:()=>t});var t=(r=>(r[r.Panel=1]="Panel",r))(t||{}),n=(r=>(r[r.Dashboard=1]="Dashboard",r))(n||{})},3654:(X,L,e)=>{"use strict";e.d(L,{H:()=>E});var t=e(34032),n=e(48614),r=e(71519),a=e(16843),i=e(13601),y=e(21308),c=e(73431),l=e(97433),d=e(41407),f=e(39953),m=e(82803),u=e(73075),h=e(4919),C=e(64084),x=(P=>(P.Saved="saved",P.EditingStarted="editing-started",P.EditingCanceled="editing-cancelled",P.Deleted="deleted",P))(x||{});function b({onDismiss:P,event:S}){const M=(0,m.wW)(g),R=()=>{if(S?.action===x.Deleted){i.E1.push("/");return}E.reloadPage(),P()};return f.createElement(u.u,{isOpen:!0,title:"Dashboard changed",icon:"copy",onDismiss:P,onClickBackdrop:()=>{},className:M.modal},f.createElement("div",{className:M.description},"The dashboad has been updated by another session. Do you want to continue editing or discard your local changes?"),f.createElement(u.u.ButtonRow,null,f.createElement(h.zx,{onClick:P,variant:"secondary",fill:"outline"},"Continue editing"),f.createElement(h.zx,{onClick:R,variant:"destructive"},"Discard local changes")))}const g=(0,C.B)(P=>({modal:(0,d.css)({width:"600px"}),description:(0,d.css)({color:P.colors.text.secondary,paddingBottom:P.spacing(1)})})),p=(0,t.Z)();class v{constructor(){this.editing=!1,this.observer={next:S=>{if((0,n.se)(S)&&this.editing&&S.state===n.yS.Connected&&this.sendEditingState(),(0,n.RL)(S)){if(S.message.sessionId===p)return;const{action:M}=S.message;switch(M){case x.EditingStarted:case x.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const R=(0,l.h4)().getCurrent();if(R?.uid!==S.message.uid){console.log("dashboard event for different dashboard?",S,R);return}const I=this.editing||R.hasUnsavedChanges();if(M===x.Saved)I?y.h$.publish(new c.Dn({component:b,props:{event:S}})):(y.h$.emit(r.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(I&&M===x.EditingStarted&&!this.hasSeenNotice){const A=S.message,O=this.getRecentEditingEvent();(!O||O.message!==A.message)&&(this.hasSeenNotice=!0,y.h$.emit(r.SI.alertWarning,["Another session is editing this dashboard",A.message])),this.lastEditing=A}return}}}}}}setEditingState(S){const M=this.editing=S;this.editing=S,this.hasSeenNotice=!1,M&&y.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:S,uid:M}=this;S&&M&&(0,a.gj)().publish(S,{sessionId:p,uid:M,action:this.editing?x.EditingStarted:x.EditingCanceled,timestamp:Date.now()})}watch(S){const M=(0,a.gj)();M&&S!==this.uid&&(this.channel={scope:n.z.Grafana,namespace:"dashboard",path:`uid/${S}`},this.leave(),S&&(this.subscription=M.getStream(this.channel).subscribe(this.observer)),this.uid=S)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){i.E1.reload()}}const E=new v},19087:(X,L,e)=>{"use strict";e.d(L,{DC:()=>c,YD:()=>y});var t=e(86832),n=e.n(t),r=e(16360),a=e(44951),i=e(90355);const y=(0,r.Z)((m,u)=>{const h=l(m,u);return Object.values(h)}),c=(0,r.Z)(m=>{let u=[];return m.forEach(h=>{h.links?.forEach(C=>{if(C.variables){const x=C.variables.map(g=>{const p=g.variableName,v=g.fieldPath?`.${g.fieldPath}`:"";return`${p}${v}`}),b=C.variables.map(g=>g.found?g.value:"");u.push({keys:x,values:b,links:[C],fieldIndex:h.fieldIndex})}})}),u}),l=(0,r.Z)((m,u)=>f(m.dataFrame).visible.filter(x=>x.values[m.rowIndex]!=null).map(x=>{const b=u?u(x,m.rowIndex,m.dataFrame):[],g=x.values[m.rowIndex],p=typeof g=="string"||typeof g=="number"?g.toString():(0,a.Xh)(g);return{keys:[x.name],values:[p],links:b,fieldIndex:x.index}}));function d(m,u){const h=(0,i.L)(m);if(h===null)return new Set;const C=new Set(h.extraFields.map(x=>x.index));return h.severityField!==null&&C.add(h.severityField.index),u.keepBody&&C.add(h.bodyField.index),u.keepTimestamp&&C.add(h.timeField.index),C}function f(m,u){const h=m.fields.map((g,p)=>({...g,index:p})),C=d(m,u??{}),[x,b]=(0,t.partition)(h,g=>g.config.custom?.hidden?!1:(g.config.links??[]).length>0?!0:C.has(g.index));return{visible:x,hidden:b}}},90355:(X,L,e)=>{"use strict";e.d(L,{L:()=>x});var t=e(76892),n=e(89591),r=e(51226);function a(b,g){const p=b.labels;if(p!==void 0){const v=new Array(g);return v.fill(p),v}else return null}function i(b,g,p){if(p.meta?.custom?.frameType==="LabeledTimeValues"){const v=b.getFieldByName("labels");return v===void 0?[null,()=>null]:[v,()=>v.values]}else return[null,()=>a(g,p.length)]}function y(b){const g=new t.N(b),p=g.getFirstFieldOfType(n.fS.time),v=g.getFirstFieldOfType(n.fS.string);if(p===void 0||v===void 0)return null;const E=g.getFieldByName("tsNs")??null,P=g.getFieldByName("level")??null,S=g.getFieldByName("id")??null,[M,R]=i(g,v,b),I=g.fields.filter((A,O)=>O!==p.index&&O!==v.index&&O!==E?.index&&O!==P?.index&&O!==S?.index&&O!==M?.index);return{timeField:p,bodyField:v,timeNanosecondField:E,severityField:P,idField:S,getAttributes:R,getAttributesAsLabels:R,extraFields:I}}function c(b,g,p){const v=b.getFieldByName(g);if(v!==void 0)return v.type===p?v:void 0}const l="timestamp",d="body",f="severity",m="id",u="attributes";function h(b){const g={};return Object.entries(b).forEach(([p,v])=>{g[p]=typeof v=="string"?v:JSON.stringify(v)}),g}function C(b){const g=new t.N(b),p=c(g,l,n.fS.time),v=c(g,d,n.fS.string);if(p===void 0||v===void 0)return null;const E=c(g,f,n.fS.string)??null,P=c(g,m,n.fS.string)??null,S=c(g,u,n.fS.other)??null,M=S===null?null:S.values,R=g.fields.filter((I,A)=>A!==p.index&&A!==v.index&&A!==E?.index&&A!==P?.index&&A!==S?.index);return{timeField:p,bodyField:v,severityField:E,idField:P,getAttributes:()=>M,timeNanosecondField:null,getAttributesAsLabels:()=>M!==null?M.map(h):null,extraFields:R}}function x(b){return b.meta?.type===r.P.LogLines?C(b):y(b)}},41891:(X,L,e)=>{"use strict";e.d(L,{Qp:()=>I,aB:()=>j,UW:()=>U,Nw:()=>k,Ce:()=>Pe,Bz:()=>de});var t=e(86832),n=e(36497),r=e(84254),a=e(22605),i=e(69323),y=e(34547),c=e(53305),l=e(76892),d=e(89591),f=e(97898),m=e(92403),u=e(36822),h=e(28425),C=e(48069),x=e(81626),b=e(10694),g=e(6787),p=e(59561),v=e(48996),E=e(50820);function P(he,me){return E.default.bootData.user.lightTheme?me:he}var S=e(90355),M=e(20810);const R="Line limit",I="Common labels",A={[i.in.critical]:p.O9[7],[i.in.warning]:p.O9[1],[i.in.error]:p.O9[4],[i.in.info]:p.O9[0],[i.in.debug]:p.O9[5],[i.in.trace]:p.O9[2],[i.in.unknown]:P("#8e8e8e","#bdc4cd")},O=1,N=1e3*O,o=60*N,w=60*o,K=24*w,V=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function _(he,me,De){switch(De){case y.Y4.exact:return he.entry.replace(V,"")===me.entry.replace(V,"");case y.Y4.numbers:return he.entry.replace(/\d/g,"")===me.entry.replace(/\d/g,"");case y.Y4.signature:return he.entry.replace(/\w/g,"")===me.entry.replace(/\w/g,"");default:return!1}}function U(he,me){return me===y.Y4.none?he:he.reduce((De,le,Ee)=>{const be={...le},ge=De[De.length-1];return Ee>0&&_(le,ge,me)?ge.duplicates++:(be.duplicates=0,De.push(be)),De},[])}function $(he,me){return me.size===0?he:he.filter(De=>!me.has(De.logLevel))}function k(he,me){const De={},le=[];for(const Ee of he){let be=De[Ee.logLevel];be||(De[Ee.logLevel]=be={lastTs:null,datapoints:[],target:Ee.logLevel,color:A[Ee.logLevel]},le.push(be));const ge=Math.floor(Ee.timeEpochMs/me)*me;ge===be.lastTs?be.datapoints[be.datapoints.length-1][0]++:(be.datapoints.push([1,ge]),be.lastTs=ge);for(const ue of le)ue!==be&&ue.lastTs!==ge&&(ue.datapoints.push([0,ge]),ue.lastTs=ge)}return le.map((Ee,be)=>{Ee.datapoints.sort((ot,Qe)=>ot[1]-Qe[1]);const ge=(0,c.g0)(Ee),Ie=new l.N(ge).getFirstFieldOfType(d.fS.number);return ge.fields[Ie.index].config.min=0,ge.fields[Ie.index].config.decimals=0,ge.fields[Ie.index].config.color={mode:f.S.Fixed,fixedColor:Ee.color},ge.fields[Ie.index].config.custom={drawStyle:y.l8.Bars,barAlignment:y.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:Ee.color,pointColor:Ee.color,fillColor:Ee.color,lineWidth:0,fillOpacity:100,stacking:{mode:y.o0.Normal,group:"A"}},ge})}function H(he){return he.fields.some(me=>me.type===d.fS.time)&&he.fields.some(me=>me.type===d.fS.string)}function j(he,me,De,le){const{logSeries:Ee}=F(he),be=Q(Ee,le);if(be){if(me&&be.rows.length>0){const ge=be.rows.sort(M.DA),{visibleRange:ue,bucketSize:Ie,visibleRangeMs:ot,requestedRangeMs:Qe}=z(ge,me,De);be.visibleRange=ue,be.bucketSize=Ie,be.series=k(ge,Ie),be.meta&&(be.meta=Z(be,ot,Qe))}else be.series=[];return be.queries=le,be}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:le}}function z(he,me,De,le=20,Ee=1e3){let be=De,ge=me,ue=Math.max(ge*le,Ee),Ie,ot;if(De){const Qe=he[0].timeEpochMs;if(ot=De.to-De.from,Ie=De.to-Qe,Ie>0){const Me=Ie/ot;ge*=Me,ue=Math.max(Math.ceil(ge*le),Ee),be={from:Math.floor(Qe/ue)*ue,to:De.to}}else Ie=1}return{bucketSize:ue,visibleRange:be,visibleRangeMs:Ie,requestedRangeMs:ot}}function F(he){const me=[],De=[];for(const le of he){if(H(le)||!le.fields.length){De.push(le);continue}le.length>0&&me.push(le)}return{logSeries:De,metricSeries:me}}function J(he,me,De){const le=he.values[De],be=(0,m.zh)(le).valueOf();if(me)return{ts:le,timeEpochMs:be,timeEpochNs:me.values[De]};if(he.nanos!==void 0){const ge=he.nanos[De].toString().padStart(6,"0"),ue=`${be}${ge}`;return{ts:le,timeEpochMs:be,timeEpochNs:ue}}return{ts:le,timeEpochMs:be,timeEpochNs:be+"000000"}}function Q(he,me=[]){if(he.length===0)return;const De=[];let le=[];const Ee=he.filter(Ve=>Ve.fields.length);Ee.length&&Ee.forEach(Ve=>{const Ue=(0,S.L)(Ve);if(Ue!=null){const it=Ue.getAttributesAsLabels()??void 0,ze={rawFrame:Ve,logsFrame:Ue,frameLabels:it};le.push(ze),it&&it.length>0&&De.push(it)}});const be=De.flat(),ge=be.length>0?(0,u.FT)(be):{},ue=[];let Ie=!1;for(const Ve of le){const{logsFrame:Ue,rawFrame:it,frameLabels:ze}=Ve,{timeField:Xe,timeNanosecondField:St,bodyField:Bt,severityField:zt,idField:qt}=Ue;for(let Qt=0;Qt<it.length;Qt++){const{ts:yn,timeEpochMs:Zt,timeEpochNs:re}=J(Xe,St??void 0,Qt),Te=Bt.values[Qt]??"",We=typeof Te=="string"?Te:JSON.stringify(Te),Je=h.QX.hasAnsiCodes(We),je=!!We.match(/\\n|\\t|\\r/),pt=it.meta?.custom?.searchWords??it.meta?.searchWords??[],ft=Je?v._J.strip(We):We,Tt=ze?.[Qt],Ye=(0,u.IU)(Tt,ge);Object.keys(Ye).length>0&&(Ie=!0);let Ce=i.in.unknown;const oe=zt&&zt.values[Qt]||Tt&&Tt.level;oe?Ce=(0,M.jx)(oe):Ce=(0,M.ZO)(ft);const pe=me.find(ae=>ae.refId===it.refId)?.datasource?.type,Re={entryFieldIndex:Bt.index,rowIndex:Qt,dataFrame:it,logLevel:Ce,timeFromNow:(0,C.E8)(yn),timeEpochMs:Zt,timeEpochNs:re,timeLocal:(0,C.dq)(yn,{timeZone:"browser"}),timeUtc:(0,C.dq)(yn,{timeZone:"utc"}),uniqueLabels:Ye,hasAnsi:Je,hasUnescapedContent:je,searchWords:pt,entry:ft,raw:We,labels:Tt||{},uid:`${it.refId}_${qt?qt.values[Qt]:Qt.toString()}`,datasourceType:pe};qt!==null&&(Re.rowId=qt.values[Qt]),ue.push(Re)}}const ot=[];(0,t.size)(ge)>0&&ot.push({label:I,value:ge,kind:i.Ku.LabelsMap});const Me=he.filter(Ve=>Ve?.meta?.custom?.limit??Ve?.meta?.limit).reduce((Ve,Ue)=>(Ve[Ue.refId??""]=Ue.meta?.custom?.limit??Ue.meta?.limit??0,Ve),{}),Ne=Object.values(Me).reduce((Ve,Ue)=>Ve+=Ue,0);Ne>0&&ot.push({label:R,value:Ne,kind:i.Ku.Number});let qe=0;const bt={};let Fe=!1;for(const Ve of he){const Ue=Ve.meta?.custom?.lokiQueryStatKey,{refId:it}=Ve;if(!Fe&&Ve.meta?.custom?.error&&(ot.push({label:"",value:Ve.meta?.custom.error,kind:i.Ku.Error}),Fe=!0),it&&!bt[it]){if(Ue&&Ve.meta?.stats){const ze=Ve.meta.stats.find(Xe=>Xe.displayName===Ue);ze&&(qe+=ze.value)}bt[it]=!0}}if(qe>0){const{text:Ve,suffix:Ue}=(0,g.i7)("B")(qe);ot.push({label:"Total bytes processed",value:`${Ve} ${Ue}`,kind:i.Ku.String})}return{hasUniqueLabels:Ie,meta:ot,rows:ue}}function Z(he,me,De){let le=[...he.meta];const Ee=le.findIndex(ge=>ge.label===R),be=Ee>=0&&le[Ee]?.value;if(be&&be>0){let ge;if(be===he.rows.length&&me&&De){const ue=(me/De*100).toFixed(2);ge=`${be} reached, received logs cover ${ue}% (${x.msRangeToTimeString(me)}) of your selected time range (${x.msRangeToTimeString(De)})`}else ge=`${be} (${he.rows.length} returned)`;le[Ee]={label:R,value:ge,kind:i.Ku.String}}return le}function ne(he,me){const De=me&&he===i.in.unknown?"logs":he,le=A[he];return{displayNameFromDS:De,color:{mode:f.S.Fixed,fixedColor:le},custom:{drawStyle:y.l8.Bars,barAlignment:y.pu.Center,lineColor:le,pointColor:le,fillColor:le,lineWidth:1,fillOpacity:100,stacking:{mode:y.o0.Normal,group:"A"}}}}const ee=(he,me,De)=>(he.fields=he.fields.map(le=>(le.type===d.fS.number&&(le.config={...le.config,...ne(me(he),De)}),le)),he);function de(he,me,De){const le=De.range.to.valueOf()-De.range.from.valueOf(),Ee=ye(me.scopedVars,le);return me.interval=Ee.interval,me.scopedVars.__interval={value:Ee.interval,text:Ee.interval},Ee.intervalMs!==void 0&&(me.intervalMs=Ee.intervalMs,me.scopedVars.__interval_ms={value:Ee.intervalMs,text:Ee.intervalMs}),me.hideFromInspector=!0,new n.y(be=>{let ge=[];be.next({state:b.Gu.Loading,error:void 0,data:[]});const ue=he.query(me),ot=((0,r.b)(ue)?ue:(0,a.D)(ue)).subscribe({complete:()=>{be.complete()},next:Qe=>{const{error:Me}=Qe;if(Me!==void 0)be.next({state:b.Gu.Error,error:Me,data:[]}),be.error(Me);else{const Ne=(0,t.groupBy)(Qe.data,"refId");ge=Qe.data.map(qe=>{let bt=qe.refId||"";bt.startsWith("log-volume-")&&(bt=bt.substr(11));const Fe={logsVolumeType:i.o8.FullRange,absoluteRange:{from:De.range.from.valueOf(),to:De.range.to.valueOf()},datasourceName:he.name,sourceQuery:De.targets.find(Ve=>Ve.refId===bt)};return qe.meta={...qe.meta,custom:{...qe.meta?.custom,...Fe}},ee(qe,De.extractLevel,Ne[qe.refId].length===1)}),be.next({state:Qe.state,error:void 0,data:ge})}},error:Qe=>{be.next({state:b.Gu.Error,error:Qe,data:[]}),be.error(Qe)}});return()=>{ot?.unsubscribe()}})}function Pe(he,me){return me.hideFromInspector=!0,new n.y(De=>{let le=[];De.next({state:b.Gu.Loading,error:void 0,data:[]});const Ee=he.query(me),ge=((0,r.b)(Ee)?Ee:(0,a.D)(Ee)).subscribe({complete:()=>{De.next({state:b.Gu.Done,error:void 0,data:le}),De.complete()},next:ue=>{const{error:Ie}=ue;Ie!==void 0?(De.next({state:b.Gu.Error,error:Ie,data:[]}),De.error(Ie)):le=ue.data.map(ot=>{const Qe=(0,c.g0)(ot),{timeIndex:Me}=(0,c.sV)(Qe);return(0,c.aK)(Qe,Me)})},error:ue=>{De.next({state:b.Gu.Error,error:ue,data:[]}),De.error(ue)}});return()=>{ge?.unsubscribe()}})}function ye(he,me){if(he.__interval_ms){let De=he.__interval_ms.value,le="";return me<N*5?(De=O,le="1ms"):De>w?(De=K,le="1d"):De>o?(De=w,le="1h"):De>N?(De=o,le="1m"):(De=N,le="1s"),{interval:le,intervalMs:De}}else return{interval:"$__interval"}}},20810:(X,L,e)=>{"use strict";e.d(L,{$u:()=>C,DA:()=>m,Mi:()=>x,ZO:()=>y,i6:()=>d,j0:()=>h,jx:()=>c,l3:()=>b,lL:()=>l});var t=e(86832),n=e.n(t),r=e(69323),a=e(34547),i=e(19087);function y(S){if(!S)return r.in.unknown;let M=r.in.unknown,R;for(const[I,A]of Object.entries(r.in)){const N=new RegExp(`\\b${I}\\b`,"i").exec(S);N&&(R===void 0||N.index<R)&&(M=A,R=N.index)}return M}function c(S){const M=r.in[S.toString().toLowerCase()];return M||r.in.unknown}function l(S,M){const R=S.filter(O=>O.labels[M]!==void 0),I=R.length,A=(0,t.countBy)(R,O=>O.labels[M]);return f(A,I)}function d(S){const M=S.filter(I=>I!=null),R=(0,t.countBy)(M);return f(R,M.length)}const f=(S,M)=>(0,t.chain)(S).map((R,I)=>({count:R,value:I,proportion:R/M})).sortBy("count").reverse().value(),m=(S,M)=>S.timeEpochMs<M.timeEpochMs?-1:S.timeEpochMs>M.timeEpochMs?1:S.timeEpochNs<M.timeEpochNs?-1:S.timeEpochNs>M.timeEpochNs?1:0,u=(S,M)=>S.timeEpochMs>M.timeEpochMs?-1:S.timeEpochMs<M.timeEpochMs?1:S.timeEpochNs>M.timeEpochNs?-1:S.timeEpochNs<M.timeEpochNs?1:0,h=(S,M)=>{const R=S?C(S.rows,M):[];return S?{...S,rows:R}:{hasUniqueLabels:!1,rows:R}},C=(S,M)=>M===a.UV.Ascending?S.sort(m):S.sort(u),x=S=>S.labels.__error__?{hasError:!0,errorMessage:S.labels.__error__}:{hasError:!1},b=S=>S.replace(/\\r\\n|\\n|\\t|\\r/g,M=>M.slice(1)==="t"?"	":`
`);function g(S){return S.map(M=>{const R=getDataframeFields(M).reduce((I,A)=>{const O=A.keys[0];return I[O]=A.values[0],I},{});return{line:M.entry,timestamp:M.timeEpochNs,fields:{...R,...M.labels}}})}const p=S=>{let M={from:1/0,to:-1/0};return S.forEach(R=>{const I=R.meta?.custom||{};I.absoluteRange?.from&&I.absoluteRange?.to&&(M={from:Math.min(M.from,I.absoluteRange.from),to:Math.max(M.to,I.absoluteRange.to)})}),M},v=S=>{if(S.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const M={},R={};let I=-1/0;const A={};let O=[];return S.forEach(N=>{const o=new FieldCache(N),w=o.getFirstFieldOfType(FieldType.time),K=o.getFirstFieldOfType(FieldType.number);if(!w)throw new Error("Missing time field");if(!K)throw new Error("Missing value field");const V=K.config.displayNameFromDS||N.name||"logs",_=K.values.length;A[V]={meta:N.meta,valueFieldConfig:K.config,timeFieldConfig:w.config};for(let U=0;U<_;U++){const $=w.values[U],k=K.values[U];M[V]??={},M[V][$]=(M[V][$]||0)+k,R[$]=(R[$]||0)+k,I=Math.max(R[$],I)}}),Object.keys(M).forEach(N=>{const o=new MutableDataFrame,{meta:w,timeFieldConfig:K,valueFieldConfig:V}=A[N];o.name=N,o.meta=w,o.addField({name:"Time",type:FieldType.time,config:K}),o.addField({name:"Value",type:FieldType.number,config:V});for(const _ in M[N]){const U=M[N][_];o.add({Time:Number(_),Value:U})}O.push(o)}),{dataFrames:O,maximum:I}},E=S=>{const M=S[0]?.meta?.custom;return M&&M.datasourceName?{name:M.datasourceName}:null},P=S=>S[0]?.meta?.custom?.logsVolumeType===LogsVolumeType.Limited},44622:(X,L,e)=>{"use strict";e.d(L,{EW:()=>U,L6:()=>o,Pb:()=>_,ZL:()=>V,uC:()=>O});var t=e(4148),n=e(97316),r=e(14687),a=e(3654),i=e(21527),y=e(64840),c=e(84796),l=e(81813);function d(H){return async j=>{try{j(fetchDashboard());const z=await getBackendSrv().get(`/api/gnet/dashboards/${H}`);await j(b(z.json)),await j(h(z)),j(x())}catch(z){j(fetchFailed()),isFetchError(z)&&j(notifyApp(createErrorNotification(z.data.message||z)))}}}function f(H){return async j=>{await j(b(H)),await j(C(H)),j(x())}}const m=(H,j)=>H?.usage?.libraryPanels?.filter(z=>j.inputs.libraryPanels.some(F=>F.state!==LibraryPanelInputState.Exists&&F.model.uid===z.uid));function u(H,j){let z=H.__inputs;if(j.inputs.libraryPanels?.length){const F=[];H.__inputs?.forEach(J=>{if(!J?.usage?.libraryPanels){F.push(J);return}const Q=m(J,j);J.usage={libraryPanels:Q},!!Q?.length&&F.push(J)}),z=F}return{...H,__inputs:z}}function h(H){return(j,z)=>{const F=z().importDashboard,J=u(H.json,F);j(setGcomDashboard({...H,json:J}))}}function C(H){return(j,z)=>{const F=z().importDashboard,J=u(H,F);j(setJsonDashboard(J))}}function x(){return(H,j)=>{const z=j().importDashboard.dashboard;if(z&&z.__inputs){const F=[];z.__inputs.forEach(J=>{const Q={name:J.name,label:J.label,info:J.description,value:J.value,type:J.type,pluginId:J.pluginId,options:[]};Q.description=P(J),J.type===InputType.DataSource?E(J,Q):Q.info||(Q.info="Specify a string constant"),F.push(Q)}),H(setInputs(F))}}}function b(H){return async function(j){const z=await g(H);j(setLibraryPanelInputs(z))}}async function g(H){if(!H||!H.__elements)return[];const j=[];for(const z of Object.values(H.__elements)){if(z.kind!==LibraryElementKind.Panel)continue;const F=z.model,{type:J,description:Q}=F,{uid:Z,name:ne}=z,ee={model:{model:F,uid:Z,name:ne,version:0,type:J,kind:LibraryElementKind.Panel,description:Q},state:LibraryPanelInputState.New};try{const de=await getLibraryPanel(Z,!0);ee.state=LibraryPanelInputState.Exists,ee.model=de}catch(de){if(de.status!==404)throw de}j.push(ee)}return j}function p(){return H=>{H(clearDashboard())}}function v(H){return async(j,z)=>{const F=z().importDashboard.dashboard,J=z().importDashboard.inputs;let Q=[];H.dataSources?.forEach((ee,de)=>{const Pe=J.dataSources[de];Q.push({name:Pe.name,type:Pe.type,pluginId:Pe.pluginId,value:ee.uid})}),H.constants?.forEach((ee,de)=>{const Pe=J.constants[de];Q.push({value:ee,name:Pe.name,type:Pe.type})});const Z=await getBackendSrv().post("api/dashboards/import",{dashboard:{...F,title:H.title,uid:H.uid||F.uid},overwrite:!0,inputs:Q,folderUid:H.folder.uid}),ne=locationUtil.stripBaseFromUrl(Z.importedUrl);locationService.push(ne)}}const E=(H,j)=>{getDataSourceSrv().getList({pluginId:H.pluginId}).length===0?j.info="No data sources of type "+H.pluginName+" found":j.info||(j.info="Select a "+H.pluginName+" data source")},P=H=>{if(H.usage&&H.usage.libraryPanels)return`List of affected library panels: ${H.usage.libraryPanels.reduce((z,F,J)=>J===0?F.name:`${z}, ${F.name}`,"")}`};async function S(H,j){const z={totalCount:H.length,successCount:0};for(const F of H)try{await w(F,j)!==null&&(z.successCount+=1)}catch(J){console.error("Failed to move a folder",J)}return z}function M(H,j){const z=[];for(const F of H)z.push(I(R,!0,F,j));return k(z).then(F=>({totalCount:F.length,successCount:F.filter(J=>J.succeeded).length,alreadyInFolderCount:F.filter(J=>J.alreadyInFolder).length}))}async function R(H,j){const z=await getBackendSrv().get(`/api/dashboards/uid/${H}`);if((z.meta.folderUid===void 0||z.meta.folderUid===null)&&j.uid===""||z.meta.folderUid===j.uid)return{alreadyInFolder:!0};const F={dashboard:z.dashboard,folderUid:j.uid,overwrite:!1};try{return await O(F),{succeeded:!0}}catch(J){if(isFetchError(J)){if(J.data?.status!=="plugin-dashboard")return{succeeded:!1};J.isHandled=!0}F.overwrite=!0;try{return await O(F),{succeeded:!0}}catch{return{succeeded:!1}}}}function I(H,j,...z){return async F=>{try{const J=await H(...z);return Array.prototype.concat(F,[J])}catch(J){if(j)return F;throw J}}}function A(H,j){const z=[];for(const F of H)z.push(I(N,!0,F,!0));for(const F of j)z.push(I($,!0,F,!0));return k(z)}function O(H){return a.H.ignoreNextSave(),(0,t.i)().post("/api/dashboards/db/",{dashboard:H.dashboard,message:H.message??"",overwrite:H.overwrite??!1,folderUid:H.folderUid})}function N(H,j){return getBackendSrv().delete(`/api/folders/${H}?forceDeleteRules=false`,void 0,{showSuccessAlert:j})}function o(H){return(0,t.i)().post("/api/folders",H)}function w(H,j){const z={parentUid:j.uid};return getBackendSrv().post(`/api/folders/${H}/move`,z,{showErrorAlert:!1})}const K=1e3;function V(H,j,z=i.SearchQueryType.Folder){return(0,t.i)().get("/api/search",{query:H,type:z,permission:j,limit:K})}function _(H){return(0,t.i)().get(`/api/folders/${H}`)}function U(H){return(0,t.i)().get(`/api/folders/id/${H}`)}function $(H,j){return getBackendSrv().delete(`/api/dashboards/uid/${H}`,{showSuccessAlert:j})}function k(H){return H.reduce((j,z)=>Promise.resolve(j).then(z),[])}},81813:(X,L,e)=>{"use strict";e.d(L,{ZP:()=>b});var t=e(77960),n=e(10694),r=(g=>(g[g.Gcom=0]="Gcom",g[g.Json=1]="Json",g))(r||{}),a=(g=>(g.DataSource="datasource",g.Constant="constant",g.LibraryPanel="libraryPanel",g))(a||{}),i=(g=>(g.New="new",g.Exists="exists",g.Different="different",g))(i||{});const y={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},c=(0,t.oM)({name:"manageDashboards",initialState:y,reducers:{setGcomDashboard:(g,p)=>{g.dashboard={...p.payload.json,id:null},g.meta={updatedAt:p.payload.updatedAt,orgName:p.payload.orgName},g.source=0,g.state=n.Gu.Done},setJsonDashboard:(g,p)=>{g.dashboard={...p.payload,id:null},g.meta=y.meta,g.source=1,g.state=n.Gu.Done},clearDashboard:g=>{g.dashboard={},g.state=n.Gu.NotStarted},setInputs:(g,p)=>{g.inputs={dataSources:p.payload.filter(v=>v.type==="datasource"),constants:p.payload.filter(v=>v.type==="constant"),libraryPanels:g.inputs.libraryPanels||[]}},setLibraryPanelInputs:(g,p)=>{g.inputs.libraryPanels=p.payload},fetchFailed:g=>{g.dashboard={},g.state=n.Gu.Error},fetchDashboard:g=>{g.state=n.Gu.Loading}}}),{clearDashboard:l,setInputs:d,setGcomDashboard:f,setJsonDashboard:m,setLibraryPanelInputs:u,fetchFailed:h,fetchDashboard:C}=c.actions,b={importDashboard:c.reducer}},11818:(X,L,e)=>{"use strict";e.d(L,{F:()=>c,X:()=>l});var t=e(39953),n=e(40530),r=e(30670),a=e(33155),i=e(21527);class y extends t.PureComponent{constructor(f){super(f)}render(){const f={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:f},t.createElement(a.b,{severity:i.AppNotificationSeverity.Error,...this.props}))}}function c(d,f){const m=class extends t.PureComponent{render(){const C=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(y,{title:`Error loading: ${d.id}`,text:C})}},u=new n.c(m);return u.meta=d,u.loadError=!0,u}function l(d,f){const m=class extends t.PureComponent{render(){return t.createElement(y,{title:`Panel plugin not found: ${d}`})}},u=new n.c(f?()=>null:m);return u.meta={id:d,name:d,sort:100,type:r.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},u}},39617:(X,L,e)=>{"use strict";e.d(L,{H:()=>y,n:()=>i});var t=e(53305),n=e(83502),r=e(86127),a=e(84278);const i=c=>{const l=c.field.links;if(!(!l||l.length===0))return{getLinks:d=>{const f={};if(c.view){const{dataFrame:u}=c.view;f.__series={value:{name:u.name,refId:u.refId},text:"Series"};const h=c.colIndex!==void 0?u.fields[c.colIndex]:void 0;if(h){if(f.__field={value:{name:h.name,labels:h.labels},text:"Field"},c.rowIndex!==void 0&&c.rowIndex>=0){const{timeField:C}=(0,t.sV)(u);f.__value={value:{raw:h.values[c.rowIndex],numeric:c.display.numeric,text:(0,n.zc)(c.display),time:C?C.values[c.rowIndex]:void 0},text:"Value"}}c.view&&(f.__data={value:{name:u.name,refId:u.refId,fields:(0,r.z)({frame:u,rowIndex:c.rowIndex})},text:"Data"})}else f.__value={value:{raw:c.display.numeric,numeric:c.display.numeric,text:(0,n.zc)(c.display),calc:c.name},text:"Value"}}else console.log("VALUE",c);const m=(u,h,C)=>{const x={...f,...h};return d(u,x,C)};return l.map(u=>(0,a.Bq)().getDataLinkUIModel(u,m,c))}}},y=c=>{const l=c.links;if(!(!l||l.length===0))return{getLinks:()=>l.map(d=>(0,a.Bq)().getDataLinkUIModel(d,c.replaceVariables,c))}}},84278:(X,L,e)=>{"use strict";e.d(L,{Bq:()=>A});var t=e(86832),n=e.n(t),r=e(24824),a=e(69733),i=e(57837),y=e(28425),c=e(69307),l=e(14255),d=e(79059),f=e(34547),m=e(50820),u=e(6278),h=e(38361);const C=[{value:`${r.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:a.L8.BuiltIn},{value:`${r.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:a.L8.BuiltIn},{value:`${r.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:a.L8.BuiltIn}],x=[{value:`${r.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:a.L8.Series}],b=[{value:`${r.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:a.L8.Value},{value:`${r.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:a.L8.Value},{value:`${r.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:a.L8.Value}],g=O=>O.includes(".")||O.trim().includes(" ")?`["${O}"]`:`.${O}`,p=()=>[...getTemplateSrv().getVariables().map(O=>({value:O.name,label:O.name,origin:VariableOrigin.Template})),{value:`${DataLinkBuiltInVars.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:VariableOrigin.Template},...C],v=O=>{const N=[];for(const w of O)for(const K of w.fields)if(K.labels)for(const V of Object.keys(K.labels))N.push(V);const o=chain(N).flatten().uniq().value();return[{value:`${DataLinkBuiltInVars.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:VariableOrigin.Field},...o.map(w=>({value:`__field.labels${g(w)}`,label:`labels.${w}`,documentation:`${w} label value`,origin:VariableOrigin.Field}))]},E=O=>{let N,o;const w=[],K={};if(O.length!==1)return[];const V=O[0];for(const _ of V.fields){const U=getFieldDisplayName(_,V,O);K[U]||(w.push({value:`__data.fields${g(U)}`,label:`${U}`,documentation:`Formatted value for ${U} on the same row`,origin:VariableOrigin.Fields}),K[U]=!0,!N&&_.type===FieldType.number&&(N={..._,name:U}),!o&&_.config.displayName&&_.config.displayName!==_.name&&(o={..._,name:U}))}return w.length&&w.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:VariableOrigin.Fields}),N&&(w.push({value:`__data.fields${g(N.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:VariableOrigin.Fields}),w.push({value:`__data.fields${g(N.name)}.text`,label:"Show text value",documentation:"the text value",origin:VariableOrigin.Fields})),o&&w.push({value:`__data.fields${g(o.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:VariableOrigin.Fields}),w},P=(O,N)=>{const o={value:`${DataLinkBuiltInVars.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:VariableOrigin.Value};return N===VariableSuggestionsScope.Values?[...x,...v(O),...b,o,...E(O),...p()]:[...x,...v(O),...E(O),...p()]},S=O=>{const N=v(O),o={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...x,...N,...b,o,...p()]};class M{constructor(){this.getDataLinkUIModel=(N,o,w)=>{let K=N.url;N.onBuildUrl&&(K=N.onBuildUrl({origin:w,replaceVariables:o}));const V={href:i.u.assureBaseUrl(K.replace(/\n/g,"")),title:N.title??"",target:N.targetBlank?"_blank":void 0,origin:w};return o&&(V.href=o(V.href,void 0,f.b8.UriEncode),V.title=o(N.title)),N.onClick&&(V.onClick=_=>{N.onClick({origin:w,replaceVariables:o,e:_})}),V.href=(0,m.iE)().disableSanitizeHtml?V.href:y.QX.sanitizeUrl(V.href),V}}getLinkUrl(N){let o=i.u.assureBaseUrl((0,d.J)().replace(N.url||"")),w={};if(N.keepTime){const K=(0,u.$t)().timeRangeForUrl();w.from=K.from,w.to=K.to}return N.includeVars&&(w={...w,...(0,h.c)()}),o=c.Cj.appendQueryToUrl(o,c.Cj.toUrlParams(w)),(0,m.iE)().disableSanitizeHtml?o:y.QX.sanitizeUrl(o)}getAnchorInfo(N){const o=(0,d.J)();return{href:this.getLinkUrl(N),title:o.replace(N.title||""),tooltip:o.replace(N.tooltip||"")}}getPanelLinkAnchorInfo(N,o){(0,l.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const w=(K,V,_)=>(0,d.J)().replace(K,{...o,...V},_);return this.getDataLinkUIModel(N,w,{})}}let R;function I(O){R=O}function A(){return R||(R=new M),R}},51201:(X,L,e)=>{"use strict";e.d(L,{JI:()=>c,Kc:()=>d,qj:()=>l});var t=e(58103),n=e(64840),r=e(11818),a=e(28367),i=e(73431),y=e(33567);function c(u){return console.log("---- actions initPanelState"),async(h,C)=>{if(console.log("---- who? when?"),u.libraryPanel?.uid&&!("model"in u.libraryPanel)){h(m(u));return}let x=u.type;console.log("---- pluginToLoad",x);let b=C().plugins.panels[x];if(console.log("---- plugin",b),!b)try{b=await h((0,a.Ro)(x)),console.log("---- plugin",b)}catch(g){console.log("---- When plugin not found",g),b=(0,r.X)(x,x==="row")}u.plugin||(console.log("---- panel.plugin",u.plugin),await u.pluginLoaded(b)),h((0,y.bc)({key:u.key,plugin:b}))}}function l(u){return h=>{h((0,y.WJ)({key:u}))}}function d({panel:u,pluginId:h,options:C,fieldConfig:x,transformations:b}){return async(g,p)=>{if(u.type===h&&!C&&!x&&!b)return;let E=p().plugins.panels[h];if(E||(E=await g((0,a.Ro)(h))),u.type!==h&&u.changePlugin(E),C||x||b){const P=(0,t.d4)({plugin:E,currentOptions:C||u.options,currentFieldConfig:x||u.fieldConfig,isAfterPluginChange:!1});u.options=P.options,u.fieldConfig=P.fieldConfig,u.transformations=b||u.transformations,u.configRev++}u.generateNewKey(),g((0,y.bc)({key:u.key,plugin:E}))}}function f(u,h){return async(C,x)=>{const b=h.model.type,g=u.type;if(u.restoreModel({...h.model,gridPos:u.gridPos,id:u.id,libraryPanel:h}),u.getQueryRunner().clearLastResult(),g!==b){let v=x().plugins.panels[b];v||(v=await C(loadPanelPlugin(b))),await u.pluginLoaded(v),u.generateNewKey(),await C(panelModelAndPluginReady({key:u.key,plugin:v}))}else{const p=u.key;u.generateNewKey(),C(changePanelKey({oldKey:p,newKey:u.key}))}u.configRev=0,u.hasSavedPanelEditChange=!0,u.refresh(),u.events.publish(PanelQueriesChangedEvent),u.events.publish(PanelOptionsChangedEvent)}}function m(u){return async(h,C)=>{const x=u.libraryPanel.uid;try{const b=await(0,n.Mh)(x,!0);u.initLibraryPanel(b),await h(c(u));const g=C().dashboard.getModel();if(u.repeat&&g){const p=g.panels.findIndex(v=>v.id===u.id);g.repeatPanel(u,p),g.sortPanelsByGridPos(),g.events.publish(new i._B)}}catch(b){console.log("ERROR: ",b),h((0,y.bc)({key:u.key,plugin:(0,r.X)("Unable to load library panel: "+x,!1)}))}}}},33567:(X,L,e)=>{"use strict";e.d(L,{WJ:()=>l,ZP:()=>m,bc:()=>a,o8:()=>i,pC:()=>y});var t=e(77960);const n={},r=(0,t.oM)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(u,h)=>{u[h.payload.key]={plugin:h.payload.plugin}},changePanelKey:(u,h)=>{u[h.payload.newKey]=u[h.payload.oldKey],delete u[h.payload.oldKey]},removePanel:(u,h)=>{delete u[h.payload.key]},removeAllPanels:u=>{Object.keys(u).forEach(h=>delete u[h])},setPanelInstanceState:(u,h)=>{console.log("---- redusers setPanelInstanceState",h.payload.key,h.payload.value),u[h.payload.key].instanceState=h.payload.value},setPanelAngularComponent:(u,h)=>{const C=u[h.payload.key];C.angularComponent=h.payload.angularComponent}}}),{panelModelAndPluginReady:a,setPanelAngularComponent:i,setPanelInstanceState:y,changePanelKey:c,removePanel:l,removeAllPanels:d}=r.actions,m={panels:r.reducer}},14776:(X,L,e)=>{"use strict";e.d(L,{O2:()=>t,tB:()=>n,uJ:()=>r});const t="/api/plugins",n="/api/gnet",r="plugins"},28367:(X,L,e)=>{"use strict";e.d(L,{wx:()=>be,bp:()=>De,DD:()=>Ee,N9:()=>ot,Ro:()=>bt,m3:()=>Ne,LP:()=>qe,Tz:()=>Me});var t=e(77960),n=e(22605),r=e(74539),a=e(77830),i=e(10752),y=e(8894),c=e(31312),l=e(4148),d=e(13090),f=e(12700),m=e(52807),u=e(26893),h=e(14776),C=e(30670),x=e(32688),b=e(21308),g=e(1277),p=e(21527),v=e(31931);function E(Fe=[],Ve=[],Ue){const it=[],ze=N(Ue);return Fe.forEach(Xe=>{const St=Ve.find(zt=>zt.slug===Xe.id),Bt=ze[Xe.id];St||it.push(P(Xe,void 0,Bt))}),Ve.forEach(Xe=>{const St=Fe.find(qt=>qt.id===Xe.slug),Bt=ze[Xe.slug];Xe.status===v.Bs.Deprecated&&!St||it.push(P(St,Xe,Bt))}),it}function P(Fe,Ve,Ue){return!Fe&&Ve?S(Ve,Ue):Fe&&!Ve?M(Fe,Ue):R(Fe,Ve,Ue)}function S(Fe,Ve){const{name:Ue,slug:it,description:ze,version:Xe,orgName:St,popularity:Bt,downloads:zt,typeCode:qt,updatedAt:Qt,createdAt:yn,status:Zt,angularDetected:re}=Fe,Te=!!Ve||H(qt);return{description:ze,downloads:zt,id:it,info:{logos:{small:`https://grafana.com/api/plugins/${it}/versions/${Xe}/logos/small`,large:`https://grafana.com/api/plugins/${it}/versions/${Xe}/logos/large`}},name:Ue,orgName:St,popularity:Bt,publishedAt:yn,signature:o({remote:Fe,error:Ve}),updatedAt:Qt,hasUpdate:!1,isPublished:!0,isInstalled:Te,isDisabled:Te,isDeprecated:Zt===v.Bs.Deprecated,isCore:Fe.internal,isDev:!1,isEnterprise:Zt===v.Bs.Enterprise,type:qt,error:Ve?.errorCode,angularDetected:re}}function M(Fe,Ve){const{name:Ue,info:{description:it,version:ze,logos:Xe,updated:St,author:Bt},id:zt,dev:qt,type:Qt,signature:yn,signatureOrg:Zt,signatureType:re,hasUpdate:Te,accessControl:We,angularDetected:Je}=Fe,je=!!Ve||H(Qt);return{description:it,downloads:0,id:zt,info:{logos:Xe},name:Ue,orgName:Bt.name,popularity:0,publishedAt:"",signature:o({local:Fe,error:Ve}),signatureOrg:Zt,signatureType:re,updatedAt:St,installedVersion:ze,hasUpdate:Te,isInstalled:!0,isDisabled:je,isCore:yn==="internal",isPublished:!1,isDeprecated:!1,isDev:!!qt,isEnterprise:!1,type:Qt,error:Ve?.errorCode,accessControl:We,angularDetected:Je}}function R(Fe,Ve,Ue){const it=Fe?.info.version,ze=Ve?.slug||Fe?.id||"",Xe=Fe?.type||Ve?.typeCode,St=!!Ue||H(Xe);let Bt={small:`/public/img/icn-${Xe}.svg`,large:`/public/img/icn-${Xe}.svg`};return Ve?Bt={small:`https://grafana.com/api/plugins/${ze}/versions/${Ve.version}/logos/small`,large:`https://grafana.com/api/plugins/${ze}/versions/${Ve.version}/logos/large`}:Fe&&Fe.info.logos&&(Bt=Fe.info.logos),{description:Fe?.info.description||Ve?.description||"",downloads:Ve?.downloads||0,hasUpdate:Fe?.hasUpdate||!1,id:ze,info:{logos:Bt},isCore:!!(Ve?.internal||Fe?.signature===C.Xy.internal),isDev:!!Fe?.dev,isEnterprise:Ve?.status===v.Bs.Enterprise,isInstalled:!!Fe||St,isDisabled:St,isDeprecated:Ve?.status===v.Bs.Deprecated,isPublished:!0,name:Ve?.name||Fe?.name||"",orgName:Ve?.orgName||Fe?.info.author.name||"",popularity:Ve?.popularity||0,publishedAt:Ve?.createdAt||"",type:Xe,signature:o({local:Fe,remote:Ve,error:Ue}),signatureOrg:Fe?.signatureOrg||Ve?.versionSignedByOrgName,signatureType:Fe?.signatureType||Ve?.versionSignatureType||Ve?.signatureType||void 0,updatedAt:Ve?.updatedAt||Fe?.info.updated||"",installedVersion:it,error:Ue?.errorCode,accessControl:Fe?.accessControl,angularDetected:Fe?.angularDetected||Ve?.angularDetected}}const I=Fe=>`${config.pluginCatalogURL}${Fe}`;var A=(Fe=>(Fe.nameAsc="nameAsc",Fe.nameDesc="nameDesc",Fe.updated="updated",Fe.published="published",Fe.downloads="downloads",Fe))(A||{});const O=(Fe,Ve)=>{const Ue={nameAsc:(it,ze)=>it.name.localeCompare(ze.name),nameDesc:(it,ze)=>ze.name.localeCompare(it.name),updated:(it,ze)=>dateTimeParse(ze.updatedAt).valueOf()-dateTimeParse(it.updatedAt).valueOf(),published:(it,ze)=>dateTimeParse(ze.publishedAt).valueOf()-dateTimeParse(it.publishedAt).valueOf(),downloads:(it,ze)=>ze.downloads-it.downloads};return Ue[Ve]?Fe.sort(Ue[Ve]):Fe};function N(Fe=[]){return Fe.reduce((Ve,Ue)=>(Ve[Ue.pluginId]=Ue,Ve),{})}function o(Fe){const{error:Ve,local:Ue,remote:it}=Fe;if(Ve)switch(Ve.errorCode){case C.w2.invalidSignature:return C.Xy.invalid;case C.w2.missingSignature:return C.Xy.missing;case C.w2.modifiedSignature:return C.Xy.modified}return Ue?.signature?Ue.signature:it?.signatureType&&it?.versionSignatureType?C.Xy.valid:C.Xy.missing}const w=()=>(0,g.i)().get("/api/frontend/settings").then(Fe=>{x.config.panels=Fe.panels});function K(Fe){if(!Fe)return;const[Ve]=Fe.filter(Ue=>!!Ue.isCompatible);return Ve}const V=()=>config.pluginAdminEnabled,_=(Fe,Ve,Ue)=>{const it=config.pluginAdminExternalManageEnabled,ze=contextSrv.hasPermission(AccessControlAction.PluginsInstall),Xe=!!Ue;return Fe.type===PluginType.renderer||Fe.type===PluginType.secretsmanager||Fe.isEnterprise&&!featureEnabled("enterprise.plugins")||Fe.isDev||!ze&&!it||!Fe.isPublished||!Xe||!Ve},U=Fe=>k(Fe.id),$=Fe=>k(Fe.slug);function k(Fe){const{pluginCatalogHiddenPlugins:Ve}=x.config;return!Ve.includes(Fe)}function H(Fe){return Fe===C.zV.secretsmanager&&!x.config.secretsManagerPluginEnabled}function j(Fe){return Fe?.signature==="internal"}async function z(Fe){const Ve=await Q(Fe),Ue=!!Ve,[it,ze,Xe]=await Promise.all([ee(),Z(Fe,Ue),ne(Fe)]),St=it.find(zt=>zt.id===Fe),Bt=St?.dependencies||Ve?.json?.dependencies;return{grafanaDependency:Bt?.grafanaDependency??Bt?.grafanaVersion??"",pluginDependencies:Bt?.plugins||[],links:St?.info.links||Ve?.json?.info.links||[],readme:Xe||Ve?.readme,versions:ze}}async function F(){const{items:Fe}=await(0,l.i)().get(`${h.tB}/plugins`,{includeDeprecated:!0});return Fe.filter($)}async function J(){try{return await(0,l.i)().get(`${h.O2}/errors`)}catch{return[]}}async function Q(Fe){try{return await(0,l.i)().get(`${h.tB}/plugins/${Fe}`,{})}catch(Ve){(0,l.kW)(Ve)&&(Ve.isHandled=!0);return}}async function Z(Fe,Ve){try{return Ve?((await(0,l.i)().get(`${h.tB}/plugins/${Fe}/versions`)).items||[]).map(it=>({version:it.version,createdAt:it.createdAt,isCompatible:it.isCompatible,grafanaDependency:it.grafanaDependency})):[]}catch(Ue){return(0,l.kW)(Ue)&&(Ue.isHandled=!0),[]}}async function ne(Fe){try{const Ve=await(0,l.i)().get(`${h.O2}/${Fe}/markdown/README`);return Ve?(0,m.a)(Ve):""}catch(Ve){return(0,l.kW)(Ve)&&(Ve.isHandled=!0),""}}async function ee(){return(await(0,l.i)().get(`${h.O2}`,(0,u.y)({embedded:0}))).filter(U)}async function de(Fe){return await(0,l.i)().post(`${h.O2}/${Fe}/install`,void 0,{showErrorAlert:!1})}async function Pe(Fe){return await(0,l.i)().post(`${h.O2}/${Fe}/uninstall`)}async function ye(Fe,Ve){return(await getBackendSrv().datasourceRequest({url:`/api/plugins/${Fe}/settings`,method:"POST",data:Ve}))?.data}const he={getRemotePlugins:F,getInstalledPlugins:ee,installPlugin:de,uninstallPlugin:Pe},me=(0,t.hg)(`${h.uJ}/fetchAll`,async(Fe,Ve)=>{try{Ve.dispatch({type:`${h.uJ}/fetchLocal/pending`}),Ve.dispatch({type:`${h.uJ}/fetchRemote/pending`});const Ue=(0,n.D)(ee()),it=(0,n.D)(F()),ze=(0,n.D)(J());return(0,r.D)({local:Ue,remote:it,pluginErrors:ze}).pipe((0,a.V)({each:500,with:()=>(it.pipe((0,i.K)(Xe=>(Ve.dispatch({type:`${h.uJ}/fetchRemote/rejected`}),(0,y._)(()=>new Error("Failed to fetch plugins from catalog (default https://grafana.com/api/plugins)"))))).subscribe(async Xe=>{if(Ve.dispatch({type:`${h.uJ}/fetchRemote/fulfilled`}),Xe.length>0){const St=await(0,c.n)(Ue),Bt=await(0,c.n)(ze);Ve.dispatch(be(E(St,Xe,Bt)))}}),(0,r.D)({local:Ue,pluginErrors:ze}))})).subscribe(({local:Xe,remote:St,pluginErrors:Bt})=>{Ve.dispatch({type:`${h.uJ}/fetchLocal/fulfilled`}),Xe&&St?Ve.dispatch(be(E(Xe,St,Bt))):Xe&&Ve.dispatch(be(E(Xe,[],Bt)))}),null}catch{return Ve.rejectWithValue("Unknown error.")}}),De=(0,t.hg)(`${h.uJ}/fetchAllLocal`,async(Fe,Ve)=>{try{return(await ee()).map(it=>M(it))}catch{return Ve.rejectWithValue("Unknown error.")}}),le=(0,t.hg)(`${h.uJ}/fetchRemotePlugins`,async(Fe,Ve)=>{try{return await F()}catch(Ue){return(0,l.kW)(Ue)&&(Ue.isHandled=!0),Ve.rejectWithValue([])}}),Ee=(0,t.hg)(`${h.uJ}/fetchDetails`,async(Fe,Ve)=>{try{const Ue=await z(Fe);return{id:Fe,changes:{details:Ue}}}catch{return Ve.rejectWithValue("Unknown error.")}}),be=(0,t.PH)(`${h.uJ}/addPlugins`),ge=(0,t.PH)(`${h.uJ}/addLocalPlugins`),ue=(0,t.PH)(`${h.uJ}/addLocalPlugins`),Ie=(0,t.PH)(`${h.uJ}/addLocalPlugins`),ot=(0,t.hg)(`${h.uJ}/install`,async({id:Fe,version:Ve,isUpdating:Ue=!1},it)=>{const ze=Ue?{isInstalled:!0,installedVersion:Ve,hasUpdate:!1}:{isInstalled:!0,installedVersion:Ve};try{return await de(Fe),await w(),Ue&&(0,f.Hl)(Fe),{id:Fe,changes:ze}}catch(Xe){return console.error(Xe),(0,l.kW)(Xe)?it.rejectWithValue(Xe.data):it.rejectWithValue("Unknown error.")}}),Qe=(0,t.hg)(`${h.uJ}/install`,async()=>({})),Me=(0,t.hg)(`${h.uJ}/uninstall`,async(Fe,Ve)=>{try{return await Pe(Fe),await w(),(0,f.Hl)(Fe),{id:Fe,changes:{isInstalled:!1,installedVersion:void 0}}}catch(Ue){return console.error(Ue),Ve.rejectWithValue("Unknown error.")}}),Ne=(0,t.hg)(`${h.uJ}/loadPluginDashboards`,async(Fe,Ve)=>{const ze=`api/plugins/${Ve.getState().dataSources.dataSource.type}/dashboards`;return(0,l.i)().get(ze)}),qe=(0,t.PH)(`${h.uJ}/panelPluginLoaded`),bt=Fe=>async(Ve,Ue)=>{const it=Ue();console.log(it);let ze=it.plugins.panels[Fe];return ze||(console.log("---- importPanelPlugin"),ze=await(0,d.Ub)(Fe),console.log("---- plugin",ze),Ue().plugins.panels[Fe]||Ve(qe(ze))),ze}},31931:(X,L,e)=>{"use strict";e.d(L,{Bs:()=>a,eE:()=>l,lL:()=>t});var t=(d=>(d.Grid="grid",d.List="list",d))(t||{}),n=(d=>(d.Home="plugins-home",d.Browse="plugins-browse",d.Details="plugins-details",d))(n||{}),r=(d=>(d.app="apps",d.datasource="database",d.panel="credit-card",d.renderer="capture",d.secretsmanager="key-skeleton-alt",d))(r||{}),a=(d=>(d.Deleted="deleted",d.Active="active",d.Pending="pending",d.Deprecated="deprecated",d.Enterprise="enterprise",d))(a||{}),i=(d=>(d.INSTALL="INSTALL",d.UNINSTALL="UNINSTALL",d.UPDATE="UPDATE",d.REINSTALL="REINSTALL",d))(i||{}),y=(d=>(d.OVERVIEW="Overview",d.VERSIONS="Version history",d.CONFIG="Config",d.DASHBOARDS="Dashboards",d.USAGE="Usage",d))(y||{}),c=(d=>(d.OVERVIEW="overview",d.VERSIONS="version-history",d.CONFIG="config",d.DASHBOARDS="dashboards",d.USAGE="usage",d))(c||{}),l=(d=>(d.Pending="Pending",d.Fulfilled="Fulfilled",d.Rejected="Rejected",d))(l||{})},2106:(X,L,e)=>{"use strict";e.d(L,{e:()=>n});var t=e(32688);function n(r){return Object.entries(t.config.datasources).some(([a,i])=>i.uid===r&&i.angularDetected)}},52436:(X,L,e)=>{"use strict";e.d(L,{ND:()=>h,ak:()=>b});var t=e(54721),n=e(71519),r=e(79059),a=e(12384),i=e(4148),y=e(26205),c=e(92743),l=e(28833),d=e(50820),f=e(12028),m=e(29409),u=e(69858);class h{constructor(p=(0,r.J)()){this.templateSrv=p,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(p,v){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=p,this.defaultName=v;for(const E of Object.values(p))E.uid||(E.uid=E.name),this.settingsMapByUid[E.uid]=E,this.settingsMapById[E.id]=E;this.datasources[c.hr.type]=f.mV,this.datasources[m.Yq]=f.mV,this.settingsMapByUid[c.hr.uid]=f.bE,this.settingsMapByUid[m.Yq]=f.bE}getDataSourceSettingsByUid(p){return this.settingsMapByUid[p]}getInstanceSettings(p,v){let E=C(p);if((0,c.Pr)(E))return f.bE;if(E==="default"||E==null)return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName];if(E[0]==="$"){const P=this.templateSrv.replace(E,v,x);let S;return P==="default"?S=this.settingsMapByName[this.defaultName]:S=this.settingsMapByUid[P]??this.settingsMapByName[P],S?{...S,isDefault:!1,name:E,uid:E,rawRef:{type:S.type,uid:S.uid}}:void 0}return this.settingsMapByUid[E]??this.settingsMapByName[E]??this.settingsMapById[E]}get(p,v){let E=C(p);if(!E)return this.get(this.defaultName);if((0,c.Pr)(p))return Promise.resolve(this.datasources[m.Yq]);const P=this.settingsMapByName[E];return P&&(E=P.uid),this.datasources[E]?Promise.resolve(this.datasources[E]):(E=this.templateSrv.replace(E,v,x),E==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[E]?Promise.resolve(this.datasources[E]):this.loadDatasource(E))}async loadDatasource(p){if(this.datasources[p])return Promise.resolve(this.datasources[p]);const v=this.getInstanceSettings(p);if(!v)return Promise.reject({message:`Datasource ${p} was not found`});try{const E=await(0,u.nL)(v.meta);if(this.datasources[p])return this.datasources[p];const P=E.DataSourceClass.length!==1;let S;if(P?S=(0,a.V)().instantiate(E.DataSourceClass,{instanceSettings:v}):S=new E.DataSourceClass(v),S.components=E.components,!(S instanceof t.MF)){const M=S;M.name=v.name,M.id=v.id,M.type=v.type,M.meta=v.meta,M.uid=v.uid,S.getRef=t.MF.prototype.getRef}return this.datasources[p]=S,this.datasources[S.uid]=S,S}catch(E){return E instanceof Error&&l.Z.emit(n.SI.alertError,[v.name+" plugin failed",E.toString()]),Promise.reject({message:`Datasource: ${p} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(p={}){const v=Object.values(this.settingsMapByName).filter(P=>!(P.meta.id==="grafana"||P.meta.id==="mixed"||P.meta.id==="dashboard"||p.metrics&&!P.meta.metrics||p.tracing&&!P.meta.tracing||p.logs&&P.meta.category!=="logging"&&!P.meta.logs||p.annotations&&!P.meta.annotations||p.alerting&&!P.meta.alerting||p.pluginId&&P.meta.id!==p.pluginId||p.filter&&!p.filter(P)||p.type&&(Array.isArray(p.type)?!p.type.includes(P.type):p.type!==P.type)||!p.all&&P.meta.metrics!==!0&&P.meta.annotations!==!0&&P.meta.tracing!==!0&&P.meta.logs!==!0&&P.meta.alerting!==!0));if(p.variables)for(const P of this.templateSrv.getVariables()){if(P.type!=="datasource")continue;let S=P.current.value==="default"?this.defaultName:P.current.value;Array.isArray(S)&&S.length===1&&(S=S[0]);const M=!Array.isArray(S)&&(this.settingsMapByName[S]||this.settingsMapByUid[S]);if(M){const R=`\${${P.name}}`;v.push({...M,isDefault:!1,name:R,uid:R})}}const E=v.sort((P,S)=>P.name.toLowerCase()>S.name.toLowerCase()?1:P.name.toLowerCase()<S.name.toLowerCase()?-1:0);if(!p.pluginId&&!p.alerting){if(p.mixed){const P=this.getInstanceSettings("-- Mixed --");P&&v.push(P)}if(p.dashboard){const P=this.getInstanceSettings("-- Dashboard --");P&&v.push(P)}if(!p.tracing){const P=this.getInstanceSettings("-- Grafana --");P&&v.push(P)}}return E}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(p=>({name:p.name,value:p.name,meta:p.meta}))}getMetricSources(p){return this.getList({metrics:!0,variables:!p?.skipVariables}).map(v=>({name:v.name,value:v.name,meta:v.meta}))}async reload(){const p=await(0,i.i)().get("/api/frontend/settings");d.default.datasources=p.datasources,d.default.defaultDatasource=p.defaultDatasource,this.init(p.datasources,p.defaultDatasource)}}function C(g){return(0,c.Pr)(g)?c.hr.uid:typeof g=="string"?g:g?.uid}function x(g){return Array.isArray(g)?g[0]:g}const b=()=>(0,y.F)()},13090:(X,L,e)=>{"use strict";e.d(L,{Ub:()=>c,eD:()=>l});var t=e(40530),n=e(50820),r=e(11818),a=e(69858);console.log(n.default);const i={},y={};function c(h){const C=i[h];if(console.log("---- importPanelPlugin",h,C),C)return C;const x=d(h);if(console.log("---- importPanelPlugin",x),!x)throw new Error(`Plugin ${h} not found`);return i[h]=u(x),h!==x.type&&(i[x.type]=i[h]),i[h]}function l(h){return!!d(h)}function d(h){const C=n.default.panels[h];if(console.log("---- getPanelPluginMeta",{id:h,v:C}),!C){for(const x of Object.values(n.default.panels))if(x.aliasIDs?.includes(h))return x}return C}function f(h){return u(h)}function m(h){return y[h]}function u(h){return(0,a.N$)({path:h.module,version:h.info?.version,isAngular:h.angularDetected,pluginId:h.id}).then(C=>{if(C.plugin)return C.plugin;if(C.PanelCtrl){const x=new t.c(null);return x.angularPanelCtrl=C.PanelCtrl,x}throw new Error("missing export: plugin or PanelCtrl")}).then(C=>(C.meta=h,y[h.id]=C,C)).catch(C=>(console.warn("Error loading panel plugin: "+h.id,C),(0,r.F)(h,C)))}},12700:(X,L,e)=>{"use strict";e.d(L,{Hl:()=>i,Vf:()=>a,u0:()=>y});var t=e(33558);const n={},r=Date.now();function a({path:l,version:d}){const f=c(l);f&&!n[f]&&(n[f]=encodeURI(d))}function i(l){const d=`plugins/${l}/module`;n[d]&&delete n[d],(0,t.Z)(l)}function y(l,d=r){const f=c(l);if(!f)return`${l}?_cache=${d}`;const u=n[f]||d;return`${l}?_cache=${u}`}function c(l){const d=/\/.+\/(plugins\/.+\/module)\.js/i.exec(l);if(!d)return;const[f,m]=d;if(m)return m}},33558:(X,L,e)=>{"use strict";e.d(L,{Z:()=>a,a:()=>r});var t=e(4148);const n={};function r(i,y){const c=n[i];return c?Promise.resolve(c):(0,t.i)().get(`/api/plugins/${i}/settings`,void 0,void 0,y).then(l=>(n[i]=l,l)).catch(l=>Promise.reject(new Error("Unknown Plugin")))}const a=i=>i?delete n[i]:Object.keys(n).forEach(y=>delete n[y])},69858:(X,L,e)=>{"use strict";e.d(L,{nL:()=>_x,N$:()=>du});var t={};e.r(t),e.d(t,{plugin:()=>Ue});var n={};e.r(n),e.d(n,{plugin:()=>Ac});var r={};e.r(r),e.d(r,{plugin:()=>fu});var a={};e.r(a),e.d(a,{plugin:()=>Du});var i={};e.r(i),e.d(i,{plugin:()=>Tu});var y={};e.r(y),e.d(y,{plugin:()=>Ji});var c={};e.r(c),e.d(c,{plugin:()=>Sg});var l={};e.r(l),e.d(l,{plugin:()=>Jg});var d={};e.r(d),e.d(d,{plugin:()=>rp});var f={};e.r(f),e.d(f,{plugin:()=>dh});var m={};e.r(m),e.d(m,{plugin:()=>Ch});var u={};e.r(u),e.d(u,{plugin:()=>Th});var h={};e.r(h),e.d(h,{plugin:()=>jh});var C={};e.r(C),e.d(C,{plugin:()=>S0});var x={};e.r(x),e.d(x,{plugin:()=>B0});var b={};e.r(b),e.d(b,{plugin:()=>Av});var g={};e.r(g),e.d(g,{plugin:()=>ry});var p={};e.r(p),e.d(p,{plugin:()=>dy});var v={};e.r(v),e.d(v,{plugin:()=>fy});var E={};e.r(E),e.d(E,{plugin:()=>Ry});var P={};e.r(P),e.d(P,{plugin:()=>$y});var S={};e.r(S),e.d(S,{plugin:()=>nE});var M={};e.r(M),e.d(M,{plugin:()=>ZE});var R={};e.r(R),e.d(R,{plugin:()=>eb});var I={};e.r(I),e.d(I,{plugin:()=>nb});var A={};e.r(A),e.d(A,{plugin:()=>bb});var O=e(54721),N=e(2292),o=e(39953),w=e(40530),K=e(95712),V=e(32688),_=e(64447),U=e(26544),$=e(32525),k=e(14949),H=e(63483),j=e(57675),z=e(21527),F=e(41407),J=e(5195),Q=e(82803),Z=e(4919),ne=e(86832),ee=e.n(ne),de=e(71757),Pe=e.n(de),ye=e(72899),he=e(15429);const me=({labels:s,commonLabels:D={},size:T})=>{const B=(0,Q.wW)(ce=>Ee(ce,T)),[W,G]=(0,o.useState)(!1),Y=(0,ne.chain)(s).toPairs().reject(le).reject(([ce])=>W?!1:ce in D).value(),q=Object.keys(D).length,se=q>0;return o.createElement("div",{className:B.wrapper,role:"list","aria-label":"Labels"},Y.map(([ce,fe])=>o.createElement(he._,{key:ce+fe,size:T,label:ce,value:fe,color:De(ce)})),!W&&se&&o.createElement(Z.zx,{variant:"secondary",fill:"text",onClick:()=>G(!0),tooltip:"Show common labels",tooltipPlacement:"top",size:"sm"},"+",q," common ",Pe()("label",q)),W&&se&&o.createElement(Z.zx,{variant:"secondary",fill:"text",onClick:()=>G(!1),tooltipPlacement:"top",size:"sm"},"Hide common labels"))};function De(s){return(0,ye.Bx)(s).color}const le=([s,D])=>s.startsWith("__")&&s.endsWith("__"),Ee=(s,D)=>({wrapper:(0,F.css)`
    display: flex;
    flex-wrap: wrap;
    align-items: center;

    gap: ${D==="md"?s.spacing():s.spacing(.5)};
  `}),be=({isCollapsed:s,onToggle:D,idControlled:T,className:B,text:W,size:G="xl",...Y})=>o.createElement(Z.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!s,"aria-controls":T,className:B,icon:s?"angle-right":"angle-down",onClick:()=>D(!s),...Y},W);var ge=e(47858);const ue=s=>({[ge.Z9.Active]:(0,F.css)`
    color: ${s.colors.error.text};
  `,[ge.Z9.Suppressed]:(0,F.css)`
    color: ${s.colors.primary.text};
  `,[ge.Z9.Unprocessed]:(0,F.css)`
    color: ${s.colors.secondary.text};
  `}),Ie=({group:s})=>{const D=(0,Q.wW)(ue),T=s.alerts.length,B=s.alerts.reduce((W,G)=>(W[G.status.state]?W[G.status.state]+=1:W[G.status.state]=1,W),{});return o.createElement("div",null,`${T} ${Pe()("alert",T)}: `,Object.entries(B).map(([W,G],Y)=>o.createElement("span",{key:`${JSON.stringify(s.labels)}-notifications-${Y}`,className:D[W]},Y>0&&", ",`${G} ${W}`)))};var ot=e(59471);const Qe=({alertManagerSourceName:s,group:D,expandAll:T})=>{const[B,W]=(0,o.useState)(T),G=(0,Q.wW)(Me),Y=(0,Q.wW)(ue);return(0,o.useEffect)(()=>W(T),[T]),o.createElement("div",{className:G.group,"data-testid":"alert-group"},Object.keys(D.labels).length>0?o.createElement(me,{labels:D.labels,size:"sm"}):o.createElement("div",{className:G.noGroupingText},"No grouping"),o.createElement("div",{className:G.row},o.createElement(be,{isCollapsed:!B,onToggle:()=>W(!B)})," ",o.createElement(Ie,{group:D})),B&&o.createElement("div",{className:G.alerts},D.alerts.map((q,se)=>{const ce=q.status.state.toUpperCase(),fe=(0,J.vT)({start:new Date(q.startsAt),end:Date.now()});return o.createElement("div",{"data-testid":"alert-group-alert",className:G.alert,key:`${q.fingerprint}-${se}`},o.createElement("div",null,o.createElement("span",{className:Y[q.status.state]},ce," "),"for ",fe),o.createElement("div",null,o.createElement(me,{labels:q.labels,size:"sm"})),o.createElement("div",{className:G.actionsRow},q.status.state===ge.Z9.Suppressed&&o.createElement(Z.Qj,{href:`${(0,ot.eQ)("/alerting/silences",s)}&silenceIds=${q.status.silencedBy.join(",")}`,className:G.button,icon:"bell",size:"sm"},"Manage silences"),q.status.state===ge.Z9.Active&&o.createElement(Z.Qj,{href:(0,ot.VN)(s,q.labels),className:G.button,icon:"bell-slash",size:"sm"},"Silence"),q.generatorURL&&o.createElement(Z.Qj,{className:G.button,href:q.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},Me=s=>({noGroupingText:(0,F.css)`
    height: ${s.spacing(4)};
  `,group:(0,F.css)`
    background-color: ${s.colors.background.secondary};
    margin: ${s.spacing(.5,1,.5,1)};
    padding: ${s.spacing(1)};
  `,row:(0,F.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${s.spacing(1)};
  `,alerts:(0,F.css)`
    margin: ${s.spacing(0,2,0,4)};
  `,alert:(0,F.css)`
    padding: ${s.spacing(1,0)};
    & + & {
      border-top: 1px solid ${s.colors.border.medium};
    }
  `,button:(0,F.css)`
    & + & {
      margin-left: ${s.spacing(1)};
    }
  `,actionsRow:(0,F.css)`
    padding: ${s.spacing(1,0)};
  `}),Ne=(s,D)=>(0,o.useMemo)(()=>s.filter(T=>(0,k.eD)(T.labels,D)||T.alerts.some(B=>(0,k.eD)(B.labels,D))),[s,D]),qe=s=>{const D=(0,z.useDispatch)(),T=V.config.unifiedAlertingEnabled,B=s.options.expandAll,W=s.options.alertmanager,Y=((0,U._)(fe=>fe.amAlertGroups)||j.oq)[W||""]?.result||[],q=s.options.labels?(0,k.Zh)(s.options.labels):[],se=Ne(Y,q);(0,o.useEffect)(()=>{function fe(){W&&D((0,$.mS)(W))}fe();const Se=setInterval(fe,H.iF);return()=>{clearInterval(Se)}},[D,W]);const ce=se.length>0;return o.createElement(_.$,{autoHeightMax:"100%",autoHeightMin:"100%"},T&&o.createElement("div",null,ce&&se.map(fe=>o.createElement(Qe,{alertManagerSourceName:W,key:JSON.stringify(fe.labels),group:fe,expandAll:B})),!ce&&"No alerts"))};var bt=e(9558);function Fe(s){return s.name===K.GC?"Grafana":s.name.slice(0,37)}const Ve=({onChange:s,current:D,dataSources:T})=>{const B=(0,o.useMemo)(()=>T.map(W=>({label:Fe(W),value:W.name,imgUrl:W.imgUrl,meta:W.meta})),[T]);return o.createElement(bt.Ph,{"aria-label":"Choose Alertmanager",width:29,backspaceRemovesValue:!1,onChange:W=>W.value&&s(W.value),options:B,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:D,getOptionLabel:W=>W.label})},Ue=new w.c(qe).setPanelOptions(s=>s.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:K.GC,category:["Options"],editor:function(T){const B=(0,o.useMemo)(K.z3,[]);return o.createElement(Ve,{current:T.value,onChange:W=>T.onChange(W),dataSources:B})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var it=e(97250),ze=e(98837),Xe=e(97368),St=e.n(Xe),Bt=e(75766),zt=e(9738),qt=e(44622);async function Qt({query:s,permissionLevel:D}){return(await(0,qt.ZL)(s,D)).map(W=>({id:W.id,title:W.title,url:W.url}))}async function yn({query:s,permissionLevel:D,extraFolders:T}){const B=await Qt({query:s,permissionLevel:D}),W=T??[],G=s?W.filter(Y=>Y.title?.toLowerCase().includes(s.toLowerCase())):W;return B?G.concat(B):G}async function Zt({query:s,permissionLevel:D=z.PermissionLevelString.View,extraFolders:T=[]}){return(await yn({query:s,permissionLevel:D,extraFolders:T})).map(W=>({value:W,label:W.title}))}function re(s,D){return s?.find(T=>T.value?.id===D)}async function Te(s){if(s!=null)try{const{id:D,title:T}=await(0,qt.EW)(s);return{value:{id:D,title:T},label:T}}catch{console.error(`Could not find folder with id:${s}`)}}const We={id:void 0,title:"All"},Je={id:zt.pW,title:zt.fy};function je({onChange:s,extraFolders:D=[],initialFolderId:T,permissionLevel:B=z.PermissionLevelString.View}){const[W,G]=(0,o.useState)(!1),[Y,q]=(0,o.useState)(void 0),[se,ce]=(0,o.useState)(void 0),fe=(0,o.useCallback)(async He=>{let tt=re(He,T);tt||(tt=await Te(T)??He[0],s(tt.value)),G(!0),ce(He),q(tt)},[T,s]),Se=(0,o.useCallback)(async He=>{const tt=await Zt({query:He,permissionLevel:B,extraFolders:D});return W||await fe(tt),tt},[B,D,W,fe]),_e=St()(Se,300,{leading:!0}),Ae=(0,o.useCallback)(({value:He})=>{const tt=re(se,He?.id);q(tt),s(He)},[se,s]);return o.createElement("div",{"data-testid":Bt.wl.components.ReadonlyFolderPicker.container},o.createElement(bt.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:Y,value:Y,loadOptions:_e,onChange:Ae}))}var pt=e(11286),ft=e(20653),Tt=e(92403),Ye=e(77877),Ce=e(79059),oe=e(4148),pe=e(4236),Re=e(39285),ae=e(5026),ve=e(97433),xe=e(3);function Ge(s){const[D,T]=(0,o.useState)(""),B=(0,ft.Z)(async()=>{if(s.options.showOptions!==xe.kx.Current)return;const Y={state:dt(s.options.stateFilter)},q=(0,ve.h4)().getCurrent()?.getPanelById(s.id);s.options.alertName&&(Y.query=(0,Ce.J)().replace(s.options.alertName,q.scopedVars)),s.options.folderId>=0&&(Y.folderId=s.options.folderId),s.options.dashboardTitle&&(Y.dashboardQuery=s.options.dashboardTitle),s.options.dashboardAlerts&&(Y.dashboardId=(0,ve.h4)().getCurrent()?.id),s.options.tags&&(Y.dashboardTag=s.options.tags);const se=await(0,oe.i)().get("/api/alerts",Y,`alert-list-get-current-alert-state-${s.id}`);let ce=at(s.options.sortOrder,se.map(fe=>({...fe,stateModel:ae.Z.getStateDisplayModel(fe.state),newStateDateAgo:(0,Tt.CQ)(fe.newStateDate).locale("en").fromNow(!0)})));return ce.length>s.options.maxItems&&(ce=ce.slice(0,s.options.maxItems)),T(ce.length===0?"No alerts":""),ce},[s.options.showOptions,s.options.stateFilter.alerting,s.options.stateFilter.execution_error,s.options.stateFilter.no_data,s.options.stateFilter.ok,s.options.stateFilter.paused,s.options.stateFilter.pending,s.options.maxItems,s.options.tags,s.options.dashboardAlerts,s.options.dashboardTitle,s.options.folderId,s.options.alertName,s.options.sortOrder,s.timeRange]),W=(0,ft.Z)(async()=>{if(s.options.showOptions!==xe.kx.RecentChanges)return;const Y={limit:s.options.maxItems,type:"alert",newState:dt(s.options.stateFilter)},q=(0,ve.h4)().getCurrent();s.options.dashboardAlerts&&(Y.dashboardId=q?.id),Y.from=Ye.parse(q?.time.from).unix()*1e3,Y.to=Ye.parse(q?.time.to).unix()*1e3;const se=await(0,oe.i)().get("/api/annotations",Y,`alert-list-get-state-changes-${s.id}`),ce=at(s.options.sortOrder,se.map(fe=>({...fe,time:q?.formatDate(fe.time,"MMM D, YYYY HH:mm:ss"),stateModel:ae.Z.getStateDisplayModel(fe.newState),info:ae.Z.getAlertAnnotationInfo(fe)})));return T(ce.length===0?"No alerts in current time range":""),ce},[s.options.showOptions,s.options.maxItems,s.options.stateFilter.alerting,s.options.stateFilter.execution_error,s.options.stateFilter.no_data,s.options.stateFilter.ok,s.options.stateFilter.paused,s.options.stateFilter.pending,s.options.dashboardAlerts,s.options.sortOrder]),G=(0,Q.wW)(st);return o.createElement(_.$,{autoHeightMin:"100%",autoHeightMax:"100%"},o.createElement("div",{className:G.container},D&&o.createElement("div",{className:G.noAlertsMessage},D),o.createElement("section",null,o.createElement("ol",{className:G.alertRuleList},s.options.showOptions===xe.kx.Current?!B.loading&&B.value&&B.value.map(Y=>o.createElement("li",{className:G.alertRuleItem,key:`alert-${Y.id}`},o.createElement(pe.Z,{href:`${Y.url}?viewPanel=${Y.panelId}`,className:G.cardContainer},o.createElement(pe.Z.Heading,null,Y.name),o.createElement(pe.Z.Figure,{className:(0,F.cx)(G.alertRuleItemIcon,Y.stateModel.stateClass)},o.createElement(Re.J,{name:Y.stateModel.iconClass,size:"xl",className:G.alertIcon})),o.createElement(pe.Z.Meta,null,o.createElement("div",{className:G.alertRuleItemText},o.createElement("span",{className:Y.stateModel.stateClass},Y.stateModel.text),o.createElement("span",{className:G.alertRuleItemTime}," for ",Y.newStateDateAgo)))))):!W.loading&&W.value&&W.value.map(Y=>o.createElement("li",{className:G.alertRuleItem,key:`alert-${Y.id}`},o.createElement(pe.Z,{className:G.cardContainer},o.createElement(pe.Z.Heading,null,Y.alertName),o.createElement(pe.Z.Figure,{className:(0,F.cx)(G.alertRuleItemIcon,Y.stateModel.stateClass)},o.createElement(Re.J,{name:Y.stateModel.iconClass,size:"xl"})),o.createElement(pe.Z.Meta,null,o.createElement("span",{className:(0,F.cx)(G.alertRuleItemText,Y.stateModel.stateClass)},Y.stateModel.text),o.createElement("span",null,Y.time),Y.info&&o.createElement("span",{className:G.alertRuleItemInfo},Y.info)))))))))}function at(s,D){if(s===xe.As.Importance)return(0,ne.sortBy)(D,B=>ae.Z.alertStateSortScore[B.state||B.newState]);if(s===xe.As.TimeAsc)return(0,ne.sortBy)(D,B=>new Date(B.newStateDate||B.time));if(s===xe.As.TimeDesc)return(0,ne.sortBy)(D,B=>new Date(B.newStateDate||B.time)).reverse();const T=(0,ne.sortBy)(D,B=>(B.name||B.alertName).toLowerCase());return s===xe.As.AlphaDesc&&T.reverse(),T}function dt(s){return Object.entries(s).filter(([D,T])=>T).map(([D,T])=>D)}const st=s=>({cardContainer:(0,F.css)`
    padding: ${s.spacing(.5)} 0 ${s.spacing(.25)} 0;
    line-height: ${s.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,F.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,F.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,F.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${s.colors.background.secondary};
    padding: ${s.spacing(.5)} ${s.spacing(1)};
    border-radius: ${s.shape.radius.default};
    margin-bottom: ${s.spacing(.5)};
  `,alertRuleItemIcon:(0,F.css)`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${s.spacing(4)};
    padding: 0 ${s.spacing(.5)} 0 ${s.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:(0,F.css)`
    font-weight: ${s.typography.fontWeightBold};
    font-size: ${s.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:(0,F.css)`
    color: ${s.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,F.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,F.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,F.css)`
    margin-right: ${s.spacing(.5)};
  `}),Pt=s=>{const D={showOptions:s.options.showOptions??s.show??xe.kx.Current,maxItems:s.options.maxItems??s.limit??10,sortOrder:s.options.sortOrder??s.sortOrder??xe.As.AlphaAsc,dashboardAlerts:s.options.dashboardAlerts??s.onlyAlertsOnDashboard??!1,alertName:s.options.alertName??s.nameFilter??"",dashboardTitle:s.options.dashboardTitle??s.dashboardFilter??"",folderId:s.options.folderId??s.folderId,tags:s.options.tags??s.dashboardTags??[],stateFilter:s.options.stateFilter??s.stateFilter?.reduce((B,W)=>({...B,[W]:!0}),{})??{}};return parseFloat(s.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(W=>delete s[W]),D};var we=e(17330);function Le(s,D){return(0,we.ED)(s.state)===D}var Ke=(s=>(s.Firing="firing",s))(Ke||{}),ht=(s=>(s.Alerting="alerting",s.Pending="pending",s.Normal="inactive",s.NoData="nodata",s.Error="error",s))(ht||{});function xt(s,D){const T=(0,k.Zh)(s);return(0,k.eD)(D,T)}function lt(s,D){const{stateFilter:T,alertInstanceLabelFilter:B}=s;return(0,ne.isEmpty)(T)?D:D.filter(W=>(T.firing&&(Le(W,we.bj.Alerting)||Le(W,we.x_.Firing))||T.pending&&(Le(W,we.bj.Pending)||Le(W,we.x_.Pending))||T.noData&&Le(W,we.bj.NoData)||T.normal&&Le(W,we.bj.Normal)||T.error&&Le(W,we.bj.Error)||T.inactive&&Le(W,we.x_.Inactive))&&(B?xt(s.alertInstanceLabelFilter,W.labels):!0))}function Rt(s){return!(s.startsWith("__")&&s.endsWith("__"))}const Ut=s=>{const{onChange:D,id:T,defaultValue:B,dataSource:W}=s,G=(0,z.useDispatch)();(0,o.useEffect)(()=>{W?W&&G((0,$.y6)({rulesSourceName:W})):G((0,$.lB)())},[G,W]);const Y=(0,U._)(fe=>fe.promRules),q=(0,j.PE)(Y),se=(0,j.yR)(Y),ce=(0,o.useMemo)(()=>{if((0,ne.isEmpty)(Y))return[];if(!q)return[];const fe=Object.keys(Y).flatMap(Se=>Y[Se].result??[]).flatMap(Se=>Se.groups).flatMap(Se=>Se.rules.filter(_e=>_e.type===we.pz.Alerting)).flatMap(Se=>Se.alerts??[]).map(Se=>Object.keys(Se.labels??{})).flatMap(Se=>Se.filter(Rt));return(0,ne.uniq)(fe)},[q,Y]);return o.createElement(bt.NU,{id:T,isLoading:se,defaultValue:B,"aria-label":"group by label keys",placeholder:"Group by",prefix:o.createElement(Re.J,{name:"tag-alt"}),onChange:fe=>{D(fe.map(Se=>Se.value??""))},options:ce.map(fe=>({label:fe,value:fe}))})};var Xt=e(948),$n=e(45580),Mt=e(77014),yt=e(33155),At=e(84766),Ht=e(26753),tn=e(50820),gn=e(97125);function mn(s){return Object.entries(s).map(([D,T])=>`${D}=${T}`).sort()}function Tn(s){return Object.entries(s).map(([D,T])=>[D,T])}function ln(s){const D={};return s.forEach(T=>{D[T[0]]=T[1]}),D}function Wn(s){const D={};return s.forEach(T=>{T.key&&(D[T.key]=T.value)}),D}var On=e(94435),Nn=e(20584),ia=e(32735),da=e(98301);const Da="/api/v1/rule/test/grafana",ja="api/prometheus/grafana/api/v1/rules";function Na(s,D="yaml"){return`/api/v1/provisioning/alert-rules/${s}/export?format=${D}`}const Ha=Nn.C.injectEndpoints({endpoints:s=>({preview:s.mutation({query:({alertQueries:D,condition:T,customLabels:B,folder:W,alertName:G,alertUid:Y})=>({url:Da,data:{rule:{grafana_alert:{data:D,condition:T,no_data_state:"Alerting",title:G,uid:Y??"N/A"},for:"0s",labels:Wn(B),annotations:{}},folderUid:W.uid,folderTitle:W.title},method:"POST"})}),prometheusRulesByNamespace:s.query({query:({limitAlerts:D,identifier:T,filter:B,state:W,matcher:G})=>{const Y=new URLSearchParams;D&&Y.set("limit_alerts",String(D)),T&&((0,On.qE)(T)||(0,On.E4)(T))&&(Y.set("file",T.namespace),Y.set("rule_group",T.groupName));const q=(0,ia.hd)(Y,B);return{url:ja,params:(0,ia.Tb)(q,W,G)}},transformResponse:D=>(0,ia.lL)(D.data.groups,K.GC)}),prometheusRuleNamespaces:s.query({query:({ruleSourceName:D,namespace:T,groupName:B,ruleName:W})=>{const G={};return G.file=T,G.rule_group=B,G.rule_name=W,{url:`api/prometheus/${(0,K.gt)(D)}/api/v1/rules`,params:G}},transformResponse:(D,T,B)=>(0,ia.lL)(D.data.groups,B.ruleSourceName)}),rulerRules:s.query({query:({rulerConfig:D,filter:T})=>{const{path:B,params:W}=(0,da.IN)(D).rules(T);return{url:B,params:W}}}),rulerRuleGroup:s.query({query:({rulerConfig:D,namespace:T,group:B})=>{const{path:W,params:G}=(0,da.IN)(D).namespaceGroup(T,B);return{url:W,params:G}}}),exportRule:s.query({query:({uid:D,format:T})=>({url:Na(D,T),responseType:"text"})}),exportRuleGroup:s.query({query:({folderUid:D,groupName:T,format:B})=>({url:`/api/v1/provisioning/folder/${D}/rule-groups/${T}/export`,params:{format:B},responseType:"text"})}),exportRules:s.query({query:({format:D})=>({url:"/api/v1/provisioning/alert-rules/export",params:{format:D},responseType:"text"})}),exportReceiver:s.query({query:({receiverName:D,decrypt:T,format:B})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:B,decrypt:T,name:D},responseType:"text"})}),exportReceivers:s.query({query:({decrypt:D,format:T})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:T,decrypt:D},responseType:"text"})}),exportPolicies:s.query({query:({format:D})=>({url:"/api/v1/provisioning/policies/export/",params:{format:D},responseType:"text"})})})}),gt=({timeInMs:s,className:D,humanize:T})=>React.createElement("span",{className:D},Ft(s,T)),Ft=(s,D=!1)=>{const T=s/1e3;if(!D)return`${T.toFixed(1)}s`;const B=toDuration(T,"seconds"),W=B.hours(),G=B.minutes(),Y=B.seconds();return W?`${W}h ${G}m ${Y}s`:G?`${G}m ${Y}s`:`${Y}s`};function jt(s){return{dashboardUID:s.find(([D])=>D===H.q6.dashboardUID)?.[1],panelId:s.find(([D])=>D===H.q6.panelID)?.[1]}}function an(s){return(0,o.useMemo)(()=>Object.entries(s||{}).filter(([D,T])=>!!T.trim()),[s])}function cn(s){const D=new Map,{panelId:T,dashboardUID:B}=jt(s);return B&&D.set(H.q6.dashboardUID,(0,ot.RQ)(B)),B&&T&&D.set(H.q6.panelID,(0,ot.yM)(B,T)),D}var hn=e(67034);const rn=({className:s,label:D,horizontal:T,children:B,childrenWrapperClassName:W})=>{const G=(0,Q.wW)(un);return o.createElement("div",{className:(0,F.cx)(G.field,T?G.fieldHorizontal:G.fieldVertical,s)},o.createElement("div",null,D),o.createElement("div",{className:W},B))},un=s=>({fieldHorizontal:(0,F.css)`
    flex-direction: row;
    ${s.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:(0,F.css)`
    flex-direction: column;
  `,field:(0,F.css)`
    display: flex;
    margin: ${s.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${s.spacing(1)};
      font-size: ${s.typography.size.sm};
      font-weight: ${s.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${s.colors.text.secondary};
    }
  `});var nt=e(14687),Be=e(37546),et=e(14055),kt=e(60703);function nn(s){const D=useDispatch(),T=useUnifiedAlertingSelector(B=>B.folders);if(useEffect(()=>{s&&D(fetchFolderIfNotFetchedAction(s))},[D,s]),s){const B=T[s]||initialAsyncRequestState;return{folder:B.result,loading:B.loading}}return{loading:!1}}function Pn(s,D){const T=useUnifiedAlertingSelector(_e=>_e.dataSources),{currentData:B,isLoading:W}=featureDiscoveryApi.endpoints.discoverDsFeatures.useQuery({rulesSourceName:s}),G=D&&isGrafanaRulerRule(D)?D.grafana_alert.namespace_uid:void 0,Y=getRulesPermissions(s),{folder:q,loading:se}=useFolder(G);if(!D)return{isEditable:!1,isRemovable:!1,loading:!1};if(isGrafanaRulerRule(D)){if(!G)throw new Error(`Rule ${D.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!q)return{isEditable:!1,isRemovable:!1,loading:se};const _e=q.canSave,Ae=contextSrv.hasAccessInMetadata(Y.update,q,_e),He=contextSrv.hasAccessInMetadata(Y.delete,q,_e);return{isEditable:Ae,isRemovable:He,loading:se||W}}const ce=!!T[s]?.result?.rulerConfig||!!B?.rulerConfig,fe=contextSrv.hasPermission(Y.update),Se=contextSrv.hasPermission(Y.delete);return{isEditable:fe&&ce,isRemovable:Se&&ce,loading:W||T[s]?.loading}}const pn=(0,o.lazy)(()=>e.e(3634).then(e.bind(e,13634))),In=(0,o.lazy)(()=>e.e(473).then(e.bind(e,76644)));var Qn=(s=>(s.Loki="loki",s.Annotations="annotations",s))(Qn||{});function Fn(){const[s,D]=useState(!1),[T,B]=useState(),W=useStyles2(Ea),G=config.unifiedAlerting.alertStateHistoryBackend,Y=config.unifiedAlerting.alertStateHistoryPrimary,se=[G,Y].some(_e=>_e==="loki")?"loki":"annotations",ce=useCallback(()=>{B(void 0),D(!1)},[]),fe=useCallback(_e=>{B(_e),D(!0)},[]);return{StateHistoryModal:useMemo(()=>T?React.createElement(Modal,{isOpen:s,onDismiss:ce,closeOnBackdropClick:!0,closeOnEscape:!0,title:"State history",className:W.modal,contentClassName:W.modalContent},React.createElement(Suspense,{fallback:"Loading..."},se==="loki"&&React.createElement(In,{ruleUID:T.grafana_alert.uid}),se==="annotations"&&React.createElement(pn,{alertId:T.grafana_alert.id??""}))):null,[T,s,ce,se,W]),showStateHistoryModal:fe,hideStateHistoryModal:ce}}const Ea=s=>({modal:css`
    width: 80%;
    height: 80%;
    min-width: 800px;
  `,modalContent:css`
    height: 100%;
    width: 100%;
    padding: ${s.spacing(2)};
  `});var ut=e(30391),vt=e(33558);function Et(s){const{loading:D,error:T,value:B}=useAsync(()=>getPluginSettings(s,{showErrorAlert:!1})),W=B&&!T&&!D,G=B?.enabled;return D&&!B?{loading:!0}:!W||!G?{loading:!1,installed:!1}:{loading:D,installed:!0,settings:B}}var It=(s=>(s.Incident="grafana-incident-app",s.OnCall="grafana-oncall-app",s.MachineLearning="grafana-ml-app",s))(It||{});const en=({children:s,plugin:D,loadingComponent:T,notInstalledFallback:B})=>{const{loading:W,installed:G}=usePluginBridge(D);return W?T??null:G?React.createElement(React.Fragment,null,s):B??null};function Gt(s,D,T){const B=new URLSearchParams(T).toString();return`/a/${s}${D}`+(B?"?"+B:"")}const Ln=({title:s="",severity:D="",url:T=""})=>{const B=createBridgeURL(SupportedPlugin.Incident,"/incidents/declare",{title:s,severity:D,url:T}),{loading:W,installed:G,settings:Y}=usePluginBridge(SupportedPlugin.Incident);return React.createElement(React.Fragment,null,W===!0&&React.createElement(Button,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident"),G===!1&&React.createElement(Tooltip,{content:"Grafana Incident is not installed or is not configured correctly"},React.createElement(Button,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident")),Y&&React.createElement(LinkButton,{icon:"fire",size:"sm",type:"button",href:B},"Declare Incident"))};var jn=e(53721),zn=e(32840);function qn({identifier:s,isProvisioned:D,onDismiss:T}){const B=(0,Q.wW)(va),[W,G]=(0,o.useState)(D?"confirm":"redirect");if(W==="redirect"){const Y=`/alerting/new?copyFrom=${ut.$V(s)}`;return o.createElement(jn.l_,{to:Y,push:!0})}return o.createElement(zn.s,{isOpen:W==="confirm",title:"Copy provisioned alert rule",body:o.createElement("div",null,o.createElement("p",null,"The new rule will ",o.createElement("span",{className:B.bold},"NOT")," be marked as a provisioned rule."),o.createElement("p",null,"You will need to set a new evaluation group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI.")),confirmText:"Copy",onConfirm:()=>G("redirect"),onDismiss:T})}const Ia=o.forwardRef(({text:s,ruleIdentifier:D,isProvisioned:T,className:B},W)=>{const[G,Y]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(Z.zx,{title:"Copy",className:B,size:"sm",key:"clone",variant:"secondary",icon:"copy",onClick:()=>Y(!0),ref:W},s),G&&o.createElement(qn,{identifier:D,isProvisioned:T,onDismiss:()=>Y(!1)}))});Ia.displayName="CloneRuleButton";const va=s=>({bold:(0,F.css)`
    font-weight: ${s.typography.fontWeightBold};
  `}),aa=({rule:s,rulesSource:D,isViewMode:T})=>{const B=useStyles2(ma),{namespace:W,group:G,rulerRule:Y}=s,{StateHistoryModal:q,showStateHistoryModal:se}=useStateHistoryModal(),ce=useDispatch(),fe=useLocation(),Se=useAppNotification(),[_e,Ae]=useState(),He=isGrafanaRulesSource(D)?D:getAlertmanagerByUid(D.jsonData.alertmanagerUid)?.name,tt=contextSrv.hasPermission(AccessControlAction.DataSourcesExplore),$e=[],mt=[],Wt=()=>{if(_e&&_e.rulerRule){const Rn=ruleId.fromRulerRule(getRulesSourceName(_e.namespace.rulesSource),_e.namespace.name,_e.group.name,_e.rulerRule);ce(deleteRuleAction(Rn,{navigateTo:T?"/alerting/list":void 0})),Ae(void 0)}},wt=isFederatedRuleGroup(G),Ot=getRulesSourceName(D),on=isGrafanaRulerRule(s.rulerRule)&&!!s.rulerRule.grafana_alert.provenance,Vt=isAlertingRule(s.promRule)&&s.promRule.state===PromAlertingRuleState.Firing,sn=getRulesPermissions(Ot),Cn=contextSrv.hasPermission(sn.create),{isEditable:Dn,isRemovable:En}=useIsRuleEditable(Ot,Y),kn=ha(s),bn=()=>createShareLink(D,s),ra=fe.pathname+fe.search;if(isCloudRulesSource(D)&&tt&&!wt&&$e.push(React.createElement(LinkButton,{size:"sm",key:"explore",variant:"primary",icon:"chart-line",target:"__blank",href:createExploreLink(D,s.query)},"See graph")),s.annotations[Annotation.runbookURL]&&$e.push(React.createElement(LinkButton,{size:"sm",key:"runbook",variant:"primary",icon:"book",target:"__blank",href:textUtil.sanitizeUrl(s.annotations[Annotation.runbookURL])},"View runbook")),s.annotations[Annotation.dashboardUID]){const Rn=s.annotations[Annotation.dashboardUID];if(Rn){$e.push(React.createElement(LinkButton,{size:"sm",key:"dashboard",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(Rn)}`},"Go to dashboard"));const Sn=s.annotations[Annotation.panelID];Sn&&$e.push(React.createElement(LinkButton,{size:"sm",key:"panel",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(Rn)}?viewPanel=${encodeURIComponent(Sn)}`},"Go to panel"))}}if(kn&&He&&$e.push(React.createElement(LinkButton,{size:"sm",key:"silence",icon:"bell-slash",target:"__blank",href:makeRuleBasedSilenceLink(He,s)},"Silence")),isGrafanaRulerRule(s.rulerRule)&&$e.push(React.createElement(Fragment,{key:"history"},React.createElement(Button,{size:"sm",icon:"history",onClick:()=>isGrafanaRulerRule(s.rulerRule)&&se(s.rulerRule)},"Show state history"),q)),Vt&&ta()&&$e.push(React.createElement(Fragment,{key:"declare-incident"},React.createElement(DeclareIncident,{title:s.name,url:bn()}))),T&&Y){const Rn=getRulesSourceName(D),Sn=ruleId.fromRulerRule(Rn,W.name,G.name,Y);if(Dn&&!wt&&(mt.push(React.createElement(ClipboardButton,{key:"copy",icon:"copy",onClipboardError:Jn=>{Se.error("Error while copying URL",Jn)},size:"sm",getText:bn},"Copy link to rule")),!on)){const Jn=urlUtil.renderUrl(`${config.appSubUrl}/alerting/${encodeURIComponent(ruleId.stringifyIdentifier(Sn))}/edit`,{returnTo:ra});mt.push(React.createElement(LinkButton,{size:"sm",key:"edit",variant:"secondary",icon:"pen",href:Jn},"Edit"))}Cn&&!wt&&mt.push(React.createElement(CloneRuleButton,{key:"clone",text:"Copy",ruleIdentifier:Sn,isProvisioned:on})),En&&!wt&&!on&&mt.push(React.createElement(Button,{size:"sm",type:"button",key:"delete",variant:"secondary",icon:"trash-alt",onClick:()=>Ae(s)},"Delete"))}return $e.length||mt.length?React.createElement(React.Fragment,null,React.createElement("div",{className:B.wrapper},React.createElement(HorizontalGroup,{width:"auto"},$e.length?$e:React.createElement("div",null)),React.createElement(HorizontalGroup,{width:"auto"},mt.length?mt:React.createElement("div",null))),!!_e&&React.createElement(ConfirmModal,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:Wt,onDismiss:()=>Ae(void 0)})):null};function ta(){const s=config.buildInfo,D=s.edition===GrafanaEdition.OpenSource,T=s.env==="development";return!D||T}function ha(s){const D=isGrafanaRulerRule(s.rulerRule),{useGetAlertmanagerChoiceStatusQuery:T}=alertmanagerApi,{currentData:B,isLoading:W}=T(void 0,{skip:!D});if(!D||W)return!1;const G=contextSrv.hasPermission(AccessControlAction.AlertingInstanceCreate),Y=B?.alertmanagersChoice===AlertmanagerChoice.External,q=B?.alertmanagersChoice===AlertmanagerChoice.All;return G&&(!Y||q)}const ma=s=>({wrapper:css`
    padding: ${s.spacing(2)} 0;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;
    border-bottom: solid 1px ${s.colors.border.medium};
  `});var _a=e(28425),Qa=e(69865),Xa=e(12608),ts=e(44351),ga=(s=>(s.Delimiter="delimiter",s.Keyword="keyword",s.Function="type.identifier",s.String="string",s.Variable="variable.name",s.Number="number",s.Comment="comment",s.Operator="operator",s.Identifier="idenfifier",s))(ga||{}),es=(s=>(s.toUpper="toUpper",s.toLower="toLower",s.title="title",s.join="join",s.match="match",s.safeHtml="safeHtml",s.reReplaceAll="reReplaceAll",s.stringSlice="stringSlice",s))(es||{});const bs=Object.values(es),Za=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],cs=["define","if","else","end","range","break","continue","template","block","with"],ds={defaultToken:"",keywords:cs,functions:[...Za,...bs],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},gr={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]},Vs=["$",".",'"'];function Xs({input:s,delimiter:D=["{{","}}"]}){const T=(0,Q.wW)(Ya),[B,W]=D,G=new RegExp(`(?<before>.*?)(${B}(?<token>.*?)${W}|$)`,"gm"),Y=s.split(`
`),q=[];return Y.forEach((se,ce)=>{Array.from(se.matchAll(G)).forEach((Se,_e)=>{const Ae=Se.groups?.before,He=Se.groups?.token?.trim();if(Ae&&q.push(o.createElement("span",{key:`${ce}-${_e}-before`},Ae)),He){const tt=$t(He),$e=tt==="variable"?He:"",mt=`${B} ${He} ${W}`;q.push(o.createElement(qs,{key:`${ce}-${_e}-token`,content:mt,type:tt,description:$e}))}}),q.push(o.createElement("br",{key:`${ce}-newline`}))}),o.createElement("span",{className:T.wrapper},q)}var rr=(s=>(s.Variable="variable",s.Function="function",s.Keyword="keyword",s.Unknown="unknown",s))(rr||{});function qs({content:s,description:D,type:T}){const B=(0,Q.wW)(Ya),W=!T;return o.createElement(ts.z,{placement:"top-start",disabled:W,content:o.createElement("div",{className:B.hoverTokenItem},o.createElement(Xa.C,{tabIndex:0,text:o.createElement(o.Fragment,null,T),color:"blue"})," ",D&&o.createElement("code",null,D))},o.createElement("span",null,o.createElement(Xa.C,{tabIndex:0,className:B.token,text:s,color:"blue"})))}function or(s){return Vs.some(D=>s.startsWith(D))}function oa(s){return cs.some(D=>s.startsWith(D))}function Ra(s){return Za.some(D=>s.startsWith(D))}function $t(s){let D;return or(s)?D="variable":oa(s)?D="keyword":Ra(s)?D="function":D="unknown",D}const Ya=s=>({wrapper:(0,F.css)`
    white-space: pre-wrap;
  `,token:(0,F.css)`
    cursor: default;
    font-family: ${s.typography.fontFamilyMonospace};
  `,popover:(0,F.css)`
    border-radius: ${s.shape.radius.default};
    box-shadow: ${s.shadows.z3};
    background: ${s.colors.background.primary};
    border: 1px solid ${s.colors.border.medium};

    padding: ${s.spacing(1)};
  `,hoverTokenItem:(0,F.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${s.spacing(1)};
  `}),Ks=({children:s,className:D})=>{const T=(0,Q.wW)(As);return o.createElement("div",{className:(0,F.cx)(T.wrapper,D)},s)},As=s=>({wrapper:(0,F.css)`
    background-color: ${s.components.panel.background};
    border: solid 1px ${s.components.input.borderColor};
    border-radius: ${s.shape.radius.default};
    padding: ${s.spacing(.5,1)};
    font-family: ${s.typography.fontFamilyMonospace};
  `}),er=["message","description"],ir=({annotationKey:s,value:D,valueLink:T})=>{const B=H.vY[s]?o.createElement(Qa.u,{content:s,placement:"top",theme:"info"},o.createElement("span",null,H.vY[s])):s;return o.createElement(rn,{label:B,horizontal:!0},o.createElement(ws,{annotationKey:s,value:D,valueLink:T}))},ws=({annotationKey:s,value:D,valueLink:T})=>{const B=(0,Q.wW)(lr),W=er.includes(s),G=D&&D.startsWith("http"),Y=o.createElement(Xs,{input:D,delimiter:["{{","}}"]});return T?o.createElement("a",{href:_a.QX.sanitizeUrl(T),className:B.link},D):W?o.createElement(Ks,{className:B.well},Y):G?o.createElement("a",{href:_a.QX.sanitizeUrl(D),target:"__blank",className:B.link},D):o.createElement(o.Fragment,null,Y)},lr=s=>({well:(0,F.css)`
    word-break: break-word;
  `,link:(0,F.css)`
    word-break: break-all;
    color: ${s.colors.primary.text};
  `});function Ls(s){const D=useStyles2(Vr),{annotations:T}=s,B=useAnnotationLinks(T);return T.length===0?null:React.createElement("div",{className:D.annotations},T.map(([W,G])=>React.createElement(AnnotationDetailsField,{key:W,annotationKey:W,value:G,valueLink:B.get(W)})))}const Vr=()=>({annotations:css`
    margin-top: 46px;
  `});var Xr=e(29409);function Or(s){const{rulesSource:D,rule:T}=s,B=useStyles2(Nt),W=useMemo(()=>{if(isCloudRulesSource(D))return[{name:D.name,icon:D.meta.info.logos.small}];if(isGrafanaRulerRule(T.rulerRule)){const{data:G}=T.rulerRule.grafana_alert,Y=G.reduce((q,se)=>{const ce=getDataSourceSrv().getInstanceSettings(se.datasourceUid);return!ce||ce.uid===ExpressionDatasourceUID||(q[ce.name]={name:ce.name,icon:ce.meta.info.logos.small}),q},{});return Object.values(Y)}return[]},[T,D]);return W.length===0?null:React.createElement(DetailsField,{label:"Data source"},W.map(({name:G,icon:Y},q)=>React.createElement("div",{key:G},Y&&React.createElement(React.Fragment,null,React.createElement("img",{alt:`${G} datasource logo`,className:B.dataSourceIcon,src:Y})," "),G)))}function Nt(s){const D=s.spacing(2);return{dataSourceIcon:css`
      width: ${D};
      height: ${D};
    `}}var Jt=e(10963),Yt=e.n(Jt),vn=e(19661),An=e(88553),xn=e(49403);const Un=({language:s,expr:D})=>{const T=useMemo(()=>[SlatePrism({onlyIn:W=>"type"in W&&W.type==="code_block",getSyntax:()=>s},{...prismLanguages,[s]:s==="logql"?LogqlSyntax:PromqlSyntax})],[s]),B=useMemo(()=>makeValue(D),[D]);return React.createElement(Editor,{"data-testid":"expression-editor",plugins:T,value:B})},xa=({expression:s,rulesSource:D})=>{const T=useStyles2(za);return React.createElement(Well,{className:cx(T.well,"slate-query-field")},isCloudRulesSource(D)?React.createElement(Un,{expr:s,language:D.type===DataSourceType.Loki?"logql":"promql"}):s)},za=s=>({well:css`
    font-family: ${s.typography.fontFamilyMonospace};
  `});function is(s){const{annotations:D,rulesSource:T,rule:B}=s,W=$a();return isCloudRulesSource(T)?React.createElement(DetailsField,{label:"Expression",horizontal:!0,className:cx({[W.exprRow]:!!D.length})},React.createElement(Expression,{expression:B.query,rulesSource:T})):null}const $a=()=>({exprRow:css`
    margin-bottom: 46px;
  `});var Ta=e(79517);const as=({className:s,onFilterChange:D,defaultQueryString:T})=>{const B=useStyles2(la),W=useMemo(()=>debounce(Y=>{logInfo(LogMessages.filterByLabel);const q=Y.currentTarget;D(q.value)},600),[D]);useEffect(()=>W.cancel(),[W]);const G=React.createElement(Icon,{name:"search"});return React.createElement("div",{className:s},React.createElement(Label,null,React.createElement(Stack,{gap:.5},React.createElement("span",null,"Search by label"),React.createElement(Tooltip,{content:React.createElement("div",null,"Filter alerts using label querying, ex:",React.createElement("pre",null,'{severity="critical", instance=~"cluster-us-.+"}'))},React.createElement(Icon,{className:B.icon,name:"info-circle",size:"sm"})))),React.createElement(Input,{placeholder:"Search",defaultValue:T,onChange:W,"data-testid":"search-query-input",prefix:G,className:B.inputWidth}))},la=s=>({icon:css`
    margin-right: ${s.spacing(.5)};
  `,inputWidth:css`
    width: 340px;
    flex-grow: 0;
  `}),Wa=({className:s,onStateFilterChange:D,stateFilter:T,filterType:B,itemPerStateStats:W})=>{const G=useStyles2(ss),Y=Se=>function(){return W&&W[Se]?React.createElement(Tag,{name:W[Se].toFixed(0),colorIndex:9,className:G.tag}):null},q=Object.values(GrafanaAlertState).map(Se=>({label:Se,value:Se,component:Y(Se)})),ce=[PromAlertingRuleState.Firing,PromAlertingRuleState.Pending].map(Se=>({label:capitalize(Se),value:Se,component:Y(Se)})),fe=B==="grafana"?q:ce;return React.createElement("div",{className:s,"data-testid":"alert-instance-state-filter"},React.createElement(Label,null,"State"),React.createElement(RadioButtonGroup,{options:fe,value:T,onChange:D,onClick:Se=>{Se===T&&D(void 0)}}))};function ss(s){return{tag:css`
      font-size: 11px;
      font-weight: normal;
      padding: ${s.spacing(.25,.5)};
      vertical-align: middle;
      margin-left: ${s.spacing(.5)};
    `}}var Ps=e(36822),tr=e(13245);const Bs=({instance:s})=>{const D=an(s.annotations),T=cn(D);return o.createElement("div",null,s.value&&o.createElement(rn,{label:"Value",horizontal:!0},s.value),D.map(([B,W])=>o.createElement(ir,{key:B,annotationKey:B,value:W,valueLink:T.get(B)})))};var Ms=e(78247);const Rr=({instances:s,pagination:D,footerRow:T})=>{const B=(0,o.useMemo)(()=>s.length>1?(0,Ps.FT)(s.map(G=>G.labels)):{},[s]),W=(0,o.useMemo)(()=>s.map(G=>({data:{...G,commonLabels:B},id:(0,On.pB)(G)})),[B,s]);return o.createElement(tr.t,{cols:br,isExpandable:!0,items:W,renderExpandedContent:({data:G})=>o.createElement(Bs,{instance:G}),pagination:D,footerRow:T})},br=[{id:"state",label:"State",renderCell:({data:{state:s}})=>o.createElement(Ms.l,{state:s}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{labels:s,commonLabels:D}})=>o.createElement(me,{labels:s,commonLabels:D,size:"sm"})},{id:"created",label:"Created",renderCell:({data:{activeAt:s}})=>o.createElement(o.Fragment,null,s.startsWith("0001")?"-":(0,Tt.CQ)(s).format("YYYY-MM-DD HH:mm:ss")),size:"150px"}],si={recording:0,alerting:0,[we.x_.Pending]:0,[we.x_.Inactive]:0,paused:0,error:0,nodata:0},fo=({namespaces:s})=>{const D={...si};s.forEach(({groups:G})=>{G.forEach(Y=>{const q=omitBy(Y.totals,isUndefined);for(let se in q)D[se]+=q[se]})});const T=Ar(D),B=!!T.length,W=sum(Object.values(D));return T.unshift(React.createElement(Fragment,{key:"total"},W," ",pluralize("rule",W))),React.createElement(Stack,{direction:"row"},B&&React.createElement("div",null,React.createElement(Stack,{gap:.5},T)))},pr=({group:s})=>{const D=s.totals,T=s?.interval,B=Ar(D),W=!!B.length;return React.createElement(Stack,{direction:"row"},W&&React.createElement("div",null,React.createElement(Stack,{gap:.5},B)),T&&React.createElement(React.Fragment,null,React.createElement("div",null,"|"),React.createElement(Badge,{text:T,icon:"clock-nine",color:"blue"})))};function Ar(s){const D=[];return s[AlertInstanceTotalState.Alerting]&&D.push(React.createElement(Badge,{color:"red",key:"firing",text:`${s[AlertInstanceTotalState.Alerting]} firing`})),s.error&&D.push(React.createElement(Badge,{color:"red",key:"errors",text:`${s.error} errors`})),s.nodata&&D.push(React.createElement(Badge,{color:"blue",key:"nodata",text:`${s.nodata} no data`})),s[AlertInstanceTotalState.Pending]&&D.push(React.createElement(Badge,{color:"orange",key:"pending",text:`${s[AlertInstanceTotalState.Pending]} pending`})),s[AlertInstanceTotalState.Normal]&&s.paused&&D.push(React.createElement(Badge,{color:"green",key:"paused",text:`${s[AlertInstanceTotalState.Normal]} normal (${s.paused} paused)`})),s[AlertInstanceTotalState.Normal]&&!s.paused&&D.push(React.createElement(Badge,{color:"green",key:"inactive",text:`${s[AlertInstanceTotalState.Normal]} normal`})),s.recording&&D.push(React.createElement(Badge,{color:"purple",key:"recording",text:`${s.recording} recording`})),D}function xr(s){const D=useStyles2(ct),{onClick:T,stats:B}=s;return React.createElement("div",{className:D.footerRow},React.createElement("div",null,"Showing ",B.visibleItemsCount," out of ",B.totalItemsCount," instances"),React.createElement(Button,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:T},"Show all ",B.totalItemsCount," alert instances"))}function Oe(s){const D=useHistory(),{rule:{promRule:T,namespace:B,instanceTotals:W},itemsDisplayLimit:G=Number.POSITIVE_INFINITY,pagination:Y,enableFiltering:q=!1}=s,[se,ce]=useState(),[fe,Se]=useState(),[_e]=useState(Math.floor(Math.random()*100)),Ae=`queryString-${_e}`,He=useStyles2(ct),tt=isGrafanaRulesSource(B.rulesSource)?GRAFANA_RULES_SOURCE_NAME:"prometheus",$e=useMemo(()=>isAlertingRule(T)&&T.alerts?.length?ke(se,fe,sortAlerts(SortOrder.Importance,T.alerts)):[],[T,fe,se]);if(!isAlertingRule(T))return null;const mt=$e.slice(0,G),Wt=countBy(T.alerts,bn=>mapStateWithReasonToBaseState(bn.state)),wt=sum(Object.values(W)),Ot=wt-mt.length,on={totalItemsCount:wt,visibleItemsCount:mt.length},Vt=createViewLink(B.rulesSource,s.rule,location.pathname+location.search),sn=getComponentsFromStats(W),En=q?()=>Se(void 0):()=>D.push(Vt),kn=Ot?React.createElement(xr,{stats:on,onClick:En}):void 0;return React.createElement(DetailsField,{label:"Matching instances",horizontal:!0},q&&React.createElement("div",{className:cx(He.flexRow,He.spaceBetween)},React.createElement("div",{className:He.flexRow},React.createElement(MatcherFilter,{className:He.rowChild,key:Ae,defaultQueryString:se,onFilterChange:bn=>ce(bn)}),React.createElement(AlertInstanceStateFilter,{className:He.rowChild,filterType:tt,stateFilter:fe,onStateFilterChange:Se,itemPerStateStats:Wt}))),!q&&React.createElement("div",{className:He.stats},sn),React.createElement(AlertInstancesTable,{instances:mt,pagination:Y,footerRow:kn}))}function ke(s,D,T){let B=[...T];if(s){const W=parseMatchers(s||"");B=B.filter(({labels:G})=>labelsMatchMatchers(G,W))}return D&&(B=B.filter(W=>mapStateWithReasonToBaseState(W.state)===D)),B}const ct=s=>({flexRow:css`
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      width: 100%;
      flex-wrap: wrap;
      margin-bottom: ${s.spacing(1)};
    `,spaceBetween:css`
      justify-content: space-between;
    `,rowChild:css`
      margin-right: ${s.spacing(1)};
    `,footerRow:css`
      display: flex;
      flex-direction: column;
      gap: ${s.spacing(1)};
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,instancesContainer:css`
      margin-bottom: ${s.spacing(2)};
    `,stats:css`
      display: flex;
      gap: ${s.spacing(1)};
      padding: ${s.spacing(1,0)};
    `}),Dt=15,Kt=({rule:s})=>{const D=useStyles2(Bn),{namespace:{rulesSource:T}}=s,B=useCleanAnnotations(s.annotations);return React.createElement("div",null,React.createElement(RuleDetailsActionButtons,{rule:s,rulesSource:T,isViewMode:!1}),React.createElement("div",{className:D.wrapper},React.createElement("div",{className:D.leftSide},React.createElement(fn,{rule:s}),!!s.labels&&!!Object.keys(s.labels).length&&React.createElement(DetailsField,{label:"Labels",horizontal:!0},React.createElement(AlertLabels,{labels:s.labels})),React.createElement(RuleDetailsExpression,{rulesSource:T,rule:s,annotations:B}),React.createElement(RuleDetailsAnnotations,{annotations:B})),React.createElement("div",{className:D.rightSide},React.createElement(RuleDetailsDataSources,{rulesSource:T,rule:s}))),React.createElement(RuleDetailsMatchingInstances,{rule:s,itemsDisplayLimit:Dt}))},fn=({rule:s})=>{let D,T=s.group.interval,B=s.promRule?.lastEvaluation,W=s.promRule?.evaluationTime;return isRecordingRulerRule(s.rulerRule)||(D=s.rulerRule?.for),React.createElement(React.Fragment,null,T&&React.createElement(DetailsField,{label:"Evaluate",horizontal:!0},"Every ",T),D&&React.createElement(DetailsField,{label:"For",horizontal:!0},D),B&&!isNullDate(B)&&React.createElement(DetailsField,{label:"Last evaluation",horizontal:!0},React.createElement(Tooltip,{placement:"top",content:`${dateTimeFormat(B,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info"},React.createElement("span",null,`${dateTime(B).locale("en").fromNow(!0)} ago`))),B&&!isNullDate(B)&&W!==void 0&&React.createElement(DetailsField,{label:"Evaluation time",horizontal:!0},React.createElement(Tooltip,{placement:"top",content:`${W}s`,theme:"info"},React.createElement("span",null,Time({timeInMs:W*1e3,humanize:!0})))))},Bn=s=>({wrapper:css`
    display: flex;
    flex-direction: row;

    ${s.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,leftSide:css`
    flex: 1;
  `,rightSide:css`
    ${s.breakpoints.up("md")} {
      padding-left: 90px;
      width: 300px;
    }
  `});function Hn(s,D){const T=(0,U._)(Y=>Y.promRules),B=(0,U._)(Y=>Y.rulerRules),W=(0,o.useRef)({}),G=(0,o.useMemo)(()=>{if(s){const Y=(0,K.o_)(s);if(!Y)throw new Error(`Unknown rules source: ${s}`);return[Y]}return(0,K.h_)()},[s]);return(0,o.useMemo)(()=>G.map(Y=>{const q=(0,K.jq)(Y)?Y.name:Y,se=B[q]?.result;let ce=T[q]?.result;q===K.GC&&D&&(ce=D);const fe=W.current[q];if(fe&&fe.promRules===ce&&fe.rulerRules===se)return fe.result;const Se={};Object.entries(se||{}).forEach(([Ae,He])=>{const tt={rulesSource:Y,name:Ae,groups:[]};Se[Ae]=tt,Ns(tt,He)}),ce?.forEach(({name:Ae,groups:He})=>{const tt=Se[Ae]=Se[Ae]||{rulesSource:Y,name:Ae,groups:[]};js(tt,He)});const _e=Object.values(Se);return W.current[q]={promRules:ce,rulerRules:se,result:_e},_e}).flat(),[T,B,G,D])}function na(s,D,T){const B={};return Object.entries(T||{}).forEach(([W,G])=>{const Y={rulesSource:s,name:W,groups:[]};B[W]=Y,Ns(Y,G)}),D?.forEach(({name:W,groups:G})=>{const Y=B[W]=B[W]||{rulesSource:s,name:W,groups:[]};js(Y,G)}),Object.values(B)}function sa(s,D,T){const B={rulesSource:s,name:D.name,groups:[]};return Ns(B,T),js(B,D.groups),B.groups.forEach(W=>{W.rules=W.rules.filter(G=>G.promRule)}),B}function Sa(s,D,T){return Ns(s,T),js(s,D),s}function La(s){return s.map(D=>{const T={...D,groups:[]};return T.groups.push({name:"default",rules:ks(D.groups.flatMap(B=>B.rules)),totals:go(D.groups)}),T})}function ks(s){return s.sort((D,T)=>D.name.localeCompare(T.name))}function Ns(s,D=[]){s.groups=D.map(T=>{const B=T.rules.filter(Y=>(0,On.yF)(Y)).length,W=T.rules.filter(Y=>(0,On.Pc)(Y)&&Y.grafana_alert.is_paused).length,G={name:T.name,interval:T.interval,source_tenants:T.source_tenants,rules:[],totals:{paused:W,recording:B}};return G.rules=T.rules.map(Y=>Ko(Y,s,G)),G})}function js(s,D){const T=new Map;s.groups.forEach(B=>T.set(B.name,B)),D.forEach(B=>{let W=T.get(B.name);W||(W={name:B.name,rules:[],totals:Sr(B)},s.groups.push(W),T.set(B.name,W)),W.totals={...W.totals,...Sr(B)};const G=new Map;W.rules.forEach(Y=>{const q=G.get(Y.name);q?q.push(Y):G.set(Y.name,[Y])}),(B.rules??[]).forEach(Y=>{const q=wr(Y,G,s.rulesSource);q?(q.promRule=Y,q.instanceTotals=(0,On.x_)(Y)?Lr(Y):{},q.filteredInstanceTotals=(0,On.x_)(Y)?Fs(Y):{}):W.rules.push(Kr(Y,s,W))})})}function Lr(s){const D=(0,ne.countBy)(s.alerts,"state");if(s.totals){const{normal:T,...B}=s.totals;return{...B,inactive:T}}return{alerting:D[ht.Alerting],pending:D[ht.Pending],inactive:D[ht.Normal],nodata:D[ht.NoData],error:D[ht.Error]+D.err}}function Fs(s){if(s.totalsFiltered){const{normal:D,...T}=s.totalsFiltered;return{...T,inactive:D}}return{}}function Sr(s){if(s.totals){const{firing:W,...G}=s.totals;return{...G,alerting:W}}const D=(0,ne.countBy)(s.rules,W=>(0,On.x_)(W)&&W.state),T=(0,ne.countBy)(s.rules,W=>W.health),B=s.rules.filter(W=>(0,On.OP)(W)).length;return{alerting:D[we.x_.Firing],error:T.error,nodata:T.nodata,inactive:D[we.x_.Inactive],pending:D[we.x_.Pending],recording:B}}function go(s){const D={};return s.forEach(T=>{const B=T.totals;Object.entries(B).forEach(([W,G])=>{D[W]||(D[W]=0),D[W]+=G})}),D}function Kr(s,D,T){return{name:s.name,query:s.query,labels:s.labels||{},annotations:(0,On.x_)(s)?s.annotations||{}:{},promRule:s,namespace:D,group:T,instanceTotals:(0,On.x_)(s)?Lr(s):{},filteredInstanceTotals:(0,On.x_)(s)?Fs(s):{}}}function Ko(s,D,T){return(0,On.cG)(s)?{name:s.alert,query:s.expr,labels:s.labels||{},annotations:s.annotations||{},rulerRule:s,namespace:D,group:T,instanceTotals:{},filteredInstanceTotals:{}}:(0,On.yF)(s)?{name:s.record,query:s.expr,labels:s.labels||{},annotations:{},rulerRule:s,namespace:D,group:T,instanceTotals:{},filteredInstanceTotals:{}}:{name:s.grafana_alert.title,query:"",labels:s.labels||{},annotations:s.annotations||{},rulerRule:s,namespace:D,group:T,instanceTotals:{},filteredInstanceTotals:{}}}function wr(s,D,T){const B=D.get(s.name);if(!B)return;if((0,K.HY)(T))return B[0];const W=B.find(Y=>!Y.promRule&&po(Y,s,!0));if(W)return W;const G=B.find(Y=>!Y.promRule&&po(Y,s,!1));if(G)return G}function po(s,D,T=!0){return s.name===D.name?(0,ne.isEqual)([T?ko(s.query):"",s.labels,s.annotations],[T?ko(D.query):"",D.labels||{},(0,On.x_)(D)?D.annotations||{}:{}]):!1}function ko(s){return s.length>1&&s[0]==="("&&s[s.length-1]===")"&&(s=s.slice(1,-1)),s=s.replace(/\s|\n/g,""),s.split("").sort().join("")}var ri=e(91085),zs=e(74602);const kr=({alerts:s,options:D,grafanaTotalInstances:T,handleInstancesLimit:B,limitInstances:W,grafanaFilteredInstancesTotal:G})=>{const Y=D.groupMode===xe.LM.Custom?!0:D.showInstances,[q,se]=(0,o.useState)(Y),ce=(0,Q.wW)(bc),fe=(0,Q.wW)(Z.gN),Se=(0,o.useCallback)(()=>{se(ra=>!ra)},[]),_e=(0,o.useMemo)(()=>lt(D,(0,ot.Zl)(D.sortOrder,s))??[],[s,D]),Ae=T!==void 0,He=T&&G?T-G:0,tt=s.length-_e.length,$e=Ae?He:tt,mt=_e.length>0,Wt=mt?Se:ne.noop;(0,o.useEffect)(()=>{_e.length===0&&se(!1)},[_e]);const wt=async()=>{B&&(B(!1),se(!0))},Ot=async()=>{B&&(B(!0),se(!0))},on=W?G:_e.length,Vt=_e.length,sn=Ae?on:Vt,Cn=W?`Showing ${Dt} of ${T} instances`:`Showing all ${T} instances`,Dn=W?"View all instances":`Limit the result to ${Dt} instances`,En=T&&Dt===_e.length&&T>_e.length,kn=T&&Dt<_e.length&&!W,bn=En||kn?o.createElement("div",{className:ce.footerRow},o.createElement("div",null,Cn),o.createElement(Z.zx,{size:"sm",variant:"secondary",onClick:W?wt:Ot},Dn)):void 0;return o.createElement("div",null,D.groupMode===xe.LM.Default&&o.createElement("button",{className:(0,F.cx)(fe,mt?ce.clickable:""),onClick:()=>Wt()},mt&&o.createElement(Re.J,{name:q?"angle-down":"angle-right",size:"md"}),o.createElement("span",null,`${sn} ${Pe()("instance",sn)}`),$e>0&&o.createElement("span",null,", ",`${$e} hidden by filters`)),q&&o.createElement(Rr,{instances:_e,pagination:{itemsPerPage:2*zs.gN},footerRow:bn}))},bc=s=>({clickable:(0,F.css)`
    cursor: pointer;
  `,footerRow:(0,F.css)`
    display: flex;
    flex-direction: column;
    gap: ${s.spacing(1)};
    justify-content: space-between;
    align-items: center;
    width: 100%;
  `}),qr="__ungrouped__",xc=({rules:s,options:D})=>{const T=(0,Q.wW)(ii),B=D.groupBy,W=(0,o.useMemo)(()=>{const G=new Map,Y=ce=>B?Sc(ce,B):!0;s.forEach(ce=>{const fe=(0,On.Re)(ce),Se=Y(ce);(fe?.alerts??[]).forEach(_e=>{const Ae=Se?ul(B,_e.labels):qr,He=G.get(Ae)??[];G.set(Ae,[...He,_e])})});const q=G.get(qr)??[];return G.delete(qr),G.set(qr,q),Array.from(G.entries()).reduce((ce,[fe,Se])=>{const _e=lt(D,Se);return _e.length>0&&ce.set(fe,_e),ce},new Map)},[B,s,D]);return o.createElement(o.Fragment,null,Array.from(W).map(([G,Y])=>o.createElement("li",{className:T.alertRuleItem,key:G,"data-testid":G},o.createElement("div",null,o.createElement("div",{className:T.customGroupDetails},o.createElement("div",{className:T.alertLabels},G!==qr&&ml(G).map(([q,se])=>o.createElement(ri.i,{key:q,labelKey:q,value:se})),G===qr&&"No grouping")),o.createElement(kr,{alerts:Y,options:D})))))};function ul(s,D){return new URLSearchParams(s.map(T=>[T,D[T]])).toString()}function ml(s){return[...new URLSearchParams(s)]}function Sc(s,D){const T=(0,On.Re)(s);return D.every(B=>(T?.alerts??[]).some(W=>W.labels[B]))}const fl=xc;var gl=e(12573),pl=e(27366);const hl=()=>o.createElement("span",{className:(0,F.css)`
      flex: 1;
    `});var Li=e(24597);function zo(s){return Object.values(s).filter(D=>D!==void 0).reduce((D,T)=>D+T,0)}const Cc=({rules:s,options:D,handleInstancesLimit:T,limitInstances:B,hideViewRuleLinkText:W})=>{const G=(0,Q.wW)(ii),Y=(0,Q.wW)(Dc),{href:q}=(0,gl.Z)(),se=s.length<=D.maxItems?s:s.slice(0,D.maxItems);return o.createElement(o.Fragment,null,o.createElement("ol",{className:G.alertRuleList},se.map((ce,fe)=>{const{namespaceName:Se,groupName:_e,dataSourceName:Ae}=ce,He=(0,On.x_)(ce.promRule)?ce.promRule:void 0,tt=(0,On.ub)(He),$e=(0,ut.Yd)(ce.dataSourceName,ce),mt=(0,ut.$V)($e),Wt=ce.dataSourceName===K.GC?zo(ce.instanceTotals):void 0,wt=ce.dataSourceName===K.GC?zo(ce.filteredInstanceTotals):void 0,Ot=(0,Li.u)(`/alerting/${encodeURIComponent(Ae)}/${encodeURIComponent(mt)}/view`,{returnTo:q??""});return He?o.createElement("li",{className:G.alertRuleItem,key:`alert-${Se}-${_e}-${ce.name}-${fe}`},o.createElement("div",{className:Y.icon},o.createElement(Re.J,{name:ae.Z.getStateDisplayModel(He.state).iconClass,className:Y[(0,On.Aq)(He.state)],size:"lg"})),o.createElement("div",{className:G.alertNameWrapper},o.createElement("div",{className:G.instanceDetails},o.createElement(pl.K,{direction:"row",gap:1,wrap:!1},o.createElement("div",{className:G.alertName,title:ce.name},ce.name),o.createElement(hl,null),Ot&&o.createElement("a",{href:Ot,target:"__blank",className:G.link,rel:"noopener","aria-label":"View alert rule"},o.createElement("span",{className:(0,F.cx)({[G.hidden]:W})},"View alert rule"),o.createElement(Re.J,{name:"external-link-alt",size:"sm"}))),o.createElement("div",{className:G.alertDuration},o.createElement("span",{className:Y[(0,On.Aq)(He.state)]},(0,On.SS)(He.state))," ",tt&&He.state!==we.x_.Inactive&&o.createElement(o.Fragment,null,"for"," ",o.createElement("span",null,(0,J.vT)({start:tt,end:Date.now()}))))),o.createElement(kr,{alerts:He.alerts??[],options:D,grafanaTotalInstances:Wt,grafanaFilteredInstancesTotal:wt,handleInstancesLimit:T,limitInstances:B}))):null})))},Dc=s=>({common:(0,F.css)`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${s.shape.radius.default};
    font-size: ${s.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:(0,F.css)`
    margin-top: ${s.spacing(2.5)};
    align-self: flex-start;
  `,good:(0,F.css)`
    color: ${s.colors.success.main};
  `,bad:(0,F.css)`
    color: ${s.colors.error.main};
  `,warning:(0,F.css)`
    color: ${s.colors.warning.main};
  `,neutral:(0,F.css)`
    color: ${s.colors.secondary.main};
  `,info:(0,F.css)`
    color: ${s.colors.primary.main};
  `}),Pc=Cc;function Mc(s){const D=(T,[B,W])=>W?[...T,B]:T;return Object.entries(s).reduce(D,[])}const oi=({dispatch:s,limitInstances:D,matcherList:T,dataSourceName:B,stateList:W})=>{s(B?(0,$.dn)({rulesSourceName:B,limitAlerts:D?Dt:void 0,matcher:T,state:W}):(0,$.ei)(!1,{limitAlerts:D?Dt:void 0,matcher:T,state:W}))};function vl(s){const D=(0,z.useDispatch)(),[T,B]=(0,Xt.Z)(!0),{usePrometheusRulesByNamespaceQuery:W}=Ha,G=(0,U._)(Sn=>Sn.promRules),Y=(0,U._)(Sn=>Sn.rulerRules),q=(0,j.wt)(G),se=s.width<320;(0,o.useEffect)(()=>{s.options.stateFilter.inactive===!0&&(s.options.stateFilter.normal=!0),s.options.stateFilter.inactive=void 0},[s.options.stateFilter]);let ce;(0,$n.Z)(()=>{ce=(0,ve.h4)().getCurrent()});const fe=(0,o.useMemo)(()=>Mc(s.options.stateFilter),[s.options.stateFilter]),{options:Se,replaceVariables:_e}=s,Ae=Se.datasource===K.JY?K.GC:Se.datasource,He={...s.options,alertName:_e(Se.alertName),alertInstanceLabelFilter:_e(Se.alertInstanceLabelFilter)},tt=(0,o.useMemo)(()=>(0,k.Zh)(He.alertInstanceLabelFilter),[He.alertInstanceLabelFilter]),$e=!Ae||Ae===K.GC,{currentData:mt=[],isLoading:Wt,refetch:wt}=W({limitAlerts:T?Dt:void 0,matcher:tt,state:fe},{skip:!$e});(0,o.useEffect)(()=>{G.loading||oi({dispatch:D,limitInstances:T,matcherList:tt,dataSourceName:Ae,stateList:fe});const Sn=ce?.events.subscribe(Mt.md,()=>{$e&&wt(),(!Ae||Ae!==K.GC)&&oi({dispatch:D,limitInstances:T,matcherList:tt,dataSourceName:Ae,stateList:fe})});return()=>{Sn?.unsubscribe()}},[D,ce,tt,fe,T,Ae,wt,$e,G.loading]);const Ot=Sn=>{Sn?(oi({dispatch:D,limitInstances:T,matcherList:tt,dataSourceName:Ae,stateList:fe}),B(!0)):(oi({dispatch:D,limitInstances:!1,matcherList:tt,dataSourceName:Ae,stateList:fe}),B(!1))},on=Hn(void 0,mt),Vt=(0,j.wt)(Y),sn=(0,j.I7)(G),Cn=q||Vt,Dn=(0,j.yR)(G),En=(0,Q.wW)(ii),kn=(0,On.C7)(on),bn=s.options.sortOrder,ra=(0,o.useMemo)(()=>Ic(s,Tc(bn,kn)),[kn,bn,s]),Rn=ra.length===0?"No alerts matching filters":void 0;return!gn.Vt.hasPermission(z.AccessControlAction.AlertingRuleRead)&&!gn.Vt.hasPermission(z.AccessControlAction.AlertingRuleExternalRead)?o.createElement(yt.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):o.createElement(_.$,{autoHeightMin:"100%",autoHeightMax:"100%"},o.createElement("div",{className:En.container},(Wt||Cn&&Dn&&!sn)&&o.createElement(At.u,{text:"Loading..."}),Rn&&o.createElement("div",{className:En.noAlertsMessage},Rn),o.createElement("section",null,s.options.viewMode===xe.wO.Stat&&sn&&o.createElement(Ht.w6,{width:s.width,height:s.height,graphMode:Ht.IG.None,textMode:Ht.jG.Auto,justifyMode:Ht.ap.Auto,theme:tn.config.theme2,value:{text:`${ra.length}`,numeric:ra.length}}),s.options.viewMode===xe.wO.List&&s.options.groupMode===xe.LM.Custom&&sn&&o.createElement(fl,{rules:ra,options:He}),s.options.viewMode===xe.wO.List&&s.options.groupMode===xe.LM.Default&&sn&&o.createElement(Pc,{rules:ra,options:He,handleInstancesLimit:Ot,limitInstances:T,hideViewRuleLinkText:se}))))}function Tc(s,D){if(s===xe.As.Importance)return(0,ne.sortBy)(D,B=>ae.Z.alertStateSortScore[B.state]);if(s===xe.As.TimeAsc)return(0,ne.sortBy)(D,B=>{const W=(0,On.Re)(B)??void 0;return(0,On.ub)(W)||new Date});if(s===xe.As.TimeDesc)return(0,ne.sortBy)(D,B=>{const W=(0,On.Re)(B)??void 0;return(0,On.ub)(W)||new Date}).reverse();const T=(0,ne.sortBy)(D,B=>B.name.toLowerCase());return s===xe.As.AlphaDesc&&T.reverse(),T}function Ic(s,D){const{options:T,replaceVariables:B}=s;let W=[...D];if(T.dashboardAlerts){const G=(0,ve.h4)().getCurrent()?.uid;W=W.filter(({annotations:Y={}})=>Object.entries(Y).some(([q,se])=>q===H.q6.dashboardUID&&se===G))}if(T.alertName){const G=B(T.alertName);W=W.filter(({name:Y})=>Y.toLocaleLowerCase().includes(G.toLocaleLowerCase()))}if(W=W.filter(G=>{const Y=(0,On.Re)(G);return Y?T.stateFilter.firing&&Y.state===we.x_.Firing||T.stateFilter.pending&&Y.state===we.x_.Pending||T.stateFilter.normal&&Y.state===we.x_.Inactive:!1}),T.folder&&(W=W.filter(G=>G.namespaceName===T.folder.title)),T.datasource){const G=T.datasource===K.JY;W=W.filter(G?({dataSourceName:Y})=>Y===K.GC:({dataSourceName:Y})=>Y===T.datasource)}return W=W.reduce((G,Y)=>{const q=(0,On.Re)(Y);return(q?lt({stateFilter:T.stateFilter,alertInstanceLabelFilter:B(T.alertInstanceLabelFilter)},q.alerts??[]):[]).length&&G.push(Y),G},[]),W}const ii=s=>({cardContainer:(0,F.css)`
    padding: ${s.spacing(.5)} 0 ${s.spacing(.25)} 0;
    line-height: ${s.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,F.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,F.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,F.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${s.colors.background.secondary};
    padding: ${s.spacing(.5)} ${s.spacing(1)};
    border-radius: ${s.shape.radius.default};
    margin-bottom: ${s.spacing(.5)};

    gap: ${s.spacing(2)};
  `,alertName:(0,F.css)`
    font-size: ${s.typography.h6.fontSize};
    font-weight: ${s.typography.fontWeightBold};

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,alertNameWrapper:(0,F.css)`
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    flex-direction: column;

    min-width: 100px;
  `,alertLabels:(0,F.css)`
    > * {
      margin-right: ${s.spacing(.5)};
    }
  `,alertDuration:(0,F.css)`
    font-size: ${s.typography.bodySmall.fontSize};
  `,alertRuleItemText:(0,F.css)`
    font-weight: ${s.typography.fontWeightBold};
    font-size: ${s.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:(0,F.css)`
    color: ${s.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,F.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,F.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,F.css)`
    margin-right: ${s.spacing(.5)};
  `,instanceDetails:(0,F.css)`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:(0,F.css)`
    margin-bottom: ${s.spacing(.5)};
  `,link:(0,F.css)`
    word-break: break-all;
    color: ${s.colors.primary.text};
    display: flex;
    align-items: center;
    gap: ${s.spacing(1)};
  `,hidden:(0,F.css)`
    display: none;
  `});class wi{getSuggestionsForData(D){const{dataSummary:T}=D;if(T.hasData)return;D.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function Br(s){return s.showOptions===xe.kx.Current}const Oc=new w.c(Ge).setPanelOptions(s=>{s.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:xe.kx.Current},{label:"Recent state changes",value:xe.kx.RecentChanges}]},defaultValue:xe.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:xe.As.AlphaAsc},{label:"Alphabetical (desc)",value:xe.As.AlphaDesc},{label:"Importance",value:xe.As.Importance},{label:"Time (asc)",value:xe.As.TimeAsc},{label:"Time (desc)",value:xe.As.TimeDesc}]},defaultValue:xe.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:Br}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:Br}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:T,onChange:B}){return o.createElement(je,{initialFolderId:T,onChange:W=>B(W?.id),extraFolders:[We,Je]})},category:["Filter"],showIf:Br}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(D){return o.createElement(it.B,{tags:D.value,onChange:D.onChange})},category:["Filter"],showIf:Br}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:Br}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:Br}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:Br}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:Br}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:Br}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:Br})}).setMigrationHandler(Pt).setSuggestionsSupplier(new wi),Rc=new w.c(vl).setPanelOptions(s=>{s.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:xe.wO.List,settings:{options:[{label:"List",value:xe.wO.List},{label:"Stat",value:xe.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:xe.LM.Default,settings:{options:[{value:xe.LM.Default,label:"Default grouping"},{value:xe.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:D=>D.groupMode===xe.LM.Custom,category:["Options"],editor:D=>o.createElement(Ut,{id:D.id??"groupBy",defaultValue:D.value.map(T=>({label:T,value:T})),onChange:D.onChange,dataSource:D.context.options.datasource})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:xe.As.AlphaAsc},{label:"Alphabetical (desc)",value:xe.As.AlphaDesc},{label:"Importance",value:xe.As.Importance},{label:"Time (asc)",value:xe.As.TimeAsc},{label:"Time (desc)",value:xe.As.TimeDesc}]},defaultValue:xe.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(T){return o.createElement(pt.q,{...T,type:["prometheus","loki","grafana"],noDefault:!0,current:T.value,onChange:B=>T.onChange(B.name),onClear:()=>T.onChange(null)})},category:["Filter"]}).addCustomEditor({showIf:D=>D.datasource===K.JY||!D.datasource,path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(T){return o.createElement(ze.Fz,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:T.value?.title,initialFolderUid:T.value?.uid,permissionLevel:z.PermissionLevelString.View,onClear:()=>T.onChange(""),...T})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),Ac=V.config.unifiedAlertingEnabled?Rc:Oc;var Oo=e(31544),Lc=e(57837),Ro=e(71519),Cr=e(36316),yl=e(13601),Ho=e(3532),zr=e(64084),El=e(25870),li=e(28833),wc=e(18328);const Bc=({options:s,annotation:D,formatDate:T,onClick:B,onAvatarClick:W,onTagClick:G})=>{const Y=(0,Q.wW)(ci),{showUser:q,showTags:se,showTime:ce}=s,{text:fe="",login:Se,email:_e,avatarUrl:Ae,tags:He,time:tt,timeEnd:$e}=D,mt=()=>{B(D)},Wt=()=>{W(D)},wt=Se&&q,Ot=tt&&ce,on=$e&&$e!==tt&&ce;return o.createElement(pe.Z,{className:Y.card,onClick:mt},o.createElement(pe.Z.Heading,null,o.createElement(wc.D,{className:Y.heading,onClick:Vt=>{Vt.stopPropagation()},content:fe})),Ot&&o.createElement(pe.Z.Description,{className:Y.timestamp},o.createElement(bl,{formatDate:T,time:tt}),on&&o.createElement(o.Fragment,null,o.createElement("span",{className:Y.time},"-"),o.createElement(bl,{formatDate:T,time:$e})," ")),wt&&o.createElement(pe.Z.Meta,{className:Y.meta},o.createElement(Nc,{email:_e,login:Se,avatarUrl:Ae,onClick:Wt})),se&&He&&o.createElement(pe.Z.Tags,null,o.createElement(Ho.P,{tags:He,onClick:Vt=>G(Vt,!1)})))},Nc=({onClick:s,avatarUrl:D,login:T,email:B})=>{const W=(0,Q.wW)(ci),G=q=>{q.stopPropagation(),s()},Y=o.createElement("span",null,"Created by:",o.createElement("br",null)," ",B);return o.createElement(Qa.u,{content:Y,theme:"info",placement:"top"},o.createElement("button",{onClick:G,className:W.avatar,"aria-label":`Created by ${B}`},o.createElement("img",{src:D,alt:"avatar icon"})))},bl=({time:s,formatDate:D})=>{const T=(0,Q.wW)(ci);return o.createElement("span",{className:T.time},o.createElement("span",null,D(s)))};function ci(s){return{card:(0,F.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:s.spacing(1),margin:s.spacing(.5),width:"inherit"}),heading:(0,F.css)({a:{zIndex:1,position:"relative",color:s.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,F.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,F.css)({margin:0,alignSelf:"center"}),time:(0,F.css)({marginLeft:s.spacing(1),marginRight:s.spacing(1),fontSize:s.typography.bodySmall.fontSize,color:s.colors.text.secondary}),avatar:(0,F.css)({border:"none",background:"inherit",margin:0,padding:s.spacing(.5),img:{borderRadius:s.shape.radius.circle,width:s.spacing(2),height:s.spacing(2)}})}}class uu extends o.PureComponent{constructor(D){super(D),this.style=mu(V.config.theme2),this.subs=new Oo.w0,this.tagListRef=o.createRef(),this.onAnnoClick=async T=>{if(!T.time)return;const{options:B}=this.props,G=(0,ve.h4)().getCurrent(),Y={from:this._timeOffset(T.time,B.navigateBefore,!0),to:this._timeOffset(T.timeEnd??T.time,B.navigateAfter,!1)};if(B.navigateToPanel&&(Y.viewPanel=T.panelId),G?.uid===T.dashboardUID){yl.E1.partial(Y);return}const q=await(0,oe.i)().get("/api/search",{dashboardUIDs:T.dashboardUID});if(q&&q.length&&q[0].uid===T.dashboardUID){const se=q[0],ce=new URL(se.url,window.location.origin);ce.searchParams.set("from",Y.from),ce.searchParams.set("to",Y.to),yl.E1.push(Lc.u.stripBaseFromUrl(ce.toString()));return}li.Z.emit(Ro.SI.alertWarning,["Unknown Dashboard: "+T.dashboardUID])},this.onTagClick=(T,B)=>{if(!B&&this.state.queryTags.includes(T))return;const W=B?this.state.queryTags.filter(Y=>Y!==T):[...this.state.queryTags,T];let G;if(B){const Y=document.activeElement,q=Y?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(Y)&&q){const se=Number.parseInt(q,10),ce=this.tagListRef.current.querySelector(`[data-tag-id="${se+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${se-1}"]`);ce instanceof HTMLElement&&(G=ce)}}this.setState({queryTags:W},()=>G?.focus())},this.onUserClick=T=>{this.setState({queryUser:{id:T.userId,login:T.login,email:T.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(T,B)=>{const{options:W}=this.props,G=(0,ve.h4)().getCurrent();return G?o.createElement(Bc,{annotation:T,formatDate:G.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:W}):o.createElement(o.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(Cr.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(D,T){const{options:B,timeRange:W}=this.props;(B!==D.options||this.state.queryTags!==T.queryTags||this.state.queryUser!==T.queryUser||D.renderCounter!==this.props.renderCounter||B.onlyInTimeRange&&W!==D.timeRange)&&this.doSearch()}async doSearch(){const{options:D}=this.props,{queryUser:T,queryTags:B}=this.state,W={tags:D.tags,limit:D.limit,type:"annotation"};D.onlyFromThisDashboard&&(W.dashboardUID=(0,ve.h4)().getCurrent()?.uid);let G="";if(D.onlyInTimeRange){const{timeRange:q}=this.props;W.from=q.from.valueOf(),W.to=q.to.valueOf()}else G="All Time";T&&(W.userId=T.id),D.tags&&D.tags.length&&(W.tags=D.tags.map(q=>this.props.replaceVariables(q))),B.length&&(W.tags=W.tags?[...W.tags,...B]:B);const Y=await(0,oe.i)().get("/api/annotations",W,`anno-list-panel-${this.props.id}`);this.setState({annotations:Y,timeInfo:G,loaded:!0})}_timeOffset(D,T,B=!1){let W=5,G="m";const Y=/^(\d+)(\w)/.exec(T);Y&&Y.length===3&&(W=parseInt(Y[1],10),G=Y[2]);const q=(0,Tt.CQ)(D);return B&&(W*=-1),q.add(W,G).valueOf()}render(){const{loaded:D,annotations:T,queryUser:B,queryTags:W}=this.state;if(!D)return o.createElement("div",null,"loading...");const G=B||W.length>0;return o.createElement(_.$,{autoHeightMin:"100%"},G&&o.createElement("div",{className:this.style.filter},o.createElement("b",null,"Filter:"),B&&o.createElement(Z.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${B.email}`},B.email),W.length>0&&o.createElement(Ho.P,{icon:"times",tags:W,onClick:Y=>this.onTagClick(Y,!0),getAriaLabel:Y=>`Remove ${Y} tag`,className:this.style.tagList,ref:this.tagListRef})),T.length<1&&o.createElement("div",{className:this.style.noneFound},"No Annotations Found"),o.createElement(El.L,{items:T,renderItem:this.renderItem,getItemKey:Y=>`${Y.id}`}))}}const mu=(0,zr.B)(s=>({noneFound:(0,F.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,F.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:s.spacing(.5),padding:s.spacing(.5)}),tagList:(0,F.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),eo={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},fu=new w.c(uu).setPanelOptions(s=>{s.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:eo.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:eo.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(D){return o.createElement(it.B,{tags:D.value,onChange:D.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:eo.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:eo.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:eo.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:eo.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:eo.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:eo.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:eo.navigateAfter,description:""})}).setPanelChangeHandler((s,D,T)=>D==="ryantxu-annolist-panel"?T:s.options);var Us=e(82909),us=e(97898),to=e(63671),os=e(69330),xs=e(64943),Yn=e(89591),Lt=e(34547),cr=e(39480),xl=e(41456),Ao=e(86246),Lo=e(61729),Hr=e(57827),Sl=e(40723);const Go=({item:s,value:D,onChange:T,id:B})=>{const W=(0,o.useCallback)(G=>{T({mode:G.value})},[T]);return o.createElement(bt.Ph,{inputId:B,value:D.mode,options:s.settings.options,onChange:W})};var Cl=e(99977),no=e(30639),nr=e(31276),wo=e(76297),di=e(59208),jo=e(96248),Bi=e(78832),Dl=e(98419),Ni=e(42626),rs=e(70393),ms=e(41013),Pl=e(40793),ui=e(18577);const Fi=({config:s,onUPlotClick:D,setFocusedSeriesIdx:T,setFocusedPointIdx:B,setCoords:W,setHover:G,isToolTipOpen:Y,isActive:q,setIsActive:se,sync:ce})=>{Y.current=!1;const fe=()=>{se&&se(!0)},Se=()=>{Y.current||(W(null),se&&se(!1))};let _e=null,Ae=null;s.addHook("init",mt=>{_e=mt.root.parentElement,Ae=mt.over,_e?.addEventListener("click",D),Ae.addEventListener("mouseleave",Se),Ae.addEventListener("mouseenter",fe),ce&&ce()===Pl.m.Crosshair&&mt.root.classList.add("shared-crosshair")});const He=()=>{Y.current&&(W(null),D())};s.addHook("drawClear",He),s.addHook("destroy",()=>{_e?.removeEventListener("click",D),Ae?.removeEventListener("mouseleave",Se),Ae?.removeEventListener("mouseenter",fe),He()});let tt;s.addHook("syncRect",(mt,Wt)=>{tt=Wt});const $e=s.getTooltipInterpolator();return $e&&s.addHook("setCursor",mt=>{Y.current||$e(T,B,Wt=>{if(Wt){W(null);return}if(!tt)return;const{x:wt,y:Ot}=(0,ui._)(mt,tt);wt!==void 0&&Ot!==void 0&&W({canvas:{x:mt.cursor.left,y:mt.cursor.top},viewport:{x:wt,y:Ot}})},mt)}),s.addHook("setLegend",mt=>{if(!Y.current&&!$e&&B(mt.legend.idx),mt.cursor.idxs!=null)for(let Wt=0;Wt<mt.cursor.idxs.length;Wt++){const wt=mt.cursor.idxs[Wt];if(wt!=null){const Ot={xIndex:wt,yIndex:0,pageX:tt.left+mt.cursor.left,pageY:tt.top+mt.cursor.top};(!Y.current||!Ot)&&G(Ot);return}}}),s.addHook("setSeries",(mt,Wt)=>{Y.current||T(Wt)}),s};var mi=e(80583),Gr=e(80047),Ml=e(80854),Ys=e(92697),Ts=e(83502),Bo=e(73254),fi=e(82837),Qs=e(94123),Tl=e(80115),Yo=e(95966),Dr=e(85256),ho=e(91249),vo=e(50342),No=e(14197);const Ui=vo.Gj,Il=vo.Gj,Fc=8,gi=30,Uc=.65,gu=.1,pu=.15,hu=5,vu=10,yu=.1;function Wc(s,D,T,B,W){const G=(0,wo.X1)(s,14),Y=D/(G.width+2)*14,q=T/B,se=Math.min(q,Y);return{fontSize:Math.min(se,W??se),textMetrics:G}}function _c(s,D){const{xOri:T,xDir:B,rawValue:W,getColor:G,formatValue:Y,formatShortValue:q,fillOpacity:se=1,showValue:ce,xSpacing:fe=0}=s,Se=T===Lt.wN.Horizontal,_e=!s.text?.valueSize,Ae=s.stacking!==Lt.o0.None,He=s.stacking===Lt.o0.Percent;let{groupWidth:tt,barWidth:$e,barRadius:mt=0}=s;Ae&&([tt,$e]=[$e,tt]);let Wt,wt;const Ot=Vn=>Array.from(Vn.data[0].map((_n,Xn)=>Xn)),on=fe===0?void 0:(Vn,_n)=>{const Xn=Vn.bbox.width,Ca=B*(Se?1:-1);let ya=_n.length,Va=ya-1,Ka=0,Cs=Xn/Ys.Z.pxRatio,Ds=Math.abs(Math.floor(Cs/fe));Ka=ya<Ds?0:Math.ceil(ya/Ds);let Jr=_n.map((Gs,To)=>Ka!==0&&(fe>0?To:Va-To)%Ka>0?null:Gs);return Ca===1?Jr:Jr.reverse()},Vt=(Vn,_n,Xn,Ca,ya)=>{if(s.xTimeAuto){let Va=Vn.scales.x,Ka=Va.min,Cs=Va.max;Va.min=Vn.data[0][0],Va.max=Vn.data[0][Vn.data[0].length-1];let Ds=(0,di.mr)(Vn,_n,Xn,Ca,ya);return Va.min=Ka,Va.max=Cs,Ds}return _n.map(Va=>Se?q(0,Va):Y(0,Va))},sn=(Vn,_n,Xn)=>{_n=0,Xn=Math.max(1,Vn.data[0].length-1);let Ca=0;(0,vo.Qm)(Vn.data[0].length,tt,Ui,0,(Va,Ka,Cs)=>{Ca=Ka+Cs/2});let ya=Xn-_n;if(Ca===.5)_n-=ya;else{let Ka=(1/(1-Ca*2)*ya-ya)/2;_n-=Ka,Xn+=Ka}return[_n,Xn]};let Cn=(Vn,_n)=>{let Xn=Array.from({length:_n},()=>({offs:Array(Vn).fill(0),size:Array(Vn).fill(0)}));return(0,vo.Qm)(Vn,tt,Ui,null,(Ca,ya,Va)=>{(0,vo.Qm)(_n,$e,Il,null,(Ka,Cs,Ds)=>{Xn[Ka].offs[Ca]=ya+Va*Cs,Xn[Ka].size[Ca]=Va*Ds})}),Xn},Dn=(Vn,_n)=>{let Xn=Array.from({length:_n},()=>({offs:Array(Vn).fill(0),size:Array(Vn).fill(0)}));return(0,vo.Qm)(Vn,tt,Ui,null,(Ca,ya,Va)=>{(0,vo.Qm)(_n,$e,Il,null,(Ka,Cs,Ds)=>{Xn[Ka].offs[Ca]=ya,Xn[Ka].size[Ca]=Va})}),Xn};const En=Se?gu:pu,kn=Se?hu:vu;let bn=[],ra=[],Rn=1,Sn,Jn=s.text?.valueSize??gi,Kn=kn,wa=1/0,Fa=1/0,Oa=G!=null,Aa=Oa?{fill:{unit:3,values:(Vn,_n)=>ra[_n].fill},stroke:{unit:3,values:(Vn,_n)=>ra[_n].stroke}}:{},Gn=Ys.Z.paths.bars({radius:He?0:Ae?(Vn,_n)=>_n===Vn.data.length-1?[mt,0]:[0,0]:mt,disp:{x0:{unit:2,values:(Vn,_n)=>bn[_n].offs},size:{unit:2,values:(Vn,_n)=>bn[_n].size},...Aa},each:(Vn,_n,Xn,Ca,ya,Va,Ka)=>{Ca-=Vn.bbox.left,ya-=Vn.bbox.top;let Cs=Vn.data[_n][Xn];Se?(wa=Math.min(wa,Cs<0?Vn.bbox.height-(ya+Ka):ya),Fa=Va):(wa=Ka,Fa=Math.min(Fa,Cs<0?Ca:Vn.bbox.width-(Ca+Va)));let Ds={x:Ca,y:ya,w:Va,h:Ka,sidx:_n,didx:Xn};if(s.fullHighlight&&(s.xOri===Lt.wN.Horizontal?(Ds.y=0,Ds.h=Vn.bbox.height):(Ds.x=0,Ds.w=Vn.bbox.width)),Wt.add(Ds),ce!==Lt.Jp.Never){const Jr=W(_n,Xn);let Gs=1;He&&ka[_n][Xn]&&(Gs=ka[_n][Xn]);const To=Gs===0?0:Jr/Gs,Vo=Y(_n,To);if(Kn=Math.min(Kn,Math.round(En*(Se?Va:Ka))),Sn[Xn]===void 0&&(Sn[Xn]={}),Sn[Xn][_n]={text:Vo,value:W(_n,Xn),hidden:!1},_e){const{fontSize:$r,textMetrics:Js}=Wc(Sn[Xn][_n].text,Fa*(Se?Uc:1)-(Se?0:Kn),wa*(Se?1:Uc)-(Se?Kn:0),1);Sn[Xn][_n].textMetrics=Js;let fs=Math.round(Math.min(Jn,gi,$r));Rn=fs/Jn*(fs/14),Jn=fs}else Sn[Xn][_n].textMetrics=(0,wo.X1)(Sn[Xn][_n].text,Jn);let Ai=Se?0:-Math.round(yu*Jn),Er=W(_n,Xn);if(s.negY?.[_n]&&Er!=null&&(Er*=-1),Er!=null){const $r=Vn.bbox.left+(Se?Ca+Va/2:Er<0?Ca-Kn:Ca+Va+Kn),Js=Vn.bbox.top+(Se?Er<0?ya+Ka+Kn:ya-Kn:ya+Ka/2-Ai),{textMetrics:fs={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=Sn[Xn][_n];let Io=0,mo=0;Se?(Io=fs.width*Rn/2,mo=Er>0?(fs.actualBoundingBoxAscent+fs.actualBoundingBoxDescent)*Rn:0):(mo=(fs.actualBoundingBoxAscent+fs.actualBoundingBoxDescent)*Rn/2,Io=Er<0?fs.width*Rn:0),Sn[Xn][_n].x=$r,Sn[Xn][_n].y=Js,Sn[Xn][_n].bbox={x:$r-Io,y:Js-mo,w:fs.width*Rn,h:(fs.actualBoundingBoxAscent+fs.actualBoundingBoxDescent)*Rn}}}}});const wn=Vn=>{let _n=Vn.over;_n.style.overflow="hidden",Vn.root.querySelectorAll(".u-cursor-pt").forEach(Xn=>{Xn.style.borderRadius="0",s.fullHighlight&&(Xn.style.zIndex="-1")})},ea={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(Vn,_n)=>{if(_n===1){wt=null;let Xn=Vn.cursor.left*Ys.Z.pxRatio,Ca=Vn.cursor.top*Ys.Z.pxRatio;Wt.get(Xn,Ca,1,1,ya=>{(0,No.Pn)(Xn,Ca,ya.x,ya.y,ya.x+ya.w,ya.y+ya.h)&&(Ae?(wt==null||ya.h*ya.w<wt.h*wt.w)&&(wt=ya):wt=ya)})}return wt&&_n===wt.sidx?wt.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(Vn,_n)=>{let Xn=wt&&_n===wt.sidx,Ca=0,ya=0;if(Ae&&Xn){const Va=wt&&wt.sidx>1&&(0,No.zZ)(Wt,wt.sidx-1,wt.didx);Va&&(Se?Ca=Va.h:ya=Va.w)}return{left:Xn?(wt.x+ya)/Ys.Z.pxRatio:-10,top:Xn?wt.y/Ys.Z.pxRatio:-10,width:Xn?(wt.w-ya)/Ys.Z.pxRatio:0,height:Xn?(wt.h-Ca)/Ys.Z.pxRatio:0}}}},ua=Vn=>{if(Wt=Wt||new No.lW(0,0,Vn.bbox.width,Vn.bbox.height),Wt.clear(),Vn.series.forEach(_n=>{_n._paths=null}),Ae?bn=[null].concat(Dn(Vn.data[0].length,Vn.data.length-1)):bn=[null].concat(Cn(Vn.data[0].length,Vn.data.length-1)),Oa){ra=[null];for(let _n=1;_n<Vn.data.length;_n++){let Xn=Vn.data[_n].map((Ca,ya)=>Ca!=null?G(_n,ya,Ca):null);ra.push({fill:se<1?Xn.map(Ca=>Ca!=null?(0,ho.alpha)(Ca,se):null):Xn,stroke:Xn})}}Sn={},Jn=s.text?.valueSize??gi,Kn=kn,wa=Fa=1/0},Ma=Vn=>{if(ce===Lt.Jp.Never||Jn<Fc)return;Vn.ctx.save(),Vn.ctx.fillStyle=D.colors.text.primary,Vn.ctx.font=`${Jn}px ${D.typography.fontFamily}`;let _n,Xn;for(const Ca in Sn){let ya=!0;for(const Va in Sn[Ca]){const Ka=Sn[Ca][Va],{text:Cs,x:Ds=0,y:Jr=0}=Ka;let{value:Gs}=Ka;s.negY?.[Va]&&Gs!=null&&(Gs*=-1);let To=Se?"center":Gs!==null&&Gs<0?"right":"left",Vo=Se?Gs!==null&&Gs<0?"top":"alphabetic":"middle";if(To!==_n&&(Vn.ctx.textAlign=_n=To),Vo!==Xn&&(Vn.ctx.textBaseline=Xn=Vo),ce===Lt.Jp.Always)Vn.ctx.fillText(Cs,Ds,Jr);else if(ce===Lt.Jp.Auto){let{bbox:Ai}=Ka,Er=!1;if(Ai==null)Er=!0,Ka.hidden=!0;else if(!ya)for(const $r in Sn[Ca]){if($r===Va)continue;const Js=Sn[Ca][$r],{bbox:fs,hidden:Io}=Js;if(!Io&&fs&&(0,No.kK)(Ai,fs)){Er=!0,Ka.hidden=!0;break}}ya=!1,!Er&&Vn.ctx.fillText(Cs,Ds,Jr)}}}Vn.ctx.restore()},Ba=(Vn,_n,Xn,Ca)=>{wt?(Vn(wt.sidx),_n(wt.didx),Xn()):Xn(!0)};let ka=null;function Ua(Vn,_n){return ka=null,(0,Yo.Bj)(Vn[0],_n,({totals:Xn})=>{ka=Xn})}return{cursor:ea,xRange:sn,xValues:Vt,xSplits:Ot,hFilter:on,barsBuilder:Gn,init:wn,drawClear:ua,draw:Ma,interpolateTooltip:Ba,prepData:Ua}}const Nr={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:Lt.wm.Auto,showValue:Lt.Jp.Auto,stacking:Lt.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},$c={fillOpacity:80,gradientMode:Lt.FI.None,lineWidth:1};function Eu(s){return s===xs.wm.Vertical?{xOri:Lt.wN.Horizontal,xDir:Lt.bQ.Right,yOri:Lt.wN.Vertical,yDir:Lt.bQ.Up}:{xOri:Lt.wN.Vertical,xDir:Lt.bQ.Down,yOri:Lt.wN.Horizontal,yDir:Lt.bQ.Right}}const bu=({frame:s,theme:D,orientation:T,showValue:B,groupWidth:W,barWidth:G,barRadius:Y=0,stacking:q,text:se,rawValue:ce,getColor:fe,fillOpacity:Se,allFrames:_e,xTickLabelRotation:Ae,xTickLabelMaxLength:He,xTickLabelSpacing:tt=0,legend:$e,timeZone:mt,fullHighlight:Wt})=>{const wt=new Tl.U,Ot=(Rn,Sn)=>(0,Ts.zc)(s.fields[Rn].display(Sn)),on=(Rn,Sn)=>Wi(Ot(Rn,Sn),He),Vt=Eu(T);s.fields.length===2&&(W=G,G=1);const sn={xOri:Vt.xOri,xDir:Vt.xDir,groupWidth:W,barWidth:G,barRadius:Y,stacking:q,rawValue:ce,getColor:fe,fillOpacity:Se,formatValue:Ot,formatShortValue:on,timeZone:mt,text:se,showValue:B,legend:$e,xSpacing:tt,xTimeAuto:s.fields[0]?.type===Yn.fS.time&&!s.fields[0].config.unit?.startsWith("time:"),negY:s.fields.map(Rn=>Rn.config.custom?.transform===Lt.pR.NegativeY),fullHighlight:Wt},Cn=_c(sn,D);if(wt.setCursor(Cn.cursor),wt.addHook("init",Cn.init),wt.addHook("drawClear",Cn.drawClear),wt.addHook("draw",Cn.draw),wt.setTooltipInterpolator(Cn.interpolateTooltip),Ae!==0){let Rn=50,Sn=Vt.xOri===Lt.wN.Horizontal?14:5;wt.setPadding(xu(s,Ae,He,Rn,Sn))}wt.setPrepData(Cn.prepData),wt.addScale({scaleKey:"x",isTime:!1,range:Cn.xRange,distribution:Lt.wf.Ordinal,orientation:Vt.xOri,direction:Vt.xDir});const Dn=s.fields[0].config.custom?.axisPlacement!==Lt.LB.Hidden?Vt.xOri===Lt.wN.Horizontal?Lt.LB.Bottom:Lt.LB.Left:Lt.LB.Hidden,En=s.fields[0].config.custom?.axisPlacement!==Lt.LB.Hidden;wt.addAxis({scaleKey:"x",isTime:!1,placement:Dn,label:s.fields[0].config.custom?.axisLabel,splits:Cn.xSplits,filter:Vt.xOri===0?Cn.hFilter:void 0,values:Cn.xValues,timeZone:mt,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:Vt.xOri===0?Ae*-1:0,theme:D,show:En});let kn=0;const bn=Su($e);for(let Rn=1;Rn<s.fields.length;Rn++){const Sn=s.fields[Rn];kn++;const Jn={...$c,...Sn.config.custom},Kn=Sn.config.unit||Ni.j,wa=(0,Bo.fD)(Sn),Oa=(0,Bo.YO)(Sn,D).color;let Aa=Jn.axisSoftMin,Gn=Jn.axisSoftMax;if(Aa==null&&Sn.config.min==null&&(Aa=0),Gn==null&&Sn.config.max==null&&(Gn=0),Jn.thresholdsStyle&&Sn.config.thresholds&&(Jn.thresholdsStyle.mode??Lt.i3.Off)!==Lt.i3.Off&&wt.addThresholds({config:Jn.thresholdsStyle,thresholds:Sn.config.thresholds,scaleKey:Kn,theme:D,hardMin:Sn.config.min,hardMax:Sn.config.max,softMin:Jn.axisSoftMin,softMax:Jn.axisSoftMax}),wt.addSeries({scaleKey:Kn,pxAlign:!0,lineWidth:Jn.lineWidth,lineColor:Oa,fillOpacity:Jn.fillOpacity,theme:D,colorMode:wa,pathBuilder:Cn.barsBuilder,show:!Jn.hideFrom?.viz,gradientMode:Jn.gradientMode,thresholds:Sn.config.thresholds,hardMin:Sn.config.min,hardMax:Sn.config.max,softMin:Aa,softMax:Gn,dataFrameFieldIndex:{fieldIndex:bn?Rn:_e[0].fields.findIndex(wn=>wn.type===Yn.fS.number&&wn.state?.seriesIndex===kn-1),frameIndex:0}}),wt.addScale({scaleKey:Kn,min:Sn.config.min,max:Sn.config.max,softMin:Aa,softMax:Gn,centeredZero:Jn.axisCenteredZero,orientation:Vt.yOri,direction:Vt.yDir,distribution:Jn.scaleDistribution?.type,log:Jn.scaleDistribution?.log}),Jn.axisPlacement!==Lt.LB.Hidden){let wn=Jn.axisPlacement;(!wn||wn===Lt.LB.Auto)&&(wn=Lt.LB.Left),Vt.xOri===1&&(wn===Lt.LB.Left&&(wn=Lt.LB.Bottom),wn===Lt.LB.Right&&(wn=Lt.LB.Top));let ea={scaleKey:Kn,label:Jn.axisLabel,size:Jn.axisWidth,placement:wn,formatValue:(ua,Ma)=>(0,Ts.zc)(Sn.display(ua,Ma)),filter:Vt.yOri===0?Cn.hFilter:void 0,tickLabelRotation:Vt.xOri===1?Ae*-1:0,theme:D,grid:{show:Jn.axisGridShow}};Jn.axisBorderShow&&(ea.border={show:!0}),Jn.axisColorMode===Lt.yK.Series&&(ea.color=Oa),wt.addAxis(ea)}}let ra=(0,Yo.i7)(s);return wt.setStackingGroups(ra),wt};function Wi(s,D){return s.length>D?s.substring(0,D).concat("..."):s}function xu(s,D,T,B=0,W=0){const G=s.fields[0].values,Y=di.gD,q=s.fields[0].display,se=Ae=>q?q(G[Ae]):G[Ae];let ce=0;for(let Ae=0;Ae<G.length;Ae++){let He=(0,wo.X1)(Wi((0,Ts.zc)(se(Ae)),T),Y);ce=He.width>ce?He.width:ce}const fe=D>0?Math.cos(D*Math.PI/180)*(0,wo.X1)(Wi((0,Ts.zc)(se(G.length-1)),T),Y).width:0,Se=D<0?Math.cos(D*-1*Math.PI/180)*(0,wo.X1)(Wi((0,Ts.zc)(se(0)),T),Y).width:0,_e=Math.sin((D>=0?D:D*-1)*Math.PI/180)*ce-W;return[Math.round(di.gD*Ys.Z.pxRatio),fe,_e,Math.max(0,Se-B)]}function Vc(s,D,T){if(!s?.length)return{warn:"No data in response"};(0,os.UY)(s);const B=s.length===1?(0,fi.Y3)(s[0],s[0].fields.findIndex(Se=>Se.type===Yn.fS.time)):(0,fi._9)({frames:s});if(!B)return{warn:"Unable to join data"};let W;if(T.colorByField&&(W=(0,Dr.findField)(B,T.colorByField),!W))return{warn:"Color field not found"};let G;if(T.xField&&(G=(0,Dr.findField)(B,T.xField),!G))return{warn:"Configured x field not found"};let Y,q,se=[];for(const Se of B.fields)if(Se!==G)switch(Se.type){case Yn.fS.string:Y||(Y=Se);break;case Yn.fS.time:q||(q=Se);break;case Yn.fS.number:{const _e={...Se,state:{...Se.state,seriesIndex:se.length},config:{...Se.config,custom:{...Se.config.custom,stacking:{group:"_",mode:T.stacking}}},values:Se.values.map(Ae=>Number.isFinite(Ae)||Ae==null?Ae:null)};T.stacking===Lt.o0.Percent&&(_e.config.unit="percentunit",_e.display=(0,Qs.U)({field:_e,theme:D})),se.push(_e)}}let ce=G;if(ce||(ce=Y||q),!ce)return{warn:"Bar charts requires a string or time field"};if(!se.length)return{warn:"No numeric fields found"};if(W&&se.length>1){const Se=se.find(_e=>_e!==W);Se&&(se=[Se])}let fe=se;return T.stacking===Lt.o0.Percent&&(fe=se.map(Se=>{const _e=B.fields.find(He=>He.state?.displayName===Se.state?.displayName),Ae={...Se,config:{..._e.config},values:Se.values};return Ae.display=(0,Qs.U)({field:Ae,theme:D}),Ae}),fe.unshift(ce)),se.unshift(ce),{aligned:B,colorByField:W,viz:[{length:ce.values.length,fields:se}],legend:{fields:fe,length:ce.values.length}}}const Su=s=>!!(s?.sortBy&&s.sortDesc!==null),Kc=10,Cu=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(s,D)=>D.text?.valueSize===s.text?.valueSize],kc=({data:s,options:D,fieldConfig:T,width:B,height:W,timeZone:G,id:Y})=>{const q=(0,Q.l4)(),{eventBus:se}=(0,nr.R9)(),ce=(0,o.useRef)(void 0),fe=(0,o.useRef)(!1),[Se,_e]=(0,o.useState)(void 0),[Ae,He]=(0,o.useState)(null),[tt,$e]=(0,o.useState)(null),[mt,Wt]=(0,o.useState)(null),[wt,Ot]=(0,o.useState)(!1),[on,Vt]=(0,o.useState)(!1),sn=()=>{fe.current=!1,He(null),Vt(!1)},Cn=()=>{fe.current=!fe.current,Vt(fe.current)},Dn=(0,o.useRef)(),En=(0,o.useRef)(),kn=(0,o.useMemo)(()=>Vc(s.series,q,D),[s.series,q,D]),bn="viz"in kn?kn:null;En.current=bn?.colorByField;const ra=(0,o.useRef)(1e4);(0,o.useMemo)(()=>{ra.current++},[D]);const Rn=(0,o.useMemo)(()=>{const wn=bn?.viz[0],ea=Dn.current;return wn&&ea&&(0,Cl.Ch)(wn,ea,!0)||ra.current++,Dn.current=wn,(s.structureRev??0)+ra.current},[bn,s.structureRev]),Sn=(0,o.useMemo)(()=>!D.orientation||D.orientation===xs.wm.Auto?B<W?xs.wm.Horizontal:xs.wm.Vertical:D.orientation,[B,W,D.orientation]),Jn=(0,o.useMemo)(()=>{if(D.xTickLabelMaxLength)return D.xTickLabelMaxLength;{const wn=D.xTickLabelRotation,ea=(0,wo.X1)("M",di.gD).width;return W/2/(Math.sin((wn>=0?wn:wn*-1)*Math.PI/180)*ea)-3}},[W,D.xTickLabelRotation,D.xTickLabelMaxLength]);if("warn"in kn)return o.createElement(no.Z,{panelId:Y,fieldConfig:T,data:s,message:kn.warn,needsNumberField:!0});const Kn=(wn,ea,ua)=>{const Ma=ea==null?null:wn.fields[ea];if(Ma){const Ua=(0,os.CZ)(Ma,wn);ea=kn.aligned.fields.findIndex(Vn=>Ua===(0,os.CZ)(Vn,kn.aligned))}const Ba=D.fullHighlight&&D.stacking!==Lt.o0.None?Lt.f3.Multi:D.tooltip.mode,ka=D.tooltip.mode===Lt.f3.Multi?D.tooltip.sort:Lt.As.None;return o.createElement(o.Fragment,null,on&&o.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},o.createElement(mi.P,{onClick:sn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),o.createElement(Ml.H,{data:kn.aligned,rowIndex:ua,columnIndex:ea,sortOrder:ka,mode:Ba}))},wa=wn=>{const{legend:ea}=D;if(!wn||ea.showLegend===!1)return null;if(kn.colorByField){const ua=(0,Gr.$m)([kn.colorByField],q);if(ua?.length)return o.createElement(jo.AY.Legend,{placement:ea.placement},o.createElement(Bi.l,{placement:ea.placement,items:ua,displayMode:ea.displayMode}))}return o.createElement(Dl.l,{data:[kn.legend],config:wn,maxHeight:"35%",maxWidth:"60%",...D.legend})},Fa=(wn,ea)=>Dn.current.fields[wn].values[ea];let Oa,Aa=1;if(kn.colorByField){const wn=kn.colorByField,ea=wn.display;Aa=(wn.config.custom.fillOpacity??100)/100,Oa=(ua,Ma)=>ea(En.current?.values[Ma]).color}else Dn.current.fields.some(ea=>ea.config.custom?.gradientMode===Lt.FI.Scheme&&ea.config.color?.mode===us.S.Thresholds||ea.config.mappings?.some(Ma=>Ma.type==="value"?Object.values(Ma.options).some(Ba=>Ba.color!=null):Ma.options.result.color!=null))&&(Aa=(Dn.current.fields.find(ua=>ua.type===Yn.fS.number).config.custom.fillOpacity??100)/100,Oa=(ua,Ma)=>{let Ba=Dn.current.fields[ua];return Ba.display(Ba.values[Ma]).color});const Gn=(wn,ea,ua)=>{const{barWidth:Ma,barRadius:Ba=0,showValue:ka,groupWidth:Ua,stacking:Vn,legend:_n,tooltip:Xn,text:Ca,xTickLabelRotation:ya,xTickLabelSpacing:Va,fullHighlight:Ka}=D;return bu({frame:wn,getTimeRange:ua,timeZone:G,theme:q,timeZones:[G],eventBus:se,orientation:Sn,barWidth:Ma,barRadius:Ba,showValue:ka,groupWidth:Ua,xTickLabelRotation:ya,xTickLabelMaxLength:Jn,xTickLabelSpacing:Va,stacking:Vn,legend:_n,tooltip:Xn,text:Ca,rawValue:Fa,getColor:Oa,fillOpacity:Aa,allFrames:kn.viz,fullHighlight:Ka})};return o.createElement(Ni.d,{theme:q,frames:kn.viz,prepConfig:Gn,propsToDiff:Cu,preparePlotFrame:wn=>wn[0],renderLegend:wa,legend:D.legend,timeZone:G,timeRange:{from:1,to:1},structureRev:Rn,width:B,height:W},wn=>(ce.current!==wn&&(ce.current=Fi({config:wn,onUPlotClick:Cn,setFocusedSeriesIdx:$e,setFocusedPointIdx:Wt,setCoords:He,setHover:_e,isToolTipOpen:fe,isActive:wt,setIsActive:Ot})),D.tooltip.mode===Lt.f3.None?null:o.createElement(rs.h_,null,Se&&Ae&&tt&&o.createElement(ms.S,{position:{x:Ae.viewport.x,y:Ae.viewport.y},offset:{x:Kc,y:Kc},allowPointerEvents:fe.current},Kn(kn.viz[0],tt,mt)))))};var dr=e(12223),jr=e(20454),zc=e(13026);const _i=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],Hc=s=>{let D=s.value??0;const T=D<0;T&&(D*=-1);let B=_i[0];for(const Y of _i)if(B=Y,D<=B.value)break;const W=Y=>{s.onChange(Y*(T?-1:1))},G=()=>{s.onChange(s.value*-1)};return o.createElement(dr.Lh,null,o.createElement(jr.S,{value:B.value,options:_i,onChange:W}),D!==0&&o.createElement(Qa.u,{content:"Require space from the right side",placement:"top"},o.createElement("div",null,o.createElement(zc.X,{value:T,onChange:G,label:"RTL"}))))};var Ga=e(43419);class Ol{getListWithDefaults(D){return D.getListAppender({name:Ga.y.BarChart,pluginId:"barchart",options:{showValue:Lt.Jp.Never,legend:{calcs:[],displayMode:Lt.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:T=>{T.options.barWidth=.8}}})}getSuggestionsForData(D){const T=this.getListWithDefaults(D),{dataSummary:B}=D;B.frameCount===1&&(!B.hasNumberField||!B.hasStringField||B.rowCountTotal>50||(T.append({name:Ga.y.BarChart}),B.numberFieldCount>1&&(T.append({name:Ga.y.BarChartStacked,options:{stacking:Lt.o0.Normal}}),T.append({name:Ga.y.BarChartStackedPercent,options:{stacking:Lt.o0.Percent}})),T.append({name:Ga.y.BarChartHorizontal,options:{orientation:xs.wm.Horizontal}}),B.numberFieldCount>1&&(T.append({name:Ga.y.BarChartHorizontalStacked,options:{stacking:Lt.o0.Normal,orientation:xs.wm.Horizontal}}),T.append({name:Ga.y.BarChartHorizontalStackedPercent,options:{orientation:xs.wm.Horizontal,stacking:Lt.o0.Percent}}))))}}const Du=new w.c(kc).useFieldConfig({standardOptions:{[Us.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:us.S.PaletteClassic}}},useCustomConfig:s=>{const D=$c;s.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:D.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:D.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:cr.q.fillGradient[0].value,settings:{options:cr.q.fillGradient}}),s.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:Lt.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:Lt.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),s.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:Lt.i3.Off},settings:{options:cr.q.thresholdsDisplayModes},editor:Go,override:Go,process:to.kG,shouldApply:()=>!0}),xl.r(s,D,!1),Ao.B(s)}}).setPanelOptions((s,D)=>{const T=Vc(D.data,V.config.theme2,D.options??{});let B="First string or time field";const W="viz"in T?T.viz[0]:void 0;if(W?.fields?.length){const G=W.fields[0];B+=` (${(0,os.CZ)(G,W)})`}s.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:B}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:xs.wm.Auto,label:"Auto"},{value:xs.wm.Horizontal,label:"Horizontal"},{value:xs.wm.Vertical,label:"Vertical"}]},defaultValue:Nr.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Nr.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:G=>G.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Nr.xTickLabelSpacing,editor:Hc}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Lt.Jp.Auto,label:"Auto"},{value:Lt.Jp.Always,label:"Always"},{value:Lt.Jp.Never,label:"Never"}]},defaultValue:Nr.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:cr.q.stacking},defaultValue:Nr.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Nr.groupWidth,settings:{min:0,max:1,step:.01},showIf:(G,Y)=>G.stacking&&G.stacking!==Lt.o0.None?!1:Pu(Y)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Nr.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Nr.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Nr.fullHighlight}),s.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!D.options?.fullHighlight||D.options?.stacking===Lt.o0.None)&&Lo.L(s),Hr.J(s),Sl.Z(s,!1)}).setSuggestionsSupplier(new Ol);function Pu(s){let D=0;if(s)for(const T of s)for(const B of T.fields)B.type===Yn.fS.number&&D++;return D}var Gc=e(86609),Rl=e(86085);const Mu=s=>(0,Gc.rD)(s);var jc=e(2104);const Qo={displayMode:Lt.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0,valueMode:Lt.M8.Color};class pi{getSuggestionsForData(D){const{dataSummary:T}=D;if(!T.hasData||!T.hasNumberField)return;const B=D.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});T.numberFieldCount>50||(T.hasStringField&&T.frameCount===1&&T.rowCountTotal<30?(B.append({name:Ga.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Lt.QH.Basic,orientation:xs.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),B.append({name:Ga.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Lt.QH.Lcd,orientation:xs.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(B.append({name:Ga.y.BarGaugeBasic,options:{displayMode:Lt.QH.Basic,orientation:xs.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),B.append({name:Ga.y.BarGaugeLCD,options:{displayMode:Lt.QH.Lcd,orientation:xs.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const Tu=new w.c(jc.M).useFieldConfig().setPanelOptions(s=>{(0,Rl.j)(s),(0,Rl.h)(s),Sl.Z(s),s.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:Lt.QH.Gradient,label:"Gradient"},{value:Lt.QH.Lcd,label:"Retro LCD"},{value:Lt.QH.Basic,label:"Basic"}]},defaultValue:Qo.displayMode}).addRadio({path:"valueMode",name:"Value display",settings:{options:[{value:Lt.M8.Color,label:"Value color"},{value:Lt.M8.Text,label:"Text color"},{value:Lt.M8.Hidden,label:"Hidden"}]},defaultValue:Qo.valueMode}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:Qo.showUnfilled,showIf:D=>D.displayMode!=="lcd"}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:Qo.minVizWidth,showIf:D=>D.orientation===xs.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:Qo.minVizHeight,showIf:D=>D.orientation===xs.wm.Horizontal})}).setPanelChangeHandler(Gc.ZH).setMigrationHandler(Mu).setSuggestionsSupplier(new pi);var Yc=e(69107),Fr=e(81626),hi=e(38637),$i=(s=>(s.LessThan="lessthan",s.GreaterThan="greaterthan",s))($i||{});const Qc=({value:s,onChange:D,inputPrefix:T,isTime:B})=>{let W=Fr.secondsToHms(s/1e3);B||(W="10");const G=ce=>{let fe=!1;if(ce)try{B&&Fr.isValidTimeSpan(ce)?fe=Fr.intervalToMs(ce):fe=Number(ce)}catch(Se){console.warn("ERROR",Se)}D(fe)},Y=ce=>{ce.key==="Enter"&&G(ce.currentTarget.value)},q=ce=>{G(ce.currentTarget.value)},se=T==="greaterthan"?o.createElement("div",null,">"):T==="lessthan"?o.createElement("div",null,"<"):null;return o.createElement(hi.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:W,onKeyDown:Y,onBlur:q,prefix:se,spellCheck:!1})},Zc=[{label:"Never",value:!1},{label:"Threshold",value:36e5}],vi=({value:s,onChange:D,item:T})=>{const B=typeof s=="number";return Zc[1].value=B?s:36e5,o.createElement(dr.Lh,null,o.createElement(jr.S,{value:s,options:Zc,onChange:D}),B&&o.createElement(Qc,{value:s,onChange:D,inputPrefix:$i.GreaterThan,isTime:T.settings.isTime}))};var ls=e(68497);const Jc=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],Vi=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(s=>({label:s,value:s})),Xc=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(s=>({label:s,value:s})),Ki=({value:s,onChange:D})=>{const T=(0,o.useMemo)(()=>s?.fill==="dash"?Vi:Xc,[s]),B=(0,o.useMemo)(()=>{if(!s?.dash?.length)return T[0];const W=s.dash?.join(", "),G=T.find(Y=>Y.value===W);return G||{label:W,value:W}},[s,T]);return o.createElement(dr.Lh,null,o.createElement(jr.S,{value:s?.fill||"solid",options:Jc,onChange:W=>{let G;W==="dot"?G=ki(Xc[0].value):W==="dash"&&(G=ki(Vi[0].value)),D({...s,fill:W,dash:G})}}),s?.fill&&s?.fill!=="solid"&&o.createElement(o.Fragment,null,o.createElement(bt.Ph,{allowCustomValue:!0,options:T,value:B,width:20,onChange:W=>{D({...s,dash:ki(W.value??"")})},formatCreateLabel:W=>`Segments: ${ki(W).join(", ")}`}),o.createElement("div",null,"\xA0",o.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},o.createElement(ls.h,{name:"question-circle",tooltip:"Help"})))))};function ki(s){const D=[];for(const T of s.split(/(?:,| )+/)){const B=Number.parseInt(T,10);isNaN(B)||D.push(B)}return D}const qc=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],yi=({value:s,onChange:D,item:T})=>{const B=typeof s=="number";return qc[2].value=B?s:36e5,o.createElement(dr.Lh,null,o.createElement(jr.S,{value:s,options:qc,onChange:D}),B&&o.createElement(Qc,{value:s,onChange:D,inputPrefix:$i.LessThan,isTime:T.settings.isTime}))},yo={drawStyle:Lt.l8.Line,lineInterpolation:Lt.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:Lt.FI.None,barAlignment:Lt.pu.Center,stacking:{mode:Lt.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1,axisBorderShow:!1},Ws=["Graph styles"];function Pr(s,D=!0){return{standardOptions:{[Us.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:us.S.PaletteClassic}}},useCustomConfig:T=>{T.addRadio({path:"drawStyle",name:"Style",category:Ws,defaultValue:s.drawStyle,settings:{options:cr.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:Ws,defaultValue:s.lineInterpolation,settings:{options:cr.q.lineInterpolation},showIf:B=>B.drawStyle===Lt.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:Ws,defaultValue:s.barAlignment,settings:{options:cr.q.barAlignment},showIf:B=>B.drawStyle===Lt.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:Ws,defaultValue:s.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:B=>B.drawStyle!==Lt.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:Ws,defaultValue:s.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:B=>B.drawStyle!==Lt.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:Ws,defaultValue:cr.q.fillGradient[0].value,settings:{options:cr.q.fillGradient},showIf:B=>B.drawStyle!==Lt.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:Ws,hideFromDefaults:!0,settings:{filter:B=>B.type===Yn.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:Ws,showIf:B=>B.drawStyle===Lt.l8.Line,editor:Ki,override:Ki,process:to.kG,shouldApply:B=>B.type===Yn.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:Ws,defaultValue:!1,editor:yi,override:yi,showIf:B=>B.drawStyle===Lt.l8.Line,shouldApply:B=>B.type!==Yn.fS.time,process:to.kG,settings:{isTime:D}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",category:Ws,defaultValue:!1,editor:vi,override:vi,showIf:B=>B.drawStyle===Lt.l8.Line,shouldApply:B=>B.type!==Yn.fS.time,process:to.kG,settings:{isTime:D}}).addRadio({path:"showPoints",name:"Show points",category:Ws,defaultValue:cr.q.showPoints[0].value,settings:{options:cr.q.showPoints},showIf:B=>B.drawStyle!==Lt.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:Ws,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:B=>B.showPoints!==Lt.Jp.Never||B.drawStyle===Lt.l8.Points}),Yc.V(T,s.stacking,Ws),T.addSelect({category:Ws,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:Lt.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:Lt.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),xl.r(T,s),Ao.B(T),T.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:Lt.i3.Off},settings:{options:cr.q.thresholdsDisplayModes},editor:Go,override:Go,process:to.kG,shouldApply:()=>!0})}}}var Yr=e(52716),zi=e(12569),Ei=e(37437),ed=e(87786),Fo=e(76941),Hi=e(59561);const Gi=s=>D=>{const T=s.visualization.getColorByName(D?.color||Hi.Jx);return{markerTriangle:(0,F.css)`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${T};
      `,markerBar:(0,F.css)`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${T};
      `}};var td=e(95681),nd=e(40920),ad=e(85830),Zs=e(96227),ji=e(68421),Iu=e(9006),Ou=e(42039),Ru=e(7376);const Al=o.forwardRef(({annotation:s,onSave:D,onDismiss:T,timeFormatter:B,className:W,...G},Y)=>{const q=(0,Q.wW)(Au),se=(0,nr.R9)(),ce=(0,o.useRef)(null);(0,nd.Z)(ce,()=>{T()});const[fe,Se]=(0,td.default)(async on=>{const Vt=await se.onAnnotationCreate(on);return D&&D(),Vt}),[_e,Ae]=(0,td.default)(async on=>{const Vt=await se.onAnnotationUpdate(on);return D&&D(),Vt}),He=s.id!==void 0,tt=s.time!==s.timeEnd,$e=He?Ae:Se,mt=He?_e:fe,Wt=tt?`${B(s.time)} - ${B(s.timeEnd)}`:B(s.time),wt=({tags:on,description:Vt})=>{$e({id:s.id,tags:on,description:Vt,from:Math.round(s.time),to:Math.round(s.timeEnd)})},Ot=o.createElement("div",{ref:Y,className:(0,F.cx)(q.editor,W),...G},o.createElement("div",{className:q.header},o.createElement(dr.Lh,{justify:"space-between",align:"center"},o.createElement("div",{className:q.title},"Add annotation"),o.createElement("div",{className:q.ts},Wt))),o.createElement("div",{className:q.editorForm},o.createElement(ad.l,{onSubmit:wt,defaultValues:{description:s?.text,tags:s?.tags||[]}},({register:on,errors:Vt,control:sn})=>o.createElement(o.Fragment,null,o.createElement(Zs.g,{label:"Description",invalid:!!Vt.description,error:Vt?.description?.message},o.createElement(ji.K,{...on("description",{required:"Annotation description is required"})})),o.createElement(Zs.g,{label:"Tags"},o.createElement(Iu.g,{control:sn,name:"tags",render:({field:{ref:Cn,onChange:Dn,...En}})=>o.createElement(Ou.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:Dn,tagOptions:Ru.lK,tags:En.value})})),o.createElement(dr.Lh,{justify:"flex-end"},o.createElement(Z.zx,{size:"sm",variant:"secondary",onClick:T,fill:"outline"},"Cancel"),o.createElement(Z.zx,{size:"sm",type:"submit",disabled:mt?.loading},mt?.loading?"Saving":"Save"))))));return o.createElement(o.Fragment,null,o.createElement("div",{className:q.backdrop}),o.createElement("div",{ref:ce},Ot))});Al.displayName="AnnotationEditorForm";const Au=s=>({backdrop:(0,F.css)`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${s.zIndex.navbarFixed};
    `,editorContainer:(0,F.css)`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:(0,F.css)`
      background: ${s.colors.background.primary};
      box-shadow: ${s.shadows.z3};
      z-index: ${s.zIndex.dropdown};
      border: 1px solid ${s.colors.border.weak};
      border-radius: ${s.shape.radius.default};
      width: 460px;
    `,editorForm:(0,F.css)`
      padding: ${s.spacing(1)};
    `,header:(0,F.css)`
      border-bottom: 1px solid ${s.colors.border.weak};
      padding: ${s.spacing(1.5,1)};
    `,title:(0,F.css)`
      font-weight: ${s.typography.fontWeightMedium};
    `,ts:(0,F.css)`
      font-size: ${s.typography.bodySmall.fontSize};
      color: ${s.colors.text.secondary};
    `}),Lu=({onDismiss:s,onSave:D,timeZone:T,data:B,selection:W,annotation:G,style:Y})=>{const q=(0,Q.l4)(),se=(0,Q.wW)(wu),ce=(0,Q.wW)(Gi),[fe,Se]=(0,o.useState)(null),[_e,Ae]=(0,o.useState)(null),He=(0,Fo.D)(fe,_e,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let tt=B.fields[0];if(!tt)return null;const $e=tt.display||(0,Qs.U)({field:tt,timeZone:T,theme:q}),mt=W.min!==W.max;return o.createElement(rs.h_,null,o.createElement(o.Fragment,null,o.createElement("div",{style:Y},o.createElement("div",{className:(0,F.cx)((0,F.css)`
                position: absolute;
                top: ${W.bbox.top}px;
                left: ${W.bbox.left}px;
                width: ${W.bbox.width}px;
                height: ${W.bbox.height}px;
              `,mt?se.overlayRange(G):se.overlay(G))},o.createElement("div",{ref:Se,className:mt?(0,F.cx)(ce(G).markerBar,se.markerBar):(0,F.cx)(ce(G).markerTriangle,se.markerTriangle)}))),o.createElement(Al,{annotation:G||{time:W.min,timeEnd:W.max},timeFormatter:Wt=>$e(Wt).text,onSave:D,onDismiss:s,ref:Ae,style:He.styles.popper,...He.attributes.popper})))},wu=s=>({overlay:D=>{const T=s.visualization.getColorByName(D?.color||Hi.Jx);return(0,F.css)`
        border-left: 1px dashed ${T};
      `},overlayRange:D=>{const T=s.visualization.getColorByName(D?.color||Hi.Jx);return(0,F.css)`
        background: ${ho.alpha(T,.1)};
        border-left: 1px dashed ${T};
        border-right: 1px dashed ${T};
      `},markerTriangle:(0,F.css)`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:(0,F.css)`
      top: 100%;
      left: 0;
      position: absolute;
    `}),Ll=({data:s,timeZone:D,config:T,children:B})=>{const W=(0,o.useRef)(),[G,Y]=(0,o.useState)(),[q,se]=(0,o.useState)(!1),[ce,fe]=(0,o.useState)(null),Se=(0,ed.Z)(),_e=(0,o.useCallback)(()=>{fe(null),W.current&&W.current.setSelect({top:0,left:0,width:0,height:0}),se(!1)},[se,fe]);(0,o.useLayoutEffect)(()=>{let He=!1;T.addHook("init",$e=>{W.current=$e;const mt=$e.hooks.setSelect;if(mt)for(let Wt=0;Wt<mt.length;Wt++){const wt=mt[Wt];wt!==tt&&(mt[Wt]=(...Ot)=>{!He&&wt(...Ot)})}}),T.addHook("syncRect",($e,mt)=>{Se()&&Y(mt)});const tt=$e=>{He&&(se(!0),fe({min:$e.posToVal($e.select.left,"x"),max:$e.posToVal($e.select.left+$e.select.width,"x"),bbox:{left:$e.select.left,top:0,height:$e.select.height,width:$e.select.width}}),He=!1)};T.addHook("setSelect",tt),T.setCursor({bind:{mousedown:($e,mt,Wt)=>wt=>(He=wt.button===0&&(wt.metaKey||wt.ctrlKey),Wt(wt),null),mouseup:($e,mt,Wt)=>wt=>(He&&$e.select.width===0&&($e.select.left=$e.cursor.left,$e.select.height=$e.bbox.height/window.devicePixelRatio),Wt(wt),null)}})},[T,Y,Se]);const Ae=(0,o.useCallback)(({coords:He})=>{if(!W.current||!G||!He)return;const tt=W.current.posToVal(He.plotCanvas.x,"x");tt&&(fe({min:tt,max:tt,bbox:{left:He.plotCanvas.x,top:0,height:G.height,width:0}}),se(!0))},[G]);return o.createElement(o.Fragment,null,q&&ce&&G&&o.createElement(Lu,{selection:ce,onDismiss:_e,onSave:_e,data:s,timeZone:D,style:{position:"absolute",top:`${G.top}px`,left:`${G.left}px`,width:`${G.width}px`,height:`${G.height}px`}}),B?B({startAnnotating:Ae}):null)};var bi=e(98579),sd=e(33582),xi=e(48069),rd=e(47330),Zo=e(53039),od=e(51064);const wl=({annotation:s,timeFormatter:D,canEdit:T,canDelete:B,onEdit:W,onDelete:G})=>{const Y=(0,Q.wW)(Bu),q=D(s.time),se=D(s.timeEnd);let ce=s.text;const fe=s.tags;let Se="",_e,Ae,He=null;const tt=o.createElement("span",{className:Y.time},s.isRegion?`${q} - ${se}`:q);if(s.login&&s.avatarUrl&&(_e=o.createElement("img",{className:Y.avatar,alt:"Annotation avatar",src:s.avatarUrl})),s.alertId!==void 0&&s.newState){const $e=ae.Z.getStateDisplayModel(s.newState);He=o.createElement("div",{className:Y.alertState},o.createElement("i",{className:$e.stateClass},$e.text)),Se=ae.Z.getAlertAnnotationInfo(s)}else s.title&&(ce=s.title+"<br />"+(typeof ce=="string"?ce:""));return(T||B)&&(Ae=o.createElement("div",{className:Y.editControls},T&&o.createElement(ls.h,{name:"pen",size:"sm",onClick:W,tooltip:"Edit"}),B&&o.createElement(ls.h,{name:"trash-alt",size:"sm",onClick:G,tooltip:"Delete"}))),o.createElement("div",{className:Y.wrapper},o.createElement("div",{className:Y.header},o.createElement(dr.Lh,{justify:"space-between",align:"center",spacing:"md"},o.createElement("div",{className:Y.meta},o.createElement("span",null,_e,He),tt),Ae)),o.createElement("div",{className:Y.body},ce&&o.createElement("div",{dangerouslySetInnerHTML:{__html:_a.QX.sanitize(ce)}}),Se,o.createElement(o.Fragment,null,o.createElement(dr.Lh,{spacing:"xs",wrap:!0},fe?.map(($e,mt)=>o.createElement(od.V,{name:$e,key:`${$e}-${mt}`}))))))};wl.displayName="AnnotationTooltip";const Bu=s=>({wrapper:(0,F.css)`
      max-width: 400px;
    `,commentWrapper:(0,F.css)`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:(0,F.css)`
      padding: ${s.spacing(.5,1)};
      border-bottom: 1px solid ${s.colors.border.weak};
      font-size: ${s.typography.bodySmall.fontSize};
      display: flex;
    `,meta:(0,F.css)`
      display: flex;
      justify-content: space-between;
    `,editControls:(0,F.css)`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:(0,F.css)`
      border-radius: ${s.shape.radius.circle};
      width: 16px;
      height: 16px;
      margin-right: ${s.spacing(1)};
    `,alertState:(0,F.css)`
      padding-right: ${s.spacing(1)};
      font-weight: ${s.typography.fontWeightMedium};
    `,time:(0,F.css)`
      color: ${s.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:(0,F.css)`
      padding: ${s.spacing(1)};

      a {
        color: ${s.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),id=6,Bl={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function Nl({annotation:s,timeZone:D,width:T}){const{canAddAnnotations:B,canEditAnnotations:W,canDeleteAnnotations:G,...Y}=(0,nr.R9)(),q=(0,Q.wW)(Gi),se=(0,Q.wW)(ld),[ce,fe]=(0,o.useState)(!1),[Se,_e]=(0,o.useState)(!1),[Ae,He]=(0,o.useState)(null),[tt,$e]=(0,o.useState)(null),[mt,Wt]=(0,o.useState)(null),wt=(0,o.useRef)(),Ot=(0,Fo.D)(Ae,tt,Bl),on=(0,Fo.D)(Ae,mt,Bl),Vt=(0,o.useCallback)(()=>{_e(!0),fe(!1)},[_e,fe]),sn=(0,o.useCallback)(()=>{Y.onAnnotationDelete&&Y.onAnnotationDelete(s.id)},[s,Y]),Cn=(0,o.useCallback)(()=>{wt.current&&clearTimeout(wt.current),fe(!0)},[fe]),Dn=(0,o.useCallback)(()=>{wt.current&&clearTimeout(wt.current)},[]),En=(0,o.useCallback)(()=>{wt.current=setTimeout(()=>{fe(!1)},100)},[fe]),kn=(0,o.useCallback)(Jn=>(0,xi.dq)(Jn,{format:rd.U6.fullDate,timeZone:D}),[D]),bn=(0,o.useCallback)(()=>o.createElement(wl,{annotation:s,timeFormatter:kn,onEdit:Vt,onDelete:sn,canEdit:W(s.dashboardUID),canDelete:G(s.dashboardUID)}),[W,G,sn,Vt,kn,s]),ra=!!s.isRegion&&T>id;let Rn=`${T/2}px`,Sn=o.createElement("div",{className:q(s).markerTriangle,style:{left:Rn,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return ra&&(Sn=o.createElement("div",{className:q(s).markerBar,style:{width:`${T}px`,transform:"translate3d(0,-50%, 0)"}})),o.createElement(o.Fragment,null,o.createElement("div",{ref:He,onMouseEnter:Cn,onMouseLeave:En,className:ra?void 0:se.markerWrapper,"data-testid":Bt.wl.pages.Dashboard.Annotations.marker},Sn),ce&&o.createElement(rs.h_,null,o.createElement("div",{ref:$e,style:Ot.styles.popper,...Ot.attributes.popper,className:se.tooltip,onMouseEnter:Dn,onMouseLeave:En},bn())),Se&&o.createElement(rs.h_,null,o.createElement(Al,{onDismiss:()=>_e(!1),onSave:()=>_e(!1),timeFormatter:kn,annotation:s,ref:Wt,style:on.styles.popper,...on.attributes.popper})))}const ld=s=>({markerWrapper:(0,F.css)`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:(0,F.css)`
      max-width: 400px;
    `,tooltip:(0,F.css)`
      ${(0,Zo.getTooltipContainerStyles)(s)};
      padding: 0;
    `}),Fl=({annotations:s,timeZone:D,config:T})=>{const B=(0,Q.l4)(),W=(0,o.useRef)(),G=(0,o.useRef)();(0,o.useEffect)(()=>{const se=[];for(const ce of s)se.push(new bi.U(ce));return G.current=se,()=>{G.current=[]}},[s]),(0,o.useLayoutEffect)(()=>{T.addHook("init",se=>{W.current=se}),T.addHook("draw",se=>{if(!G.current)return null;const ce=se.ctx;if(!ce)return;ce.save(),ce.beginPath(),ce.rect(se.bbox.left,se.bbox.top,se.bbox.width,se.bbox.height),ce.clip();const fe=(Se,_e)=>{ce.beginPath(),ce.lineWidth=2,ce.strokeStyle=_e,ce.setLineDash([5,5]),ce.moveTo(Se,se.bbox.top),ce.lineTo(Se,se.bbox.top+se.bbox.height),ce.stroke(),ce.closePath()};for(let Se=0;Se<G.current.length;Se++){const _e=G.current[Se];for(let Ae=0;Ae<_e.length;Ae++){const He=_e.get(Ae);if(!He.time)continue;let tt=se.valToPos(He.time,"x",!0);const $e=B.visualization.getColorByName(He.color);if(fe(tt,$e),He.isRegion&&He.timeEnd){let mt=se.valToPos(He.timeEnd,"x",!0);fe(mt,$e),ce.fillStyle=ho.alpha($e,.1),ce.rect(tt,se.bbox.top,mt-tt,se.bbox.height),ce.fill()}}}ce.restore()})},[T,B]);const Y=(0,o.useCallback)((se,ce)=>{const Se=new bi.U(se).get(ce.fieldIndex);if(!Se.time||!W.current)return;let _e=W.current.valToPos(Se.time,"x");return _e<0&&(_e=0),{x:_e,y:W.current.bbox.height/window.devicePixelRatio+4}},[]),q=(0,o.useCallback)((se,ce)=>{let fe=0;const _e=new bi.U(se).get(ce.fieldIndex);if(!!_e.isRegion&&W.current){let He=W.current.valToPos(_e.time,"x"),tt=W.current.valToPos(_e.timeEnd,"x");He<0&&(He=0),tt>W.current.bbox.width/window.devicePixelRatio&&(tt=W.current.bbox.width/window.devicePixelRatio),fe=tt-He}return o.createElement(Nl,{annotation:_e,timeZone:D,width:fe})},[D]);return o.createElement(sd.T,{id:"annotations",config:T,events:s,renderEventMarker:q,mapEventToXYCoords:Y})};var Nu=e(17639),Fu=e(84415),Ul=e(43078),Is=e(85001),Jo=e(53790);const Xo=({data:s,config:D,onClose:T,timeZone:B,replaceVariables:W,...G})=>{const Y=(0,o.useRef)(),[q,se]=(0,o.useState)(null),[ce,fe]=(0,o.useState)(null),[Se,_e]=(0,o.useState)(!1),Ae=(0,o.useCallback)(()=>{_e(!0)},[_e]),He=(0,o.useCallback)(()=>{_e(!1)},[_e]),tt=(0,o.useCallback)(()=>{(0,Yo.Zp)("ContextMenuPlugin",!1,"clearing click selection"),fe(null)},[fe]);(0,o.useLayoutEffect)(()=>{let mt;const Wt=wt=>{let Ot={viewport:{x:wt.clientX,y:wt.clientY},plotCanvas:{x:0,y:0}};mt&&(Ot={...Ot,plotCanvas:{x:wt.clientX-mt.left,y:wt.clientY-mt.top}}),se(Ot)};D.addHook("syncRect",(wt,Ot)=>{mt=Ot}),D.addHook("init",wt=>{const Ot=wt.over;Y.current=Ot||void 0,Y.current?.addEventListener("mousedown",Wt),(0,Yo.Zp)("ContextMenuPlugin",!1,"init");let on=!1,Vt=Array.from(wt.root.querySelectorAll(".u-cursor-pt"));Y.current?.addEventListener("mousedown",()=>{on=!0}),Y.current?.addEventListener("mousemove",()=>{on=!1}),Y.current?.addEventListener("mouseup",sn=>{if(!on||sn.metaKey||sn.ctrlKey){fe(null);return}on=!0,sn.target instanceof HTMLElement&&(sn.target.classList.contains("u-cursor-pt")||((0,Yo.Zp)("ContextMenuPlugin",!1,"canvas click"),fe({seriesIdx:null,dataIdx:null}))),Ae()}),Vt.length>0&&Vt.forEach((sn,Cn)=>{sn.addEventListener("click",()=>{const Dn=Cn+1,En=wt.cursor.idx;(0,Yo.Zp)("ContextMenuPlugin",!1,Dn,En),fe({seriesIdx:Dn,dataIdx:En??null})})})})},[D,Ae,se,fe]);const $e=(0,o.useMemo)(()=>G.defaultItems?G.defaultItems.map(mt=>({...mt,items:mt.items.map(Wt=>({...Wt,onClick:wt=>{q&&Wt.onClick?.(wt,{coords:q})}}))})):[],[q,G.defaultItems]);return o.createElement(o.Fragment,null,Se&&q&&o.createElement(Uu,{data:s,frames:G.frames,defaultItems:$e,timeZone:B,selection:{point:ce,coords:q},replaceVariables:W,onClose:()=>{tt(),He(),T&&T()}}))},Uu=({selection:s,timeZone:D,defaultItems:T,replaceVariables:B,data:W,...G})=>{const Y=(0,o.useRef)(null),q=()=>{G.onClose&&G.onClose()};(0,Nu.Z)(Y,()=>{q()});const se=W.fields[0];if(!se)return null;const ce=T?[...T]:[];let fe=()=>null;if(s.point){const{seriesIdx:_e,dataIdx:Ae}=s.point,He=se.display;if(_e&&Ae!==null){const tt=W.fields[_e],$e=tt.display(tt.values[Ae]);tt.config.links&&tt.config.links.length>0&&tt.getLinks&&ce.push({items:tt.getLinks({valueRowIndex:Ae}).map(Wt=>({label:Wt.title,ariaLabel:Wt.title,url:Wt.href,target:Wt.target,icon:Wt.target==="_self"?"link":"external-link-alt",onClick:Wt.onClick}))}),fe=()=>o.createElement(Fu.b,{timestamp:He(se.values[Ae]).text,displayValue:$e,seriesColor:$e.color,displayName:(0,os.CZ)(tt,W,G.frames)})}}const Se=()=>ce?.map((_e,Ae)=>o.createElement(Ul.k,{key:`${_e.label}${Ae}`,label:_e.label},(_e.items||[]).map(He=>o.createElement(Is.s,{key:He.label,url:He.url,label:He.label,target:He.target,icon:He.icon,active:He.active,onClick:He.onClick}))));return o.createElement(Jo.x,{renderMenuItems:Se,renderHeader:fe,x:s.coords.viewport.x,y:s.coords.viewport.y,onClose:q})};var Wu=e(63544),_u=e(61068);const $u=({timeZone:s,dataFrame:D,dataFrameFieldIndex:T,config:B,exemplarColor:W,clickedExemplarFieldIndex:G,setClickedExemplarFieldIndex:Y})=>{const q=(0,Q.wW)(Vu),[se,ce]=(0,o.useState)(!1),[fe,Se]=(0,o.useState)(!1),[_e,Ae]=o.useState(null),[He,tt]=o.useState(null),{styles:$e,attributes:mt}=(0,Fo.D)(_e,He,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),Wt=(0,o.useRef)();(0,o.useEffect)(()=>{G?.fieldIndex===T.fieldIndex&&G?.frameIndex===T.frameIndex||Se(!1)},[G,T]);const wt=()=>{const En=[o.createElement("rect",{fill:W,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),o.createElement("path",{fill:W,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),o.createElement("path",{fill:W,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),o.createElement("rect",{fill:W,key:"rectangle",width:"5",height:"5"}),o.createElement("path",{fill:W,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),o.createElement("path",{fill:W,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return En[T.frameIndex%En.length]},Ot=(0,o.useCallback)(()=>{G===void 0&&(Wt.current&&clearTimeout(Wt.current),ce(!0))},[ce,G]),on=()=>{Se(!0)},Vt=(0,o.useCallback)(()=>{Wt.current=setTimeout(()=>{ce(!1)},150)},[ce]),sn=(0,o.useCallback)(()=>{const En=D.fields.filter(Rn=>Rn.config.links?.length&&Rn.config.links?.length>0)||[],kn=[...En,...D.fields.filter(Rn=>!En.includes(Rn))],bn=Rn=>(0,xi.dq)(Rn,{format:rd.U6.fullDate,timeZone:s}),ra=()=>{Se(!1),ce(!1),Y(void 0)};return o.createElement("div",{onMouseEnter:Ot,onMouseLeave:Vt,className:q.tooltip,ref:tt,style:$e.popper,...mt.popper},o.createElement("div",{className:q.wrapper},fe&&o.createElement(_u.o,{onClick:ra}),o.createElement("div",{className:q.body},o.createElement("div",{className:q.header},o.createElement("span",{className:q.title},"Exemplars")),o.createElement("div",null,o.createElement("table",{className:q.exemplarsTable},o.createElement("tbody",null,kn.map((Rn,Sn)=>{const Jn=Rn.values[T.fieldIndex],Kn=Rn.config.links?.length?Rn.getLinks?.({valueRowIndex:T.fieldIndex}):void 0;return o.createElement("tr",{key:Sn},o.createElement("td",{valign:"top"},Rn.name),o.createElement("td",null,o.createElement("div",{className:q.valueWrapper},o.createElement("span",null,Rn.type===Yn.fS.time?bn(Jn):Jn),Kn&&o.createElement(Wu.Z,{links:Kn}))))})))))))},[mt.popper,D.fields,T,Ot,Vt,$e.popper,q,s,fe,Y]),Cn=B.getSeries().find(En=>En.props.dataFrameFieldIndex?.frameIndex===T.frameIndex)?.props.lineColor,Dn=()=>{Y(T),on()};return o.createElement(o.Fragment,null,o.createElement("div",{ref:Ae,onClick:Dn,onKeyDown:En=>{En.key==="Enter"&&Dn()},onMouseEnter:Ot,onMouseLeave:Vt,className:q.markerWrapper,"aria-label":Bt.wl.components.DataSource.Prometheus.exemplarMarker,role:"button",tabIndex:0},o.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:Cn},className:(0,F.cx)(q.marble,(se||fe)&&q.activeMarble)},wt())),(se||fe)&&o.createElement(rs.h_,null,sn()))},Vu=s=>{const D=s.isDark?s.v1.palette.dark2:s.v1.palette.white,T=s.isDark?s.v1.palette.dark9:s.v1.palette.gray5,B=s.isDark?s.v1.palette.black:s.v1.palette.white,W=s.isDark?s.v1.palette.dark3:s.v1.palette.gray6;return{markerWrapper:(0,F.css)`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:(0,F.css)`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${s.v1.palette.red};
      pointer-events: none;
    `,wrapper:(0,F.css)`
      background: ${D};
      border: 1px solid ${T};
      border-radius: ${s.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${B};
      padding: ${s.spacing(1)};
    `,exemplarsTable:(0,F.css)`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${s.components.panel.background};
      }

      tr {
        background-color: ${s.colors.background.primary};

        &:nth-child(even) {
          background-color: ${W};
        }
      }
    `,valueWrapper:(0,F.css)`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${s.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:(0,F.css)`
      background: none;
      padding: 0;
      overflow-y: auto;
      max-height: 95vh;
    `,header:(0,F.css)`
      background: ${T};
      padding: 6px 10px;
      display: flex;
    `,title:(0,F.css)`
      font-weight: ${s.typography.fontWeightMedium};
      padding-right: ${s.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:(0,F.css)`
      font-weight: ${s.typography.fontWeightMedium};
      border-radius: ${s.shape.borderRadius(2)};
      overflow: hidden;
    `,marble:(0,F.css)`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:(0,F.css)`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},cd=({exemplars:s,timeZone:D,config:T,visibleSeries:B})=>{const W=(0,o.useRef)(),[G,Y]=(0,o.useState)();(0,o.useLayoutEffect)(()=>{T.addHook("init",ce=>{W.current=ce})},[T]);const q=(0,o.useCallback)((ce,fe)=>{const Se=ce.fields.find(mt=>mt.name===Yn.Ls),_e=ce.fields.find(mt=>mt.name===Yn.M5);if(!Se||!_e||!W.current)return;const Ae=Object.keys(W.current.scales).find(mt=>!["x","y"].some(Wt=>Wt===mt))??Ni.j,He=W.current.scales[Ae].min,tt=W.current.scales[Ae].max;let $e=_e.values[fe.fieldIndex];return He!=null&&$e<He&&($e=He),tt!=null&&$e>tt&&($e=tt),{x:W.current.valToPos(Se.values[fe.fieldIndex],"x"),y:W.current.valToPos($e,Ae)}},[]),se=(0,o.useCallback)((ce,fe)=>{const Se=B!==void 0?ud(B,ce,fe):!0,_e=B!==void 0?dd(ce,fe,B):void 0;return Se?o.createElement($u,{setClickedExemplarFieldIndex:Y,clickedExemplarFieldIndex:G,timeZone:D,dataFrame:ce,dataFrameFieldIndex:fe,config:T,exemplarColor:_e}):o.createElement(o.Fragment,null)},[T,D,B,Y,G]);return o.createElement(sd.T,{config:T,id:"exemplars",events:s,renderEventMarker:se,mapEventToXYCoords:q})},Ku=(s,D)=>{const T=s.series.filter(W=>W.props.show),B=[];return D?.length&&T.forEach(W=>{const G=W.props?.dataFrameFieldIndex?.frameIndex,Y=W.props?.dataFrameFieldIndex?.fieldIndex;if(G!==void 0&&Y!==void 0){const q=D[G]?.fields[Y];q?.labels&&B.push({labels:q.labels,color:W.props?.lineColor??""})}}),{labels:B,totalSeriesCount:s.series.length}},dd=(s,D,T)=>{let B;return T.labels.some(W=>{const G=Object.keys(W.labels),Y=s.fields.filter(q=>G.find(se=>se===q.name));return Y.length&&Y.every((se,ce,fe)=>{const Se=se.values[D.fieldIndex];return W.labels[se.name]===Se})?(B=W.color,!0):!1}),B},ud=(s,D,T)=>{let B=!1;return s.labels.length===s.totalSeriesCount?B=!0:s.labels.some(W=>{const G=Object.keys(W.labels);if(Object.keys(W.labels).length===0)B=!0;else{const Y=D.fields.filter(q=>G.find(se=>se===q.name));Y.length&&(B=s.labels.some(q=>Object.keys(q.labels).every(se=>{const ce=q.labels[se];return Y.find(fe=>fe.values[T.fieldIndex]===ce)})))}return B}),B},Uo=({config:s,onChangeTimeRange:D})=>{const T=(0,o.useRef)(),[B,W]=(0,o.useState)([]),[G,Y]=(0,o.useState)();if((0,o.useLayoutEffect)(()=>{s.addHook("init",Ae=>{T.current=Ae}),s.addHook("setScale",Ae=>{W(Ae.data?.[0]??[]),Y(Ae.scales.x??void 0)})},[s]),B.length<2||!D||!G||!G.time||!G.min||!G.max)return null;let q=0,se=B.length-1;for(;q<=se&&B[q]==null;)q++;for(;se>=0&&B[se]==null;)se--;const ce=B[q],fe=B[se],Se=G.min,_e=G.max;return ce==null||fe==null||ce<=_e&&fe>=Se?null:o.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},o.createElement("div",null,o.createElement("div",null,"Data outside time range"),o.createElement(Z.zx,{onClick:Ae=>D({from:ce,to:fe}),variant:"secondary","data-testid":"time-series-zoom-to-data"},"Zoom to data")))};Uo.displayName="OutsideRangePlugin";var Wl=e(76685),ku=e(28118),zu=e.n(ku);const md=({step:s,y:D,dragBounds:T,mapPositionToValue:B,formatValue:W,onChange:G})=>{const Y=(0,Q.l4)();let q=D,se="none";D<(T.top??0)&&(se="top"),D>(T.bottom??0)+22&&(se="bottom"),se==="bottom"&&(q=T.bottom??D),se==="top"&&(q=T.top??D);const ce=typeof G!="function",fe=(0,Q.wW)(He=>Hu(He,s,se,ce)),[Se,_e]=(0,o.useState)(s.value),Ae=(0,o.useMemo)(()=>Y.colors.getContrastText(Y.visualization.getColorByName(s.color)),[s.color,Y]);return o.createElement(zu(),{axis:"y",grid:[1,1],disabled:ce,onStop:ce?ne.noop:(He,tt)=>(G(B(tt.lastY)),!1),onDrag:(He,tt)=>_e(B(tt.lastY)),position:{x:0,y:q},bounds:T},o.createElement("div",{className:fe.handle,style:{color:Ae}},o.createElement("span",{className:fe.handleText},W(Se))))};md.displayName="ThresholdDragHandle";const Hu=(s,D,T,B)=>{const W=s.visualization.getColorByName(D.color),G=Gu(T),Y=T!=="none";return{handle:(0,F.css)`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${W};
      cursor: ${B?"initial":"grab"};
      border-top-right-radius: ${s.shape.radius.default};
      border-bottom-right-radius: ${s.shape.radius.default};
      ${Y&&(0,F.css)`
        margin-top: 0;
        border-radius: ${s.shape.radius.default};
      `}
      background: ${W};
      font-size: ${s.typography.bodySmall.fontSize};
      &:before {
        ${G};
      }
    `,handleText:(0,F.css)`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function Gu(s){const D=s==="none",T=B=>(0,F.css)`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${B}px;
    border-right-color: inherit;
    border-top: ${B}px solid transparent;
    border-bottom: ${B}px solid transparent;
  `;return D?(0,F.css)`
      ${T(9)};
      left: -9px;
    `:s==="top"?(0,F.css)`
      ${T(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:s==="bottom"?(0,F.css)`
      ${T(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const fd=60,_l=({config:s,fieldConfig:D,onThresholdsChange:T})=>{const B=(0,o.useRef)(),[W,G]=(0,o.useState)(0);(0,o.useLayoutEffect)(()=>{s.setPadding([0,fd,0,0]),s.addHook("init",q=>{B.current=q}),s.addHook("draw",()=>{G(q=>q+1)})},[s]);const Y=(0,o.useMemo)(()=>{const q=B.current;if(!q)return null;const se=D.defaults.thresholds;if(!se)return null;const ce=(0,Wl.z1)(D.defaults,Yn.fS.number),fe=D.defaults.decimals,Se=[];for(let _e=0;_e<se.steps.length;_e++){const Ae=se.steps[_e],He=q.valToPos(Ae.value,ce);if(Number.isNaN(He)||!Number.isFinite(He))continue;const tt=q.bbox.height/window.devicePixelRatio,mt=typeof T=="function"?wt=>{const Ot=[...se.steps.slice(0,_e),...se.steps.slice(_e+1),{...se.steps[_e],value:wt}].sort((on,Vt)=>on.value-Vt.value);T({...se,steps:Ot})}:void 0,Wt=o.createElement(md,{key:`${Ae.value}-${_e}`,step:Ae,y:He,dragBounds:{top:0,bottom:tt},mapPositionToValue:wt=>q.posToVal(wt,ce),formatValue:wt=>(0,Ts.Cf)(ce)(wt,fe).text,onChange:mt});Se.push(Wt)}return Se},[W,D,T]);return B.current?o.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(B.current.bbox.left+B.current.bbox.width)/window.devicePixelRatio}px`,top:`${B.current.bbox.top/window.devicePixelRatio}px`,width:`${fd}px`,height:`${B.current.bbox.height/window.devicePixelRatio}px`}},Y):null};_l.displayName="ThresholdControlsPlugin";var ju=e(86756),$l=e(88350),Vl=e(26204),Kl=e(12714),Yu=e(69994);function Qu(s){let D=new Map;return s.map(B=>({...B,fields:B.fields.map(W=>{if(W.type===Yn.fS.enum){let G=(0,Wl.z1)(W.config,W.type),Y=D.get(G);Y||(Y=[],D.set(G,Y));let q=W.values.toArray().slice(),se=W.config.type.enum.text;if(Y.length>0)for(let ce=0;ce<q.length;ce++)q[ce]+=Y.length;return Y.push(...se),W.config.type.enum.text=Y,{...W,values:new ju.G(q)}}return W})}))}function kl(s,D,T,B){if(!s?.length)return null;let W=B!=null;B!=null&&B>0&&(s=[{...s[0],fields:[s[0].fields[B],...s[0].fields.filter((se,ce)=>ce!==B)]}]);for(let se of s)for(let ce of se.fields)ce.type===Yn.fS.time&&typeof ce.values[0]!="number"&&(ce.values=(0,Vl.p8)(ce,{destinationType:Yn.fS.time}).values);let G=0;e:for(let se of s)for(let ce of se.fields)if(ce.type===Yn.fS.enum&&++G>1){s=Qu(s);break e}let Y;const q=[];for(let se of s){const ce=[];let fe=!1,Se=!1,_e=W?se:(0,Kl.w)({frame:se,refFieldPseudoMin:T?.from.valueOf(),refFieldPseudoMax:T?.to.valueOf()});const Ae=(0,Yu.I)(_e).fields;for(let He=0;He<Ae?.length;He++){const tt=Ae[He];switch(tt.type){case Yn.fS.time:fe=!0,ce.push(tt);break;case Yn.fS.number:Se=W?He>0:!0,Y={...tt,values:tt.values.map(Wt=>Number.isFinite(Wt)||Wt==null?Wt:null)},ce.push(Y);break;case Yn.fS.enum:Se=!0;case Yn.fS.string:Y={...tt,values:tt.values},ce.push(Y);break;case Yn.fS.boolean:Se=!0;const $e=tt.config?.custom??{},mt={...tt.config,max:1,min:0,custom:$e};$e.lineInterpolation!==Lt.KC.StepBefore&&($e.lineInterpolation=Lt.KC.StepAfter),Y={...tt,config:mt,type:Yn.fS.number,values:tt.values.map(Wt=>Wt==null?Wt:Wt?1:0)},(0,Ts.br)(mt.unit)||(mt.unit="bool",Y.display=(0,Qs.U)({field:Y,theme:D})),ce.push(Y);break}}(W||fe)&&Se&&q.push({...se,length:_e.length,fields:ce})}return q.length?(gd(q,D,0),Zu(q,D),q):null}const Zu=(s,D)=>{const{palette:T}=D.visualization;for(const B of s)for(const W of B.fields)if(W.type===Yn.fS.enum){const G=T[W.state?.seriesIndex%T.length],Y=D.visualization.getColorByName(G),q=W.config.type.enum;q.color=Array(q.text.length).fill(Y),W.display=(0,Qs.U)({field:W,theme:D})}},gd=(s,D,T)=>{let B=0;s.forEach(W=>{W.fields.forEach((G,Y)=>{Y!==T&&(G.type===Yn.fS.number||G.type===Yn.fS.boolean||G.type===Yn.fS.enum)&&(G.state={...G.state,seriesIndex:B++},G.display=(0,Qs.U)({field:G,theme:D}))})})};function Yi(s,D){return!s||!s.length?[D]:s.map(T=>T?.length?T:D)}function Qi(s,D,T,B,W){return s.fields.forEach(G=>{if(G.state?.origin?.frameIndex===void 0||D[G.state?.origin?.frameIndex]===void 0)return;const Y=[];for(const se of D[G.state?.origin?.frameIndex].fields)if(se.type===Yn.fS.string)if(G.values instanceof $l.o){const ce={...se};ce.values=new $l.o(se.values,G.values.getOrderArray()),Y.push(ce)}else Y.push(se);const q={fields:[...s.fields,...Y],length:s.fields.length+Y.length};G.getLinks=(0,Yr.oB)(q,G,G.state.scopedVars,T,B,W)}),s}var ur=(s=>(s.Candles="candles",s.CandlesVolume="candles+volume",s.Volume="volume",s))(ur||{}),Zi=(s=>(s.Candles="candles",s.OHLCBars="ohlcbars",s))(Zi||{}),Eo=(s=>(s.CloseClose="close-close",s.OpenClose="open-close",s))(Eo||{});const zl={down:"red",flat:"gray",up:"green"},bo={...{candleStyle:"candles",colorStrategy:"open-close",colors:{down:"red",up:"green",flat:"gray"},fields:{},includeAllFields:!1,mode:"candles+volume"},legend:{displayMode:Lt.jK.List,showLegend:!0,placement:"bottom",calcs:[]}},ao={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function Hl(s,D,T){const B=(0,Dr.findField)(s,T[D.key]);if(!B)for(const W of s.fields){const G=(0,os.CZ)(W,s).toLowerCase();if(D.defaults.includes(G)||D.defaults.includes(W.name))return W}return B}function Gl(s,D,T,B){if(!s?.length)return null;const W=D.fields??{},G=s.length===1?(0,fi.Y3)(s[0],s[0].fields.findIndex(Ae=>Ae.type===Yn.fS.time)):(0,fi._9)({frames:s});if(!G?.length)return null;const Y={aligned:G,frame:G,names:{}},q=kl([G],T,B);if(!q)return null;const se=Y.frame=q[0],ce=se.fields.findIndex(Ae=>Ae.type===Yn.fS.time);if(ce<0)return null;const fe=new Set;for(const Ae of Object.values(ao)){const He=Hl(se,Ae,W);He&&(Y[Ae.key]=He,fe.add(He))}if(!Y.open&&!Y.close&&(Y.open=se.fields.find(Ae=>Ae.type===Yn.fS.number),Y.open&&fe.add(Y.open)),Y.open&&!Y.close&&!W.close){const Ae=Y.open.values.slice(1);Ae.push(Ae[Ae.length-1]),Y.close={...Y.open,values:Ae,name:"Next open",state:void 0},fe.add(Y.close),se.fields.push(Y.close),Y.autoOpenClose=!0}if(Y.close&&!Y.open&&!W.open){const Ae=Y.close.values.slice();Ae.unshift(Ae[0]),Ae.length=se.length,Y.open={...Y.close,values:Ae,name:"Previous close",state:void 0},fe.add(Y.open),se.fields.push(Y.open),Y.autoOpenClose=!0}!Y.high&&!W.high&&(Y.high=Y.open),!Y.low&&!W.low&&(Y.low=Y.open),D.mode===ur.Volume?(Y.high&&(Y.high!==Y.open&&fe.delete(Y.high),Y.high=void 0),Y.low&&(Y.low!==Y.open&&fe.delete(Y.low),Y.low=void 0)):D.mode===ur.Candles&&Y.volume&&(fe.delete(Y.volume),Y.volume=void 0);for(const Ae of Object.values(ao)){const He=Y[Ae.key];He&&(Y.names[Ae.key]=(0,os.CZ)(He,Y.frame))}const Se=se.fields[ce],_e=[Se];D.includeAllFields?_e.push(...se.fields.filter(Ae=>Ae!==Se)):_e.push(...fe),Y.frame={...Y.frame,fields:_e};for(let Ae=0;Ae<Y.frame.fields.length;Ae++){const He=Y.frame.fields[Ae];He.state={...He.state,seriesIndex:Ae-1,origin:{fieldIndex:Ae,frameIndex:0}}}return Y}const{alpha:jl}=ho;function Xu(s){let{mode:D,candleStyle:T,fields:B,colorStrategy:W,upColor:G,downColor:Y,flatColor:q,volumeAlpha:se,flatAsUp:ce=!0}=s;const fe=D!==ur.Volume&&B.high!=null&&B.low!=null,Se=fe&&T===Zi.Candles,_e=D!==ur.Candles&&B.volume!=null;function Ae(Ot,on,Vt,sn,Cn){return Ot>0?Vt:Ot<0?sn:Cn?Vt:on}let He=0,tt=B.open,$e=B.high,mt=B.low,Wt=B.close,wt=B.volume;return Ot=>{let on,Vt,sn,Cn,Dn,En;fe&&(sn=new Path2D,Vt=new Path2D,on=new Path2D),_e&&(Cn=new Path2D,Dn=new Path2D,En=new Path2D);let kn=new Path2D,bn=Ot.ctx,ra=Ot.data[He],Rn=Ot.data[tt],Sn=Ot.data[Wt],Jn=fe?Ot.data[$e]:null,Kn=fe?Ot.data[mt]:null,wa=_e?Ot.data[wt]:null,Fa=wt!=null?Math.round(Ot.valToPos(0,Ot.series[wt].scale,!0)):null,[Oa,Aa]=Ot.series[0].idxs,Gn=Ot.data[0],wn=Rn,ea=Ot.bbox.width;if(Gn.length>1){let Ua=null;for(let Vn=0,_n=1/0;Vn<Gn.length;Vn++)if(wn[Vn]!==void 0){if(Ua!=null){let Xn=Math.abs(Gn[Vn]-Gn[Ua]);Xn<_n&&(_n=Xn,ea=Math.abs(Ot.valToPos(Gn[Vn],"x",!0)-Ot.valToPos(Gn[Ua],"x",!0)))}Ua=Vn}}let ua=Math.round(.6*ea),Ma=2,Ba=2;ua<=12&&(Ma=Ba=1);let ka=Math.floor(ua/2);for(let Ua=Oa;Ua<=Aa;Ua++){let Vn=Math.round(Ot.valToPos(ra[Ua],"x",!0)),_n=Ua===Oa?0:Math.sign(Sn[Ua]-Sn[Ua-1]),Xn=Math.sign(Sn[Ua]-Rn[Ua]);if(_e&&En&&Dn&&Cn){let Ca=Ae(W===Eo.CloseClose?_n:Xn,En,Dn,Cn,Ua===Oa&&Eo.CloseClose?!1:ce),ya=Math.round(Ot.valToPos(wa[Ua],Ot.series[wt].scale,!0));Ca.rect(Vn-ka,ya,ua,Fa-ya)}if(fe&&sn&&Vt&&on){let Ca=Ae(W===Eo.CloseClose?_n:Xn,sn,Vt,on,Ua===Oa&&Eo.CloseClose?!1:ce),ya=Math.round(Ot.valToPos(Jn[Ua],Ot.series[$e].scale,!0)),Va=Math.round(Ot.valToPos(Kn[Ua],Ot.series[mt].scale,!0));Ca.rect(Vn-Math.floor(Ma/2),ya,Ma,Va-ya);let Ka=Math.round(Ot.valToPos(Rn[Ua],Ot.series[tt].scale,!0)),Cs=Math.round(Ot.valToPos(Sn[Ua],Ot.series[Wt].scale,!0));if(Se){let Ds=Math.min(Ka,Cs),Jr=Math.max(Ka,Cs),Gs=Math.max(1,Jr-Ds);Ca.rect(Vn-ka,Ds,ua,Gs),W===Eo.CloseClose&&Xn>=0&&Gs>Ba*2&&kn.rect(Vn-ka+Ba,Ds+Ba,ua-Ba*2,Gs-Ba*2)}else Ca.rect(Vn-ka,Ka,ka,Ma),Ca.rect(Vn,Cs,ka,Ma)}}bn.save(),bn.rect(Ot.bbox.left,Ot.bbox.top,Ot.bbox.width,Ot.bbox.height),bn.clip(),_e&&En&&Dn&&Cn&&(bn.fillStyle=jl(G,se),bn.fill(Dn),bn.fillStyle=jl(Y,se),bn.fill(Cn),bn.fillStyle=jl(q,se),bn.fill(En)),fe&&sn&&Vt&&on&&(bn.fillStyle=G,bn.fill(Vt),bn.fillStyle=Y,bn.fill(on),bn.fillStyle=q,bn.fill(sn),bn.globalCompositeOperation="destination-out",bn.fill(kn)),bn.restore()}}const qu=({data:s,id:D,timeRange:T,timeZone:B,width:W,height:G,options:Y,fieldConfig:q,onChangeTimeRange:se,replaceVariables:ce})=>{const{sync:fe,canAddAnnotations:Se,onThresholdsChange:_e,canEditThresholds:Ae,showThresholds:He}=(0,nr.R9)(),tt=(0,Q.l4)(),$e=(0,o.useMemo)(()=>Gl(s.series,Y,tt,T),[s.series,Y,tt,T]),{renderers:mt,tweakScale:Wt,tweakAxis:wt,shouldRenderPrice:Ot}=(0,o.useMemo)(()=>{let Vt=(ua,Ma)=>ua,sn=(ua,Ma)=>ua,Cn={renderers:[],tweakScale:Vt,tweakAxis:sn,shouldRenderPrice:!1};if(!$e)return Cn;const Dn=$e.names;if(!Object.keys(Dn).length)return Cn;const{mode:En,candleStyle:kn,colorStrategy:bn}=Y,ra={...zl,...Y.colors};let{open:Rn,high:Sn,low:Jn,close:Kn,volume:wa}=Dn;if(Rn==null||Kn==null)return Cn;let Fa=.5,Oa=-1,Aa=!1;if(wa!=null&&En!==ur.Candles){let ua=$e.volume;if(ua!=null){Aa=!0;let{fillOpacity:Ma}=ua.config.custom;Ma&&(Fa=Ma/100),En!==ur.Volume&&(ua.config={...ua.config},ua.config.unit="short",ua.display=(0,Qs.U)({field:ua,theme:tn.config.theme2}),sn=(Ba,ka)=>{if(ka.name===$e.volume?.name){let Ua=(Vn,_n)=>{let Xn=[],Ca=Vn.series[Oa].max;for(let ya=0;ya<_n.length&&(Xn.push(_n[ya]),!(Ca&&_n[ya]>Ca));ya++);return Xn};Ba.space=20,Ba.filter=Ua,Ba.ticks={...Ba.ticks,filter:Ua}}return Ba},Vt=(Ba,ka)=>(ka.name===$e.volume?.name&&(Ba.range=(Ua,Vn,_n)=>[0,_n*7]),Ba))}}let Gn=En!==ur.Volume&&Sn!=null&&Jn!=null;if(!Gn&&!Aa)return Cn;let wn={},ea=[];return Gn?wn={open:Rn,high:Sn,low:Jn,close:Kn}:ea.push(Rn,Kn),Aa&&(wn.volume=wa,wn.open=Rn,wn.close=Kn),{shouldRenderPrice:Gn,renderers:[{fieldMap:wn,indicesOnly:ea,init:(ua,Ma)=>{Oa=Ma.volume,ua.addHook("drawAxes",Xu({mode:En,fields:Ma,upColor:tn.config.theme2.visualization.getColorByName(ra.up),downColor:tn.config.theme2.visualization.getColorByName(ra.down),flatColor:tn.config.theme2.visualization.getColorByName(ra.flat),volumeAlpha:Fa,colorStrategy:bn,candleStyle:kn,flatAsUp:!0}))}}],tweakScale:Vt,tweakAxis:sn}},[Y,s.structureRev,s.series.length]);if(!$e)return o.createElement(no.Z,{panelId:D,fieldConfig:q,data:s,needsTimeField:!0,needsNumberField:!0});if(Ot)for(let Vt in mt[0].fieldMap){let sn=$e[Vt];sn.config={...sn.config,custom:{...sn.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const on=!!(Se&&Se());return o.createElement(zi.p,{frames:[$e.frame],structureRev:s.structureRev,timeRange:T,timeZone:B,width:W,height:G,legend:Y.legend,renderers:mt,tweakAxis:wt,tweakScale:Wt,options:Y},(Vt,sn)=>(sn.fields.forEach(Cn=>{Cn.getLinks=(0,Yr.oB)(sn,Cn,Cn.state.scopedVars,ce,B)}),o.createElement(o.Fragment,null,o.createElement(Ei.R,{config:Vt,onZoom:se,withZoomY:!0}),o.createElement(ui.i,{data:sn,config:Vt,mode:Lt.f3.Multi,sync:fe,timeZone:B}),s.annotations&&o.createElement(Fl,{annotations:s.annotations,config:Vt,timeZone:B}),on?o.createElement(Ll,{data:sn,timeZone:B,config:Vt},({startAnnotating:Cn})=>o.createElement(Xo,{data:sn,config:Vt,timeZone:B,replaceVariables:ce,defaultItems:on?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Dn,En)=>{En&&Cn({coords:En.coords})}}]}]:[]})):o.createElement(Xo,{data:sn,config:Vt,timeZone:B,replaceVariables:ce,defaultItems:[]}),s.annotations&&o.createElement(cd,{config:Vt,exemplars:s.annotations,timeZone:B}),(Ae&&_e||He)&&o.createElement(_l,{config:Vt,fieldConfig:q,onThresholdsChange:Ae?_e:void 0}),o.createElement(Uo,{config:Vt,onChangeTimeRange:se}))))};class em{getSuggestionsForData(D){const{dataSummary:T}=D;if(!D.data?.series||!T.hasData||T.timeFieldCount<1||T.numberFieldCount<2||T.numberFieldCount>10)return;const B=Gl(D.data.series,bo,V.config.theme2);if(!B||B.open===B.high&&B.open===B.low)return;D.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ga.y.Candlestick,options:bo,fieldConfig:{defaults:{},overrides:[]},score:B.autoOpenClose?xs._.Good:xs._.Best})}}const tm=[{label:"Candles",value:ur.Candles},{label:"Volume",value:ur.Volume},{label:"Both",value:ur.CandlesVolume}],nm=[{label:"Candles",value:Zi.Candles},{label:"OHLC Bars",value:Zi.OHLCBars}],am=[{label:"Since Open",value:Eo.OpenClose},{label:"Since Prior Close",value:Eo.CloseClose}],pd=s=>s.type===Yn.fS.number;function qo(s,D,T){let B="Auto ";if(T){const W=T[D.key];W?.config?(B+="= "+(0,os.CZ)(W),W===T?.open&&D.key!=="open"&&(B+=` (${D.defaults.join(",")})`)):B+=`(${D.defaults.join(",")})`}s.addFieldNamePicker({path:`fields.${D.key}`,name:D.name,description:D.description,settings:{filter:pd,placeholderText:B}})}const Ji=new w.c(qu).useFieldConfig(Pr(yo)).setPanelOptions((s,D)=>{const T=D.options??bo,B=Gl(D.data,T,V.config.theme2);s.addRadio({path:"mode",name:"Mode",description:"",defaultValue:bo.mode,settings:{options:tm}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:bo.candleStyle,settings:{options:nm},showIf:W=>W.mode!==ur.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:bo.colorStrategy,settings:{options:am}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:zl.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:zl.down}),qo(s,ao.open,B),T.mode!==ur.Volume&&(qo(s,ao.high,B),qo(s,ao.low,B)),qo(s,ao.close,B),T.mode!==ur.Candles&&qo(s,ao.volume,B),s.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:bo.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),Hr.J(s)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new em);var hd=e(13172),vd=e(94615),xo=e(26843),yd=e(46347),Yl=e(13540),so=e(8099),Ed=e(99432),bd=e(17724),xd=e(39971),Si=e(28804),Ql=e(15166),Zl=e(68084),sm=e(96198),Sd=e(99268),te=e(98632);const ie="--dashboards-tree-indentation";var Ze=(s=>(s[s.Unselected=0]="Unselected",s[s.Selected=1]="Selected",s[s.Mixed=2]="Mixed",s))(Ze||{});function rt({children:s,level:D}){const T=(0,Q.l4)(),B=`var(${ie}, ${T.spacing(2)})`;return o.createElement("span",{style:{paddingLeft:`calc(${B} * ${D})`}},s)}const Ct=40,_t="md",dn=(s,D)=>`${s}-${D||"root"}`;function Mn({items:s,focusedItemIndex:D,foldersAreOpenable:T,idPrefix:B,selectedFolder:W,onFolderExpand:G,onFolderSelect:Y,isItemLoaded:q,requestLoadMore:se}){const ce=(0,o.useRef)(null),fe=(0,Q.wW)(ba),Se=(0,o.useMemo)(()=>({items:s,focusedItemIndex:D,foldersAreOpenable:T,selectedFolder:W,onFolderExpand:G,onFolderSelect:Y,idPrefix:B}),[s,D,T,W,G,Y,B]),_e=(0,o.useCallback)(He=>q(He),[q]),Ae=(0,o.useCallback)((He,tt)=>{const{parentUID:$e}=s[He];se($e)},[se,s]);return o.createElement("div",{className:fe.table,role:"tree"},s.length>0?o.createElement(sm.Z,{ref:ce,itemCount:s.length,isItemLoaded:_e,loadMoreItems:Ae},({onItemsRendered:He,ref:tt})=>o.createElement(Zl.t7,{ref:tt,height:Ct*Math.min(6.5,s.length),width:"100%",itemData:Se,itemSize:Ct,itemCount:s.length,onItemsRendered:He},ca)):o.createElement("div",{className:fe.emptyMessage},o.createElement(xo.cC,{i18nKey:"browse-dashboards.folder-picker.empty-message"},"No folders found")))}const Zn=[100,200,130,160,150];function ca({index:s,style:D,data:T}){const{items:B,focusedItemIndex:W,foldersAreOpenable:G,selectedFolder:Y,onFolderExpand:q,onFolderSelect:se,idPrefix:ce}=T,{item:fe,isOpen:Se,level:_e,parentUID:Ae}=B[s],He=(0,o.useRef)(null),tt=(0,o.useId)(),$e=(0,z.useSelector)(so.hO),mt=(0,z.useSelector)(so.MH),Wt=(fe.uid?mt[fe.uid]:$e)?.items??[];let wt=[];fe.uid&&(wt=(Ae?mt[Ae]:$e)?.items??[]);const Ot=(0,Q.wW)(ba),on=(0,o.useCallback)(sn=>{sn.preventDefault(),sn.stopPropagation(),fe.uid&&q(fe.uid,!Se)},[fe.uid,Se,q]),Vt=(0,o.useCallback)(()=>{fe.kind==="folder"&&se(fe)},[fe,se]);return fe.kind==="ui"&&fe.uiKind==="pagination-placeholder"?o.createElement("span",{style:D,className:Ot.row},o.createElement(rt,{level:_e}),o.createElement(Ql.Z,{width:Zn[s%Zn.length]})):fe.kind!=="folder"?null:o.createElement("div",{ref:He,style:D,className:(0,F.cx)(Ot.row,{[Ot.rowFocused]:s===W,[Ot.rowSelected]:fe.uid===Y}),tabIndex:-1,onClick:Vt,"aria-expanded":Se,"aria-selected":fe.uid===Y,"aria-labelledby":tt,"aria-level":_e+1,role:"treeitem","aria-owns":Wt.length>0?Wt.map(sn=>dn(ce,sn.uid)).join(" "):void 0,"aria-setsize":Wt.length,"aria-posinset":wt.findIndex(sn=>sn.uid===fe.uid)+1,id:dn(ce,fe.uid)},o.createElement("div",{className:Ot.rowBody},o.createElement(rt,{level:_e}),G?o.createElement(ls.h,{size:_t,onMouseDown:on,tabIndex:-1,"aria-label":Se?`Collapse folder ${fe.title}`:`Expand folder ${fe.title}`,name:Se?"angle-down":"angle-right"}):o.createElement("span",{className:Ot.folderButtonSpacer}),o.createElement("label",{className:Ot.label,id:tt},o.createElement(te.x,{truncate:!0},fe.title))))}const ba=s=>{const D=(0,F.css)({height:Ct,display:"flex",position:"relative",alignItems:"center",flexGrow:1,gap:s.spacing(.5),overflow:"hidden",padding:s.spacing(0,1)});return{table:(0,F.css)({background:s.components.input.background}),emptyMessage:(0,F.css)({padding:s.spacing(1),textAlign:"center",width:"100%"}),folderButtonSpacer:(0,F.css)({paddingLeft:`calc(${(0,Sd.B)(_t)}px + ${s.spacing(.5)})`}),row:(0,F.css)({display:"flex",position:"relative",alignItems:"center",[":not(:first-child)"]:{borderTop:`solid 1px ${s.colors.border.weak}`}}),rowFocused:(0,F.css)({backgroundColor:s.colors.background.secondary}),rowSelected:(0,F.css)({"&::before":{display:"block",content:'""',position:"absolute",left:0,bottom:0,top:0,width:4,borderRadius:s.shape.radius.default,backgroundImage:s.colors.gradients.brandVertical}}),rowBody:D,label:(0,F.css)({lineHeight:Ct+"px",flexGrow:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:hover":{textDecoration:"underline",cursor:"pointer"}})}};function fa({isLoading:s,invalid:D,label:T,...B},W){const G=(0,Q.l4)(),Y=ns(G,D);return o.createElement("div",{className:Y.wrapper},o.createElement("div",{className:Y.inputWrapper},T?o.createElement("div",{className:Y.prefix},o.createElement(Re.J,{name:"folder"})):void 0,o.createElement("button",{type:"button",className:(0,F.cx)(Y.fakeInput,T?Y.hasPrefix:void 0),...B,ref:W},s?o.createElement(Ql.Z,{width:100}):T?o.createElement(te.x,{truncate:!0},T):o.createElement(te.x,{truncate:!0,color:"secondary"},o.createElement(xo.cC,{i18nKey:"browse-dashboards.folder-picker.button-label"},"Select folder"))),o.createElement("div",{className:Y.suffix},o.createElement(Re.J,{name:"angle-down"}))))}const pa=(0,o.forwardRef)(fa),ns=(s,D=!1)=>{const T=(0,hi.H)({theme:s,invalid:D});return{wrapper:T.wrapper,inputWrapper:T.inputWrapper,prefix:(0,F.css)([T.prefix,{pointerEvents:"none",color:s.colors.text.primary}]),suffix:(0,F.css)([T.suffix,{pointerEvents:"none"}]),fakeInput:(0,F.css)([T.input,{textAlign:"left",letterSpacing:"normal","&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,F.css)`
          ${(0,Zo.focusCss)(s)}
        `}]),hasPrefix:(0,F.css)({paddingLeft:28})}};function gs({tree:s,handleCloseOverlay:D,handleFolderSelect:T,handleFolderExpand:B,idPrefix:W,search:G,visible:Y}){const[q,se]=(0,o.useState)(-1);(0,o.useEffect)(()=>{Y&&se(-1)},[Y]),(0,o.useEffect)(()=>{se(0)},[G]),(0,o.useEffect)(()=>{document.getElementById(dn(W,s[q]?.item.uid))?.scrollIntoView({block:"nearest",inline:"nearest"})},[q,W,s]);const ce=(0,o.useCallback)(fe=>{const Se=!G;switch(fe.key){case"ArrowRight":case"ArrowLeft":Se&&(fe.preventDefault(),B(s[q].item.uid,fe.key==="ArrowRight"));break;case"ArrowUp":q>0&&(fe.preventDefault(),se(q-1));break;case"ArrowDown":q<s.length-1&&(fe.preventDefault(),se(q+1));break;case"Enter":fe.preventDefault();const _e=s[q].item;_e.kind==="folder"&&T(_e);break;case"Tab":fe.stopPropagation(),D();break;case"Escape":fe.stopPropagation(),fe.preventDefault(),D();break}},[q,D,B,T,G,s]);return{focusedItemIndex:q,handleKeyDown:ce}}const ps=["empty-folder","dashboard"];function mr({value:s,invalid:D,showRootFolder:T=!0,excludeUIDs:B,onChange:W}){const G=(0,Q.wW)(ys),Y=(0,Si.I0)(),q=(0,yd.t4)(s||yd.CN),se=(0,so.zw)(void 0),[ce,fe]=(0,o.useState)(""),[Se,_e]=(0,o.useState)(!1),[Ae,He]=(0,o.useState)(!1),[tt,$e]=(0,o.useState)({}),mt=(0,o.useId)(),[Wt]=(0,o.useState)(void 0),wt=(0,ft.Z)(async()=>{if(!ce)return;const wn=await(0,bd.getGrafanaSearcher)().search({query:ce,kind:["folder"],limit:100}),ea=wn.view.map(ua=>(0,xd.f9)(ua,wn.view));return{...wn,items:ea}},[ce]),Ot=(0,Si.v9)(so.hO),on=(0,Si.v9)(so.MH),{getTooltipProps:Vt,setTooltipRef:sn,setTriggerRef:Cn,visible:Dn,triggerRef:En}=(0,hd.O)({visible:Ae,placement:"bottom",interactive:!0,offset:[0,0],trigger:"click",onVisibleChange:Gn=>{Gn&&(fe(""),_e(!0)),He(Gn)}}),kn=(0,o.useCallback)(async(Gn,wn)=>{$e(ea=>({...ea,[Gn]:wn})),wn&&!tt[Gn]&&Y((0,so.si)({parentUID:Gn,pageSize:Yl.IV,excludeKinds:ps}))},[Y,tt]),bn=(0,o.useCallback)(Gn=>{W&&W(Gn.uid,Gn.title),He(!1)},[W]),ra=(0,o.useCallback)(()=>He(!1),[He]),Rn=(0,so.D$)(ps),Sn=(0,o.useCallback)(Gn=>{ce||Rn(Gn)},[ce,Rn]),Jn=(0,o.useMemo)(()=>{const Gn=ce&&wt.value;if(Gn){const ea={isFullyLoaded:!0,lastKindHasMoreItems:!1,lastFetchedKind:"folder",lastFetchedPage:1,items:Gn.items??[]};return(0,so.qO)(void 0,ea,on,{},0,ps,B)}let wn=(0,so.qO)(void 0,Ot,on,tt,0,ps,B);if(T){for(const ea of wn)ea.level+=1;wn.unshift({isOpen:!0,level:0,item:{kind:"folder",title:"Dashboards",uid:""}})}return Ot||(wn=wn.concat((0,Ed.k)(Yl.IV,void 0,0))),wn},[ce,wt.value,Ot,on,tt,B,T]),Kn=(0,o.useCallback)(Gn=>{const wn=Jn[Gn];if(!wn)return!1;const ea=wn.item;return!(ea.kind==="ui"&&ea.uiKind==="pagination-placeholder")},[Jn]),wa=se==="pending"||wt.loading,{focusedItemIndex:Fa,handleKeyDown:Oa}=gs({tree:Jn,handleCloseOverlay:ra,handleFolderSelect:bn,handleFolderExpand:kn,idPrefix:mt,search:ce,visible:Dn});let Aa=q.data?.title;return s===""&&(Aa="Dashboards"),Dn?o.createElement(o.Fragment,null,o.createElement(hi.I,{ref:Cn,autoFocus:!0,prefix:Aa?o.createElement(Re.J,{name:"folder"}):null,placeholder:Aa??(0,xo.t)("browse-dashboards.folder-picker.search-placeholder","Search folders"),value:ce,invalid:D,className:G.search,onKeyDown:Oa,onChange:Gn=>fe(Gn.currentTarget.value),"aria-autocomplete":"list","aria-expanded":!0,"aria-haspopup":!0,"aria-controls":mt,"aria-owns":mt,"aria-activedescendant":dn(mt,Jn[Fa]?.item.uid),role:"combobox",suffix:o.createElement(Re.J,{name:"search"})}),o.createElement("fieldset",{ref:sn,id:mt,...Vt({className:G.tableWrapper,style:{width:En?.clientWidth}})},Wt?o.createElement(yt.b,{className:G.error,severity:"warning",title:(0,xo.t)("browse-dashboards.folder-picker.error-title","Error loading folders")},Wt.message||Wt.toString?.()||(0,xo.t)("browse-dashboards.folder-picker.unknown-error","Unknown error")):o.createElement("div",null,wa&&o.createElement("div",{className:G.loader},o.createElement(vd.F,{width:600})),o.createElement(Mn,{items:Jn,selectedFolder:s,focusedItemIndex:Fa,onFolderExpand:kn,onFolderSelect:bn,idPrefix:mt,foldersAreOpenable:!(ce&&wt.value),isItemLoaded:Kn,requestLoadMore:Sn})))):o.createElement(pa,{label:Aa,invalid:D,isLoading:q.isLoading,autoFocus:Se,ref:Cn,"aria-label":Aa?(0,xo.t)("browse-dashboards.folder-picker.accessible-label","Select folder: {{ label }} currently selected",{label:Aa}):void 0})}const ys=s=>({button:(0,F.css)({maxWidth:"100%"}),error:(0,F.css)({marginBottom:0}),tableWrapper:(0,F.css)({boxShadow:s.shadows.z3,position:"relative",zIndex:s.zIndex.portal}),loader:(0,F.css)({position:"absolute",top:0,left:0,right:0,zIndex:s.zIndex.portal+1,overflow:"hidden"}),search:(0,F.css)({input:{cursor:"default"}})});function fr(s){const D=V.config.featureToggles.nestedFolders&&V.config.featureToggles.nestedFolderPicker,{initialTitle:T,dashboardId:B,enableCreateNew:W,...G}=s;return D?o.createElement(mr,{...G}):o.createElement(Es,{...s})}function Es({value:s,showRootFolder:D,onChange:T,initialTitle:B,dashboardId:W,enableCreateNew:G,inputId:Y,skipInitialLoad:q}){const se=(0,o.useCallback)(ce=>{T&&T(ce.uid,ce.title)},[T]);return o.createElement(ze.Fz,{onChange:se,showRoot:D,initialFolderUid:s,initialTitle:B,inputId:Y,skipInitialLoad:q,dashboardId:W,enableCreateNew:G})}var Pa=e(69307),Ss=e(71707),hs=e(1277),Hs=e(23062);class Jl{constructor(){}addDashboardImpression(D){const T=this.impressionKey();let B=[];Hs.Z.exists(T)&&(B=JSON.parse(Hs.Z.get(T)),(0,ne.isArray)(B)||(B=[])),B=B.filter(W=>D!==W),B.unshift(D),B.length>50&&B.pop(),Hs.Z.set(T,JSON.stringify(B))}async convertToUIDs(){let D=this.getImpressions();const T=(0,ne.filter)(D,W=>(0,ne.isNumber)(W));if(!T.length)return;const B=await(0,oe.i)().get(`/api/dashboards/ids/${T.join(",")}`);Hs.Z.set(this.impressionKey(),JSON.stringify([...(0,ne.filter)(D,W=>(0,ne.isString)(W)),...B]))}getImpressions(){const D=Hs.Z.get(this.impressionKey())||"[]";return JSON.parse(D)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,ne.filter)(this.getImpressions(),T=>(0,ne.isString)(T))}impressionKey(){return"dashboard_impressions-"+tn.default.bootData.user.orgId}}const rm=new Jl;var om=e(6278),hg=e(38361);const vg=s=>({dashlistSectionHeader:(0,F.css)`
    padding: ${s.spacing(.25,1)};
    margin-right: ${s.spacing(1)};
  `,dashlistSection:(0,F.css)`
    margin-bottom: ${s.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:(0,F.css)`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${s.colors.border.weak};
    margin-right: ${s.spacing(1)};
    padding: ${s.spacing(1)};
    align-items: center;

    &:hover {
      a {
        color: ${s.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistFolder:(0,F.css)`
    color: ${s.colors.text.secondary};
    font-size: ${s.typography.bodySmall.fontSize};
    line-height: ${s.typography.body.lineHeight};
  `,dashlistTitle:(0,F.css)`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:(0,F.css)`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:(0,F.css)`
    position: relative;
    list-style: none;
  `});async function yg(s,D){let T=Promise.resolve([]);if(s.showStarred){const fe={limit:s.maxItems,starred:"true"};T=(0,hs.i)().search(fe)}let B=Promise.resolve([]),W=[];if(s.showRecentlyViewed){let fe=await rm.getDashboardOpened();W=(0,ne.take)(fe,s.maxItems),B=(0,hs.i)().search({dashboardUIDs:W,limit:s.maxItems})}let G=Promise.resolve([]);if(s.showSearch){const fe=s.folderUID===""?"general":s.folderUID,Se={limit:s.maxItems,query:D(s.query,{},"text"),folderUIDs:fe,tag:s.tags.map(_e=>D(_e,{},"text")),type:"dash-db"};G=(0,hs.i)().search(Se)}const[Y,q,se]=await Promise.all([T,G,B]);let ce=new Map;for(const fe of W){const Se=se.find(_e=>_e.uid===fe);Se&&ce.set(fe,{...Se,isRecent:!0})}return q.forEach(fe=>{fe.uid&&(ce.has(fe.uid)?ce.get(fe.uid).isSearchResult=!0:ce.set(fe.uid,{...fe,isSearchResult:!0}))}),Y.forEach(fe=>{fe.uid&&(ce.has(fe.uid)?ce.get(fe.uid).isStarred=!0:ce.set(fe.uid,{...fe,isStarred:!0}))}),ce}function Eg(s){const[D,T]=(0,o.useState)(new Map),B=(0,z.useDispatch)();(0,o.useEffect)(()=>{yg(s.options,s.replaceVariables).then(tt=>{T(tt)})},[s.options,s.replaceVariables,s.renderCounter]);const W=async(tt,$e)=>{const{uid:mt,title:Wt,url:wt}=$e;tt.preventDefault(),tt.stopPropagation();const Ot=await(0,ve.h4)().starDashboard($e.uid,$e.isStarred),on=new Map(D);on.set($e?.uid??"",{...$e,isStarred:Ot}),T(on),B((0,Ss.OQ)({id:mt??"",title:Wt,url:wt,isStarred:Ot}))},[G,Y,q]=(0,o.useMemo)(()=>{const tt=[...D.values()];return[tt.filter($e=>$e.isStarred).sort(($e,mt)=>$e.title.localeCompare(mt.title)),tt.filter($e=>$e.isRecent),tt.filter($e=>$e.isSearchResult).sort(($e,mt)=>$e.title.localeCompare(mt.title))]},[D]),{showStarred:se,showRecentlyViewed:ce,showHeadings:fe,showSearch:Se}=s.options,_e=[{header:"Starred dashboards",dashboards:G,show:se},{header:"Recently viewed dashboards",dashboards:Y,show:ce},{header:"Search",dashboards:q,show:Se}],Ae=(0,Q.wW)(vg),He=tt=>o.createElement("ul",null,tt.map($e=>{let mt=$e.url,Wt={};if(s.options.keepTime){const wt=(0,om.$t)().timeRangeForUrl();Wt.from=wt.from,Wt.to=wt.to}return s.options.includeVars&&(Wt={...Wt,...(0,hg.c)()}),mt=Pa.Cj.appendQueryToUrl(mt,Pa.Cj.toUrlParams(Wt)),mt=(0,tn.iE)().disableSanitizeHtml?mt:_a.QX.sanitizeUrl(mt),o.createElement("li",{className:Ae.dashlistItem,key:`dash-${$e.uid}`},o.createElement("div",{className:Ae.dashlistLink},o.createElement("div",{className:Ae.dashlistLinkBody},o.createElement("a",{className:Ae.dashlistTitle,href:mt},$e.title),$e.folderTitle&&o.createElement("div",{className:Ae.dashlistFolder},$e.folderTitle)),o.createElement(ls.h,{tooltip:$e.isStarred?`Unmark "${$e.title}" as favorite`:`Mark "${$e.title}" as favorite`,name:$e.isStarred?"favorite":"star",iconType:$e.isStarred?"mono":"default",onClick:wt=>W(wt,$e)})))}));return o.createElement(_.$,{autoHeightMin:"100%",autoHeightMax:"100%"},_e.map(({show:tt,header:$e,dashboards:mt},Wt)=>tt&&o.createElement("div",{className:Ae.dashlistSection,key:`dash-group-${Wt}`},fe&&o.createElement("h6",{className:Ae.dashlistSectionHeader},$e),He(mt))))}async function bg(s){return s===0?"":(await(0,oe.i)().get(`/api/folders/id/${s}`,void 0,void 0,{showErrorAlert:!1})).uid}async function xg(s){const D={...s.options,showStarred:s.options.showStarred??s.starred,showRecentlyViewed:s.options.showRecentlyViewed??s.recent,showSearch:s.options.showSearch??s.search,showHeadings:s.options.showHeadings??s.headings,maxItems:s.options.maxItems??s.limit,query:s.options.query??s.query,folderId:s.options.folderId??s.folderId,tags:s.options.tags??s.tags};if(parseFloat(s.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(W=>delete s[W]),D.folderId!==void 0){const B=D.folderId;try{const W=await bg(B);D.folderUID=W,delete D.folderId}catch(W){console.warn("Dashlist: Error migrating folder ID to UID",W)}}return D}const So={includeVars:!1,keepTime:!1,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},Sg=new w.c(Eg).setPanelOptions(s=>{s.addBooleanSwitch({path:"keepTime",name:"Include current time range",defaultValue:So.keepTime}).addBooleanSwitch({path:"includeVars",name:"Include current template variable values",defaultValue:So.includeVars}).addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:So.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:So.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:So.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:So.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:So.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:So.query}).addCustomEditor({path:"folderUID",name:"Folder",id:"folderUID",defaultValue:void 0,editor:function({value:T,onChange:B}){return o.createElement(fr,{value:T,onChange:W=>B(W)})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:So.tags,editor(D){return o.createElement(it.B,{tags:D.value,onChange:D.onChange})}})}).setMigrationHandler(xg);var Mr=e(25161),Ja=e(72639),Vx=e(40201);const Cg=({onBlur:s,placeholder:D})=>{const T=(0,o.useRef)(null);(0,o.useEffect)(()=>{T.current&&T.current.focus()});const B=W=>{W.key==="Enter"&&W.currentTarget.blur()};return o.createElement("input",{type:"text",placeholder:D,onBlur:s,ref:T,onKeyDown:B,"data-testid":"column-input"})},Dg=({divStyle:s,onColumnInputBlur:D})=>{const[T,B]=(0,o.useState)(!1),W=()=>{B(!0)},G=Y=>{const q=Y.target.value;q&&D(q),B(!1)};return o.createElement("div",{className:s},T?o.createElement(Cg,{placeholder:"Column Name",onBlur:G}):o.createElement("button",{onClick:W},"+"))};var Xl=e(12727);const _s=()=>V.config.featureToggles.enableDatagridEditing,Pg="600 13px Inter",Mg="400 13px Inter",Tg=document.createElement("canvas"),Ig=20,Og=300,Rg=65,Ag="both",Lg="number",wg={isContextMenuOpen:!1},Bg={isInputOpen:!1},Os="datagrid_panel",Rs={EDIT_CELL:"edit_cell",GRID_SELECTED:"grid_selected",APPEND_ROW:"append_row",APPEND_COLUMN:"append_column",DELETE_BTN_PRESSED:"delete_btn_pressed",COLUMN_RESIZE:"column_resize",COLUMN_REORDER:"column_reorder",ROW_REORDER:"row_reorder",CONTEXT_MENU_ACTION:"context_menu_action",HEADER_MENU_ACTION:"header_menu_action"},Ng={name:"A",fields:[],length:0},Fg={kind:Mr.p6.Text,data:"",allowOverlay:!0,readonly:!1,displayData:""},im={columns:Mr.EV.empty(),rows:Mr.EV.empty()},Ug={sticky:!1,tint:!0},Wg={fill:!0,sticky:!1};async function ro(s,D){if(D&&_s()){for(let T=0;T<s.fields.length;T++)delete s.fields[T].config.displayName,delete s.fields[T].config.displayNameFromDS;return await D([s])}return!1}const lm=(s,D=!1)=>{const T=Tg.getContext("2d");return T.font=D?Pg:Mg,T.measureText(s).width},_g=s=>Math.max(lm(s.name,!0)+Rg,Math.min(Og,s.values.toArray().reduce((D,T)=>{const B=lm(T?.toString()??"");return B>D?B:D},0)+Ig)),ql=(s,D,T=!1)=>{const B={...s,fields:s.fields.map(W=>({...W,values:W.values.slice()}))};for(const W of B.fields){const G=W.values.toArray();for(let Y=D.length-1;Y>=0;Y--)T?G.splice(D[Y],1):G.splice(D[Y],1,null);W.values=[...G]}return{...B,length:B.fields[0]?.values.length??0}},$g=(s,D)=>{const T=D.x,B=D.y,W=D.x+D.width-1,G={...s,fields:s.fields.map(Y=>({...Y,values:Y.values.slice()}))};for(let Y=T;Y<=W;Y++){const q=G.fields[Y],se=q.values.toArray();se.splice(B,D.height,...new Array(D.height).fill(null)),q.values=[...se]}return{...G,length:G.fields[0]?.values.length??0}},Vg=s=>{const D=s.values.toArray();s.values=D.map(T=>T==="undefined"||T==="null"?null:T)};function Kg(s){return{accentColor:s.colors.primary.main,accentFg:s.colors.secondary.main,textDark:s.colors.text.primary,textMedium:s.colors.text.secondary,textLight:s.colors.text.secondary,textBubble:s.colors.text.primary,textHeader:s.colors.text.primary,bgCell:s.colors.background.primary,bgCellMedium:s.colors.background.primary,bgHeader:s.colors.background.primary,bgHeaderHasFocus:s.colors.background.secondary,bgHeaderHovered:s.colors.background.secondary,linkColor:s.colors.text.link,fontFamily:s.typography.fontFamily,headerFontStyle:`${s.typography.fontWeightMedium} ${s.typography.fontSize}px`,fgIconHeader:s.colors.secondary.contrastText,bgIconHeader:s.colors.secondary.main}}const kg=(s,D,T=!1)=>{const B=s.values.get(D);switch(s.type){case Yn.fS.boolean:return{kind:Mr.p6.Boolean,data:B||!1,allowOverlay:!1,readonly:!1};case Yn.fS.number:return{kind:Mr.p6.Number,data:B||0,allowOverlay:_s()&&!T,readonly:!1,displayData:B!=null?B.toString():""};case Yn.fS.string:return{kind:Mr.p6.Text,data:B||"",allowOverlay:_s()&&!T,readonly:!1,displayData:B!=null?B.toString():""};default:return{kind:Mr.p6.Text,data:B||"",allowOverlay:_s()&&!T,readonly:!1,displayData:B!=null?B.toString():""}}},zg=(s,D)=>({dataEditor:(0,F.css)`
      .dvn-scroll-inner > div:nth-child(2) {
        pointer-events: none !important;
      }
      scrollbar-color: ${s.colors.background.secondary} ${s.colors.background.primary};
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: ${s.colors.background.primary};
      }
      ::-webkit-scrollbar-thumb {
        border-radius: 10px;
      }
      ::-webkit-scrollbar-corner {
        display: none;
      }
    `,addColumnDiv:(0,F.css)`
      width: 120px;
      display: flex;
      flex-direction: column;
      background-color: ${s.colors.background.primary};
      button {
        pointer-events: ${D?"none":"auto"};
        border: none;
        outline: none;
        height: 37px;
        font-size: 20px;
        background-color: ${s.colors.background.primary};
        color: ${s.colors.text.primary};
        border-right: 1px solid ${s.components.panel.borderColor};
        border-bottom: 1px solid ${s.components.panel.borderColor};
        transition: background-color 200ms;
        cursor: pointer;
        :hover {
          background-color: ${s.colors.background.secondary};
        }
      }
      input {
        height: 37px;
        border: 1px solid ${s.colors.primary.main};
        :focus {
          outline: none;
        }
      }
    `,renameColumnInput:(0,F.css)`
      height: 37px;
      border: 1px solid ${s.colors.primary.main};
      :focus {
        outline: none;
      }
    `}),cm=s=>s.rows.length||s.columns.length?!0:s.current===void 0?!1:s.current.range&&!(s.current.range.height===1&&s.current.range.width===1);var $s=(s=>(s.columnResizeStart="columnResizeStart",s.columnResizeEnd="columnResizeEnd",s.columnMove="columnMove",s.updateColumns="updateColumns",s.showColumnRenameInput="showColumnRenameInput",s.hideColumnRenameInput="hideColumnRenameInput",s.openCellContextMenu="openCellContextMenu",s.openHeaderContextMenu="openHeaderContextMenu",s.openHeaderDropdownMenu="openHeaderDropdownMenu",s.closeContextMenu="closeContextMenu",s.multipleCellsSelected="multipleCellsSelected",s.gridSelectionCleared="gridSelectionCleared",s.columnFreezeReset="columnFreezeReset",s.columnFreezeChanged="columnFreezeChanged",s.openSearch="openSearch",s.closeSearch="closeSearch",s))($s||{});const Hg={columns:[],contextMenuData:wg,renameColumnInputData:Bg,gridSelection:im,columnFreezeIndex:0,toggleSearch:!1,isResizeInProgress:!1},Gg=new Map([[Yn.fS.number,Mr.PE.HeaderNumber],[Yn.fS.string,Mr.PE.HeaderTextTemplate],[Yn.fS.boolean,Mr.PE.HeaderBoolean],[Yn.fS.time,Mr.PE.HeaderDate],[Yn.fS.other,Mr.PE.HeaderReference]]),jg=(s,D)=>{let T=[];switch(D.type){case"columnResizeStart":T=[...s.columns];const B=D.payload;return T[B.columnIndex]={...s.columns[B.columnIndex],width:B.width},{...s,columns:T,isResizeInProgress:!0};case"columnMove":T=[...s.columns];const W=D.payload,G=s.columns[W.from].width;let Y=T.splice(W.from,1)[0];return Y={...Y,width:G},T.splice(W.to,0,Y),{...s,columns:T};case"columnResizeEnd":return{...s,isResizeInProgress:!1};case"updateColumns":const q=D.payload;return T=[...q.frame.fields.map((mt,Wt)=>{const wt=s.columns.find(on=>on.title===mt.name)?.width;return{title:(0,os.CZ)(mt,q.frame),width:wt??_g(mt),icon:Gg.get(mt.type),hasMenu:_s(),trailingRowOptions:{targetColumn:--Wt}}})],{...s,columns:T};case"showColumnRenameInput":return{...s,renameColumnInputData:{...s.renameColumnInputData,isInputOpen:!0}};case"hideColumnRenameInput":return{...s,renameColumnInputData:{...s.renameColumnInputData,isInputOpen:!1}};case"openCellContextMenu":const se=D.payload,ce=se.event,fe=se.cell;return{...s,contextMenuData:{x:ce.bounds.x+ce.localEventX,y:ce.bounds.y+ce.localEventY,column:fe[0]===-1?void 0:fe[0],row:fe[1],isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderContextMenu":const Se=D.payload,_e=Se.event;return{...s,contextMenuData:{x:_e.bounds.x+_e.localEventX,y:_e.bounds.y+_e.localEventY,column:Se.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderDropdownMenu":const Ae=D.payload,He=Ae.screenPosition;return{...s,contextMenuData:{x:He.x+He.width,y:He.y+He.height,column:Ae.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!0},renameColumnInputData:{x:He.x,y:He.y,width:He.width,height:He.height,columnIdx:Ae.columnIndex,isInputOpen:!1,inputValue:Ae.value}};case"closeContextMenu":return{...s,contextMenuData:{isContextMenuOpen:!1}};case"closeSearch":return{...s,toggleSearch:!1};case"openSearch":return{...s,toggleSearch:!0};case"multipleCellsSelected":const tt=D.payload;return{...s,gridSelection:tt.selection};case"gridSelectionCleared":return{...s,gridSelection:im};case"columnFreezeReset":return{...s,columnFreezeIndex:0};case"columnFreezeChanged":const $e=D.payload;return{...s,columnFreezeIndex:$e.columnIndex};default:return s}},Yg=({menuData:s,data:D,saveData:T,closeContextMenu:B,dispatch:W,gridSelection:G,columnFreezeIndex:Y,renameColumnClicked:q})=>{let se=[],ce=[];const{row:fe,column:Se,x:_e,y:Ae,isHeaderMenu:He}=s;G.rows&&(se=G.rows.toArray()),G.columns&&(ce=G.columns.toArray());let tt="Delete row";se.length&&se.length>1&&(tt=`Delete ${se.length} rows`);let $e="Delete column";ce.length&&ce.length>1&&($e=`Delete ${ce.length} columns`);const mt=fe!==void 0&&fe>=0||se.length,Wt=Se!==void 0&&Se>=0&&fe!==void 0||ce.length,wt=fe!==void 0&&fe>=0&&!se.length,Ot=Se!==void 0&&Se>=0&&fe!==void 0&&!ce.length,on=()=>o.createElement(o.Fragment,null,mt?o.createElement(Is.s,{label:tt,onClick:()=>{if(se.length){T(ql(D,se,!0)),W({type:$s.gridSelectionCleared});return}fe!==void 0&&fe>=0&&((0,Ja.ff)(Os,{item:Rs.CONTEXT_MENU_ACTION,menu_action:"row_delete"}),T(ql(D,[fe],!0)))}}):null,Wt?o.createElement(Is.s,{label:$e,onClick:()=>{if(ce.length){T({...D,fields:D.fields.filter((sn,Cn)=>!ce.includes(Cn))}),W({type:$s.gridSelectionCleared});return}Se!==void 0&&Se>=0&&((0,Ja.ff)(Os,{item:Rs.CONTEXT_MENU_ACTION,menu_action:"column_delete"}),T({...D,fields:D.fields.filter((sn,Cn)=>Cn!==Se)}))}}):null,Wt||mt?o.createElement(Xl.R,null):null,wt?o.createElement(Is.s,{label:"Clear row",onClick:()=>{(0,Ja.ff)(Os,{item:Rs.CONTEXT_MENU_ACTION,menu_action:"row_clear"}),T(ql(D,[fe]))}}):null,Ot?o.createElement(Is.s,{label:"Clear column",onClick:()=>{const sn=D.fields[Se];sn.values=sn.values.map(()=>null),(0,Ja.ff)(Os,{item:Rs.CONTEXT_MENU_ACTION,menu_action:"column_clear"}),T({...D})}}):null,wt||Ot?o.createElement(Xl.R,null):null,o.createElement(Is.s,{label:"Remove all data",onClick:()=>{(0,Ja.ff)(Os,{item:Rs.CONTEXT_MENU_ACTION,menu_action:"remove_all"}),T(Ng)}}),o.createElement(Is.s,{label:"Search...",onClick:()=>{(0,Ja.ff)(Os,{item:Rs.CONTEXT_MENU_ACTION,menu_action:"open_search"}),W({type:$s.openSearch})}})),Vt=()=>{if(Se==null)return null;const sn=D.fields[Se].type,Cn=[],Dn=bn=>{Cn.push({label:(0,ne.capitalize)(bn),options:{targetField:D.fields[Se].name,destinationType:bn}})};sn===Yn.fS.string?(Dn(Yn.fS.number),Dn(Yn.fS.boolean)):sn===Yn.fS.number?(Dn(Yn.fS.string),Dn(Yn.fS.boolean)):sn===Yn.fS.boolean?(Dn(Yn.fS.number),Dn(Yn.fS.string)):(Dn(Yn.fS.string),Dn(Yn.fS.number),Dn(Yn.fS.boolean));let En="Set column freeze position";const kn=Se+1;return Y===kn&&(En="Unset column freeze"),o.createElement(o.Fragment,null,Cn.length?o.createElement(Ul.k,{label:"Set field type"},Cn.map((bn,ra)=>o.createElement(Is.s,{key:ra,label:bn.label,onClick:()=>{const Rn=(0,Vl.p8)(D.fields[Se],bn.options);bn.options.destinationType===Yn.fS.string&&Vg(Rn);const Sn={name:D.name,fields:[...D.fields],length:D.length};Sn.fields[Se]=Rn,(0,Ja.ff)(Os,{item:Rs.HEADER_MENU_ACTION,menu_action:"convert_field"}),T(Sn)}}))):null,o.createElement(Xl.R,null),o.createElement(Is.s,{label:En,onClick:()=>{(0,Ja.ff)(Os,{item:Rs.HEADER_MENU_ACTION,menu_action:"column_freeze"}),W(Y===kn?{type:$s.columnFreezeReset}:{type:$s.columnFreezeChanged,payload:{columnIndex:kn}})}}),o.createElement(Is.s,{label:"Rename column",onClick:q}),o.createElement(Xl.R,null),o.createElement(Is.s,{label:"Delete column",onClick:()=>{(0,Ja.ff)(Os,{item:Rs.HEADER_MENU_ACTION,menu_action:"delete_column"}),T({...D,fields:D.fields.filter((bn,ra)=>ra!==Se)}),W({type:$s.gridSelectionCleared})}}),o.createElement(Is.s,{label:"Clear column",onClick:()=>{const bn=D.fields[Se];bn.values=bn.values.map(()=>null),(0,Ja.ff)(Os,{item:Rs.HEADER_MENU_ACTION,menu_action:"clear_column"}),T({...D})}}))};return o.createElement(Jo.x,{renderMenuItems:He?Vt:on,x:_e,y:Ae,onClose:B})},Qg=({renameColumnData:s,onColumnInputBlur:D,classStyle:T})=>{const{x:B,y:W,width:G,height:Y,inputValue:q,columnIdx:se}=s,[ce,fe]=(0,o.useState)({}),[Se,_e]=(0,o.useState)(q),Ae=(0,o.useRef)(null);(0,o.useLayoutEffect)(()=>{Ae.current?.focus();const mt=Ae.current?.getBoundingClientRect();if(mt){const Wt={right:window.innerWidth<B+mt.width,bottom:window.innerHeight<W+mt.height};fe({position:"fixed",left:Wt.right?B-mt.width:B,top:Wt.bottom?W-mt.height:W,width:G,height:Y})}},[Y,G,B,W]);const He=mt=>{const Wt=mt.target.value;Wt&&D(Wt,se)},tt=mt=>{_e(mt.target.value)},$e=mt=>{mt.key==="Enter"&&mt.currentTarget.blur()};return o.createElement(rs.h_,null,o.createElement("input",{type:"text",className:T,value:Se,onBlur:He,ref:Ae,style:ce,onChange:tt,onKeyDown:$e}))};function Zg({options:s,data:D,id:T,fieldConfig:B,width:W,height:G}){const[Y,q]=(0,o.useReducer)(jg,Hg),{onUpdateData:se}=(0,nr.R9)(),{columns:ce,contextMenuData:fe,renameColumnInputData:Se,gridSelection:_e,columnFreezeIndex:Ae,toggleSearch:He,isResizeInProgress:tt}=Y,$e=D.series[s.selectedSeries??0],mt=(0,Q.l4)(),Wt=Kg(mt);(0,o.useEffect)(()=>{$e&&q({type:$s.updateColumns,payload:{frame:$e}})},[$e]);const wt=([Gn,wn])=>{const ea=$e.fields[Gn];return!ea||wn>$e.length?Fg:kg(ea,wn,cm(_e))},Ot=(Gn,wn)=>{if(cm(_e))return;const[ea,ua]=Gn,Ma={...$e,fields:$e.fields.map(Ua=>({...Ua,values:[...Ua.values]}))},Ba=Ma.fields[ea];if(!Ba)return;const ka=Ba.values.toArray();ka[ua]=wn.data,Ba.values=[...ka],(0,Ja.ff)(Os,{item:Rs.EDIT_CELL}),ro(Ma,se)},on=Gn=>{const wn=$e.length??0;(0,Ja.ff)(Os,{item:Rs.APPEND_COLUMN}),ro({...$e,fields:[...$e.fields,{name:Gn,type:Yn.fS.string,config:{},values:new Array(wn).fill("")}]},se)},Vt=()=>{const Gn=$e.fields.map(wn=>{const ea=wn.values.slice();return ea.push(null),{...wn,values:ea}});(0,Ja.ff)(Os,{item:Rs.APPEND_ROW}),ro({...$e,fields:Gn,length:$e.length+1},se)},sn=(Gn,wn,ea,ua)=>{(0,Ja.ff)(Os,{item:Rs.COLUMN_RESIZE}),q({type:$s.columnResizeStart,payload:{columnIndex:ea,width:wn}})},Cn=(Gn,wn,ea,ua)=>{q({type:$s.columnResizeEnd})},Dn=()=>{q({type:$s.closeContextMenu})},En=Gn=>{if(Gn.current&&Gn.current.range)return(0,Ja.ff)(Os,{item:Rs.DELETE_BTN_PRESSED,selection:"grid-cell"}),ro($g($e,Gn.current.range),se),!0;const wn=Gn.rows.toArray(),ea=Gn.columns.toArray();if(wn.length)return(0,Ja.ff)(Os,{item:Rs.DELETE_BTN_PRESSED,selection:"rows"}),ro(ql($e,wn),se),!0;if(ea.length){const ua={...$e,fields:$e.fields.map((Ma,Ba)=>ea.includes(Ba)?{...Ma,values:new Array($e.length).fill(null)}:Ma)};return(0,Ja.ff)(Os,{item:Rs.DELETE_BTN_PRESSED,selection:"columns"}),ro(ua,se),!0}return!1},kn=(Gn,wn)=>{wn.preventDefault(),q({type:$s.openCellContextMenu,payload:{event:wn,cell:Gn}})},bn=(Gn,wn)=>{wn.preventDefault(),q({type:$s.openHeaderContextMenu,payload:{event:wn,columnIndex:Gn}})},ra=(Gn,wn)=>{q({type:$s.openHeaderDropdownMenu,payload:{screenPosition:wn,columnIndex:Gn,value:Y.columns[Gn].title}})},Rn=async(Gn,wn)=>{const ea=$e.fields.map(Ba=>Ba),ua=ea[Gn];ea.splice(Gn,1),ea.splice(wn,0,ua),await ro({...$e,fields:ea},se)&&((0,Ja.ff)(Os,{item:Rs.COLUMN_REORDER}),q({type:$s.columnMove,payload:{from:Gn,to:wn}}))},Sn=(Gn,wn)=>{const ea=$e.fields.map(ua=>({...ua,values:ua.values.slice()}));for(const ua of ea){const Ma=ua.values[Gn];ua.values.splice(Gn,1),ua.values.splice(wn,0,Ma)}(0,Ja.ff)(Os,{item:Rs.ROW_REORDER}),ro({...$e,fields:ea},se)},Jn=()=>{(0,Ja.ff)(Os,{item:Rs.HEADER_MENU_ACTION,menu_action:"rename_column"}),q({type:$s.showColumnRenameInput})},Kn=(Gn,wn)=>{const ea=$e.fields.map(ua=>ua);ea[wn].name=Gn,q({type:$s.hideColumnRenameInput}),ro({...$e,fields:ea},se)},wa=()=>{q({type:$s.closeSearch})},Fa=Gn=>{(0,Ja.ff)(Os,{item:Rs.GRID_SELECTED}),q({type:$s.multipleCellsSelected,payload:{selection:Gn}})},Oa=Gn=>{ro(Gn,se)};if(!$e)return o.createElement(no.Z,{panelId:T,fieldConfig:B,data:D});if(!_s())return o.createElement(no.Z,{panelId:T,message:"Datagrid is not enabled",fieldConfig:B,data:D});if(!document.getElementById("portal")){const Gn=document.createElement("div");Gn.id="portal",document.body.appendChild(Gn)}const Aa=zg(mt,tt);return o.createElement(o.Fragment,null,o.createElement(Mr.ZP,{className:Aa.dataEditor,getCellContent:wt,columns:ce,rows:$e.length,width:W,height:G,initialSize:[W,G],theme:Wt,smoothScrollX:!0,smoothScrollY:!0,overscrollY:50,onCellEdited:_s()?Ot:void 0,getCellsForSelection:_s()?!0:void 0,showSearch:_s()?He:!1,onSearchClose:wa,gridSelection:_e,onGridSelectionChange:_s()?Fa:void 0,onRowAppended:_s()?Vt:void 0,onDelete:_s()?En:void 0,rowMarkers:_s()?Ag:Lg,onColumnResize:sn,onColumnResizeEnd:Cn,onCellContextMenu:_s()?kn:void 0,onHeaderContextMenu:_s()?bn:void 0,onHeaderMenuClick:_s()?ra:void 0,trailingRowOptions:Ug,rightElement:_s()?o.createElement(Dg,{onColumnInputBlur:on,divStyle:Aa.addColumnDiv}):null,rightElementProps:Wg,freezeColumns:Ae,onRowMoved:_s()?Sn:void 0,onColumnMoved:_s()?Rn:void 0}),fe.isContextMenuOpen&&o.createElement(Yg,{menuData:fe,data:$e,saveData:Oa,closeContextMenu:Dn,dispatch:q,gridSelection:_e,columnFreezeIndex:Ae,renameColumnClicked:Jn}),Se.isInputOpen?o.createElement(Qg,{onColumnInputBlur:Kn,renameColumnData:Se,classStyle:Aa.renameColumnInput}):null)}const dm={selectedSeries:0},Jg=new w.c(Zg).setPanelOptions((s,D)=>{const T=D.data.map((B,W)=>({value:W,label:B.refId}));return D.options&&!T.map(B=>B.value).includes(D.options.selectedSeries??0)&&(D.options.selectedSeries=dm.selectedSeries),s.addSelect({path:"selectedSeries",name:"Select series",defaultValue:dm.selectedSeries,settings:{options:T}})});class Xg extends o.Component{constructor(){super(...arguments),this.subscription=new Oo.w0,this.state={}}componentDidMount(){const{eventBus:D}=this.props;this.subscription.add(D.subscribe(Cr.es,T=>{this.setState({event:T})})),this.subscription.add(D.subscribe(Cr.xH,T=>{this.setState({event:T})})),this.subscription.add(D.subscribe(Ro.IA,T=>{this.setState({event:T})})),this.subscription.add(D.subscribe(Ro.oi,T=>{this.setState({event:T})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:D}=this.state;if(!D)return o.createElement("div",null,"no events yet");const{type:T,payload:B,origin:W}=D;return o.createElement(_.$,{autoHeightMin:"100%",autoHeightMax:"100%"},o.createElement("h3",null,"Origin: ",W?.path),o.createElement("span",null,"Type: ",T),!!B&&o.createElement(o.Fragment,null,o.createElement("pre",null,JSON.stringify(B.point,null,"  ")),B.data&&o.createElement(Ml.H,{data:B.data,rowIndex:B.rowIndex,columnIndex:B.columnIndex})))}}var qg=e(68016);let Cd=100;class ep extends o.PureComponent{constructor(D){super(D),this.history=new qg.d({capacity:40,append:"head"}),this.eventObserver={next:B=>{const W=B.origin;this.history.add({key:Cd++,type:B.type,path:W?.path,payload:B.payload}),this.setState({counter:Cd})}},this.state={counter:Cd};const T=[];T.push(D.eventBus.getStream(Cr.es).subscribe(this.eventObserver)),T.push(D.eventBus.getStream(Cr.xH).subscribe(this.eventObserver)),T.push(D.eventBus.getStream(Cr.v9).subscribe(this.eventObserver)),this.subs=T}componentWillUnmount(){for(const D of this.subs)D.unsubscribe()}render(){return o.createElement(_.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((D,T)=>o.createElement("div",{key:D.key},JSON.stringify(D.path)," ",D.type," / X:",JSON.stringify(D.payload.x)," / Y:",JSON.stringify(D.payload.y))))}}var hr=e(53470);class tp extends o.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(D){const{data:T,options:B}=this.props;if(D.data!==T&&(this.counters.dataChanged++,B.counters?.schemaChanged)){const W=D.data?.series,G=T.series;G&&W&&((0,Cl.nl)(G,W,Cl.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:D,options:T}=this.props,B=T.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const W=Date.now(),G=W-this.lastRender;this.lastRender=W;const Y=hr.TB.get(hr.gz.lastNotNull);return o.createElement("div",null,o.createElement("div",null,o.createElement(ls.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters,tooltip:"Step back"}),o.createElement("span",null,B.render&&o.createElement("span",null,"Render: ",this.counters.render,"\xA0"),B.dataChanged&&o.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),B.schemaChanged&&o.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),o.createElement("span",null,"TIME: ",G,"ms"))),D.series&&D.series.map((q,se)=>o.createElement("div",{key:`${se}/${q.refId}`},o.createElement("h4",null,(0,os.nf)(q,se)," (",q.length,")"),o.createElement("table",{className:"filter-table"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("td",null,"Field"),o.createElement("td",null,"Type"),o.createElement("td",null,"Last"))),o.createElement("tbody",null,q.fields.map((ce,fe)=>{const Se=Y.reduce(ce,!1,!1)[Y.id];return o.createElement("tr",{key:`${fe}/${ce.name}`},o.createElement("td",null,(0,os.CZ)(ce,q,D.series)),o.createElement("td",null,ce.type),o.createElement("td",null,`${Se}`))}))))))}}function np(s){const D=(0,nr.R9)(),T=B=>{D.onInstanceStateChange({name:B.currentTarget.value})};return o.createElement(o.Fragment,null,o.createElement(Zs.g,{label:"State name"},o.createElement(hi.I,{value:D.instanceState?.name??"",onChange:T})))}function ap({value:s,context:D,onChange:T,item:B}){return o.createElement("div",null,"Current value: ",D.instanceState?.name," ")}var ar=(s=>(s.Cursor="cursor",s.Events="events",s.Render="render",s.State="State",s.ThrowError="ThrowError",s))(ar||{});class sp extends o.Component{render(){const{options:D}=this.props;switch(D.mode){case ar.Events:return o.createElement(ep,{eventBus:this.props.eventBus});case ar.Cursor:return o.createElement(Xg,{eventBus:this.props.eventBus});case ar.State:return o.createElement(np,{...this.props});case ar.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return o.createElement(tp,{...this.props})}}}const rp=new w.c(sp).useFieldConfig().setPanelOptions(s=>{s.addSelect({path:"mode",name:"Mode",defaultValue:ar.Render,settings:{options:[{label:"Render",value:ar.Render},{label:"Events",value:ar.Events},{label:"Cursor",value:ar.Cursor},{label:"Cursor",value:ar.Cursor},{label:"Share state",value:ar.State},{label:"Throw error",value:ar.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:D})=>D===ar.State,editor:ap}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:D})=>D===ar.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:D})=>D===ar.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:D})=>D===ar.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var Ci=e(96083),op=e(48706),Dd=(s=>(s.Bytes="bytes",s.Short="short",s.Nanoseconds="ns",s))(Dd||{}),Qr=(s=>(s.TopTable="topTable",s.FlameGraph="flameGraph",s.Both="both",s))(Qr||{}),oo=(s=>(s.ValueBased="valueBased",s.PackageBased="packageBased",s))(oo||{}),Ur=(s=>(s.Default="default",s.DiffColorBlind="diffColorBlind",s))(Ur||{});function ip(s,D){const T=lp(s);return um(T,D,"parents")}function lp(s){return s.map(D=>{if(!D.parents?.length)return D;const T={...D,children:[]},B=[{child:T,parent:D.parents[0]}];for(;B.length;){const W=B.shift(),G={...W.parent,children:W.child?[W.child]:[],parents:[]};W.child&&(G.value=W.child.value,W.child.parents=[G]),W.parent.parents?.length&&B.push({child:G,parent:W.parent.parents[0]})}return T})}function um(s,D,T="children"){const B=T==="parents"?"children":"parents",W=[],G=[{previous:void 0,items:s,level:0}];for(;G.length;){const Y=G.shift(),q=Y.items.flatMap(Se=>Se.itemIndexes),se={value:Y.items.reduce((Se,_e)=>Se+_e.value,0),itemIndexes:q,children:[],parents:[],start:0};if(W[Y.level]=W[Y.level]||[],W[Y.level].push(se),Y.previous){se[B]=[Y.previous];const Se=Y.previous[T]?.reduce((_e,Ae)=>_e+Ae.value,0)||0;se.start=Y.previous.start+Se,Y.previous[T].push(se)}const ce=Y.items.flatMap(Se=>Se[T]||[]),fe=(0,ne.groupBy)(ce,Se=>D.getLabel(Se.itemIndexes[0]));for(const Se of Object.values(fe))G.push({previous:se,items:Se,level:Y.level+1})}return T==="parents"&&W.reverse(),W}function cp(s){const D=[];let T=0,B;const W={};for(let G=0;G<s.data.length;G++){const Y=s.getLevel(G),q=G>0?s.getLevel(G-1):void 0;if(D[Y]=D[Y]||[],q&&q>=Y){const ce=D[Y][D[Y].length-1];T=ce.start+s.getValue(ce.itemIndexes[0])+s.getValueRight(ce.itemIndexes[0]),B=ce.parents[0]}const se={itemIndexes:[G],value:s.getValue(G)+s.getValueRight(G),valueRight:s.isDiffFlamegraph()?s.getValueRight(G):void 0,start:T,parents:B&&[B],children:[]};W[s.getLabel(G)]?W[s.getLabel(G)].push(se):W[s.getLabel(G)]=[se],B&&B.children.push(se),B=se,D[Y].push(se)}return[D,W]}function mm(s){return s.missingFields.length?`Data is missing fields: ${s.missingFields.join(", ")}`:s.wrongTypeFields.length?`Data has fields of wrong type: ${s.wrongTypeFields.map(D=>`${D.name} has type ${D.type} but should be ${D.expectedTypes.join(" or ")}`).join(", ")}`:""}function Pd(s){const D=[["label",[Yn.fS.string,Yn.fS.enum]],["level",[Yn.fS.number]],["value",[Yn.fS.number]],["self",[Yn.fS.number]]],T=[],B=[];for(const W of D){const[G,Y]=W,q=s.fields.find(se=>se.name===G);if(!q){T.push(G);continue}Y.includes(q.type)||B.push({name:G,expectedTypes:Y,type:q.type})}if(T.length>0||B.length>0)return{wrongTypeFields:B,missingFields:T}}class dp{constructor(D,T=(0,op.j)()){this.data=D;const B=Pd(D);if(B)throw new Error(mm(B));if(this.labelField=D.fields.find(G=>G.name==="label"),this.levelField=D.fields.find(G=>G.name==="level"),this.valueField=D.fields.find(G=>G.name==="value"),this.selfField=D.fields.find(G=>G.name==="self"),this.valueRightField=D.fields.find(G=>G.name==="valueRight"),this.selfRightField=D.fields.find(G=>G.name==="selfRight"),(this.valueField||this.selfField)&&!(this.valueField&&this.selfField))throw new Error("Malformed dataFrame: both valueRight and selfRight has to be present if one of them is present.");const W=this.labelField?.config?.type?.enum;W?(this.labelDisplayProcessor=(0,Qs.U)({field:this.labelField,theme:T}),this.uniqueLabels=W.text||[]):(this.labelDisplayProcessor=G=>({text:G+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values)]),this.valueDisplayProcessor=(0,Qs.U)({field:this.valueField,theme:T})}isDiffFlamegraph(){return this.valueRightField&&this.selfRightField}getLabel(D){return this.labelDisplayProcessor(this.labelField.values[D]).text}getLevel(D){return this.levelField.values[D]}getValue(D){return ec(this.valueField,D)}getValueRight(D){return ec(this.valueRightField,D)}getSelf(D){return ec(this.selfField,D)}getSelfRight(D){return ec(this.selfRightField,D)}getSelfDisplay(D){return this.valueDisplayProcessor(this.getSelf(D))}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case Dd.Bytes:return"RAM";case Dd.Nanoseconds:return"Time"}return"Count"}getLevels(){return this.initLevels(),this.levels}getSandwichLevels(D){const T=this.getNodesWithLabel(D);if(!T?.length)return[[],[]];const B=ip(T,this),W=um(T,this);return[B,W]}getNodesWithLabel(D){return this.initLevels(),this.uniqueLabelsMap[D]}initLevels(){if(!this.levels){const[D,T]=cp(this);this.levels=D,this.uniqueLabelsMap=T}}}function ec(s,D){return s?(typeof D=="number"?[D]:D).reduce((B,W)=>B+s.values[W],0):0}var fm=e(13479);const ei=22*window.devicePixelRatio,gm=10*window.devicePixelRatio,up=.5*window.devicePixelRatio,mp=20*window.devicePixelRatio,pm=.5*window.devicePixelRatio,Md=4*window.devicePixelRatio,hm=800,Td=120,fp=({itemData:s,onMenuItemClick:D,onItemFocus:T,onSandwich:B})=>{function W(){return o.createElement(o.Fragment,null,o.createElement(Is.s,{label:"Focus block",icon:"eye",onClick:()=>{T(),D()}}),o.createElement(Is.s,{label:"Copy function name",icon:"copy",onClick:()=>{navigator.clipboard.writeText(s.label).then(()=>{D()})}}),o.createElement(Is.s,{label:"Sandwich view",icon:"gf-show-context",onClick:()=>{B(),D()}}))}return o.createElement("div",{"data-testid":"contextMenu"},o.createElement(Jo.x,{renderMenuItems:W,x:s.posX+10,y:s.posY,focusOnOpen:!1}))},vm=o.memo(({data:s,focusedItem:D,totalTicks:T,sandwichedLabel:B,onFocusPillClick:W,onSandwichPillClick:G,getTheme:Y})=>{const q=gp(Y()),se=[],ce=(0,Ts.Cf)("short")(T),fe=s.valueDisplayProcessor(T);let Se=fe.text+fe.suffix;const _e=s.getUnitTitle();if(_e==="Count"&&(fe.suffix||(Se=fe.text)),se.push(o.createElement("div",{className:q.metadataPill,key:"default"},Se," | ",ce.text,ce.suffix," samples (",_e,")")),B&&se.push(o.createElement("span",{key:"sandwich"},o.createElement(Re.J,{size:"sm",name:"angle-right"}),o.createElement("div",{className:q.metadataPill},o.createElement(Re.J,{size:"sm",name:"gf-show-context"})," ",o.createElement("span",{className:q.metadataPillName},B.substring(B.lastIndexOf("/")+1)),o.createElement(ls.h,{className:q.pillCloseButton,name:"times",size:"sm",onClick:G,tooltip:"Remove sandwich view","aria-label":"Remove sandwich view"})))),D){const Ae=Math.round(1e4*(D.item.value/T))/100;se.push(o.createElement("span",{key:"focus"},o.createElement(Re.J,{size:"sm",name:"angle-right"}),o.createElement("div",{className:q.metadataPill},o.createElement(Re.J,{size:"sm",name:"eye"})," ",Ae,"% of total",o.createElement(ls.h,{className:q.pillCloseButton,name:"times",size:"sm",onClick:W,tooltip:"Remove focus","aria-label":"Remove focus"}))))}return o.createElement(o.Fragment,null,o.createElement("div",{className:q.metadata},se))});vm.displayName="FlameGraphMetadata";const gp=s=>({metadataPill:(0,F.css)`
    label: metadataPill;
    display: inline-flex;
    align-items: center;
    background: ${s.colors.background.secondary};
    border-radius: ${s.shape.borderRadius(8)};
    padding: ${s.spacing(.5,1)};
    font-size: ${s.typography.bodySmall.fontSize};
    font-weight: ${s.typography.fontWeightMedium};
    line-height: ${s.typography.bodySmall.lineHeight};
    color: ${s.colors.text.secondary};
  `,pillCloseButton:(0,F.css)`
    label: pillCloseButton;
    vertical-align: text-bottom;
    margin: ${s.spacing(0,.5)};
  `,metadata:(0,F.css)`
    margin: 8px 0;
    text-align: center;
  `,metadataPillName:(0,F.css)`
    label: metadataPillName;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-left: ${s.spacing(.5)};
  `}),pp=vm;var hp=e(94696);const vp=({data:s,item:D,totalTicks:T,position:B,getTheme:W})=>{const G=bp(W());if(!(D&&B))return null;let Y;if(s.isDiffFlamegraph()){const q=Ep(s,D,T);Y=o.createElement(hp.e,{className:G.tooltipTable,columns:[{id:"label",header:""},{id:"baseline",header:"Baseline"},{id:"comparison",header:"Comparison"},{id:"diff",header:"Diff"}],data:q,getRowId:se=>se.rowId})}else{const q=yp(s,D,T);Y=o.createElement("p",{className:G.lastParagraph},q.unitTitle,o.createElement("br",null),"Total: ",o.createElement("b",null,q.unitValue)," (",q.percentValue,"%)",o.createElement("br",null),"Self: ",o.createElement("b",null,q.unitSelf)," (",q.percentSelf,"%)",o.createElement("br",null),"Samples: ",o.createElement("b",null,q.samples))}return o.createElement(rs.h_,null,o.createElement(ms.S,{className:G.tooltipContainer,position:B,offset:{x:15,y:0}},o.createElement("div",{className:G.tooltipContent},o.createElement("p",{className:G.tooltipName},s.getLabel(D.itemIndexes[0])),Y)))},yp=(s,D,T)=>{const B=s.valueDisplayProcessor(D.value),W=s.getSelfDisplay(D.itemIndexes),G=Math.round(1e4*(B.numeric/T))/100,Y=Math.round(1e4*(W.numeric/T))/100;let q=B.text+B.suffix,se=W.text+W.suffix;const ce=s.getUnitTitle();return ce==="Count"&&(B.suffix||(q=B.text),W.suffix||(se=W.text)),{percentValue:G,percentSelf:Y,unitTitle:ce,unitValue:q,unitSelf:se,samples:B.numeric.toLocaleString()}},Ep=(s,D,T)=>{const W=s.getLevels()[0][0].valueRight,G=T-W,Y=D.value-D.valueRight,q=Math.round(1e4*Y/G)/100,se=Math.round(1e4*D.valueRight/W)/100,ce=(se-q)/q*100,fe=Id(s,s.valueDisplayProcessor(Y)),Se=Id(s,s.valueDisplayProcessor(D.valueRight)),_e=(0,Ts.Cf)("short");return[{rowId:"1",label:"% of total",baseline:q+"%",comparison:se+"%",diff:_e(ce).text+"%"},{rowId:"2",label:"Value",baseline:fe,comparison:Se,diff:Id(s,s.valueDisplayProcessor(D.valueRight-Y))},{rowId:"3",label:"Samples",baseline:_e(Y).text,comparison:_e(D.valueRight).text,diff:_e(D.valueRight-Y).text}]};function Id(s,D){let T=D.text+D.suffix;return s.getUnitTitle()==="Count"&&(D.suffix||(T=D.text)),T}const bp=s=>({tooltipContainer:(0,F.css)`
    title: tooltipContainer;
    overflow: hidden;
  `,tooltipContent:(0,F.css)`
    title: tooltipContent;
    font-size: ${s.typography.bodySmall.fontSize};
    width: 100%;
  `,tooltipName:(0,F.css)`
    title: tooltipName;
    margin-top: 0;
    word-break: break-all;
  `,lastParagraph:(0,F.css)`
    title: lastParagraph;
    margin-bottom: 0;
  `,name:(0,F.css)`
    title: name;
    margin-bottom: 10px;
  `,tooltipTable:(0,F.css)`
    title: tooltipTable;
    max-width: 400px;
  `}),xp=vp;var Sp=e(5135),qa=e(63374),ym=e(94079);function Cp(s,D=0){let T,B,W,G,Y,q,se,ce;for(T=s.length&3,B=s.length-T,W=D,Y=3432918353,q=461845907,ce=0;ce<B;)se=s.charCodeAt(ce)&255|(s.charCodeAt(++ce)&255)<<8|(s.charCodeAt(++ce)&255)<<16|(s.charCodeAt(++ce)&255)<<24,++ce,se=(se&65535)*Y+(((se>>>16)*Y&65535)<<16)&4294967295,se=se<<15|se>>>17,se=(se&65535)*q+(((se>>>16)*q&65535)<<16)&4294967295,W^=se,W=W<<13|W>>>19,G=(W&65535)*5+(((W>>>16)*5&65535)<<16)&4294967295,W=(G&65535)+27492+(((G>>>16)+58964&65535)<<16);switch(se=0,T){case 3:se^=(s.charCodeAt(ce+2)&255)<<16;case 2:se^=(s.charCodeAt(ce+1)&255)<<8;case 1:se^=s.charCodeAt(ce)&255;default:se=(se&65535)*Y+(((se>>>16)*Y&65535)<<16)&4294967295,se=se<<15|se>>>17,se=(se&65535)*q+(((se>>>16)*q&65535)<<16)&4294967295,W^=se}return W^=s.length,W^=W>>>16,W=(W&65535)*2246822507+(((W>>>16)*2246822507&65535)<<16)&4294967295,W^=W>>>13,W=(W&65535)*3266489909+(((W>>>16)*3266489909&65535)<<16)&4294967295,W^=W>>>16,W>>>0}const ti=[(0,qa.Z)({h:24,s:69,l:60}),(0,qa.Z)({h:34,s:65,l:65}),(0,qa.Z)({h:194,s:52,l:61}),(0,qa.Z)({h:163,s:45,l:55}),(0,qa.Z)({h:211,s:48,l:60}),(0,qa.Z)({h:246,s:40,l:65}),(0,qa.Z)({h:305,s:63,l:79}),(0,qa.Z)({h:47,s:100,l:73}),(0,qa.Z)({r:183,g:219,b:171}),(0,qa.Z)({r:244,g:213,b:152}),(0,qa.Z)({r:78,g:146,b:249}),(0,qa.Z)({r:249,g:186,b:143}),(0,qa.Z)({r:242,g:145,b:145}),(0,qa.Z)({r:130,g:181,b:216}),(0,qa.Z)({r:229,g:168,b:226}),(0,qa.Z)({r:174,g:162,b:224}),(0,qa.Z)({r:154,g:196,b:138}),(0,qa.Z)({r:242,g:201,b:109}),(0,qa.Z)({r:101,g:197,b:219}),(0,qa.Z)({r:249,g:147,b:78}),(0,qa.Z)({r:234,g:100,b:96}),(0,qa.Z)({r:81,g:149,b:206}),(0,qa.Z)({r:214,g:131,b:206}),(0,qa.Z)({r:128,g:110,b:183})],Dp=Od(1,100,0,1),Pp=Od(100,100,0,1),Mp=`linear-gradient(90deg, ${Dp} 0%, ${Pp} 100%)`,Tp=`linear-gradient(90deg, ${ti[0]} 0%, ${ti[2]} 30%, ${ti[6]} 50%, ${ti[7]} 70%, ${ti[8]} 100%)`;function Od(s,D,T,B){const W=Math.min(1,s/D/(B-T)),G=50-50*W,Y=65+7*W;return(0,qa.Z)({h:G,s:100,l:Y})}function Ip(s,D){const T=wp(s),W=Cp(T||"",0)%ti.length;let G=ti[W].clone();return D.isLight&&(G=G.brighten(15)),G}const tc=["rgb(0, 170, 0)","rgb(148, 142, 142)","rgb(200, 0, 0)"],Op=`linear-gradient(90deg, ${tc[0]} 0%, ${tc[1]} 50%, ${tc[2]} 100%)`,nc=["rgb(26, 133, 255)","rgb(148, 142, 142)","rgb(220, 50, 32)"],Rp=`linear-gradient(90deg, ${nc[0]} 0%, ${nc[1]} 50%, ${nc[2]} 100%)`;function Ap(s,D,T,B,W){const G=W===Ur.Default?tc:nc,Y=(0,ym.scaleLinear)().domain([-100,0,100]).range(G),q=s-D,se=T-B;if(B===0||se===0){const Ae=Y(0);return(0,qa.Z)(Ae)}const ce=Math.round(1e4*q/se)/100,Se=(Math.round(1e4*D/B)/100-ce)/ce*100,_e=Y(Se);return(0,qa.Z)(_e)}const Lp=[["phpspy",/^(?<packageName>(.*\/)*)(?<filename>.*\.php+)(?<line_info>.*)$/],["pyspy",/^(?<packageName>(.*\/)*)(?<filename>.*\.py+)(?<line_info>.*)$/],["rbspy",/^(?<packageName>(.*\/)*)(?<filename>.*\.rb+)(?<line_info>.*)$/],["nodespy",/^(\.\/node_modules\/)?(?<packageName>[^/]*)(?<filename>.*\.?(jsx?|tsx?)?):(?<functionName>.*):(?<line_info>.*)$/],["gospy",/^(?<packageName>.*?\/.*?\.|.*?\.|.+)(?<functionName>.*)$/],["javaspy",/^(?<packageName>.+\/)(?<filename>.+\.)(?<functionName>.+)$/],["dotnetspy",/^(?<packageName>.+)\.(.+)\.(.+)\(.*\)$/],["tracing",/^(?<packageName>.+?):.*$/],["pyroscope-rs",/^(?<packageName>[^::]+)/],["ebpfspy",/^(?<packageName>.+)$/],["unknown",/^(?<packageName>.+)$/]];function wp(s){for(const[D,T]of Lp){const B=s.match(T);if(B)return B.groups?.packageName||""}}const Bp=new Sp.Z;function Np(s){const{canvasRef:D,data:T,levels:B,wrapperWidth:W,rangeMin:G,rangeMax:Y,search:q,textAlign:se,totalViewTicks:ce,totalColorTicks:fe,totalTicksRight:Se,colorScheme:_e,focusedItemData:Ae,getTheme:He}=s,tt=(0,o.useMemo)(()=>{if(q){const Wt=new Set;let wt=Bp.filter(T.getUniqueLabels(),q);if(wt)for(let Ot of wt)Wt.add(T.getUniqueLabels()[Ot]);return Wt}},[q,T]),$e=Fp(D,W,B.length),mt=He();(0,o.useEffect)(()=>{if(!$e)return;$e.clearRect(0,0,$e.canvas.width,$e.canvas.height);const Wt=W*window.devicePixelRatio/ce/(Y-G);for(let wt=0;wt<B.length;wt++){const Ot=B[wt],on=Up(T,Ot,wt,ce,G,Wt);for(const Vt of on){const sn=Ae?Ae.level:0;Wp($e,Vt,fe,Se,G,Y,wt,sn,tt,se,_e,mt)}}},[$e,T,B,W,G,Y,q,Ae,tt,se,ce,fe,Se,_e,mt])}function Fp(s,D,T){const[B,W]=(0,o.useState)();return(0,o.useEffect)(()=>{if(!(T&&s.current))return;const G=s.current.getContext("2d"),Y=ei*T;s.current.width=Math.round(D*window.devicePixelRatio),s.current.height=Math.round(Y),s.current.style.width=`${D}px`,s.current.style.height=`${Y/window.devicePixelRatio}px`,G.textBaseline="middle",G.font=12*window.devicePixelRatio+"px monospace",G.strokeStyle="white",W(G)},[s,W,D,T]),B}function Up(s,D,T,B,W,G){const Y=[];for(let q=0;q<D.length;q+=1){const se=D[q],ce=Rd(se.start,B,W,G);let fe=se.value;const Se=fe*G<=gm;if(Se)for(;q<D.length-1&&se.start+fe===D[q+1].start&&D[q+1].value*G<=gm;)q+=1,fe+=D[q].value;const _e=s.valueDisplayProcessor(se.value);let Ae=_e.suffix?_e.text+_e.suffix:_e.text;const He=fe*G-(Se?0:pm*2);Y.push({width:He,height:ei,x:ce,y:T*ei,collapsed:Se,ticks:fe,ticksRight:se.valueRight,label:s.getLabel(se.itemIndexes[0]),unitLabel:Ae,itemIndex:se.itemIndexes[0]})}return Y}function Wp(s,D,T,B,W,G,Y,q,se,ce,fe,Se){if(D.width<up)return;s.beginPath(),s.rect(D.x+(D.collapsed?0:pm),D.y,D.width,D.height);const _e=D.ticksRight!==void 0&&(fe===Ur.Default||fe===Ur.DiffColorBlind)?Ap(D.ticks,D.ticksRight,T,B,fe):fe===oo.ValueBased?Od(D.ticks,T,W,G):Ip(D.label,Se),Ae=(0,qa.Z)(Se.colors.background.secondary),He=Se.isLight?Ae.darken(10).toHexString():Ae.lighten(10).toHexString();if(se?s.fillStyle=se.has(D.label)?_e.toHslString():He:D.collapsed?s.fillStyle=He:s.fillStyle=Y>q-1?_e.toHslString():_e.lighten(15).toHslString(),D.collapsed){s.fill();return}s.stroke(),s.fill(),D.width>=mp&&_p(s,D.label,D,ce)}function _p(s,D,T,B){s.save(),s.clip(),s.fillStyle="#222";const W=s.measureText(D),G=T.width-Md;let Y=`${D} (${T.unitLabel})`,q=Math.max(T.x,0)+Md;W.width>G&&(s.textAlign=B,B==="right"&&(Y=D,q=T.x+T.width-Md)),s.fillText(Y,q,T.y+ei/2),s.restore()}function Rd(s,D,T,B){return(s-D*T)*B}const $p=({data:s,rangeMin:D,rangeMax:T,search:B,setRangeMin:W,setRangeMax:G,onItemFocused:Y,focusedItemData:q,textAlign:se,onSandwich:ce,sandwichItem:fe,onFocusPillClick:Se,onSandwichPillClick:_e,colorScheme:Ae,getTheme:He})=>{const tt=Vp(),[$e,mt,Wt,wt,Ot]=(0,o.useMemo)(()=>{let Kn=s.getLevels(),wa=Kn.length?Kn[0][0].value:0,Fa=Kn.length?Kn[0][0].valueRight:void 0,Oa=0,Aa=wa;if(fe){const[Gn,wn]=s.getSandwichLevels(fe);Kn=[...Gn,[],...wn],Aa=wn[0]?.[0]?.value??0,Oa=Gn.length}return[Kn,wa,Fa,Aa,Oa]},[s,fe]),[on,{width:Vt}]=(0,fm.Z)(),sn=(0,o.useRef)(null),[Cn,Dn]=(0,o.useState)(),[En,kn]=(0,o.useState)();Np({canvasRef:sn,colorScheme:Ae,data:s,focusedItemData:q,levels:$e,rangeMax:T,rangeMin:D,search:B,textAlign:se,totalViewTicks:wt,totalColorTicks:s.isDiffFlamegraph()?mt:wt,totalTicksRight:Wt,wrapperWidth:Vt,getTheme:He});const bn=(0,o.useCallback)(Kn=>{Dn(void 0);const wa=sn.current.clientWidth/wt/(T-D),{levelIndex:Fa,barIndex:Oa}=Em({x:Kn.nativeEvent.offsetX,y:Kn.nativeEvent.offsetY},$e,wa,wt,D);if(Oa!==-1&&!isNaN(Fa)&&!isNaN(Oa)){const Aa=$e[Fa][Oa];kn({posY:Kn.clientY,posX:Kn.clientX,item:Aa,level:Fa,label:s.getLabel(Aa.itemIndexes[0])})}else kn(void 0)},[s,D,T,wt,$e]),[ra,Rn]=(0,o.useState)(),Sn=(0,o.useCallback)(Kn=>{if(En===void 0){Dn(void 0),Rn(void 0);const wa=sn.current.clientWidth/wt/(T-D),{levelIndex:Fa,barIndex:Oa}=Em({x:Kn.nativeEvent.offsetX,y:Kn.nativeEvent.offsetY},$e,wa,wt,D);Oa!==-1&&!isNaN(Fa)&&!isNaN(Oa)&&(Rn({x:Kn.clientX,y:Kn.clientY}),Dn($e[Fa][Oa]))}},[D,T,wt,En,$e,Rn]),Jn=(0,o.useCallback)(()=>{Dn(void 0)},[]);return(0,o.useEffect)(()=>{const Kn=wa=>{wa.target instanceof HTMLElement&&wa.target.parentElement?.id!=="flameGraphCanvasContainer_clickOutsideCheck"&&kn(void 0)};return window.addEventListener("click",Kn),()=>window.removeEventListener("click",Kn)},[kn]),o.createElement("div",{className:tt.graph},o.createElement(pp,{getTheme:He,data:s,focusedItem:q,sandwichedLabel:fe,totalTicks:wt,onFocusPillClick:Se,onSandwichPillClick:_e}),o.createElement("div",{className:tt.canvasContainer},fe&&o.createElement("div",null,o.createElement("div",{className:tt.sandwichMarker,style:{height:Ot*ei/window.devicePixelRatio}},"Callers",o.createElement(Re.J,{className:tt.sandwichMarkerIcon,name:"arrow-down"})),o.createElement("div",{className:tt.sandwichMarker,style:{marginTop:ei/window.devicePixelRatio}},o.createElement(Re.J,{className:tt.sandwichMarkerIcon,name:"arrow-up"}),"Callees")),o.createElement("div",{className:tt.canvasWrapper,id:"flameGraphCanvasContainer_clickOutsideCheck",ref:on},o.createElement("canvas",{ref:sn,"data-testid":"flameGraph",onClick:bn,onMouseMove:Sn,onMouseLeave:Jn}))),o.createElement(xp,{getTheme:He,position:ra,item:Cn,data:s,totalTicks:wt}),En&&o.createElement(fp,{itemData:En,onMenuItemClick:()=>{kn(void 0)},onItemFocus:()=>{W(En.item.start/wt),G((En.item.start+En.item.value)/wt),Y(En)},onSandwich:()=>{ce(s.getLabel(En.item.itemIndexes[0]))}}))},Vp=()=>({graph:(0,F.css)`
    label: graph;
    overflow: auto;
    height: 100%;
    flex-grow: 1;
    flex-basis: 50%;
  `,canvasContainer:(0,F.css)`
    label: canvasContainer;
    display: flex;
  `,canvasWrapper:(0,F.css)`
    label: canvasWrapper;
    cursor: pointer;
    flex: 1;
    overflow: hidden;
  `,sandwichMarker:(0,F.css)`
    label: sandwichMarker;
    writing-mode: vertical-lr;
    transform: rotate(180deg);
    overflow: hidden;
    white-space: nowrap;
  `,sandwichMarkerIcon:(0,F.css)`
    label: sandwichMarkerIcon;
    vertical-align: baseline;
  `}),Em=(s,D,T,B,W)=>{const G=Math.floor(s.y/(ei/window.devicePixelRatio)),Y=Kp(s.x,D[G],T,B,W);return{levelIndex:G,barIndex:Y}},Kp=(s,D,T,B,W)=>{if(D){let G=0,Y=D.length-1;for(;G<=Y;){const q=G+Y>>1,se=Rd(D[q].start,B,W,T),ce=Rd(D[q].start+D[q].value,B,W,T);if(se<=s&&ce>=s)return q;se>s?Y=q-1:G=q+1}}return-1},kp=$p;var zp=e(87231),Ad=e(92418),Di=e(13767),Hp=e(58047);const Gp=({search:s,setSearch:D,selectedView:T,setSelectedView:B,containerWidth:W,onReset:G,textAlign:Y,onTextAlignChange:q,showResetButton:se,colorScheme:ce,onColorSchemeChange:fe,stickyHeader:Se,extraHeaderElements:_e,vertical:Ae,isDiffMode:He,getTheme:tt})=>{const $e=bm(tt(),Se),[mt,Wt]=Zp(s,D),wt=mt!==""?o.createElement(Z.zx,{icon:"times",fill:"text",size:"sm",onClick:()=>{D(""),Wt("")}},"Clear"):null;return o.createElement("div",{className:$e.header},o.createElement("div",{className:$e.inputContainer},o.createElement(hi.I,{value:mt||"",onChange:Ot=>{Wt(Ot.currentTarget.value)},placeholder:"Search..",suffix:wt})),o.createElement("div",{className:$e.rightContainer},se&&o.createElement(Z.zx,{variant:"secondary",fill:"outline",size:"sm",icon:"history-alt",tooltip:"Reset focus and sandwich state",onClick:()=>{G()},className:$e.buttonSpacing,"aria-label":"Reset focus and sandwich state"}),o.createElement(jp,{value:ce,onChange:fe,isDiffMode:He,getTheme:tt}),o.createElement(jr.S,{size:"sm",disabled:T===Qr.TopTable,options:Yp,value:Y,onChange:q,className:$e.buttonSpacing}),o.createElement(jr.S,{size:"sm",options:Qp(W,Ae),value:T,onChange:B}),_e&&o.createElement("div",{className:$e.extraElements},_e)))};function jp(s){const D=bm(s.getTheme(),!1);let T=o.createElement(Di.v,null,o.createElement(Di.v.Item,{label:"By value",onClick:()=>s.onChange(oo.ValueBased)}),o.createElement(Di.v.Item,{label:"By package name",onClick:()=>s.onChange(oo.PackageBased)}));s.isDiffMode&&(T=o.createElement(Di.v,null,o.createElement(Di.v.Item,{label:"Default (green to red)",onClick:()=>s.onChange(Ur.Default)}),o.createElement(Di.v.Item,{label:"Color blind (blue to red)",onClick:()=>s.onChange(Ur.DiffColorBlind)})));const B={[oo.ValueBased]:D.colorDotByValue,[oo.PackageBased]:D.colorDotByPackage,[Ur.DiffColorBlind]:D.colorDotDiffColorBlind,[Ur.Default]:D.colorDotDiffDefault}[s.value]||D.colorDotByValue;return o.createElement(Hp.L,{overlay:T},o.createElement(Z.zx,{variant:"secondary",fill:"outline",size:"sm",tooltip:"Change color scheme",onClick:()=>{},className:D.buttonSpacing,"aria-label":"Change color scheme"},o.createElement("span",{className:(0,F.cx)(D.colorDot,B)})))}const Yp=[{value:"left",description:"Align text left",icon:"align-left"},{value:"right",description:"Align text right",icon:"align-right"}];function Qp(s,D){let T=[{value:Qr.TopTable,label:"Top Table",description:"Only show top table"},{value:Qr.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return(s>=hm||D)&&T.push({value:Qr.Both,label:"Both",description:"Show both the top table and flame graph"}),T}function Zp(s,D){const[T,B]=(0,o.useState)(s),W=(0,Ad.Z)(s);return(0,zp.Z)(()=>{D(T)},250,[T]),(0,o.useEffect)(()=>{W!==s&&s!==T&&B(s)},[s,W,T]),[T,B]}const bm=(s,D)=>({header:(0,F.css)`
    label: header;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    width: 100%;
    top: 0;
    ${D?(0,F.css)`
          z-index: ${s.zIndex.navbarFixed};
          position: sticky;
          padding-bottom: ${s.spacing(1)};
          padding-top: ${s.spacing(1)};
          background: ${s.colors.background.primary};
        `:""};
  `,inputContainer:(0,F.css)`
    label: inputContainer;
    margin-right: 20px;
    flex-grow: 1;
    min-width: 150px;
    max-width: 350px;
  `,rightContainer:(0,F.css)`
    label: rightContainer;
    display: flex;
    align-items: flex-start;
    flex-wrap: wrap;
  `,buttonSpacing:(0,F.css)`
    label: buttonSpacing;
    margin-right: ${s.spacing(1)};
  `,resetButton:(0,F.css)`
    label: resetButton;
    display: flex;
    margin-right: ${s.spacing(2)};
  `,resetButtonIconWrapper:(0,F.css)`
    label: resetButtonIcon;
    padding: 0 5px;
    color: ${s.colors.text.disabled};
  `,colorDot:(0,F.css)`
    label: colorDot;
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
  `,colorDotByValue:(0,F.css)`
    label: colorDotByValue;
    background: ${Mp};
  `,colorDotByPackage:(0,F.css)`
    label: colorDotByPackage;
    background: ${Tp};
  `,colorDotDiffDefault:(0,F.css)`
    label: colorDotDiffDefault;
    background: ${Op};
  `,colorDotDiffColorBlind:(0,F.css)`
    label: colorDotDiffColorBlind;
    background: ${Rp};
  `,extraElements:(0,F.css)`
    label: extraElements;
    margin-left: ${s.spacing(1)};
  `}),Jp=Gp;var xm=e(19977),Pi=e(23955),Sm=e(23166);const Cm=o.memo(({data:s,onSymbolClick:D,height:T,search:B,onSearch:W,sandwichItem:G,onSandwich:Y,onTableSort:q,getTheme:se,vertical:ce})=>{const fe=(0,o.useMemo)(()=>{let $e={};for(let mt=0;mt<s.data.length;mt++){const Wt=s.getValue(mt),wt=s.getValueRight(mt),Ot=s.getSelf(mt),on=s.getLabel(mt);$e[on]=$e[on]||{},$e[on].self=$e[on].self?$e[on].self+Ot:Ot,$e[on].total=$e[on].total?$e[on].total+Wt:Wt,$e[on].totalRight=$e[on].totalRight?$e[on].totalRight+wt:wt}return $e},[s]),Se=35,_e=ce?Math.min(Object.keys(fe).length*Se,800):0,Ae=th(_e,se()),[He,tt]=(0,o.useState)([{displayName:"Self",desc:!0}]);return o.createElement("div",{className:Ae.topTableContainer,"data-testid":"topTable"},o.createElement(xm.Z,{style:{width:"100%",height:T}},({width:$e,height:mt})=>{if($e<3||mt<3)return null;const Wt=Xp(s,fe,$e,D,W,Y,se,B,G);return o.createElement(Sm.i,{initialSortBy:He,onSortByChange:wt=>{wt&&wt.length&&q?.(wt[0].displayName+"_"+(wt[0].desc?"desc":"asc")),tt(wt)},data:Wt,width:$e,height:mt})}))});Cm.displayName="FlameGraphTopTableContainer";function Xp(s,D,T,B,W,G,Y,q,se){const ce=qp(G,W,q,se),fe={type:Yn.fS.string,name:"Symbol",values:[],config:{custom:{width:T-Ld-Td*2},links:[{title:"Highlight symbol",url:"",onClick:Ae=>{const tt=Ae.origin.field.values[Ae.origin.rowIndex];B(tt)}}]}};let Se;if(s.isDiffFlamegraph()){fe.config.custom.width=T-Ld-Td*3;const Ae=Xi("Baseline","percent"),He=Xi("Comparison","percent"),tt=Xi("Diff","percent");tt.config.custom.cellOptions.type=Lt.h2.ColorText,tt.config.mappings=[{type:Pi.H.ValueToText,options:{[1/0]:{text:"new",color:"red"}}},{type:Pi.H.ValueToText,options:{[-100]:{text:"removed",color:"green"}}},{type:Pi.H.RangeToText,options:{from:0,to:1/0,result:{color:"red"}}},{type:Pi.H.RangeToText,options:{from:-1/0,to:0,result:{color:"green"}}}];const $e=s.getLevels(),mt=$e.length?$e[0][0].value:0,Wt=$e.length?$e[0][0].valueRight:void 0;for(let wt in D){ce.values.push(null),fe.values.push(wt);const Ot=D[wt].total,on=D[wt].totalRight,Vt=mt-Wt,sn=Math.round(1e4*Ot/Vt)/100,Cn=Math.round(1e4*on/Wt)/100,Dn=(Cn-sn)/sn*100;tt.values.push(Dn),Ae.values.push(sn),He.values.push(Cn)}Se={fields:[ce,fe,Ae,He,tt],length:fe.values.length}}else{const Ae=Xi("Self",s.selfField.config.unit),He=Xi("Total",s.valueField.config.unit);for(let tt in D)ce.values.push(null),fe.values.push(tt),Ae.values.push(D[tt].self),He.values.push(D[tt].total);Se={fields:[ce,fe,Ae,He],length:fe.values.length}}return(0,Yr.SM)({data:[Se],fieldConfig:{defaults:{},overrides:[]},replaceVariables:Ae=>Ae,theme:Y()})[0]}function Xi(s,D){const T={width:Td,align:"auto",inspect:!1,cellOptions:{type:Lt.h2.Auto}};return{type:Yn.fS.number,name:s,values:[],config:{unit:D,custom:T}}}const Ld=61;function qp(s,D,T,B){const W={type:Lt.h2.Custom,cellComponent:Y=>o.createElement(eh,{frame:Y.frame,onSandwich:s,onSearch:D,search:T,sandwichItem:B,rowIndex:Y.rowIndex})},G={filterable:!1,width:Ld,hideHeader:!0,inspect:!1,align:"auto",cellOptions:W};return{type:Yn.fS.number,name:"actions",values:[],config:{custom:G}}}function eh(s){const D=nh(),T=s.frame.fields.find(G=>G.name==="Symbol")?.values[s.rowIndex],B=s.search===T,W=s.sandwichItem===T;return o.createElement("div",{className:D.actionCellWrapper},o.createElement(ls.h,{className:D.actionCellButton,name:"search",variant:B?"primary":"secondary",tooltip:B?"Clear from search":"Search for symbol","aria-label":B?"Clear from search":"Search for symbol",onClick:()=>{s.onSearch(B?"":T)}}),o.createElement(ls.h,{className:D.actionCellButton,name:"gf-show-context",tooltip:W?"Remove from sandwich view":"Show in sandwich view",variant:W?"primary":"secondary","aria-label":W?"Remove from sandwich view":"Show in sandwich view",onClick:()=>{s.onSandwich(W?void 0:T)}}))}const th=(s,D)=>({topTableContainer:(0,F.css)`
      label: topTableContainer;
      flex-grow: 1;
      flex-basis: 50%;
      overflow: hidden;
      padding: ${D.spacing(1)};
      background-color: ${D.colors.background.secondary};
      ${s?(0,F.css)`
            min-height: ${s}px;
          `:""}
    `}),nh=()=>({actionCellWrapper:(0,F.css)`
      label: actionCellWrapper;
      display: flex;
      height: 24px;
    `,actionCellButton:(0,F.css)`
      label: actionCellButton;
      margin-right: 0;
      width: 24px;
    `}),ah=Cm,sh=({data:s,onTableSymbolClick:D,onViewSelected:T,onTextAlignSelected:B,onTableSort:W,getTheme:G,stickyHeader:Y,extraHeaderElements:q,vertical:se})=>{const[ce,fe]=(0,o.useState)(),[Se,_e]=(0,o.useState)(0),[Ae,He]=(0,o.useState)(1),[tt,$e]=(0,o.useState)(""),[mt,Wt]=(0,o.useState)(Qr.Both),[wt,{width:Ot}]=(0,fm.Z)(),[on,Vt]=(0,o.useState)("left"),[sn,Cn]=(0,o.useState)(),Dn=G(),En=(0,o.useMemo)(()=>{if(s)return new dp(s,Dn)},[s,Dn]),[kn,bn]=rh(En),ra=oh(Dn,se);(0,o.useEffect)(()=>{Ot>0&&Ot<hm&&mt===Qr.Both&&!se&&Wt(Qr.FlameGraph)},[mt,Wt,Ot,se]);const Rn=(0,o.useCallback)(()=>{fe(void 0),_e(0),He(1)},[fe,He,_e]);function Sn(){Cn(void 0)}(0,o.useEffect)(()=>{Rn(),Sn()},[s,Rn]);const Jn=(0,o.useCallback)(Kn=>{tt===Kn?$e(""):(D?.(Kn),$e(Kn),Rn())},[$e,Rn,D,tt]);return En?o.createElement("div",{ref:wt,className:ra.container},o.createElement(Jp,{search:tt,setSearch:$e,selectedView:mt,setSelectedView:Kn=>{Wt(Kn),T?.(Kn)},containerWidth:Ot,onReset:()=>{Rn(),Sn()},textAlign:on,onTextAlignChange:Kn=>{Vt(Kn),B?.(Kn)},showResetButton:!!(ce||sn),colorScheme:kn,onColorSchemeChange:bn,stickyHeader:!!Y,extraHeaderElements:q,vertical:se,isDiffMode:!!En.isDiffFlamegraph(),getTheme:G}),o.createElement("div",{className:ra.body},mt!==Qr.FlameGraph&&o.createElement(ah,{data:En,onSymbolClick:Jn,height:mt===Qr.TopTable?600:void 0,search:tt,sandwichItem:sn,onSandwich:Cn,onSearch:$e,onTableSort:W,getTheme:G,vertical:se}),mt!==Qr.TopTable&&o.createElement(kp,{getTheme:G,data:En,rangeMin:Se,rangeMax:Ae,search:tt,setRangeMin:_e,setRangeMax:He,onItemFocused:Kn=>fe(Kn),focusedItemData:ce,textAlign:on,sandwichItem:sn,onSandwich:Kn=>{Rn(),Cn(Kn)},onFocusPillClick:Rn,onSandwichPillClick:Sn,colorScheme:kn}))):null};function rh(s){const[D,T]=(0,o.useState)(s?.isDiffFlamegraph()?Ur.Default:oo.ValueBased);return(0,o.useEffect)(()=>{s?.isDiffFlamegraph()&&(D===oo.ValueBased||D===oo.PackageBased)&&T(Ur.Default),!s?.isDiffFlamegraph()&&(D===Ur.Default||D===Ur.DiffColorBlind)&&T(oo.ValueBased)},[s,D]),[D,T]}function oh(s,D){return{container:(0,F.css)({label:"container",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0,gap:s.spacing(1)}),body:(0,F.css)({label:"body",display:"flex",flexGrow:1,minHeight:0,flexDirection:D?"column-reverse":"row",columnGap:s.spacing(1)})}}const ih=sh;function ac(s,D={}){(0,Ja.ff)(`grafana_flamegraph_${s}`,{app:Ci.zj.Unknown,grafana_version:V.config.buildInfo.version,...D})}const lh=s=>{const D=Pd(s.data.series[0]);return D?o.createElement(no.Z,{panelId:s.id,data:s.data,message:mm(D)}):o.createElement(ih,{data:s.data.series[0],stickyHeader:!1,getTheme:()=>V.config.theme2,onTableSymbolClick:()=>ac("table_item_selected"),onViewSelected:T=>ac("view_selected",{view:T}),onTextAlignSelected:T=>ac("text_align_selected",{align:T}),onTableSort:T=>ac("table_sort_selected",{sort:T})})};class ch{getListWithDefaults(D){return D.getListAppender({name:Ga.y.FlameGraph,pluginId:"flamegraph"})}getSuggestionsForData(D){if(!D.data)return;const T=D.data.series[0];!T||Pd(T)||this.getListWithDefaults(D).append({name:Ga.y.FlameGraph})}}const dh=new w.c(lh).setSuggestionsSupplier(new ch);var uh=e(45587),Dm=e(28409),sc=e(21308);const Pm=(s,D)=>{const T="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",B=D?T:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",W=D?T:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",G=s.isDark?B:W;return`
      background-color: ${s.colors.background.secondary};
      margin-right: ${s.spacing(4)};
      border: 1px solid ${s.colors.border.weak};
      border-bottom-left-radius: ${s.shape.borderRadius(2)};
      border-bottom-right-radius: ${s.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${s.breakpoints.down("xxl")} {
        margin-right: ${s.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${G};
      }
`},Mm=(s,D)=>(0,F.css)`
  color: ${D?s.v1.palette.blue95:s.colors.text.secondary};

  ${s.breakpoints.down("sm")} {
    display: none;
  }
`,Tm=(0,F.css)`
  padding: 16px;
`,mh=({card:s})=>{const D=(0,Q.wW)((0,o.useCallback)(B=>fh(B,s.done),[s.done])),T=(0,Q.wW)((0,o.useCallback)(B=>Mm(B,s.done),[s.done]));return o.createElement("div",{className:D.card},o.createElement("div",{className:Tm},o.createElement("a",{href:`${s.href}?utm_source=grafana_gettingstarted`,className:D.url},o.createElement("div",{className:D.heading},s.done?"complete":s.heading),o.createElement("h4",{className:D.title},s.title),o.createElement("div",null,o.createElement(Re.J,{className:T,name:s.icon,size:"xxl"})))),o.createElement("a",{href:`${s.learnHref}?utm_source=grafana_gettingstarted`,className:D.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",o.createElement(Re.J,{name:"external-link-alt"})))},fh=(s,D)=>({card:(0,F.css)`
      ${Pm(s,D)}

      min-width: 230px;

      ${s.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:(0,F.css)`
      text-transform: uppercase;
      color: ${D?s.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${s.spacing(2)};
    `,title:(0,F.css)`
      margin-bottom: ${s.spacing(2)};
    `,url:(0,F.css)`
      display: inline-block;
    `,learnUrl:(0,F.css)`
      border-top: 1px solid ${s.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `}),gh=({card:s})=>{const D=(0,Q.wW)((0,o.useCallback)(B=>hh(B,s.done),[s.done])),T=(0,Q.wW)((0,o.useCallback)(B=>Mm(B,s.done),[s.done]));return o.createElement("a",{className:D.card,target:"_blank",rel:"noreferrer",href:`${s.href}?utm_source=grafana_gettingstarted`,onClick:B=>ph(B,s)},o.createElement("div",{className:Tm},o.createElement("div",{className:D.type},s.type),o.createElement("div",{className:D.heading},s.done?"complete":s.heading),o.createElement("h4",{className:D.cardTitle},s.title),o.createElement("div",{className:D.info},s.info),o.createElement(Re.J,{className:T,name:s.icon,size:"xxl"})))},ph=(s,D)=>{s.preventDefault(),Hs.Z.get(D.key)||Hs.Z.set(D.key,!0)},hh=(s,D)=>({card:(0,F.css)`
      ${Pm(s,D)}
      width: 460px;
      min-width: 460px;

      ${s.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${s.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:(0,F.css)`
      color: ${s.colors.primary.text};
      text-transform: uppercase;
    `,heading:(0,F.css)`
      text-transform: uppercase;
      color: ${s.colors.primary.text};
      margin-bottom: ${s.spacing(1)};
    `,cardTitle:(0,F.css)`
      margin-bottom: ${s.spacing(2)};
    `,info:(0,F.css)`
      margin-bottom: ${s.spacing(2)};
    `,status:(0,F.css)`
      display: flex;
      justify-content: flex-end;
    `}),vh=({step:s})=>{const D=(0,Q.wW)(yh);return o.createElement("div",{className:D.setup},o.createElement("div",{className:D.info},o.createElement("h2",{className:D.title},s.title),o.createElement("p",null,s.info)),o.createElement("div",{className:D.cards},s.cards.map((T,B)=>{const W=`${T.title}-${B}`;return T.type==="tutorial"?o.createElement(gh,{key:W,card:T}):o.createElement(mh,{key:W,card:T})})))},yh=s=>({setup:(0,F.css)`
      display: flex;
      width: 95%;
    `,info:(0,F.css)`
      width: 172px;
      margin-right: 5%;

      ${s.breakpoints.down("xxl")} {
        margin-right: ${s.spacing(4)};
      }
      ${s.breakpoints.down("sm")} {
        display: none;
      }
    `,title:(0,F.css)`
      color: ${s.v1.palette.blue95};
    `,cards:(0,F.css)`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${s.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var rc=e(52436);const Im="Grafana fundamentals",Eh="Create users and teams",Om="getting.started.",Rm=`${Om}${Im.replace(" ","-").trim().toLowerCase()}`,Am=`${Om}${Eh.replace(" ","-").trim().toLowerCase()}`,bh=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:Im,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(Hs.Z.get(Rm)),key:Rm,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(s=>{s((0,rc.ak)().getMetricSources().filter(D=>D.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,hs.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:Am,check:()=>Promise.resolve(Hs.Z.get(Am)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const s=await(0,hs.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(s.length>0)},done:!1}]}];class xh extends o.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:bh()},this.onForwardClick=()=>{this.setState(D=>({currentStep:D.currentStep+1}))},this.onPreviousClick=()=>{this.setState(D=>({currentStep:D.currentStep-1}))},this.dismiss=()=>{const{id:D}=this.props,T=(0,ve.h4)().getCurrent(),B=T?.getPanelById(D);T?.removePanel(B),hs.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(W=>{sc.Vt.user.helpFlags1=W.helpFlags1})}}async componentDidMount(){const{steps:D}=this.state,T=D.map(async W=>{const G=W.cards.map(async q=>q.check().then(se=>({...q,done:se}))),Y=await Promise.all(G);return{...W,done:Y.every(q=>q.done),cards:Y}}),B=await Promise.all(T);this.setState({currentStep:B[0].done?1:0,steps:B,checksDone:!0})}render(){const{checksDone:D,currentStep:T,steps:B}=this.state,W=Sh(),G=B[T];return o.createElement("div",{className:W.container},D?o.createElement(o.Fragment,null,o.createElement(Z.zx,{variant:"secondary",fill:"text",className:W.dismiss,onClick:this.dismiss},"Remove this panel"),T===B.length-1&&o.createElement(Z.zx,{className:(0,F.cx)(W.backForwardButtons,W.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),o.createElement("div",{className:W.content},o.createElement(vh,{step:G})),T<B.length-1&&o.createElement(Z.zx,{className:(0,F.cx)(W.backForwardButtons,W.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):o.createElement("div",{className:W.loading},o.createElement("div",{className:W.loadingText},"Checking completed setup steps"),o.createElement(Dm.$,{size:24,inline:!0})))}}const Sh=(0,zr.B)(()=>{const s=V.config.theme2;return{container:(0,F.css)`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${s.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${s.spacing(4)} ${s.spacing(2)} 0;
    `,content:(0,F.css)`
      label: content;
      display: flex;
      justify-content: center;

      ${s.breakpoints.down("xxl")} {
        margin-left: ${s.spacing(3)};
        justify-content: flex-start;
      }
    `,header:(0,F.css)`
      label: header;
      margin-bottom: ${s.spacing(3)};
      display: flex;
      flex-direction: column;

      ${s.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:(0,F.css)`
      height: 58px;
      padding-right: ${s.spacing(2)};
      display: none;

      ${s.breakpoints.up("md")} {
        display: block;
      }
    `,heading:(0,F.css)`
      label: heading;
      margin-right: ${s.spacing(3)};
      margin-bottom: ${s.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${s.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:(0,F.css)`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:(0,F.css)`
      left: 10px;

      ${s.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:(0,F.css)`
      right: 10px;

      ${s.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:(0,F.css)`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${s.spacing(1)};
    `,loading:(0,F.css)`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:(0,F.css)`
      margin-right: ${s.spacing(1)};
    `}}),Ch=new w.c(xh).setNoPadding();var vr=e(80742),Lm=e(79469);const wd={bucketOffset:0},wm={fillOpacity:80,gradientMode:Lt.FI.None,lineWidth:1};function Bm(s,D){return Math.floor(s/D)*D}function Nm(s,D){return Math.ceil(s/D)*D}function Fm(s){return s.fields[1].values[0]-s.fields[0].values[0]}const Um=(s,D)=>{let{min:T,max:B}=s.fields[2].config,W=new Tl.U,G=Fm(s),Y=(Ae,He,tt,$e,mt,Wt)=>{let wt=Ae.axes[He]._space,Ot=Ae.valToPos(Ae.data[0][0]+G,"x")-Ae.valToPos(Ae.data[0][0],"x"),on=Bm(T??Ae.data[0][0],G),Vt=Nm(B??Ae.data[0][Ae.data[0].length-1]+G,G),sn=[],Cn=Math.ceil(wt/Ot);for(let Dn=0,En=on;En<=Vt;Dn++,En+=G)!(Dn%Cn)&&sn.push(En);return sn};W.addScale({scaleKey:"x",isTime:!1,distribution:Lt.wf.Linear,orientation:Lt.wN.Horizontal,direction:Lt.bQ.Right,range:(Ae,He,tt)=>{T!=null&&(He=T),B!=null&&(tt=B);let $e=Ae.data[0][0],mt=Ae.data[0][Ae.data[0].length-1];return tt===mt?tt+=G:tt=Nm(tt,G),He>$e&&(He=Bm(He,G)),[He,tt]}}),W.addScale({scaleKey:"y",isTime:!1,distribution:Lt.wf.Linear,orientation:Lt.wN.Vertical,direction:Lt.bQ.Up});const q=s.fields[0].display,se=Ae=>(0,Ts.zc)(q(Ae));W.addAxis({scaleKey:"x",isTime:!1,placement:Lt.LB.Bottom,incrs:vr.Zi,splits:Y,values:(Ae,He)=>{const tt=He.map(se),$e=tt.reduce((Ot,on)=>Math.max((0,wo.X1)(on,di.gD).width,Ot),0),mt=10,Wt=Ae.bbox.width/(($e+mt)*devicePixelRatio),wt=Math.ceil(tt.length/Wt);return tt.map((Ot,on)=>on%wt===0?Ot:null)},theme:D});let fe=s.fields[2].display;W.addAxis({scaleKey:"y",isTime:!1,placement:Lt.LB.Left,formatValue:(Ae,He)=>(0,Ts.zc)(fe(Ae,He)),theme:D}),W.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let Se=Ys.Z.paths.bars({align:1,size:[1,1/0]}),_e=0;for(let Ae=2;Ae<s.fields.length;Ae++){const He=s.fields[Ae];He.state=He.state??{},He.state.seriesIndex=_e++;const tt={...wm,...He.config.custom},$e="y",mt=(0,Bo.fD)(He),wt=(0,Bo.YO)(He,D).color;W.addSeries({scaleKey:$e,lineWidth:tt.lineWidth,lineColor:wt,fillOpacity:tt.fillOpacity,theme:D,colorMode:mt,pathBuilder:Se,show:!tt.hideFrom?.viz,gradientMode:tt.gradientMode,thresholds:He.config.thresholds,hardMin:He.config.min,hardMax:He.config.max,softMin:tt.axisSoftMin,softMax:tt.axisSoftMax,dataFrameFieldIndex:He.state.origin})}return W},Dh=s=>{let D=[];for(const T of s.fields)T.name!==vr.cO&&D.push(T.values);for(let T=1;T<D.length;T++){let B=D[T];for(let W=0;W<B.length;W++)B[W]===0&&(B[W]=null)}return D};class Ph extends o.Component{constructor(D){super(D),this.state=this.prepState(D)}prepState(D,T=!0){let B=null;const{alignedFrame:W}=D;return W&&(B={alignedData:Dh(W)},T&&(B.config=Um(W,this.props.theme))),B}renderLegend(D){const{legend:T}=this.props;return!D||T.showLegend===!1?null:o.createElement(Dl.l,{data:this.props.rawSeries,config:D,maxHeight:"35%",maxWidth:"60%",...T})}componentDidUpdate(D){const{structureRev:T,alignedFrame:B,bucketSize:W}=this.props;if(B!==D.alignedFrame){let G=this.prepState(this.props,!1);G&&(W!==D.bucketSize||this.props.options!==D.options||this.state.config===void 0||T!==D.structureRev||!T)&&(G.config=Um(B,this.props.theme)),G&&this.setState(G)}}render(){const{width:D,height:T,children:B,alignedFrame:W}=this.props,{config:G}=this.state;return G?o.createElement(jo.AY,{width:D,height:T,legend:this.renderLegend(G)},(Y,q)=>o.createElement(Lm.N,{config:this.state.config,data:this.state.alignedData,width:Y,height:q},B?B(G,W):null)):null}}const Mh=({data:s,options:D,width:T,height:B})=>{const W=(0,Q.l4)(),G=(0,o.useMemo)(()=>{if(!s.series.length)return;if(s.series.forEach((se,ce)=>{se.fields.forEach((fe,Se)=>{fe.state={...fe.state,origin:{frameIndex:ce,fieldIndex:Se}}})}),s.series.length===1){const se=(0,vr.qr)(s.series[0]);if(se)return(0,vr.zM)(se)}const q=(0,vr.gY)(s.series,D);if(q)return(0,vr.zM)(q,W)},[s.series,D,W]);if(!G||!G.fields.length)return o.createElement("div",{className:"panel-empty"},o.createElement("p",null,"No histogram found in response"));const Y=Fm(G);return o.createElement(Ph,{options:D,theme:W,legend:D.legend,rawSeries:s.series,structureRev:s.structureRev,width:T,height:B,alignedFrame:G,bucketSize:Y},(q,se)=>null)};function oc(s){if(s?.length!==1)return!1;const D=s[0];if(D.fields.length<3||!(0,vr.Ok)(D.fields[0].name)||!(0,vr.kl)(D.fields[1].name))return!1;for(const T of D.fields)if(T.type!==Yn.fS.number)return!1;return!0}const Th=new w.c(Mh).setPanelOptions(s=>{s.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(D,T)=>oc(T)}).addNumberInput({path:"bucketSize",name:vr.py.bucketSize.name,description:vr.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:wd.bucketSize,showIf:(D,T)=>!oc(T)}).addNumberInput({path:"bucketOffset",name:vr.py.bucketOffset.name,description:vr.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:wd.bucketOffset,showIf:(D,T)=>!oc(T)}).addBooleanSwitch({path:"combine",name:vr.py.combine.name,description:vr.py.combine.description,defaultValue:wd.combine,showIf:(D,T)=>!oc(T)}),Hr.J(s)}).useFieldConfig({standardOptions:{[Us.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:us.S.PaletteClassic}}},useCustomConfig:s=>{const D=wm;s.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:D.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:D.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:cr.q.fillGradient[0].value,settings:{options:cr.q.fillGradient}}),Ao.B(s)}});var Tr=e(48614),Bd=e(36495);const Wm=[{label:"Grafana",value:Tr.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:Tr.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:Tr.z.Plugin,description:"Plugins with live support"}];class Ih extends o.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=D=>{D.value&&this.props.onChange({scope:D.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=D=>{const T={scope:this.props.value?.scope,path:void 0};D.value&&(T.namespace=D.value),this.props.onChange(T)},this.onPathChanged=D=>{const{value:T,onChange:B}=this.props,W={scope:T.scope,namespace:T.namespace};D.value&&(W.path=D.value),B(W)}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(D){this.props.value!==D.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:D,paths:T}=this.state,{scope:B,namespace:W,path:G}=this.props.value,Y=Rh(tn.config.theme2);return o.createElement(o.Fragment,null,o.createElement(yt.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),o.createElement("div",null,o.createElement("div",{className:Y.dropWrap},o.createElement(Bd._,null,"Scope"),o.createElement(bt.Ph,{options:Wm,value:Wm.find(q=>q.value===B),onChange:this.onScopeChanged})),B&&o.createElement("div",{className:Y.dropWrap},o.createElement(Bd._,null,"Namespace"),o.createElement(bt.Ph,{options:D,value:D.find(q=>q.value===W)??(W?{label:W,value:W}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),B&&W&&o.createElement("div",{className:Y.dropWrap},o.createElement(Bd._,null,"Path"),o.createElement(bt.Ph,{options:T,value:Oh(T,G),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function Oh(s,D){const T=s.find(B=>B.value===D);if(T)return T;if(D)return{label:D,value:D}}const Rh=(0,zr.B)(s=>({dropWrap:(0,F.css)`
    margin-bottom: ${s.spacing(1)};
  `}));var _m=e(26058),$m=e(10694),Nd=e(16843),Ah=e(19649),Fd=e(84541),io=e(86981),Ud=e(60695);const Lh=s=>(!s.pluginVersion&&s.columns&&console.log("Was angular table",s),s.options),Vm={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},wh={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},Km={cell:"color-background",row:"color-background",value:"color-text"},km=(s,D)=>[-1/0,...s].map((T,B)=>({color:D[B],value:(0,ne.isNumber)(T)?T:parseInt(T,10)})),Bh=(s,D)=>{const T=s.transformations??[];if(Object.keys(Vm).includes(D.transform)){const B={reducers:[]};D.transform==="timeseries_aggregations"&&(B.includeTimeField=!1,B.reducers=D.columns.map(W=>wh[W.value])),T.push({id:Vm[D.transform],options:B})}return T},Nh=s=>{const T={matcher:{id:/^\/.*\/$/.test(s.pattern)?io.mi.byRegexp:io.mi.byName,options:s.pattern},properties:[]};return s.alias&&T.properties.push({id:"displayName",value:s.alias}),s.unit&&T.properties.push({id:"unit",value:s.unit}),s.decimals&&T.properties.push({id:"decimals",value:s.decimals}),s.type==="date"&&T.properties.push({id:"unit",value:`time: ${s.dateFormat}`}),s.link&&T.properties.push({id:"links",value:[{title:(0,ne.defaultTo)(s.linkTooltip,""),url:(0,ne.defaultTo)(s.linkUrl,""),targetBlank:(0,ne.defaultTo)(s.linkTargetBlank,!1)}]}),s.colorMode&&T.properties.push({id:"custom.cellOptions",value:{type:Km[s.colorMode]}}),s.align&&T.properties.push({id:"custom.align",value:s.align==="auto"?null:s.align}),s.thresholds?.length&&T.properties.push({id:"thresholds",value:{mode:Ud.H.Absolute,steps:km(s.thresholds,s.colors)}}),T},Fh=s=>{let D={custom:{}};if(s){if(D=(0,ne.omitBy)({unit:s.unit,decimals:s.decimals,displayName:s.alias,custom:{align:s.align==="auto"?null:s.align}},ne.isNil),s.thresholds.length){const T={mode:Ud.H.Absolute,steps:km(s.thresholds,s.colors)};D.thresholds=T}s.colorMode&&(D.custom.cellOptions={type:Km[s.colorMode]})}return D},Uh=(s,D,T)=>{if(D==="table-old"&&T.angular){const B=T.angular,W=Bh(s,B),G=B.styles.find(se=>se.pattern==="/.*/"),Y=Fh(G),q=B.styles.filter(se=>se.pattern!=="/.*/").map(Nh);s.transformations=W,s.fieldConfig={defaults:Y,overrides:q}}return{}},Wh=s=>s?.filter(D=>D.meta?.custom?.parentRowIndex===void 0)||[s?.[0]],_h=s=>{const D=[];return Wh(s).filter(B=>!!B&&B.length!==0)?.forEach(B=>{const W=s?.filter(se=>B.refId===se.refId&&se.meta?.custom?.parentRowIndex!==void 0),G=(0,ne.groupBy)(W,se=>se.meta?.custom?.parentRowIndex),Y=Object.keys(G).map(se=>G[se]),q={...B};W&&W.length>0&&q.fields.push({name:"nested",type:Yn.fS.nestedFrames,config:{},values:Y}),D.push(q)}),D},$h=s=>s?.some(D=>D.meta?.custom?.parentRowIndex!==void 0),qi="table_panel_usage",el={COLUMN_RESIZE:"column_resize",SORT_BY:"sort_by",TABLE_SELECTION_CHANGE:"table_selection_change",ERROR_VIEW:"error_view",CELL_TYPE_CHANGE:"cell_type_change"};function zm(s){const{data:D,height:T,width:B,options:W,fieldConfig:G,id:Y,timeRange:q}=s,se=(0,Q.l4)(),ce=(0,nr.R9)(),fe=$h(D.series)?_h(D.series):D.series,Se=fe?.length,_e=fe[0]?.fields.length,Ae=Vh(fe,W),He=fe[Ae];let tt=T;if(!Se||!_e)return(0,Ja.ff)(qi,{item:el.ERROR_VIEW}),o.createElement(no.Z,{panelId:Y,fieldConfig:G,data:D});if(Se>1){const Wt=se.spacing.gridSize*se.components.height.md,wt=se.spacing.gridSize;tt=T-Wt-wt}const $e=o.createElement(Sm.i,{height:tt,width:B,data:He,noHeader:!W.showHeader,showTypeIcons:W.showTypeIcons,resizable:!0,initialSortBy:W.sortBy,onSortByChange:Wt=>kh(Wt,s),onColumnResize:(Wt,wt)=>Kh(Wt,wt,s),onCellFilterAdded:ce.onAddAdHocFilter,footerOptions:W.footer,enablePagination:W.footer?.enablePagination,cellHeight:W.cellHeight,timeRange:q});if(Se===1)return $e;const mt=fe.map((Wt,wt)=>({label:(0,os.nf)(Wt),value:wt}));return o.createElement("div",{className:Hm.wrapper},$e,o.createElement("div",{className:Hm.selectWrapper},o.createElement(bt.Ph,{options:mt,value:mt[Ae],onChange:Wt=>zh(Wt,s)})))}function Vh(s,D){return D.frameIndex>0&&D.frameIndex<s.length?D.frameIndex:0}function Kh(s,D,T){const{fieldConfig:B}=T,{overrides:W}=B,G=io.mi.byName,Y="custom.width",q=W.find(se=>se.matcher.id===G&&se.matcher.options===s);if(q){const se=q.properties.find(ce=>ce.id===Y);se?se.value=D:q.properties.push({id:Y,value:D})}else W.push({matcher:{id:G,options:s},properties:[{id:Y,value:D}]});(0,Ja.ff)(qi,{item:el.COLUMN_RESIZE}),T.onFieldConfigChange({...B,overrides:W})}function kh(s,D){(0,Ja.ff)(qi,{item:el.SORT_BY}),D.onOptionsChange({...D.options,sortBy:s})}function zh(s,D){(0,Ja.ff)(qi,{item:el.TABLE_SELECTION_CHANGE}),D.onOptionsChange({...D.options,frameIndex:s.value||0})}const Hm={wrapper:(0,F.css)`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,selectWrapper:(0,F.css)`
    padding: 8px 8px 0px 8px;
  `};var lo=(s=>(s.Raw="raw",s.JSON="json",s.Auto="auto",s.None="none",s))(lo||{});class Hh extends o.PureComponent{constructor(D){super(D),this.styles=Gh(V.config.theme2),this.streamObserver={next:T=>{(0,Tr.se)(T)?this.setState({status:T,changed:Date.now()}):(0,Tr.RL)(T)?this.setState({message:T.message,changed:Date.now()}):console.log("ignore",T)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=T=>{const{options:B,onOptionsChange:W}=this.props;try{const G=JSON.parse(T);W({...B,json:G})}catch(G){console.log("Error reading JSON",G)}},this.onPublishClicked=async()=>{const{addr:T}=this.state;if(!T){console.log("invalid address");return}const B=this.props.options?.json;if(!B){console.log("nothing to publish");return}const W=await(0,Nd.gj)().publish(T,B);console.log("onPublishClicked (response from publish)",W)},this.isValid=!!(0,Nd.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(D){this.props.options?.channel!==D.options?.channel&&this.loadChannel()}async loadChannel(){const D=this.props.options?.channel;if(!(0,Tr.nU)(D)){console.log("INVALID",D),this.unsubscribe(),this.setState({addr:void 0});return}if((0,ne.isEqual)(D,this.state.addr)){console.log("Same channel",this.state.addr);return}const T=(0,Nd.gj)();if(!T){console.log("INVALID",D),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",D);try{this.subscription=T.getStream(D).subscribe(this.streamObserver),this.setState({addr:D,error:void 0})}catch(B){this.setState({addr:void 0,error:B})}}renderNotEnabled(){const D=`[feature_toggles]
    enable = live`;return o.createElement(yt.b,{title:"Grafana Live",severity:"info"},o.createElement("p",null,"Grafana live requires a feature flag to run"),o.createElement("b",null,"custom.ini:"),o.createElement("pre",null,D))}renderMessage(D){const{options:T}=this.props,{message:B}=this.state;if(!B)return o.createElement("div",null,o.createElement("h4",null,"Waiting for data:"),T.channel?.scope,"/",T.channel?.namespace,"/",T.channel?.path);if(T.message===lo.JSON)return o.createElement(Ah.g,{json:B,open:5});if(T.message===lo.Auto&&B instanceof _m.Av){const W={series:(0,Yr.SM)({data:[B],theme:V.config.theme2,replaceVariables:Y=>Y,fieldConfig:{defaults:{},overrides:[]}}),state:$m.Gu.Streaming},G={...this.props,options:{frameIndex:0,showHeader:!0}};return o.createElement(zm,{...G,data:W,height:D})}return o.createElement("pre",null,JSON.stringify(B))}renderPublish(D){const{options:T}=this.props;return o.createElement(o.Fragment,null,o.createElement(Fd.p,{height:D-32,language:"json",value:T.json?JSON.stringify(T.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),o.createElement("div",{style:{height:32}},o.createElement(Z.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:D}=this.state;if(D?.state===Tr.yS.Connected)return;let T="";return D&&(T=this.styles.status[D.state]),o.createElement("div",{className:(0,F.cx)(T,this.styles.statusWrap)},D?.state)}renderBody(){const{status:D}=this.state,{options:T,height:B}=this.props;if(T.publish){if(T.message===lo.None)return o.createElement("div",null,this.renderPublish(B));const W=B/2;return o.createElement("div",null,o.createElement("div",{style:{height:W,overflow:"hidden"}},o.createElement(_.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(W))),o.createElement("div",null,this.renderPublish(W)))}return T.message===lo.None?o.createElement("pre",null,JSON.stringify(D)):o.createElement("div",{style:{overflow:"hidden",height:B}},o.createElement(_.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(B)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:D,error:T}=this.state;return D?T?o.createElement("div",null,o.createElement("h2",null,"ERROR"),o.createElement("div",null,JSON.stringify(T))):o.createElement(o.Fragment,null,this.renderStatus(),this.renderBody()):o.createElement(yt.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const Gh=(0,zr.B)(s=>({statusWrap:(0,F.css)`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${s.components.panel.background};
    padding: 10px;
    z-index: ${s.zIndex.modal};
  `,status:{[Tr.yS.Pending]:(0,F.css)`
      border: 1px solid ${s.v1.palette.orange};
    `,[Tr.yS.Connected]:(0,F.css)`
      border: 1px solid ${s.colors.success.main};
    `,[Tr.yS.Connecting]:(0,F.css)`
      border: 1px solid ${s.v1.palette.brandWarning};
    `,[Tr.yS.Disconnected]:(0,F.css)`
      border: 1px solid ${s.colors.warning.main};
    `,[Tr.yS.Shutdown]:(0,F.css)`
      border: 1px solid ${s.colors.error.main};
    `,[Tr.yS.Invalid]:(0,F.css)`
      border: 1px solid red;
    `}})),jh=new w.c(Hh).setPanelOptions(s=>{s.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:Ih,defaultValue:{}}),s.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:lo.Raw,label:"Raw Text"},{value:lo.JSON,label:"JSON"},{value:lo.Auto,label:"Auto"},{value:lo.None,label:"None"}]},defaultValue:lo.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var Ir=e(69323),tl=e(42512),Wd=e(18330),Yh=e(91507),Qh=e(47864),Gm=e(51201);function Zh(s){const D=(0,Q.wW)(Xh),T=(0,nr.R9)(),B=new xs.mi(s.data),{dataSummary:W}=B,G=Jh(s,W),Y=(0,z.useDispatch)(),q=(0,ve.h4)().getCurrent()?.getPanelById(s.panelId),se=()=>{Hs.Z.setObject(zs.FL,Qh.Ok.Suggestions),Y((0,Yh.g_)(!0))},ce=()=>{q&&Y((0,Gm.Kc)({panel:q,pluginId:"table"}))},fe=Se=>{q&&(Y((0,Gm.Kc)({...Se,panel:q})),Se.transformations&&setTimeout(()=>{yl.E1.partial({tab:"transform"})},100))};return o.createElement("div",{className:D.wrapper},o.createElement("div",{className:D.message},G),T.app===Ci.zj.PanelEditor&&W.hasData&&q&&o.createElement("div",{className:D.actions},s.suggestions&&o.createElement(o.Fragment,null,s.suggestions.map(Se=>o.createElement(Wd.x,{key:Se.name,icon:"process",onClick:()=>fe(Se)},Se.name))),o.createElement(Wd.x,{icon:"table",onClick:ce},"Switch to table"),o.createElement(Wd.x,{icon:"chart-line",onClick:se},"Open visualization suggestions")))}function Jh({data:s,fieldConfig:D,message:T,needsNumberField:B,needsTimeField:W,needsStringField:G},Y){return T||(!s.series||s.series.length===0||s.series.every(q=>q.length===0)?D?.defaults.noValue??"No data":G&&!Y.hasStringField?"Data is missing a string field":B&&!Y.hasNumberField?"Data is missing a number field":W&&!Y.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const Xh=s=>({wrapper:(0,F.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,F.css)({textAlign:"center",color:s.colors.text.secondary,fontSize:s.typography.size.lg,width:"100%"}),actions:(0,F.css)({marginTop:s.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:s.spacing(1),rowGap:s.spacing(1),width:"100%",maxWidth:"600px"})}),qh=["level","lvl","filename"],jm=({labels:s})=>{const D=(0,Q.wW)(e0),T=Object.keys(s).filter(B=>!B.startsWith("_")&&!qh.includes(B));return T.length===0?o.createElement("span",{className:(0,F.cx)([D.logsLabels])},o.createElement("span",{className:(0,F.cx)([D.logsLabel])},"(no unique labels)")):o.createElement("span",{className:(0,F.cx)([D.logsLabels])},T.sort().map(B=>{const W=s[B];if(!W)return;const G=`${B}: ${W}`;return o.createElement("span",{key:B,className:(0,F.cx)([D.logsLabel])},o.createElement("span",{className:(0,F.cx)([D.logsLabelValue]),title:G},W))}))},e0=s=>({logsLabels:(0,F.css)`
      display: flex;
      flex-wrap: wrap;
      font-size: ${s.typography.size.xs};
    `,logsLabel:(0,F.css)`
      label: logs-label;
      display: flex;
      padding: ${s.spacing(0,.25)};
      background-color: ${s.colors.background.secondary};
      border-radius: ${s.shape.radius.default};
      margin: ${s.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:(0,F.css)`
      label: logs-label__value;
      display: inline-block;
      max-width: ${s.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `});var Mi=e(16360);class t0{constructor(){this.seen=new Set,this.count=0}getKey(D){this.count+=1;const T=`k_${D}`;return this.seen.has(T)?`i_${this.count}`:(this.seen.add(T),T)}}var Wo=e(20810),Ym=e(36210),n0=e(39960);const a0=s=>({logsStatsRow:(0,F.css)`
    label: logs-stats-row;
    margin: ${parseInt(s.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:(0,F.css)`
    label: logs-stats-row--active;
    color: ${s.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:(0,F.css)`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:(0,F.css)`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:(0,F.css)`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${s.spacing(.75)};
  `,logsStatsRowPercent:(0,F.css)`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${s.spacing(.75)};
    width: ${s.spacing(4.5)};
  `,logsStatsRowBar:(0,F.css)`
    label: logs-stats-row__bar;
    height: ${s.spacing(.5)};
    overflow: hidden;
    background: ${s.colors.text.disabled};
  `,logsStatsRowInnerBar:(0,F.css)`
    label: logs-stats-row__innerbar;
    height: ${s.spacing(.5)};
    overflow: hidden;
    background: ${s.colors.primary.main};
  `}),ic=({active:s,count:D,proportion:T,value:B})=>{const W=(0,Q.wW)(a0),G=`${Math.round(T*100)}%`,Y={width:G},q=s?(0,F.cx)([W.logsStatsRow,W.logsStatsRowActive]):(0,F.cx)([W.logsStatsRow]);return o.createElement("div",{className:q},o.createElement("div",{className:(0,F.cx)([W.logsStatsRowLabel])},o.createElement("div",{className:(0,F.cx)([W.logsStatsRowValue]),title:B},B),o.createElement("div",{className:(0,F.cx)([W.logsStatsRowCount])},D),o.createElement("div",{className:(0,F.cx)([W.logsStatsRowPercent])},G)),o.createElement("div",{className:(0,F.cx)([W.logsStatsRowBar])},o.createElement("div",{className:(0,F.cx)([W.logsStatsRowInnerBar]),style:Y})))};ic.displayName="LogLabelStatsRow";const Qm=5,s0=(0,zr.B)(s=>({logsStats:(0,F.css)`
      label: logs-stats;
      background: inherit;
      color: ${s.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:(0,F.css)`
      label: logs-stats__header;
      border-bottom: 1px solid ${s.colors.border.medium};
      display: flex;
    `,logsStatsTitle:(0,F.css)`
      label: logs-stats__title;
      font-weight: ${s.typography.fontWeightMedium};
      padding-right: ${s.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:(0,F.css)`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:(0,F.css)`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class r0 extends o.PureComponent{render(){const{label:D,rowCount:T,stats:B,value:W,theme:G,isLabel:Y}=this.props,q=s0(G),se=B.slice(0,Qm);let ce=se.find($e=>$e.value===W),fe=B.slice(Qm);const Se=!ce;Se&&(ce=fe.find($e=>$e.value===W),fe=fe.filter($e=>$e.value!==W));const _e=fe.reduce(($e,mt)=>$e+mt.count,0),He=se.reduce(($e,mt)=>$e+mt.count,0)+_e,tt=_e/He;return o.createElement("div",{className:q.logsStats,"data-testid":"logLabelStats"},o.createElement("div",{className:q.logsStatsHeader},o.createElement("div",{className:q.logsStatsTitle},D,": ",He," of ",T," rows have that ",Y?"label":"field")),o.createElement("div",{className:q.logsStatsBody},se.map($e=>o.createElement(ic,{key:$e.value,...$e,active:$e.value===W})),Se&&ce&&o.createElement(ic,{key:ce.value,...ce,active:!0}),_e>0&&o.createElement(ic,{key:"__OTHERS__",count:_e,value:"Other",proportion:tt})))}}const Zm=(0,Q.HE)(r0);Zm.displayName="LogLabelStats";const Jm=(s,D)=>{let T=s.isLight?s.v1.palette.gray5:s.v1.palette.gray2;switch(D){case Ir.in.crit:case Ir.in.critical:T="#705da0";break;case Ir.in.error:case Ir.in.err:T="#e24d42";break;case Ir.in.warning:case Ir.in.warn:T=s.colors.warning.main;break;case Ir.in.info:T="#7eb26d";break;case Ir.in.debug:T="#1f78c1";break;case Ir.in.trace:T="#6ed0e0";break}return{logsRowLevelColor:(0,F.css)`
      &::after {
        background-color: ${T};
      }
    `}},Xm=(0,Mi.Z)(s=>{const D=Zo.hoverColor(s.colors.background.secondary,s),T=(0,qa.Z)(s.components.dashboard.background).setAlpha(.7).toRgbString(),B=V.config.featureToggles.exploreScrollableLogsContainer;return{logsRowLevel:(0,F.css)`
      label: logs-row__level;
      max-width: ${s.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${s.spacing(.5)};
      }
    `,logsRowMatchHighLight:(0,F.css)`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${s.components.textHighlight.text}
      background-color: ${s.components.textHighlight};
    `,logsRowsTable:(0,F.css)`
      label: logs-rows;
      font-family: ${s.typography.fontFamilyMonospace};
      font-size: ${s.typography.bodySmall.fontSize};
      width: 100%;
      ${!B&&`margin-bottom: ${s.spacing(2.25)};`}
    `,logsRowsTableContain:(0,F.css)`
      contain: strict;
    `,highlightBackground:(0,F.css)`
      background-color: ${(0,qa.Z)(s.colors.info.transparent).setAlpha(.25).toString()};
    `,logsRow:(0,F.css)`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          z-index: 1;
        }

        background: ${D};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${s.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:(0,F.css)`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logIconError:(0,F.css)`
      color: ${s.colors.warning.main};
    `,logsRowToggleDetails:(0,F.css)`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:(0,F.css)`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:(0,F.css)`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:(0,F.css)`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,copyLogButton:(0,F.css)`
      padding: 0 0 0 ${s.spacing(.5)};
      height: ${s.spacing(3)};
      width: ${s.spacing(3.25)};
      line-height: ${s.spacing(2.5)};
      overflow: hidden;
      &:hover {
          background-color: ${ho.alpha(s.colors.text.primary,.12)};
        }
      }
    `,logDetailsContainer:(0,F.css)`
      label: logs-row-details-table;
      border: 1px solid ${s.colors.border.medium};
      padding: 0 ${s.spacing(1)} ${s.spacing(1)};
      border-radius: ${s.shape.radius.default};
      margin: ${s.spacing(2.5)} ${s.spacing(1)} ${s.spacing(2.5)} ${s.spacing(2)};
      cursor: default;
    `,logDetailsTable:(0,F.css)`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:(0,F.css)`
      label: logs-row-details__icon;
      position: relative;
      color: ${s.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${s.spacing(.75)};
    `,logDetailsLabel:(0,F.css)`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${s.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:(0,F.css)`
      label: logs-row-details__heading;
      font-weight: ${s.typography.fontWeightBold};
      padding: ${s.spacing(1)} 0 ${s.spacing(.5)};
    `,logDetailsValue:(0,F.css)`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${D};
      }
    `,topVerticalAlign:(0,F.css)`
      label: topVerticalAlign;
      margin-top: -${s.spacing(.9)};
      margin-left: -${s.spacing(.25)};
    `,detailsOpen:(0,F.css)`
      &:hover {
        background-color: ${Zo.hoverColor(s.colors.background.primary,s)};
      }
    `,errorLogRow:(0,F.css)`
      label: erroredLogRow;
      color: ${s.colors.text.secondary};
    `,positionRelative:(0,F.css)`
      label: positionRelative;
      position: relative;
    `,rowWithContext:(0,F.css)`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${T};
      display: inherit;
    `,horizontalScroll:(0,F.css)`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:(0,F.css)`
      display: block;
      margin-left: 0px;
    `,rowMenu:(0,F.css)`
      label: rowMenu;
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      background: ${s.colors.background.primary};
      box-shadow: ${s.shadows.z3};
      padding: ${s.spacing(.5,1,.5,1)};
      z-index: 100;
      gap: ${s.spacing(.5)};

      & > button {
        margin: 0;
      }
    `,logRowMenuCell:(0,F.css)`
      position: sticky;
      z-index: ${s.zIndex.dropdown};
      margin-top: -${s.spacing(.125)};
      right: 0px;

      & > span {
        transform: translateX(-100%);
      }
    `,logLine:(0,F.css)`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${s.typography.fontFamilyMonospace};
      font-size: ${s.typography.bodySmall.fontSize};
      letter-spacing: ${s.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `,logsRowLevelDetails:(0,F.css)`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:(0,F.css)`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${s.colors.background.primary};
      }
    `,visibleRowMenu:(0,F.css)`
      label: visibleRowMenu;
      aspect-ratio: 1/1;
      z-index: 90;
    `,linkButton:(0,F.css)`
      label: linkButton;
      > button {
        padding-top: ${s.spacing(.5)};
      }
    `,hidden:(0,F.css)`
      label: hidden;
      visibility: hidden;
    `,unPinButton:(0,F.css)`
      height: ${s.spacing(3)};
      line-height: ${s.spacing(2.5)};
    `}}),qm=(0,Mi.Z)(s=>({wordBreakAll:(0,F.css)`
      label: wordBreakAll;
      word-break: break-all;
    `,copyButton:(0,F.css)`
      & > button {
        color: ${s.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: ${s.shape.radius.circle};
        height: ${s.spacing(s.components.height.sm)};
        width: ${s.spacing(s.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${s.colors.success.main};
          }
        }
      }
    `,adjoiningLinkButton:(0,F.css)`
      margin-left: ${s.spacing(1)};
    `,wrapLine:(0,F.css)`
      label: wrapLine;
      white-space: pre-wrap;
    `,logDetailsStats:(0,F.css)`
      padding: 0 ${s.spacing(1)};
    `,logDetailsValue:(0,F.css)`
      display: flex;
      align-items: center;
      line-height: 22px;

      .log-details-value-copy {
        visibility: hidden;
      }
      &:hover {
        .log-details-value-copy {
          visibility: visible;
        }
      }
    `,buttonRow:(0,F.css)`
      display: flex;
      flex-direction: row;
      gap: ${s.spacing(.5)};
      margin-left: ${s.spacing(.5)};
    `}));class o0 extends o.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:D,parsedKeys:T,row:B}=this.props;D&&D(T[0]),(0,Ja.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:B.datasourceType,logRowUid:B.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:D,parsedKeys:T,row:B}=this.props;D&&D(T[0]),(0,Ja.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:B.datasourceType,logRowUid:B.uid,type:"disable"})},this.isFilterLabelActive=async()=>{const{isFilterLabelActive:D,parsedKeys:T,parsedValues:B,row:W}=this.props;return D?await D(T[0],B[0],W.dataFrame?.refId):!1},this.filterLabel=()=>{const{onClickFilterLabel:D,parsedKeys:T,parsedValues:B,row:W}=this.props;D&&D(T[0],B[0],W.dataFrame?.refId),(0,Ja.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:W.datasourceType,filterType:"include",logRowUid:W.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:D,parsedKeys:T,parsedValues:B,row:W}=this.props;D&&D(T[0],B[0],W.dataFrame?.refId),(0,Ja.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:W.datasourceType,filterType:"exclude",logRowUid:W.uid})},this.updateStats=()=>{const{getStats:D}=this.props,T=D(),B=T?T.reduce((W,G)=>W+G.count,0):0;(!(0,ne.isEqual)(this.state.fieldStats,T)||B!==this.state.fieldCount)&&this.setState({fieldStats:T,fieldCount:B})},this.showStats=()=>{const{isLabel:D,row:T,app:B}=this.props,{showFieldsStats:W}=this.state;W||this.updateStats(),this.toggleFieldsStats(),(0,Ja.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:T.datasourceType,fieldType:D?"label":"detectedField",type:W?"close":"open",logRowUid:T.uid,app:B})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(D=>({showFieldsStats:!D.showFieldsStats}))}generateClipboardButton(D){const{theme:T}=this.props,B=qm(T);return o.createElement("div",{className:`log-details-value-copy ${B.copyButton}`},o.createElement(Ym.m,{getText:()=>D,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"}))}generateMultiVal(D,T){return o.createElement("table",null,o.createElement("tbody",null,D?.map((B,W)=>o.createElement("tr",{key:`${B}-${W}`},o.createElement("td",null,B,T&&B!==""&&this.generateClipboardButton(B))))))}render(){const{theme:D,parsedKeys:T,parsedValues:B,isLabel:W,links:G,displayedFields:Y,wrapLogMessage:q,onClickFilterLabel:se,onClickFilterOutLabel:ce,disableActions:fe,row:Se}=this.props,{showFieldsStats:_e,fieldStats:Ae,fieldCount:He}=this.state,tt=qm(D),$e=Xm(D),mt=T==null?!1:T.length===1,Wt=B==null?!1:B.length===1,wt=!fe&&se&&ce,Ot=V.config.featureToggles.toggleLabelsInLogsUI&&Se.dataFrame?.refId?` in query ${Se.dataFrame?.refId}`:"",on=!Wt&&B!=null&&!B.every(sn=>sn===""),Vt=Y&&T!=null&&Y.includes(T[0])?o.createElement(ls.h,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):o.createElement(ls.h,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return o.createElement(o.Fragment,null,o.createElement("tr",{className:$e.logDetailsValue},o.createElement("td",{className:$e.logsDetailsIcon},o.createElement("div",{className:tt.buttonRow},wt&&o.createElement(o.Fragment,null,V.config.featureToggles.toggleLabelsInLogsUI?o.createElement(i0,{name:"search-plus",onClick:this.filterLabel,isActive:this.isFilterLabelActive,tooltipSuffix:Ot}):o.createElement(ls.h,{name:"search-plus",onClick:this.filterLabel,tooltip:"Filter for value"}),o.createElement(ls.h,{name:"search-minus",tooltip:`Filter out value${Ot}`,onClick:this.filterOutLabel})),!fe&&Y&&Vt,!fe&&o.createElement(ls.h,{variant:_e?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!mt,onClick:this.showStats}))),o.createElement("td",{className:$e.logDetailsLabel},mt?T[0]:this.generateMultiVal(T)),o.createElement("td",{className:(0,F.cx)(tt.wordBreakAll,q&&tt.wrapLine)},o.createElement("div",{className:tt.logDetailsValue},Wt?B[0]:this.generateMultiVal(B,!0),Wt&&this.generateClipboardButton(B[0]),o.createElement("div",{className:(0,F.cx)((Wt||on)&&tt.adjoiningLinkButton)},G?.map((sn,Cn)=>o.createElement("span",{key:`${sn.title}-${Cn}`},o.createElement(n0.k,{link:sn}))))))),_e&&mt&&Wt&&o.createElement("tr",null,o.createElement("td",null,o.createElement(ls.h,{variant:_e?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})),o.createElement("td",{colSpan:2},o.createElement("div",{className:tt.logDetailsStats},o.createElement(Zm,{stats:Ae,label:T[0],value:B[0],rowCount:He,isLabel:W})))))}}const i0=({isActive:s,tooltipSuffix:D,...T})=>{const[B,W]=(0,o.useState)(!1),G=B?"Remove filter":"Filter for value";return s().then(W),o.createElement(ls.h,{...T,variant:B?"primary":void 0,tooltip:G+D})},nl=(0,Q.HE)(o0);nl.displayName="LogDetailsRow";var _d=e(19087);class l0 extends o.PureComponent{render(){const{app:D,row:T,theme:B,hasError:W,onClickFilterOutLabel:G,onClickFilterLabel:Y,getRows:q,showDuplicates:se,className:ce,onClickShowField:fe,onClickHideField:Se,displayedFields:_e,getFieldLinks:Ae,wrapLogMessage:He,styles:tt}=this.props,$e=Jm(B,T.logLevel),mt=T.labels?T.labels:{},Wt=Object.keys(mt).length>0,wt=(0,_d.YD)(T,Ae);let Ot=wt.filter(bn=>bn.links?.length);const on=Ot.filter(bn=>bn.fieldIndex!==T.entryFieldIndex).sort(),Vt=Ot.filter(bn=>bn.fieldIndex===T.entryFieldIndex).sort(),sn=(0,_d.DC)(Vt),Cn=wt.filter(bn=>bn.links?.length===0&&bn.fieldIndex!==T.entryFieldIndex).sort(),Dn=Cn&&Cn.length>0,En=on&&on.length>0||sn&&sn.length>0,kn=W?"":`${$e.logsRowLevelColor} ${tt.logsRowLevel} ${tt.logsRowLevelDetails}`;return o.createElement("tr",{className:(0,F.cx)(ce,tt.logDetails)},se&&o.createElement("td",null),o.createElement("td",{className:kn,"aria-label":"Log level"}),o.createElement("td",{colSpan:4},o.createElement("div",{className:tt.logDetailsContainer},o.createElement("table",{className:tt.logDetailsTable},o.createElement("tbody",null,(Wt||Dn)&&o.createElement("tr",null,o.createElement("td",{colSpan:100,className:tt.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(mt).sort().map((bn,ra)=>{const Rn=mt[bn];return o.createElement(nl,{key:`${bn}=${Rn}-${ra}`,parsedKeys:[bn],parsedValues:[Rn],isLabel:!0,getStats:()=>(0,Wo.lL)(q(),bn),onClickFilterOutLabel:G,onClickFilterLabel:Y,onClickShowField:fe,onClickHideField:Se,row:T,app:D,wrapLogMessage:He,displayedFields:_e,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),Cn.map((bn,ra)=>{const{keys:Rn,values:Sn,fieldIndex:Jn}=bn;return o.createElement(nl,{key:`${Rn[0]}=${Sn[0]}-${ra}`,parsedKeys:Rn,parsedValues:Sn,onClickShowField:fe,onClickHideField:Se,onClickFilterOutLabel:G,onClickFilterLabel:Y,getStats:()=>(0,Wo.i6)(T.dataFrame.fields[Jn].values),displayedFields:_e,wrapLogMessage:He,row:T,app:D,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),En&&o.createElement("tr",null,o.createElement("td",{colSpan:100,className:tt.logDetailsHeading,"aria-label":"Data Links"},"Links")),on.map((bn,ra)=>{const{keys:Rn,values:Sn,links:Jn,fieldIndex:Kn}=bn;return o.createElement(nl,{key:`${Rn[0]}=${Sn[0]}-${ra}`,parsedKeys:Rn,parsedValues:Sn,links:Jn,onClickShowField:fe,onClickHideField:Se,getStats:()=>(0,Wo.i6)(T.dataFrame.fields[Kn].values),displayedFields:_e,wrapLogMessage:He,row:T,app:D,disableActions:!1})}),sn?.map((bn,ra)=>{const{keys:Rn,values:Sn,links:Jn,fieldIndex:Kn}=bn;return o.createElement(nl,{key:`${Rn[0]}=${Sn[0]}-${ra}`,parsedKeys:Rn,parsedValues:Sn,links:Jn,onClickShowField:fe,onClickHideField:Se,getStats:()=>(0,Wo.i6)(T.dataFrame.fields[Kn].values),displayedFields:_e,wrapLogMessage:He,row:T,app:D,disableActions:!0})}),!Dn&&!Wt&&!En&&o.createElement("tr",null,o.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const ef=(0,Q.HE)(l0);ef.displayName="LogDetails";var c0=e(90135),tf=e.n(c0),nf=e(68495),d0=e(48996);function u0(s,D){return D.split(/;\s*/).reduce((T,B)=>{if(B==="color:rgba(0,0,0,0.5)")return{color:s.colors.text.secondary};const W=B.match(/([^:\s]+)\s*:\s*(.+)/);if(W&&W[1]&&W[2]){const G=W[1].replace(/-([a-z])/g,(Y,q)=>q.toUpperCase());T[G]=W[2]}return T},{})}class m0 extends o.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(D,T){return D.value===T.prevValue?null:{chunks:d0.ZP.parse(D.value).spans.map(W=>W.css?{style:u0(D.theme,W.css),text:W.text}:{text:W.text}),prevValue:D.value}}render(){const{chunks:D}=this.state;return D.map((T,B)=>{const W=this.props.highlight?.searchWords?o.createElement(tf(),{key:B,textToHighlight:T.text,searchWords:this.props.highlight.searchWords,findChunks:nf.Xt,highlightClassName:this.props.highlight.highlightClassName}):T.text;return T.style?o.createElement("span",{key:B,style:T.style,"data-testid":"ansiLogLine"},W):W})}}const af=(0,Q.HE)(m0);af.displayName="LogMessageAnsi";const $d=o.memo(({logText:s,onOpenContext:D,onPermalinkClick:T,onPinLine:B,onUnpinLine:W,pinned:G,row:Y,showContextToggle:q,styles:se,mouseIsOver:ce,onBlur:fe})=>{const Se=q?q(Y):!1,_e=(0,o.useCallback)($e=>{$e.stopPropagation()},[]),Ae=(0,o.useCallback)($e=>{$e.stopPropagation(),D(Y)},[D,Y]),He=(0,o.useCallback)($e=>{!$e.currentTarget.contains($e.relatedTarget)&&fe&&fe()},[fe]),tt=(0,o.useCallback)(()=>s,[s]);return o.createElement("span",{className:`log-row-menu ${se.rowMenu}`,onClick:_e,onBlur:He},G&&!ce&&o.createElement(ls.h,{className:se.unPinButton,size:"md",name:"gf-pin",onClick:()=>W&&W(Y),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),ce&&o.createElement(o.Fragment,null,Se&&o.createElement(ls.h,{size:"md",name:"gf-show-context",onClick:Ae,tooltip:"Show context",tooltipPlacement:"top","aria-label":"Show context",tabIndex:0}),o.createElement(Ym.m,{className:se.copyLogButton,icon:"copy",variant:"secondary",fill:"text",size:"md",getText:tt,tooltip:"Copy to clipboard",tooltipPlacement:"top",tabIndex:0}),G&&W&&o.createElement(ls.h,{className:se.unPinButton,size:"md",name:"gf-pin",onClick:()=>W&&W(Y),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),!G&&B&&o.createElement(ls.h,{className:se.unPinButton,size:"md",name:"gf-pin",onClick:()=>B&&B(Y),tooltip:"Pin line",tooltipPlacement:"top","aria-label":"Pin line",tabIndex:0}),T&&Y.rowId!==void 0&&Y.uid&&o.createElement(ls.h,{tooltip:"Copy shortlink","aria-label":"Copy shortlink",tooltipPlacement:"top",size:"md",name:"share-alt",onClick:()=>T(Y),tabIndex:0})))});$d.displayName="LogRowMenuCell";const f0=1e5,g0=({hasAnsi:s,entry:D,highlights:T,styles:B})=>{const W=T&&T.length>0&&T[0]&&T[0].length>0&&D.length<f0,G=T??[];if(s){const Y=W?{searchWords:G,highlightClassName:B.logsRowMatchHighLight}:void 0;return o.createElement(af,{value:D,highlight:Y})}else if(W)return o.createElement(tf(),{textToHighlight:D,searchWords:G,findChunks:nf.Xt,highlightClassName:B.logsRowMatchHighLight});return o.createElement(o.Fragment,null,D)},p0=(s,D)=>{if(D)try{return JSON.stringify(JSON.parse(s),void 0,2)}catch{return s}return s},sf=o.memo(s=>{const{row:D,wrapLogMessage:T,prettifyLogMessage:B,showContextToggle:W,styles:G,onOpenContext:Y,onPermalinkClick:q,onUnpinLine:se,onPinLine:ce,pinned:fe,mouseIsOver:Se,onBlur:_e}=s,{hasAnsi:Ae,raw:He}=D,tt=(0,o.useMemo)(()=>p0(He,B),[He,B]),$e=(0,o.useMemo)(()=>Se||fe,[Se,fe]);return o.createElement(o.Fragment,null,o.createElement("td",{className:G.logsRowMessage},o.createElement("div",{className:T?G.positionRelative:G.horizontalScroll},o.createElement("button",{className:`${G.logLine} ${G.positionRelative}`},o.createElement(g0,{hasAnsi:Ae,entry:tt,highlights:D.searchWords,styles:G})))),o.createElement("td",{className:`log-row-menu-cell ${G.logRowMenuCell}`},$e&&o.createElement($d,{logText:tt,row:D,showContextToggle:W,onOpenContext:Y,onPermalinkClick:q,onPinLine:ce,onUnpinLine:se,pinned:fe,styles:G,mouseIsOver:Se,onBlur:_e})))});sf.displayName="LogRowMessage";const rf=o.memo(s=>{const{row:D,detectedFields:T,getFieldLinks:B,wrapLogMessage:W,styles:G,mouseIsOver:Y,pinned:q,...se}=s,ce=(0,_d.YD)(D,B),fe=W?"":h0.noWrap,Se=(0,o.useMemo)(()=>T.map(Ae=>{const He=ce.find(tt=>{const{keys:$e}=tt;return $e[0]===Ae});return He!=null?`${Ae}=${He.values}`:D.labels[Ae]!==void 0&&D.labels[Ae]!==null?`${Ae}=${D.labels[Ae]}`:null}).filter(Ae=>Ae!==null).join(" "),[T,ce,D.labels]),_e=(0,o.useMemo)(()=>Y||q,[Y,q]);return o.createElement(o.Fragment,null,o.createElement("td",{className:G.logsRowMessage},o.createElement("div",{className:fe},Se)),o.createElement("td",{className:`log-row-menu-cell ${G.logRowMenuCell}`},_e&&o.createElement($d,{logText:Se,row:D,styles:G,pinned:q,mouseIsOver:Y,...se})))}),h0={noWrap:(0,F.css)`
    white-space: nowrap;
  `};rf.displayName="LogRowMessageDisplayedFields";class v0 extends o.PureComponent{constructor(D){super(D),this.state={permalinked:!1,showingContext:!1,showDetails:!1,mouseIsOver:!1},this.debouncedContextClose=(0,ne.debounce)(()=>{this.setState({showingContext:!1})},3e3),this.onOpenContext=T=>{this.setState({showingContext:!0}),this.props.onOpenContext(T,this.debouncedContextClose)},this.toggleDetails=()=>{this.props.enableLogDetails&&((0,Ja.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(T=>({showDetails:!T.showDetails})))},this.onMouseEnter=()=>{this.setState({mouseIsOver:!0}),this.props.onLogRowHover&&this.props.onLogRowHover(this.props.row)},this.onMouseLeave=()=>{this.setState({mouseIsOver:!1}),this.props.onLogRowHover&&this.props.onLogRowHover(void 0)},this.scrollToLogRow=(T,B=!1)=>{const{row:W,permalinkedRowId:G,scrollIntoView:Y,containerRendered:q}=this.props;if(G!==W.uid){(T.permalinked||B)&&this.setState({permalinked:!1});return}!this.state.permalinked&&q&&this.logLineRef.current&&Y&&(Y(this.logLineRef.current),(0,Ja.ff)("grafana_explore_logs_permalink_opened",{datasourceType:W.datasourceType??"unknown",logRowUid:W.uid}),this.setState({permalinked:!0}))},this.logLineRef=o.createRef()}renderTimeStamp(D){return(0,xi.dq)(D,{timeZone:this.props.timeZone,defaultWithMS:!0})}componentDidMount(){this.scrollToLogRow(this.state,!0)}componentDidUpdate(D,T){this.scrollToLogRow(T)}render(){const{getRows:D,onClickFilterLabel:T,onClickFilterOutLabel:B,onClickShowField:W,onClickHideField:G,enableLogDetails:Y,row:q,showDuplicates:se,showContextToggle:ce,showLabels:fe,showTime:Se,displayedFields:_e,wrapLogMessage:Ae,prettifyLogMessage:He,theme:tt,getFieldLinks:$e,forceEscape:mt,app:Wt,styles:wt}=this.props,{showDetails:Ot,showingContext:on,permalinked:Vt}=this.state,sn=Jm(tt,q.logLevel),{errorMessage:Cn,hasError:Dn}=(0,Wo.Mi)(q),En=(0,F.cx)(wt.logsRow,{[wt.errorLogRow]:Dn,[wt.highlightBackground]:on||Vt}),kn=(0,F.cx)(wt.logsRow,{[wt.errorLogRow]:Dn,[wt.highlightBackground]:Vt&&!this.state.showDetails}),bn=q.hasUnescapedContent&&mt?{...q,entry:(0,Wo.l3)(q.entry),raw:(0,Wo.l3)(q.raw)}:q;return o.createElement(o.Fragment,null,o.createElement("tr",{ref:this.logLineRef,className:En,onClick:this.toggleDetails,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:this.onMouseEnter},se&&o.createElement("td",{className:wt.logsRowDuplicates},bn.duplicates&&bn.duplicates>0?`${bn.duplicates+1}x`:null),o.createElement("td",{className:Dn?"":`${sn.logsRowLevelColor} ${wt.logsRowLevel}`},Dn&&o.createElement(Qa.u,{content:`Error: ${Cn}`,placement:"right",theme:"error"},o.createElement(Re.J,{className:wt.logIconError,name:"exclamation-triangle",size:"xs"}))),Y&&o.createElement("td",{title:Ot?"Hide log details":"See log details",className:wt.logsRowToggleDetails},o.createElement(Re.J,{className:wt.topVerticalAlign,name:Ot?"angle-down":"angle-right"})),Se&&o.createElement("td",{className:wt.logsRowLocalTime},this.renderTimeStamp(q.timeEpochMs)),fe&&bn.uniqueLabels&&o.createElement("td",{className:wt.logsRowLabels},o.createElement(jm,{labels:bn.uniqueLabels})),_e&&_e.length>0?o.createElement(rf,{row:bn,showContextToggle:ce,detectedFields:_e,getFieldLinks:$e,wrapLogMessage:Ae,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,styles:wt,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave}):o.createElement(sf,{row:bn,showContextToggle:ce,wrapLogMessage:Ae,prettifyLogMessage:He,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,app:Wt,styles:wt,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave})),this.state.showDetails&&o.createElement(ef,{className:kn,showDuplicates:se,getFieldLinks:$e,onClickFilterLabel:T,onClickFilterOutLabel:B,onClickShowField:W,onClickHideField:G,getRows:D,row:bn,wrapLogMessage:Ae,hasError:Dn,displayedFields:_e,app:Wt,styles:wt,isFilterLabelActive:this.props.isFilterLabelActive}))}}const Vd=(0,Q.HE)(v0);Vd.displayName="LogRow";const y0=100;class lf extends o.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1},this.openContext=(D,T)=>{this.props.onOpenContext&&this.props.onOpenContext(D,T)},this.makeGetRows=(0,Mi.Z)(D=>()=>D),this.sortLogs=(0,Mi.Z)((D,T)=>(0,Wo.$u)(D,T))}componentDidMount(){const{logRows:D,previewLimit:T}=this.props,W=(D?D.length:0)<=T*2;W?this.setState({renderAll:W}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{deduplicatedRows:D,logRows:T,dedupStrategy:B,theme:W,logsSortOrder:G,previewLimit:Y,...q}=this.props,{renderAll:se}=this.state,ce=Xm(W),fe=D||T,Se=T&&T.length>0,_e=fe?fe.reduce((Ot,on)=>on.duplicates?Ot+on.duplicates:Ot,0):0,Ae=B!==Lt.Y4.none&&_e>0,He=fe||[],tt=G?this.sortLogs(He,G):He,$e=tt.slice(0,Y),mt=tt.slice(Y,tt.length),Wt=this.makeGetRows(tt),wt=new t0;return o.createElement("table",{className:(0,F.cx)(ce.logsRowsTable,this.props.overflowingContent?"":ce.logsRowsTableContain)},o.createElement("tbody",null,Se&&$e.map(Ot=>o.createElement(Vd,{key:wt.getKey(Ot.uid),getRows:Wt,row:Ot,showDuplicates:Ae,logsSortOrder:G,onOpenContext:this.openContext,styles:ce,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===Ot.uid,isFilterLabelActive:this.props.isFilterLabelActive,...q})),Se&&se&&mt.map(Ot=>o.createElement(Vd,{key:wt.getKey(Ot.uid),getRows:Wt,row:Ot,showDuplicates:Ae,logsSortOrder:G,onOpenContext:this.openContext,styles:ce,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===Ot.uid,isFilterLabelActive:this.props.isFilterLabelActive,...q})),Se&&!se&&o.createElement("tr",null,o.createElement("td",{colSpan:5},"Rendering ",tt.length-Y," rows..."))))}}lf.defaultProps={previewLimit:y0};const cf=(0,Q.HE)(lf);cf.displayName="LogsRows";var Kd=e(41891);const E0=({data:s,timeZone:D,fieldConfig:T,options:{showLabels:B,showTime:W,wrapLogMessage:G,showCommonLabels:Y,prettifyLogMessage:q,sortOrder:se,dedupStrategy:ce,enableLogDetails:fe},title:Se,id:_e})=>{const Ae=se===Lt.UV.Ascending,He=(0,Q.wW)(b0),[tt,$e]=(0,o.useState)(0),mt=(0,o.useRef)(null),{eventBus:Wt}=(0,nr.R9)(),wt=(0,o.useCallback)(Dn=>{Dn?Wt.publish(new Cr.es({point:{time:Dn.timeEpochMs}})):Wt.publish(new Cr.xH)},[Wt]),[Ot,on,Vt]=(0,o.useMemo)(()=>{const Dn=s?(0,Kd.aB)(s.series,s.request?.intervalMs,void 0,s.request?.targets):null,En=Dn?.rows||[],kn=Dn?.meta?.find(ra=>ra.label===Kd.Qp),bn=(0,Kd.UW)(En,ce);return[En,bn,kn]},[s,ce]);(0,o.useLayoutEffect)(()=>{Ae&&mt.current?$e(mt.current.offsetHeight):$e(0)},[Ae,Ot]);const sn=(0,o.useCallback)((Dn,En)=>(0,tl.a_)({field:Dn,rowIndex:En,range:s.timeRange}),[s]);if(!s||Ot.length===0)return o.createElement(Zh,{fieldConfig:T,panelId:_e,data:s,needsStringField:!0});const Cn=()=>o.createElement("div",{className:(0,F.cx)(He.labelContainer,Ae&&He.labelContainerAscending)},o.createElement("span",{className:He.label},"Common labels:"),o.createElement(jm,{labels:Vt?Vt.value:{labels:"(no common labels)"}}));return o.createElement(_.$,{autoHide:!0,scrollTop:tt},o.createElement("div",{className:He.container,ref:mt},Y&&!Ae&&Cn(),o.createElement(cf,{logRows:Ot,deduplicatedRows:on,dedupStrategy:ce,showLabels:B,showTime:W,wrapLogMessage:G,prettifyLogMessage:q,timeZone:D,getFieldLinks:sn,logsSortOrder:se,enableLogDetails:fe,previewLimit:Ae?Ot.length:void 0,onLogRowHover:wt,app:Ci.zj.Dashboard}),Y&&Ae&&Cn()))},b0=s=>({container:(0,F.css)({marginBottom:s.spacing(1.5)}),labelContainer:(0,F.css)({margin:s.spacing(0,0,.5,.5),display:"flex",alignItems:"center"}),labelContainerAscending:(0,F.css)({margin:s.spacing(.5,0,.5,0)}),label:(0,F.css)({marginRight:s.spacing(.5),fontSize:s.typography.bodySmall.fontSize,fontWeight:s.typography.fontWeightMedium})});class x0{getSuggestionsForData(D){const T=D.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:B}=D;!B.hasData||!B.hasTimeField||!B.hasStringField||(B.preferredVisualisationType==="logs"?T.append({name:Ga.y.Logs,score:xs._.Best}):T.append({name:Ga.y.Logs}))}}const S0=new w.c(E0).setPanelOptions(s=>{s.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:Lt.Y4.none,label:"None",description:Ir.Uv[Lt.Y4.none]},{value:Lt.Y4.exact,label:"Exact",description:Ir.Uv[Lt.Y4.exact]},{value:Lt.Y4.numbers,label:"Numbers",description:Ir.Uv[Lt.Y4.numbers]},{value:Lt.Y4.signature,label:"Signature",description:Ir.Uv[Lt.Y4.signature]}]},defaultValue:Lt.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:Lt.UV.Descending,label:"Newest first"},{value:Lt.UV.Ascending,label:"Oldest first"}]},defaultValue:Lt.UV.Descending})}).setSuggestionsSupplier(new x0);function C0({width:s,showImage:D,data:T,index:B}){const W=(0,Q.wW)(D0),G=s>600,Y=T.get(B);return o.createElement("article",{className:(0,F.cx)(W.item,G&&W.itemWide)},D&&Y.ogImage&&o.createElement("a",{tabIndex:-1,href:_a.QX.sanitizeUrl(Y.link),target:"_blank",rel:"noopener noreferrer",className:(0,F.cx)(W.socialImage,G&&W.socialImageWide),"aria-hidden":!0},o.createElement("img",{src:Y.ogImage,alt:Y.title})),o.createElement("div",{className:W.body},o.createElement("time",{className:W.date,dateTime:(0,xi.dq)(Y.date,{format:"MMM DD"})},(0,xi.dq)(Y.date,{format:"MMM DD"})," "),o.createElement("a",{className:W.link,href:_a.QX.sanitizeUrl(Y.link),target:"_blank",rel:"noopener noreferrer"},o.createElement("h3",{className:W.title},Y.title)),o.createElement("div",{className:W.content,dangerouslySetInnerHTML:{__html:_a.QX.sanitize(Y.content)}})))}const D0=s=>({container:(0,F.css)`
    height: 100%;
  `,item:(0,F.css)`
    display: flex;
    padding: ${s.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${s.spacing(1)};
    border-bottom: 2px solid ${s.colors.border.weak};
    background: ${s.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:(0,F.css)`
    flex-direction: row;
  `,body:(0,F.css)`
    display: flex;
    flex-direction: column;
  `,socialImage:(0,F.css)`
    display: flex;
    align-items: center;
    margin-bottom: ${s.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${s.shape.radius.default} ${s.shape.radius.default} 0 0;
    }
  `,socialImageWide:(0,F.css)`
    margin-right: ${s.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${s.shape.radius.default};
    }
  `,link:(0,F.css)`
    color: ${s.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${s.colors.text.link};
      text-decoration: underline;
    }
  `,title:(0,F.css)`
    font-size: 16px;
    margin-bottom: ${s.spacing(.5)};
  `,content:(0,F.css)`
    p {
      margin-bottom: 4px;
      color: ${s.colors.text};
    }
  `,date:(0,F.css)`
    margin-bottom: ${s.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 ${s.shape.radius.default};
    color: ${s.colors.text.secondary};
  `}),df="https://grafana.com/blog/news.xml";var P0=e(65489);function M0(s){const T=new DOMParser().parseFromString(s,"text/xml");return{items:Array.from(T.querySelectorAll("entry")).map(W=>({title:ni(W,"title"),link:W.querySelector("link")?.getAttribute("href")??"",content:ni(W,"content"),pubDate:ni(W,"published"),ogImage:W.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function T0(s){const T=new DOMParser().parseFromString(s,"text/xml");return{items:Array.from(T.querySelectorAll("item")).map(W=>({title:ni(W,"title"),link:ni(W,"link"),content:ni(W,"description"),pubDate:ni(W,"pubDate"),ogImage:W.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function I0(s){return await(await fetch(s)).text()}function O0(s){return new DOMParser().parseFromString(s,"text/xml").querySelector("feed")!==null}function ni(s,D){return s.querySelector(D)?.textContent??""}async function R0(s){const D=await I0(s);return O0(D)?M0(D):T0(D)}function A0(s){const D=[],T=[],B=[],W=[],G=[];for(const Y of s.items){const q=(0,Tt.CQ)(Y.pubDate);try{if(D.push(q.valueOf()),T.push(Y.title),B.push(Y.link),G.push(Y.ogImage),Y.content){const se=Y.content.replace(/<\/?[^>]+(>|$)/g,"");W.push(se)}}catch(se){console.warn("Error reading news item:",se,Y)}}return{fields:[{name:"date",type:Yn.fS.time,config:{displayName:"Date"},values:D},{name:"title",type:Yn.fS.string,config:{},values:T},{name:"link",type:Yn.fS.string,config:{},values:B},{name:"content",type:Yn.fS.string,config:{},values:W},{name:"ogImage",type:Yn.fS.string,config:{},values:G}],length:D.length}}function L0(s){const[D,T]=(0,P0.Z)(async()=>{const B=await R0(s),W=A0(B);return new bi.U(W)},[s],{loading:!0});return{state:D,getNews:T}}function w0(s){const{width:D,options:{feedUrl:T=df,showImage:B}}=s,{state:W,getNews:G}=L0(T);return(0,o.useEffect)(()=>{const Y=s.eventBus.subscribe(Mt.U5,G);return()=>{Y.unsubscribe()}},[G,s.eventBus]),(0,o.useEffect)(()=>{G()},[G]),W.error?o.createElement(yt.b,{title:"Error loading RSS feed"},"Make sure that the feed URL is correct and that CORS is configured correctly on the server. See"," ",o.createElement("a",{style:{textDecoration:"underline"},href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/news/"},"News panel documentation. ",o.createElement(Re.J,{name:"external-link-alt"}))):W.loading?o.createElement("div",null,"Loading..."):W.value?o.createElement(_.$,{autoHeightMin:"100%",autoHeightMax:"100%"},W.value.map((Y,q)=>o.createElement(C0,{key:q,index:q,width:D,showImage:B,data:W.value}))):null}const uf={showImage:!0},B0=new w.c(w0).setPanelOptions(s=>{s.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:df},defaultValue:uf.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:uf.showImage})});var N0=e(77814),Co=e.n(N0),F0=e(15262),al=e(85136),Zr=e(30697);const U0=(0,o.memo)(function(D){const{edge:T,onClick:B,onMouseEnter:W,onMouseLeave:G,hovering:Y}=D,{source:q,target:se,sourceNodeRadius:ce,targetNodeRadius:fe}=T,Se=(0,Zr.dM)({x1:q.x,y1:q.y,x2:se.x,y2:se.y},ce||al.U,fe||al.U);return o.createElement("g",{onClick:_e=>B(_e,T),style:{cursor:"pointer"},"aria-label":`Edge from: ${q.id} to: ${se.id}`},o.createElement("line",{strokeWidth:Y?2:1,stroke:"#999",x1:Se.x1,y1:Se.y1,x2:Se.x2,y2:Se.y2,markerEnd:"url(#triangle)"}),o.createElement("line",{stroke:"transparent",x1:Se.x1,y1:Se.y1,x2:Se.x2,y2:Se.y2,strokeWidth:20,onMouseEnter:()=>{W(T.id)},onMouseLeave:()=>{G(T.id)}}))});function W0(){return o.createElement("defs",null,o.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto"},o.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})))}const _0=s=>({mainGroup:(0,F.css)`
      pointer-events: none;
      font-size: 8px;
    `,background:(0,F.css)`
      fill: ${s.components.tooltip.background};
    `,text:(0,F.css)`
      fill: ${s.components.tooltip.text};
    `}),$0=(0,o.memo)(function(D){const{edge:T}=D,{source:B,target:W,sourceNodeRadius:G,targetNodeRadius:Y}=T,q=(0,Zr.dM)({x1:B.x,y1:B.y,x2:W.x,y2:W.y},G||al.U,Y||al.U),se={x:q.x1+(q.x2-q.x1)/2,y:q.y1+(q.y2-q.y1)/2},ce=(0,Q.wW)(_0),fe=[T.mainStat,T.secondaryStat].filter(tt=>tt),Se=fe.length>1?"30":"15",_e=fe.length>1?15:7.5;let Ae=fe.length>1?-5:2.5;const He=[];return fe.forEach((tt,$e)=>{He.push(o.createElement("text",{key:$e,className:ce.text,x:se.x,y:se.y+Ae,textAnchor:"middle"},tt)),Ae+=15}),o.createElement("g",{className:ce.mainGroup},o.createElement("rect",{className:ce.background,x:se.x-40,y:se.y-_e,width:"80",height:Se,rx:"5"}),He)});var V0=e(98095);function K0(){return{item:(0,F.css)`
      label: LegendItem;
      flex-grow: 0;
    `,legend:(0,F.css)`
      label: Legend;
      pointer-events: all;
    `}}const k0=function(D){const{nodes:T,onSort:B,sort:W,sortable:G}=D,Y=(0,Q.l4)(),q=(0,Q.wW)(K0),se=z0(T,Y),ce=(0,o.useCallback)(fe=>{B({field:fe.data.field,ascending:fe.data.field===W?.field?!W?.ascending:!1})},[W,B]);return o.createElement(Bi.l,{className:q.legend,displayMode:Lt.jK.List,placement:"bottom",items:se,itemRenderer:fe=>o.createElement(o.Fragment,null,o.createElement(V0.e,{item:fe,className:q.item,onLabelClick:G?ce:void 0}),G&&(W?.field===fe.data.field?o.createElement(Re.J,{name:W.ascending?"arrow-up":"arrow-down"}):""))})};function z0(s,D){if(!s.length)return[];const T=[s[0].mainStat,s[0].secondaryStat].filter(ne.identity),B=s.find(W=>W.arcSections.length>0);return B&&B.arcSections[0].config?.color?.mode===us.S.Fixed&&T.push(...new Set(s.map(W=>W.arcSections).flat())),s[0].color&&T.push(s[0].color),T.map(W=>{const G={label:W.config.displayName||W.name,yAxis:0,data:{field:W}};return W.config.color?.mode===us.S.Fixed&&W.config.color?.fixedColor?G.color=D.visualization.getColorByName(W.config.color?.fixedColor||""):W.config.color?.mode&&(G.gradient=W.config.color?.mode),G.color||G.gradient||(G.color=D.visualization.getColorByName("")),G})}const H0=40,G0=s=>({mainGroup:(0,F.css)`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:(0,F.css)`
    fill: ${s.components.panel.background};
    stroke: ${s.colors.border.strong};
  `,text:(0,F.css)`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),j0=(0,o.memo)(function(D){const{marker:T,onClick:B}=D,{node:W}=T,G=(0,Q.wW)(G0);return W.x!==void 0&&W.y!==void 0?o.createElement("g",{"data-node-id":W.id,className:G.mainGroup,onClick:Y=>{B?.(Y,T)},"aria-label":`Hidden nodes marker: ${W.id}`},o.createElement("circle",{className:G.mainCircle,r:H0,cx:W.x,cy:W.y}),o.createElement("g",null,o.createElement("foreignObject",{x:W.x-25,y:W.y-25,width:"50",height:"50"},o.createElement("div",{className:G.text},o.createElement("span",null,T.count>100?">100":T.count," nodes"))))):null});function Y0(){return{wrapper:(0,F.css)`
      label: wrapper;
      pointer-events: all;
    `}}function Q0(s){const{config:D,onConfigChange:T,onPlus:B,onMinus:W,disableZoomOut:G,disableZoomIn:Y}=s,[q,se]=(0,o.useState)(!1),ce=!1,fe=(0,Q.wW)(Y0);return o.createElement("div",{className:fe.wrapper},o.createElement(dr.wc,{spacing:"sm"},o.createElement(dr.Lh,{spacing:"xs"},o.createElement(Z.zx,{icon:"plus-circle",onClick:B,size:"md",title:"Zoom in",variant:"secondary",disabled:Y}),o.createElement(Z.zx,{icon:"minus-circle",onClick:W,size:"md",title:"Zoom out",variant:"secondary",disabled:G})),o.createElement(dr.Lh,{spacing:"xs"},o.createElement(Z.zx,{icon:"code-branch",onClick:()=>T({...D,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!D.gridLayout}),o.createElement(Z.zx,{icon:"apps",onClick:()=>T({...D,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:D.gridLayout}))),ce&&o.createElement(Z.zx,{size:"xs",fill:"text",onClick:()=>se(Se=>!Se)},q?"Hide config":"Show config"),ce&&q&&Object.keys(D).filter(Se=>Se!=="show").map(Se=>o.createElement("div",{key:Se},Se,o.createElement("input",{style:{width:50},type:"number",value:D[Se],onChange:_e=>{T({...D,[Se]:parseFloat(_e.target.value)})}}))))}var Z0=e(17548),kd=e(50334);class J0 extends window.Worker{constructor(D,T){const B=D.toString(),W=B.split("/");W.pop();const G=`${W.join("/")}/`,Y=`importScripts('${B}');`,q=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${G}'; ${Y}`],{type:"application/javascript"}));super(q,T),URL.revokeObjectURL(q)}}const X0=()=>new J0(new URL(e.p+e.u(2509),e.b));function q0(s,D,T,B,W){const[G,Y]=(0,o.useMemo)(()=>{if(!(s.length&&D.length))return[{},{}];const q=D.reduce((ce,fe)=>(ce[fe.source.id]=[...ce[fe.source.id]??[],fe],ce[fe.target.id]=[...ce[fe.target.id]??[],fe],ce),{}),se=s.reduce((ce,fe)=>(ce[fe.id]=fe,ce),{});return[q,se]},[D,s]);return(0,o.useMemo)(()=>s.length<=T?{nodes:s,edges:D}:B.gridLayout?tv(s,T,W):ev(s,D,Y,G,T,W),[D,G,T,s,Y,W,B.gridLayout])}function ev(s,D,T,B,W,G){let Y;G?Y=[T[G]]:(Y=s.filter(_e=>_e.incoming===0),Y.length||(Y=[s[0]]));const{visibleNodes:q,markers:se}=nv(W,Y,T,B),ce=av(se,q,T,B),fe=(0,ne.fromPairs)(ce.map(_e=>[_e.node.id,_e]));for(const _e of ce)_e.count===1&&(delete fe[_e.node.id],q[_e.node.id]=_e.node);const Se=D.filter(_e=>(q[_e.source.id]||fe[_e.source.id])&&(q[_e.target.id]||fe[_e.target.id]));return{nodes:Object.values(q),edges:Se,markers:Object.values(fe)}}function tv(s,D,T){let B=0,W=D,G=[];if(T){const Y=s.findIndex(ce=>ce.id===T),q=Math.floor(D/2);let se=q;B=Y-q,B<0&&(se+=Math.abs(B),B=0),W=Y+se+1,W>s.length&&(B>0&&(B=Math.max(0,B-(W-s.length))),W=s.length),B>1&&G.push({node:s[B-1],count:B}),s.length-W>1&&G.push({node:s[W],count:s.length-W})}else s.length-D>1&&(G=[{node:s[D],count:s.length-D}]);return{nodes:s.slice(B,W),edges:[],markers:G}}function nv(s,D,T,B){const W={};let G=[...D];for(;Object.keys(W).length<s&&G.length>0;){let q=G.shift();if(W[q.id])continue;W[q.id]=q;const ce=(B[q.id]||[]).map(fe=>{const Se=fe.source.id===q.id?fe.target.id:fe.source.id;return T[Se]});G=G.concat(ce)}const Y=(0,ne.uniq)(G.filter(q=>!W[q.id]));return{visibleNodes:W,markers:Y}}function av(s,D,T,B){return s.map(W=>{const G={};let Y=0,q=[W];for(;q.length>0&&Y<=101;){let se=q.shift();if(D[se.id]||G[se.id])continue;G[se.id]||Y++,G[se.id]=se;const fe=(B[se.id]||[]).map(Se=>{const _e=Se.source.id===se.id?Se.target.id:Se.source.id;return T[_e]});q=q.concat(fe)}return{node:W,count:Y}})}const zd={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function sv(s,D,T=zd,B,W,G){const[Y,q]=(0,o.useState)([]),[se,ce]=(0,o.useState)([]),[fe,Se]=(0,o.useState)(!1),_e=(0,kd.default)(),Ae=(0,o.useRef)();(0,Z0.Z)(()=>{Ae.current&&Ae.current()}),(0,o.useEffect)(()=>{if(s.length===0){q([]),ce([]),Se(!1);return}Se(!0);const Ot=rv(s,D,({nodes:on,edges:Vt})=>{_e()&&(q(on),ce(Vt),Se(!1))});return Ae.current=Ot,Ot},[s,D,_e]);const[He,tt]=(0,o.useMemo)(()=>{if(s.length===0)return[[],[]];const Ot=s.map(Vt=>({...Vt})),on=D.map(Vt=>({...Vt}));return ov(Ot,W,T.sort),[Ot,on]},[T.sort,s,D,W]),{nodes:$e,edges:mt,markers:Wt}=q0(T.gridLayout?He:Y,T.gridLayout?tt:se,B,T,G),wt=(0,o.useMemo)(()=>(0,Zr.Tz)([...$e,...(Wt||[]).map(Ot=>Ot.node)]),[$e,Wt]);return{nodes:$e,edges:mt,markers:Wt,bounds:wt,hiddenNodesCount:s.length-$e.length,loading:fe}}function rv(s,D,T){const B=X0();return B.onmessage=W=>{for(let G=0;G<s.length;G++)W.data.nodes[G]={...s[G],...W.data.nodes[G]};T(W.data)},B.postMessage({nodes:s.map(W=>({id:W.id,incoming:W.incoming})),edges:D,config:zd}),()=>{B.terminate()}}function ov(s,D,T){const Y=Math.min(Math.floor((D-120)/140),s.length),q=Math.floor((Y-1)*120/2);T&&s.sort((se,ce)=>{const fe=T.field.values[se.dataFrameRowIndex],Se=T.field.values[ce.dataFrameRowIndex];return T.ascending?fe-Se:Se-fe});for(const[se,ce]of s.entries()){const fe=Math.floor(se/Y),Se=se%Y;ce.x=Se*120-q,ce.y=-60+fe*140}}function iv(s){return(0,o.useMemo)(()=>(0,Zr.E_)(s),[s])}function lv(s,D,T,B,W,G){const[Y,q]=(0,o.useState)(void 0),se=(0,o.useCallback)((fe,Se)=>{const[_e,Ae]=B.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],He=[{label:_e,onClick:mt=>{G(mt.id),W({...B,gridLayout:Ae}),q(void 0)}}],tt=D?s(D,Se.dataFrameRowIndex):[],$e=ff(tt,Se,He);q(mf(o.createElement(dv,{node:Se,nodes:D}),fe,q,$e))},[B,D,s,q,W,G]);return{onEdgeOpen:(0,o.useCallback)((fe,Se)=>{if(!T)return;const _e=s(T,Se.dataFrameRowIndex),Ae=ff(_e,Se);q(mf(o.createElement(uv,{edge:Se,edges:T}),fe,q,Ae))},[T,s,q]),onNodeOpen:se,MenuComponent:Y}}function mf(s,D,T,B){return o.createElement(Jo.x,{renderHeader:()=>s,renderMenuItems:B,onClose:()=>T(void 0),x:D.pageX,y:D.pageY})}function ff(s,D,T){if(!(s.length||T?.length))return;const B=cv(s);return()=>{let W=B?.map((G,Y)=>o.createElement(Ul.k,{key:`${G.label}${Y}`,label:G.label},(G.items||[]).map(gf(D))));return T&&(W=[...T.map(gf(D)),...W]),W}}function gf(s){return function(T){return o.createElement(Is.s,{key:T.label,url:T.url,label:T.label,ariaLabel:T.ariaLabel,onClick:T.onClick?B=>{B?.ctrlKey||B?.metaKey||B?.shiftKey||(B?.preventDefault(),B?.stopPropagation(),T.onClick?.(s))}:void 0,target:"_self"})}}function cv(s){const D="Open in Explore",T=s.reduce((B,W)=>{let G,Y;return W.title.indexOf("/")!==-1?(G=W.title.split("/")[0],Y=W.title.split("/")[1],B[G]=B[G]||[],B[G].push({l:W,newTitle:Y})):(B[D]=B[D]||[],B[D].push({l:W})),B},{});return Object.keys(T).map(B=>({label:B,ariaLabel:B,items:T[B].map(W=>({label:W.newTitle||W.l.title,ariaLabel:W.newTitle||W.l.title,url:W.l.href,onClick:W.l.onClick}))}))}function pf({field:s,index:D}){return o.createElement(lc,{label:s.config?.displayName||s.name,value:(0,Zr.Ew)(s.config,s.values[D]||"")})}function lc({label:s,value:D}){const T=(0,Q.wW)(mv);return o.createElement("tr",null,o.createElement("td",{className:T.label},s,": "),o.createElement("td",{className:T.value},D))}function dv({node:s,nodes:D}){const T=[];if(D){const B=(0,Zr.F)(D);for(const W of[B.title,B.subTitle,B.mainStat,B.secondaryStat,...B.details])W&&W.values[s.dataFrameRowIndex]&&T.push(o.createElement(pf,{key:W.name,field:W,index:s.dataFrameRowIndex}))}else s.title&&T.push(o.createElement(lc,{key:"title",label:"Title",value:s.title})),s.subTitle&&T.push(o.createElement(lc,{key:"subtitle",label:"Subtitle",value:s.subTitle}));return o.createElement("table",{style:{width:"100%"}},o.createElement("tbody",null,T))}function uv(s){const D=s.edge.dataFrameRowIndex,T=(0,Zr.lr)(s.edges),B=T.source?.values[D]||"",W=T.target?.values[D]||"",G=[];B&&W&&G.push(o.createElement(lc,{key:"header-row",label:"Source \u2192 Target",value:`${B} \u2192 ${W}`}));for(const Y of[T.mainStat,T.secondaryStat,...T.details])Y&&Y.values[D]&&G.push(o.createElement(pf,{key:`field-row-${D}`,field:Y,index:D}));return o.createElement("table",{style:{width:"100%"}},o.createElement("tbody",null,G))}const mv=s=>({label:(0,F.css)`
      label: Label;
      line-height: 1.25;
      color: ${s.colors.text.disabled};
      font-size: ${s.typography.size.sm};
      font-weight: ${s.typography.fontWeightMedium};
      padding-right: ${s.spacing(1)};
    `,value:(0,F.css)`
      label: Value;
      font-size: ${s.typography.size.sm};
      font-weight: ${s.typography.fontWeightMedium};
      color: ${s.colors.text.primary};
    `});function fv(s,D,T){const B=(0,Ad.Z)(s.gridLayout);let W;if(B===!0&&!s.gridLayout&&T){const G=D.find(Y=>Y.id===T);G&&(W={x:-G.x,y:-G.y})}return W}function gv(s){const[D,T]=(0,o.useState)(),B=(0,kd.default)();return(0,o.useEffect)(()=>{s&&(T(s),setTimeout(()=>{B()&&T(void 0)},500))},[s,B]),D}function pv({scale:s=1,bounds:D,focus:T}={}){const B=(0,kd.default)(),W=(0,o.useRef)(!1),G=(0,o.useRef)(0),Y=(0,o.useRef)(null),q={x:0,y:0},se=(0,o.useMemo)(()=>({right:D?-D.left:1/0,left:D?-D.right:-1/0,bottom:D?-D.top:-1/0,top:D?-D.bottom:1/0}),[D]),ce=(0,o.useRef)(q),fe=(0,o.useRef)(q),Se=(0,o.useRef)(q),[_e,Ae]=(0,o.useState)({isPanning:!1,position:q});(0,o.useEffect)(()=>{const $e=sn=>{!W.current&&B()&&(W.current=!0,ce.current=hf(sn),fe.current={...Se.current},Ae(Cn=>({...Cn,isPanning:!0})),wt())},mt=()=>{W.current&&B()&&(W.current=!1,Ae(sn=>({...sn,isPanning:!1})),Ot())},Wt=sn=>{$e(sn),on(sn)},wt=()=>{document.addEventListener("mousemove",on),document.addEventListener("mouseup",mt),document.addEventListener("touchmove",on),document.addEventListener("touchend",mt)},Ot=()=>{document.removeEventListener("mousemove",on),document.removeEventListener("mouseup",mt),document.removeEventListener("touchmove",on),document.removeEventListener("touchend",mt)},on=sn=>{cancelAnimationFrame(G.current);const Cn=hf(sn);G.current=requestAnimationFrame(()=>{if(B()&&Y.current){let Dn=Cn.x-ce.current.x,En=Cn.y-ce.current.y;Se.current={x:Ti(fe.current.x+Dn/s,se.left,se.right),y:Ti(fe.current.y+En/s,se.top,se.bottom)},Ae(kn=>({...kn,position:{...Se.current}}))}})},Vt=Y.current;return Vt&&(Vt.addEventListener("mousedown",Wt),Vt.addEventListener("touchstart",Wt)),()=>{Vt&&(Vt.removeEventListener("mousedown",Wt),Vt.removeEventListener("touchstart",Wt))}},[s,se,B]);const He=(0,Ad.Z)(T);(0,o.useEffect)(()=>{if(T&&He?.x!==T.x&&He?.y!==T.y){const $e={x:Ti(T.x,se.left,se.right),y:Ti(T.y,se.top,se.bottom)};Ae({position:$e,isPanning:!1}),Se.current=$e,fe.current=$e}},[T,He,se,Se,fe]);let tt=_e.position;return T&&He?.x!==T.x&&He?.y!==T.y&&(tt=T),{state:{..._e,position:{x:Ti(tt.x,se.left,se.right),y:Ti(tt.y,se.top,se.bottom)}},ref:Y}}function Ti(s,D,T){return Math.min(Math.max(s,D??-1/0),T??1/0)}function hf(s){return s instanceof TouchEvent?{x:s.changedTouches[0].clientX,y:s.changedTouches[0].clientY}:s instanceof MouseEvent?{x:s.clientX,y:s.clientY}:{x:0,y:0}}const hv={stepDown:s=>s/1.5,stepUp:s=>s*1.5,min:.13,max:2.25};function vv({stepUp:s,stepDown:D,min:T,max:B}=hv){const W=(0,o.useRef)(null),[G,Y]=(0,o.useState)(1),q=(0,o.useCallback)(()=>{G<(B??1/0)&&Y(s(G))},[G,s,B]),se=(0,o.useCallback)(()=>{G>(T??-1/0)&&Y(D(G))},[G,D,T]),ce=(0,o.useCallback)(function(fe){if(fe.ctrlKey||fe.metaKey){if(fe.preventDefault(),Y(Math.min(Math.max(T??-1/0,G+Math.min(fe.deltaY,2)*-.01),B??1/0)),fe.deltaY<0){const Se=G+Math.max(fe.deltaY,-4)*-.015;Y(Math.max(T??-1/0,Se))}else if(fe.deltaY>0){const Se=G+Math.min(fe.deltaY,4)*-.015;Y(Math.min(B??1/0,Se))}}},[T,B,G]);return(0,o.useEffect)(()=>{if(!W.current)return;const fe=W.current;return fe.addEventListener("wheel",ce,{passive:!1}),()=>{fe&&fe.removeEventListener("wheel",ce)}},[ce]),{onStepUp:q,onStepDown:se,scale:Math.max(Math.min(G,B??1/0),T??-1/0),isMax:G>=(B??1/0),isMin:G<=(T??-1/0),ref:W}}const yv=s=>({wrapper:(0,F.css)`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:(0,F.css)`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:(0,F.css)`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:(0,F.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${s.typography.h4.fontSize};
    color: ${s.colors.text.secondary};
  `,mainGroup:(0,F.css)`
    label: mainGroup;
    will-change: transform;
  `,viewControls:(0,F.css)`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:(0,F.css)`
    label: legend;
    background: ${s.colors.background.secondary};
    box-shadow: ${s.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:(0,F.css)`
    margin-left: auto;
  `,alert:(0,F.css)`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${s.shape.radius.default};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${s.colors.warning.main};
    color: ${s.colors.warning.contrastText};
  `,loadingWrapper:(0,F.css)`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),Ev=200;function bv({getLinks:s,dataFrames:D,nodeLimit:T}){const B=T||Ev,{edges:W,nodes:G}=iv(D),[Y,{width:q,height:se}]=(0,F0.Z)(),[ce,fe]=(0,o.useState)(zd),Se=G[0],_e=W[0],Ae=(0,o.useMemo)(()=>(0,Zr.HB)(Se,_e),[_e,Se]),{nodeHover:He,setNodeHover:tt,clearNodeHover:$e,edgeHover:mt,setEdgeHover:Wt,clearEdgeHover:wt}=Mv(),[Ot,on]=(0,o.useState)([]);(0,o.useEffect)(()=>{let _n=[];He?_n=(0,Zr.uX)(Ae.nodes,Ae.edges,He):mt&&(_n=(0,Zr.MP)(Ae.nodes,Ae.edges,mt)),on(_n)},[He,mt,Ae]);const[Vt,sn]=(0,o.useState)(),Cn=(0,o.useCallback)((_n,Xn)=>sn(Xn.node.id),[sn]),{nodes:Dn,edges:En,markers:kn,bounds:bn,hiddenNodesCount:ra,loading:Rn}=sv(Ae.nodes,Ae.edges,ce,B,q,Vt),Sn=fv(ce,Dn,Vt),{panRef:Jn,zoomRef:Kn,onStepUp:wa,onStepDown:Fa,isPanning:Oa,position:Aa,scale:Gn,isMaxZoom:wn,isMinZoom:ea}=Pv(bn,Sn),{onEdgeOpen:ua,onNodeOpen:Ma,MenuComponent:Ba}=lv(s,Se,_e,ce,fe,sn),ka=(0,Q.wW)(yv),Ua=(0,o.useCallback)(_n=>{Y(_n),Kn.current=_n},[Y,Kn]),Vn=gv(Vt);return o.createElement("div",{ref:Ua,className:ka.wrapper},Rn?o.createElement("div",{className:ka.loadingWrapper},"Computing layout\xA0",o.createElement(Dm.$,null)):null,D.length&&Ae.nodes.length?o.createElement("svg",{ref:Jn,viewBox:`${-(q/2)} ${-(se/2)} ${q} ${se}`,className:Co()(ka.svg,Oa&&ka.svgPanning)},o.createElement("g",{className:ka.mainGroup,style:{transform:`scale(${Gn}) translate(${Math.floor(Aa.x)}px, ${Math.floor(Aa.y)}px)`}},o.createElement(W0,null),!ce.gridLayout&&o.createElement(Cv,{edges:En,nodeHoveringId:He,edgeHoveringId:mt,onClick:ua,onMouseEnter:Wt,onMouseLeave:wt}),o.createElement(xv,{nodes:Dn,onMouseEnter:tt,onMouseLeave:$e,onClick:Ma,hoveringIds:Ot||[Vn]}),o.createElement(Sv,{markers:kn||[],onClick:Cn}),!ce.gridLayout&&o.createElement(Dv,{edges:En,nodeHoveringId:He,edgeHoveringId:mt}))):o.createElement("div",{className:ka.noDataMsg},"No data"),o.createElement("div",{className:ka.viewControls},Dn.length?o.createElement("div",{className:ka.legend},o.createElement(k0,{sortable:ce.gridLayout,nodes:Dn,sort:ce.sort,onSort:_n=>{fe({...ce,sort:_n})}})):null,o.createElement("div",{className:ka.viewControlsWrapper},o.createElement(Q0,{config:ce,onConfigChange:_n=>{_n.gridLayout!==ce.gridLayout&&sn(void 0),fe(_n)},onMinus:Fa,onPlus:wa,scale:Gn,disableZoomIn:wn,disableZoomOut:ea}))),ra>0&&o.createElement("div",{className:ka.alert,"aria-label":"Nodes hidden warning"},o.createElement(Re.J,{size:"sm",name:"info-circle"})," ",ra," nodes are hidden for performance reasons."),Ba)}const xv=(0,o.memo)(function(D){return o.createElement(o.Fragment,null,D.nodes.map(T=>o.createElement(al.N,{key:T.id,node:T,onMouseEnter:D.onMouseEnter,onMouseLeave:D.onMouseLeave,onClick:D.onClick,hovering:!D.hoveringIds||D.hoveringIds.length===0?"default":D.hoveringIds?.includes(T.id)?"active":"inactive"})))}),Sv=(0,o.memo)(function(D){return o.createElement(o.Fragment,null,D.markers.map(T=>o.createElement(j0,{key:"marker-"+T.node.id,marker:T,onClick:D.onClick})))}),Cv=(0,o.memo)(function(D){return o.createElement(o.Fragment,null,D.edges.map(T=>o.createElement(U0,{key:T.id,edge:T,hovering:T.source.id===D.nodeHoveringId||T.target.id===D.nodeHoveringId||D.edgeHoveringId===T.id,onClick:D.onClick,onMouseEnter:D.onMouseEnter,onMouseLeave:D.onMouseLeave})))}),Dv=(0,o.memo)(function(D){return o.createElement(o.Fragment,null,D.edges.map((T,B)=>{const W=T.source.id===D.nodeHoveringId||T.target.id===D.nodeHoveringId||D.edgeHoveringId===T.id,G=T.mainStat||T.secondaryStat;return W&&G&&o.createElement($0,{key:T.id,edge:T})}))});function Pv(s,D){const{scale:T,onStepDown:B,onStepUp:W,ref:G,isMax:Y,isMin:q}=vv(),{state:se,ref:ce}=pv({scale:T,bounds:s,focus:D}),{position:fe,isPanning:Se}=se;return{zoomRef:G,panRef:ce,position:fe,isPanning:Se,scale:T,onStepDown:B,onStepUp:W,isMaxZoom:Y,isMinZoom:q}}function Mv(){const[s,D]=(0,o.useState)(void 0),T=(0,o.useCallback)(()=>D(void 0),[D]),[B,W]=(0,o.useState)(void 0),G=(0,o.useCallback)(()=>W(void 0),[W]);return{nodeHover:s,setNodeHover:D,clearNodeHover:T,edgeHover:B,setEdgeHover:W,clearEdgeHover:G}}const Tv=({width:s,height:D,data:T,options:B})=>{const W=(0,tl.u8)(T.timeRange);if(!T||!T.series.length)return o.createElement("div",{className:"panel-empty"},o.createElement("p",null,"No data found in response"));const G=(0,Mi.Z)(Zr.Ee);return o.createElement("div",{style:{width:s,height:D}},o.createElement(bv,{dataFrames:G(T.series,B),getLinks:W}))};var Iv=e(69360),Hd=e(57669);const Ov=({value:s,onChange:D,context:T})=>{const B=(0,Q.wW)(Rv),W=()=>{const q={field:"",color:""};D(s?[...s,q]:[q])},G=q=>{const se=s?.slice();se.splice(q,1),D(se)},Y=(q,se,ce)=>{let fe=s?.slice()??[];fe[q][se]=ce,D(fe)};return o.createElement(o.Fragment,null,s?.map((q,se)=>o.createElement("div",{className:B.section,key:se},o.createElement(Hd.b,{context:T,value:q.field??"",onChange:ce=>{Y(se,"field",ce)},item:{settings:{filter:ce=>ce.name.includes("arc__")},id:`arc-field-${se}`,name:`arc-field-${se}`,editor:()=>null}}),o.createElement(Iv.zH,{color:q.color||"#808080",onChange:ce=>{Y(se,"color",ce)}}),o.createElement(Z.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>G(se),title:"Remove arc"}))),o.createElement(Z.zx,{size:"sm",icon:"plus",onClick:W,variant:"secondary"},"Add arc"))},Rv=()=>({section:(0,F.css)`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),Av=new w.c(Tv).setPanelOptions((s,D)=>{s.addNestedOptions({category:["Nodes"],path:"nodes",build:T=>{T.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),T.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),T.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:Ov})}}),s.addNestedOptions({category:["Edges"],path:"edges",build:T=>{T.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),T.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var Lv=e(52366),wv=e(75881),Bv=e(97852),Nv=e(41792),Fv=e(62884),Uv=e(39749),Wv=e(44911),_v=e(88155),$v=e(22785),Gd=e(55987);let Vv=0;const Kv=()=>Vv++;function kv(s){const D=(0,o.useRef)(null);return D.current===null&&(D.current=s+Kv()),D.current.toString()}var Do=(s=>(s.Donut="donut",s.Pie="pie",s))(Do||{}),Wr=(s=>(s.Name="name",s.Percent="percent",s.Value="value",s))(Wr||{}),_o=(s=>(s.Percent="percent",s.Value="value",s))(_o||{});const kx={values:[]},zx={displayLabels:[]};function vf(s){return!s.field.custom?.hideFrom?.viz&&!isNaN(s.display.numeric)}function yf(s,D){return D.display.numeric+s}const zv=({fieldDisplayValues:s,pieType:D,width:T,height:B,highlightedTitle:W,displayLabels:G=[],tooltipOptions:Y})=>{const q=(0,Q.l4)(),se=kv("PieChart"),ce=(0,Q.wW)(jd),fe=(0,Wv.Z)(),{containerRef:Se,TooltipInPortal:_e}=(0,_v.Z)({detectBounds:!0,scroll:!0}),Ae=s.filter(vf),He=Vt=>Vt.display.numeric,tt=Vt=>`${se}-${(0,qa.Z)(Vt).toHex()}`,$e=Vt=>`url(#${tt(Vt)})`,mt=G.length>0,Wt=Y.mode!=="none"&&fe.tooltipOpen,wt=Ae.reduce(yf,0),Ot=Zv(T,B,D),on=[...new Set(Ae.map(Vt=>Vt.display.color??us.R))];return o.createElement("div",{className:ce.container},o.createElement("svg",{width:Ot.size,height:Ot.size,ref:Se,style:{overflow:"visible"}},o.createElement(Fv.Z,{top:Ot.position,left:Ot.position},on.map(Vt=>o.createElement(Nv.Z,{key:Vt,id:tt(Vt),from:Yv(Vt,q),to:Qv(Vt,q),fromOffset:Ot.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:Ot.outerRadius})),o.createElement(Uv.Z,{data:Ae,pieValue:He,outerRadius:Ot.outerRadius,innerRadius:Ot.innerRadius,cornerRadius:3,padAngle:.005},Vt=>o.createElement(o.Fragment,null,Vt.arcs.map(sn=>{const Cn=sn.data.display.color??us.R,Dn=bf(W,sn);return sn.data.hasLinks&&sn.data.getLinks?o.createElement($v.V,{key:sn.index,links:sn.data.getLinks},En=>o.createElement(Ef,{tooltip:fe,highlightState:Dn,arc:sn,pie:Vt,fill:$e(Cn),openMenu:En.openMenu,tooltipOptions:Y})):o.createElement(Ef,{key:sn.index,highlightState:Dn,tooltip:fe,arc:sn,pie:Vt,fill:$e(Cn),tooltipOptions:Y})}),mt&&Vt.arcs.map(sn=>{const Cn=bf(W,sn);return o.createElement(Hv,{arc:sn,key:sn.index,highlightState:Cn,outerRadius:Ot.outerRadius,innerRadius:Ot.innerRadius,displayLabels:G,total:wt,color:q.colors.text.primary})}))))),Wt?o.createElement(_e,{key:Math.random(),top:fe.tooltipTop,className:ce.tooltipPortal,left:fe.tooltipLeft,unstyled:!0,applyPositionStyle:!0},o.createElement(Gd.c,{series:fe.tooltipData})):null)};function Ef({arc:s,pie:D,highlightState:T,openMenu:B,fill:W,tooltip:G,tooltipOptions:Y}){const q=(0,Q.l4)(),se=(0,Q.wW)(jd),{eventBus:ce}=(0,nr.R9)(),fe=(0,o.useCallback)(Ae=>{ce?.publish({type:Cr.xH.type,payload:{raw:Ae,x:0,y:0,dataId:s.data.display.title}}),G.hideTooltip()},[ce,s,G]),Se=(0,o.useCallback)(Ae=>{ce?.publish({type:Cr.es.type,payload:{raw:Ae,x:0,y:0,dataId:s.data.display.title}});const He=Ae.currentTarget.ownerSVGElement;if(He){const tt=(0,Bv.Z)(He,Ae);G.showTooltip({tooltipLeft:tt.x,tooltipTop:tt.y,tooltipData:Gv(D,s,Y)})}},[ce,s,G,D,Y]),_e=xf(T,se);return o.createElement("g",{key:s.data.display.title,className:_e,onMouseMove:Y.mode!=="none"?Se:void 0,onMouseOut:fe,onClick:B,"aria-label":Bt.wl.components.Panels.Visualization.PieChart.svgSlice},o.createElement("path",{d:D.path({...s}),fill:W,stroke:q.colors.background.primary,strokeWidth:1}))}function Hv({arc:s,outerRadius:D,innerRadius:T,displayLabels:B,total:W,color:G,highlightState:Y}){const q=(0,Q.wW)(jd),se=T===0?D/6:T,[ce,fe]=jv(s,D,se);if(!(s.endAngle-s.startAngle>=.3))return null;let _e=B.includes(Wr.Name)?Math.min(Math.max(D/150*14,12),30):Math.min(Math.max(D/100*14,12),36);return o.createElement("g",{className:xf(Y,q)},o.createElement("text",{fill:G,x:ce,y:fe,dy:".33em",fontSize:_e,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},B.includes(Wr.Name)&&o.createElement("tspan",{x:ce,dy:"1.2em"},s.data.display.title),B.includes(Wr.Value)&&o.createElement("tspan",{x:ce,dy:"1.2em"},(0,Ts.zc)(s.data.display)),B.includes(Wr.Percent)&&o.createElement("tspan",{x:ce,dy:"1.2em"},(s.data.display.numeric/W*100).toFixed(s.data.field.decimals??0)+"%")))}function Gv(s,D,T){return T.mode==="multi"?s.arcs.filter(B=>{const W=B.data.field;return W&&!W.custom?.hideFrom?.tooltip&&!W.custom?.hideFrom?.viz}).map(B=>({color:B.data.display.color??us.R,label:B.data.display.title,value:(0,Ts.zc)(B.data.display),isActive:B.index===D.index})):[{color:D.data.display.color??us.R,label:D.data.display.title,value:(0,Ts.zc)(D.data.display)}]}function jv(s,D,T){const B=(D+T)/2,W=(+s.startAngle+ +s.endAngle)/2-Math.PI/2;return[Math.cos(W)*B,Math.sin(W)*B]}function Yv(s,D){return(0,qa.Z)(s).darken(20*(D.isDark?1:-.7)).spin(4).toRgbString()}function Qv(s,D){return(0,qa.Z)(s).darken(10*(D.isDark?1:-.7)).spin(-4).toRgbString()}function Zv(s,D,T,B=16){const W=Math.min(D,s),G=(W-B*2)/2,Y=T===Do.Pie?G:Math.max(G/3,20),q=G-Y,se=(W-B*2)/2,ce=1-(G-q)/G;return{position:se+B,size:W,outerRadius:G,innerRadius:q,gradientFromOffset:ce}}var Jv=(s=>(s[s.Highlighted=0]="Highlighted",s[s.Deemphasized=1]="Deemphasized",s[s.Normal=2]="Normal",s))(Jv||{});function bf(s,D){return s?s===D.data.display.title?0:1:2}function xf(s,D){switch(s){case 0:return D.svgArg.highlighted;case 1:return D.svgArg.deemphasized;case 2:default:return D.svgArg.normal}}const jd=s=>({container:(0,F.css)`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:(0,F.css)`
        transition: all 200ms ease-in-out;
      `,highlighted:(0,F.css)`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:(0,F.css)`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:(0,F.css)`
      ${(0,Zo.getTooltipContainerStyles)(s)}
    `}),Xv={displayMode:Lt.jK.List,showLegend:!0,placement:"right",calcs:[],values:[_o.Percent]};function qv(s){const{data:D,timeZone:T,fieldConfig:B,replaceVariables:W,width:G,height:Y,options:q,id:se}=s,ce=(0,Q.l4)(),fe=ny(),Se=(0,Lv.nG)({fieldConfig:B,reduceOptions:q.reduceOptions,data:D.series,theme:ce,replaceVariables:W,timeZone:T});return ty(Se)?o.createElement(jo.AY,{width:G,height:Y,legend:ey(s,Se)},(_e,Ae)=>o.createElement(zv,{width:_e,height:Ae,highlightedTitle:fe,fieldDisplayValues:Se,tooltipOptions:q.tooltip,pieType:q.pieType,displayLabels:q.displayLabels})):o.createElement(no.Z,{panelId:se,fieldConfig:B,data:D})}function ey(s,D){const T=s.options.legend??Xv;if(T.showLegend===!1)return;const B=D.filter(vf).reduce(yf,0),W=D.sort((G,Y)=>isNaN(G.display.numeric)?1:isNaN(Y.display.numeric)?-1:Y.display.numeric-G.display.numeric).map((G,Y)=>{const q=G.field.custom?.hideFrom??{};if(q.legend)return;const se=!!q.viz,ce=G.display;return{label:ce.title??"",color:ce.color??us.R,yAxis:1,disabled:se,getItemKey:()=>(ce.title??"")+Y,getDisplayValues:()=>{const fe=T.values??[];let Se=[];if(fe.includes(_o.Value)&&Se.push({numeric:ce.numeric,text:(0,Ts.zc)(ce),title:"Value"}),fe.includes(_o.Percent)){const _e=se?0:ce.numeric/B,Ae=_e*100;Se.push({numeric:_e,percent:Ae,text:se||isNaN(_e)?s.fieldConfig.defaults.noValue??"-":Ae.toFixed(G.field.decimals??0)+"%",title:fe.length>1?"Percent":""})}return Se}}}).filter(G=>!!G);return o.createElement(jo.AY.Legend,{placement:T.placement,width:T.width},o.createElement(Bi.l,{items:W,seriesVisibilityChangeBehavior:wv.Y.Hide,placement:T.placement,displayMode:T.displayMode}))}function ty(s){return s.some(D=>D.view?.dataFrame.length)}function ny(){const[s,D]=(0,o.useState)(),{eventBus:T}=(0,nr.R9)();return(0,o.useEffect)(()=>{const B=Y=>{D(Y.payload.dataId)},W=Y=>{D(void 0)},G=new Oo.w0;return G.add(T.getStream(Cr.es).subscribe({next:B})),G.add(T.getStream(Cr.xH).subscribe({next:W})),()=>{G.unsubscribe()}},[D,T]),s}const ay=(s,D,T)=>{if(D==="grafana-piechart-panel"&&T.angular){const B=T.angular,W=[];let G=s.options;if(B.aliasColors)for(const Y of Object.keys(B.aliasColors)){const q=B.aliasColors[Y];q&&W.push({matcher:{id:io.mi.byName,options:Y},properties:[{id:Us.qb.Color,value:{mode:us.S.Fixed,fixedColor:q}}]})}if(s.fieldConfig={overrides:W,defaults:{unit:B.format,decimals:B.decimals?B.decimals:0}},G.legend={placement:"right",values:[],displayMode:Lt.jK.Table,showLegend:!0,calcs:[]},B.valueName)switch(G.reduceOptions={calcs:[]},B.valueName){case"current":G.reduceOptions.calcs=["lastNotNull"];break;case"min":G.reduceOptions.calcs=["min"];break;case"max":G.reduceOptions.calcs=["max"];break;case"avg":G.reduceOptions.calcs=["mean"];break;case"total":G.reduceOptions.calcs=["sum"];break}switch(B.legendType){case"Under graph":G.legend.placement="bottom";break;case"Right side":G.legend.placement="right";break}switch(B.pieType){case"pie":G.pieType=Do.Pie;break;case"donut":G.pieType=Do.Donut;break}return B.legend&&(B.legend.show||(G.legend.showLegend=!1),B.legend.values&&G.legend.values.push(_o.Value),B.legend.percentage&&G.legend.values.push(_o.Percent)),B.legendType==="On graph"&&(G.legend.showLegend=!1,G.displayLabels=[Wr.Name],B.legend.values&&G.displayLabels.push(Wr.Value),B.legend.percentage&&G.displayLabels.push(Wr.Percent)),G}return{}};class sy{getSuggestionsForData(D){const T=D.getListAppender({name:Ga.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[Wr.Percent],legend:{calcs:[],displayMode:Lt.jK.Hidden,placement:"right",values:[],showLegend:!1}}}),{dataSummary:B}=D;if(B.hasNumberField){if(B.hasStringField&&B.frameCount===1){if(B.rowCountTotal>30||B.rowCountTotal<2)return;T.append({name:Ga.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),T.append({name:Ga.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:Do.Donut}});return}B.numberFieldCount>30||B.numberFieldCount<2||(T.append({name:Ga.y.PieChart}),T.append({name:Ga.y.PieChartDonut,options:{pieType:Do.Donut}}))}}}const ry=new w.c(qv).setPanelChangeHandler(ay).useFieldConfig({disableStandardOptions:[Us.qb.Thresholds],standardOptions:{[Us.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:us.S.PaletteClassic}}},useCustomConfig:s=>{Ao.B(s)}}).setPanelOptions(s=>{(0,Rl.j)(s),s.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Do.Pie,label:"Pie"},{value:Do.Donut,label:"Donut"}]},defaultValue:Do.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:Wr.Percent,label:"Percent"},{value:Wr.Name,label:"Name"},{value:Wr.Value,label:"Value"}]}}),Lo.L(s),Hr.J(s,!1),s.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:_o.Percent,label:"Percent"},{value:_o.Value,label:"Value"}]},showIf:D=>D.legend.showLegend!==!1})}).setSuggestionsSupplier(new sy);var oy=e(88294),Sf=e(56386);const Cf=({data:s,alignedData:D,seriesIdx:T,datapointIdx:B,timeZone:W,onAnnotationAdd:G})=>{const Y=(0,Q.l4)();if(!s||B==null)return null;const q=D.fields[T],se=[],ce=new Set;if(q.getLinks){const Vt=q.values[B],sn=q.display?q.display(Vt):{text:`${Vt}`,numeric:+Vt};q.getLinks({calculatedValue:sn,valueRowIndex:B}).forEach(Cn=>{const Dn=`${Cn.title}/${Cn.href}`;ce.has(Dn)||(se.push(Cn),ce.add(Dn))})}const fe=D.fields[0],Se=fe.display||(0,Qs.U)({field:fe,timeZone:W,theme:Y}),_e=q.state?.origin,Ae=q.display||(0,Qs.U)({field:q,timeZone:W,theme:Y}),He=q.values[B],tt=Ae(He),$e=_e?(0,os.CZ)(s[_e.frameIndex].fields[_e.fieldIndex],s[_e.frameIndex],s):null,mt=(0,Gr.iK)(q,B);let Wt;mt&&(Wt=fe.values[mt]);const wt=fe.values[B];let Ot=null,on=null;if(Wt){const Vt=Wt&&(0,Gr.Y)(Wt-wt);on=o.createElement(o.Fragment,null,o.createElement("br",null),o.createElement("strong",null,"Duration:")," ",Vt),Ot=o.createElement(o.Fragment,null," to"," ",o.createElement("strong",null,Se(fe.values[mt]).text))}return o.createElement("div",null,o.createElement("div",{style:{fontSize:Y.typography.bodySmall.fontSize}},$e,o.createElement("br",null),o.createElement(Gd.V,{label:tt.text,color:tt.color||us.R,isActive:!0}),"From ",o.createElement("strong",null,Se(fe.values[B]).text),Ot,on),o.createElement("div",{style:{margin:Y.spacing(1,-1,-1,-1),borderTop:`1px solid ${Y.colors.border.weak}`}},G&&o.createElement(Is.s,{label:"Add annotation",icon:"comment-alt",onClick:G}),se.length>0&&se.map((Vt,sn)=>o.createElement(Is.s,{key:sn,icon:"external-link-alt",target:Vt.target,label:Vt.title,url:Vt.href,onClick:Vt.onClick}))))};Cf.displayName="StateTimelineTooltip";const cc=10,iy=({data:s,timeRange:D,timeZone:T,options:B,width:W,height:G,replaceVariables:Y,onChangeTimeRange:q})=>{const se=(0,Q.l4)(),ce=(0,o.useRef)(void 0),fe=(0,o.useRef)(!1),[Se,_e]=(0,o.useState)(void 0),[Ae,He]=(0,o.useState)(null),[tt,$e]=(0,o.useState)(null),[mt,Wt]=(0,o.useState)(null),[wt,Ot]=(0,o.useState)(!1),[on,Vt]=(0,o.useState)(!1),{sync:sn,canAddAnnotations:Cn}=(0,nr.R9)(),Dn=()=>{fe.current=!1,He(null),Vt(!1)},En=()=>{fe.current=!fe.current,Vt(fe.current)},{frames:kn,warn:bn}=(0,o.useMemo)(()=>(0,Gr.AR)(s.series,B.mergeValues??!0,D,se),[s.series,B.mergeValues,D,se]),ra=(0,o.useMemo)(()=>(0,Gr.SA)(kn,B.legend,se),[kn,B.legend,se]),Rn=(0,o.useMemo)(()=>Yi(B.timezone,T),[B.timezone,T]),Sn=(0,o.useCallback)((Kn,wa,Fa,Oa)=>{const Aa=kn??[],Gn=Aa.reduce((wn,ea)=>wn+ea.fields.filter(ua=>ua.type!==Yn.fS.time).length,0);return wa===null||Fa===null||!Kn.meta?.transformations?.length&&Kn.fields.length-1!==Gn||!Kn.fields[wa]?null:o.createElement(o.Fragment,null,on&&o.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},o.createElement(mi.P,{onClick:Dn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),o.createElement(Cf,{data:Aa,alignedData:Kn,seriesIdx:wa,datapointIdx:Fa,timeZone:T,onAnnotationAdd:Oa}))},[T,kn,on]);if(!kn||bn)return o.createElement("div",{className:"panel-empty"},o.createElement("p",null,bn??"No data found in response"));if(kn.length===1){const Kn=(0,_m.MB)(kn[0])}const Jn=!!(Cn&&Cn());return o.createElement(Sf.K,{theme:se,frames:kn,structureRev:s.structureRev,timeRange:D,timeZone:Rn,width:W,height:G,legendItems:ra,...B,mode:Gr.KN.Changes},(Kn,wa)=>(ce.current!==Kn&&(ce.current=Fi({config:Kn,onUPlotClick:En,setFocusedSeriesIdx:$e,setFocusedPointIdx:Wt,setCoords:He,setHover:_e,isToolTipOpen:fe,isActive:wt,setIsActive:Ot,sync:sn})),o.createElement(o.Fragment,null,o.createElement(Ei.R,{config:Kn,onZoom:q}),o.createElement(Uo,{config:Kn,onChangeTimeRange:q}),s.annotations&&o.createElement(Fl,{annotations:s.annotations,config:Kn,timeZone:T}),Jn?o.createElement(Ll,{data:wa,timeZone:T,config:Kn},({startAnnotating:Fa})=>B.tooltip.mode===Lt.f3.None||mt===null||!wt&&sn&&sn()===Pl.m.Crosshair?null:o.createElement(rs.h_,null,Se&&Ae&&tt&&o.createElement(ms.S,{position:{x:Ae.viewport.x,y:Ae.viewport.y},offset:{x:cc,y:cc},allowPointerEvents:fe.current},Sn(wa,tt,mt,()=>{Fa({coords:{plotCanvas:Ae.canvas,viewport:Ae.viewport}}),Dn()})))):o.createElement(rs.h_,null,B.tooltip.mode!==Lt.f3.None&&Se&&Ae&&o.createElement(ms.S,{position:{x:Ae.viewport.x,y:Ae.viewport.y},offset:{x:cc,y:cc},allowPointerEvents:fe.current},Sn(wa,tt,mt))))))},ly=(s,D,T)=>{let B=s.options??{};if(D==="natel-discrete-panel"&&T.angular){const W=T.angular,G=s.fieldConfig??{defaults:{},overrides:[]};W.units&&(G.defaults.unit=W.units);const Y={fillOpacity:100,lineWidth:0};G.defaults.custom=Y,B.mergeValues=!0;const q={type:Pi.H.ValueToText,options:{}};if(G.defaults.mappings=[q],(0,ne.isArray)(W.colorMaps))for(const se of W.colorMaps){const ce=se.color;ce&&(q.options[se.text]={color:ce})}if((0,ne.isArray)(W.valueMaps))for(const se of W.valueMaps){const ce=se.text,fe=se.value;if(ce&&fe){let Se=q.options[fe];Se?Se.text=ce:q.options[fe]={text:ce}}}if((0,ne.isArray)(W.rangeMaps))for(const se of W.rangeMaps){let ce=+se.from,fe=+se.to;const Se=se.text;Se&&G.defaults.mappings.push({type:Pi.H.RangeToText,options:{from:ce,to:fe,result:{text:Se}}})}s.fieldConfig=G}return B},dc={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:Lt.Jp.Auto},Df={fillOpacity:70,lineWidth:0};class cy{getSuggestionsForData(D){const{dataSummary:T}=D;if(!T.hasData||!T.hasTimeField||!T.hasStringField&&!T.hasNumberField||T.numberFieldCount>=30||T.preferredVisualisationType==="logs")return;D.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ga.y.StateTimeline})}}const dy=new w.c(iy).setPanelChangeHandler(ly).useFieldConfig({standardOptions:{[Us.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:us.S.ContinuousGrYlRd}}},useCustomConfig:s=>{s.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Df.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Df.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:yi,override:yi,shouldApply:D=>D.type!==Yn.fS.time,process:to.kG,settings:{isTime:!0}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",defaultValue:!1,editor:vi,override:vi,shouldApply:D=>D.type!==Yn.fS.time,process:to.kG,settings:{isTime:!0}}),Ao.B(s)}}).setPanelOptions(s=>{s.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:dc.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Lt.Jp.Auto,label:"Auto"},{value:Lt.Jp.Always,label:"Always"},{value:Lt.Jp.Never,label:"Never"}]},defaultValue:dc.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:dc.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:dc.rowHeight}),Hr.J(s,!1),Lo.L(s,!0)}).setSuggestionsSupplier(new cy).setDataSupport({annotations:!0}),Pf=({data:s,alignedData:D,seriesIdx:T,datapointIdx:B,timeZone:W})=>{const G=(0,Q.l4)();if(!s||B==null)return null;const Y=D.fields[T],q=[],se=new Set;if(Y.getLinks){const $e=Y.values[B],mt=Y.display?Y.display($e):{text:`${$e}`,numeric:+$e};Y.getLinks({calculatedValue:mt,valueRowIndex:B}).forEach(Wt=>{const wt=`${Wt.title}/${Wt.href}`;se.has(wt)||(q.push(Wt),se.add(wt))})}const ce=D.fields[0],fe=ce.display||(0,Qs.U)({field:ce,timeZone:W,theme:G}),Se=Y.state?.origin,_e=Y.display||(0,Qs.U)({field:Y,timeZone:W,theme:G}),Ae=Y.values[B],He=_e(Ae),tt=Se?(0,os.CZ)(s[Se.frameIndex].fields[Se.fieldIndex],s[Se.frameIndex],s):null;return o.createElement("div",null,o.createElement("div",{style:{fontSize:G.typography.bodySmall.fontSize}},o.createElement("strong",null,fe(ce.values[B]).text),o.createElement("br",null),o.createElement(Gd.V,{label:He.text,color:He.color||us.R,isActive:!0}),tt),q.length>0&&o.createElement("div",{style:{margin:G.spacing(1,-1,-1,-1),borderTop:`1px solid ${G.colors.border.weak}`}},q.map(($e,mt)=>o.createElement(Is.s,{key:mt,icon:"external-link-alt",target:$e.target,label:$e.title,url:$e.href,onClick:$e.onClick}))))};Pf.displayName="StatusHistoryTooltip";const Mf=10,uy=({data:s,timeRange:D,timeZone:T,options:B,width:W,height:G,onChangeTimeRange:Y})=>{const q=(0,Q.l4)(),se=(0,o.useRef)(void 0),ce=(0,o.useRef)(!1),[fe,Se]=(0,o.useState)(void 0),[_e,Ae]=(0,o.useState)(null),[He,tt]=(0,o.useState)(null),[$e,mt]=(0,o.useState)(null),[Wt,wt]=(0,o.useState)(!1),[Ot,on]=(0,o.useState)(!1),{sync:Vt}=(0,nr.R9)(),sn=()=>{ce.current=!1,Ae(null),on(!1)},Cn=()=>{ce.current=!ce.current,on(ce.current)},{frames:Dn,warn:En}=(0,o.useMemo)(()=>(0,Gr.AR)(s.series,!1,D,q),[s.series,D,q]),kn=(0,o.useMemo)(()=>(0,Gr.SA)(Dn,B.legend,q),[Dn,B.legend,q]),bn=(0,o.useCallback)((Sn,Jn,Kn)=>{const wa=Dn??[],Fa=wa.reduce((Oa,Aa)=>Oa+Aa.fields.filter(Gn=>Gn.type!==Yn.fS.time).length,0);return Jn===null||Kn===null||!Sn.meta?.transformations?.length&&Sn.fields.length-1!==Fa||!Sn.fields[Jn]?null:o.createElement(o.Fragment,null,Ot&&o.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},o.createElement(mi.P,{onClick:sn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),o.createElement(Pf,{data:wa,alignedData:Sn,seriesIdx:Jn,datapointIdx:Kn,timeZone:T}))},[T,Dn,Ot]),ra=Sn=>B.tooltip.mode===Lt.f3.None||$e===null||!Wt&&Vt&&Vt()===Pl.m.Crosshair?null:o.createElement(rs.h_,null,fe&&_e&&He&&o.createElement(ms.S,{position:{x:_e.viewport.x,y:_e.viewport.y},offset:{x:Mf,y:Mf},allowPointerEvents:ce.current},bn(Sn,He,$e))),Rn=(0,o.useMemo)(()=>Yi(B.timezone,T),[B.timezone,T]);return!Dn||En?o.createElement("div",{className:"panel-empty"},o.createElement("p",null,En??"No data found in response")):Dn[0].length>W/2?o.createElement("div",{className:"panel-empty"},o.createElement("p",null,"Too many points to visualize properly. ",o.createElement("br",null),"Update the query to return fewer points. ",o.createElement("br",null),"(",Dn[0].length," points received)")):o.createElement(Sf.K,{theme:q,frames:Dn,structureRev:s.structureRev,timeRange:D,timeZone:Rn,width:W,height:G,legendItems:kn,...B,mode:Gr.KN.Samples},(Sn,Jn)=>(se.current!==Sn&&(se.current=Fi({config:Sn,onUPlotClick:Cn,setFocusedSeriesIdx:tt,setFocusedPointIdx:mt,setCoords:Ae,setHover:Se,isToolTipOpen:ce,isActive:Wt,setIsActive:wt})),o.createElement(o.Fragment,null,o.createElement(Ei.R,{config:Sn,onZoom:Y}),ra(Jn),o.createElement(Uo,{config:Sn,onChangeTimeRange:Y}))))},Hx={colWidth:.9,rowHeight:.9,showValue:Lt.Jp.Auto},Tf={fillOpacity:70,lineWidth:1};class my{getSuggestionsForData(D){const{dataSummary:T}=D;if(!T.hasData||!T.hasTimeField||!T.hasStringField&&!T.hasNumberField||T.numberFieldCount>=30||T.rowCountMax>100||T.preferredVisualisationType==="logs")return;D.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:us.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:W=>{W.options.colWidth=.7}}}).append({name:Ga.y.StatusHistory})}}const fy=new w.c(uy).useFieldConfig({standardOptions:{[Us.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:us.S.Thresholds}}},useCustomConfig:s=>{s.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Tf.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Tf.fillOpacity,settings:{min:0,max:100,step:1}}),Ao.B(s)}}).setPanelOptions(s=>{s.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Lt.Jp.Auto,label:"Auto"},{value:Lt.Jp.Always,label:"Always"},{value:Lt.Jp.Never,label:"Never"}]},defaultValue:Lt.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),Hr.J(s,!1),Lo.L(s,!0)}).setSuggestionsSupplier(new my);var gy=e(18985);const sl={align:"auto",inspect:!1,cellOptions:{type:Lt.h2.Auto}};var py=e(26286);function hy({onChange:s,value:D,context:T}){const B=W=>{W?.currentTarget.checked&&(T.options.footer.show=!1),s(W?.currentTarget.checked)};return o.createElement(py.r,{value:!!D,onChange:B})}function vy({cellOptions:s,onChange:D}){const T=W=>{s.mode=W,D(s)},B=W=>{s.valueDisplayMode=W,D(s)};return o.createElement(pl.K,{direction:"column",gap:0},o.createElement(Zs.g,{label:"Gauge display mode"},o.createElement(jr.S,{value:s?.mode??Lt.QH.Gradient,onChange:T,options:yy})),o.createElement(Zs.g,{label:"Value display"},o.createElement(jr.S,{value:s?.valueDisplayMode??Lt.M8.Text,onChange:B,options:Ey})))}const yy=[{value:Lt.QH.Basic,label:"Basic"},{value:Lt.QH.Gradient,label:"Gradient"},{value:Lt.QH.Lcd,label:"Retro LCD"}],Ey=[{value:Lt.M8.Color,label:"Value color"},{value:Lt.M8.Text,label:"Text color"},{value:Lt.M8.Hidden,label:"Hidden"}],by=[{value:Lt.v7.Basic,label:"Basic"},{value:Lt.v7.Gradient,label:"Gradient"}],xy=({cellOptions:s,onChange:D})=>{const T=B=>{s.mode=B,D(s)};return o.createElement(Zs.g,{label:"Background display mode"},o.createElement(jr.S,{value:s?.mode??Lt.v7.Gradient,onChange:T,options:by}))};var Sy=e(51761),If=e(80857);const Cy=["drawStyle","lineInterpolation","barAlignment","lineWidth","fillOpacity","gradientMode","lineStyle","spanNulls","showPoints","pointSize"],Dy=s=>{const{cellOptions:D,onChange:T}=s,B=(0,o.useMemo)(()=>{const Y=Pr(If.U);return(0,Sy.j)(Y,"ChartCell")},[]),W=(0,Q.wW)(My),G={...If.U,...D};return o.createElement(dr.wc,null,B.list(Cy.map(Y=>`custom.${Y}`)).map(Y=>{if(Y.showIf&&!Y.showIf(G))return null;const q=Y.editor,se=Y.path;return o.createElement(Zs.g,{label:Y.name,key:Y.id,className:W.field},o.createElement(q,{onChange:ce=>T({...D,[se]:ce}),value:(Py(se,G)?G[se]:void 0)??Y.defaultValue,item:Y,context:{data:[]}}))}))};function Py(s,D){return s in D}const My=()=>({field:(0,F.css)`
    width: 100%;

    // @TODO don't show "scheme" option for custom gradient mode.
    // it needs thresholds to work, which are not supported
    // for area chart cell right now
    [title='Use color scheme to define gradient'] {
      display: none;
    }
  `}),Of=({value:s,onChange:D})=>{const T=s.type,B=(0,Q.wW)(Iy),W=Rf.find(ce=>ce.value.type===T);let[G,Y]=(0,o.useState)({});const q=ce=>{ce.value!==void 0&&(s=ce.value,G[s.type]!==void 0&&Object.keys(G[s.type]).length>1&&(s=(0,ne.merge)(s,G[s.type])),(0,Ja.ff)(qi,{item:el.CELL_TYPE_CHANGE,type:s.type}),D(s))},se=ce=>{G[s.type]=(0,ne.merge)(s,ce),Y(G),D(G[s.type])};return o.createElement("div",{className:B.fixBottomMargin},o.createElement(Zs.g,null,o.createElement(bt.Ph,{options:Rf,value:W,onChange:q})),T===Lt.h2.Gauge&&o.createElement(vy,{cellOptions:s,onChange:se}),T===Lt.h2.ColorBackground&&o.createElement(xy,{cellOptions:s,onChange:se}),T===Lt.h2.Sparkline&&o.createElement(Dy,{cellOptions:s,onChange:se}))},Ty={value:{type:Lt.h2.Sparkline},label:"Sparkline"},Rf=[{value:{type:Lt.h2.Auto},label:"Auto"},...V.config.featureToggles.timeSeriesTable?[Ty]:[],{value:{type:Lt.h2.ColorText},label:"Colored text"},{value:{type:Lt.h2.ColorBackground},label:"Colored background"},{value:{type:Lt.h2.Gauge},label:"Gauge"},{value:{type:Lt.h2.JSONView},label:"JSON View"},{value:{type:Lt.h2.Image},label:"Image"}],Iy=s=>({fixBottomMargin:(0,F.css)({marginBottom:s.spacing(-2)})}),uc={cellHeight:Lt.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};class Oy{getSuggestionsForData(D){const T=D.getListAppender({name:Ga.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:B=>{B.fieldConfig.defaults.custom.minWidth=50}}});D.dataSummary.fieldCount===0?T.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):T.append({})}}const mc="Table footer",Af=["Cell options"],Ry=new w.c(zm).setPanelChangeHandler(Uh).setMigrationHandler(Lh).useFieldConfig({useCustomConfig:s=>{s.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:sl.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:sl.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:sl.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell type",editor:Of,override:Of,defaultValue:sl.cellOptions,process:to.kG,category:Af,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:Af,showIf:D=>D.cellOptions.type===Lt.h2.Auto||D.cellOptions.type===Lt.h2.JSONView||D.cellOptions.type===Lt.h2.ColorText||D.cellOptions.type===Lt.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:sl.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(s=>{s.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:uc.showHeader}).addRadio({path:"cellHeight",name:"Cell height",defaultValue:uc.cellHeight,settings:{options:[{value:Lt.Ss.Sm,label:"Small"},{value:Lt.Ss.Md,label:"Medium"},{value:Lt.Ss.Lg,label:"Large"}]}}).addBooleanSwitch({path:"footer.show",category:[mc],name:"Show table footer",defaultValue:uc.footer?.show}).addCustomEditor({id:"footer.reducer",category:[mc],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:gy.S.get("stats-picker").editor,defaultValue:[hr.gz.sum],showIf:D=>D.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[mc],name:"Count rows",description:"Display a single count for all data rows",defaultValue:uc.footer?.countRows,showIf:D=>D.footer?.reducer?.length===1&&D.footer?.reducer[0]===hr.gz.count}).addMultiSelect({path:"footer.fields",category:[mc],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async D=>{const T=[];if(D&&D.data&&D.data.length>0){const B=D.data[0];for(const W of B.fields)if(W.type===Yn.fS.number){const G=(0,os.CZ)(W,B,D.data),Y=W.name;T.push({value:Y,label:G})}}return T}},defaultValue:"",showIf:D=>D.footer?.show&&!D.footer?.countRows||D.footer?.reducer?.length===1&&D.footer?.reducer[0]!==hr.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:hy})}).setSuggestionsSupplier(new Oy);var Ay=e(79937),Ly=e(48993),wy=e(52807),sr=(s=>(s.Code="code",s.HTML="html",s.Markdown="markdown",s))(sr||{}),Lf=(s=>(s.Go="go",s.Html="html",s.Json="json",s.Markdown="markdown",s.Plaintext="plaintext",s.Sql="sql",s.Typescript="typescript",s.Xml="xml",s.Yaml="yaml",s))(Lf||{});const Gx="plaintext",rl={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},wf={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function By(s){const D=(0,Q.wW)(Ny),[T,B]=(0,o.useState)({mode:s.options.mode,content:Bf(s.options,s.replaceVariables,tn.default.disableSanitizeHtml)});if((0,Ly.Z)(()=>{const{options:W,replaceVariables:G}=s,Y=Bf(W,G,tn.default.disableSanitizeHtml);(Y!==T.content||W.mode!==T.mode)&&B({mode:W.mode,content:Y})},100,[s]),T.mode===sr.Code){const W=s.options.code??rl;return o.createElement(Fd.p,{key:`${W.showLineNumbers}/${W.showMiniMap}`,value:T.content,language:W.language??rl.language,width:s.width,height:s.height,containerStyles:D.codeEditorContainer,showMiniMap:W.showMiniMap,showLineNumbers:W.showLineNumbers,readOnly:!0})}return o.createElement(_.$,{autoHeightMin:"100%",className:D.containStrict},o.createElement(Ay.Z,{html:T.content,className:D.markdown,"data-testid":"TextPanel-converted-content"}))}function Bf(s,D,T){let{mode:B,content:W}=s;if(!W)return"";switch(W=D(W,{},s.code?.language==="json"?"json":"html"),B){case sr.Code:break;case sr.HTML:T||(W=_a.QX.sanitizeTextPanelContent(W));break;case sr.Markdown:default:W=(0,wy.x)(W,{noSanitize:T})}return W}const Ny=s=>({codeEditorContainer:(0,F.css)`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${s.colors.background.primary};
    }
  `,markdown:(0,F.cx)("markdown-html",(0,F.css)`
      height: 100%;
    `),containStrict:(0,F.css)({contain:"strict"})});var Fy=e(74317);const Uy=({value:s,onChange:D,context:T})=>{const B=(0,o.useMemo)(()=>T.options?.mode??sr.Markdown,[T]),W=(0,Q.wW)(Wy),G=()=>T.getSuggestions?T.getSuggestions().map(Y=>(0,Fy.T)(Y)):[];return o.createElement("div",{className:(0,F.cx)(W.editorBox)},o.createElement(xm.Z,{disableHeight:!0},({width:Y})=>Y===0?null:o.createElement(Fd.p,{value:s,onBlur:D,onSave:D,language:B,width:Y,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:G})))},Wy=s=>({editorBox:(0,F.css)`
    label: editorBox;
    border: 1px solid ${s.colors.border.medium};
    border-radius: ${s.shape.radius.default};
    margin: ${s.spacing(.5)} 0;
    width: 100%;
  `}),_y=s=>{const D=parseFloat(s.pluginVersion||"6.1");let T=s.options;if(s.hasOwnProperty("content")&&s.hasOwnProperty("mode")){const W=s,G=W.content,Y=W.mode;delete W.content,delete W.mode,D<7.1&&(T={content:G,mode:Y})}return[sr.Code,sr.HTML,sr.Markdown].find(W=>W===T.mode)||(T={...T,mode:sr.Markdown}),T},$y=new w.c(By).setPanelOptions(s=>{s.addRadio({path:"mode",name:"Mode",settings:{options:[{value:sr.Markdown,label:"Markdown"},{value:sr.HTML,label:"HTML"},{value:sr.Code,label:"Code"}]},defaultValue:wf.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(Lf).map(D=>({value:D,label:D}))},defaultValue:rl.language,showIf:D=>D.mode===sr.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:rl.showLineNumbers,showIf:D=>D.mode===sr.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:rl.showMiniMap,showIf:D=>D.mode===sr.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:Uy,defaultValue:wf.content})}).setMigrationHandler(_y);var Vy=e(51226),Nf=e(62806),Ky=e(7959);class ky{getSuggestionsForData(D){const{dataSummary:T}=D;if(!T.hasTimeField||!T.hasNumberField||T.rowCountTotal<2)return;const B=D.getListAppender({name:Ga.y.LineChart,pluginId:"timeseries",options:{legend:{calcs:[],displayMode:Lt.jK.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:G=>{G.fieldConfig?.defaults.custom?.drawStyle!==Lt.l8.Bars&&(G.fieldConfig.defaults.custom.lineWidth=Math.max(G.fieldConfig.defaults.custom.lineWidth??1,2))}}}),W=100;if(B.append({name:Ga.y.LineChart}),T.rowCountMax<200&&B.append({name:Ga.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:Lt.KC.Smooth}},overrides:[]}}),T.numberFieldCount===1){B.append({name:Ga.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),B.append({name:Ga.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:us.S.ContinuousGrYlRd},custom:{gradientMode:Lt.FI.Scheme,lineInterpolation:Lt.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),T.rowCountMax<W&&(B.append({name:Ga.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:Lt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Lt.FI.Hue}},overrides:[]}}),B.append({name:Ga.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:us.S.ContinuousGrYlRd},custom:{drawStyle:Lt.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:Lt.FI.Scheme}},overrides:[]}}));return}B.append({name:Ga.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Lt.o0.Normal,group:"A"}}},overrides:[]}}),B.append({name:Ga.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Lt.o0.Percent,group:"A"}}},overrides:[]}}),T.rowCountTotal/T.numberFieldCount<W&&(B.append({name:Ga.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:Lt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Lt.FI.Hue,stacking:{mode:Lt.o0.Normal,group:"A"}}},overrides:[]}}),B.append({name:Ga.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:Lt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Lt.FI.Hue,stacking:{mode:Lt.o0.Percent,group:"A"}}},overrides:[]}}))}}function zy(s){const D=(0,ve.h4)().getCurrent()?.getPanelById(s);if(D){const T=D.transformations?[...D.transformations]:[];return T.push({id:Ky.W.prepareTimeSeries,options:{format:"wide"}}),{name:"Transform to wide time series format",pluginId:"timeseries",transformations:T}}}const Hy=({data:s,timeRange:D,timeZone:T,width:B,height:W,options:G,fieldConfig:Y,onChangeTimeRange:q,replaceVariables:se,id:ce})=>{const{sync:fe,canAddAnnotations:Se,onThresholdsChange:_e,canEditThresholds:Ae,showThresholds:He,dataLinkPostProcessor:tt}=(0,nr.R9)(),$e=(0,o.useMemo)(()=>kl(s.series,tn.config.theme2,D),[s.series,D]),mt=(0,o.useMemo)(()=>Yi(G.timezone,T),[G.timezone,T]),Wt=(0,o.useMemo)(()=>{if($e?.length&&$e.every(Ot=>Ot.meta?.type===Vy.P.TimeSeriesLong)){const Ot=zy(ce);return{message:"Long data must be converted to wide",suggestions:Ot?[Ot]:void 0}}},[$e,ce]);if(!$e||Wt)return o.createElement(no.Z,{panelId:ce,message:Wt?.message,fieldConfig:Y,data:s,needsTimeField:!0,needsNumberField:!0,suggestions:Wt?.suggestions});const wt=!!(Se&&Se());return o.createElement(zi.p,{frames:$e,structureRev:s.structureRev,timeRange:D,timeZone:mt,width:B,height:W,legend:G.legend,options:G},(Ot,on)=>(on.fields.some(Vt=>!!Vt.config.links?.length)&&(on=Qi(on,$e,se,T,tt)),o.createElement(o.Fragment,null,o.createElement(Nf.C,{config:Ot}),o.createElement(Ei.R,{config:Ot,onZoom:q,withZoomY:!0}),G.tooltip.mode===Lt.f3.None||o.createElement(ui.i,{frames:$e,data:on,config:Ot,mode:G.tooltip.mode,sortOrder:G.tooltip.sort,sync:fe,timeZone:T}),s.annotations&&o.createElement(Fl,{annotations:s.annotations,config:Ot,timeZone:T}),wt?o.createElement(Ll,{data:on,timeZone:T,config:Ot},({startAnnotating:Vt})=>o.createElement(Xo,{data:on,config:Ot,timeZone:T,replaceVariables:se,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(sn,Cn)=>{Cn&&Vt({coords:Cn.coords})}}]}]})):o.createElement(Xo,{data:on,frames:$e,config:Ot,timeZone:T,replaceVariables:se,defaultItems:[]}),s.annotations&&o.createElement(cd,{visibleSeries:Ku(Ot,$e),config:Ot,exemplars:s.annotations,timeZone:T}),(Ae&&_e||He)&&o.createElement(_l,{config:Ot,fieldConfig:Y,onThresholdsChange:Ae?_e:void 0}),o.createElement(Uo,{config:Ot,onChangeTimeRange:q}))))};var Yd=e(36602),Gy=e(87783);const jy=({value:s,onChange:D})=>{const T=(0,Q.wW)(Yy);(!s||s.length<1)&&(s=[""]);const B=()=>{D([...s,Yd.RQ.default])},W=Y=>{const q=s.slice();q.splice(Y,1),D(q)},G=(Y,q)=>{const se=s.slice();se[Y]=q??Yd.RQ.default,se.length===0||se.length===1&&se[0]===""?D(void 0):D(se)};return o.createElement("div",null,s.map((Y,q)=>o.createElement("div",{className:T.wrapper,key:`${q}.${Y}`},o.createElement("span",{className:T.first},o.createElement(Gy.O,{onChange:se=>G(q,se),includeInternal:!0,value:Y??Yd.RQ.default})),q===s.length-1?o.createElement(ls.h,{name:"plus",onClick:B,tooltip:"Add timezone"}):o.createElement(ls.h,{name:"times",onClick:()=>W(q),tooltip:"Remove timezone"}))))},Yy=s=>({wrapper:(0,F.css)`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:(0,F.css)`
    margin-right: 8px;
    flex-grow: 2;
  `});var Qy=e(39064);let Qd=null;const Zy=(s,D,T,B)=>{if(D==="graph"&&T.angular){const{fieldConfig:W,options:G,annotations:Y}=Jy({...T.angular,fieldConfig:B,panel:s}),q=(0,ve.h4)().getCurrent();return q&&Y?.length>0&&(q.annotations.list=[...q.annotations.list,...Y],Qd==null&&(Qd=setTimeout(()=>{Qd=null,(0,om.$t)().refreshTimeModel()}))),s.fieldConfig=W,s.alert=T.angular.alert,G}return eE(s),{}};function Jy(s){let D=[];const T=s.fieldConfig?.overrides??[],B=s.yaxes??[];let W=Ff(B[0]);s.fieldConfig?.defaults&&(W={...s.fieldConfig?.defaults,...W});const G={fill:s.dashes?"dash":"solid",dash:[s.dashLength??10,s.spaceLength??10]};if(s.aliasColors)for(const Se of Object.keys(s.aliasColors)){const _e=s.aliasColors[Se];_e&&T.push({matcher:{id:io.mi.byName,options:Se},properties:[{id:Us.qb.Color,value:{mode:us.S.Fixed,fixedColor:_e}}]})}let Y=!1;if(s.seriesOverrides?.length)for(const Se of s.seriesOverrides){if(!Se.alias)continue;const Ae={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(Se.alias)?io.mi.byRegexp:io.mi.byName,options:Se.alias},properties:[]};let He;for(const tt of Object.keys(Se)){const $e=Se[tt];switch(tt){case"alias":case"$$hashKey":break;case"yaxis":if($e===2){const mt=Ff(B[1]);Xy(W,mt,Ae.properties)}break;case"fill":Ae.properties.push({id:"custom.fillOpacity",value:$e*10});break;case"fillBelowTo":Y=!0,Ae.properties.push({id:"custom.fillBelowTo",value:$e});break;case"fillGradient":$e&&(Ae.properties.push({id:"custom.fillGradient",value:"opacity"}),Ae.properties.push({id:"custom.fillOpacity",value:$e*10}));break;case"points":Ae.properties.push({id:"custom.showPoints",value:$e?Lt.Jp.Always:Lt.Jp.Never});break;case"bars":$e?(Ae.properties.push({id:"custom.drawStyle",value:Lt.l8.Bars}),Ae.properties.push({id:"custom.fillOpacity",value:100})):Ae.properties.push({id:"custom.drawStyle",value:Lt.l8.Line});break;case"lines":$e?Ae.properties.push({id:"custom.drawStyle",value:"line"}):Ae.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":Ae.properties.push({id:"custom.lineWidth",value:$e});break;case"pointradius":Ae.properties.push({id:"custom.pointSize",value:2+$e*2});break;case"dashLength":case"spaceLength":case"dashes":switch(He||(He={fill:G.fill,dash:[...G.dash]}),tt){case"dashLength":He.dash[0]=$e;break;case"spaceLength":He.dash[1]=$e;break;case"dashes":He.fill=$e?"dash":"solid";break}break;case"stack":Ae.properties.push({id:"custom.stacking",value:tE($e)});break;case"color":Ae.properties.push({id:"color",value:{fixedColor:$e,mode:us.S.Fixed}});break;case"transform":Ae.properties.push({id:"custom.transform",value:$e==="negative-Y"?Lt.pR.NegativeY:Lt.pR.Constant});break;default:console.log("Ignore override migration:",Se.alias,tt,$e)}}He&&Ae.properties.push({id:"custom.lineStyle",value:He}),Ae.properties.length&&T.push(Ae)}const q=W.custom??{};q.drawStyle=s.bars?Lt.l8.Bars:s.lines?Lt.l8.Line:Lt.l8.Points,s.points?(q.showPoints=Lt.Jp.Always,(0,ne.isNumber)(s.pointradius)&&(q.pointSize=2+s.pointradius*2)):q.drawStyle!==Lt.l8.Points&&(q.showPoints=Lt.Jp.Never),q.lineWidth=s.linewidth,G.fill!=="solid"&&(q.lineStyle=G),Y?q.fillOpacity=35:(0,ne.isNumber)(s.fill)&&(q.fillOpacity=s.fill*10),(0,ne.isNumber)(s.fillGradient)&&s.fillGradient>0&&(q.gradientMode=Lt.FI.Opacity,q.fillOpacity=s.fillGradient*10),q.spanNulls=s.nullPointMode===$m.Gl.Ignore,s.steppedLine&&(q.lineInterpolation=Lt.KC.StepAfter),q.drawStyle===Lt.l8.Bars&&(q.fillOpacity=100),s.stack&&(q.stacking={mode:Lt.o0.Normal,group:yo.stacking.group}),W.custom=(0,ne.omitBy)(q,ne.isNil),W.nullValueMode=s.nullPointMode;const se={legend:{displayMode:Lt.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:Lt.f3.Single,sort:Lt.As.None}},ce=s.legend;if(ce){if(ce.show?se.legend.displayMode=ce.alignAsTable?Lt.jK.Table:Lt.jK.List:se.legend.showLegend=!1,ce.rightSide&&(se.legend.placement="right"),s.legend.values){const Se=(0,ne.pickBy)(s.legend);se.legend.calcs=qy(Se)}s.legend.sideWidth&&(se.legend.width=s.legend.sideWidth),ce.hideZero&&T.push(Uf(hr.gz.allIsZero)),ce.hideEmpty&&T.push(Uf(hr.gz.allIsNull))}s.timeRegions?.length&&s.timeRegions.map((_e,Ae)=>({name:`T${Ae+1}`,color:_e.colorMode!=="custom"?_e.colorMode:_e.fillColor,line:_e.line,fill:_e.fill,fromDayOfWeek:_e.fromDayOfWeek,toDayOfWeek:_e.toDayOfWeek,from:_e.from,to:_e.to})).forEach((_e,Ae)=>{const He={datasource:{type:"datasource",uid:"grafana"},enable:!0,hide:!0,filter:{exclude:!1,ids:[s.panel.id]},iconColor:_e.fillColor??_e.color,name:`T${Ae+1}`,target:{queryType:Qy.hR.TimeRegions,refId:"Anno",timeRegion:{fromDayOfWeek:_e.fromDayOfWeek,toDayOfWeek:_e.toDayOfWeek,from:_e.from,to:_e.to,timezone:"utc"}}};_e.fill?D.push(He):_e.line&&(He.iconColor=_e.lineColor??"white",D.push(He))});const fe=s.tooltip;if(fe&&(fe.shared!==void 0&&(se.tooltip.mode=fe.shared?Lt.f3.Multi:Lt.f3.Single),fe.sort!==void 0&&fe.shared))switch(fe.sort){case 1:se.tooltip.sort=Lt.As.Ascending;break;case 2:se.tooltip.sort=Lt.As.Descending;break;default:se.tooltip.sort=Lt.As.None}if(s.thresholds&&s.thresholds.length>0){let Se=[],_e=!1,Ae=!1;const He=s.thresholds.sort(($e,mt)=>$e.value>mt.value?1:-1);for(let $e=0;$e<He.length;$e++){const mt=He[$e],Wt=He.length>$e+1?He[$e+1]:null;mt.fill&&(_e=!0),mt.line&&(Ae=!0),mt.op==="gt"&&Se.push({value:mt.value,color:Zd(mt)}),mt.op==="lt"&&(Se.length===0&&Se.push({value:-1/0,color:Zd(mt)}),Wt&&Wt.op==="gt"&&Wt.value>mt.value?Se.push({value:mt.value,color:"transparent"}):Wt&&Wt.op==="lt"?Se.push({value:mt.value,color:Zd(Wt)}):Se.push({value:mt.value,color:"transparent"}))}Se.length>0&&Se[0].value!==-1/0&&Se.unshift({color:"transparent",value:-1/0});let tt=_e?Lt.i3.Area:Lt.i3.Line;Ae&&_e&&(tt=Lt.i3.LineAndArea),W.custom.thresholdsStyle={mode:tt},W.thresholds={mode:Ud.H.Absolute,steps:Se}}return s.xaxis&&s.xaxis.show===!1&&s.xaxis.mode==="time"&&T.push({matcher:{id:io.mi.byType,options:Yn.fS.time},properties:[{id:"custom.axisPlacement",value:Lt.LB.Hidden}]}),{fieldConfig:{defaults:(0,ne.omitBy)(W,ne.isNil),overrides:T},options:se,annotations:D}}function Zd(s){return s.colorMode==="critical"?"red":s.colorMode==="warning"?"orange":s.colorMode==="custom"?s.fillColor||s.lineColor:"red"}function Ff(s){if(!s)return{};const D={axisPlacement:s.show?Lt.LB.Auto:Lt.LB.Hidden};if(s.label&&(D.axisLabel=s.label),s.logBase){const T=s.logBase;(T===2||T===10)&&(D.scaleDistribution={type:Lt.wf.Log,log:T})}return(0,ne.omitBy)({unit:s.format,decimals:Jd(s.decimals),min:Jd(s.min),max:Jd(s.max),custom:D},ne.isNil)}function Xy(s,D,T){for(const G of Object.keys(D)){const Y=D[G];G!=="custom"&&Y!==s[G]&&T.push({id:G,value:Y})}const B=s.custom??{},W=D.custom??{};for(const G of Object.keys(W)){const Y=W[G];Y!==B[G]&&T.push({id:`custom.${G}`,value:Y})}}function Jd(s){if((0,ne.isNumber)(s))return s;if((0,ne.isString)(s)){const D=Number(s);if(!isNaN(D))return D}}function qy(s){const D=[];for(const T of Object.keys(s)){const B=hr.TB.getIfExists(T);B&&D.push(B.id)}return D}function eE(s){s.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(s.fieldConfig.defaults.custom.hideFrom.viz=s.fieldConfig.defaults.custom.hideFrom.graph,delete s.fieldConfig.defaults.custom.hideFrom.graph),s.fieldConfig?.overrides&&(s.fieldConfig.overrides=s.fieldConfig.overrides.map(D=>(D.properties=D.properties.map(T=>(T.id==="custom.hideFrom"&&T.value.graph&&(T.value.viz=T.value.graph,delete T.value.graph),T)),D)))}function Uf(s){return{matcher:{id:io.mi.byValue,options:{reducer:s,op:Lt.Bd.GTE,value:0}},properties:[{id:"custom.hideFrom",value:{tooltip:!0,viz:!1,legend:!0}}]}}function tE(s){const D=yo.stacking?.group;return{mode:s?Lt.o0.Normal:Lt.o0.None,group:(0,ne.isString)(s)?s:D}}const nE=new w.c(Hy).setPanelChangeHandler(Zy).useFieldConfig(Pr(yo)).setPanelOptions(s=>{Lo.L(s),Hr.J(s),s.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:jy,defaultValue:void 0})}).setSuggestionsSupplier(new ky).setDataSupport({annotations:!0,alertStates:!0});var aE=e(26205),Xd=e(24824),sE=e(36516),rE=e(2190),oE=e(19672),fc=e(29788),qd=e(51752),Ii=e(77896),iE=e(27523);const lE=.8,cE=2,dE=200,Wf=10,_f=60,uE=6;function mE(s,D,T,B,W){const G=new Map,Y=D.length<_f?_f:Math.min(D.length,dE),q=window.innerWidth*2;s.width=q,s.height=Y;const se=Math.min(uE,Math.max(cE,Y/D.length)),ce=Y/D.length,fe=s.getContext("2d",{alpha:!1});if(fe){fe.fillStyle=W,fe.fillRect(0,0,q,Y);for(let Se=0;Se<D.length;Se++){const{valueWidth:_e,valueOffset:Ae,serviceName:He}=D[Se],tt=Ae/T*q;let $e=_e/T*q;$e<Wf&&($e=Wf);let mt=G.get(He);mt||(mt=`rgba(${B(He).concat(lE).join()})`,G.set(He,mt)),fe.fillStyle=mt,fe.fillRect(tt,Se*ce,$e,se)}}}const fE=(0,zr.B)(s=>({CanvasSpanGraph:(0,F.css)`
      label: CanvasSpanGraph;
      background: ${(0,Ii.h)(s,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class gE extends o.PureComponent{constructor(D){super(D),this.getColor=T=>(0,iE.e6)(T,this.props.theme),this._setCanvasRef=T=>{this._canvasElm=T},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:D,items:T}=this.props;mE(this._canvasElm,T,D,this.getColor,(0,Ii.h)(this.props.theme,"#fff"))}}render(){return o.createElement("canvas",{className:fE(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const pE=(0,Q.HE)(gE);var hE=e(81355);const vE=()=>({TickLabels:(0,F.css)`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:(0,F.css)`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function yE(s){const{numTicks:D,duration:T}=s,B=(0,Q.wW)(vE),W=[];for(let G=0;G<D+1;G++){const Y=G/D,q=Y===1?{right:"0%"}:{left:`${Y*100}%`};W.push(o.createElement("div",{key:Y,className:B.TickLabelsLabel,style:q,"data-testid":"tick"},(0,hE.LU)(T*Y)))}return o.createElement("div",{className:B.TickLabels,"data-testid":"TickLabels"},W)}var ol=e(80185);const EE=()=>({GraphTick:(0,F.css)`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function bE(s){const{numTicks:D}=s,T=(0,Q.wW)(EE),B=[];for(let W=1;W<D;W++){const G=`${W/D*100}%`;B.push(o.createElement("line",{className:T.GraphTick,x1:G,y1:"0%",x2:G,y2:"100%",key:W/D}))}return o.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},B)}const xE=()=>({ScrubberHandleExpansion:Co()((0,F.css)`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:Co()((0,F.css)`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:Co()((0,F.css)`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:(0,F.css)`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:(0,F.css)`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function $f({isDragging:s,onMouseDown:D,onMouseEnter:T,onMouseLeave:B,position:W}){const G=`${W*100}%`,Y=(0,Q.wW)(xE),q=Co()({[Y.ScrubberDragging]:s});return o.createElement("g",{className:q,"data-testid":"scrubber-component"},o.createElement("g",{"data-testid":"scrubber-component-g",className:Y.ScrubberHandles,onMouseDown:D,onMouseEnter:T,onMouseLeave:B},o.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:G,className:Y.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),o.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:G,className:Y.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),o.createElement("line",{className:Y.ScrubberLine,y2:"100%",x1:G,x2:G,"data-testid":"scrubber-component-line"}))}const Vf=(0,zr.B)(s=>{const D="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",T=(0,F.css)`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:(0,F.css)`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${D} {
        display: unset;
      }
    `,ViewingLayerGraph:(0,F.css)`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,Ii.h)(s,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:(0,F.css)`
      label: ViewingLayerInactive;
      fill: ${(0,Ii.h)(s,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:(0,F.css)`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,Ii.h)(s,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:(0,F.css)`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:(0,F.css)`
      label: ViewingLayerDrag;
      fill: ${(0,Ii.h)(s,"#44f")};
    `,ViewingLayerFullOverlay:(0,F.css)`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:T,ViewingLayerResetZoomHoverClassName:D}}),Po={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function SE(s,D){const[T,B]=s<D?[s,D]:[D,s];return{x:`${T*100}%`,width:`${(B-T)*100}%`,leadingX:`${D*100}%`}}class CE extends o.PureComponent{constructor(D){super(D),this._setRoot=T=>{this._root=T},this._getDraggingBounds=T=>{if(!this._root)throw new Error("invalid state");const{left:B,width:W}=this._root.getBoundingClientRect(),[G,Y]=this.props.viewRange.time.current;let q=1,se=0;return T===Po.SHIFT_START?q=Y:T===Po.SHIFT_END&&(se=G),{clientXLeft:B,maxValue:q,minValue:se,width:W}},this._handleReframeMouseMove=({value:T})=>{this.props.updateNextViewRangeTime({cursor:T})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:T})=>{const B=T,{time:W}=this.props.viewRange,Y={reframe:{anchor:W.reframe?W.reframe.anchor:B,shift:B}};this.props.updateNextViewRangeTime(Y)},this._handleReframeDragEnd=({manager:T,value:B})=>{const{time:W}=this.props.viewRange,G=W.reframe?W.reframe.anchor:B,[Y,q]=B<G?[B,G]:[G,B];T.resetBounds(),this.props.updateViewRangeTime(Y,q,"minimap")},this._handleScrubberEnterLeave=({type:T})=>{const B=T===ol.EUpdateTypes.MouseEnter;this.setState({preventCursorLine:B})},this._handleScrubberDragUpdate=({event:T,tag:B,type:W,value:G})=>{W===ol.EUpdateTypes.DragStart&&T.stopPropagation(),B===Po.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:G}):B===Po.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:G})},this._handleScrubberDragEnd=({manager:T,tag:B,value:W})=>{const[G,Y]=this.props.viewRange.time.current;let q;if(B===Po.SHIFT_START)q=[W,Y];else if(B===Po.SHIFT_END)q=[G,W];else throw new Error("bad state");T.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(q[0],q[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new ol.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:Po.REFRAME}),this._draggerStart=new ol.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:Po.SHIFT_START}),this._draggerEnd=new ol.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:Po.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(D,T){const B=Vf(this.props.theme),W=SE(D,T);return[o.createElement("rect",{key:"fill",className:Co()(B.ViewingLayerDraggedShift,B.ViewingLayerDrag),x:W.x,y:"0",width:W.width,height:this.props.height-2}),o.createElement("rect",{key:"edge",className:Co()(B.ViewingLayerDrag),x:W.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:D,viewRange:T,numTicks:B,theme:W}=this.props,{preventCursorLine:G}=this.state,{current:Y,cursor:q,shiftStart:se,shiftEnd:ce,reframe:fe}=T.time,Se=se!=null||ce!=null||fe!=null,[_e,Ae]=Y;let He=0;_e&&(He=_e*100);let tt=100;Ae&&(tt=100-Ae*100);let $e;!Se&&q!=null&&!G&&($e=`${q*100}%`);const mt=Vf(W);return o.createElement("div",{"aria-hidden":!0,className:mt.ViewingLayer,style:{height:D}},(_e!==0||Ae!==1)&&o.createElement(Z.zx,{onClick:this._resetTimeZoomClickHandler,className:Co()(mt.ViewingLayerResetZoom,mt.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),o.createElement("svg",{height:D,className:mt.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},He>0&&o.createElement("rect",{x:0,y:0,height:"100%",width:`${He}%`,className:mt.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),tt>0&&o.createElement("rect",{x:`${100-tt}%`,y:0,height:"100%",width:`${tt}%`,className:mt.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),o.createElement(bE,{numTicks:B}),$e&&o.createElement("line",{className:mt.ViewingLayerCursorGuide,x1:$e,y1:"0",x2:$e,y2:D-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),se!=null&&this._getMarkers(_e,se),ce!=null&&this._getMarkers(Ae,ce),o.createElement($f,{isDragging:se!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:_e||0}),o.createElement($f,{isDragging:ce!=null,position:Ae||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),fe!=null&&this._getMarkers(fe.anchor,fe.shift)),Se&&o.createElement("div",{className:mt.ViewingLayerFullOverlay}))}}const DE=(0,Q.HE)(CE),Kf=60,kf=4;function PE(s){return{valueOffset:s.relativeStartTime,valueWidth:s.duration,serviceName:s.process.serviceName}}function ME(s){return s.spans.map(PE)}const TE=(0,Mi.Z)(ME);class zf extends o.PureComponent{render(){const{height:D,trace:T,viewRange:B,updateNextViewRangeTime:W,updateViewRangeTime:G}=this.props;if(!T)return o.createElement("div",null);const Y=TE(T);return o.createElement("div",{className:Co()(qd.GL,qd.H3)},o.createElement(yE,{numTicks:kf,duration:T.duration}),o.createElement("div",{className:qd.WW},o.createElement(pE,{valueWidth:T.duration,items:Y}),o.createElement(DE,{viewRange:B,numTicks:kf,height:D||Kf,updateViewRangeTime:G,updateNextViewRangeTime:W})))}}zf.defaultProps={height:Kf};var il=e(83568);function IE({splitOpenFn:s,traceToLogsOptions:D,traceToMetricsOptions:T,dataFrame:B,createFocusSpanLink:W,trace:G}){if(!B)return;let Y=UE(G);const q=B.fields.some(ce=>!!ce.config.links?.length),se=RE(s,B.fields[0],D,T,W,Y);return function(fe){let Se=se(fe);if(q){Y={...Y,...Hf(fe)};const _e=B.fields.filter(Ae=>!!Ae.config.links?.length);try{let Ae=[];_e.forEach(tt=>{const $e=(0,tl.a_)({field:tt,rowIndex:fe.dataFrameRowIndex,splitOpenFn:s,range:eu(fe),dataFrame:B,vars:Y});Ae=Ae.concat($e)});const He=Ae.map(tt=>({title:tt.title,href:tt.href,onClick:tt.onClick,content:o.createElement(Re.J,{name:"link",title:tt.title||"Link"}),field:tt.origin,type:il.u.Unknown}));Se.push.apply(Se,He)}catch(Ae){return console.error(Ae),Se}}return Se}}const OE=["cluster","hostname","namespace","pod","service.name","service.namespace"].map(s=>({key:s,value:s.includes(".")?s.replace(".","_"):void 0}));function RE(s,D,T,B,W,G){let Y;T?.datasourceUid&&(Y=(0,rc.ak)().getInstanceSettings(T.datasourceUid));const q=Y?.type==="grafana-splunk-datasource";let se;return B?.datasourceUid&&(se=(0,rc.ak)().getInstanceSettings(B.datasourceUid)),function(fe){G={...G,...Hf(fe)};const Se=[];let _e,Ae="";if(Y&&T){const He=T.customQuery?T.query:void 0,tt=T.tags&&T.tags.length>0?T.tags:OE;switch(Y?.type){case"loki":Ae=ll(fe,tt),_e=AE(fe,T,Ae,He);break;case"grafana-splunk-datasource":Ae=ll(fe,tt,{joinBy:" "}),_e=wE(fe,T,Ae,He);break;case"elasticsearch":case"grafana-opensearch-datasource":Ae=ll(fe,tt,{labelValueSign:":",joinBy:" AND "}),_e=LE(fe,T,Ae,He);break;case"grafana-falconlogscale-datasource":Ae=ll(fe,tt,{joinBy:" OR "}),_e=NE(fe,T,Ae,He);break;case"googlecloud-logging-datasource":Ae=ll(fe,tt,{joinBy:" AND "}),_e=BE(fe,T,Ae,He)}if(_e){const $e={title:Y.name,url:"",internal:{datasourceUid:Y.uid,datasourceName:Y.name,query:_e}};if(G={...G,__tags:{text:"Tags",value:Ae}},(0,tl.lt)($e.internal.query,G).allVariablesDefined){const mt=(0,Xd._)({link:$e,internalLink:$e.internal,scopedVars:G,range:eu(fe,{startMs:T.spanStartTimeShift?Fr.intervalToMs(T.spanStartTimeShift):0,endMs:T.spanEndTimeShift?Fr.intervalToMs(T.spanEndTimeShift):0},q),field:{},onClickFn:s,replaceVariables:(0,Ce.J)().replace.bind((0,Ce.J)())});Se.push({href:mt.href,title:"Related logs",onClick:mt.onClick,content:o.createElement(Re.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:D,type:il.u.Logs})}}}if(se&&B?.queries)for(const He of B.queries){const tt=FE(He,B?.tags||[],fe),$e={title:se.name,url:"",internal:{datasourceUid:se.uid,datasourceName:se.name,query:{expr:tt,refId:"A"}}},mt=(0,Xd._)({link:$e,internalLink:$e.internal,scopedVars:{},range:eu(fe,{startMs:B.spanStartTimeShift?Fr.intervalToMs(B.spanStartTimeShift):-12e4,endMs:B.spanEndTimeShift?Fr.intervalToMs(B.spanEndTimeShift):12e4}),field:{},onClickFn:s,replaceVariables:(0,Ce.J)().replace.bind((0,Ce.J)())});Se.push({title:He?.name,href:mt.href,onClick:mt.onClick,content:o.createElement(Re.J,{name:"chart-line",title:"Explore metrics for this span"}),field:D,type:il.u.Metrics})}if(fe.references&&W)for(const He of fe.references){if(He.refType==="CHILD_OF")continue;const tt=W(He.traceID,He.spanID);Se.push({href:tt.href,title:He.span?He.span.operationName:"View linked span",content:o.createElement(Re.J,{name:"link",title:"View linked span"}),onClick:tt.onClick,field:tt.origin,type:il.u.Traces})}if(fe.subsidiarilyReferencedBy&&W)for(const He of fe.subsidiarilyReferencedBy){const tt=W(He.traceID,He.spanID);Se.push({href:tt.href,title:He.span?He.span.operationName:"View linked span",content:o.createElement(Re.J,{name:"link",title:"View linked span"}),onClick:tt.onClick,field:tt.origin,type:il.u.Traces})}return Se}}function AE(s,D,T,B){const{filterByTraceID:W,filterBySpanID:G}=D;if(B)return{expr:B,refId:""};if(!T)return;let Y="{${__tags}}";return W&&s.traceID&&(Y+=' |="${__span.traceId}"'),G&&s.spanID&&(Y+=' |="${__span.spanId}"'),{expr:Y,refId:""}}function LE(s,D,T,B){const{filterByTraceID:W,filterBySpanID:G}=D;if(B)return{query:B,refId:"",metrics:[{id:"1",type:"logs"}]};let Y=[];return G&&s.spanID&&Y.push('"${__span.spanId}"'),W&&s.traceID&&Y.push('"${__span.traceId}"'),T&&Y.push("${__tags}"),{query:Y.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function wE(s,D,T,B){const{filterByTraceID:W,filterBySpanID:G}=D;if(B)return{query:B,refId:""};let Y="";return T&&(Y+="${__tags}"),W&&s.traceID&&(Y+=' "${__span.traceId}"'),G&&s.spanID&&(Y+=' "${__span.spanId}"'),{query:Y,refId:""}}function BE(s,D,T,B){const{filterByTraceID:W,filterBySpanID:G}=D;if(B)return{query:B,refId:""};let Y=[];return G&&s.spanID&&Y.push('"${__span.spanId}"'),W&&s.traceID&&Y.push('"${__span.traceId}"'),T&&Y.push("${__tags}"),{query:Y.join(" AND "),refId:""}}function NE(s,D,T,B){const{filterByTraceID:W,filterBySpanID:G}=D;if(B)return{lsql:B,refId:""};if(!T)return;let Y="${__tags}";return W&&s.traceID&&(Y+=' or "${__span.traceId}"'),G&&s.spanID&&(Y+=' or "${__span.spanId}"'),{lsql:Y,refId:""}}function ll(s,D,{labelValueSign:T="=",joinBy:B=", "}={}){return[...s.process.tags,...s.tags,{key:"spanId",value:s.spanID},{key:"traceId",value:s.traceID},{key:"name",value:s.operationName},{key:"duration",value:s.duration}].map(W=>{const G=D.find(Y=>Y.key===W.key);if(G)return`${G.value?G.value:G.key}${T}"${W.value}"`}).filter(W=>!!W).join(B)}function eu(s,D={startMs:0,endMs:0},T=!1){const B=Math.floor(s.startTime/1e3+D.startMs),W=(0,Tt.CQ)(B),G=(s.startTime+s.duration)/1e3;let Y=Math.floor(G+D.endMs);T&&Y-B<1e3?Y=B+1e3:B===Y&&Y++;const q=(0,Tt.CQ)(Y);return{from:W,to:q,raw:{from:W,to:q}}}function FE(s,D=[],T){if(!s.query)return`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${T.process.serviceName}"}[5m])) by (le))`;let B=s.query;if(D.length&&B.indexOf("$__tags")!==-1){const W=[...T.process.tags,...T.tags],Y=D.reduce((q,se)=>{const ce=W.find(fe=>fe.key===se.key)?.value;return ce&&q.push(`${se.value?se.value:se.key}="${ce}"`),q},[])?.join(", ");B=B.replace(/\$__tags/g,Y)}return B}function UE(s){return{__trace:{text:"Trace",value:{duration:s.duration,name:s.traceName,traceId:s.traceID}}}}function Hf(s){const D={};for(const T of s.process.tags)D[T.key]=T.value;for(const T of s.tags)D[T.key]=T.value;return{__span:{text:"Span",value:{spanId:s.spanID,traceId:s.traceID,duration:s.duration,name:s.operationName,tags:D}}}}function WE(){const[s,D]=(0,o.useState)(new Set),T=(0,o.useCallback)(function(se){if(s.size===0)return;let ce=-1,fe=!0;const Se=se.reduce((_e,Ae)=>(Ae.depth<=ce&&(fe=!0),fe&&_e.has(Ae.spanID)&&(_e.delete(Ae.spanID),fe=!1,ce=Ae.depth),_e),new Set(s));D(Se)},[s]),B=(0,o.useCallback)(function(se){if(Gf(se,s))return;let ce;const fe=se.reduce((Se,_e)=>(ce&&_e.depth<=ce.depth?(Se.add(ce.spanID),_e.hasChildren&&(ce=_e)):_e.hasChildren&&!Se.has(_e.spanID)&&(ce=_e),Se),new Set(s));ce&&fe.add(ce.spanID),D(fe)},[s]),W=(0,o.useCallback)(function(){D(new Set)},[]),G=(0,o.useCallback)(function(se){if(Gf(se,s))return;const ce=se.reduce((fe,Se)=>(Se.hasChildren&&fe.add(Se.spanID),fe),new Set);D(ce)},[s]),Y=(0,o.useCallback)(function(se){const ce=new Set(s);s.has(se)?ce.delete(se):ce.add(se),D(ce)},[s]);return{childrenHiddenIDs:s,expandOne:T,collapseOne:B,expandAll:W,collapseAll:G,childrenToggle:Y}}function Gf(s,D){return s.filter(B=>B.hasChildren).length===D.size}function _E(s){const[D,T]=(0,o.useState)(new Map);(0,o.useEffect)(()=>{T(new Map)},[s,T]);const B=(0,o.useCallback)(function(q){const se=new Map(D);se.has(q)?se.delete(q):se.set(q,new fc.DetailState),T(se)},[D]),W=(0,o.useCallback)(function(q,se){const ce=D.get(q);if(!ce)return;const fe=ce.toggleLogItem(se),Se=new Map(D);return Se.set(q,fe),T(Se)},[D]),G=(0,o.useCallback)(function(q,se){const ce=D.get(q);if(!ce)return;const fe=ce.toggleReferenceItem(se),Se=new Map(D);return Se.set(q,fe),T(Se)},[D]);return{detailStates:D,toggleDetail:B,detailLogItemToggle:W,detailLogsToggle:(0,o.useCallback)(Y=>Oi("logs",D,T)(Y),[D]),detailWarningsToggle:(0,o.useCallback)(Y=>Oi("warnings",D,T)(Y),[D]),detailStackTracesToggle:(0,o.useCallback)(Y=>Oi("stackTraces",D,T)(Y),[D]),detailReferenceItemToggle:G,detailReferencesToggle:(0,o.useCallback)(Y=>Oi("references",D,T)(Y),[D]),detailProcessToggle:(0,o.useCallback)(Y=>Oi("process",D,T)(Y),[D]),detailTagsToggle:(0,o.useCallback)(Y=>Oi("tags",D,T)(Y),[D])}}function Oi(s,D,T){return B=>{const W=D.get(B);if(!W)return;let G;s==="tags"?G=W.toggleTags():s==="process"?G=W.toggleProcess():s==="warnings"?G=W.toggleWarnings():s==="references"?G=W.toggleReferences():s==="stackTraces"?G=W.toggleStackTraces():G=W.toggleLogs();const Y=new Map(D);Y.set(B,G),T(Y)}}function $E(){const[s,D]=(0,o.useState)(new Set),T=(0,o.useCallback)(function(G){D(Y=>{const q=new Set(Y);return q.add(G),q})},[]),B=(0,o.useCallback)(function(G){D(Y=>{const q=new Set(Y);return q.delete(G),q})},[]);return{hoverIndentGuideIds:s,addHoverIndentGuideId:T,removeHoverIndentGuideId:B}}var VE=e(33914);function KE(){const[s,D]=(0,o.useState)({time:{current:[0,1]}}),T=(0,o.useCallback)(function(G){D(Y=>{const q={...Y.time,...G};return{...Y,time:q}})},[]),B=(0,o.useCallback)(function(G,Y){const se={current:[G,Y]};D(ce=>({...ce,time:se}))},[]);return{viewRange:s,updateViewRangeTime:B,updateNextViewRangeTime:T}}const kE=s=>({noDataMsg:(0,F.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${s.typography.h4.fontSize};
    color: ${s.colors.text.secondary};
  `});function zE(s){const{traceProp:D,datasource:T,topOfViewRef:B,topOfViewRefType:W,exploreId:G}=s,{detailStates:Y,toggleDetail:q,detailLogItemToggle:se,detailLogsToggle:ce,detailProcessToggle:fe,detailReferencesToggle:Se,detailReferenceItemToggle:_e,detailTagsToggle:Ae,detailWarningsToggle:He,detailStackTracesToggle:tt}=_E(s.dataFrames[0]),{removeHoverIndentGuideId:$e,addHoverIndentGuideId:mt,hoverIndentGuideIds:Wt}=$E(),{viewRange:wt,updateViewRangeTime:Ot,updateNextViewRangeTime:on}=KE(),{expandOne:Vt,collapseOne:sn,childrenToggle:Cn,collapseAll:Dn,childrenHiddenIDs:En,expandAll:kn}=WE(),{search:bn,setSearch:ra,spanFilterMatches:Rn}=(0,VE.Rx)(D?.spans),[Sn,Jn]=(0,o.useState)(""),[Kn,wa]=(0,Xt.Z)(!1),[Fa,Oa]=(0,o.useState)(!1),[Aa,Gn]=(0,o.useState)(100),wn=(0,Q.wW)(kE),[ea,ua]=(0,o.useState)(.25),[Ma,Ba]=HE({refId:s.dataFrames[0]?.refId,exploreId:s.exploreId,datasource:T,splitOpenFn:s.splitOpenFn}),ka=(0,o.useMemo)(()=>({childrenHiddenIDs:En,detailStates:Y,hoverIndentGuideIds:Wt,spanNameColumnWidth:ea,traceID:s.traceProp?.traceID}),[En,Y,Wt,ea,s.traceProp?.traceID]),Ua=(0,rc.ak)().getInstanceSettings(T?.name),Vn=(0,sE.p1)(Ua?.jsonData),_n=Ua?.jsonData?.tracesToMetrics,Xn=Ua?.jsonData,Ca=(0,o.useMemo)(()=>IE({splitOpenFn:s.splitOpenFn,traceToLogsOptions:Vn,traceToMetricsOptions:_n,dataFrame:s.dataFrames[0],createFocusSpanLink:Ba,trace:D}),[s.splitOpenFn,Vn,_n,s.dataFrames,Ba,D]),ya=(0,z.useSelector)(Cs=>(0,rE.Z)(Cs.user)),Va=T?T?.type:"unknown",Ka=s.scrollElement?s.scrollElement:document.getElementsByClassName(s.scrollElementClass??"")[0];return o.createElement(o.Fragment,null,s.dataFrames?.length&&D?o.createElement(o.Fragment,null,o.createElement(fc.TracePageHeader,{trace:D,data:s.dataFrames[0],timeZone:ya,search:bn,setSearch:ra,showSpanFilters:Kn,setShowSpanFilters:wa,showSpanFilterMatchesOnly:Fa,setShowSpanFilterMatchesOnly:Oa,setFocusedSpanIdForSearch:Jn,spanFilterMatches:Rn,datasourceType:Va,setHeaderHeight:Gn,app:G?Ci.zj.Explore:Ci.zj.Unknown}),o.createElement(zf,{trace:D,viewRange:wt,updateNextViewRangeTime:on,updateViewRangeTime:Ot}),o.createElement(fc.TraceTimelineViewer,{findMatchesIDs:Rn,trace:D,datasourceType:Va,spanBarOptions:Xn?.spanBar,traceTimeline:ka,updateNextViewRangeTime:on,updateViewRangeTime:Ot,viewRange:wt,timeZone:ya,setSpanNameColumnWidth:ua,collapseAll:Dn,collapseOne:sn,expandAll:kn,expandOne:Vt,childrenToggle:Cn,detailLogItemToggle:se,detailLogsToggle:ce,detailWarningsToggle:He,detailStackTracesToggle:tt,detailReferencesToggle:Se,detailReferenceItemToggle:_e,detailProcessToggle:fe,detailTagsToggle:Ae,detailToggle:q,addHoverIndentGuideId:mt,removeHoverIndentGuideId:$e,linksGetter:()=>[],createSpanLink:Ca,scrollElement:Ka,focusedSpanId:Ma,focusedSpanIdForSearch:Sn,showSpanFilterMatchesOnly:Fa,createFocusSpanLink:Ba,topOfViewRef:B,topOfViewRefType:W,headerHeight:Aa})):o.createElement("div",{className:wn.noDataMsg},"No data"))}function HE(s){const D=(0,z.useSelector)(q=>q.explore.panes[s.exploreId]?.panelsState.trace),T=D?.spanId,B=(0,z.useDispatch)(),W=q=>B((0,oE.km)(s.exploreId,"trace",{...D,spanId:q})),G=(0,z.useSelector)(q=>q.explore.panes[s.exploreId]?.queries.find(se=>se.refId===s.refId));return[T,(q,se)=>{const ce={title:"Deep link to this span",url:"",internal:{datasourceUid:s.datasource?.uid,datasourceName:s.datasource?.name,query:{...G,query:q},panelsState:{trace:{spanId:se}}}},fe=G?.queryType==="traceql"&&G.query===q;return(0,Xd._)({link:ce,internalLink:ce.internal,scopedVars:{},range:{},field:{},onClickFn:fe?()=>W(T===se?void 0:se):s.splitOpenFn?()=>s.splitOpenFn({datasourceUid:s.datasource?.uid,queries:[{...G,query:q}],panelsState:{trace:{spanId:se}}}):void 0,replaceVariables:(0,Ce.J)().replace.bind((0,Ce.J)())})}]}var GE=e(42583);function jE(s){if(!s)return null;let D=s.fields.length===1?s.fields[0].values[0]:YE(s);return(0,fc.transformTraceData)(D)}function YE(s){const D=new bi.U(s),T={};for(let B=0;B<D.length;B++){const W=D.get(B);T[W.spanID]||(T[W.spanID]={serviceName:W.serviceName,tags:W.serviceTags})}return{traceID:D.get(0).traceID,processes:T,spans:D.toArray().map((B,W)=>{const G=[];return B.parentSpanID&&G.push({refType:"CHILD_OF",spanID:B.parentSpanID,traceID:B.traceID}),B.references&&G.push(...B.references.map(Y=>({refType:"FOLLOWS_FROM",...Y}))),{...B,duration:B.duration*1e3,startTime:B.startTime*1e3,processID:B.spanID,flags:0,references:G,logs:B.logs?.map(Y=>({...Y,timestamp:Y.timestamp*1e3}))||[],dataFrameRowIndex:W}})}}const jf={wrapper:(0,F.css)`
    height: 100%;
    overflow: scroll;
  `},QE=({data:s})=>{const D=(0,o.createRef)(),T=(0,o.useMemo)(()=>jE(s.series[0]),[s.series]),B=(0,ft.Z)(async()=>await(0,aE.F)().get(s.request?.targets[0].datasource?.uid));return!s||!s.series.length||!T?o.createElement("div",{className:"panel-empty"},o.createElement("p",null,"No data found in response")):o.createElement("div",{className:jf.wrapper},o.createElement("div",{ref:D}),o.createElement(zE,{dataFrames:s.series,scrollElementClass:jf.wrapper,traceProp:T,queryResponse:s,datasource:B.value,topOfViewRef:D,topOfViewRefType:GE.l4.Panel}))},ZE=new w.c(QE);var JE=e(47125);const XE=({data:s,timeRange:D,timeZone:T,width:B,height:W,options:G,fieldConfig:Y,replaceVariables:q,id:se})=>{const{sync:ce,dataLinkPostProcessor:fe}=(0,nr.R9)(),Se=G.xField??s.series[0].fields.find(He=>He.type===Yn.fS.number)?.name,_e=(He,tt,$e)=>(tt={...tt,x:JE.Ls.get(io.mi.byName).get(Se)},(0,Wl.Rn)(He,tt)),Ae=(0,o.useMemo)(()=>{if(s.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:s.series};let He=s.series,tt;if(G.xField){if(tt=(0,Dr.findFieldIndex)(He[0],G.xField),tt==null)return{warning:"Unable to find field: "+G.xField,frames:s.series}}else if(tt=He[0].fields.findIndex($e=>$e.type===Yn.fS.number),tt===-1)return{warning:"No numeric fields found for X axis",frames:He};if(tt!=null){const $e=He[0].fields[tt];if($e.type===Yn.fS.number&&!(0,fi.lP)($e.values))return{warning:"Values must be in ascending order",frames:He}}return{frames:kl(He,V.config.theme2,void 0,tt)}},[s.series,G.xField]);return Ae.warning||!Ae.frames?o.createElement(no.Z,{panelId:se,fieldConfig:Y,data:s,message:Ae.warning,needsNumberField:!0}):o.createElement(zi.p,{frames:Ae.frames,structureRev:s.structureRev,timeRange:D,timeZone:T,width:B,height:W,legend:G.legend,options:G,preparePlotFrame:_e},(He,tt)=>(tt.fields.some($e=>!!$e.config.links?.length)&&(tt=Qi(tt,Ae.frames,q,T,fe)),o.createElement(o.Fragment,null,o.createElement(Nf.C,{config:He}),G.tooltip.mode===Lt.f3.None||o.createElement(ui.i,{frames:Ae.frames,data:tt,config:He,mode:G.tooltip.mode,sortOrder:G.tooltip.sort,sync:ce,timeZone:T}),o.createElement(Xo,{data:tt,frames:Ae.frames,config:He,timeZone:T,replaceVariables:q,defaultItems:[]}))))};class qE{getSuggestionsForData(D){const{dataSummary:T}=D;return T.numberFieldCount<2||T.rowCountTotal<2||T.rowCountTotal<2?void 0:D.getListAppender({name:Ga.y.LineChart,pluginId:"trend",options:{legend:{calcs:[],displayMode:Lt.jK.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:W=>{W.fieldConfig?.defaults.custom?.drawStyle!==Lt.l8.Bars&&(W.fieldConfig.defaults.custom.lineWidth=Math.max(W.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const eb=new w.c(XE).useFieldConfig(Pr(yo,!1)).setPanelOptions(s=>{const D=["X Axis"];s.addFieldNamePicker({path:"xField",name:"X Field",description:"An increasing numeric value",category:D,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:T=>T.type===Yn.fS.number}}),Lo.L(s),Hr.J(s)}).setSuggestionsSupplier(new qE);var tb=e(46350);const nb=new w.c(tb.c).setNoPadding();var ab=(s=>(s[s.NoData=0]="NoData",s[s.BadFrameSelection=1]="BadFrameSelection",s[s.XNotFound=2]="XNotFound",s))(ab||{});function gc(s){return s.type===Yn.fS.number}function sb(s,D){if(!D||!D.length)return{error:0};s||(s={frame:0});let T=D[s.frame??0];if(!T)return{error:1};let B=-1;for(let q=0;q<T.fields.length;q++){const se=T.fields[q];if(s.x&&s.x===(0,os.CZ)(se,T,D)){B=q;break}if(gc(se)&&!s.x){B=q;break}}let W=!1;const G=T.fields[B],Y=[G];for(const q of T.fields)if(q.type===Yn.fS.time&&(W=!0),!(q===G||!gc(q))){if(s.exclude){const se=(0,os.CZ)(q,T,D);if(s.exclude.includes(se))continue}Y.push(q)}return{x:G,fields:{x:Yf(G),y:rb(G)},frame:{...T,fields:Y},hasData:T.fields.length>0,hasTime:W}}function Yf(s){return s?D=>s===D||!!(s.state&&s.state===D.state):()=>!1}function rb(s){if(!s)return()=>!1;const D=Yf(s);return T=>!D(T,void 0,void 0)}const ob=({value:s,onChange:D,context:T})=>{const B=(0,o.useMemo)(()=>T?.data?.length?T.data.map((q,se)=>({value:se,label:(0,os.nf)(q,se)})):[{value:0,label:"First result"}],[T.data]),W=(0,o.useMemo)(()=>sb(s,T.data),[T.data,s]),G=(0,o.useMemo)(()=>{const q={label:"?",value:void 0},se={numberFields:[q],yFields:[],xAxis:s?.x?{label:`${s.x} (Not found)`,value:s.x}:q},ce=T.data?T.data[s?.frame??0]:void 0;if(ce){const fe=W.x?(0,os.CZ)(W.x,W.frame,T.data):void 0;for(let Se of ce.fields)if(gc(Se)){const _e=(0,os.CZ)(Se,ce,T.data),Ae={label:_e,value:_e};se.numberFields.push(Ae),q.label==="?"&&(q.label=`${_e} (First)`),s?.x&&_e===s.x&&(se.xAxis=Ae),fe!==_e&&se.yFields.push({label:_e,value:s?.exclude?.includes(_e)})}}return se},[W,T.data,s]),Y=(0,Q.wW)(ib);return T.data?o.createElement("div",null,o.createElement(Zs.g,{label:"Data"},o.createElement(bt.Ph,{options:B,value:B.find(q=>q.value===s?.frame)??B[0],onChange:q=>{D({...s,frame:q.value})}})),o.createElement(Zs.g,{label:"X Field"},o.createElement(bt.Ph,{options:G.numberFields,value:G.xAxis,onChange:q=>{D({...s,x:q.value})}})),o.createElement(Zs.g,{label:"Y Fields"},o.createElement("div",null,G.yFields.map(q=>o.createElement("div",{key:q.label,className:Y.row},o.createElement(ls.h,{name:q.value?"eye-slash":"eye",onClick:()=>{const se=s?.exclude?[...s.exclude]:[];let ce=se.indexOf(q.label);ce<0?se.push(q.label):se.splice(ce,1),D({...s,exclude:se})},tooltip:q.value?"Disable":"Enable"}),q.label))))):o.createElement("div",null,"No data...")},ib=s=>({sorter:(0,F.css)`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:(0,F.css)`
    padding: ${s.spacing(.5,1)};
    border-radius: ${s.shape.radius.default};
    background: ${s.colors.background.secondary};
    min-height: ${s.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${s.components.input.borderColor};
  `});var lb=e(93114),Qf=e(473),tu=(s=>(s.Auto="auto",s.Manual="manual",s))(tu||{}),Mo=(s=>(s.Lines="lines",s.Points="points",s.PointsAndLines="points+lines",s))(Mo||{});const jx={exclude:[]},nu={label:Lt.Jp.Auto,show:"points"},Yx={series:[]},cb=({value:s,onChange:D,context:T})=>{const[B,W]=(0,o.useState)(0),G=(0,Q.wW)(db),Y=(fe,Se,_e)=>{D(s.map((Ae,He)=>He===Se?{...Ae,[_e]:fe}:Ae))},q=()=>{D([...s,{pointColor:{},pointSize:nu.pointSize}]),W(s.length)};(0,o.useEffect)(()=>{s?.length||q()},[]);const se=fe=>{D(s.filter((Se,_e)=>_e!==fe))},ce=fe=>fe===B?`${G.row} ${G.sel}`:G.row;return o.createElement(o.Fragment,null,o.createElement(Z.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:q,className:G.marginBot},"Add series"),o.createElement("div",{className:G.marginBot},s.map((fe,Se)=>o.createElement("div",{key:`series/${Se}`,className:ce(Se),onMouseDown:()=>W(Se)},o.createElement(lb.X,{name:fe.name??`Series ${Se+1}`,onChange:_e=>Y(_e,Se,"name")}),o.createElement(ls.h,{name:"trash-alt",title:"remove",className:(0,F.cx)(G.actionIcon),onClick:()=>se(Se),tooltip:"Delete series"})))),B>=0&&s[B]&&o.createElement(o.Fragment,null,o.createElement("div",{key:`series/${B}`},o.createElement(Zs.g,{label:"X Field"},o.createElement(Hd.b,{value:s[B].x??"",context:T,onChange:fe=>Y(fe,B,"x"),item:{}})),o.createElement(Zs.g,{label:"Y Field"},o.createElement(Hd.b,{value:s[B].y??"",context:T,onChange:fe=>Y(fe,B,"y"),item:{}})),o.createElement(Zs.g,{label:"Point color"},o.createElement(Qf.Lm,{value:s[B].pointColor,context:T,onChange:fe=>Y(fe,B,"pointColor"),item:{}})),o.createElement(Zs.g,{label:"Point size"},o.createElement(Qf.cL,{value:s[B].pointSize,context:T,onChange:fe=>Y(fe,B,"pointSize"),item:{settings:{min:1,max:100}}})))))},db=s=>({marginBot:(0,F.css)`
    margin-bottom: 20px;
  `,row:(0,F.css)`
    padding: ${s.spacing(.5,1)};
    border-radius: ${s.shape.radius.default};
    background: ${s.colors.background.secondary};
    min-height: ${s.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${s.components.input.borderColor};
    &:hover {
      border: 1px solid ${s.components.input.borderHover};
    }
  `,sel:(0,F.css)`
    border: 1px solid ${s.colors.primary.border};
    &:hover {
      border: 1px solid ${s.colors.primary.border};
    }
  `,actionIcon:(0,F.css)`
    color: ${s.colors.text.secondary};
    &:hover {
      color: ${s.colors.text};
    }
  `});var Zf=e(7763);const ub=({allSeries:s,data:D,manualSeriesConfigs:T,seriesMapping:B,rowIndex:W,hoveredPointIndex:G,options:Y})=>{const q=(0,Q.wW)(mb);if(!s||W==null)return null;const se=s[G],ce=se.frame(D),fe=se.x(ce),Se=se.y(ce);let _e;if(Se.getLinks){const $e=Se.values[W],mt=Se.display?Se.display($e):{text:`${$e}`,numeric:+$e};_e=Se.getLinks({calculatedValue:mt,valueRowIndex:W}).map(Wt=>(Wt.title||(Wt.title=(0,tl.Rb)(Wt.href)),Wt))}let Ae=ce.fields.filter($e=>$e!==fe&&$e!==Se),He=null,tt=null;if(B===tu.Manual&&T){const $e=T[G]?.pointColor?.field??"",mt=T[G]?.pointSize?.field??"",Wt=$e?(0,Dr.findField)(ce,$e):void 0,wt=mt?(0,Dr.findField)(ce,mt):void 0;tt={colorFacetFieldName:$e,sizeFacetFieldName:mt,colorFacetValue:Wt?.values[W],sizeFacetValue:wt?.values[W]},Ae=Ae.filter(Ot=>Ot!==Wt&&Ot!==wt)}return He={name:(0,os.CZ)(Se,ce),val:Se.values[W],field:Se,color:se.pointColor(ce)},o.createElement(o.Fragment,null,o.createElement("table",{className:q.infoWrap},o.createElement("tr",null,o.createElement("th",{colSpan:2,style:{backgroundColor:He.color}})),o.createElement("tbody",null,o.createElement("tr",null,o.createElement("th",null,(0,os.CZ)(fe,ce)),o.createElement("td",null,au(fe,fe.values[W]))),o.createElement("tr",null,o.createElement("th",null,He.name,":"),o.createElement("td",null,au(He.field,He.val))),tt!==null&&tt.colorFacetFieldName&&o.createElement("tr",null,o.createElement("th",null,tt.colorFacetFieldName,":"),o.createElement("td",null,tt.colorFacetValue)),tt!==null&&tt.sizeFacetFieldName&&o.createElement("tr",null,o.createElement("th",null,tt.sizeFacetFieldName,":"),o.createElement("td",null,tt.sizeFacetValue)),Ae.map(($e,mt)=>o.createElement("tr",{key:mt},o.createElement("th",null,(0,os.CZ)($e,ce),":"),o.createElement("td",null,au($e,$e.values[W])))),_e&&_e.length>0&&o.createElement("tr",null,o.createElement("td",{colSpan:2},o.createElement(dr.wc,null,_e.map(($e,mt)=>o.createElement(Z.Qj,{key:mt,icon:"external-link-alt",target:$e.target,href:$e.href,onClick:$e.onClick,fill:"text",style:{width:"100%"}},$e.title))))))))};function au(s,D){return s.display?(0,Ts.zc)(s.display(D)):`${D}`}const mb=s=>({infoWrap:(0,F.css)`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${s.typography.fontWeightMedium};
      padding: ${s.spacing(.25,2)};
    }
  `,highlight:(0,F.css)`
    background: ${s.colors.action.hover};
  `,xVal:(0,F.css)`
    font-weight: ${s.typography.fontWeightBold};
  `,icon:(0,F.css)`
    margin-right: ${s.spacing(1)};
    vertical-align: middle;
  `}),Jf=5;function fb(s){return{standardOptions:{[Us.qb.Min]:{hideFromDefaults:!0},[Us.qb.Max]:{hideFromDefaults:!0},[Us.qb.Unit]:{hideFromDefaults:!0},[Us.qb.Decimals]:{hideFromDefaults:!0},[Us.qb.NoValue]:{hideFromDefaults:!0},[Us.qb.DisplayName]:{hideFromDefaults:!0},[Us.qb.Thresholds]:{hideFromDefaults:!0},[Us.qb.Mappings]:{hideFromDefaults:!0},[Us.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:us.S.PaletteClassic}}},useCustomConfig:D=>{D.addRadio({path:"show",name:"Show",defaultValue:s.show,settings:{options:[{label:"Points",value:Mo.Points},{label:"Lines",value:Mo.Lines},{label:"Both",value:Mo.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:s.pointSize?.fixed??Jf,settings:{min:1,max:100,step:1},showIf:T=>T.show!==Mo.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:T=>T.show!==Mo.Points,editor:Ki,override:Ki,process:to.kG,shouldApply:T=>T.type===Yn.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:s.lineWidth,settings:{min:0,max:10,step:1},showIf:T=>T.show!==Mo.Points}),xl.r(D,s),Ao.B(D)}}}function gb(s,D,T,B,W,G){let Y,q;try{Y=pb(s,D()),q=hb(D,Y,T,B,W,G)}catch(se){let ce="Unknown error in prepScatter";return typeof se=="string"?ce=se:se instanceof Error&&(ce=se.message),{error:ce,series:[]}}return{series:Y,builder:q}}function Xf(s,D,T,B,W,G){const Y=D[T],q=Y.fields[W];let se=q.state??{};se.seriesIndex=s,q.state=se;let ce=G.pointColorFixed?V.config.theme2.visualization.getColorByName(G.pointColorFixed):(0,Bo.YO)(q,V.config.theme2).color,fe=()=>ce;const Se={...nu,...q.config.custom};let _e=Bo.WO.get(us.S.PaletteClassic);if(G.pointColorIndex){const mt=D[T].fields[G.pointColorIndex];if(mt)if(_e=(0,Bo.fD)(q),_e.isByValue){const Wt=G.pointColorIndex;fe=wt=>{const Ot=wt.fields[Wt];return Ot.state?.range&&(Ot.state.range=void 0),Ot.display=(0,Qs.U)({field:Ot,theme:V.config.theme2}),Ot.values.map(on=>Ot.display(on).color)}}else ce=_e.getCalculator(mt,V.config.theme2)(mt.values[0],1),fe=()=>ce}let Ae=G.pointSizeConfig,He=G.pointSizeConfig?.fixed??q.config.custom?.pointSize?.fixed??Jf,tt=()=>He;G.pointSizeIndex?tt=mt=>{const Wt=(0,Dr.getScaledDimensionForField)(mt.fields[G.pointSizeIndex],G.pointSizeConfig,Lt.B5.Quad),wt=Array(mt.length);for(let Ot=0;Ot<mt.length;Ot++)wt[Ot]=Wt.get(Ot);return wt}:Ae={fixed:He,min:He,max:He};const $e=(0,os.CZ)(q,Y,D);return{name:$e,frame:mt=>mt[T],x:mt=>mt.fields[B],y:mt=>mt.fields[W],legend:()=>[{label:$e,color:ce,getItemKey:()=>$e,yAxis:W}],showLine:Se.show!==Mo.Points,lineWidth:Se.lineWidth??2,lineStyle:Se.lineStyle,lineColor:()=>ce,showPoints:Se.show!==Mo.Lines?Lt.Jp.Always:Lt.Jp.Never,pointSize:tt,pointColor:fe,pointSymbol:(mt,Wt)=>"circle",label:Lt.Jp.Never,labelValue:()=>"",show:!Y.fields[W].config.custom.hideFrom?.viz,hints:{pointSize:Ae,pointColor:{mode:_e}}}}function pb(s,D){let T=0;if(!D.length)throw"Missing data";if(s.seriesMapping==="manual"){if(!s.series?.length)throw"Missing series config";const se=[];for(const ce of s.series){if(!ce?.x)throw"Select X dimension";if(!ce?.y)throw"Select Y dimension";for(let fe=0;fe<D.length;fe++){const Se=D[fe],_e=(0,Dr.findFieldIndex)(Se,ce.x);if(_e!=null){const Ae=(0,Dr.findFieldIndex)(Se,ce.y);if(Ae==null)throw"Y must be in the same frame as X";const He={pointColorFixed:ce.pointColor?.fixed,pointColorIndex:(0,Dr.findFieldIndex)(Se,ce.pointColor?.field),pointSizeConfig:ce.pointSize,pointSizeIndex:(0,Dr.findFieldIndex)(Se,ce.pointSize?.field)};se.push(Xf(T++,D,fe,_e,Ae,He))}}}return se}const B=s.dims??{},W=B.frame??0,G=D[W],Y=[];let q=(0,Dr.findFieldIndex)(G,B.x);for(let se=0;se<G.fields.length;se++)if(gc(G.fields[se])){if(q==null||se===q){q=se;continue}if(B.exclude&&B.exclude.includes((0,os.CZ)(G.fields[se],G,D)))continue;Y.push(se)}if(q==null)throw"Missing X dimension";if(!Y.length)throw"No Y values";return Y.map(se=>Xf(T++,D,W,q,se,{}))}const hb=(s,D,T,B,W,G)=>{let Y,q;function se(Ot){return(Vt,sn,Cn,Dn)=>(Ys.Z.orient(Vt,sn,(En,kn,bn,ra,Rn,Sn,Jn,Kn,wa,Fa,Oa,Aa,Gn,wn,ea)=>{const ua=Ys.Z.pxRatio,Ma=D[sn-1];let Ba=Vt.data[sn],ka=Ma.showLine,Ua=Ma.showPoints===Lt.Jp.Always;!Ua&&Ma.showPoints===Lt.Jp.Auto&&(Ua=Ba[0].length<1e3),!Ua&&!ka&&(ka=!0);let Vn=1;Vt.ctx.save(),Vt.ctx.rect(Vt.bbox.left,Vt.bbox.top,Vt.bbox.width,Vt.bbox.height),Vt.ctx.clip(),Vt.ctx.fillStyle=En.fill(),Vt.ctx.strokeStyle=En.stroke(),Vt.ctx.lineWidth=Vn;let _n=2*Math.PI,Xn=ra.key,Ca=Rn.key,ya=Ma.hints.pointSize;const Va=Ma.hints.pointColor.mode.isByValue;let Ka=(ya.max??ya.fixed)*ua,Cs=Vt.posToVal(-Ka/2,Xn),Ds=Vt.posToVal(Vt.bbox.width/ua+Ka/2,Xn),Jr=Vt.posToVal(Vt.bbox.height/ua+Ka/2,Ca),Gs=Vt.posToVal(-Ka/2,Ca),To=Ot.disp.size.values(Vt,sn),Vo=Ot.disp.color.values(Vt,sn),Ai=Ot.disp.color.alpha,Er=ka?new Path2D:null,$r=null;for(let Js=0;Js<Ba[0].length;Js++){let fs=Ba[0][Js],Io=Ba[1][Js],mo=To[Js]*ua;if(fs>=Cs&&fs<=Ds&&Io>=Jr&&Io<=Gs){let yc=Sn(fs,ra,Fa,Kn),Ec=Jn(Io,Rn,Oa,wa);ka&&Er.lineTo(yc,Ec),Ua&&(Vt.ctx.moveTo(yc+mo/2,Ec),Vt.ctx.beginPath(),Vt.ctx.arc(yc,Ec,mo/2,0,_n),Va&&Vo[Js]!==$r&&($r=Vo[Js],Vt.ctx.fillStyle=(0,ho.alpha)($r,Ai),Vt.ctx.strokeStyle=$r),Vt.ctx.fill(),Vt.ctx.stroke(),Ot.each(Vt,sn,Js,yc-mo/2-Vn/2,Ec-mo/2-Vn/2,mo+Vn,mo+Vn))}}if(ka){let Js=Ma.frame(s());Vt.ctx.strokeStyle=Ma.lineColor(Js),Vt.ctx.lineWidth=Ma.lineWidth*ua;const{lineStyle:fs}=Ma;fs&&fs.fill!=="solid"&&(fs.fill==="dot"&&(Vt.ctx.lineCap="round"),Vt.ctx.setLineDash(fs.dash??[10,10])),Vt.ctx.stroke(Er)}Vt.ctx.restore()}),null)}let ce=se({disp:{size:{values:(Ot,on)=>Ot.data[on][2]},color:{values:(Ot,on)=>Ot.data[on][3],alpha:.5}},each:(Ot,on,Vt,sn,Cn,Dn,En)=>{sn-=Ot.bbox.left,Cn-=Ot.bbox.top,Y.add({x:sn,y:Cn,w:Dn,h:En,sidx:on,didx:Vt})}});const fe=new Tl.U;fe.setCursor({drag:{setScale:!0},dataIdx:(Ot,on)=>{if(on===1){const Vt=Ys.Z.pxRatio;q=null;let sn=1/0,Cn=Ot.cursor.left*Vt,Dn=Ot.cursor.top*Vt;Y.get(Cn,Dn,1,1,En=>{if((0,No.Pn)(Cn,Dn,En.x,En.y,En.x+En.w,En.y+En.h)){let kn=En.x+En.w/2,bn=En.y+En.h/2,ra=kn-Cn,Rn=bn-Dn,Sn=Math.sqrt(ra**2+Rn**2);Sn<=En.w/2&&Sn<=sn&&(sn=Sn,q=En)}})}return q&&on===q.sidx?q.didx:null},points:{size:(Ot,on)=>q&&on===q.sidx?q.w/Ys.Z.pxRatio:0,fill:(Ot,on)=>"rgba(255,255,255,0.4)"}});const Se=()=>{G.current&&(B(void 0),W&&W())};let _e=null;fe.addHook("init",(Ot,on)=>{Ot.over.style.overflow="hidden",_e=Ot.root.parentElement,W&&_e?.addEventListener("click",W)}),fe.addHook("destroy",Ot=>{W&&(_e?.removeEventListener("click",W),Se())});let Ae;fe.addHook("syncRect",(Ot,on)=>{Ae=on}),fe.addHook("setLegend",Ot=>{if(Ot.cursor.idxs!=null)for(let on=0;on<Ot.cursor.idxs.length;on++){const Vt=Ot.cursor.idxs[on];if(Vt!=null&&!G.current){B({scatterIndex:on-1,xIndex:Vt,pageX:Ae.left+Ot.cursor.left,pageY:Ae.top+Ot.cursor.top});return}}G.current||B(void 0)}),fe.addHook("drawClear",Ot=>{Se(),Y=Y||new No.lW(0,0,Ot.bbox.width,Ot.bbox.height),Y.clear(),Ot.series.forEach((on,Vt)=>{Vt>0&&(on._paths=null)})}),fe.setMode(2);const He=s();let tt=D[0].x(D[0].frame(He)),$e=tt.config,mt=$e.custom,Wt=mt?.scaleDistribution;fe.addScale({scaleKey:"x",isTime:!1,orientation:Lt.wN.Horizontal,direction:Lt.bQ.Right,distribution:Wt?.type,log:Wt?.log,linearThreshold:Wt?.linearThreshold,min:$e.min,max:$e.max,softMin:mt?.axisSoftMin,softMax:mt?.axisSoftMax,centeredZero:mt?.axisCenteredZero,decimals:$e.decimals});let wt=mt.axisLabel;return fe.addAxis({scaleKey:"x",placement:mt?.axisPlacement!==Lt.LB.Hidden?Lt.LB.Bottom:Lt.LB.Hidden,show:mt?.axisPlacement!==Lt.LB.Hidden,grid:{show:mt?.axisGridShow},border:{show:mt?.axisBorderShow},theme:T,label:wt==null||wt===""?(0,os.CZ)(tt,D[0].frame(He),He):wt,formatValue:(Ot,on)=>(0,Ts.zc)(tt.display(Ot,on))}),D.forEach((Ot,on)=>{let Vt=Ot.frame(He),sn=Ot.y(Vt);const Cn=Ot.lineColor(Vt),Dn=yb(Vt,Ot.pointColor);let En=sn.config.unit??"y",kn=sn.config,bn=kn.custom,ra=bn?.scaleDistribution;fe.addScale({scaleKey:En,orientation:Lt.wN.Vertical,direction:Lt.bQ.Up,distribution:ra?.type,log:ra?.log,linearThreshold:ra?.linearThreshold,min:kn.min,max:kn.max,softMin:bn?.axisSoftMin,softMax:bn?.axisSoftMax,centeredZero:bn?.axisCenteredZero,decimals:kn.decimals});let Rn=bn?.axisLabel;fe.addAxis({scaleKey:En,theme:T,placement:bn?.axisPlacement===Lt.LB.Auto?Lt.LB.Left:bn?.axisPlacement,show:bn?.axisPlacement!==Lt.LB.Hidden,grid:{show:bn?.axisGridShow},border:{show:bn?.axisBorderShow},size:bn?.axisWidth,label:Rn==null||Rn===""?(0,os.CZ)(sn,D[on].frame(He),He):Rn,formatValue:(Sn,Jn)=>(0,Ts.zc)(sn.display(Sn,Jn))}),fe.addSeries({facets:[{scale:"x",auto:!0},{scale:En,auto:!0}],pathBuilder:ce,theme:T,scaleKey:"",lineColor:Cn,fillColor:(0,ho.alpha)(Dn,.5),show:!bn.hideFrom?.viz})}),fe};function qf(s,D,T){return s.error||!D.length?[null]:[null,...s.series.map((B,W)=>{const G=B.frame(D);let Y;const q=B.pointColor(G);return Array.isArray(q)?Y=q:Y=Array(G.length).fill(q),[B.x(G).values,B.y(G).values,vb(G,B.pointSize),Y]})]}function vb(s,D){const T=D(s);return Array.isArray(T)?T:Array(s.length).fill(T)}function yb(s,D){const T=D(s);return Array.isArray(T)?T[0]:T}const eg=10,Eb=s=>{const[D,T]=(0,o.useState)(),[B,W]=(0,o.useState)([]),[G,Y]=(0,o.useState)(),[q,se]=(0,o.useState)(),[ce,fe]=(0,o.useState)(),[Se,_e]=(0,o.useState)(!1),Ae=(0,o.useRef)(!1),He=(0,Zf.Z)(s.options),tt=(0,Zf.Z)(s.data),$e=()=>{Ae.current=!1,_e(!1),Wt(void 0)},mt=()=>{Ae.current=!Ae.current,_e(Ae.current)},Wt=Vt=>{fe(Vt)},wt=(0,o.useCallback)(()=>{const Vt=()=>s.data.series,sn=gb(s.options,Vt,V.config.theme2,Wt,mt,Ae);sn.error?T(sn.error):sn.series.length&&s.data.series&&(Y(sn.builder),W(sn.series),se(()=>qf(sn,s.data.series)),T(void 0))},[s.data.series,s.options]),Ot=(0,o.useCallback)(()=>{se(()=>qf({error:D,series:B},s.data.series))},[s.data.series,D,B]);(0,o.useEffect)(()=>{He!==s.options||tt?.structureRev!==s.data.structureRev?wt():tt?.series!==s.data.series&&Ot()},[s]);const on=()=>{const Vt=[],sn=En=>En==null?"-":En.toFixed(1),Cn=V.config.theme2;for(let En=0;En<B.length;En++){const kn=B[En],bn=kn.frame(s.data.series);if(bn)for(const ra of kn.legend())ra.getDisplayValues=()=>{const Rn=s.options.legend.calcs;if(!Rn?.length)return[];const Sn=kn.y(bn),Jn=Sn.display??sn;let Kn=null;const wa=(0,hr.Kx)({field:Sn,reducers:Rn});return Rn.map(Fa=>{const Oa=hr.TB.get(Fa);let Aa=Jn;return Oa.id===hr.gz.diffperc&&(Aa=(0,Qs.U)({field:{...Sn,config:{...Sn.config,unit:"percent"}},theme:Cn})),(Oa.id===hr.gz.count||Oa.id===hr.gz.changeCount||Oa.id===hr.gz.distinctCount)&&(Kn||(Kn=(0,Qs.U)({field:{...Sn,config:{...Sn.config,unit:"none"}},theme:Cn})),Aa=Kn),{...Aa(wa[Fa]),title:Oa.name,description:Oa.description}})},ra.disabled=!(kn.show??!0),s.options.seriesMapping===tu.Manual&&(ra.label=s.options.series?.[En]?.name??`Series ${En+1}`),Vt.push(ra)}if(!s.options.legend.showLegend)return null;const Dn={flexStart:(0,F.css)`
        div {
          justify-content: flex-start !important;
        }
      `};return o.createElement(jo.AY.Legend,{placement:s.options.legend.placement,width:s.options.legend.width},o.createElement(Bi.l,{className:Dn.flexStart,placement:s.options.legend.placement,items:Vt,displayMode:s.options.legend.displayMode}))};return D||!G||!q?o.createElement("div",{className:"panel-empty"},o.createElement("p",null,D)):o.createElement(o.Fragment,null,o.createElement(jo.AY,{width:s.width,height:s.height,legend:on()},(Vt,sn)=>o.createElement(Lm.N,{config:G,data:q,width:Vt,height:sn})),o.createElement(rs.h_,null,ce&&s.options.tooltip.mode!==Lt.f3.None&&o.createElement(ms.S,{position:{x:ce.pageX,y:ce.pageY},offset:{x:eg,y:eg},allowPointerEvents:Ae.current},Se&&o.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},o.createElement(mi.P,{onClick:$e,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),o.createElement(ub,{options:s.options.tooltip,allSeries:B,manualSeriesConfigs:s.options.series,seriesMapping:s.options.seriesMapping,rowIndex:ce.xIndex,hoveredPointIndex:ce.scatterIndex,data:s.data.series}))))},bb=new w.c(Eb).useFieldConfig(fb(nu)).setPanelOptions(s=>{s.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:ob,showIf:D=>D.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:cb,showIf:D=>D.seriesMapping==="manual"}),Lo.L(s),Hr.J(s)}),xb={"core:plugin/graphite":async()=>await e.e(7494).then(e.bind(e,39708)),"core:plugin/cloudwatch":async()=>await Promise.all([e.e(7275),e.e(8831)]).then(e.bind(e,51595)),"core:plugin/dashboard":async()=>await e.e(1080).then(e.bind(e,31080)),"core:plugin/elasticsearch":async()=>await Promise.all([e.e(1300),e.e(4074)]).then(e.bind(e,51300)),"core:plugin/opentsdb":async()=>await e.e(3168).then(e.bind(e,82367)),"core:plugin/grafana":async()=>await e.e(7537).then(e.bind(e,69808)),"core:plugin/influxdb":async()=>await Promise.all([e.e(4755),e.e(7444),e.e(5783)]).then(e.bind(e,67444)),"core:plugin/loki":async()=>await Promise.all([e.e(1569),e.e(829),e.e(5882),e.e(1598)]).then(e.bind(e,25882)),"core:plugin/jaeger":async()=>await e.e(890).then(e.bind(e,99330)),"core:plugin/zipkin":async()=>await e.e(4023).then(e.bind(e,62969)),"core:plugin/mixed":async()=>await e.e(2001).then(e.bind(e,15768)),"core:plugin/mysql":async()=>await Promise.all([e.e(4755),e.e(4251)]).then(e.bind(e,19461)),"core:plugin/postgres":async()=>await Promise.all([e.e(4755),e.e(534)]).then(e.bind(e,67711)),"core:plugin/mssql":async()=>await Promise.all([e.e(4755),e.e(5032)]).then(e.bind(e,72792)),"core:plugin/prometheus":async()=>await Promise.all([e.e(829),e.e(7004)]).then(e.bind(e,58919)),"core:plugin/grafana-testdata-datasource":async()=>await e.e(319).then(e.bind(e,18602)),"core:plugin/cloud-monitoring":async()=>await Promise.all([e.e(9711),e.e(3549)]).then(e.bind(e,9711)),"core:plugin/azuremonitor":async()=>await Promise.all([e.e(5422),e.e(3773),e.e(2364)]).then(e.bind(e,13773)),"core:plugin/tempo":async()=>await Promise.all([e.e(1249),e.e(295)]).then(e.bind(e,21249)),"core:plugin/alertmanager":async()=>await Promise.all([e.e(5422),e.e(6795)]).then(e.bind(e,63805)),"core:plugin/grafana-pyroscope-datasource":async()=>await e.e(8693).then(e.bind(e,31479)),"core:plugin/parca":async()=>await e.e(2015).then(e.bind(e,95108)),"core:plugin/text":P,"core:plugin/timeseries":S,"core:plugin/trend":R,"core:plugin/state-timeline":p,"core:plugin/status-history":v,"core:plugin/candlestick":y,"core:plugin/graph":async()=>await Promise.all([e.e(2985),e.e(1260)]).then(e.bind(e,42985)),"core:plugin/xychart":A,"core:plugin/geomap":async()=>await Promise.all([e.e(4650),e.e(8096)]).then(e.bind(e,89382)),"core:plugin/canvas":async()=>await e.e(3330).then(e.bind(e,35253)),"core:plugin/dashlist":c,"core:plugin/alertlist":n,"core:plugin/annolist":r,"core:plugin/heatmap":async()=>await e.e(6987).then(e.bind(e,16568)),"core:plugin/table":E,"core:plugin/table-old":async()=>await e.e(6784).then(e.bind(e,50876)),"core:plugin/news":x,"core:plugin/live":h,"core:plugin/stat":oy,"core:plugin/datagrid":l,"core:plugin/debug":d,"core:plugin/flamegraph":f,"core:plugin/gettingstarted":m,"core:plugin/gauge":uh,"core:plugin/piechart":g,"core:plugin/bargauge":i,"core:plugin/barchart":a,"core:plugin/logs":C,"core:plugin/traces":M,"core:plugin/welcome":I,"core:plugin/nodeGraph":b,"core:plugin/histogram":u,"core:plugin/alertGroups":t};var su=e(12700),Sb=e(76889),Cb=e(6033),Db=e.n(Cb),Pb=e(52291),Mb=e.n(Pb),Tb=e(49065),Ib=e(89772),Ob=e(17716),Rb=e(13196),Ab=e(44722),Lb=e(74377),wb=e(90174),Bb=e(20399),Nb=e(76485),CS=e(89377),DS=e(4027),PS=e(59554),MS=e(65103),TS=e(85095),IS=e(28844),OS=e(26189),RS=e(47825),AS=e(7540),Fb=e(9744),Ub=e(79281),Wb=e(41730),_b=e(94162),tg=e(24796),$b=e(57804),Vb=e(8741),Kb=e(38533);const cl=Wb;cl.PanelPlugin=w.c,cl.DataSourcePlugin=O.hf,cl.AppPlugin=Ci.k8,cl.DataSourceApi=O.MF;const kb=["jquery.flot.crosshair","jquery.flot.events","jquery.flot.fillbelow","jquery.flot.gauge","jquery.flot.pie","jquery.flot.selection","jquery.flot.stack","jquery.flot.stackpercent","jquery.flot.time","jquery.flot"].reduce((s,D)=>({...s,[D]:{fakeDep:1}}),{}),zb={"@emotion/css":F,"@emotion/react":Sb,"@grafana/data":Fb,"@grafana/runtime":Ub,"@grafana/slate-react":vn.ZP,"@grafana/ui":cl,"app/core/app_events":{default:sc.h$,__useDefault:!0},"app/core/config":{default:tn.default,__useDefault:!0},"app/core/core":{appEvents:sc.h$,contextSrv:sc.Vt},"app/core/services/backend_srv":{BackendSrv:hs.y$,getBackendSrv:hs.i},"app/core/table_model":{default:_b.Z,__useDefault:!0},"app/core/time_series":{default:tg.Z,__useDefault:!0},"app/core/time_series2":{default:tg.Z,__useDefault:!0},"app/core/utils/datemath":Ye,"app/core/utils/flatten":$b,"app/core/utils/kbn":{default:Vb.Z,__useDefault:!0},"app/core/utils/ticks":Kb,"app/features/dashboard/impression_store":{impressions:rm},d3:ym,emotion:F,jquery:{default:Db(),__useDefault:!0},...kb,lodash:{default:ee(),__useDefault:!0},moment:{default:Mb(),__useDefault:!0},prismjs:Yt(),react:o,"react-dom":Tb,"react-redux":Ib,"react-router-dom":Ob,"react-router":Rb,redux:Ab,rxjs:Lb,"rxjs/operators":wb,slate:Bb.ZP,"slate-plain-serializer":Nb.Z,"slate-react":vn.ZP};function ru({url:s,source:D,transformSourceMapURL:T=!1}){const B=s.split("/public/plugins/"),W=B[0],G=B[1].split("/")[0];let Y=D;return Y=Y.replace(/(\/?)(public\/plugins)/g,`${W}/$2`),Y=Y.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${W}/public/$2$3`),T&&(Y=Y.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${W}/public/plugins/${G}/$2.map`)),Y}const ng="package",Hb=/^plugins.+\.css$/i,Gb=/^(text|application)\/(x-)?javascript(;|$)/,jb=/(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.])define\s*\(\s*("[^"]+"\s*,\s*|'[^']+'\s*,\s*)?\s*(\[(\s*(("[^"]+"|'[^']+')\s*,|\/\/.*\r?\n))*(\s*("[^"]+"|'[^']+')\s*,?)?(\s*(\/\/.*\r?\n|\/\*\/))*\s*\]|function\s*|{|[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*\))/,ag=new Map([]);var pc=e(54538);const ou=new WeakMap,sg={};let Yb=/plugins\/([^/]*)\/.*?module\.js/i;function Qb(){try{const s=new Error().stack;if(s?.includes("systemJSPrototype"))return;if(s&&s.includes("module.js")){let D=s.match(Yb);if(D&&D[1])return D[1]}}catch{return}}function rg(s,D,T){const B={get(W,G){if(document.currentScript===null&&typeof G!="symbol"&&G.toString()!=="__useDefault"){const q=Qb()??"",se=`${D}.${String(G)}`,ce=`${q}:${se}`;sg[ce]||(sg[ce]=!0,(0,pc.PN)(`Plugin using ${se}`,{key:String(G),parent:D,packageName:T,guessedPluginName:q}))}const Y=W[G];return Y!==null&&typeof Y=="object"?(ou.has(Y)||ou.set(Y,rg(Y,`${D}.${String(G)}`,T)),ou.get(Y)):Y}};return typeof s=="object"&&s!==null?new Proxy(s,B):s}function Zb(s,D){return rg(s,D,D)}function Jb(s){return Object.keys(s).reduce((D,T)=>{const B=`${ng}:${T}`,W=V.config.featureToggles.pluginsAPIMetrics?Zb(s[T],T):s[T];return N.i3.set(B,W),ag.set(T,s[T]),D[T]=B,D},{})}function hc(s){return!!V.config.pluginsCDNBaseURL&&s.startsWith(V.config.pluginsCDNBaseURL)}async function Xb(s,D,T){const B=await s(D,T),W=B.headers.get("content-type")||"";if(Gb.test(W)){const G=await B.text();let Y=G;if(jb.test(Y)&&(Y=nx(G)),hc(B.url)){const q=ru({url:B.url,source:Y});return new Response(new Blob([q],{type:"text/javascript"}))}return new Response(new Blob([Y],{type:"text/javascript"}))}return B}function qb(s,D,T){const B=D.endsWith("module.js")&&!hc(D);try{const W=s.apply(this,[D,T]),G=tx(W);return B?(0,su.u0)(G):G}catch{return Hb.test(D)?`${V.config.appSubUrl??""}/public/${D}`:(console.log(`SystemJS: failed to resolve '${D}'`),D)}}function ex(s,D){if(D.endsWith(".css")&&!s){const B=N.i3.get(D)?.default;B&&(document.adoptedStyleSheets=[...document.adoptedStyleSheets,B])}}function tx(s){return s.startsWith(`${ng}:`)?s:(s.endsWith("!")&&(s=s.slice(0,-1)),["css","js","json","wasm"].some(B=>s.endsWith(B))?s:s+".js")}function nx(s){return`(function(define) {
  ${s}
})(window.__grafana_amd_define);`}var ax=e(48020);const og=V.config.bootData.settings.cspReportOnlyEnabled,ig={createHTML:(s,D,T)=>og?(console.error("[HTML not sanitized with Trusted Types]",s,D,T),s):s.replace(/<script/gi,"&lt;script"),createScript:s=>s,createScriptURL:(s,D,T)=>og?(console.error("[ScriptURL not sanitized with Trusted Types]",s,D,T),s):_a.QX.sanitizeUrl(s)};V.config.bootData.settings.trustedTypesDefaultPolicyEnabled&&window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",ig);function sx(s){const D=new URL(window.location.href),T=new URL(s);return D.host===T.host}async function rx(s,D,T){let B="";if(sx(s)?(B=await(await fetch(s)).text(),B=lg(D,B)):hc(s)&&(B=await(await fetch(s)).text(),B=ru({url:s,source:B,transformSourceMapURL:!0})),B.length===0)throw new Error("Only same domain scripts are allowed in sandboxed plugins");T.evaluate(B)}async function ox(s){if(hc(s.module)){const D=s.module;let B=await(await fetch(D)).text();return B=ru({url:D,source:B,transformSourceMapURL:!0}),B}else{const D=(0,su.u0)(s.module);let B=await(await fetch(D)).text();return B=lg(s,B),B=ix(B),B}}function ix(s){return s.replace(/window\.location/gi,"window.locationSandbox")}function lg(s,D){if(D.includes("//# sourceMappingURL=module.js.map")){let T="";(!D.includes("//# sourceURL")||!D.includes("//@ sourceUrl"))&&(T+=`//# sourceURL=module.js
`);const B=s.module+".map";return T+=`//# sourceMappingURL=${B}`,D.replace("//# sourceMappingURL=module.js.map",T)}return D}const $o=["iframe"];var cg=e(17082);const dg=!!V.config.featureToggles.frontendSandboxMonitorOnly;function lx(s){return!!s&&typeof s=="object"&&s?.hasOwnProperty("plugin")}function LS(s){throw new Error(`Unexpected object: ${s}. This should never happen.`)}function dx(s){return s instanceof o.Component}function co(s,D){D={...D,source:"sandbox",monitorOnly:String(dg)},(0,pc.KE)(s,D)}function iu(s,D){D={...D,source:"sandbox",monitorOnly:String(dg)},(0,pc.H)(s,D)}function ux({isAngular:s,pluginId:D}){const T=location.search.includes("nosandbox")&&V.config.buildInfo.env==="development",B=V.config.disableFrontendSandboxForPlugins.includes(D);return!s&&!!V.config.featureToggles.pluginsFrontendSandbox&&!0&&!B&&!T}function mx(s){return s?.constructor?.name==="RegExp"}function lu(s){return s&&(mx(s)&&(0,cg.qD)(s)?new RegExp(s):Array.isArray(s)?s.map(lu):typeof s=="object"?Object.keys(s).reduce((D,T)=>(Reflect.set(D,T,lu(Reflect.get(s,T))),D),{}):s)}const yr=new Map,uo=!!V.config.featureToggles.frontendSandboxMonitorOnly,ug=Symbol.for("@SANDBOX_LIVE_API_PATCHED");function fx(){return yr.size===0&&(gx(yr),px(yr),hx(yr),bx(yr),Ex(yr),vx(yr),yx(yr),xx(yr),Sx(yr),mg(yr),Cx(yr)),yr}function vc(s,D){return co(`Plugin ${D.id} tried to set a sandboxed property`,{pluginId:D.id,attrOrMethod:String(s),entity:"window"}),uo?s:()=>{throw new Error("Plugins are not allowed to set sandboxed properties")}}function gx(s){const D=["contentDocument","contentWindow","src","srcdoc","srcObject","srcset"];for(const B of D){const W=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,B);if(W){let G=function(Y,q){const se=q.id;return co(`Plugin ${se} tried to access iframe.${B}`,{pluginId:se,attrOrMethod:B,entity:"iframe"}),uo?Y:()=>{throw new Error("iframe."+B+" is not allowed in sandboxed plugins")}};var T=G;W.value&&s.set(W.value,G),W.set&&s.set(W.set,G),W.get&&s.set(W.get,G)}}}function px(s){const D=Object.getOwnPropertyDescriptor(window,"console");if(D?.value){let B=function(W,G){const Y=G.id;if(uo)return W;function q(...se){console.log(`[plugin ${Y}]`,...se)}return{log:q,warn:q,error:q,info:q,debug:q,table:q}};var T=B;s.set(D.value,B)}D?.set&&s.set(D.set,vc)}function hx(s){function D(B,W){const G=W.id;return co(`Plugin ${G} accessed window.alert`,{pluginId:G,attrOrMethod:"alert",entity:"window"}),uo?B:function(...Y){console.log(`[plugin ${G}]`,...Y)}}const T=Object.getOwnPropertyDescriptor(window,"alert");T?.value&&s.set(T.value,D),T?.set&&s.set(T.set,vc)}function vx(s){function D(B,W){const G=W.id;return function(...q){for(const se of q){const ce=se?.toLowerCase()||"";for(const fe of $o)if(ce.includes("<"+fe)){if(co(`Plugin ${G} tried to set ${fe} in innerHTML`,{pluginId:G,attrOrMethod:"innerHTML",param:fe,entity:"HTMLElement"}),uo)continue;throw new Error("<"+fe+"> is not allowed in sandboxed plugins")}}(0,ne.isFunction)(B)&&B.apply(this,q)}}const T=[Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentHTML"),Object.getOwnPropertyDescriptor(DOMParser.prototype,"parseFromString")];for(const B of T)B?.set&&s.set(B.set,D),B?.value&&s.set(B.value,D)}function yx(s){function D(B,W){const G=W.id;return function(q,se){if(q&&$o.includes(q)&&(co(`Plugin ${G} tried to create ${q}`,{pluginId:G,attrOrMethod:"createElement",param:q,entity:"document"}),!uo))return document.createDocumentFragment();if((0,ne.isFunction)(B))return B.apply(this,[q,se])}}const T=Object.getOwnPropertyDescriptor(Document.prototype,"createElement");T?.value&&s.set(T.value,D)}function Ex(s){function D(G,Y){const q=Y.id;return function(ce,fe){const Se=ce?.nodeName?.toLowerCase()||"";if(ce&&$o.includes(Se)&&(co(`Plugin ${q} tried to insert ${Se}`,{pluginId:q,attrOrMethod:"insertChild",param:Se,entity:"HTMLElement"}),!uo))return document.createDocumentFragment();if((0,ne.isFunction)(G))return G.call(this,ce,fe)}}function T(G,Y){const q=Y.id;return function(ce,fe){const Se=fe?.nodeName?.toLowerCase()||"";if(fe&&$o.includes(Se)&&(co(`Plugin ${q} tried to insert ${Se}`,{pluginId:q,attrOrMethod:"insertAdjacentElement",param:Se,entity:"HTMLElement"}),!uo))return document.createDocumentFragment();if((0,ne.isFunction)(G))return G.call(this,ce,fe)}}const B=[Object.getOwnPropertyDescriptor(Node.prototype,"insertBefore"),Object.getOwnPropertyDescriptor(Node.prototype,"replaceChild")];for(const G of B)G?.value&&s.set(G.set,D);const W=Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentElement");W?.value&&s.set(W.set,T)}function bx(s){function D(G,Y){const q=Y.id;return function(...ce){let fe=ce;const Se=ce?.filter(_e=>!$o.includes(_e.nodeName.toLowerCase()));uo||(fe=Se),fe.length!==Se.length&&co(`Plugin ${q} tried to append fobiddenElements`,{pluginId:q,attrOrMethod:"append",param:ce?.filter(_e=>$o.includes(_e.nodeName.toLowerCase()))?.join(",")||"",entity:"HTMLElement"}),(0,ne.isFunction)(G)&&G.apply(this,fe)}}function T(G,Y,q){const se=Y.id;return function(fe){const Se=fe?.nodeName?.toLowerCase()||"";if(fe&&$o.includes(Se)&&(co(`Plugin ${se} tried to append ${Se}`,{pluginId:se,attrOrMethod:"appendChild",param:Se,entity:"HTMLElement"}),!uo))return document.createDocumentFragment();if(q&&fe&&Se==="script"&&fe instanceof HTMLScriptElement){rx(fe.src,Y,q).then(()=>{fe.onload?.call(fe,new Event("load"))}).catch(_e=>{fe.onerror?.call(fe,new ErrorEvent("error",{error:_e}))});return}if((0,ne.isFunction)(G))return G.call(this,fe)}}const B=[Object.getOwnPropertyDescriptor(Element.prototype,"append"),Object.getOwnPropertyDescriptor(Element.prototype,"prepend"),Object.getOwnPropertyDescriptor(Element.prototype,"after"),Object.getOwnPropertyDescriptor(Element.prototype,"before"),Object.getOwnPropertyDescriptor(Document.prototype,"append"),Object.getOwnPropertyDescriptor(Document.prototype,"prepend")];for(const G of B)G?.value&&s.set(G.value,D);const W=Object.getOwnPropertyDescriptor(Node.prototype,"appendChild");W?.value&&s.set(W.value,T)}function xx(s){const D=Object.getOwnPropertyDescriptor(Worker.prototype,"postMessage");function T(B){return function(...G){try{const Y=(0,ne.cloneDeep)(G);(0,ne.isFunction)(B)&&B.apply(this,Y)}catch{throw new Error("postMessage arguments are invalid objects")}}}D?.value&&s.set(D.value,T)}function Sx(s){const D=Object.getOwnPropertyDescriptor(Document.prototype,"defaultView");D?.get&&s.set(D.get,()=>()=>window);const T=["write"];for(const B of T){const W=Object.getOwnPropertyDescriptor(Document.prototype,B);W?.set&&s.set(W.set,vc),W?.value&&s.set(W.value,vc)}}async function mg(s){const D=Reflect.get(window,"monaco");if(!D||Object.hasOwn(D,ug))return;const T=D.languages.setMonarchTokensProvider;function B(){return function(...W){return W.length!==2?T.apply(D,W):T.call(D,W[0],lu(W[1]))}}s.set(D.languages.setMonarchTokensProvider,B),Reflect.set(D,ug,{})}async function Cx(s){const D=Object.getOwnPropertyDescriptor(window,"postMessage");function T(B){return function(...G){try{const Y=(0,ne.cloneDeep)(G);(0,ne.isFunction)(B)&&B.apply(this,Y)}catch{throw new Error("postMessage arguments are invalid objects")}}}D?.value&&s.set(D.value,T)}async function Dx(){mg(yr)}const Ri=Symbol.for("@@SANDBOX_LIVE_VALUE"),fg=!!V.config.featureToggles.frontendSandboxMonitorOnly;function Px(s,D){const T=Reflect.get(s,"nodeName");if(T==="body"||s===document.body)return document.body;if(T==="head"||s===document.head||s===document.documentElement)return s;if($o.includes(T)&&(co("<"+T+"> is not allowed in sandboxed plugins",{pluginId:D,param:T}),!fg))throw new Error("<"+T+"> is not allowed in sandboxed plugins");if(Rx(s,D)||s.parentNode===document.body||s.closest("#reactRoot")===null||fg)return s;{const B=document.createElement(T);return B.dataset.grafanaPluginSandboxElement="true",B}}function Mx(s){if(typeof s=="object"&&s instanceof Element)try{return s.nodeName!==void 0}catch{return!1}return!1}function Tx(s){const D=Reflect.get(s,"style");Object.hasOwn(D,Ri)||Reflect.defineProperty(D,Ri,{})}function Ix(s){s&&(Object.hasOwn(s,Ri)||((0,cg.qD)(s)&&!(s instanceof Function)&&(dx(s)||s instanceof O.MF)?Reflect.defineProperty(s,Ri,{}):s===Yt().languages&&Object.defineProperty(s,Ri,{})))}function Ox(s){return Object.hasOwn(s,Ri)}function Rx(s,D){return!document.contains(s)||s.closest(`[data-plugin-sandbox=${D}]`)!==null}let _r;function wS(){return _r||(_r=document.createElement("div"),_r.setAttribute("id","grafana-plugin-sandbox-body"),_r.setAttribute("data-plugin-sandbox","true"),_r.dataset.pluginSandbox="sandboxed-plugin",_r.style.width="100%",_r.style.height="0%",_r.style.overflow="hidden",_r.style.top="0",_r.style.left="0",document.body.appendChild(_r)),_r}var gg=e(30670);async function Ax(s,D){if(!lx(s))return s;const T=await Promise.resolve(s.plugin);if(Reflect.has(T,"panel")&&Reflect.set(T,"panel",dl(Reflect.get(T,"panel"),D)),Reflect.has(T,"components")){const B=Reflect.get(T,"components");Object.entries(B).forEach(([W,G])=>{Reflect.set(B,W,dl(G,D))}),Reflect.set(T,"components",B)}if(Reflect.has(T,"root")&&Reflect.set(T,"root",dl(Reflect.get(T,"root"),D)),Reflect.has(T,"extensionConfigs")){const B=Reflect.get(T,"extensionConfigs");for(const W of B)Reflect.has(W,"component")&&Reflect.set(W,"component",dl(Reflect.get(W,"component"),D));Reflect.set(T,"extensionConfigs",B)}if(Reflect.has(T,"configPages")){const B=Reflect.get(T,"configPages");for(const[W,G]of Object.entries(B))!G.body||!(0,ne.isFunction)(G.body)||Reflect.set(B,W,{...G,body:dl(G.body,D)});Reflect.set(T,"configPages",B)}return s}const dl=(s,D)=>{const T=o.memo(B=>o.createElement("div",{"data-plugin-sandbox":D.id,style:{height:D.type===gg.zV.app||D.type===gg.zV.panel?"100%":"auto"}},o.createElement(s,{...B})));return T.displayName=`GrafanaSandbox(${s.displayName||s.name||"Component"})`,T},cu=new Map,pg={};async function Lx({pluginId:s}){try{const D=await(0,vt.a)(s);return cu.has(s)||cu.set(s,wx(D)),cu.get(s)}catch(D){const T=new Error(`Could not import plugin ${s} inside sandbox: `+D);throw iu(T,{pluginId:s,error:String(D)}),T}}async function wx(s){return new Promise(async(D,T)=>{const B=fx();let W;function G(q){if(Mx(q)){const ce=Px(q,s.id);return Tx(ce),ce}else Ix(q);Dx();const se=B.get(q);return se?se(q,s,W):q}W=(0,ax.Z)(window,{distortionCallback:G,defaultPolicy:ig,liveTargetCallback:Ox,endowments:Object.getOwnPropertyDescriptors({locationSandbox:window.location,get monaco(){return Reflect.get(window,"monaco")},get Prism(){return Reflect.get(window,"Prism")},get grafanaBootData(){if(pg[s.id+"-grafanaBootData"]||(pg[s.id+"-grafanaBootData"]=!0,(0,pc.PN)("Plugin using window.grafanaBootData",{sandbox:"true",pluginId:s.id,guessedPluginName:s.id,parent:"window",packageName:"window",key:"grafanaBootData"})),V.config.buildInfo.env==="development")throw new Error(`Error in ${s.id}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`);return console.error(`${s.id.toUpperCase()}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`),V.config.bootData},async define(q,se,ce){let fe,Se;Array.isArray(q)?(fe=q,Se=se):(fe=se,Se=ce);try{const _e=Nx(fe),Ae=Se.apply(null,_e),He=await Ax(Ae,s);D(He)}catch(_e){const Ae=new Error(`Could not execute plugin's define ${s.id}: `+_e);iu(Ae,{pluginId:s.id,error:String(_e)}),T(Ae)}}}),instrumentation:{startActivity(){return{stop:()=>{},error:Bx(s.id)}},log:()=>{},error:()=>{}}});let Y="";try{Y=await ox(s)}catch(q){throw new Error(`Could not load plugin ${s.id}: `+q)}try{W.evaluate(Y)}catch(q){const se=new Error(`Could not run plugin ${s.id} inside sandbox: `+q);iu(se,{pluginId:s.id,error:String(q)}),T(se)}})}function Bx(s){return async function(T){if(!T)return;T.sandboxError=!0;const B=new Error(T.message.toString());B.name=T.name.toString(),B.stack=T.stack||"",console.log(`[sandbox] Error from plugin ${s}`),console.error(B)}}function Nx(s){const D=[];for(const T of s){let B=ag.get(T);if(B?.__useDefault&&(B=B.default),!B)throw new Error(`[sandbox] Could not resolve dependency ${T}`);D.push(B)}return D}const Fx=Jb(zb);N.i3.addImportMap({imports:Fx});const ai=N.i3.constructor.prototype;ai.shouldFetch=()=>!0;const Ux=ai.fetch;ai.fetch=function(s,D){return Xb(Ux,s,D)};const Wx=ai.resolve;ai.resolve=qb.bind(ai,Wx),ai.onload=ex;async function du({path:s,version:D,isAngular:T,pluginId:B}){D&&(0,su.Vf)({path:s,version:D});const W=xb[s];return W?typeof W=="function"?await W():W:ux({isAngular:T,pluginId:B})?Lx({pluginId:B}):N.i3.import(s)}function _x(s){return du({path:s.module,version:s.info?.version,isAngular:s.angularDetected,pluginId:s.id}).then(D=>{if(D.plugin){const T=D.plugin;return T.meta=s,T}if(D.Datasource){const T=new O.hf(D.Datasource);return T.setComponentsFromLegacyExports(D),T.meta=s,T}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function BS(s){return du({path:s.module,version:s.info?.version,isAngular:s.angularDetected,pluginId:s.id}).then(D=>{const T=D.plugin?D.plugin:new AppPlugin;return T.init(s),T.meta=s,T.setComponentsFromLegacyExports(D),T})}},2190:(X,L,e)=>{"use strict";e.d(L,{Z:()=>t,i:()=>n});const t=r=>r.timeZone,n=r=>r.fiscalYearStartMonth},61691:(X,L,e)=>{"use strict";e.d(L,{kt:()=>Pe});var t=e(50820),n=e(86832);function r(De){let le=[];const Ee=partition(De,"id"),be=groupBy(Ee[0],"id");return le=map(be,ge=>ge.length>1&&!every(ge,a)?find(ge,ue=>ue.eventType!=="panel-alert"):head(ge)),le=concat(le,Ee[1]),le}function a(De){return De.eventType==="panel-alert"}var i=e(6278),y=e(35802);class c{canWork({dashboard:le,range:Ee}){return!(!le.id||Ee.raw.to!=="now"||!le.panels.find(be=>!!be.alert))}work(le){if(!this.canWork(le))return emptyResult();const{dashboard:Ee}=le;return from(getBackendSrv().get("/api/alerts/states-for-dashboard",{dashboardId:Ee.id},`dashboard-query-runner-alert-states-${Ee.id}`)).pipe(map(be=>({alertStates:be,annotations:[]})),catchError(handleDashboardQueryRunnerWorkerError))}}var l=e(95712),d=e(39064);const f="-- Public --";class m extends null{constructor(){let le={};super({name:"public-ds",id:0,type:"public-ds",meta:le,uid:f,jsonData:{},access:"proxy",readOnly:!0}),this.annotations={prepareQuery(Ee){return{...Ee,queryType:GrafanaQueryType.Annotations,refId:"anno"}}}}query(le){return le.targets.length?le.targets[0]?.datasource?.uid===GRAFANA_DATASOURCE_NAME?from(this.getAnnotations(le)):of({data:[]}):of({data:[]})}async getAnnotations(le){const{range:{to:Ee,from:be}}=le,ge={from:be.valueOf(),to:Ee.valueOf()},ue=await getBackendSrv().get(`/api/public/dashboards/${config.publicDashboardAccessToken}/annotations`,ge);return{data:[toDataFrame(ue)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}var u=e(73431),h=e(11164),C=e(63302),x=e(84289),b=e(71476),g=e(23738),p=e(89591),v=e(69330),E=e(19353);const P={prepareAnnotation:De=>{if((0,n.isString)(De?.query)){const{query:le,...Ee}=De;return{...Ee,target:{refId:"annotation_query",query:le},mappings:{}}}return De},prepareQuery:De=>De.target,processEvents:(De,le)=>A(le,De.mappings)};function S(){return De=>De.pipe((0,x.z)(le=>{if(!le?.length)return(0,C.of)(void 0);if(le.length===1)return(0,C.of)(le[0]);const Ee={interpolate:be=>be};return(0,C.of)(le).pipe(g.Y.mergeTransformer.operator({},Ee),(0,b.U)(be=>be[0]))}))}const M=[{key:"time",field:De=>De.fields.find(le=>le.type===p.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",label:"end time",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:De=>De.fields.find(le=>le.type===p.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],R=[{key:"color"},{key:"isRegion"},{key:"source"}],I=[...t.config.publicDashboardAccessToken?R:[],...M,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function A(De,le){return(0,C.of)(De).pipe(S(),(0,b.U)(Ee=>{if(!Ee?.length)return[];let be=!1,ge=!1;const ue={};for(const Qe of Ee.fields){const Me=(0,v.CZ)(Qe,Ee);ue[Me.toLowerCase()]=Qe}le||(le={});const Ie=[];for(const Qe of I){const Me=le[Qe.key]||{};if(Me.source===E.L.Skip)continue;const Ne={key:Qe.key,split:Qe.split};if(Me.source===E.L.Text)Ne.text=Me.value;else{const qe=(Me.value||Qe.key).toLowerCase();Ne.field=ue[qe],!Ne.field&&Qe.field&&(Ne.field=Qe.field(Ee))}(Ne.field||Ne.text)&&(Ie.push(Ne),Ne.key==="time"?be=!0:Ne.key==="text"&&(ge=!0))}if(!be||!ge)return console.error("Cannot process annotation fields. No time or text present."),[];const ot=[];for(let Qe=0;Qe<Ee.length;Qe++){const Me={type:"default",color:"red"};for(const Ne of Ie){let qe;if(Ne.text)qe=Ne.text;else if(Ne.field&&(qe=Ne.field.values[Qe],qe!==void 0&&Ne.regex)){const bt=Ne.regex.exec(qe);bt&&(qe=bt[1]?bt[1]:bt[0])}qe!=null&&(Ne.split&&typeof qe=="string"&&(qe=qe.split(",")),Me[Ne.key]=qe)}ot.push(Me)}return ot}))}const O=null;function N(De){const{type:le}=De;return!(le==="datasource"||O.includes(le))}function o(De){const{type:le}=De;return O.includes(le)}let w=100;function K(){return"AQ"+w++}function V(De,le,Ee){const be={...standardAnnotationSupport,...le.annotations},ge={...be.getDefaultQuery?.(),...Ee},ue=be.prepareAnnotation(ge);if(!ue)return of({});const Ie=be.prepareQuery(ue);if(!Ie)return of({});const ot=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,Qe=rangeUtil.calculateInterval(De.range,ot,le.interval),Me={__interval:{text:Qe.interval,value:Qe.interval},__interval_ms:{text:Qe.intervalMs.toString(),value:Qe.intervalMs},__annotation:{text:ue.name,value:ue}},Ne={startTime:Date.now(),requestId:K(),range:De.range,maxDataPoints:ot,scopedVars:Me,...Qe,app:CoreApp.Dashboard,timezone:De.dashboard.timezone,targets:[{...Ie,refId:"Anno"}]};return runRequest(le,Ne).pipe(mergeMap(qe=>{const bt=qe?.series.length?qe.series:qe.annotations;return bt?.length?be.processEvents(ue,bt).pipe(map(Fe=>({panelData:qe,events:Fe}))):of({panelData:qe,events:[]})}))}class _{canRun(le){return le?!!(!le.annotationQuery||le.annotations):!1}run({annotation:le,datasource:Ee,dashboard:be,range:ge}){if(!this.canRun(Ee))return of([]);const ue={};return executeAnnotationQuery({dashboard:be,range:ge,panel:ue},Ee,le).pipe(map(Ie=>Ie.events??[]),catchError(handleAnnotationQueryRunnerError))}}class U{canRun(le){return le?shouldUseLegacyRunner(le)?!0:!!(le.annotationQuery&&!le.annotations):!1}run({annotation:le,datasource:Ee,dashboard:be,range:ge}){return this.canRun(Ee)?from(Ee.annotationQuery({range:ge,rangeRaw:ge.raw,annotation:le,dashboard:be})).pipe(catchError(handleAnnotationQueryRunnerError)):of([])}}class ${constructor(le=[new LegacyAnnotationQueryRunner,new AnnotationsQueryRunner]){this.runners=le}canWork({dashboard:le}){return!!le.annotations.list.find($.getAnnotationsToProcessFilter)}work(le){if(!this.canWork(le))return emptyResult();const{dashboard:Ee,range:be}=le;let ge=Ee.annotations.list.filter($.getAnnotationsToProcessFilter);config.publicDashboardAccessToken&&ge.length>0&&(ge=[ge[0]]);const ue=ge.map(Ie=>{let ot;if(config.publicDashboardAccessToken){const Qe=new PublicAnnotationsDataSource;ot=of(Qe).pipe(catchError(handleDatasourceSrvError))}else ot=from(getDataSourceSrv().get(Ie.datasource)).pipe(catchError(handleDatasourceSrvError));return ot.pipe(mergeMap(Qe=>{const Me=this.runners.find(Ne=>Ne.canRun(Qe));return Me?(Ee.events.publish(new AnnotationQueryStarted(Ie)),Me.run({annotation:Ie,datasource:Qe,dashboard:Ee,range:be}).pipe(takeUntil(getDashboardQueryRunner().cancellations().pipe(filter(Ne=>Ne===Ie))),map(Ne=>(Ee.snapshot&&(Ie.snapshotData=cloneDeep(Ne)),config.publicDashboardAccessToken?Ne:translateQueryResult(Ie,Ne))),finalize(()=>{Ee.events.publish(new AnnotationQueryFinished(Ie))}))):of([])}))});return merge(ue).pipe(mergeAll(),reduce((Ie,ot)=>Ie.concat(ot)),map(Ie=>({annotations:Ie,alertStates:[]})))}static getAnnotationsToProcessFilter(le){return le.enable&&!le.snapshotData}}var k=e(68556),H=e(97125),j=e(63483),z=e(94435),F=e(21527),J=e(17330);class Q{constructor(){this.hasAlertRules={}}canWork({dashboard:le,range:Ee}){return!(!le.uid||config.publicDashboardAccessToken||Ee.raw.to!=="now"||this.hasAlertRules[le.uid]===!1||!(contextSrv.hasPermission(AccessControlAction.AlertingRuleRead)&&contextSrv.hasPermission(AccessControlAction.AlertingRuleExternalRead)))}work(le){if(!this.canWork(le))return emptyResult();const{dashboard:Ee}=le;return from(getBackendSrv().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:Ee.uid},`dashboard-query-runner-unified-alert-states-${Ee.id}`)).pipe(map(be=>{if(be.status==="success"){this.hasAlertRules[Ee.uid]=!1;const ge={};return be.data.groups.forEach(ue=>ue.rules.forEach(Ie=>{if(isAlertingRule(Ie)&&Ie.annotations&&Ie.annotations[Annotation.panelID]){this.hasAlertRules[Ee.uid]=!0;const ot=Number(Ie.annotations[Annotation.panelID]),Qe=Z(Ie.state);ge[ot]?Qe===AlertState.Alerting&&ge[ot].state!==AlertState.Alerting?ge[ot].state=AlertState.Alerting:Qe===AlertState.Pending&&ge[ot].state!==AlertState.Alerting&&ge[ot].state!==AlertState.Pending&&(ge[ot].state=AlertState.Pending):ge[ot]={state:Qe,id:Object.keys(ge).length,panelId:ot,dashboardId:Ee.id}}})),{alertStates:Object.values(ge),annotations:[]}}throw new Error("Unexpected alert rules response.")}),catchError(handleDashboardQueryRunnerWorkerError))}}function Z(De){return De===PromAlertingRuleState.Firing?AlertState.Alerting:De===PromAlertingRuleState.Pending?AlertState.Pending:AlertState.OK}class ne{constructor(le,Ee=getTimeSrv(),be=[config.unifiedAlertingEnabled?new UnifiedAlertStatesWorker:new AlertStatesWorker,new SnapshotWorker,new AnnotationsWorker]){this.dashboard=le,this.timeSrv=Ee,this.workers=be,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new ReplaySubject(1),this.runs=new Subject,this.cancellationStream=new Subject,this.runsSubscription=this.runs.subscribe(ge=>this.executeRun(ge)),this.eventsSubscription=le.events.subscribe(RefreshEvent,ge=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(le){this.runs.next(le)}getResult(le){return this.results.asObservable().pipe(map(Ee=>{const be=getAnnotationsByPanelId(Ee.annotations,le),ge=Ee.alertStates.find(ue=>!!le&&ue.panelId===le);return{annotations:dedupAnnotations(be),alertState:ge}}))}executeRun(le){const be=this.workers.filter(Qe=>Qe.canWork(le)).map(Qe=>Qe.work(le)),ge=new Subscription,ue=merge(be).pipe(takeUntil(this.runs.asObservable()),mergeAll(),reduce((Qe,Me)=>(Qe.annotations=Qe.annotations.concat(Me.annotations),Qe.alertStates=Qe.alertStates.concat(Me.alertStates),Qe)),finalize(()=>{ge.unsubscribe()}),share()),Ie=new Subscription,ot=timer(200).pipe(mapTo({annotations:[],alertStates:[]}),takeUntil(ue),finalize(()=>{Ie.unsubscribe()}));Ie.add(ot.subscribe(Qe=>{this.results.next(Qe)})),ge.add(ue.subscribe(Qe=>{this.results.next(Qe)}))}cancel(le){this.cancellationStream.next(le)}cancellations(){return this.cancellationStream.asObservable().pipe(share())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let ee;function de(De){ee&&ee.destroy(),ee=De}function Pe(){if(!ee)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return ee}let ye;function he(De){ye=De}function me(De){ye||(ye=({dashboard:Ee,timeSrv:be,workers:ge})=>new ne(Ee,be,ge));const le=ye(De);return de(le),le}},68556:(X,L,e)=>{"use strict";e.d(L,{g:()=>r});var t=e(63302),n=e(35802);class r{canWork({dashboard:i}){return i?.annotations?.list?.some(y=>y.enable&&!!y.snapshotData)}work(i){if(!this.canWork(i))return(0,n.H_)();const y=this.getAnnotationsFromSnapshot(i.dashboard);return(0,t.of)({annotations:y,alertStates:[]})}getAnnotationsFromSnapshot(i){return(i?.annotations?.list?.filter(d=>d.enable)).filter(d=>!!d.snapshotData).reduce((d,f)=>d.concat((0,n.pG)(f,f.snapshotData)),[])}getAnnotationsInSnapshot(i,y){const c=this.getAnnotationsFromSnapshot(i);return(0,n.tD)(c,y)}}},35802:(X,L,e)=>{"use strict";e.d(L,{H_:()=>m,em:()=>b,pG:()=>x,tD:()=>C});var t=e(86832),n=e.n(t),r=e(63302),a=e(98579),i=e(32688),y=e(74600),c=e(14687),l=e(59138);function d(g){return g.cancelled?of([]):(h("AnnotationQueryRunner failed",g),of([]))}function f(g){return h("Failed to retrieve datasource",g),of(void 0)}const m=()=>(0,r.of)({annotations:[],alertStates:[]});function u(g){return g.cancelled||h("DashboardQueryRunner failed",g),m()}function h(g,p){const v=toDataQueryError(p);console.error("handleAnnotationQueryRunnerError",v);const E=createErrorNotification(g,v.message);dispatch(notifyApp(E))}function C(g,p){return p==null?g:g.filter(v=>{let E;if(E=v.source,!E)return!0;if(E.filter){const P=(E.filter.ids??[]).includes(p);if(E.filter.exclude){if(P)return!1}else if(!P)return!1}return v.panelId&&v.source.type==="dashboard"?v.panelId===p:!0})}function x(g,p){g.snapshotData&&(g=(0,t.cloneDeep)(g),delete g.snapshotData);for(const v of p)switch(v.source=g,v.color=i.config.theme2.visualization.getColorByName(g.iconColor),v.type=g.name,v.isRegion=!!(v.timeEnd&&v.time!==v.timeEnd),v.newState?.toLowerCase()){case"pending":v.color="yellow";break;case"alerting":v.color="red";break;case"ok":v.color="green";break;case"normal":v.color="green";break;case"no_data":v.color="gray";break;case"nodata":v.color="gray";break}return p}function b(g){if(!g||!g.length)return[];const p=[];for(const v of g){const E=new a.U(v);for(let P=0;P<v.length;P++){const S=(0,t.cloneDeep)(E.get(P));p.push(S)}}return p}},11164:(X,L,e)=>{"use strict";e.d(L,{v7:()=>K});var t=e(86832),n=e(63302),r=e(3195),a=e(46514),i=e(22605),y=e(71476),c=e(10752),l=e(82696),d=e(52325),f=e(66453),m=e(79947),u=e(10694),h=e(30976),C=e(77877),x=e(96083),b=e(43882),g=e(32688),p=e(92743),v=e(1277),E=e(78354),P=e(12028),S=e(81698);function M(_,U){return(0,S.x)(()=>{U&&_.resolveCancelerIfExists(U)})}var R=e(69307),I=e(4651),A=e(72639),O=e(97433);function N(_){let U=!1;return H=>{if(!H.request||U||R.Cj.getUrlSearchParams().editPanel!=null||H.state!==u.Gu.Done&&H.state!==u.Gu.Error)return;const z={eventName:I.ct.DataRequest,source:H.request.app,datasourceName:_.name,datasourceId:_.id,datasourceUid:_.uid,datasourceType:_.type,dataSize:0,duration:H.request.endTime-H.request.startTime};H.request.app===x.zj.Explore||H.request.app===x.zj.Correlations?$(z,H):k(z,H),H.series&&H.series.length>0&&(z.dataSize=H.series.length),(0,A.r_)(z),U=!0};function $(H,j){const z=Object.keys(j.series).length;H.totalQueries=z}function k(H,j){const z={};for(let Z=0;Z<j.series.length;Z++){const ne=j.series[Z].refId;ne&&!z[ne]&&(z[ne]=j.series[Z].meta?.isCachedResponse??!1)}const F=Object.keys(z).length,J=Object.values(z).filter(Z=>Z===!0).length;H.panelId=j.request.panelId,H.totalQueries=F,H.cachedQueries=J;const Q=(0,O.h4)().getCurrent();Q&&(H.dashboardId=Q.id,H.dashboardName=Q.title,H.dashboardUid=Q.uid,H.folderName=Q.meta.folderTitle),j.error&&(H.error=j.error.message)}}function o(_,U){const $=U.panelData.request,k={...U.packets},H=_.key??_.data?.[0]?.refId??"A";k[H]=_;let j=_.state||u.Gu.Done,z,F;const J=[],Q=[];for(const de in k){const Pe=k[de];if((Pe.error||Pe.errors?.length)&&(j=u.Gu.Error,z=Pe.error,F=Pe.errors),Pe.data&&Pe.data.length)for(const ye of Pe.data){if(ye.meta?.dataTopic===h.w5.Annotations){Q.push(ye);continue}J.push(ye)}}const Z=w($,j),ne={state:j,series:J,annotations:Q,error:z,errors:F,request:$,timeRange:Z},ee=new Set([...U.panelData.traceIds??[],..._.traceIds??[]]);return ee.size>0&&(ne.traceIds=Array.from(ee)),{packets:k,panelData:ne}}function w(_,U){const $=_.range;return!(0,t.isString)($.raw.from)||U!==u.Gu.Streaming?$:{...$,from:C.parse($.raw.from,!1),to:C.parse($.raw.to,!0)}}function K(_,U,$){let k={panelData:{state:u.Gu.Loading,series:[],request:U,timeRange:U.range},packets:{}};if(!U.targets.length)return U.endTime=Date.now(),k.panelData.state=u.Gu.Done,(0,n.of)(k.panelData);const H=V(_,U,$).pipe((0,y.U)(j=>{if(!(0,t.map)(j.data))throw new Error(`Expected response data to be array, got ${typeof j.data}.`);return U.endTime=Date.now(),k=o(j,k),k.panelData}),(0,c.K)(j=>{const z=typeof j=="string"?j:JSON.stringify(j);return console.error("runRequest.catchError",z),(0,n.of)({...k.panelData,state:u.Gu.Error,error:(0,b.P)(j)})}),(0,l.b)(N(_)),M(v.ae,U.requestId),(0,d.B)());return(0,r.T)((0,a.H)(200).pipe((0,f.h)(k.panelData),(0,m.R)(H)),H)}function V(_,U,$){if(U.targets=U.targets.map(H=>(0,E.vH)(H)?{..._?.getDefaultQuery?.(x.zj.PanelEditor),...H}:H),g.config.publicDashboardAccessToken)return(0,i.D)(_.query(U));for(const H of U.targets)if((0,p.Pr)(H.datasource))return P.mV.query(U);const k=$?$(U):_.query(U);return(0,i.D)(k)}},9738:(X,L,e)=>{"use strict";e.d(L,{E_:()=>x,YQ:()=>d,fy:()=>f,pW:()=>l,xb:()=>C,yw:()=>i});var t=e(6868);const n=null,r=58,a=8,i={label:"A\u2013Z",value:"alpha-asc"},y="search.sections",c="grafana.search.expanded-folder",l=0,d="general",f="General",m="grafana.search.include.panels",u="grafana.search.layout",h="grafana.search.sort",C={dashboard:t.o.DashDB,folder:t.o.DashFolder,home:t.o.DashHome},x=1e3},17724:(X,L,e)=>{"use strict";e.d(L,{getGrafanaSearcher:()=>I});var t=e(32688),n=e(98579),r=e(53305),a=e(94123),i=e(4148),y=e(39971);const c="Loading",l="api/search-v2",d="name_sort";class f{constructor(O){this.fallbackSearcher=O}async search(O){if(O.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(O)}async starred(O){if(O.facet?.length)throw new Error("facets not supported!");const N=await(0,i.i)().get("api/user/stars");return N?.length?this.doSearchQuery({uid:N,query:O.query??"*"}):{view:new n.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(o,w)=>{},isItemLoaded:o=>!0}}async tags(O){const N={...O,query:O.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},w=(await(0,i.i)().post(l,N)).frames.map(K=>(0,r.g0)(K));if(w[0]?.name===c)return this.fallbackSearcher.tags(O);for(const K of w)if(K.fields[0].name==="tag")return h(K);return[]}getSortOptions(){const O=[{value:d,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.config.licenseInfo.enabledFeatures.analytics){for(const N of C)O.push({value:`-${N.name}`,label:`${N.display} (most)`}),O.push({value:`${N.name}`,label:`${N.display} (least)`});for(const N of x)O.push({value:`-${N.name}`,label:`${N.display} (recent)`}),O.push({value:`${N.name}`,label:`${N.display} (oldest)`})}return Promise.resolve(O)}async doSearchQuery(O){O=await(0,y.Sd)(O);const N={...O,query:O.query??"*",limit:O.limit??m},w=(await(0,i.i)().post(l,N)).frames.map(H=>(0,r.g0)(H)),K=w.length?(0,r.g0)(w[0]):{fields:[],length:0};if(K.name===c)return this.fallbackSearcher.search(O);for(const H of K.fields)H.display=(0,a.U)({field:H,theme:t.config.theme2});K.meta?.custom||(K.meta={...K.meta,custom:{count:K.length,max_score:1}});const V=K.meta.custom;if(V.locationInfo||(V.locationInfo={}),V.sortBy?.length){const H=K.fields.find(j=>j.name===V.sortBy);if(H){const j=b(H.name);V.sortBy=j,H.name=j}}let _=0,U;const $=async()=>{for(;_>k.dataFrame.length;){const H=k.dataFrame.length;if(H>=V.count)return;const j=await(0,i.i)().post(l,{...N??{},from:H,limit:u}),z=(0,r.g0)(j.frames[0]);if(!z){console.log("no results",z);return}if(z.fields.length!==k.dataFrame.fields.length){console.log("invalid shape",z,k.dataFrame);return}const F=z.length+k.dataFrame.length;for(let Q=0;Q<z.fields.length;Q++)k.dataFrame.fields[Q].values.push(...z.fields[Q].values);k.dataFrame.length=F;const J=z.meta?.custom;if(J?.locationInfo&&V)for(const[Q,Z]of Object.entries(J.locationInfo))V.locationInfo[Q]=Z}U=void 0},k=new n.U(K);return{totalRows:V.count??K.length,view:k,loadMoreItems:async(H,j)=>(_=Math.max(_,j),U||(U=$()),U),isItemLoaded:H=>H<k.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const m=50,u=100;function h(A){const O=A.fields[0].values,N=A.fields[1].values,o=[];for(let w=0;w<A.length;w++)o.push({term:O[w],count:N[w]});return o}const C=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],x=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function b(A){for(const O of C)if(O.name===A)return O.display;for(const O of x)if(O.name===A)return O.display;return A}var g=e(5135);class p{constructor(O){this.parent=O,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(O){if(O.facet?.length)throw new Error("facets not supported!");if(O.sort!=null)throw new Error("custom sorting is not supported yet");if(O.tags?.length||O.ds_uid?.length)return this.parent.search(O);const o=(await this.getCache(O.kind)).search(O.query);return{isItemLoaded:()=>!0,loadMoreItems:async(w,K)=>{},totalRows:o.length,view:o}}async getCache(O){const N=O?O.sort().join(","):"*",o=this.cache.get(N);if(o)try{return await o}catch{return this.cache.delete(N),new v(new n.U({name:"error",fields:[],length:0}))}const w=this.parent.search({kind:O,limit:5e3}).then(K=>new v(K.view));return this.cache.set(N,w),w}async starred(O){return this.parent.starred(O)}async getSortOptions(){return this.parent.getSortOptions()}async tags(O){return this.parent.tags(O)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class v{constructor(O){this.full=O,this.ufuzzy=new g.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new n.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(N=>({...N,values:[]})),length:0})}search(O){if(!O?.length||O==="*")return this.full;const N=this.full.dataFrame.fields,o=this.names,w=N.map(U=>[]);let[K,V,_]=this.ufuzzy.search(o,O,!0);for(let U=0;U<N.length;U++){let $=N[U].values,k=w[U];if(V&&_)for(let H=0;H<_.length;H++){let j=V.idx[_[H]];k.push($[j])}else if(K)for(let H=0;H<K.length;H++){let j=K[H];k.push($[j])}}return this.empty.dataFrame.fields.forEach((U,$)=>{U.values=w[$]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var E=e(89591),P=e(1277),S=e(9738);class M{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(O,N){const o=await(0,y.Sd)(N);return o.query?.length&&o.query!=="*"&&(O.query=o.query),o.kind?.length===1&&S.xb[o.kind[0]]&&(O.type=S.xb[o.kind[0]]),o.uid?O.dashboardUID=o.uid:o.location?.length&&(O.folderUIDs=[o.location]),O}async search(O){if(O.facet?.length)throw new Error("facets not supported!");if(O.from!==void 0){if(!O.limit)throw new Error("Must specify non-zero limit parameter when using from");if(O.from/O.limit%1!==0)throw new Error("From parameter must be a multiple of limit")}const N=O.limit??(O.from!==void 0?1:S.E_),o=O.from!==void 0?O.from/N+1:void 0,w=await this.composeQuery({limit:N,tag:O.tags,sort:O.sort,page:o},O);return this.doAPIQuery(w)}async starred(O){if(O.facet?.length)throw new Error("facets not supported!");const N=await this.composeQuery({limit:O.limit??S.E_,tag:O.tags,sort:O.sort,starred:O.starred},O);return this.doAPIQuery(N)}async getSortOptions(){return(await P.ae.get("/api/search/sorting")).sortOptions.map(N=>({value:N.name,label:N.displayName}))}async tags(O){return(await P.ae.get("/api/dashboards/tags")).sort((o,w)=>w.count-o.count)}async doAPIQuery(O){const N=await P.ae.get("/api/search",O),o=[],w=[],K=[],V=[],_=[],U=[],$=[];let k;for(let z of N){const F=z.type==="dash-folder"?"folder":"dashboard";o.push(F),w.push(z.title),K.push(z.uid),V.push(z.url),_.push(z.tags),$.push(z.sortMeta);let J=z.folderUid;!J&&F==="dashboard"&&(J="general"),U.push(J),z.sortMetaName?.length&&(k=z.sortMetaName),z.folderUid&&z.folderTitle?this.locationInfo[z.folderUid]={kind:"folder",name:z.folderTitle,url:z.folderUrl,folderId:z.folderId}:F==="folder"&&(this.locationInfo[z.uid]={kind:F,name:z.title,url:z.url,folderId:z.id})}const H={fields:[{name:"kind",type:E.fS.string,config:{},values:o},{name:"name",type:E.fS.string,config:{},values:w},{name:"uid",type:E.fS.string,config:{},values:K},{name:"url",type:E.fS.string,config:{},values:V},{name:"tags",type:E.fS.other,config:{},values:_},{name:"location",type:E.fS.string,config:{},values:U}],length:w.length,meta:{custom:{count:w.length,max_score:1,locationInfo:this.locationInfo}}};k?.length&&$.length&&(H.meta.custom.sortBy=k,H.fields.push({name:k,type:E.fS.number,config:{},values:$}));for(const z of H.fields)z.display=(0,a.U)({field:z,theme:t.config.theme2});const j=new n.U(H);return{totalRows:H.length,view:j,loadMoreItems:async(z,F)=>{},isItemLoaded:z=>!0}}}let R;function I(){if(!R){const A=new M,O=t.config.featureToggles.panelTitleSearch;R=O?new f(A):A,O&&location.search.includes("do-frontend-query")&&(R=new p(R))}return R}},39971:(X,L,e)=>{"use strict";e.d(L,{Sd:()=>n,f9:()=>c});var t=e(97433);async function n(l){return l.query&&l.query.indexOf("folder:current")>=0&&(l={...l,location:await r(),query:l.query.replace("folder:current","").trim()},l.query?.length||(l.query="*")),Promise.resolve(l)}async function r(){try{let l=(0,t.h4)().getCurrent();return l||(await a(500),l=(0,t.h4)().getCurrent()),Promise.resolve(l?.meta?.folderUid)}catch(l){console.error(l)}}function a(l){return new Promise(d=>setTimeout(d,l))}function i(l,d){return l==="dashboard"?"apps":l==="folder"?d?"folder-open":"folder":"question-circle"}function y(l){switch(l){case"dashboard":case"folder":case"panel":return l;default:return"dashboard"}}function c(l,d){const f=d?.dataFrame.meta?.custom,m={kind:y(l.kind),uid:l.uid,title:l.name,url:l.url,tags:l.tags??[]},u=f?.sortBy;if(u){const h=l[u];(typeof h=="string"||typeof h=="number")&&(m.sortMetaName=u,m.sortMeta=h)}if(l.location){const h=l.location.split("/"),C=h[h.length-1],x=f?.locationInfo[C];x&&(m.parentTitle=x.name,m.parentKind=x.kind,m.parentUID=C)}return m}},6868:(X,L,e)=>{"use strict";e.d(L,{o:()=>t});var t=(r=>(r.DashDB="dash-db",r.DashHome="dash-home",r.DashFolder="dash-folder",r))(t||{}),n=(r=>(r.List="list",r.Folders="folders",r))(n||{})},41182:(X,L,e)=>{"use strict";e.d(L,{J:()=>de});var t=e(86832),n=e(14255),r=e(26205),a=e(79059),i=e(98982),y=e(34547),c=e(16261),l=e(87842),d=e(77242),f=e(45882),m=e(49955);let u={};function h(Pe){const ye=u[Pe];return ye||(u[Pe]=(0,t.property)(Pe))}class C{constructor(ye,he,me){this.state={name:ye.name,value:he,text:me,type:ye.type}}getValue(ye){let{value:he}=this.state;return he==="string"||he==="number"||he==="boolean"?he:String(he)}getValueText(){const{value:ye,text:he}=this.state;return typeof he=="string"?ye===l.r2?l.xk:he:Array.isArray(he)?he.join(" + "):(console.log("value",he),String(he))}}let x;function b(Pe,ye,he){return x?(x.state.name=Pe.name,x.state.type=Pe.type,x.state.value=ye,x.state.text=he):x=new C(Pe,ye,he),x}function g(Pe,ye,he,me){if(he=he||{},Pe==null||(0,d.Kn)(he)&&ye!==y.b8.QueryParam)return"";if(!Array.isArray(Pe)&&typeof Pe=="object"&&(Pe=`${Pe}`),typeof ye=="function")return ye(Pe,he,g);ye||(ye=y.b8.Glob);let De=ye.split(":");De.length>1?(ye=De[0],De=De.slice(1)):De=[];let le=i.Vl.getIfExists(ye);le||(console.error(`Variable format ${ye} not found. Using glob format as fallback.`),le=i.Vl.get(y.b8.Glob));const Ee=b(he,Pe,me??Pe);return le.formatter(Pe,De,Ee)}var p=e(21306),v=e.n(p),E=e(24824),P=e(69307),S=e(73),M=e(6278),R=e(38361),I=e(83502),A=e(89591),O=e(86127),N=e(94123),o=e(69330),w=e(36822);function K(Pe,ye,he){return new Proxy({},{get:(me,De)=>{if(De==="name")return Pe.name;if(De==="displayName")return(0,o.CZ)(Pe,ye,he);if(De==="labels"||De==="formattedLabels")return Pe.labels?{...Pe.labels,__values:Object.values(Pe.labels).sort().join(", "),toString:()=>(0,w.aA)(Pe.labels,"",!0)}:""}})}function V(Pe,ye,he,me){const De=_(Pe,ye,he);return g(De,me)}function _(Pe,ye,he){const me=he?.__dataContext;if(!me)return Pe;const{frame:De,rowIndex:le,field:Ee,calculatedValue:be}=me.value;if(be)switch(ye){case"numeric":return be.numeric.toString();case"raw":return be.numeric;case"time":return"";case"text":default:return(0,I.zc)(be)}if(le===void 0)return Pe;if(ye==="time"){const ot=De.fields.find(Qe=>Qe.type===A.fS.time);return ot?ot.values[le]:void 0}const ge=Ee.values[le];if(ye==="raw")return ge;const Ie=(Ee.display??k())(ge);switch(ye){case"numeric":return Ie.numeric;case"text":return Ie.text;default:return(0,I.zc)(Ie)}}function U(Pe,ye,he,me){const De=he?.__dataContext;if(!De||!ye)return Pe;const{frame:le,rowIndex:Ee}=De.value;if(Ee===void 0||ye===void 0)return Pe;const be={name:le.name,refId:le.refId,fields:(0,O.z)({frame:le,rowIndex:Ee})},ge=h(ye)(be)??"";return g(ge,me)}let $;function k(){return $||($=(0,N.U)()),$}function H(Pe,ye,he,me){const De=he?.__dataContext;if(!De||ye!=="name")return Pe;const{frame:le,frameIndex:Ee}=De.value,be=(0,o.nf)(le,Ee);return g(be,me)}function j(Pe,ye,he,me){const De=he?.__dataContext;if(!De||ye===void 0||ye==="")return Pe;const{frame:le,field:Ee,data:be}=De.value,ge=K(Ee,le,be),ue=h(ye)(ge)??"";return g(ue,me)}const z={__value:V,__data:U,__series:H,__field:j,[E.W.includeVars]:F,[E.W.keepTime]:J,__timezone:Q};function F(Pe,ye,he){const me=(0,R.c)(he);return P.Cj.toUrlParams(me)}function J(){return P.Cj.toUrlParams((0,M.$t)().timeRangeForUrl())}function Q(){const Pe=(0,S.Z)({timeZone:(0,M.$t)().timeModel?.getTimezone()});return Pe==="browser"?v().tz.guess():Pe}const Z={getFilteredVariables:f.Q4,getVariables:f.ng,getVariableWithName:f._K};class ne{constructor(ye=Z){this.dependencies=ye,this.regex=m.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this._adhocFiltersDeprecationWarningLogged=new Map,this._variables=[]}init(ye,he){this._variables=ye,this.timeRange=he,this.updateIndex()}get variables(){return(0,n.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){const ye=he=>he||he==="";if(this.index=this._variables.reduce((he,me)=>(me.current&&(me.current.isNone||ye(me.current.value))&&(he[me.name]=me),he),{}),this.timeRange){const he=this.timeRange.from.valueOf().toString(),me=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:he,text:he}},__to:{current:{value:me,text:me}}}}}updateTimeRange(ye){this.timeRange=ye,this.updateIndex()}variableInitialized(ye){this.index[ye.name]=ye}getAdhocFilters(ye){let he=[],me=(0,r.F)().getInstanceSettings(ye);if(!me)return[];this._adhocFiltersDeprecationWarningLogged.get(me.type)||((0,n.d)(`DataSource ${me.type}`,"templateSrv.getAdhocFilters","filters property on the request (DataQueryRequest). Or if this is called from interpolateVariablesInQueries or applyTemplateVariables it is passed as a new argument"),this._adhocFiltersDeprecationWarningLogged.set(me.type,!0));for(const De of this.getAdHocVariables()){const le=De.datasource?.uid;(le===me.uid||le?.indexOf("$")===0&&this.replace(le)===ye)&&(he=he.concat(De.filters))}return he}setGrafanaVariable(ye,he){this.grafanaVariables.set(ye,he)}setGlobalVariable(ye,he){(0,n.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[ye]:{current:he}}}getVariableName(ye){this.regex.lastIndex=0;const he=this.regex.exec(ye);return he?he.slice(1).find(De=>De!==void 0):null}containsTemplate(ye){if(!ye)return!1;const he=this.getVariableName(ye),me=he&&this.getVariableAtIndex(he);return me!=null}variableExists(ye){return(0,n.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(ye)}highlightVariablesAsHtml(ye){return!ye||!(0,t.isString)(ye)?ye:(ye=(0,t.escape)(ye),this._replaceWithVariableRegex(ye,void 0,(he,me)=>this.getVariableAtIndex(me)?'<span class="template-variable">'+he+"</span>":he))}getAllValue(ye){if(ye.allValue)return ye.allValue;const he=[];for(let me=1;me<ye.options.length;me++)he.push(ye.options[me].value);return he}getVariableValue(ye,he){return he?h(he)(ye.value):ye.value}getVariableText(ye,he){return ye.value===he||typeof he!="string"?ye.text:he}replace(ye,he,me,De){return he&&he.__sceneObject?i.ep.interpolate(he.__sceneObject.value,ye,he,me):ye?(this.regex.lastIndex=0,this._replaceWithVariableRegex(ye,me,(le,Ee,be,ge)=>{const ue=this._evaluateVariableExpression(le,Ee,be,ge,he);return De&&De.push({match:le,variableName:Ee,fieldPath:be,format:ge,value:ue,found:ue!==le}),ue})):ye??""}_evaluateVariableExpression(ye,he,me,De,le){const Ee=this.getVariableAtIndex(he),be=le?.[he];if(be){const ot=this.getVariableValue(be,me),Qe=this.getVariableText(be,ot);if(ot!=null)return g(ot,De,Ee,Qe)}if(!Ee){const ot=z[he];return ot?ot(ye,me,le,De):ye}if(De===y.b8.QueryParam||(0,d.Kn)(Ee)){const ot=c.z.get(Ee.type).getValueForUrl(Ee),Qe=(0,d.Kn)(Ee)?Ee.id:Ee.current.text;return g(ot,De,Ee,Qe)}const ge=this.grafanaVariables.get(Ee.current.value);if(ge)return g(ge,De,Ee);let ue=Ee.current.value,Ie=Ee.current.text;if(this.isAllValue(ue)&&(ue=this.getAllValue(Ee),Ie=l.xk,Ee.allValue&&De!==y.b8.Text&&De!==y.b8.PercentEncode))return this.replace(ue);if(me){const ot=this.getVariableValue({value:ue,text:Ie},me);if(ot!=null)return g(ot,De,Ee,Ie)}return g(ue,De,Ee,Ie)}_replaceWithVariableRegex(ye,he,me){return this.regex.lastIndex=0,ye.replace(this.regex,(De,le,Ee,be,ge,ue,Ie)=>me(De,le||Ee||ge,ue,be||Ie||he))}isAllValue(ye){return ye===l.r2||Array.isArray(ye)&&ye[0]===l.r2}replaceWithText(ye,he){return(0,n.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(ye,he,"text")}getVariableAtIndex(ye){if(ye)return this.index[ye]?this.index[ye]:this.dependencies.getVariableWithName(ye)}getAdHocVariables(){return this.dependencies.getFilteredVariables(d.Kn)}}const ee=new ne;(0,a.l)(ee);const de=()=>ee},16261:(X,L,e)=>{"use strict";e.d(L,{z:()=>n});var t=e(77663);const n=new t.B},75247:(X,L,e)=>{"use strict";e.d(L,{m2:()=>P});var t=e(86832),n=e(52436),r=e(331),a=e(77242),i=e(73371),y=e(17174),c=e(45882),l=e(52471),d=e(49955),f=e(77960),m=e(68734),u=e(18266);const h={...m.Eg,type:"adhoc",datasource:null,filters:[]},C=(0,f.oM)({name:"templating/adhoc",initialState:u.s,reducers:{filterAdded:(o,w)=>{const K=(0,c.ir)(o,w.payload.id);K.type==="adhoc"&&K.filters.push(w.payload.data)},filterRemoved:(o,w)=>{const K=(0,c.ir)(o,w.payload.id);if(K.type!=="adhoc")return;const V=w.payload.data;K.filters.splice(V,1)},filterUpdated:(o,w)=>{const K=(0,c.ir)(o,w.payload.id);if(K.type!=="adhoc")return;const{filter:V,index:_}=w.payload.data;K.filters[_]=V},filtersRestored:(o,w)=>{const K=(0,c.ir)(o,w.payload.id);K.type==="adhoc"&&(K.filters=w.payload.data)}}}),{filterAdded:x,filterRemoved:b,filterUpdated:g,filtersRestored:p}=C.actions,v=C.reducer,E="Filters",P=o=>async(w,K)=>{let V=N(o,K());if(!V&&(w(O(o)),V=N(o,K()),!V))return;const _=V.filters.findIndex($=>$.key===o.key&&$.value===o.value);if(_===-1){const{value:$,key:k,operator:H}=o,j={value:$,key:k,operator:H};return await w(R((0,d.yQ)(V),j))}const U={...V.filters[_],operator:o.operator};return await w(S((0,d.yQ)(V),{index:_,filter:U}))},S=(o,w)=>async(K,V)=>{const _=(0,c.E0)(o,V());K((0,y.mb)(o.rootStateKey,g((0,d.Y6)(_,w)))),await K((0,i.MB)((0,d.yQ)(_),!0))},M=(o,w)=>async(K,V)=>{const _=getVariable(o,V());K(toKeyedAction(o.rootStateKey,filterRemoved(toVariablePayload(_,w)))),await K(variableUpdated(toKeyedVariableIdentifier(_),!0))},R=(o,w)=>async(K,V)=>{const _=(0,c.E0)(o,V());K((0,y.mb)(o.rootStateKey,x((0,d.Y6)(_,w)))),await K((0,i.MB)((0,d.yQ)(_),!0))},I=(o,w)=>async(K,V)=>{const _=getVariable(o,V());K(toKeyedAction(o.rootStateKey,filtersRestored(toVariablePayload(_,w)))),await K(variableUpdated(toKeyedVariableIdentifier(_),!0))},A=(o,w)=>async(K,V)=>{const _=getVariable(o,V());K(toKeyedAction(o.rootStateKey,changeVariableProp(toVariablePayload(_,{propName:"datasource",propValue:w}))));const $=(await getDatasourceSrv().get(w))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";K(toKeyedAction(o.rootStateKey,changeVariableEditorExtended({infoText:$})))},O=o=>(w,K)=>{const V=(0,c.S_)(K()),_={...(0,t.cloneDeep)(h),datasource:o.datasource,name:E,id:E,rootStateKey:V},U=!1,$=(0,c.Eo)(V,K()),k={type:"adhoc",id:_.id,rootStateKey:V};w((0,y.mb)(V,(0,l.VN)((0,d.Y6)(k,{global:U,model:_,index:$}))))},N=(o,w)=>{const K=(0,c.S_)(w),V=(0,c.AE)(K,w);return Object.values(V.variables).find(_=>(0,a.Kn)(_)&&_.datasource?.uid===o.datasource.uid)}},87842:(X,L,e)=>{"use strict";e.d(L,{IG:()=>y,UY:()=>t,r2:()=>r,xk:()=>n});const t="00000000-0000-0000-0000-000000000000",n="All",r="$__all",a="None",i="",y="var-"},331:(X,L,e)=>{"use strict";e.d(L,{PF:()=>n,Yo:()=>i,gl:()=>a});var t=e(77960);const n={id:"",isValid:!0,errors:{},name:"",extended:null},r=(0,t.oM)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(h,C)=>{h.name=C.payload.name,h.id=C.payload.id},variableEditorUnMounted:(h,C)=>n,changeVariableNameSucceeded:(h,C)=>{h.name=C.payload.data.newName,delete h.errors.name,h.isValid=Object.keys(h.errors).length===0},changeVariableNameFailed:(h,C)=>{h.name=C.payload.newName,h.errors.name=C.payload.errorText,h.isValid=Object.keys(h.errors).length===0},addVariableEditorError:(h,C)=>{h.errors[C.payload.errorProp]=C.payload.errorText,h.isValid=Object.keys(h.errors).length===0},removeVariableEditorError:(h,C)=>{delete h.errors[C.payload.errorProp],h.isValid=Object.keys(h.errors).length===0},changeVariableEditorExtended:(h,C)=>{h.extended={...h.extended,...C.payload}},cleanEditorState:()=>n}}),a=r.reducer,{changeVariableNameSucceeded:i,changeVariableNameFailed:y,variableEditorMounted:c,variableEditorUnMounted:l,changeVariableEditorExtended:d,addVariableEditorError:f,removeVariableEditorError:m,cleanEditorState:u}=r.actions},38361:(X,L,e)=>{"use strict";e.d(L,{c:()=>a});var t=e(79059),n=e(16261),r=e(87842);function a(i){const y={},c=(0,t.J)().getVariables();for(let l=0;l<c.length;l++){const d=c[l],f=i&&i[d.name];d.skipUrlSync||(f?y[r.IG+d.name]=f.value:y[r.IG+d.name]=n.z.get(d.type).getValueForUrl(d))}return y}},77242:(X,L,e)=>{"use strict";e.d(L,{R:()=>v,eL:()=>b,Ju:()=>E,Kn:()=>h,VC:()=>C,U4:()=>x,Xh:()=>u});var t=e(95405),n=e(53461),r=e(39953),a=e(75766),i=e(82803),y=e(68421),c=e(41407);function l({value:I,name:A,description:O,placeholder:N,onChange:o,onBlur:w,ariaLabel:K,required:V,width:_,testId:U}){const $=useStyles2(d),k=useId();return React.createElement(Field,{label:A,description:O,htmlFor:k},React.createElement(TextArea,{id:k,rows:2,value:I,onChange:o,onBlur:w,placeholder:N,required:V,"aria-label":K,cols:_,className:$.textarea,"data-testid":U}))}function d(I){return{textarea:(0,c.css)`
      white-space: pre-wrap;
      min-height: ${I.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${I.spacing(.75,1)};
      width: inherit;

      ${I.breakpoints.down("sm")} {
        width: 100%;
      }
    `}}const f="Grafana-LegacyVariableQueryEditor",m=({onChange:I,query:A})=>{const O=(0,i.wW)(d),[N,o]=(0,r.useState)(A),w=_=>{o(_.currentTarget.value)},K=(0,r.useCallback)(_=>{I(_.currentTarget.value,_.currentTarget.value)},[I]),V=(0,n.Me)();return r.createElement(y.K,{id:V,rows:2,value:N,onChange:w,onBlur:K,placeholder:"Metric name or tags query",required:!0,"aria-label":a.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:O.textarea})};m.displayName=f;const u=I=>I.type==="query",h=I=>I.type==="adhoc",C=I=>I.type==="constant",x=I=>"multi"in I,b=I=>"options"in I,g=I=>"current"in I;function p(I){return I===null?!1:typeof I=="string"}const v=I=>!!I.metricFindQuery&&!I.variables,E=I=>{if(!I.variables||I.variables.getType()!==t.j2.Standard)return!1;const A=I.variables;return"toDataQuery"in A&&!!A.toDataQuery},P=I=>{if(!I.variables||I.variables.getType()!==VariableSupportType.Custom)return!1;const A=I.variables;return"query"in A&&"editor"in A&&!!A.query&&!!A.editor},S=I=>I.variables?I.variables.getType()===VariableSupportType.Datasource:!1;function M(I,A){return I?I.displayName===LEGACY_VARIABLE_QUERY_EDITOR_NAME||v(A):!1}function R(I,A){return I?I.displayName!==LEGACY_VARIABLE_QUERY_EDITOR_NAME&&(S(A)||E(A)||P(A)):!1}},74557:(X,L,e)=>{"use strict";e.d(L,{yy:()=>c,cv:()=>I});var t=e(77960),n=e(86832),r=e(40729);const a=(A,...O)=>O.reduce((N,o)=>o(N),A);var i=e(87842),y=e(77242);const c={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},l=1e3,d=A=>Array.isArray(A)?A.reduce((O,N)=>((0,n.isString)(N.value)&&(O[N.value]=N),O),{}):{},f=A=>{if(!Array.isArray(A.options))return A.options=[],A;const O=d(A.selectedValues);return A.selectedValues=Object.values(O),A.options=A.options.map(N=>{if(!(0,n.isString)(N.value))return N;const o=!!O[N.value];return N.selected===o?N:{...N,selected:o}}),A.options=m(A.options),A},m=A=>Array.isArray(A)?A.length<=l?A:A.slice(0,l):[],u=A=>{const{options:O,selectedValues:N}=A;return O.length===0||N.length>0||!O[0]||O[0].value!==i.r2||(A.selectedValues=[{...O[0],selected:!0}]),A},h=A=>{const{selectedValues:O}=A;return O.length>1&&(A.selectedValues=O.filter(N=>N.value!==i.r2)),A},C=A=>A.filter(O=>O.value!==i.r2).map(O=>({...O,selected:!0})),x=(0,t.oM)({name:"templating/optionsPicker",initialState:c,reducers:{showOptions:(A,O)=>{const{query:N,options:o}=O.payload;if(A.highlightIndex=-1,A.options=(0,n.cloneDeep)(o),A.id=O.payload.id,A.queryValue="",A.multi=!1,(0,y.U4)(O.payload)&&(A.multi=O.payload.multi??!1),(0,y.Xh)(O.payload)){const{queryValue:w}=O.payload,K=(0,r.b)(N);A.queryValue=K&&w?w:""}return A.selectedValues=A.options.filter(w=>w.selected),a(A,u,f)},hideOptions:(A,O)=>({...c}),toggleOption:(A,O)=>{const{option:N,clearOthers:o,forceSelect:w}=O.payload,{multi:K,selectedValues:V}=A;if(N){const _=!V.find(U=>U.value===N.value&&U.text===N.text);if(N.value===i.r2||!K||o)return _||w?A.selectedValues=[{...N,selected:!0}]:A.selectedValues=[],a(A,u,h,f);if(w||_)return A.selectedValues.push({...N,selected:!0}),a(A,u,h,f);A.selectedValues=V.filter(U=>U.value!==N.value&&U.text!==N.text)}else A.selectedValues=[];return a(A,u,h,f)},moveOptionsHighlight:(A,O)=>{let N=A.highlightIndex+O.payload;return N<0?N=-1:N>=A.options.length&&(N=A.options.length-1),{...A,highlightIndex:N}},toggleAllOptions:(A,O)=>{const N=A.selectedValues.find(w=>w.value===i.r2),o=A.options.find(w=>w.value===i.r2);return A.selectedValues.length>0&&o&&!N?(A.selectedValues=[],A.selectedValues.push({text:o.text??"All",value:o.value,selected:!0}),a(A,f)):N&&A.selectedValues.length===1?(A.selectedValues=C(A.options),a(A,f)):A.selectedValues.length>0&&!o?(A.selectedValues=[],a(A,f)):(A.selectedValues=C(A.options),a(A,f))},updateSearchQuery:(A,O)=>(A.queryValue=O.payload,A),updateOptionsAndFilter:(A,O)=>{const N=(0,n.trimStart)((A.queryValue??"").toLowerCase());return A.options=O.payload.filter(o=>{const w=o.text??"";return(Array.isArray(w)?w.toString():w).toLowerCase().indexOf(N)!==-1}),A.highlightIndex=0,a(A,u,f)},updateOptionsFromSearch:(A,O)=>(A.options=O.payload,A.highlightIndex=0,a(A,u,f)),cleanPickerState:()=>c}}),{toggleOption:b,showOptions:g,hideOptions:p,moveOptionsHighlight:v,toggleAllOptions:E,updateSearchQuery:P,updateOptionsAndFilter:S,updateOptionsFromSearch:M,cleanPickerState:R}=x.actions,I=x.reducer},73371:(X,L,e)=>{"use strict";e.d(L,{DU:()=>Tt,MB:()=>We});var t=e(86832),n=e(10694),r=e(13601),a=e(32688),i=e(97316),y=e(97125),c=e(6278),l=e(74600),d=e(14687),f=e(21308),m=e(1277);class u{_linkTo(Le,Ke){Ke<=0&&Le.inputEdges.push(this),Ke>=0&&Le.outputEdges.push(this),Le.edges.push(this)}link(Le,Ke){if(!Le)throw Error("inputNode is required");if(!Ke)throw Error("outputNode is required");return this.unlink(),this.inputNode=Le,this.outputNode=Ke,this._linkTo(Le,1),this._linkTo(Ke,-1),this}unlink(){let Le;const Ke=this.inputNode,ht=this.outputNode;Ke&&ht&&(Le=Ke.edges.indexOf(this),Le>-1&&Ke.edges.splice(Le,1),Le=ht.edges.indexOf(this),Le>-1&&ht.edges.splice(Le,1),Le=Ke.outputEdges.indexOf(this),Le>-1&&Ke.outputEdges.splice(Le,1),Le=ht.inputEdges.indexOf(this),Le>-1&&ht.inputEdges.splice(Le,1))}}class h{constructor(Le){this.name=Le,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(Le){return Le?typeof Le=="object"?this.inputEdges.find(Ke=>Ke.inputNode?.name===Le.name):this.inputEdges.find(Ke=>Ke.inputNode?.name===Le):null}getEdgeTo(Le){return Le?typeof Le=="object"?this.outputEdges.find(Ke=>Ke.outputNode?.name===Le.name):this.outputEdges.find(Ke=>Ke.outputNode?.name===Le):null}getOptimizedInputEdges(){const Le=[];return this.inputEdges.forEach(Ke=>{Ke.inputNode?.inputEdges.map(xt=>xt.inputNode)?.forEach(xt=>{const lt=xt?.getEdgeTo(this.name);lt&&Le.push(lt)})}),this.inputEdges.filter(Ke=>Le.indexOf(Ke)===-1)}}class C{constructor(){this.nodes={}}createNode(Le){const Ke=new h(Le);return this.nodes[Le]=Ke,Ke}createNodes(Le){const Ke=[];return Le.forEach(ht=>{Ke.push(this.createNode(ht))}),Ke}link(Le,Ke){let ht=[],xt=[];const lt=[],Rt=[];Le instanceof Array?ht=Le:ht=[Le],Ke instanceof Array?xt=Ke:xt=[Ke];for(let Xt=0;Xt<ht.length;Xt++){const $n=ht[Xt];if(typeof $n=="string"){const Mt=this.getNode($n);if(!Mt)throw Error(`cannot link input node named ${$n} since it doesn't exist in graph`);lt.push(Mt)}else lt.push($n)}for(let Xt=0;Xt<xt.length;Xt++){const $n=xt[Xt];if(typeof $n=="string"){const Mt=this.getNode($n);if(!Mt)throw Error(`cannot link output node named ${$n} since it doesn't exist in graph`);Rt.push(Mt)}else Rt.push($n)}const Ut=[];return lt.forEach(Xt=>{Rt.forEach($n=>{Ut.push(this.createEdge().link(Xt,$n))})}),Ut}descendants(Le){if(!Le.length)return new Set;const Ke=new Set(b(Le)?Le.map(ht=>this.nodes[ht]).filter(ht=>ht!==void 0):Le);return this.descendantsRecursive(Ke)}descendantsRecursive(Le,Ke=new Set){for(const ht of Le){const xt=new Set;for(const{inputNode:lt}of ht.inputEdges)lt&&!Ke.has(lt)&&(Ke.add(lt),xt.add(lt));this.descendantsRecursive(xt,Ke)}return Ke}createEdge(){return new u}getNode(Le){return this.nodes[Le]}}const x=we=>{Object.keys(we.nodes).forEach(Le=>{const Ke=we.nodes[Le];let ht=Ke.outputEdges.map(lt=>lt.outputNode?.name).join(", ");ht||(ht="<none>");let xt=Ke.inputEdges.map(lt=>lt.inputNode?.name).join(", ");xt||(xt="<none>"),console.log(`${Ke.name}:
 - links to:   ${ht}
 - links from: ${xt}`)})};function b(we){return we.length>0&&typeof we[0]=="string"}var g=e(52436),p=e(41182),v=e(16261),E=e(87842),P=e(331),S=e(77242),M=e(24824);function R(we,Le){const Ke=new Set;for(const ht of we)Ke.add(Le(ht));return Ke}var I=e(3706),A=e(44951),O=e(75397),N=e(49955);const o=we=>{const Le=[];for(const Ke of we)Le.push({id:Ke.id,label:`${Ke.id}`});return Le},w=(we,Le)=>we.filter(Ke=>Le.some(ht=>ht.from===Ke.id||ht.to===Ke.id)),K=we=>{const Le=[];for(const Ke of we)for(const ht of we){if(Ke===ht)continue;variableAdapters.get(Ke.type).dependsOn(Ke,ht)&&Le.push({from:Ke.id,to:ht.id})}return Le};function V(we){const Le=(0,N.a9)(we);return Le?Le.slice(1).find(ht=>ht!==void 0):void 0}const _=(we,Le)=>{variableRegex.lastIndex=0;const Ke=[],xt=safeStringifyValue(Le,2).match(variableRegex);if(!xt)return Ke;for(const lt of xt){if(!lt||lt.indexOf("$__")!==-1||lt.indexOf("${__")!==-1||lt.indexOf("$hashKey")!==-1)continue;const Rt=V(lt);we.some(Ut=>Ut.id===Rt)||Ke.find(Ut=>Ut===Rt)||Rt&&Ke.push(Rt)}return Ke},U={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},$=(we,Le,Ke)=>{const ht=Object.keys(Le.value).reduce((lt,Rt)=>{const Ut=Le.value[Rt];if(!Ut||typeof Ut!="string")return lt;const Xt=U[Rt]?U[Rt].find(Mt=>Mt.test(we)):void 0;let $n=containsVariable(Ut,we);return Rt==="repeat"&&Ut===we&&($n=!0),!Xt&&$n&&(lt={...lt,[Rt]:Ut}),lt},{}),xt=Object.keys(Le.value).reduce((lt,Rt)=>{const Ut=Le.value[Rt];if(Ut&&typeof Ut=="object"&&Object.keys(Ut).length){let Xt=Ut.title||Ut.name||Ut.id||Rt;Array.isArray(Le.value)&&Le.key==="panels"&&(Xt=`${Xt}[${Ut.id}]`);const $n=$(we,{key:Rt,value:Ut},{});Object.keys($n).length&&(lt={...lt,[Xt]:$n})}return lt},{});return(Object.keys(ht).length||Object.keys(xt).length)&&(Ke={...Ke,...ht,...xt}),Ke},k=(we,Le)=>{if(!Le)return{unUsed:[],usages:[]};const Ke=[];let ht=[];const xt=Le.getSaveModelClone();for(const lt of we){const Rt=lt.id,Ut=$(Rt,{key:"model",value:xt},{});!Object.keys(Ut).length&&!isAdHoc(lt)&&Ke.push(lt),Object.keys(Ut).length&&ht.push({variable:lt,tree:Ut})}return{unUsed:Ke,usages:ht}};async function H(we,Le){return new Promise((Ke,ht)=>{setTimeout(()=>{try{const xt=j(we,Le);Ke(Q(xt))}catch(xt){ht(xt)}},200)})}function j(we,Le){if(!Le)return[];let Ke=[];const ht=Le.getSaveModelClone(),xt=_(we,ht);for(const lt of xt){const Rt=$(lt,{key:"model",value:ht},{});if(Object.keys(Rt).length){const Ut={id:lt,name:lt};Ke.push({variable:Ut,tree:Rt})}}return Ke}function z(we,Le,Ke){const ht=R(Le.descendants(we),lt=>lt.name);ht.add(M.W.includeVars);for(const lt of we)ht.add(lt);return F([...ht],Ke)}function F(we,Le){const Ke=[];for(const ht of we)Le[ht]&&Ke.push(...Le[ht]);return new Set(Ke)}const J=(we,Le)=>{const{id:Ke,value:ht}=Le,{nodes:xt,edges:lt}=we;if(ht&&typeof ht=="string"){const Rt=`${Le.id}-${ht}`;return xt.push({id:Rt,label:ht}),lt.push({from:Rt,to:Ke}),we}if(ht&&typeof ht=="object"){const Rt=Object.keys(ht);for(const Ut of Rt){const Xt=`${Le.id}-${Ut}`;xt.push({id:Xt,label:Ut}),lt.push({from:Xt,to:Ke}),we=J(we,{id:Xt,value:ht[Ut]})}return we}return we},Q=we=>{const Le=[];for(const Ke of we){const{variable:ht,tree:xt}=Ke,lt={variable:ht,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};Le.push(J(lt,{id:"dashboard",value:xt}))}return Le},Z=we=>Object.values(we).reduce((Ke,ht)=>typeof ht=="object"?Ke+Z(ht):Ke+1,0),ne=(we,Le)=>{const Ke=Le.find(ht=>ht.variable.id===we);return Ke?Z(Ke.tree):0};function ee(we){const Le=[];for(const Ke of we)Le.push(Ke),Ke.panels?.length&&Le.push(...ee(Ke.panels.map(ht=>new PanelModel(ht))));return Le}function de(we){const Le={};for(const Ke of we){const ht=(0,I.Jg)(Ke),xt=[...ht.matchAll(/"repeat":"([^"]+)"/g)].map(Ut=>Ut[1]),lt=ht.match(N.J7)?.map(Ut=>V(Ut))??[],Rt=[...xt,...lt];for(const Ut of Rt)Ut in Le?Le[Ut].add(Ke.id):Le[Ut]=new Set([Ke.id])}return Le}var Pe=e(74557),ye=e(68734),he=e(41406),me=e(795),De=e(17174),le=e(57658);const Ee=(we,Le=-1,Ke=!1,ht=!1)=>{const xt={};if(ht){const lt={...initialVariableModelState,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"A dashboard title",uid:"An dashboard UID",toString:()=>"A dashboard title"}}},Rt={...initialVariableModelState,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"An org name",id:1,toString:()=>"1"}}},Ut={...initialVariableModelState,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{login:"admin",id:1,email:"admin@test",toString:()=>"1"}}};xt[lt.id]=lt,xt[Rt.id]=Rt,xt[Ut.id]=Ut}for(let lt=0;lt<we;lt++)xt[lt]=createQueryVariable({id:lt.toString(),name:`Name-${lt}`,label:`Label-${lt}`,index:lt});return Ke&&(xt[NEW_VARIABLE_ID]=createQueryVariable({id:NEW_VARIABLE_ID,name:`Name-${NEW_VARIABLE_ID}`,label:`Label-${NEW_VARIABLE_ID}`,index:we})),xt},be=(we,Le={})=>{const Ke={id:"0",rootStateKey:"key",index:0,name:"0"};return{initialState:{0:{...{...we.initialState,...Ke},...Le}}}},ge=()=>combineReducers({dashboard:dashboardReducer,templating:keyedVariablesReducer}),ue=()=>combineReducers({templating:keyedVariablesReducer});function Ie(we,Le){return{templating:{lastKey:we,keys:{[we]:{...getInitialTemplatingState(),...Le}}}}}function ot(we,Le){return we.find(ht=>ht.name===Le)}function Qe(we){return(we.type==="query"||we.type==="datasource"||we.type==="interval")&&we.refresh===he.Bd.onTimeRangeChanged}var Me=e(45882),Ne=e(52471),qe=e(33022),bt=e(16234);const Fe=(we,Le)=>(Ke,ht)=>{let xt=0;const lt=Le.templating.list;for(let Ut=0;Ut<lt.length;Ut++){const Xt=Ve(lt[Ut]);Xt.rootStateKey=we,variableAdapters.getIfExists(Xt.type)&&Ke(toKeyedAction(we,addVariable(toVariablePayload(Xt,{global:!1,index:xt++,model:Xt}))))}getTemplateSrv().updateTimeRange(getTimeSrv().timeRange());const Rt=getVariablesByKey(we,ht());for(const Ut of Rt)Ke(toKeyedAction(we,variableStateNotStarted(toVariablePayload(Ut))))};function Ve(we){if(!hasOptions(we))return we;let Le=!1;for(const Ke of we.options)if(Ke.selected=!1,Array.isArray(we.current.value))for(const ht of we.current.value)Ke.value===ht&&(Ke.selected=Le=!0);else Ke.value===we.current.value&&(Ke.selected=Le=!0);return!Le&&we.options.length&&(we.options[0].selected=!0),we}const Ue=(we,Le)=>Ke=>{const ht={...initialVariableModelState,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:Le.title,uid:Le.uid,toString:()=>Le.title}}};Ke(toKeyedAction(we,addVariable(toVariablePayload(ht,{global:ht.global,index:ht.index,model:ht}))));const xt={...initialVariableModelState,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:contextSrv.user.orgName,id:contextSrv.user.orgId,toString:()=>contextSrv.user.orgId.toString()}}};Ke(toKeyedAction(we,addVariable(toVariablePayload(xt,{global:xt.global,index:xt.index,model:xt}))));const lt={...initialVariableModelState,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{login:contextSrv.user.login,id:contextSrv.user.id,email:contextSrv.user.email,toString:()=>contextSrv.user.id.toString()}}};Ke(toKeyedAction(we,addVariable(toVariablePayload(lt,{global:lt.global,index:lt.index,model:lt}))))},it=(we,Le)=>(Ke,ht)=>{const{rootStateKey:xt}=we,lt=getVariable(we,ht());if(!isMulti(lt)||isEmptyObject(lt.current))return;const Rt=alignCurrentWithMulti(lt.current,Le);Ke(toKeyedAction(xt,changeVariableProp(toVariablePayload(we,{propName:"multi",propValue:Le})))),Ke(toKeyedAction(xt,changeVariableProp(toVariablePayload(we,{propName:"current",propValue:Rt}))))},ze=async(we,Le)=>{if(!we.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${we.id}`);if(Xe(we,Le))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const Ke=St(we,Le);Bt(we.rootStateKey,Ke,Le)&&await new Promise(ht=>{const xt=store.subscribe(()=>{if(!we.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${we.id}`);Bt(we.rootStateKey,Ke,store.getState())||(xt(),ht())})})},Xe=(we,Le,Ke=new Set)=>Ke.has(we.id)?!0:(Ke=new Set([...Ke,we.id]),St(we,Le).some(ht=>Xe(ht,Le,Ke))),St=(we,Le)=>{if(!we.rootStateKey)return[];const Ke=[];for(const ht of getVariablesByKey(we.rootStateKey,Le))we!==ht&&variableAdapters.getIfExists(we.type)&&variableAdapters.get(we.type).dependsOn(we,ht)&&Ke.push(ht);return Ke},Bt=(we,Le,Ke)=>{if(Le.length===0)return!1;const ht=getVariablesByKey(we,Ke);return Le.filter(lt=>ht.some(Rt=>Rt.id===lt.id&&(Rt.state===LoadingState.NotStarted||Rt.state===LoadingState.Loading))).length>0},zt=(we,Le)=>async(Ke,ht)=>{const xt=getVariable(we,ht());await ze(xt,ht());const lt=Le[VARIABLE_PREFIX+xt.name];if(lt!==void 0){const Rt=ensureStringValues(lt);await variableAdapters.get(xt.type).setValueFromUrl(xt,Rt);return}if(xt.hasOwnProperty("refresh")){const Rt=xt;if(Rt.refresh===VariableRefresh.onDashboardLoad||Rt.refresh===VariableRefresh.onTimeRangeChanged){await Ke(Ge(toKeyedVariableIdentifier(Rt)));return}}Ke(dt(we))},qt=we=>async(Le,Ke)=>{const ht=locationService.getSearchObject(),xt=getVariablesByKey(we,Ke()).map(async lt=>await Le(zt(toKeyedVariableIdentifier(lt),ht)));await Promise.all(xt)},Qt=(we,Le)=>async(Ke,ht)=>{const xt=ensureStringValues(Le),lt=getVariable(we,ht());getVariableRefresh(lt)!==VariableRefresh.never&&await Ke(Ge(toKeyedVariableIdentifier(lt)));const Rt=getVariable(toKeyedVariableIdentifier(lt),ht());if(!hasOptions(Rt))return;if(!Rt)throw new Error(`Couldn't find variable with name: ${lt.name}`);let Ut=Rt.options.find(Xt=>Xt.text===xt||Xt.value===xt);if(!Ut&&isMulti(Rt)&&Rt.allValue&&xt===Rt.allValue&&(Ut={text:ALL_VARIABLE_TEXT,value:ALL_VARIABLE_VALUE,selected:!1}),!Ut){let Xt=xt;const $n=xt;Array.isArray(xt)&&(Xt=xt.reduce((Mt,yt)=>{const At=Rt.options.find(Ht=>Ht.value===yt);return At?[].concat(Mt,[At.text]):[].concat(Mt,[yt])},[])),Ut={text:Xt,value:$n,selected:!1}}isMulti(Rt)&&(Ut=alignCurrentWithMulti({text:castArray(Ut.text),value:castArray(Ut.value),selected:!1},Rt.multi)),await variableAdapters.get(lt.type).setValue(Rt,Ut)},yn=we=>{let Le,Ke,ht,xt;const lt=[];for(Le=0;Le<we.options.length;Le++)if(xt={...we.options[Le]},xt.selected=!1,Array.isArray(we.current.value))for(Ke=0;Ke<we.current.value.length;Ke++)ht=we.current.value[Ke],xt.value===ht&&(xt.selected=!0,lt.push(xt));else xt.value===we.current.value&&(xt.selected=!0,lt.push(xt));return lt},Zt=(we,Le)=>(Ke,ht)=>{const xt=getVariable(we,ht());if(!hasOptions(xt))return Promise.resolve();const lt=xt.current||{},Rt=variableAdapters.get(xt.type).setValue;if(Array.isArray(lt.value)){const Mt=yn(xt);if(Mt.length===0){const At=xt.options[0];return Rt(xt,At)}const yt={value:Mt.map(At=>At.value),text:Mt.map(At=>At.text),selected:!0};return Rt(xt,yt)}let Ut=null;const Xt=getCurrentText(xt),$n=getCurrentValue(xt);if(Ut=xt.options?.find(Mt=>Mt.text===Xt||Mt.value===$n),Ut||Le&&(Ut=xt.options?.find(Mt=>Mt.text===Le||Mt.value===Le),Ut))return Rt(xt,Ut);if(xt.options){const Mt=xt.options[0];if(Mt)return Rt(xt,Mt)}return Promise.resolve()},re=(we,Le,Ke)=>async ht=>{const{rootStateKey:xt}=we;return ht(toKeyedAction(xt,setCurrentVariableValue(toVariablePayload(we,{option:Le})))),await ht(We(we,Ke))},Te=we=>{const Le=new C;return we.forEach(Ke=>{Le.createNode(Ke.name)}),we.forEach(Ke=>{we.forEach(ht=>{Ke!==ht&&v.z.get(Ke.type).dependsOn(Ke,ht)&&Le.link(Ke.name,ht.name)})}),Le},We=(we,Le,Ke=f.h$)=>async(ht,xt)=>{const lt=xt(),{rootStateKey:Rt}=we,Ut=(0,Me.E0)(we,lt);if((0,Me.AE)(Rt,lt).transaction.status===ye.LN.Fetching)return(0,N.iD)(Ut)===ye.Bd.never&&(await ht(st((0,N.yQ)(Ut))),ht(dt(we))),Promise.resolve();const Xt=(0,Me.gt)(Rt,lt),$n=Te(Xt),Mt=lt.dashboard?.getModel()?.panels??[],yt=de(Mt),At=(0,S.Kn)(Ut)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from(z([Ut.id],$n,yt))},Ht=$n.getNode(Ut.name);let tn=[];return Ht&&(tn=Ht.getOptimizedInputEdges().map(gn=>{const mn=Xt.find(Tn=>Tn.name===gn.inputNode?.name);return mn?ht(Ge((0,N.yQ)(mn))):Promise.resolve()})),Promise.all(tn).then(()=>{Le&&(Ke.publish(new ye.x9(At)),r.E1.partial(pe(Rt,xt)))})},Je=(we,Le,Ke,ht)=>(Le.includes(we.name)||Le.push(we.name),we.outputEdges.forEach(xt=>{const lt=xt.outputNode;if(lt&&!Le.includes(lt.name)){const Rt=Ke.find(Ut=>Ut.name===lt.name);Rt&&Rt.refresh===ye.Bd.onTimeRangeChanged&&ht.indexOf(Rt)===-1?(ht.push(Rt),Le.push(lt.name)):Je(lt,Le,Ke,ht)}}),ht),je=(we,Le)=>we.outputEdges.every(Ke=>{const ht=Ke.outputNode;if(ht){const xt=ot(Le,ht.name);if(xt&&xt.type==="query")return xt.refresh!==ye.Bd.onTimeRangeChanged}return!0}),pt=(we,Le)=>{const Ke=(0,Me.gt)(we,Le),ht=Te(Ke),xt=[],lt=[];return Ke.forEach(Rt=>{const Ut=ht.getNode(Rt.name);if(!xt.includes(Rt.name)&&Ut){const Xt=ot(Ke,Ut.name);if(!Xt)return;const $n=Qe(Xt);$n&&Ut.outputEdges.length===0&&lt.push(Xt),$n&&lt.includes(Xt)&&Ut.outputEdges.length>0&&(lt.push(Xt),Je(Ut,xt,Ke,lt)),$n&&Ut.outputEdges.length>0&&je(Ut,Ke)&&(lt.includes(Xt)||lt.push(Xt)),!$n&&Ut.outputEdges.length>0&&Je(Ut,xt,Ke,lt)}}),lt},ft=(we,Le)=>(0,Me.gt)(we,Le).filter(xt=>xt.hasOwnProperty("refresh")&&xt.hasOwnProperty("options")?xt.refresh===ye.Bd.onTimeRangeChanged:!1),Tt=(we,Le,Ke={templateSrv:(0,p.J)(),events:f.h$})=>async(ht,xt)=>{Ke.templateSrv.updateTimeRange(Le);let lt=[];a.config.featureToggles.refactorVariablesTimeRange?lt=pt(we,xt()):lt=ft(we,xt());const Rt=lt.map(Xt=>Xt.id),Ut=lt.map(Xt=>ht(Ye((0,N.yQ)(Xt))));try{await Promise.all(Ut),Ke.events.publish(new ye.eq({variableIds:Rt}))}catch(Xt){console.error(Xt),ht((0,i.$l)(at("Template variable service failed",Xt)))}},Ye=we=>async(Le,Ke)=>{const ht=(0,Me.E0)(we,Ke());if(!(0,S.eL)(ht))return;const xt=ht.options.slice();await Le(Ge((0,N.yQ)(ht),!0));const lt=(0,Me.E0)(we,Ke());if(!(0,S.eL)(lt))return;const Rt=lt.options;JSON.stringify(xt)!==JSON.stringify(Rt)&&Ke().dashboard.getModel()?.templateVariableValueUpdated()},Ce=(we,Le,Ke=appEvents)=>async(ht,xt)=>{const lt=[],Rt=xt().dashboard.getModel(),Ut=getVariablesByKey(we,xt());for(const At of Ut){const Ht=VARIABLE_PREFIX+At.name;if(!Le.hasOwnProperty(Ht)||!oe(At,Le[Ht].value))continue;let tn=Le[Ht].value;if(Le[Ht].removed){const mn=Rt?.templating.list.find(Tn=>Tn.name===At.name);mn&&hasCurrent(mn)&&(tn=mn.current.value),mn&&isConstant(mn)&&(tn=mn.query)}const gn=variableAdapters.get(At.type).setValueFromUrl(At,tn);lt.push(gn)}const Xt=Ut.filter(At=>{const Ht=VARIABLE_PREFIX+At.name;return Le.hasOwnProperty(Ht)&&oe(At,Le[Ht].value)&&!isAdHoc(At)}),$n=Te(Ut),Mt=getPanelVars(Rt?.panels??[]),yt=getAllAffectedPanelIdsForVariableChange(Xt.map(At=>At.id),$n,Mt);lt.length&&(await Promise.all(lt),Ke.publish(new VariablesChangedInUrl({refreshAll:yt.size===0,panelIds:Array.from(yt)})))};function oe(we,Le){const Ke=variableAdapters.get(we.type).getValueForUrl(we);let ht=ensureStringValues(Le);return Array.isArray(Ke)&&!Array.isArray(ht)&&(ht=[ht]),!isEqual(Ke,ht)}const pe=(we,Le)=>{const Ke=r.E1.getSearchObject(),ht=Object.keys(Ke).filter(xt=>xt.indexOf(E.IG)===-1).reduce((xt,lt)=>(xt[lt]=Ke[lt],xt),{});for(const xt of(0,Me.gt)(we,Le())){if(xt.skipUrlSync)continue;const lt=v.z.get(xt.type);ht[E.IG+xt.name]=lt.getValueForUrl(xt)}return ht},Re=(we,Le)=>async(Ke,ht)=>{try{const xt=toStateKey(we),lt=ht(),Rt=getIfExistsLastKey(lt);Rt&&getVariablesState(Rt,lt).transaction.status===TransactionStatus.Fetching&&Ke(xe(Rt)),Ke(toKeyedAction(xt,variablesInitTransaction({uid:xt}))),Ke(Ue(xt,Le)),Ke(Fe(xt,Le)),Ke(ae(xt)),await Ke(qt(xt)),Ke(toKeyedAction(xt,variablesCompleteTransaction({uid:xt})))}catch(xt){Ke(notifyApp(at("Templating init failed",xt))),console.error(xt)}};function ae(we,Le=getDatasourceSrv){return(Ke,ht)=>{const xt=getVariablesByKey(we,ht());for(const lt of xt){if(!isAdHoc(lt)&&!isQuery(lt))continue;const{datasource:Rt}=lt;if(isDataSourceRef(Rt))continue;const Ut=Le().getInstanceSettings(Rt),Xt=Ut?getDataSourceRef(Ut):{uid:Rt};Ke(toKeyedAction(we,changeVariableProp(toVariablePayload(lt,{propName:"datasource",propValue:Xt}))))}}}const ve=we=>Le=>{Le(toKeyedAction(we,cleanVariables())),Le(toKeyedAction(we,cleanEditorState())),Le(toKeyedAction(we,cleanPickerState())),Le(toKeyedAction(we,variablesClearTransaction()))},xe=(we,Le={getBackendSrv})=>Ke=>{Le.getBackendSrv().cancelAllInFlightRequests(),Ke(ve(we))},Ge=(we,Le=!1)=>async(Ke,ht)=>{const{rootStateKey:xt}=we;try{if(!(0,N.A3)(xt,ht()))return;const lt=(0,Me.E0)(we,ht());Ke((0,De.mb)(xt,(0,Ne.$M)((0,N.Y6)(lt)))),await Ke(st((0,N.yQ)(lt))),await v.z.get(lt.type).updateOptions(lt),Ke(dt(we))}catch(lt){if(Ke((0,De.mb)(xt,(0,Ne.Le)((0,N.Y6)(we,{error:lt})))),Le||(console.error(lt),Ke((0,i.$l)(at("Error updating options:",lt,we)))),Le)throw lt}},at=(we,Le,Ke)=>(0,d.t_)(`${Ke?`Templating [${Ke.id}]`:"Templating"}`,`${we} ${Le.message}`),dt=we=>(Le,Ke)=>{const{rootStateKey:ht}=we;if(!(0,N.A3)(ht,Ke()))return;const xt=(0,Me.E0)(we,Ke());xt.state!==n.Gu.Done&&Le((0,De.mb)(we.rootStateKey,(0,Ne.qQ)((0,N.Y6)(xt))))};function st(we,Le=g.ak){return async function(Ke,ht){const{id:xt,rootStateKey:lt}=we;if(!(0,N.A3)(lt,ht()))return;const Rt=(0,Me.E0)(we,ht());if(Rt.type==="query")try{const Ut=await Le().get(Rt.datasource??"");if((0,S.R)(Ut)||!(0,S.Ju)(Ut)||Pt(Rt.query))return;const Xt={refId:`${Ut.name}-${xt}-Variable-Query`,query:Rt.query};Ke((0,De.mb)(lt,(0,Ne.Pl)((0,N.Y6)(we,{propName:"query",propValue:Xt}))))}catch(Ut){Ke((0,i.$l)(at("Failed to upgrade legacy queries",Ut))),console.error(Ut)}}}function Pt(we){return we?we.hasOwnProperty("refId")&&typeof we.refId=="string":!1}},17174:(X,L,e)=>{"use strict";e.d(L,{ZP:()=>d,mb:()=>y,qM:()=>a});var t=e(49955),n=e(57658),r=e(33022);const a={keys:{}},i=f=>({type:`templating/keyed/${f.action.type.replace(/^templating\//,"")}`,payload:f});function y(f,m){const u=(0,t.mn)(f);return i({key:u,action:m})}const c=f=>typeof f.type=="string"&&f.type.startsWith("templating/keyed")&&"payload"in f&&typeof f.payload.key=="string";function l(f=a,m){if(c(m)){const{key:u,action:h}=m.payload,C=(0,t.mn)(u),x=r.Z9.match(h)?C:f.lastKey,b=(0,n.Q)(),g=f.keys[C],p=b(g,h);return{...f,lastKey:x,keys:{...f.keys,[C]:p}}}return f}const d={templating:l}},57658:(X,L,e)=>{"use strict";e.d(L,{L:()=>C,Q:()=>h});var t=e(44722),n=e(331),r=e(77960);const a={usages:[],usagesNetwork:[]},i=(0,r.oM)({name:"templating/inspect",initialState:a,reducers:{initInspect:(x,b)=>{const{usages:g,usagesNetwork:p}=b.payload;x.usages=g,x.usagesNetwork=p}}}),y=i.reducer,{initInspect:c}=i.actions;var l=e(74557),d=e(33022),f=e(18266),m=e(16234);let u;function h(){return u||(u=(0,t.combineReducers)({editor:n.gl,variables:m.L,optionsPicker:l.cv,transaction:d.vw,inspect:y})),u}function C(){return{editor:n.PF,variables:f.s,optionsPicker:l.yy,transaction:d.xO,inspect:a}}},45882:(X,L,e)=>{"use strict";e.d(L,{AE:()=>c,E0:()=>i,Eo:()=>u,Q4:()=>g,QT:()=>h,S_:()=>b,_K:()=>v,gt:()=>l,ir:()=>E,ng:()=>p});var t=e(16360),n=e(74600),r=e(49955),a=e(57658);function i(P,S=(0,n.y0)(),M=!0){const{id:R,rootStateKey:I}=P,O=c(I,S).variables[R];if(!O){if(M)throw new Error(`Couldn't find variable with id:${R}`);return}return O}function y(P,S,M=(0,n.y0)()){return Object.values(c(S,M).variables).filter(P).sort((R,I)=>R.index-I.index)}function c(P,S=(0,n.y0)()){return S.templating.keys[(0,r.mn)(P)]??(0,a.L)()}function l(P,S=(0,n.y0)()){return y(d,P,S)}function d(P){return P.type!=="system"}const f=(0,t.Z)((P,S)=>l(P,(0,n.y0)())),m=(P,S)=>l(P,S);function u(P,S=(0,n.y0)()){return h(Object.values(c(P,S).variables))}function h(P){const S=P.filter(d).sort((M,R)=>M.index-R.index);return S.length>0?S[S.length-1].index+1:0}function C(P,S=getState()){return c(P,S).transaction.isDirty}function x(P=(0,n.y0)()){return P.templating?.lastKey}function b(P=(0,n.y0)()){if(!P.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return P.templating.lastKey}function g(P,S=(0,n.y0)()){const M=x(S);return M?y(P,M,S):[]}function p(P=(0,n.y0)()){const S=x(P);return S?l(S,P):[]}function v(P,S=(0,n.y0)()){const M=x(S);if(M)return i({id:P,rootStateKey:M,type:"query"},S,!1)}function E(P,S){return P[S]}},52471:(X,L,e)=>{"use strict";e.d(L,{$M:()=>P,Be:()=>v,Le:()=>M,Pl:()=>x,VN:()=>C,Y9:()=>g,b5:()=>u,gE:()=>b,mZ:()=>h,qQ:()=>S});var t=e(77960),n=e(86832),r=e.n(n),a=e(10694),i=e(16261),y=e(331),c=e(77242),l=e(49955),d=e(45882),f=e(18266);const m=(0,t.oM)({name:"templating/shared",initialState:f.s,reducers:{addVariable:(R,I)=>{const A=I.payload.id??I.payload.data.model.name,O=i.z.get(I.payload.type),N=(0,n.cloneDeep)(O.initialState),o=O.beforeAdding?O.beforeAdding(I.payload.data.model):(0,n.cloneDeep)(I.payload.data.model),w={...(0,n.defaults)({},o,N),id:A,index:I.payload.data.index,global:I.payload.data.global};R[A]=w},variableStateNotStarted:(R,I)=>{const A=(0,d.ir)(R,I.payload.id);A.state=a.Gu.NotStarted,A.error=null},variableStateFetching:(R,I)=>{const A=(0,d.ir)(R,I.payload.id);A.state=a.Gu.Loading,A.error=null},variableStateCompleted:(R,I)=>{const A=(0,d.ir)(R,I.payload.id);A&&(A.state=a.Gu.Done,A.error=null)},variableStateFailed:(R,I)=>{const A=(0,d.ir)(R,I.payload.id);A&&(A.state=a.Gu.Error,A.error=I.payload.data.error)},removeVariable:(R,I)=>{if(delete R[I.payload.id],!I.payload.data.reIndex)return;const A=Object.values(R).sort((O,N)=>O.index-N.index);for(let O=0;O<A.length;O++)A[O].index=O},duplicateVariable:(R,I)=>{function A($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const O=(0,n.cloneDeep)(R[I.payload.id]),N=new RegExp(`^copy_of_${A(O.name)}(_(\\d+))?$`),o=Object.values(R).map(({name:$})=>$.match(N)).filter($=>$!=null),w=o.map($=>$[2]).filter($=>$!=null),K=(()=>o.length===0?null:w.length===0?1:w.map($=>+$).sort(($,k)=>k-$)[0]+1)(),V=`copy_of_${O.name}${K?`_${K}`:""}`,_=I.payload.data?.newId??V,U=(0,d.QT)(Object.values(R));R[_]={...(0,n.cloneDeep)(i.z.get(I.payload.type).initialState),...O,id:_,name:V,index:U}},changeVariableOrder:(R,I)=>{const{toIndex:A,fromIndex:O}=I.payload.data,N=Object.values(R);for(let o=0;o<N.length;o++){const w=N[o];w.index===O?w.index=A:w.index>O&&w.index<=A?w.index--:w.index<O&&w.index>=A&&w.index++}},changeVariableType:(R,I)=>{const{id:A}=I.payload,{label:O,name:N,index:o,description:w,rootStateKey:K}=R[A];R[A]={...(0,n.cloneDeep)(i.z.get(I.payload.data.newType).initialState),id:A,rootStateKey:K,label:O,name:N,index:o,description:w}},setCurrentVariableValue:(R,I)=>{if(!I.payload.data.option)return;const A=(0,d.ir)(R,I.payload.id);if(!(0,c.eL)(A))return;const{option:O}=I.payload.data,N={...O,text:(0,l.Hi)(O?.text),value:(0,l.Hi)(O?.value)};A.current=N,A.options=A.options.map(o=>{o.value=(0,l.Hi)(o.value),o.text=(0,l.Hi)(o.text);let w=!1;if(Array.isArray(N.value))for(let K=0;K<N.value.length;K++){const V=N.value[K];if(o.value===V){w=!0;break}}else o.value===N.value&&(w=!0);return o.selected=w,o})},changeVariableProp:(R,I)=>{const A=(0,d.ir)(R,I.payload.id);A[I.payload.data.propName]=I.payload.data.propValue}},extraReducers:R=>R.addCase(y.Yo,(I,A)=>{const O=(0,d.ir)(I,A.payload.id);O.name=A.payload.data.newName})}),u=m.reducer,{removeVariable:h,addVariable:C,changeVariableProp:x,changeVariableOrder:b,duplicateVariable:g,setCurrentVariableValue:p,changeVariableType:v,variableStateNotStarted:E,variableStateFetching:P,variableStateCompleted:S,variableStateFailed:M}=m.actions},33022:(X,L,e)=>{"use strict";e.d(L,{Z9:()=>c,vw:()=>f,xO:()=>a});var t=e(77960),n=e(68734),r=e(52471);const a={uid:null,status:n.LN.NotStarted,isDirty:!1},i=(0,t.oM)({name:"templating/transaction",initialState:a,reducers:{variablesInitTransaction:(m,u)=>{m.uid=u.payload.uid,m.status=n.LN.Fetching},variablesCompleteTransaction:(m,u)=>{m.uid===u.payload.uid&&(m.status=n.LN.Completed)},variablesClearTransaction:(m,u)=>{m.uid=null,m.status=n.LN.NotStarted,m.isDirty=!1}},extraReducers:m=>m.addMatcher(y,(u,h)=>{u.status===n.LN.Completed&&(u.isDirty=!0)})});function y(m){return r.mZ.match(m)||r.VN.match(m)||r.Pl.match(m)||r.gE.match(m)||r.Y9.match(m)||r.Be.match(m)}const{variablesInitTransaction:c,variablesClearTransaction:l,variablesCompleteTransaction:d}=i.actions,f=i.reducer},18266:(X,L,e)=>{"use strict";e.d(L,{s:()=>t});const t={}},16234:(X,L,e)=>{"use strict";e.d(L,{L:()=>y});var t=e(77960),n=e(16261),r=e(52471),a=e(18266);const i=(0,t.PH)("templating/cleanVariables"),y=(c=a.s,l)=>{if(i.match(l)){const d=Object.values(c).filter(m=>m.global);return d?d.reduce((m,u)=>(m[u.id]=u,m),{}):a.s}return l?.payload?.type&&n.z.getIfExists(l?.payload?.type)?n.z.get(l.payload.type).reducer((0,r.b5)(c,l),l):c}},68734:(X,L,e)=>{"use strict";e.d(L,{Bd:()=>t.Bd,Eg:()=>y,LN:()=>i,Wy:()=>d,bU:()=>t.bU,eq:()=>l,x9:()=>c});var t=e(12699),n=e(10694),r=e(45276),a=e(87842),i=(f=>(f.NotStarted="Not started",f.Fetching="Fetching",f.Completed="Completed",f))(i||{});const y={id:a.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.bU.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class c extends r.R{}c.type="variables-changed";class l extends r.R{}l.type="variables-time-range-process-done";class d extends r.R{}d.type="variables-changed-in-url"},49955:(X,L,e)=>{"use strict";e.d(L,{A3:()=>M,HY:()=>h,Hi:()=>S,J7:()=>f,Y6:()=>A,a9:()=>m,iD:()=>p,mn:()=>R,yQ:()=>I});var t=e(86832),n=e.n(t),r=e(44951),a=e(74600),i=e(6278),y=e(16261),c=e(87842),l=e(45882),d=e(68734);const f=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,m=O=>(f.lastIndex=0,f.exec(O));function u(...O){const N=O[O.length-1];O[0]=typeof O[0]=="string"?O[0]:safeStringifyValue(O[0]);const w=O.slice(0,-1).join(" ").match(f);return!!(w!==null?w.find(V=>{const _=m(V);return _!==null&&_.indexOf(N)>-1}):!1)}const h=O=>{if(!O||!O.current)return!1;if(O.current.value){const N=Array.isArray(O.current.value);if(N&&O.current.value.length&&O.current.value[0]===c.r2||!N&&O.current.value===c.r2)return!0}if(O.current.text){const N=Array.isArray(O.current.text);if(N&&O.current.text.length&&O.current.text[0]===c.xk||!N&&O.current.text===c.xk)return!0}return!1},C=O=>!O||!O.current||!O.current.text?"":Array.isArray(O.current.text)?O.current.text.toString():typeof O.current.text!="string"?"":O.current.text,x=O=>!O||!O.current||O.current.value===void 0||O.current.value===null?null:Array.isArray(O.current.value)?O.current.value.toString():typeof O.current.value!="string"?null:O.current.value;function b(O,N=getTemplateSrv()){return!O||!O.regex?"":N.replace(O.regex,{},"regex")}function g(O,N,o=getTimeSrv()){const w={range:void 0,variable:O,searchFilter:N};return(O.refresh===VariableRefresh.onTimeRangeChanged||O.refresh===VariableRefresh.onDashboardLoad)&&(w.range=o.timeRange()),w}function p(O){if(!O||!O.hasOwnProperty("refresh"))return d.Bd.never;const N=O;return N.refresh!==d.Bd.onTimeRangeChanged&&N.refresh!==d.Bd.onDashboardLoad&&N.refresh!==d.Bd.never?d.Bd.never:N.refresh}function v(){return variableAdapters.list().filter(O=>O.id!=="system").map(({id:O,name:N,description:o})=>({label:N,value:O,description:o}))}function E(O){return isArray(O)&&(O.length===0?O=void 0:O.length===1&&(O=O[0])),O}function P(O,N){let o=0;const w={};for(const K in O){if(!K.startsWith(VARIABLE_PREFIX))continue;let V=E(N[K]),_=E(O[K]);isEqual(_,V)||(w[K]={value:O[K]},o++)}for(const K in N){if(!K.startsWith(VARIABLE_PREFIX))continue;const V=N[K];isArray(V)&&V.length===0||O.hasOwnProperty(K)||(w[K]={value:"",removed:!0},o++)}return o?w:void 0}function S(O){return Array.isArray(O)?O.map(String):O==null?"":typeof O=="number"?O.toString(10):typeof O=="string"?O:typeof O=="boolean"?O.toString():""}function M(O,N=(0,a.y0)()){return(0,l.AE)(O,N).transaction.status!==d.LN.NotStarted}function R(O){return String(O)}const I=O=>{if(!O.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${O.id}`);return{type:O.type,id:O.id,rootStateKey:O.rootStateKey}};function A(O,N){return{type:O.type,id:O.id,data:N}}},80854:(X,L,e)=>{"use strict";e.d(L,{H:()=>m});var t=e(41407),n=e(39953),r=e(69330),a=e(83502),i=e(24571),y=e(34547),c=e(82803),l=e(12223),d=e(4919),f=e(97791);const m=({data:h,rowIndex:C,columnIndex:x,sortOrder:b,mode:g,header:p=void 0})=>{const v=(0,c.wW)(u);if(!h||C==null)return null;const E=h.fields.map((N,o)=>({...N,hovered:o===x})),P=E.filter(N=>!N.config.custom?.hideFrom?.tooltip),S=P.find(N=>N.name==="traceID")||E[0],M=[];if(P.filter(N=>S===N).length>0&&M.push(S),M.push(...P.filter(N=>S!==N)),M.length===0)return null;const R=[],I=[],A=new Set;for(const N of M){if(g===y.f3.Single&&x!=null&&!N.hovered)continue;const o=N.values[C],w=N.display?N.display(o):{text:`${o}`,numeric:+o};N.getLinks&&N.getLinks({calculatedValue:w,valueRowIndex:C}).forEach(K=>{const V=`${K.title}/${K.href}`;A.has(V)||(I.push(K),A.add(V))}),R.push({name:(0,r.CZ)(N,h),value:o,valueString:(0,a.zc)(w),highlight:N.hovered})}b&&b!==y.As.None&&R.sort((N,o)=>i.sortValues(b)(N.value,o.value));const O=()=>I.length>0&&n.createElement("tr",null,n.createElement("td",{colSpan:2},n.createElement(l.wc,null,I.map((N,o)=>n.createElement(d.Qj,{key:o,icon:"external-link-alt",target:N.target,href:N.href,onClick:N.onClick,fill:"text",style:{width:"100%"}},N.title)))));return n.createElement("div",{className:v.wrapper},p&&n.createElement("div",{className:v.header},n.createElement("span",{className:v.title},p)),n.createElement("table",{className:v.infoWrap},n.createElement("tbody",null,R.map((N,o)=>n.createElement("tr",{key:`${o}/${C}`},n.createElement("th",null,N.name),n.createElement("td",null,(0,f.Q)(N.valueString)))),O())))},u=h=>({wrapper:(0,t.css)`
      background: ${h.components.tooltip.background};
      border-radius: ${h.shape.borderRadius(2)};
    `,header:(0,t.css)`
      background: ${h.colors.background.secondary};
      align-items: center;
      align-content: center;
      display: flex;
      padding-bottom: ${h.spacing(1)};
    `,title:(0,t.css)`
      font-weight: ${h.typography.fontWeightMedium};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:(0,t.css)`
      padding: ${h.spacing(1)};
      background: transparent;
      border: none;
      th {
        font-weight: ${h.typography.fontWeightMedium};
        padding: ${h.spacing(.25,2,.25,0)};
      }

      tr {
        border-bottom: 1px solid ${h.colors.border.weak};
        &:last-child {
          border-bottom: none;
        }
      }
    `,highlight:(0,t.css)``,link:(0,t.css)`
      color: ${h.colors.text.link};
    `})},47858:(X,L,e)=>{"use strict";e.d(L,{Z9:()=>n,_M:()=>r,sK:()=>i});var t=(y=>(y.Active="active",y.Expired="expired",y.Pending="pending",y))(t||{}),n=(y=>(y.Unprocessed="unprocessed",y.Active="active",y.Suppressed="suppressed",y))(n||{}),r=(y=>(y.equal="=",y.notEqual="!=",y.regex="=~",y.notRegex="!~",y))(r||{}),a=(y=>(y.Internal="internal",y.External="external",y.All="all",y))(a||{}),i=(y=>(y.cortex="cortex",y.mimir="mimir",y.prometheus="prometheus",y))(i||{})},73799:(X,L,e)=>{"use strict";e.d(L,{$5:()=>n,MQ:()=>r,Rv:()=>y,az:()=>i});const t={statistics:[]};var n=(l=>(l[l.Query=1]="Query",l[l.Search=0]="Search",l))(n||{}),r=(l=>(l[l.Builder=0]="Builder",l[l.Code=1]="Code",l))(r||{});const a={parameters:[]};var i=(l=>(l.And="and",l.Function="function",l.FunctionParameter="functionParameter",l.GroupBy="groupBy",l.Operator="operator",l.Or="or",l.Property="property",l))(i||{}),y=(l=>(l.String="string",l))(y||{});const c={logGroupNames:[],logGroups:[],statsGroups:[]}},8130:(X,L,e)=>{"use strict";e.d(L,{$5:()=>t.$5,KB:()=>n,MQ:()=>t.MQ,wf:()=>r});var t=e(73799),n=(a=>(a.Scheduled="Scheduled",a.Running="Running",a.Complete="Complete",a.Failed="Failed",a.Cancelled="Cancelled",a.Timeout="Timeout",a))(n||{}),r=(a=>(a.Regions="regions",a.Namespaces="namespaces",a.Metrics="metrics",a.DimensionKeys="dimensionKeys",a.DimensionValues="dimensionValues",a.EBSVolumeIDs="ebsVolumeIDs",a.EC2InstanceAttributes="ec2InstanceAttributes",a.ResourceArns="resourceARNs",a.Statistics="statistics",a.LogGroups="logGroups",a.Accounts="accounts",a))(r||{})},61704:(X,L,e)=>{"use strict";e.d(L,{oe:()=>y.o,yl:()=>c,AK:()=>l});var t=e(36497),n=e(30976),r=e(10694),a=e(54554),i=e(97433),y=e(41183);function c(ue){return ue?typeof ue=="string"?ue===y.o:"meta"in ue&&ue.meta.name===y.o||ue.uid===y.o:!1}function l(ue,Ie){return new t.y(ot=>{const Qe=(0,i.h4)().getCurrent(),Me=d(ue.queries);if(!Me){ot.next(f("Missing panel reference ID"));return}const Ne=Qe?.getPanelById(Me);if(!Ne){ot.next(f("Unknown Panel: "+Me));return}const qe=Ne.getQueryRunner(),bt=qe.getData({withTransforms:!!Ie?.withTransforms,withFieldConfig:!1}).subscribe({next:Fe=>{Ie?.topic===n.w5.Annotations&&(Fe={...Fe,series:Fe.annotations??[],annotations:void 0}),ot.next(Fe)}});if(!Ne.isInView){const{datasource:Fe,targets:Ve}=Ne,Ue={...ue,datasource:Fe,panelId:Me,queries:Ve};qe.run(Ue)}return()=>{bt.unsubscribe()}})}function d(ue){if(!(!ue||!ue.length))return ue[0].panelId}function f(ue){return{state:r.Gu.Error,series:[],request:{},error:{message:ue},timeRange:(0,a.JK)()}}var m=e(41407),u=e(71757),h=e(39953),C=e(50820),x=e(52436),b=e(77814),g=e(86832),p=e(52807),v=e(82803);const E=h.memo(h.forwardRef(({className:ue,children:Ie,markdown:ot,onRemove:Qe,...Me},Ne)=>{const qe=(0,v.wW)(S);return h.createElement("div",{className:(0,m.cx)(qe.wrapper,ue),...Me,ref:Ne},ot&&P(ot),Ie)}));function P(ue){const Ie=(0,p.a)(ue);return h.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:Ie}})}E.displayName="OperationRowHelp";const S=ue=>{const Ie=ue.shape.radius.default;return{wrapper:(0,m.css)`
      padding: ${ue.spacing(2)};
      border: 2px solid ${ue.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${Ie} ${Ie};
      position: relative;
      top: -4px;
    `}};function M(ue){const Ie=useStyles2(A);return React.createElement("div",{className:cx(Ie.icon,"active"in ue&&ue.active&&Ie.active)},React.createElement(IconButton,{name:ue.icon,tooltip:ue.title,className:Ie.icon,disabled:!!ue.disabled,onClick:ue.onClick,type:"button","aria-label":selectors.components.QueryEditorRow.actionButton(ue.title),..."active"in ue&&{"aria-pressed":ue.active}}))}function R(ue){return React.createElement(M,{...ue})}const I=ue=>React.createElement(M,{...ue}),A=ue=>({icon:css`
      display: flex;
      position: relative;
      color: ${ue.colors.text.secondary};
    `,active:css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: ${ue.shape.radius.default};
        bottom: -8px;
        background-image: ${ue.colors.gradients.brandHorizontal} !important;
      }
    `});var O=e(69057),N=e(68766),o=e(72639),w=e(82360),K=e(27366),V=e(68497),_=e(39285);const U=({actionsElement:ue,disabled:Ie,draggable:ot,collapsable:Qe=!0,dragHandleProps:Me,headerElement:Ne,isContentVisible:qe,onRowToggle:bt,reportDragMousePosition:Fe,title:Ve,id:Ue})=>{const it=(0,v.wW)($);return h.createElement("div",{className:it.header},h.createElement("div",{className:it.column},Qe&&h.createElement(V.h,{name:qe?"angle-down":"angle-right",tooltip:qe?"Collapse query row":"Expand query row",className:it.collapseIcon,onClick:bt,"aria-expanded":qe,"aria-controls":Ue}),Ve&&h.createElement("div",{className:it.titleWrapper,onClick:bt,"aria-label":"Query operation row title"},h.createElement("div",{className:(0,m.cx)(it.title,Ie&&it.disabled)},Ve)),Ne),h.createElement(K.K,{gap:1,alignItems:"center",wrap:!1},ue,ot&&h.createElement(_.J,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:it.dragIcon,onMouseMove:Fe,...Me})))},$=ue=>({header:(0,m.css)`
    label: Header;
    padding: ${ue.spacing(.5,.5)};
    border-radius: ${ue.shape.radius.default};
    background: ${ue.colors.background.secondary};
    min-height: ${ue.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:(0,m.css)`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:(0,m.css)`
    cursor: grab;
    color: ${ue.colors.text.disabled};
    margin: ${ue.spacing(0,.5)};
    &:hover {
      color: ${ue.colors.text};
    }
  `,collapseIcon:(0,m.css)`
    margin-left: ${ue.spacing(.5)};
    color: ${ue.colors.text.disabled};
    }
  `,titleWrapper:(0,m.css)`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${ue.spacing(.5)};
  `,title:(0,m.css)`
    font-weight: ${ue.typography.fontWeightBold};
    color: ${ue.colors.text.link};
    margin-left: ${ue.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:(0,m.css)`
    color: ${ue.colors.text.disabled};
  `});U.displayName="QueryOperationRowHeader";function k({children:ue,actions:Ie,title:ot,headerElement:Qe,onClose:Me,onOpen:Ne,isOpen:qe,disabled:bt,draggable:Fe,collapsable:Ve,index:Ue,id:it}){const[ze,Xe]=(0,h.useState)(qe!==void 0?qe:!0),St=(0,v.wW)(H),Bt=(0,h.useCallback)(()=>{Xe(!ze)},[ze,Xe]);(0,h.useEffect)(()=>{typeof qe=="boolean"&&Xe(qe)},[qe]);const zt=(0,h.useCallback)(Zt=>{if(Zt.defaultPrevented){const re=Zt.currentTarget.getBoundingClientRect(),Te=Zt.clientX-re.left,We=Zt.clientY-re.top;(0,o.ff)("query_row_reorder_drag_position",{x:Te/re.width,y:We/re.height,width:re.width,height:re.height})}},[]);(0,N.Z)(()=>{ze?Ne&&Ne():Me&&Me()},[ze]);const qt={isOpen:ze,onOpen:()=>{Xe(!0)},onClose:()=>{Xe(!1)}},Qt=Ie&&w.renderOrCallToRender(Ie,qt),yn=Qe&&w.renderOrCallToRender(Qe,qt);return Fe?h.createElement(O._l,{draggableId:it,index:Ue},Zt=>h.createElement(h.Fragment,null,h.createElement("div",{ref:Zt.innerRef,className:St.wrapper,...Zt.draggableProps},h.createElement("div",null,h.createElement(U,{id:it,actionsElement:Qt,disabled:bt,draggable:!0,collapsable:Ve,dragHandleProps:Zt.dragHandleProps,headerElement:yn,isContentVisible:ze,onRowToggle:Bt,reportDragMousePosition:zt,title:ot})),ze&&h.createElement("div",{className:St.content},ue)))):h.createElement("div",{className:St.wrapper},h.createElement(U,{id:it,actionsElement:Qt,disabled:bt,draggable:!1,collapsable:Ve,headerElement:yn,isContentVisible:ze,onRowToggle:Bt,reportDragMousePosition:zt,title:ot}),ze&&h.createElement("div",{className:St.content},ue))}const H=ue=>({wrapper:(0,m.css)`
      margin-bottom: ${ue.spacing(2)};
    `,content:(0,m.css)`
      margin-top: ${ue.spacing(.5)};
      margin-left: ${ue.spacing(3)};
    `});k.displayName="QueryOperationRow";var j=e(6278),z=e(3706);class F{constructor(){this.extraRenderActions=[]}addExtraRenderAction(Ie){this.extraRenderActions=this.extraRenderActions.concat(Ie)}getAllExtraRenderAction(){return this.extraRenderActions}}const J=new F,Q=new F;var Z=e(11286);const ne=ue=>{const{query:Ie,queries:ot,onChange:Qe,collapsedText:Me,renderExtras:Ne,disabled:qe}=ue,bt=useStyles2(de),[Fe,Ve]=useState(!1),[Ue,it]=useState(null),ze=Qt=>{Ve(!0)},Xe=Qt=>{if(Ve(!1),Ue){it(null);return}Ie.refId!==Qt&&Qe({...Ie,refId:Qt})},St=Qt=>{const yn=Qt.currentTarget.value.trim();if(yn.length===0){it("An empty query name is not allowed");return}for(const Zt of ot)if(Zt!==Ie&&yn===Zt.refId){it("Query name already exists");return}Ue&&it(null)},Bt=Qt=>{Xe(Qt.currentTarget.value.trim())},zt=Qt=>{Qt.key==="Enter"&&Xe(Qt.currentTarget.value)},qt=Qt=>{Qt.target.select()};return React.createElement(React.Fragment,null,React.createElement("div",{className:bt.wrapper},!Fe&&React.createElement("button",{className:bt.queryNameWrapper,"aria-label":selectors.components.QueryEditorRow.title(Ie.refId),title:"Edit query name",onClick:ze,"data-testid":"query-name-div",type:"button"},React.createElement("span",{className:bt.queryName},Ie.refId),React.createElement(Icon,{name:"pen",className:bt.queryEditIcon,size:"sm"})),Fe&&React.createElement(React.Fragment,null,React.createElement(Input,{type:"text",defaultValue:Ie.refId,onBlur:Bt,autoFocus:!0,onKeyDown:zt,onFocus:qt,invalid:Ue!==null,onChange:St,className:bt.queryNameInput,"data-testid":"query-name-input"}),Ue&&React.createElement(FieldValidationMessage,{horizontal:!0},Ue)),ee(ue,bt),Ne&&React.createElement("div",{className:bt.itemWrapper},Ne()),qe&&React.createElement("em",{className:bt.contextInfo},"Disabled")),Me&&React.createElement("div",{className:bt.collapsedText},Me))},ee=(ue,Ie)=>{const{alerting:ot,dataSource:Qe,onChangeDataSource:Me}=ue;return Me?React.createElement("div",{className:Ie.itemWrapper},React.createElement(DataSourcePicker,{variables:!0,alerting:ot,current:Qe.name,onChange:Me})):React.createElement("em",{className:Ie.contextInfo},"(",Qe.name,")")},de=ue=>({wrapper:css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${ue.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${ue.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${ue.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${ue.colors.action.hover};
        border: 1px dashed ${ue.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${ue.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:css`
      font-weight: ${ue.typography.fontWeightMedium};
      color: ${ue.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${ue.spacing(.5)};
    `,queryEditIcon:cx(css`
        margin-left: ${ue.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:css`
      font-weight: ${ue.typography.fontWeightRegular};
      font-size: ${ue.typography.bodySmall.fontSize};
      color: ${ue.colors.text.secondary};
      padding-left: ${ue.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:css`
      font-size: ${ue.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${ue.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:css`
      display: flex;
      margin-left: 4px;
    `});function Pe({error:ue}){const Ie=useStyles2(ye),ot=ue?.message??ue?.data?.message??"Query error";return React.createElement("div",{className:Ie.wrapper},React.createElement("div",{className:Ie.icon},React.createElement(Icon,{name:"exclamation-triangle"})),React.createElement("div",{className:Ie.message},ot,ue.traceId!=null&&React.createElement(React.Fragment,null,React.createElement("br",null)," ",React.createElement("span",null,"(Trace ID: ",ue.traceId,")"))))}const ye=ue=>({wrapper:css({marginTop:ue.spacing(.5),background:ue.colors.background.secondary,display:"flex"}),icon:css({background:ue.colors.error.main,color:ue.colors.error.contrastText,padding:ue.spacing(1)}),message:css({fontSize:ue.typography.bodySmall.fontSize,fontFamily:ue.typography.fontFamilyMonospace,padding:ue.spacing(1)})});class he extends null{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.dataSourceSrv=getDataSourceSrv(),this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const Ie=getAngularLoader(),ot='<plugin-component type="query-ctrl" />',Qe={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=Ie.load(this.element,Qe,ot),this.angularScope=Qe.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:Ie,onChange:ot,queries:Qe,onRunQuery:Me,onAddQuery:Ne,app:qe=CoreApp.PanelEditor,history:bt}=this.props,{datasource:Fe,data:Ve}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(Fe?.components?.QueryCtrl)return React.createElement("div",{ref:Ue=>this.element=Ue});if(Fe){let Ue=this.getReactQueryEditor(Fe);if(Ue)return React.createElement(DataSourcePluginContextProvider,{instanceSettings:this.props.dataSource},React.createElement(Ue,{key:Fe?.name,query:Ie,datasource:Fe,onChange:ot,onRunQuery:Me,onAddQuery:Ne,data:Ve,range:getTimeSrv().timeRange(),queries:Qe,app:qe,history:bt}))}return React.createElement("div",null,"Data source plugin does not export any Query Editor component")},this.onToggleEditMode=(Ie,ot)=>{Ie.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),ot.isOpen||ot.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:Ie,query:ot,onQueryRemoved:Qe}=this.props;Ie(ot),Qe&&Qe()},this.onCopyQuery=()=>{const{query:Ie,onAddQuery:ot,onQueryCopied:Qe}=this.props,Me=cloneDeep(Ie);ot(Me),Qe&&Qe()},this.onDisableQuery=()=>{const{query:Ie,onChange:ot,onRunQuery:Qe,onQueryToggled:Me}=this.props;ot({...Ie,hide:!Ie.hide}),Qe(),Me&&Me(Ie.hide)},this.onToggleHelp=()=>{this.setState(Ie=>({showingHelp:!Ie.showingHelp}))},this.onClickExample=Ie=>{Ie.datasource===void 0&&(Ie.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...Ie,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:Ie,query:ot}=this.props,Me=(De(Ie,ot.refId)?.series??[]).reduce((Fe,Ve)=>{if(!Ve.meta?.notices)return Fe;const Ue=filter(Ve.meta.notices,{severity:"warning"})??[];return Fe.concat(Ue)},[]),Ne=uniqBy(Me,"text");if(!(Ne.length>0))return null;const bt=Ne.map(Fe=>Fe.text).join(`
`);return React.createElement(Badge,{color:"orange",icon:"exclamation-triangle",text:React.createElement(React.Fragment,null,Ne.length," ",pluralize("warning",Ne.length)),tooltip:bt})},this.renderExtraActions=()=>{const{query:Ie,queries:ot,data:Qe,onAddQuery:Me,dataSource:Ne}=this.props,qe=RowActionComponents.getAllExtraRenderAction().map((bt,Fe)=>bt({query:Ie,queries:ot,timeRange:Qe.timeRange,onAddQuery:Me,dataSource:Ne,key:Fe})).filter(Boolean);return qe.push(this.renderWarnings()),qe},this.renderActions=Ie=>{const{query:ot,hideDisableQuery:Qe=!1}=this.props,{hasTextEditMode:Me,datasource:Ne,showingHelp:qe}=this.state,bt=!!ot.hide,Fe=Ne?.components?.QueryEditorHelp;return React.createElement(React.Fragment,null,Fe&&React.createElement(QueryOperationToggleAction,{title:"Show data source help",icon:"question-circle",onClick:this.onToggleHelp,active:qe}),Me&&React.createElement(QueryOperationAction,{title:"Toggle text edit mode",icon:"pen",onClick:Ve=>{this.onToggleEditMode(Ve,Ie)}}),this.renderExtraActions(),React.createElement(QueryOperationAction,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),Qe?null:React.createElement(QueryOperationToggleAction,{title:"Disable query",icon:bt?"eye-slash":"eye",active:bt,onClick:this.onDisableQuery}),React.createElement(QueryOperationAction,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=Ie=>{const{alerting:ot,query:Qe,dataSource:Me,onChangeDataSource:Ne,onChange:qe,queries:bt,renderHeaderExtras:Fe}=this.props;return React.createElement(QueryEditorRowHeader,{query:Qe,queries:bt,onChangeDataSource:Ne,dataSource:Me,disabled:Qe.hide,onClick:Ve=>this.onToggleEditMode(Ve,Ie),onChange:qe,collapsedText:Ie.isOpen?null:this.renderCollapsedText(),renderExtras:Fe,alerting:ot})}}componentDidMount(){const{data:Ie,query:ot,id:Qe}=this.props,Me=De(Ie,ot.refId);this.id=uniqueId(Qe+"_"),this.setState({data:Me}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:Ie,queries:ot}=this.props,{datasource:Qe}=this.state,Me=new PanelModel({targets:ot}),Ne={},qe=this;return{datasource:Qe,target:Ie,panel:Me,dashboard:Ne,refresh:()=>{Ie.hide!==qe.props.query.hide&&(Ie.hide=qe.props.query.hide),this.props.onChange(Ie),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new EventBusSrv,range:getTimeSrv().timeRange()}}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const Ie=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return Ie?.rawRef?.uid??Ie?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let Ie;const ot=this.getInterpolatedDataSourceUID();try{Ie=await this.dataSourceSrv.get(ot)}catch{Ie=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(Ie),this.setState({datasource:Ie,queriedDataSourceIdentifier:ot,hasTextEditMode:has(Ie,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(Ie){const{datasource:ot,queriedDataSourceIdentifier:Qe}=this.state,{data:Me,query:Ne}=this.props;if(Ie.id!==this.props.id&&(this.id=uniqueId(this.props.id+"_")),Me!==Ie.data){const qe=De(Me,Ne.refId);this.setState({data:qe}),this.angularScope&&(this.angularScope.range=getTimeSrv().timeRange()),this.angularQueryEditor&&qe&&me(this.angularScope,qe,this.angularQueryEditor)}if(ot&&Qe!==this.getInterpolatedDataSourceUID()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(Ie){if(Ie)switch(this.props.app){case CoreApp.Explore:return Ie.components?.ExploreMetricsQueryField||Ie.components?.ExploreLogsQueryField||Ie.components?.ExploreQueryField||Ie.components?.QueryEditor;case CoreApp.PanelEditor:case CoreApp.Dashboard:default:return Ie.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:Ie}=this.state;return Ie?.getQueryDisplayText?Ie.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:Ie,index:ot,visualization:Qe,collapsable:Me}=this.props,{datasource:Ne,showingHelp:qe,data:bt}=this.state,Fe=Ie.hide,Ve=classNames("query-editor-row",{"query-editor-row--disabled":Fe,"gf-form-disabled":Fe});if(!Ne)return null;const Ue=this.renderPluginEditor(),it=Ne.components?.QueryEditorHelp;return React.createElement("div",{"data-testid":"query-editor-row","aria-label":selectors.components.QueryEditorRows.rows},React.createElement(QueryOperationRow,{id:this.id,draggable:!0,collapsable:Me,index:ot,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},React.createElement("div",{className:Ve,id:this.id},React.createElement(ErrorBoundaryAlert,null,qe&&it&&React.createElement(OperationRowHelp,null,React.createElement(it,{onClickExample:ze=>this.onClickExample(ze),query:this.props.query,datasource:Ne})),Ue),bt?.error&&bt.error.refId===Ie.refId&&React.createElement(QueryErrorAlert,{error:bt.error}),Qe)))}}function me(ue,Ie,ot){if(Ie.state===LoadingState.Done){const Qe=Ie.series.map(Me=>toLegacyResponseData(Me));ue.events.emit(PanelEvents.dataReceived,Qe)}else Ie.state===LoadingState.Error&&ue.events.emit(PanelEvents.dataError,Ie.error);setTimeout(ot.digest)}function De(ue,Ie){const ot=ue.series.filter(qe=>qe.refId===Ie);if(ue.state!==LoadingState.Loading&&(ue.error||ue.errors?.length)&&!ue.series.length)return{...ue,state:LoadingState.Error};let Qe=ue.state,Me=ue.errors?.find(qe=>qe.refId===Ie);!Me&&ue.error&&(Me=ue.error.refId===Ie?ue.error:void 0),Qe!==LoadingState.Loading&&(Me?Qe=LoadingState.Error:ue.state===LoadingState.Error&&(Qe=LoadingState.Done));const Ne=ue.timeRange;return{...ue,state:Qe,series:ot,error:Me,errors:Me?[Me]:void 0,timeRange:Ne}}function le(ue){return JSON.stringify(ue)}const Ee=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function be({panelData:ue,queries:Ie,onChange:ot,onRunQueries:Qe}){const{value:Me}=useAsync(()=>getDatasourceSrv().get()),Ne=Ie[0],qe=useMemo(()=>getDashboardSrv().getCurrent()?.getPanelById(Ne.panelId??-124134),[Ne.panelId]),{value:bt,loading:Fe}=useAsync(async()=>{if(!qe)return[];const Zt=await getDatasourceSrv().get(qe.datasource);return Promise.all(qe.targets.map(async re=>{const Te=re.datasource?await getDatasourceSrv().get(re.datasource):Zt,We=Te.getQueryDisplayText||le,Je=filterPanelDataToQuery(ue,re.refId)??ue;return{refId:re.refId,query:We(re),name:Te.name,img:Te.meta.info.logos.small,data:Je.series,error:Je.error}}))},[ue,qe]),Ve=useCallback(Zt=>{ot([Zt]),Qe()},[ot,Qe]),Ue=useCallback(Zt=>{Ve({...Ne,panelId:Zt})},[Ne,Ve]),it=useCallback(()=>{Ve({...Ne,withTransforms:!Ne.withTransforms})},[Ne,Ve]),ze=useCallback(Zt=>{Ve({...Ne,topic:Zt?DataTopic.Annotations:void 0})},[Ne,Ve]),Xe=useCallback(Zt=>{const re=Zt.datasource??Me,Te=getDatasourceSrv().getInstanceSettings(re)?.name,We=Zt.targets.length;return`${We} ${pluralize("query",We)} to ${Te}`},[Me]),St=getDashboardSrv().getCurrent(),Bt=!!(Ne.withTransforms||qe?.transformations?.length),zt=useMemo(()=>St?.panels.filter(Zt=>config.panels[Zt.type]&&Zt.targets&&Zt.id!==St.panelInEdit?.id&&Zt.datasource?.uid!==SHARED_DASHBOARD_QUERY).map(Zt=>({value:Zt.id,label:Zt.title??"Panel "+Zt.id,description:Xe(Zt),imgUrl:config.panels[Zt.type].info.logos.small}))??[],[St,Xe]),qt=useStyles2(ge),Qt=useId();if(!St)return null;if(zt.length<1)return React.createElement("p",{className:qt.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const yn=zt.find(Zt=>Zt.value===Ne.panelId);return React.createElement(React.Fragment,null,React.createElement(Field,{label:"Source",description:"Use the same results as panel"},React.createElement(Select,{inputId:Qt,placeholder:"Choose panel",isSearchable:!0,options:zt,value:yn,onChange:Zt=>Ue(Zt.value)})),React.createElement(HorizontalGroup,{height:"auto",wrap:!0,align:"flex-start"},React.createElement(Field,{label:"Data Source",description:"Use data or annotations from the panel",className:qt.horizontalField},React.createElement(RadioButtonGroup,{options:Ee,value:Ne.topic===DataTopic.Annotations,onChange:ze})),Bt&&React.createElement(Field,{label:"Transform",description:"Apply panel transformations from the source panel"},React.createElement(Switch,{value:!!Ne.withTransforms,onChange:it}))),Fe?React.createElement(Spinner,null):React.createElement(React.Fragment,null,bt&&!!bt.length&&React.createElement(Field,{label:"Queries from panel"},React.createElement(VerticalGroup,{spacing:"sm"},bt.map((Zt,re)=>React.createElement(Card,{key:`DashboardQueryRow-${re}`},React.createElement(Card.Heading,null,Zt.refId),React.createElement(Card.Figure,null,React.createElement("img",{src:Zt.img,alt:Zt.name,title:Zt.name,width:40})),React.createElement(Card.Meta,null,Zt.query)))))))}function ge(ue){return{horizontalField:css({marginRight:ue.spacing(2)}),noQueriesText:css({padding:ue.spacing(1.25)})}}},41183:(X,L,e)=>{"use strict";e.d(L,{o:()=>t});const t="-- Dashboard --",n="dashboard"},55623:(X,L,e)=>{"use strict";e.d(L,{k:()=>Qe,e:()=>Me});var t=e(86832),n=e(22605),r=e(63302),a=e(3195),i=e(71476),y=e(93313),c=e(10694),l=e(48614),d=e(7906),f=e(98579),m=e(53305),u=e(92743),h=e(79059),C=e(16843),x=e(4148),b=e(26205),g=e(36063),p=e(97433),v=e(41407),E=e(39953),P=e(82803),S=e(2827),M=e(96227),R=e(9558),I=e(26286),A=e(42039),O=e(7376),N=e(39064),o=e(52291),w=e.n(o),K=e(36602),V=e(87783),_=e(4919),U=e(12223),$=e(54332),k=e(4190),H=e(74292),j=e(39285),z=e(15530),F=e(53039);const J="time-of-day-picker-panel",Q=({minuteStep:Ne=1,showHour:qe=!0,showSeconds:bt=!1,onChange:Fe,value:Ve,size:Ue="auto",disabled:it,disabledHours:ze,disabledMinutes:Xe,disabledSeconds:St,placeholder:Bt,format:zt="HH:mm",defaultValue:qt=void 0,allowEmpty:Qt=!1,width:yn})=>{const Zt=(0,P.wW)(ne),re=()=>yn?(0,v.css)`
        width: ${yn}px;
      `:(0,z.ht)()[Ue];return E.createElement(H.Z,{value:Ve,defaultValue:qt,onChange:Te=>Fe(Te),showHour:qe,showSecond:bt,format:zt,allowEmpty:Qt,className:(0,v.cx)(re(),Zt.input),popupClassName:(0,v.cx)(Zt.picker,J),minuteStep:Ne,inputIcon:E.createElement(Z,{wrapperStyle:Zt.caretWrapper}),disabled:it,disabledHours:ze,disabledMinutes:Xe,disabledSeconds:St,placeholder:Bt})},Z=({wrapperStyle:Ne=""})=>E.createElement("div",{className:Ne},E.createElement(j.J,{name:"angle-down"})),ne=Ne=>{const qe=Ne.components.input.background,bt=Ne.v1.palette.black,Fe=Ne.colors.background.secondary,Ve=Ne.shape.radius.default,Ue=Ne.components.input.borderColor;return{caretWrapper:(0,v.css)`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${Ne.colors.text.secondary};
    `,picker:(0,v.css)`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${qe};
        border-color: ${Ue};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${Ne.v1.palette.orange};
            border-radius: ${Ve};
          }

          &:hover {
            background: ${Fe};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${Ne.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${bt};
        background-color: ${qe};
        border-color: ${Ue};
        border-radius: ${Ve};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${qe};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:(0,v.css)`
      .rc-time-picker-input {
        background-color: ${qe};
        border-radius: ${Ve};
        border-color: ${Ue};
        height: ${Ne.spacing(4)};

        &:focus {
          ${(0,F.focusCss)(Ne)}
        }

        &:disabled {
          background-color: ${Ne.colors.action.disabledBackground};
          color: ${Ne.colors.action.disabledText};
          border: 1px solid ${Ne.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }

      .rc-time-picker-clear {
        position: absolute;
        right: 20px;
        top: 50%;
        cursor: pointer;
        overflow: hidden;
        transform: translateY(-50%);
        color: ${Ne.colors.text.secondary};
      }
    `}},ee=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((Ne,qe)=>({label:Ne,value:qe+1})),de=({value:Ne,onChange:qe})=>{const bt=(0,P.wW)(Pe),Fe=Date.now(),Ve=(0,K.Pr)(Ne.timezone??"utc",Fe),Ue=(0,p.h4)().getCurrent()?.getTimezone()===Ne.timezone,[it,ze]=(0,E.useState)(!1),Xe=()=>{ze(!it)},St=Te=>{if(!Te)return;const We=w()();if(Te){const Je=Te.split(":");We.set("hour",parseInt(Je[0],10)),We.set("minute",parseInt(Je[1],10))}return We},Bt=()=>{let Te="Everyday";return Ne.fromDayOfWeek&&!Ne.toDayOfWeek&&(Te=ee[Ne.fromDayOfWeek-1].label),Te},zt=()=>{const Te=E.createElement(E.Fragment,null,E.createElement(k.d,{title:Ve?.name}),E.createElement($.v,{timeZone:Ne.timezone,timestamp:Fe}));return Ue?E.createElement(E.Fragment,null,"Dashboard timezone (",Te,")"):Te},qt=(Te,We)=>{const Je=Te?Te.format("HH:mm"):void 0;qe(We==="from"?{...Ne,from:Je}:{...Ne,to:Je})},Qt=Te=>{qe({...Ne,timezone:Te})},yn=Te=>{const We=Te?Te.value:void 0,Je=Te?Ne.toDayOfWeek:void 0;qe({...Ne,fromDayOfWeek:We,toDayOfWeek:Je})},Zt=Te=>{qe({...Ne,toDayOfWeek:Te?Te.value:void 0})},re=()=>it?E.createElement(V.O,{value:Ne.timezone,includeInternal:!0,onChange:Te=>Qt(Te),onBlur:()=>ze(!1),openMenuOnFocus:!1,width:100,autoFocus:!0}):E.createElement("div",{className:bt.timezoneContainer},E.createElement("div",{className:bt.timezone},zt()),E.createElement(_.zx,{variant:"secondary",onClick:Xe,size:"sm"},"Change timezone"));return E.createElement(S.C,{className:bt.wrapper},E.createElement(M.g,{label:"From"},E.createElement(U.Lh,{spacing:"xs"},E.createElement(R.Ph,{options:ee,isClearable:!0,placeholder:"Everyday",value:Ne.fromDayOfWeek??null,onChange:Te=>yn(Te),width:20}),E.createElement(Q,{value:St(Ne.from),onChange:Te=>qt(Te,"from"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),E.createElement(M.g,{label:"To"},E.createElement(U.Lh,{spacing:"xs"},(Ne.fromDayOfWeek||Ne.toDayOfWeek)&&E.createElement(R.Ph,{options:ee,isClearable:!0,placeholder:Bt(),value:Ne.toDayOfWeek??null,onChange:Te=>Zt(Te),width:20}),E.createElement(Q,{value:St(Ne.to),onChange:Te=>qt(Te,"to"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),E.createElement(M.g,{label:"Timezone"},re()))},Pe=Ne=>({wrapper:(0,v.css)({maxWidth:Ne.spacing(60),marginBottom:Ne.spacing(2)}),timezoneContainer:(0,v.css)`
      padding: 5px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    `,timezone:(0,v.css)`
      margin-right: 5px;
    `}),ye="Enabling this returns annotations that match any of the tags specified below",he=E.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),me=[{label:"Dashboard",value:N._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:N._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],De=[{label:"Annotations & Alerts",value:N.hR.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:N.hR.TimeRegions,description:"Configure a repeating time region"}],le=[10,50,100,200,300,500,1e3,2e3].map(Ne=>({label:String(Ne),value:Ne}));function Ee({query:Ne,onChange:qe}){const bt=Ne,{limit:Fe,matchAny:Ve,tags:Ue,type:it,queryType:ze}=bt;let Xe=ze??N.hR.Annotations;const St=(0,E.useMemo)(()=>(0,p.h4)().dashboard?.getTimezone(),[]),Bt=(0,P.wW)(be),zt=Te=>qe({...bt,type:Te.value}),qt=Te=>qe({...bt,limit:Te.value}),Qt=Te=>qe({...bt,matchAny:Te.target.checked}),yn=Te=>qe({...bt,tags:Te}),Zt=Te=>{const We={...bt,queryType:Te.value};We.queryType===N.hR.TimeRegions?We.timeRegion||(We.timeRegion={timezone:St}):delete We.timeRegion,qe(We)},re=Te=>{qe({...bt,timeRegion:Te})};return E.createElement(S.C,{className:Bt.container},E.createElement(M.g,{label:"Query type"},E.createElement(R.Ph,{inputId:"grafana-annotations__query-type",options:De,value:Xe,onChange:Zt})),Xe===N.hR.Annotations&&E.createElement(E.Fragment,null,E.createElement(M.g,{label:"Filter by"},E.createElement(R.Ph,{inputId:"grafana-annotations__filter-by",options:me,value:it,onChange:zt})),E.createElement(M.g,{label:"Max limit"},E.createElement(R.Ph,{inputId:"grafana-annotations__limit",width:16,options:le,value:Fe,onChange:qt})),it===N._$.Tags&&E.createElement(E.Fragment,null,E.createElement(M.g,{label:"Match any",description:ye},E.createElement(I.r,{id:"grafana-annotations__match-any",value:Ve,onChange:Qt})),E.createElement(M.g,{label:"Tags",description:he},E.createElement(A.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:yn,tagOptions:O.lK,tags:Ue??[]})))),Xe===N.hR.TimeRegions&&bt.timeRegion&&E.createElement(de,{value:bt.timeRegion,onChange:re}))}const be=Ne=>({container:(0,v.css)({maxWidth:Ne.spacing(60),marginBottom:Ne.spacing(2)})});var ge=e(89591),ue=e(85926);function Ie(Ne,qe,bt,Fe){if(!qe)return;const Ve=(0,ue.q7)(qe,bt);if(!Ve.length)return;const Ue=[],it=[],ze=[],Xe=qe.timezone??Fe;for(const St of Ve){let Bt=St.from,zt=St.to;const qt=(0,K.Pr)(Xe,Bt);if(qt){const Qt=qt.offsetInMins*60*1e3;Bt+=Qt,zt+=Qt}Ue.push(Bt),it.push(zt),ze.push(Ne)}return{fields:[{name:"time",type:ge.fS.time,values:Ue,config:{}},{name:"timeEnd",type:ge.fS.time,values:it,config:{}},{name:"text",type:ge.fS.string,values:ze,config:{}}],length:Ue.length}}let ot=100;class Qe extends u.CK{constructor(qe){super(qe),this.annotations={QueryEditor:Ee,prepareAnnotation(bt){return bt.target=bt.target??{type:bt.type??N._$.Dashboard,limit:bt.limit??100,tags:bt.tags??[],matchAny:bt.matchAny??!1},bt},prepareQuery(bt){let Fe;if((0,t.isString)(bt.datasource)){const it=(0,g.p)(bt.datasource,{returnDefaultAsNull:!1});it&&(Fe=it)}else Fe=bt.datasource;const{filter:Ve,...Ue}=bt;return{...Ue,refId:bt.name,queryType:N.hR.Annotations,datasource:Fe}}}}getDefaultQuery(){return{queryType:N.hR.RandomWalk}}query(qe){const bt=[],Fe=[],Ve=(0,h.J)();for(const Ue of qe.targets){if(Ue.queryType===N.hR.Annotations)return(0,n.D)(this.getAnnotations({range:qe.range,rangeRaw:qe.range.raw,annotation:Ue,dashboard:(0,p.h4)().getCurrent()}));if(!Ue.hide){if(Ue.queryType===N.hR.Snapshot){bt.push((0,r.of)({data:(Ue.snapshot??[]).map(it=>(0,y.vP)(it)),state:c.Gu.Done}));continue}if(Ue.queryType===N.hR.TimeRegions){const it=Ie("",Ue.timeRegion,qe.range,qe.timezone);bt.push((0,r.of)({data:it?[it]:[],state:c.Gu.Done}));continue}if(Ue.queryType===N.hR.LiveMeasurements){let it=Ve.replace(Ue.channel,qe.scopedVars);const{filter:ze}=Ue,Xe=(0,l.H7)(it);if(!(0,l.nU)(Xe))continue;const St={maxLength:qe.maxDataPoints??500};Ue.buffer?(St.maxDelta=Ue.buffer,St.maxLength=St.maxLength*2):qe.rangeRaw?.to==="now"&&(St.maxDelta=qe.range.to.valueOf()-qe.range.from.valueOf()),bt.push((0,C.gj)().getDataStream({key:`${qe.requestId}.${ot++}`,addr:Xe,filter:ze,buffer:St}))}else Ue.queryType||(Ue.queryType=N.hR.RandomWalk),Fe.push(Ue)}}return Fe.length&&bt.push(super.query({...qe,targets:Fe})),bt.length?bt.length===1?bt[0]:(0,a.T)(...bt):(0,r.of)()}listFiles(qe){return this.query({targets:[{refId:"A",queryType:N.hR.List,path:qe}]}).pipe((0,i.U)(bt=>{const Fe=bt.data[0]??new d.v;return new f.U(Fe)}))}metricFindQuery(qe){return Promise.resolve([])}async getAnnotations(qe){const bt=qe.annotation.target;if(bt?.queryType===N.hR.TimeRegions){const ze=Ie(qe.annotation.name,bt.timeRegion,qe.range,(0,p.h4)().getCurrent()?.timezone);return Promise.resolve({data:ze?[ze]:[]})}const Fe=qe.annotation,Ve=Fe.target,Ue={from:qe.range.from.valueOf(),to:qe.range.to.valueOf(),limit:Ve.limit,tags:Ve.tags,matchAny:Ve.matchAny};if(Ve.type===N._$.Dashboard){if(!qe.dashboard.uid)return Promise.resolve({data:[]});Ue.dashboardUID=qe.dashboard.uid,delete Ue.tags}else{if(!Array.isArray(Ve.tags)||Ve.tags.length===0)return Promise.resolve({data:[]});const ze=(0,h.J)(),Xe="__delimiter__",St=[];for(const Bt of Ue.tags){const zt=ze.replace(Bt,{},qt=>typeof qt=="string"?qt:qt.join(Xe));for(const qt of zt.split(Xe))St.push(qt)}Ue.tags=St}const it=await(0,x.i)().get("/api/annotations",Ue,`grafana-data-source-annotations-${Fe.name}-${qe.dashboard?.uid}`);return{data:[(0,m.g0)(it)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function Me(){return await(0,b.F)().get("-- Grafana --")}},39064:(X,L,e)=>{"use strict";e.d(L,{_$:()=>a,hR:()=>t,ip:()=>r,wi:()=>n});var t=(i=>(i.LiveMeasurements="measurements",i.Annotations="annotations",i.Snapshot="snapshot",i.TimeRegions="timeRegions",i.RandomWalk="randomWalk",i.List="list",i.Read="read",i.Search="search",i))(t||{});const n={refId:"A",queryType:"randomWalk"},r={refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:"snapshot",snapshot:[]};var a=(i=>(i.Dashboard="dashboard",i.Tags="tags",i))(a||{})},65355:(X,L,e)=>{"use strict";e.d(L,{F:()=>c,k:()=>d});var t=e(93313),n=e(28833),r=e(95712),a=e(7635),i=e(73431),y=e(39064);function c(f,m){return new Promise(u=>{if(f.datasource?.uid===r.JY){l(m,f),u(!0);return}n.Z.publish(new i.VJ({title:"Change to panel embedded data",text:"If you want to change the data shown in this panel Grafana will need to remove the panels current query and replace it with a snapshot of the current data. This enables you to edit the data.",yesText:"Continue",icon:"pen",onConfirm:()=>{l(m,f),u(!0)},onDismiss:()=>{u(!1)}}))})}function l(f,m){const u=f.map(C=>(0,t.Y)(C)),h={refId:"A",queryType:y.hR.Snapshot,snapshot:u,datasource:{uid:r.JY}};m.updateQueries({dataSource:{uid:r.JY},queries:[h]}),m.refresh()}function d(f){return(m,u,h)=>{a.eM(m).subscribe(async C=>{const x=[];C.dataFrames.forEach(b=>{const g=(0,t.Y)(b);x.push(g)}),f({...y.ip,snapshot:x,file:C.file},u)})}}},26923:(X,L,e)=>{"use strict";e.d(L,{Wp:()=>y,c6:()=>l,xM:()=>a});var t=e(7906),n=e(89591),r=e(29788);function a(d){const f=d.spans.map(u=>i(u,d.processes)),m=new t.v({fields:[{name:"traceID",type:n.fS.string},{name:"spanID",type:n.fS.string},{name:"parentSpanID",type:n.fS.string},{name:"operationName",type:n.fS.string},{name:"serviceName",type:n.fS.string},{name:"serviceTags",type:n.fS.other},{name:"startTime",type:n.fS.number},{name:"duration",type:n.fS.number},{name:"logs",type:n.fS.other},{name:"tags",type:n.fS.other},{name:"warnings",type:n.fS.other},{name:"stackTraces",type:n.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const u of f)m.add(u);return m}function i(d,f){return{spanID:d.spanID,traceID:d.traceID,parentSpanID:d.references?.find(m=>m.refType==="CHILD_OF")?.spanID,operationName:d.operationName,startTime:d.startTime/1e3,duration:d.duration/1e3,logs:d.logs.map(m=>({...m,timestamp:m.timestamp/1e3})),tags:d.tags,warnings:d.warnings??void 0,stackTraces:d.stackTraces,serviceName:f[d.processID].serviceName,serviceTags:f[d.processID].tags}}function y(d,f){const m=new t.v({fields:[{name:"traceID",type:n.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:f.uid,datasourceName:f.name,query:{query:"${__value.raw}"}}}]}},{name:"traceName",type:n.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:n.fS.time,config:{displayNameFromDS:"Start time"}},{name:"duration",type:n.fS.number,config:{displayNameFromDS:"Duration",unit:"\xB5s"}}],meta:{preferredVisualisationType:"table"}}),u=d.map(c).sort((h,C)=>C?.startTime-h?.startTime);for(const h of u)m.add(h);return m}function c(d){const f=(0,r.transformTraceData)(d);if(f)return{traceID:f.traceID,startTime:f.startTime/1e3,duration:f.duration,traceName:f.traceName}}function l(d){let f={traceID:"",spans:[],processes:{},warnings:null},m=[];for(let u=0;u<d.length;u++){const h=d.get(u);f.traceID||(f.traceID=h.traceID),m.find(C=>C===h.serviceName)||(m.push(h.serviceName),f.processes[`p${m.length}`]={serviceName:h.serviceName,tags:h.serviceTags}),f.spans.push({traceID:h.traceID,spanID:h.spanID,duration:h.duration*1e3,references:h.parentSpanID?[{refType:"CHILD_OF",spanID:h.parentSpanID,traceID:h.traceID}]:[],flags:0,logs:h.logs.map(C=>({...C,timestamp:C.timestamp*1e3})),operationName:h.operationName,processID:Object.keys(f.processes).find(C=>f.processes[C].serviceName===h.serviceName)||"",startTime:h.startTime*1e3,tags:h.tags,warnings:h.warnings?h.warnings:null})}return{data:[f],total:0,limit:0,offset:0,errors:null}}},88553:(X,L,e)=>{"use strict";e.d(L,{$5:()=>t,EH:()=>a,Rd:()=>r,ZP:()=>d,md:()=>i,r8:()=>y,uR:()=>n,xY:()=>l});const t=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],n=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],r=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],a=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],i=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],y=[...t,...a,...i],c=[...y,...r,...n].map(f=>f.label),l={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...n,...r].map(f=>f.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${y.map(f=>f.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},d=l},24677:(X,L,e)=>{"use strict";e.d(L,{D:()=>b,w:()=>g});var t=e(86832),n=e.n(t),r=e(63302),a=e(22605),i=e(74539),y=e(84289),c=e(71476),l=e(41311),d=e(10752),f=e(53143),m=e(41858),u=e(54721),h=e(10694),C=e(26205),x=e(43882);const b="-- Mixed --";class g extends u.MF{constructor(E){super(E)}query(E){const P=E.targets.filter(R=>R.datasource?.uid!==b);if(!P.length)return(0,r.of)({data:[]});const S=(0,t.groupBy)(P,"datasource.uid"),M=[];for(const R in S){const I=S[R];M.push({datasource:(0,C.F)().get(I[0].datasource,E.scopedVars),targets:I})}return M.length?this.batchQueries(M,E):(0,r.of)({data:[]})}batchQueries(E,P){const S=E.filter(this.isQueryable).map((M,R)=>(0,a.D)(M.datasource).pipe((0,y.z)(I=>{const A=(0,t.cloneDeep)(P);return A.requestId=`mixed-${R}-${A.requestId||""}`,A.targets=M.targets,(0,a.D)(I.query(A)).pipe((0,c.U)(O=>({...O,data:O.data||[],state:h.Gu.Loading,key:`mixed-${R}-${O.key||""}`})),(0,l.q)(),(0,d.K)(O=>(O=(0,x.P)(O),O.message=`${I.name}: ${O.message}`,(0,r.of)([{data:[],state:h.Gu.Error,error:O,key:`mixed-${R}-${A.requestId||""}`}]))))})));return(0,i.D)(S).pipe(p(),(0,c.U)(this.finalizeResponses),(0,f.J)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(E){return E&&Array.isArray(E.targets)&&E.targets.length>0}finalizeResponses(E){const{length:P}=E;if(P===0)return E;const S=E.find(M=>M.state===h.Gu.Error);return S?E.push(S):E[P-1].state=h.Gu.Done,E}}function p(){return(0,m.u)((v,E)=>E.reduce((P,S)=>(P.push.apply(P,S),P),v),[])}},74149:(X,L,e)=>{"use strict";e.d(L,{F:()=>a});var t=e(50590),n=e(89527),r=e(95522);function a(d,f,m,u="="){if(!f||!m)throw new Error("Need label to add to query.");const h=i(d);if(!h.length)return d;const C=y(f,m,u);return c(d,h,C)}function i(d){const f=t.E2.parse(d),m=[];return f.iterate({enter:({to:u,from:h,type:C})=>{if(C.id===t.m6){const x=(0,r._)(d.substring(h,u));return m.push({query:x.query,from:h,to:u}),!1}}}),m}function y(d,f,m){const u=f===1/0?"+Inf":f.toString();return{label:d,op:m,value:u}}function c(d,f,m){const u=new n.K;let h="",C=0;for(let x=0;x<f.length;x++){const b=f[x],g=x===f.length-1,p=d.substring(C,b.from),v=g?d.substring(b.to):"";l(b.query.labels,m)||b.query.labels.push(m);const E=u.renderQuery(b.query);h+=p+E+v,C=b.to}return h}function l(d,f){return d.find(m=>m.label===f.label&&m.value===f.value)}},63594:(X,L,e)=>{"use strict";e.d(L,{ZP:()=>j});var t=e(41407),n=e(10963),r=e(39953),a=e(53305),i=e(72639),y=e(97697),c=e(59608),l=e(39285),d=e(4919),f=e(82803),m=e(1188);function u(z){return typeof z=="object"&&z!==null&&"isCanceled"in z}const h=z=>{let F=!1;return{promise:new Promise((Q,Z)=>{const ne={isCanceled:!0};z.then(ee=>F?Z(ne):Q(ee)),z.catch(ee=>Z(F?ne:ee))}),cancel(){F=!0}}};var C=e(63163),x=e(68084),b=e(64084),g=e(84766),p=e(12223),v=e(36495),E=e(38637),P=e(52499);const S="{}",M="__name__",R=25;function I(z){let F="";const J=[];for(const Q of z)if((Q.name===M||Q.selected)&&Q.values&&Q.values.length>0){const Z=Q.values.filter(ne=>ne.selected).map(ne=>ne.name);Z.length>1?J.push(`${Q.name}=~"${Z.map(C.tU).join("|")}"`):Z.length===1&&(Q.name===M?F=Z[0]:J.push(`${Q.name}="${(0,C.U9)(Z[0])}"`))}return[F,"{",J.join(","),"}"].join("")}function A(z,F,J){return z.map(Q=>{const Z=F[Q.name];if(Z){let ne;if(Q.name===J&&Q.values)ne=Q.values;else{const ee=new Set(Q.values?.filter(de=>de.selected).map(de=>de.name)||[]);ne=Z.map(de=>({name:de,selected:ee.has(de)}))}return{...Q,loading:!1,values:ne,hidden:!Z,facets:ne.length}}return{...Q,loading:!1,hidden:!Z,values:void 0,facets:0}})}const O=(0,b.B)(z=>({wrapper:(0,t.css)`
    background-color: ${z.colors.background.secondary};
    padding: ${z.spacing(1)};
    width: 100%;
  `,list:(0,t.css)`
    margin-top: ${z.spacing(1)};
    display: flex;
    flex-wrap: wrap;
    max-height: 200px;
    overflow: auto;
    align-content: flex-start;
  `,section:(0,t.css)`
    & + & {
      margin: ${z.spacing(2)} 0;
    }
    position: relative;
  `,selector:(0,t.css)`
    font-family: ${z.typography.fontFamilyMonospace};
    margin-bottom: ${z.spacing(1)};
  `,status:(0,t.css)`
    padding: ${z.spacing(.5)};
    color: ${z.colors.text.secondary};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    /* using absolute positioning because flex interferes with ellipsis */
    position: absolute;
    width: 50%;
    right: 0;
    text-align: right;
    transition: opacity 100ms linear;
    opacity: 0;
  `,statusShowing:(0,t.css)`
    opacity: 1;
  `,error:(0,t.css)`
    color: ${z.colors.error.main};
  `,valueList:(0,t.css)`
    margin-right: ${z.spacing(1)};
    resize: horizontal;
  `,valueListWrapper:(0,t.css)`
    border-left: 1px solid ${z.colors.border.medium};
    margin: ${z.spacing(1)} 0;
    padding: ${z.spacing(1)} 0 ${z.spacing(1)} ${z.spacing(1)};
  `,valueListArea:(0,t.css)`
    display: flex;
    flex-wrap: wrap;
    margin-top: ${z.spacing(1)};
  `,valueTitle:(0,t.css)`
    margin-left: -${z.spacing(.5)};
    margin-bottom: ${z.spacing(1)};
  `,validationStatus:(0,t.css)`
    padding: ${z.spacing(.5)};
    margin-bottom: ${z.spacing(1)};
    color: ${z.colors.text.maxContrast};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `}));class N extends r.Component{constructor(){super(...arguments),this.valueListsRef=r.createRef(),this.state={labels:[],labelSearchTerm:"",metricSearchTerm:"",status:"Ready",error:"",validationStatus:"",valueSearchTerm:""},this.onChangeLabelSearch=F=>{this.setState({labelSearchTerm:F.target.value})},this.onChangeMetricSearch=F=>{this.setState({metricSearchTerm:F.target.value})},this.onChangeValueSearch=F=>{this.setState({valueSearchTerm:F.target.value})},this.onClickRunQuery=()=>{const F=I(this.state.labels);this.props.onChange(F)},this.onClickRunRateQuery=()=>{const J=`rate(${I(this.state.labels)}[$__rate_interval])`;this.props.onChange(J)},this.onClickClear=()=>{this.setState(F=>({labels:F.labels.map(Q=>({...Q,values:void 0,selected:!1,loading:!1,hidden:!1,facets:void 0})),labelSearchTerm:"",metricSearchTerm:"",status:"",error:"",validationStatus:"",valueSearchTerm:""})),this.props.deleteLastUsedLabels(),this.fetchValues(M,S)},this.onClickLabel=(F,J,Q)=>{const Z=this.state.labels.find(de=>de.name===F);if(!Z)return;const ne=!Z.selected;let ee={selected:ne};if(Z.values&&!ne){const de=Z.values.map(Pe=>({...Pe,selected:!1}));ee={...ee,facets:0,values:de}}this.setState({labelSearchTerm:""}),this.updateLabelState(F,ee,"",()=>this.doFacettingForLabel(F))},this.onClickValue=(F,J,Q)=>{const Z=this.state.labels.find(ee=>ee.name===F);if(!Z||!Z.values)return;this.setState({labelSearchTerm:""});const ne=Z.values.map(ee=>({...ee,selected:ee.name===J?!ee.selected:ee.selected}));this.updateLabelState(F,{values:ne},"",()=>this.doFacetting(F))},this.onClickMetric=(F,J,Q)=>{const Z=this.state.labels.find(de=>de.name===F);if(!Z||!Z.values)return;this.setState({metricSearchTerm:""});const ne=Z.values.map(de=>({...de,selected:de.name===J||de.selected?!de.selected:de.selected})),ee=ne.some(de=>de.selected);this.updateLabelState(F,{selected:ee,values:ne},"",()=>this.doFacetting(F))},this.onClickValidate=()=>{const F=I(this.state.labels);this.validateSelector(F)},this.doFacetting=F=>{const J=I(this.state.labels);if(J===S){const Q=this.state.labels.map(Z=>({...Z,facets:0,values:void 0,hidden:!1}));this.setState({labels:Q},()=>{this.state.labels.forEach(Z=>(Z.selected||Z.name===M)&&this.fetchValues(Z.name,J))})}else this.fetchSeries(J,F)}}updateLabelState(F,J,Q="",Z){this.setState(ne=>{const ee=ne.labels.map(Pe=>Pe.name===F?{...Pe,...J}:Pe),de=Q?"":ne.error;return{labels:ee,status:Q,error:de,validationStatus:""}},Z)}componentDidMount(){const{languageProvider:F,lastUsedLabels:J}=this.props;if(F){const Q=J;F.start().then(()=>{let Z=F.getLabelKeys();this.fetchValues(M,S);const ne=Z.map((ee,de,Pe)=>({name:ee,selected:Q.includes(ee),loading:!1}));this.setState({labels:ne},()=>{this.state.labels.forEach(ee=>{ee.selected&&this.fetchValues(ee.name,S)})})})}}doFacettingForLabel(F){const J=this.state.labels.find(Z=>Z.name===F);if(!J)return;const Q=this.state.labels.filter(Z=>Z.selected).map(Z=>Z.name);this.props.storeLastUsedLabels(Q),J.selected?J.values||this.fetchValues(F,I(this.state.labels)):this.doFacetting()}async fetchValues(F,J){const{languageProvider:Q}=this.props;this.updateLabelState(F,{loading:!0},`Fetching values for ${F}`);try{let Z=await Q.getLabelValues(F);if(J!==I(this.state.labels)){this.updateLabelState(F,{loading:!1});return}const ne=[],{metricsMetadata:ee}=Q;for(const de of Z){const Pe={name:de};if(F===M&&ee){const ye=ee[de];ye&&(Pe.details=`(${ye.type}) ${ye.help}`)}ne.push(Pe)}this.updateLabelState(F,{values:ne,loading:!1})}catch(Z){console.error(Z)}}async fetchSeries(F,J){const{languageProvider:Q}=this.props;J&&this.updateLabelState(J,{loading:!0},`Facetting labels for ${F}`);try{const Z=await Q.fetchSeriesLabels(F,!0);if(F!==I(this.state.labels)){J&&this.updateLabelState(J,{loading:!1});return}if(Object.keys(Z).length===0){this.setState({error:`Empty results, no matching label for ${F}`});return}const ne=A(this.state.labels,Z,J);this.setState({labels:ne,error:""}),J&&this.updateLabelState(J,{loading:!1})}catch(Z){console.error(Z)}}async validateSelector(F){const{languageProvider:J}=this.props;this.setState({validationStatus:`Validating selector ${F}`,error:""});const Q=await J.fetchSeries(F);this.setState({validationStatus:`Selector is valid (${Q.length} series found)`})}render(){const{theme:F}=this.props,{labels:J,labelSearchTerm:Q,metricSearchTerm:Z,status:ne,error:ee,validationStatus:de,valueSearchTerm:Pe}=this.state,ye=O(F);if(J.length===0)return r.createElement("div",{className:ye.wrapper},r.createElement(g.u,{text:"Loading labels..."}));let he=J.find(ge=>ge.name===M);he&&Z&&(he={...he,values:he.values?.filter(ge=>ge.selected||ge.name.includes(Z))});let me=J.filter(ge=>!ge.hidden&&ge.name!==M);Q&&(me=me.filter(ge=>ge.selected||ge.name.includes(Q)));let De=me.filter(ge=>ge.selected&&ge.values);Pe&&(De=De.map(ge=>({...ge,values:ge.values?.filter(ue=>ue.selected||ue.name.includes(Pe))})));const le=I(this.state.labels),Ee=le===S,be=he?.values?.length||0;return r.createElement("div",{className:ye.wrapper},r.createElement(p.Lh,{align:"flex-start",spacing:"lg"},r.createElement("div",null,r.createElement("div",{className:ye.section},r.createElement(v._,{description:"Once a metric is selected only possible labels are shown."},"1. Select a metric"),r.createElement("div",null,r.createElement(E.I,{onChange:this.onChangeMetricSearch,"aria-label":"Filter expression for metric",value:Z})),r.createElement("div",{role:"list",className:ye.valueListWrapper},r.createElement(x.t7,{height:Math.min(450,be*R),itemCount:be,itemSize:R,itemKey:ge=>he.values[ge].name,width:300,className:ye.valueList},({index:ge,style:ue})=>{const Ie=he?.values?.[ge];return Ie?r.createElement("div",{style:ue},r.createElement(P._,{name:he.name,value:Ie?.name,title:Ie.details,active:Ie?.selected,onClick:this.onClickMetric,searchTerm:Z})):null})))),r.createElement("div",null,r.createElement("div",{className:ye.section},r.createElement(v._,{description:"Once label values are selected, only possible label combinations are shown."},"2. Select labels to search in"),r.createElement("div",null,r.createElement(E.I,{onChange:this.onChangeLabelSearch,"aria-label":"Filter expression for label",value:Q})),r.createElement("div",{className:ye.list,style:{height:120}},me.map(ge=>r.createElement(P._,{key:ge.name,name:ge.name,loading:ge.loading,active:ge.selected,hidden:ge.hidden,facets:ge.facets,onClick:this.onClickLabel,searchTerm:Q})))),r.createElement("div",{className:ye.section},r.createElement(v._,{description:"Use the search field to find values across selected labels."},"3. Select (multiple) values for your labels"),r.createElement("div",null,r.createElement(E.I,{onChange:this.onChangeValueSearch,"aria-label":"Filter expression for label values",value:Pe})),r.createElement("div",{className:ye.valueListArea,ref:this.valueListsRef},De.map(ge=>r.createElement("div",{role:"list",key:ge.name,"aria-label":`Values for ${ge.name}`,className:ye.valueListWrapper},r.createElement("div",{className:ye.valueTitle},r.createElement(P._,{name:ge.name,loading:ge.loading,active:ge.selected,hidden:ge.hidden,facets:ge.facets||ge.values?.length,onClick:this.onClickLabel})),r.createElement(x.t7,{height:Math.min(200,R*(ge.values?.length||0)),itemCount:ge.values?.length||0,itemSize:28,itemKey:ue=>ge.values[ue].name,width:200,className:ye.valueList},({index:ue,style:Ie})=>{const ot=ge.values?.[ue];return ot?r.createElement("div",{style:Ie},r.createElement(P._,{name:ge.name,value:ot?.name,active:ot?.selected,onClick:this.onClickValue,searchTerm:Pe})):null}))))))),r.createElement("div",{className:ye.section},r.createElement(v._,null,"4. Resulting selector"),r.createElement("div",{"aria-label":"selector",className:ye.selector},le),de&&r.createElement("div",{className:ye.validationStatus},de),r.createElement(p.Lh,null,r.createElement(d.zx,{"aria-label":"Use selector for query button",disabled:Ee,onClick:this.onClickRunQuery},"Use query"),r.createElement(d.zx,{"aria-label":"Use selector as metrics button",variant:"secondary",disabled:Ee,onClick:this.onClickRunRateQuery},"Use as rate query"),r.createElement(d.zx,{"aria-label":"Validate submit button",variant:"secondary",disabled:Ee,onClick:this.onClickValidate},"Validate selector"),r.createElement(d.zx,{"aria-label":"Selector clear button",variant:"secondary",onClick:this.onClickClear},"Clear"),r.createElement("div",{className:(0,t.cx)(ye.status,(ne||ee)&&ye.statusShowing)},r.createElement("span",{className:ee?ye.error:""},ee||ne)))))}}const o=(0,f.HE)(N),w=r.lazy(()=>e.e(6031).then(e.bind(e,48203))),K=z=>r.createElement(r.Suspense,{fallback:null},r.createElement(w,{...z})),V=z=>{const F=(0,r.useRef)(null),{onRunQuery:J,onChange:Q,...Z}=z,ne=Pe=>{F.current=Pe,Q(Pe),J()},ee=Pe=>{Q(Pe)},de=Pe=>{Q(Pe)};return r.createElement(K,{onChange:de,onRunQuery:ne,onBlur:ee,...Z})},_="__recording_rules__",U="grafana.datasources.prometheus.browser.labels";function $(z,F,J){return z?"(Disabled)":F?J?"Metrics browser":"(No metrics found)":"Loading metrics..."}function k(z,{typeaheadContext:F,typeaheadText:J}){switch(F){case"context-labels":{const Q=DOMUtil.getNextCharacter();(!Q||Q==="}"||Q===",")&&(z+="=");break}case"context-label-values":{J.match(/^(!?=~?"|")/)||(z=`"${z}`),DOMUtil.getNextCharacter()!=='"'&&(z=`${z}"`);break}default:}return z}class H extends r.PureComponent{constructor(F,J){super(F,J),this.refreshHint=()=>{const{datasource:Q,query:Z,data:ne}=this.props,ee=Q.getInitHints(),de=ee.length>0?ee[0]:null;if(!ne||ne.series.length===0){this.setState({hint:de});return}const Pe=(0,a.aY)(ne.series[0])?ne.series.map(a.Zr):ne.series,ye=Q.getQueryHints(Z,Pe);let he=ye.length>0?ye[0]:null;this.setState({hint:he??de})},this.refreshMetrics=async()=>{const{datasource:{languageProvider:Q}}=this.props;this.languageProviderInitializationPromise=h(Q.start());try{const Z=await this.languageProviderInitializationPromise.promise;await Promise.all(Z),this.onUpdateLanguage()}catch(Z){if(!(u(Z)&&Z.isCanceled))throw Z}},this.onChangeLabelBrowser=Q=>{this.onChangeQuery(Q,!0),this.setState({labelBrowserVisible:!1})},this.onChangeQuery=(Q,Z)=>{const{query:ne,onChange:ee,onRunQuery:de}=this.props;if(ee){const Pe={...ne,expr:Q};ee(Pe),Z&&de&&de()}},this.onClickChooserButton=()=>{this.setState(Q=>({labelBrowserVisible:!Q.labelBrowserVisible})),(0,i.ff)("user_grafana_prometheus_metrics_browser_clicked",{editorMode:this.state.labelBrowserVisible?"metricViewClosed":"metricViewOpen",app:this.props?.app??""})},this.onClickHintFix=()=>{const{datasource:Q,query:Z,onChange:ne,onRunQuery:ee}=this.props,{hint:de}=this.state;de?.fix?.action&&ne(Q.modifyQuery(Z,de.fix.action)),ee()},this.onUpdateLanguage=()=>{const{datasource:{languageProvider:Q}}=this.props,{metrics:Z}=Q;Z&&this.setState({syntaxLoaded:!0})},this.onTypeahead=async Q=>{const{datasource:{languageProvider:Z}}=this.props;if(!Z)return{suggestions:[]};const{history:ne}=this.props,{prefix:ee,text:de,value:Pe,wrapperClasses:ye,labelKey:he}=Q;return await Z.provideCompletionItems({text:de,value:Pe,prefix:ee,wrapperClasses:ye,labelKey:he},{history:ne})},this.plugins=[(0,y.h)(),(0,c.Z)({onlyIn:Q=>"type"in Q&&Q.type==="code_block",getSyntax:Q=>"promql"},{...n.languages,promql:this.props.datasource.languageProvider.syntax})],this.state={labelBrowserVisible:!1,syntaxLoaded:!1,hint:null}}componentDidMount(){this.props.datasource.languageProvider&&this.refreshMetrics(),this.refreshHint()}componentWillUnmount(){this.languageProviderInitializationPromise&&this.languageProviderInitializationPromise.cancel()}componentDidUpdate(F){const{data:J,datasource:{languageProvider:Q},range:Z}=this.props;Q!==F.datasource.languageProvider&&this.setState({syntaxLoaded:!1});const ne=this.rangeChangedToRefresh(Z,F.range);(Q!==F.datasource.languageProvider||ne)&&this.refreshMetrics(),J&&F.data&&F.data.series!==J.series&&this.refreshHint()}rangeChangedToRefresh(F,J){if(F&&J){const Q=(0,C.o8)(F.from.valueOf())===(0,C.o8)(J.from.valueOf()),Z=(0,C.o8)(F.to.valueOf())===(0,C.o8)(J.to.valueOf());return!(Q&&Z)}return!1}render(){const{datasource:F,datasource:{languageProvider:J},query:Q,ExtraFieldElement:Z,history:ne=[],theme:ee}=this.props,{labelBrowserVisible:de,syntaxLoaded:Pe,hint:ye}=this.state,he=J.metrics.length>0,me=$(F.lookupsDisabled,Pe,he),De=!(Pe&&he);return r.createElement(m.G,{storageKey:U,defaultValue:[]},(le,Ee,be)=>r.createElement(r.Fragment,null,r.createElement("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":this.props["data-testid"]},r.createElement("button",{className:"gf-form-label query-keyword pointer",onClick:this.onClickChooserButton,disabled:De,type:"button"},me,r.createElement(l.J,{name:de?"angle-down":"angle-right"})),r.createElement("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15"},r.createElement(V,{languageProvider:J,history:ne,onChange:this.onChangeQuery,onRunQuery:this.props.onRunQuery,initialValue:Q.expr??"",placeholder:"Enter a PromQL query\u2026"}))),de&&r.createElement("div",{className:"gf-form"},r.createElement(o,{languageProvider:J,onChange:this.onChangeLabelBrowser,lastUsedLabels:le||[],storeLastUsedLabels:Ee,deleteLastUsedLabels:be})),Z,ye?r.createElement("div",{className:"query-row-break"},r.createElement("div",{className:"prom-query-field-info text-warning"},ye.label," ",ye.fix?r.createElement("button",{type:"button",className:(0,t.cx)((0,d.gN)(ee),"text-link","muted"),onClick:this.onClickHintFix},ye.fix.label):null)):null))}}const j=(0,f.HE)(H)},91206:(X,L,e)=>{"use strict";e.d(L,{Z5:()=>hn,Fu:()=>cn,Zg:()=>rn,lj:()=>nt,b0:()=>un});var t=e(41407),n=e(39953),r=e(30559),a=e(17613),i=e(27770),y=e(82803),c=e(33155),l=e(3782),d=e(43324),f=e(50820),m=e(99242),u=e(32688),h=e(69171),C=e(26286);function x({options:Be,onOptionsChange:et}){const kt=(0,y.l4)(),nn=nt(kt),Pn=u.config.featureToggles.prometheusConfigOverhaulAuth;return n.createElement(m._,{title:"Alerting",className:(0,t.cx)(nn.container,{[nn.alertingTop]:Pn})},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h._,{labelWidth:30,label:"Manage alerts via Alerting UI",disabled:Be.readOnly,tooltip:n.createElement(n.Fragment,null,"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source. ",rn()),interactive:!0,className:nn.switchField},n.createElement(C.r,{value:Be.jsonData.manageAlerts!==!1,onChange:pn=>et({...Be,jsonData:{...Be.jsonData,manageAlerts:pn.currentTarget.checked}})}))))))}var b=e(74661),g=e(38637),p=(Be=>(Be.Public="AzureCloud",Be.China="AzureChinaCloud",Be.USGovernment="AzureUSGovernment",Be.None="",Be))(p||{});const v=[{value:"AzureCloud",label:"Azure"},{value:"AzureChinaCloud",label:"Azure China"},{value:"AzureUSGovernment",label:"Azure US Government"}];function E(Be){switch(Be.authType){case"msi":case"workloadidentity":return!0;case"clientsecret":return!!(Be.azureCloud&&Be.tenantId&&Be.clientId&&Be.clientSecret)}}const P=Symbol("Concealed client secret");function S(){return u.config.azure.cloud||p.Public}function M(Be){if(Be.secureJsonFields.azureClientSecret)return P;{const et=Be.secureJsonData?.azureClientSecret;return typeof et=="string"&&et.length>0?et:void 0}}function R(Be){return!!Be.jsonData.azureCredentials}function I(){return u.config.azure.managedIdentityEnabled?{authType:"msi"}:{authType:"clientsecret",azureCloud:S()}}function A(Be){const et=Be.jsonData.azureCredentials;if(!et)return I();switch(et.authType){case"msi":case"workloadidentity":return et.authType==="msi"&&u.config.azure.managedIdentityEnabled||et.authType==="workloadidentity"&&u.config.azure.workloadIdentityEnabled?{authType:et.authType}:{authType:"clientsecret",azureCloud:S()};case"clientsecret":return{authType:"clientsecret",azureCloud:et.azureCloud||S(),tenantId:et.tenantId,clientId:et.clientId,clientSecret:M(Be)}}}function O(Be,et){switch(et.authType){case"msi":case"workloadidentity":if(et.authType==="msi"&&!u.config.azure.managedIdentityEnabled)throw new Error("Managed Identity authentication is not enabled in Grafana config.");if(et.authType==="workloadidentity"&&!u.config.azure.workloadIdentityEnabled)throw new Error("Workload Identity authentication is not enabled in Grafana config.");return Be={...Be,jsonData:{...Be.jsonData,azureAuthType:et.authType,azureCredentials:{authType:et.authType}}},Be;case"clientsecret":return Be={...Be,jsonData:{...Be.jsonData,azureCredentials:{authType:"clientsecret",azureCloud:et.azureCloud||S(),tenantId:et.tenantId,clientId:et.clientId}},secureJsonData:{...Be.secureJsonData,azureClientSecret:typeof et.clientSecret=="string"&&et.clientSecret.length>0?et.clientSecret:void 0},secureJsonFields:{...Be.secureJsonFields,azureClientSecret:typeof et.clientSecret=="symbol"}},Be}}function N(Be){return{jsonData:{...Be.jsonData,azureCredentials:I()}}}function o(Be){return{jsonData:{...Be.jsonData,azureAuth:void 0,azureCredentials:void 0,azureEndpointResourceId:void 0}}}var w=e(56921),K=e(4919),V=e(27325),_=e(81425);const U=Be=>{const{credentials:et,azureCloudOptions:kt,onCredentialsChange:nn,getSubscriptions:Pn,disabled:pn,managedIdentityEnabled:In,workloadIdentityEnabled:Qn}=Be,Fn=E(et),[Ea,ut]=(0,n.useState)([]),[vt,Et]=(0,n.useReducer)(ta=>ta+1,0),It=(0,n.useMemo)(()=>{let ta=[{value:"clientsecret",label:"App Registration"}];return In&&ta.push({value:"msi",label:"Managed Identity"}),Qn&&ta.push({value:"workloadidentity",label:"Workload Identity"}),ta},[In,Qn]);(0,n.useEffect)(()=>{if(!Pn||!Fn){en([]);return}let ta=!1;return Pn().then(ha=>{ta||en(ha,vt)}),()=>{ta=!0}},[vt]);const en=(ta,ha=!1)=>{ut(ta),Pn&&(ha&&!et.defaultSubscriptionId&&ta.length>0?va(ta[0]):et.defaultSubscriptionId&&(ta.find(_a=>_a.value===et.defaultSubscriptionId)||va(void 0)))},Gt=ta=>{ut([]);const ha=In?"msi":Qn?"workloadidentity":"clientsecret",ma={...et,authType:ta.value||ha,defaultSubscriptionId:void 0};nn(ma)},Ln=ta=>{if(et.authType==="clientsecret"){ut([]);const ha={...et,azureCloud:ta.value,defaultSubscriptionId:void 0};nn(ha)}},jn=ta=>{if(et.authType==="clientsecret"){ut([]);const ha={...et,tenantId:ta.target.value,defaultSubscriptionId:void 0};nn(ha)}},zn=ta=>{if(et.authType==="clientsecret"){ut([]);const ha={...et,clientId:ta.target.value,defaultSubscriptionId:void 0};nn(ha)}},qn=ta=>{if(et.authType==="clientsecret"){ut([]);const ha={...et,clientSecret:ta.target.value,defaultSubscriptionId:void 0};nn(ha)}},Ia=()=>{if(et.authType==="clientsecret"){ut([]);const ta={...et,clientSecret:"",defaultSubscriptionId:void 0};nn(ta)}},va=ta=>{const ha={...et,defaultSubscriptionId:ta?.value};nn(ha)},aa=u.config.featureToggles.prometheusConfigOverhaulAuth;return n.createElement("div",{className:"gf-form-group"},It.length>1&&n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(w.c,{className:"width-12",tooltip:"Choose the type of authentication to Azure services"},"Authentication"),n.createElement(_.Ph,{className:"width-15",value:It.find(ta=>ta.value===et.authType),options:It,onChange:Gt,isDisabled:pn}))),et.authType==="clientsecret"&&n.createElement(n.Fragment,null,kt&&n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(w.c,{className:"width-12",tooltip:"Choose an Azure Cloud"},"Azure Cloud"),n.createElement(_.Ph,{className:"width-15",value:kt.find(ta=>ta.value===et.azureCloud),options:kt,onChange:Ln,isDisabled:pn}))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(w.c,{className:"width-12"},"Directory (tenant) ID"),n.createElement("div",{className:"width-15"},n.createElement(V.I,{className:(0,t.cx)(aa?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:et.tenantId||"",onChange:jn,disabled:pn})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(w.c,{className:"width-12"},"Application (client) ID"),n.createElement("div",{className:"width-15"},n.createElement(V.I,{className:(0,t.cx)(aa?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:et.clientId||"",onChange:zn,disabled:pn})))),typeof et.clientSecret=="symbol"?n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(w.c,{htmlFor:"azure-client-secret",className:"width-12"},"Client Secret"),n.createElement(V.I,{id:"azure-client-secret",className:(0,t.cx)(aa?"width-20":"width-25"),placeholder:"configured",disabled:!0})),!pn&&n.createElement("div",{className:"gf-form"},n.createElement("div",{className:(0,t.cx)(aa?"max-width-20 gf-form-inline":"max-width-30 gf-form-inline")},n.createElement(K.zx,{variant:"secondary",type:"button",onClick:Ia},"reset")))):n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(w.c,{className:"width-12"},"Client Secret"),n.createElement("div",{className:"width-15"},n.createElement(V.I,{className:(0,t.cx)(aa?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:et.clientSecret||"",onChange:qn,disabled:pn}))))),Pn&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(w.c,{className:"width-12"},"Default Subscription"),n.createElement("div",{className:(0,t.cx)(aa?"width-20":"width-25")},n.createElement(_.Ph,{value:et.defaultSubscriptionId?Ea.find(ta=>ta.value===et.defaultSubscriptionId):void 0,options:Ea,onChange:va,isDisabled:pn})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement("div",{className:"max-width-30 gf-form-inline"},n.createElement(K.zx,{variant:"secondary",size:"sm",type:"button",onClick:Et,disabled:!Fn},"Load Subscriptions"))))))},$=null,k=Be=>{const{dataSourceConfig:et,onChange:kt}=Be,[nn,Pn]=(0,n.useState)(!!et.jsonData.azureEndpointResourceId),pn=(0,n.useMemo)(()=>A(et),[et]),In=vt=>{kt(O(et,vt))},Qn=vt=>{Pn(vt.currentTarget.checked),vt.currentTarget.checked||kt({...et,jsonData:{...et.jsonData,azureEndpointResourceId:void 0}})},Fn=vt=>{nn&&kt({...et,jsonData:{...et.jsonData,azureEndpointResourceId:vt.currentTarget.value}})},Ea=u.config.featureToggles.prometheusConfigOverhaulAuth,ut=Ea?24:26;return n.createElement(n.Fragment,null,n.createElement("h6",null,"Azure authentication"),n.createElement(U,{managedIdentityEnabled:u.config.azure.managedIdentityEnabled,workloadIdentityEnabled:u.config.azure.workloadIdentityEnabled,credentials:pn,azureCloudOptions:v,onCredentialsChange:In,disabled:et.readOnly}),n.createElement("h6",null,"Azure configuration"),n.createElement("div",{className:"gf-form-group"},n.createElement(b.Z,null,n.createElement(h._,{labelWidth:ut,label:"Override AAD audience",disabled:et.readOnly},n.createElement(C.x,{value:nn,onChange:Qn}))),nn&&n.createElement(b.Z,null,n.createElement(h._,{labelWidth:ut,label:"Resource ID",disabled:et.readOnly},n.createElement(g.I,{className:(0,t.cx)(Ea?"width-20":"width-30"),value:et.jsonData.azureEndpointResourceId||"",onChange:Fn})))))},H=null;var j=e(28789),z=e(66211),F=e(84461),J=e(47169);const Q=Be=>{const{options:et,onOptionsChange:kt,azureAuthSettings:nn,sigV4AuthToggleEnabled:Pn,renderSigV4Editor:pn,secureSocksDSProxyEnabled:In}=Be,Qn=(0,j.T2)({config:et,onChange:kt}),Fn=(0,y.l4)(),Ea=nt(Fn);let ut=[];const[vt,Et]=(0,n.useState)(et.jsonData.sigV4Auth||!1),It="custom-sigV4Id",en={id:It,label:"SigV4 auth",description:"This is SigV4 auth description",component:n.createElement(n.Fragment,null,pn)};Pn&&ut.push(en);const Gt=nn?.azureAuthSupported&&nn.getAzureAuthEnabled(et)||!1,[Ln,jn]=(0,n.useState)(Gt),zn="custom-azureAuthId",qn={id:zn,label:"Azure auth",description:"This is Azure auth description",component:n.createElement(n.Fragment,null,nn.azureSettingsUI&&n.createElement(nn.azureSettingsUI,{dataSourceConfig:et,onChange:kt}))};nn?.azureAuthSupported&&ut.push(qn);function Ia(){return vt?It:Ln?zn:Qn.selectedMethod}let va;switch(et.access){case"direct":va=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",rn());break;case"proxy":va=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",rn());break;default:va=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",rn())}return n.createElement(n.Fragment,null,n.createElement(z.f,{urlPlaceholder:"http://localhost:9090",config:et,onChange:kt,urlLabel:"Prometheus server URL",urlTooltip:va}),n.createElement("hr",{className:`${Ea.hrTopSpace} ${Ea.hrBottomSpace}`}),n.createElement(F.g,{...Qn,customMethods:ut,onAuthMethodSelect:aa=>{Pn&&(Et(aa===It),et.jsonData.sigV4Auth=aa===It),nn?.azureAuthSupported&&(jn(aa===zn),nn.setAzureAuthEnabled(et,aa===zn)),Qn.onAuthMethodSelect(aa)},selectedMethod:Ia()}),n.createElement("div",{className:Ea.sectionBottomPadding}),In&&n.createElement(n.Fragment,null,n.createElement(J.i,{options:et,onOptionsChange:kt}),n.createElement("div",{className:Ea.sectionBottomPadding})))};var Z=e(28830),ne=e.n(Z),ee=e(47635),de=e(4148),Pe=e(9558),ye=e(57837),he=e(92743),me=e(97316),De=e(21308),le=e(1277),Ee=e(91473),be=e(52436),ge=e(33558),ue=e(69858),Ie=e(31312),ot=e(26893);const Qe=async()=>await getBackendSrv().get("/api/datasources"),Me=async Be=>{const et=await(0,Ie.n)((0,le.i)().fetch({method:"GET",url:`/api/datasources/${Be}`,params:(0,ot.y)(),showErrorAlert:!1}));if(et.ok)return et.data;throw Error(`Could not find data source by ID: "${Be}"`)},Ne=async Be=>{const et=await(0,Ie.n)((0,le.i)().fetch({method:"GET",url:`/api/datasources/uid/${Be}`,params:(0,ot.y)(),showErrorAlert:!1}));if(et.ok)return et.data;throw Error(`Could not find data source by UID: "${Be}"`)},qe=async Be=>{try{return await Ne(Be)}catch{console.log(`Failed to lookup data source using UID "${Be}"`)}try{return await Me(Be)}catch{console.log(`Failed to lookup data source using ID "${Be}"`)}throw Error("Could not find data source")},bt=Be=>getBackendSrv().post("/api/datasources",Be),Fe=()=>getBackendSrv().get("/api/plugins",{enabled:1,type:"datasource"}),Ve=Be=>(0,le.i)().put(`/api/datasources/uid/${Be.uid}`,Be,{showErrorAlert:!1,showSuccessAlert:!1}),Ue=Be=>getBackendSrv().delete(`/api/datasources/uid/${Be}`),it={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"},ze=({text:Be="PRO",className:et,experimentId:kt,eventVariant:nn="",...Pn})=>{const pn=useStyles2(Xe);return useEffect(()=>{kt&&reportExperimentView(kt,"test",nn)},[kt,nn]),React.createElement("span",{className:cx(pn.badge,et),...Pn},Be)},Xe=Be=>({badge:css`
      margin-left: ${Be.spacing(1.25)};
      border-radius: ${Be.shape.borderRadius(5)};
      background-color: ${Be.colors.success.main};
      padding: ${Be.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${Be.typography.fontWeightMedium};
      font-size: ${Be.typography.pxToRem(10)};
    `});var St=e(21527);const Bt="Loading";function zt(Be,et){const kt=et.meta,nn=config.featureToggles.featureHighlights,Pn=config.featureToggles.dataSourcePageHeader,pn={img:kt.info.logos.large,id:"datasource-"+Be.uid,url:"",text:Be.name,children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${Be.uid}`,text:"Settings",url:`datasources/edit/${Be.uid}/`}]};if(Pn||(pn.subTitle=`Type: ${kt.name}`),et.configPages)for(const It of et.configPages)pn.children.push({active:!1,text:It.title,icon:It.icon,url:`datasources/edit/${Be.uid}/?page=${It.id}`,id:`datasource-page-${It.id}`});kt.includes&&yn(kt.includes)&&contextSrv.hasRole("Admin")&&pn.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${Be.uid}`,text:"Dashboards",url:`datasources/edit/${Be.uid}/dashboards`});const In=Be.type===Bt,Qn="feature-highlights-data-source-permissions-badge",Fn={active:!1,icon:"lock",id:`datasource-permissions-${Be.uid}`,text:"Permissions",url:`datasources/edit/${Be.uid}/permissions`};highlightTrial()&&!In&&(Fn.tabSuffix=()=>ProBadge({experimentId:Qn,eventVariant:"trial"})),featureEnabled("dspermissions.enforcement")?contextSrv.hasPermission(AccessControlAction.DataSourcesPermissionsRead)&&pn.children.push(Fn):nn&&!In&&pn.children.push({...Fn,url:Fn.url+"/upgrade",tabSuffix:()=>ProBadge({experimentId:Qn})});const Ea="feature-highlights-data-source-insights-badge",ut={active:!1,icon:"info-circle",id:`datasource-insights-${Be.uid}`,text:"Insights",url:`datasources/edit/${Be.uid}/insights`};highlightTrial()&&!In&&(ut.tabSuffix=()=>ProBadge({experimentId:Ea,eventVariant:"trial"})),featureEnabled("analytics")?contextSrv.hasPermission(AccessControlAction.DataSourcesInsightsRead)&&pn.children.push(ut):nn&&!In&&pn.children.push({...ut,url:ut.url+"/upgrade",tabSuffix:()=>ProBadge({experimentId:Ea})});const vt="feature-highlights-query-caching-badge",Et={active:!1,icon:"database",id:`datasource-cache-${Be.uid}`,text:"Cache",url:`datasources/edit/${Be.uid}/cache`,hideFromTabs:!kt.isBackend||!config.caching.enabled};return highlightTrial()&&!In&&(Et.tabSuffix=()=>ProBadge({experimentId:vt,eventVariant:"trial"})),featureEnabled("caching")?contextSrv.hasPermissionInMetadata(AccessControlAction.DataSourcesCachingRead,Be)&&pn.children.push(Et):nn&&!In&&pn.children.push({...Et,url:Et.url+"/upgrade",tabSuffix:()=>ProBadge({experimentId:vt})}),pn}function qt(Be,et){let kt={text:""};for(const nn of Be.children)if(nn.id.indexOf(et)>0){nn.active=!0,kt=nn;break}return{main:Be,node:kt}}function Qt(Be){const et=zt({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:Bt,typeName:Bt,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:PluginType.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return qt(et,Be)}function yn(Be){return Be.find(et=>et.type==="dashboard")!==void 0}var Zt=e(96483);const re=Be=>{let et,kt;return Be.error&&Be.error instanceof he.ZA?(et=Be.error.message,kt=Be.error.details):(0,de.kW)(Be)?et=Be.data.message??`HTTP error ${Be.statusText}`:Be instanceof Error&&(et=Be.message),{message:et,details:kt}},Te=Be=>{const{details:et,message:kt,status:nn}=Be;return{status:nn,message:kt,details:et}},We=(Be,et={loadDataSource:pt,loadDataSourceMeta:ft,getDataSource,getDataSourceMeta,importDataSourcePlugin})=>async(kt,nn)=>{if(!Be){kt(initDataSourceSettingsFailed(new Error("Invalid UID")));return}try{const Pn=await kt(et.loadDataSource(Be));await kt(et.loadDataSourceMeta(Pn));const pn=et.getDataSource(nn().dataSources,Be),In=et.getDataSourceMeta(nn().dataSources,pn.type),Qn=await et.importDataSourcePlugin(In);kt(initDataSourceSettingsSucceeded(Qn))}catch(Pn){Pn instanceof Error&&kt(initDataSourceSettingsFailed(Pn))}},Je=(Be,et=DATASOURCES_ROUTES.Edit,kt={getDatasourceSrv,getBackendSrv})=>async(nn,Pn)=>{const pn=await kt.getDatasourceSrv().get(Be),In=et.replace(/:uid/gi,Be);pn.testDatasource&&(nn(testDataSourceStarting()),kt.getBackendSrv().withNoBackendCache(async()=>{try{const Qn=await pn.testDatasource(),Fn=Te({...Qn,details:{...Qn.details}});nn(testDataSourceSucceeded(Fn)),trackDataSourceTested({grafana_version:config.buildInfo.version,plugin_id:pn.type,datasource_uid:pn.uid,success:!0,path:In}),appEvents.publish(new DataSourceTestSucceeded)}catch(Qn){const Fn=re(Qn);nn(testDataSourceFailed({...Fn})),trackDataSourceTested({grafana_version:config.buildInfo.version,plugin_id:pn.type,datasource_uid:pn.uid,success:!1,path:In}),appEvents.publish(new DataSourceTestFailed)}}))};function je(){return async Be=>{Be(dataSourcesLoad());const et=await api.getDataSources();Be(dataSourcesLoaded(et))}}function pt(Be){return async et=>{let kt=await qe(Be);return Be!==kt.uid&&(window.location.href=ye.u.assureBaseUrl(`/datasources/edit/${kt.uid}`),kt={}),et((0,Zt.rl)(kt)),kt}}function ft(Be){return async et=>{const kt=await getPluginSettings(Be.type),nn=await importDataSourcePlugin(kt),Pn=nn.DataSourceClass.prototype instanceof DataSourceWithBackend,pn={...kt,isBackend:kt.backend||Pn};et(dataSourceMetaLoaded(pn)),nn.meta=pn,et(updateNavIndex(buildNavModel(Be,nn)))}}function Tt(Be,et=DATASOURCES_ROUTES.Edit){return async(kt,nn)=>{const Pn=await api.getDataSources();kt(dataSourcesLoaded(Pn));const pn=nn().dataSources.dataSources,In=pn.length===0,Qn={name:Be.name,type:Be.id,access:"proxy",isDefault:In};nameExits(pn,Qn.name)&&(Qn.name=findNewName(pn,Qn.name));const Fn=await api.createDataSource(Qn),Ea=et.replace(/:uid/gi,Fn.datasource.uid);await getDatasourceSrv().reload(),await contextSrv.fetchUserPermissions(),trackDataSourceCreated({grafana_version:config.buildInfo.version,plugin_id:Be.id,datasource_uid:Fn.datasource.uid,plugin_version:Fn.meta?.info?.version,path:Ea}),locationService.push(Ea)}}function Ye(){return async Be=>{Be(dataSourcePluginsLoad());const et=await api.getDataSourcePlugins(),kt=buildCategories(et);Be(dataSourcePluginsLoaded({plugins:et,categories:kt}))}}function Ce(Be){return async et=>{try{await Ve(Be)}catch(kt){const nn=re(kt);return et((0,Zt.Aq)(nn)),Promise.reject(Be)}return await(0,be.ak)().reload(),et(pt(Be.uid))}}function oe(){return async(Be,et)=>{const{uid:kt}=et().dataSources.dataSource;try{await api.deleteDataSource(kt),await getDatasourceSrv().reload();const nn=CONNECTIONS_ROUTES.DataSources;locationService.push(nn)}catch(nn){const Pn=re(nn);Be(testDataSourceFailed(Pn))}}}const pe=(0,n.createContext)(it);var Re=e(43686),ae=e(28833),ve=e(73431);const xe=Be=>{const et=useDispatch();useEffect(()=>(et(initDataSourceSettings(Be)),function(){et(cleanUpAction({cleanupAction:nn=>nn.dataSourceSettings=initialDataSourceSettingsState}))}),[Be,et])},Ge=Be=>{const et=useDispatch(),kt=Ut();return()=>et(testDataSource(Be,kt.Edit))},at=()=>{const Be=useDispatch(),et=useSelector(nn=>nn.dataSources.isLoadingDataSources),kt=useSelector(nn=>nn.dataSources.dataSources);return useEffect(()=>{Be(loadDataSources())},[Be]),{isLoading:et,dataSources:kt}},dt=Be=>{const et=useDispatch();useEffect(()=>{et(loadDataSource(Be))},[et,Be])},st=()=>{const Be=useDispatch();useEffect(()=>{Be(loadDataSourcePlugins())},[Be])},Pt=()=>{const Be=useDispatch(),et=Ut();return kt=>{Be(addDataSource(kt,et.Edit))}},we=()=>{const Be=(0,St.useDispatch)();return async et=>Be(Ce(et))},Le=()=>{const Be=useDispatch(),{name:et}=useSelector(kt=>kt.dataSources.dataSource);return()=>{appEvents.publish(new ShowConfirmModalEvent({title:"Delete",text:`Are you sure you want to delete the "${et}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>Be(deleteLoadedDataSource())}))}},Ke=Be=>useSelector(et=>getDataSource(et.dataSources,Be)),ht=Be=>{const et=Ke(Be);return constructDataSourceExploreUrl(et)},xt=Be=>useSelector(et=>getDataSourceMeta(et.dataSources,Be)),lt=()=>useSelector(Be=>Be.dataSourceSettings),Rt=Be=>{const et=Ke(Be),kt=et.readOnly===!0,nn=contextSrv.hasPermissionInMetadata(AccessControlAction.DataSourcesWrite,et),Pn=contextSrv.hasPermissionInMetadata(AccessControlAction.DataSourcesDelete,et);return{readOnly:kt,hasWriteRights:nn,hasDeleteRights:Pn}},Ut=()=>useContext(DataSourcesRoutesContext);var Xt=e(17330),$n=e(83065),Mt=e(3395),yt=e(64304),At=e(75766),Ht=e(11286);function tn({value:Be,onChange:et,onDelete:kt,disabled:nn}){const[Pn,pn]=(0,n.useState)(!!Be.datasourceUid),In=(0,y.l4)(),Qn=nt(In);return n.createElement("div",{className:"gf-form-group"},n.createElement(h._,{label:"Internal link",labelWidth:cn,disabled:nn,tooltip:n.createElement(n.Fragment,null,"Enable this option if you have an internal link. When enabled, this reveals the data source selector. Select the backend tracing data store for your exemplar data. ",rn()),interactive:!0,className:Qn.switchField},n.createElement(n.Fragment,null,n.createElement(C.r,{value:Pn,"aria-label":At.wl.components.DataSource.Prometheus.configPage.internalLinkSwitch,onChange:Fn=>pn(Fn.currentTarget.checked)}))),Pn?n.createElement(h._,{label:"Data source",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"The data source the exemplar is going to navigate to. ",rn()),disabled:nn,interactive:!0},n.createElement(Ht.q,{tracing:!0,current:Be.datasourceUid,noDefault:!0,width:40,onChange:Fn=>et({...Be,datasourceUid:Fn.uid,url:void 0})})):n.createElement(h._,{label:"URL",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"The URL of the trace backend the user would go to see its trace. ",rn()),disabled:nn,interactive:!0},n.createElement(g.I,{placeholder:"https://example.com/${__value.raw}",spellCheck:!1,width:40,value:Be.url,onChange:Fn=>et({...Be,datasourceUid:void 0,url:Fn.currentTarget.value})})),n.createElement(h._,{label:"URL Label",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"Use to override the button label on the exemplar traceID field. ",rn()),disabled:nn,interactive:!0},n.createElement(g.I,{placeholder:"Go to example.com",spellCheck:!1,width:40,value:Be.urlDisplayLabel,onChange:Fn=>et({...Be,urlDisplayLabel:Fn.currentTarget.value})})),n.createElement(h._,{label:"Label name",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"The name of the field in the labels object that should be used to get the traceID. ",rn()),disabled:nn,interactive:!0},n.createElement(g.I,{placeholder:"traceID",spellCheck:!1,width:40,value:Be.name,onChange:Fn=>et({...Be,name:Fn.currentTarget.value})})),!nn&&n.createElement(h._,{label:"Remove exemplar link",labelWidth:cn,disabled:nn},n.createElement(K.zx,{variant:"destructive",title:"Remove exemplar link",icon:"times",onClick:Fn=>{Fn.preventDefault(),kt()}})))}function gn({options:Be,onChange:et,disabled:kt}){const nn=(0,y.l4)(),Pn=nt(nn);return n.createElement("div",{className:Pn.sectionBottomPadding},n.createElement(m._,{title:"Exemplars",className:Pn.container},Be&&Be.map((pn,In)=>n.createElement(tn,{key:In,value:pn,onChange:Qn=>{const Fn=[...Be];Fn.splice(In,1,Qn),et(Fn)},onDelete:()=>{const Qn=[...Be];Qn.splice(In,1),et(Qn)},disabled:kt})),!kt&&n.createElement(K.zx,{variant:"secondary","aria-label":At.wl.components.DataSource.Prometheus.configPage.exemplarsAddButton,className:(0,t.css)`
              margin-bottom: 10px;
            `,icon:"plus",onClick:pn=>{pn.preventDefault();const In=[...Be||[],{name:"traceID"}];et(In)}},"Add"),kt&&!Be&&n.createElement("i",null,"No exemplars configurations")))}const mn={Prometheus:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"< 2.14.x"},{value:"2.14.0",label:"2.14.x"},{value:"2.15.0",label:"2.15.x"},{value:"2.16.0",label:"2.16.x"},{value:"2.17.0",label:"2.17.x"},{value:"2.18.0",label:"2.18.x"},{value:"2.19.0",label:"2.19.x"},{value:"2.20.0",label:"2.20.x"},{value:"2.21.0",label:"2.21.x"},{value:"2.22.0",label:"2.22.x"},{value:"2.23.0",label:"2.23.x"},{value:"2.24.0",label:"2.24.x"},{value:"2.25.0",label:"2.25.x"},{value:"2.26.0",label:"2.26.x"},{value:"2.27.0",label:"2.27.x"},{value:"2.28.0",label:"2.28.x"},{value:"2.29.0",label:"2.29.x"},{value:"2.30.0",label:"2.30.x"},{value:"2.31.0",label:"2.31.x"},{value:"2.32.0",label:"2.32.x"},{value:"2.33.0",label:"2.33.x"},{value:"2.34.0",label:"2.34.x"},{value:"2.35.0",label:"2.35.x"},{value:"2.36.0",label:"2.36.x"},{value:"2.37.0",label:"2.37.x"},{value:"2.38.0",label:"2.38.x"},{value:"2.39.0",label:"2.39.x"},{value:"2.40.0",label:"2.40.x"},{value:"2.41.0",label:"2.41.x"},{value:"2.42.0",label:"2.42.x"},{value:"2.43.0",label:"2.43.x"},{value:"2.44.0",label:"2.44.x"},{value:"2.45.0",label:"2.45.x"},{value:"2.46.0",label:"2.46.x"},{value:"2.47.0",label:"2.47.x"},{value:"2.48.0",label:"2.48.x"},{value:"2.49.0",label:"2.49.x"},{value:"2.50.0",label:"2.50.x"},{value:"2.50.1",label:"> 2.50.x"}],Mimir:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"2.0.x"},{value:"2.1.0",label:"2.1.x"},{value:"2.2.0",label:"2.2.x"},{value:"2.3.0",label:"2.3.x"},{value:"2.4.0",label:"2.4.x"},{value:"2.5.0",label:"2.5.x"},{value:"2.6.0",label:"2.6.x"},{value:"2.7.0",label:"2.7.x"},{value:"2.8.0",label:"2.8.x"},{value:"2.9.0",label:"2.9.x"},{value:"2.9.1",label:"> 2.9.x"}],Thanos:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 0.16.x"},{value:"0.16.0",label:"0.16.x"},{value:"0.17.0",label:"0.17.x"},{value:"0.18.0",label:"0.18.x"},{value:"0.19.0",label:"0.19.x"},{value:"0.20.0",label:"0.20.x"},{value:"0.21.0",label:"0.21.x"},{value:"0.22.0",label:"0.22.x"},{value:"0.23.0",label:"0.23.x"},{value:"0.24.0",label:"0.24.x"},{value:"0.25.0",label:"0.25.x"},{value:"0.26.0",label:"0.26.x"},{value:"0.27.0",label:"0.27.x"},{value:"0.28.0",label:"0.28.x"},{value:"0.29.0",label:"0.29.x"},{value:"0.30.0",label:"0.30.x"},{value:"0.31.0",label:"0.31.x"},{value:"0.31.1",label:"> 0.31.x"}],Cortex:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 1.0.0"},{value:"1.0.0",label:"1.0.0"},{value:"1.1.0",label:"1.1.x"},{value:"1.2.0",label:"1.2.x"},{value:"1.3.0",label:"1.3.x"},{value:"1.4.0",label:"1.4.x"},{value:"1.5.0",label:"1.5.x"},{value:"1.6.0",label:"1.6.x"},{value:"1.7.0",label:"1.7.x"},{value:"1.8.0",label:"1.8.x"},{value:"1.9.0",label:"1.9.x"},{value:"1.10.0",label:"1.10.x"},{value:"1.11.0",label:"1.11.x"},{value:"1.13.0",label:"1.13.x"},{value:"1.14.0",label:"> 1.13.x"}]},Tn=[{value:"POST",label:"POST"},{value:"GET",label:"GET"}],ln=[{value:$n.c.Builder,label:"Builder"},{value:$n.c.Code,label:"Code"}],Wn=[{value:yt.x3.Low,label:"Low"},{value:yt.x3.Medium,label:"Medium"},{value:yt.x3.High,label:"High"},{value:yt.x3.None,label:"None"}],On=[{value:Xt.T8.Prometheus,label:Xt.T8.Prometheus},{value:Xt.T8.Cortex,label:Xt.T8.Cortex},{value:Xt.T8.Mimir,label:Xt.T8.Mimir},{value:Xt.T8.Thanos,label:Xt.T8.Thanos}],Nn=/^$|^\d+(ms|[Mwdhmsy])$/,ia=/(\d+)(.+)/,da="Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s",Da=(Be,et)=>{if(!et||!mn[et])return;const nn=mn[et]?.filter(pn=>!!pn.value&&ne().lte(pn.value,Be)).map(pn=>pn.value),Pn=nn[nn.length-1];if(Pn){const pn=ne().diff(Pn,Be);if(["patch","prepatch","prerelease",null].includes(pn))return Pn}},ja=Be=>{console.warn("Error fetching version from buildinfo API, must manually select version!",Be)},Na=(Be,et,kt)=>{kt(Be).then(nn=>{(0,de.i)().get(`/api/datasources/uid/${nn.uid}/resources/version-detect`).then(Pn=>{const pn=Pn.data?.version??"";if(pn&&ne().valid(pn)){const In=Da(pn,nn.jsonData.prometheusType);In&&kt({...nn,jsonData:{...nn.jsonData,prometheusVersion:In}}).then(Qn=>{et(Qn)})}else ja()})}).catch(nn=>{ja(nn)})},Ha=Be=>{const{options:et,onOptionsChange:kt}=Be,nn=we();et.jsonData.httpMethod||(et.jsonData.httpMethod="POST");const Pn=(0,y.l4)(),pn=nt(Pn),[In,Qn]=(0,n.useState)({timeInterval:"",queryTimeout:"",incrementalQueryOverlapWindow:""});return n.createElement(n.Fragment,null,n.createElement(m._,{title:"Interval behaviour",className:pn.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h._,{label:"Scrape interval",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"This interval is how frequently Prometheus scrapes targets. Set this to the typical scrape and evaluation interval configured in your Prometheus config file. If you set this to a greater value than your Prometheus config file interval, Grafana will evaluate the data according to this interval and you will see less data points. Defaults to 15s. ",rn()),interactive:!0,disabled:et.readOnly},n.createElement(n.Fragment,null,n.createElement(g.I,{className:"width-20",value:et.jsonData.timeInterval,spellCheck:!1,placeholder:"15s",onChange:Ft("timeInterval",et,kt),onBlur:Fn=>Qn({...In,timeInterval:Fn.currentTarget.value})}),un(In.timeInterval,Nn,da))))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h._,{label:"Query timeout",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"Set the Prometheus query timeout. ",rn()),interactive:!0,disabled:et.readOnly},n.createElement(n.Fragment,null,n.createElement(g.I,{className:"width-20",value:et.jsonData.queryTimeout,onChange:Ft("queryTimeout",et,kt),spellCheck:!1,placeholder:"60s",onBlur:Fn=>Qn({...In,queryTimeout:Fn.currentTarget.value})}),un(In.queryTimeout,Nn,da))))))),n.createElement(m._,{title:"Query editor",className:pn.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(h._,{label:"Default editor",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"Set default editor option for all users of this data source. ",rn()),interactive:!0,disabled:et.readOnly},n.createElement(Pe.Ph,{"aria-label":"Default Editor (Code or Builder)",options:ln,value:ln.find(Fn=>Fn.value===et.jsonData.defaultEditor)??ln.find(Fn=>Fn.value===$n.c.Builder),onChange:Ft("defaultEditor",et,kt),width:40}))),n.createElement("div",{className:"gf-form"},n.createElement(h._,{labelWidth:cn,label:"Disable metrics lookup",tooltip:n.createElement(n.Fragment,null,"Checking this option will disable the metrics chooser and metric/label support in the query field's autocomplete. This helps if you have performance issues with bigger Prometheus instances."," ",rn()),interactive:!0,disabled:et.readOnly,className:pn.switchField},n.createElement(C.r,{value:et.jsonData.disableMetricsLookup??!1,onChange:(0,ee.hz)(Be,"disableMetricsLookup")}))))),n.createElement(m._,{title:"Performance",className:pn.container},!et.jsonData.prometheusType&&!et.jsonData.prometheusVersion&&et.readOnly&&n.createElement("div",{className:pn.versionMargin},"For more information on configuring prometheus type and version in data sources, see the"," ",n.createElement("a",{className:pn.textUnderline,href:"https://grafana.com/docs/grafana/latest/administration/provisioning/"},"provisioning documentation"),"."),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h._,{label:"Prometheus type",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"Set this to the type of your prometheus database, e.g. Prometheus, Cortex, Mimir or Thanos. Changing this field will save your current settings, and attempt to detect the version. Certain types of Prometheus support or do not support various APIs. For example, some types support regex matching for label queries to improve performance. Some types have an API for metadata. If you set this incorrectly you may experience odd behavior when querying metrics and labels. Please check your Prometheus documentation to ensure you enter the correct type. ",rn()),interactive:!0,disabled:et.readOnly},n.createElement(Pe.Ph,{"aria-label":"Prometheus type",options:On,value:On.find(Fn=>Fn.value===et.jsonData.prometheusType),onChange:Ft("prometheusType",{...et,jsonData:{...et.jsonData,prometheusVersion:void 0}},Fn=>(Na(Fn,kt,nn),kt({...Fn,jsonData:{...Fn.jsonData,prometheusVersion:void 0}}))),width:40})))),n.createElement("div",{className:"gf-form-inline"},et.jsonData.prometheusType&&n.createElement("div",{className:"gf-form"},n.createElement(h._,{label:`${et.jsonData.prometheusType} version`,labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"Use this to set the version of your ",et.jsonData.prometheusType," instance if it is not automatically configured. ",rn()),interactive:!0,disabled:et.readOnly},n.createElement(Pe.Ph,{"aria-label":`${et.jsonData.prometheusType} type`,options:mn[et.jsonData.prometheusType],value:mn[et.jsonData.prometheusType]?.find(Fn=>Fn.value===et.jsonData.prometheusVersion),onChange:Ft("prometheusVersion",et,kt),width:40})))),f.default.featureToggles.prometheusResourceBrowserCache&&n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(h._,{label:"Cache level",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"Sets the browser caching level for editor queries. Higher cache settings are recommended for high cardinality data sources."),interactive:!0,disabled:et.readOnly},n.createElement(Pe.Ph,{width:40,onChange:Ft("cacheLevel",et,kt),options:Wn,value:Wn.find(Fn=>Fn.value===et.jsonData.cacheLevel)??yt.x3.Low})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(h._,{label:"Incremental querying (beta)",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"This feature will change the default behavior of relative queries to always request fresh data from the prometheus instance, instead query results will be cached, and only new records are requested. Turn this on to decrease database and network load."),interactive:!0,className:pn.switchField,disabled:et.readOnly},n.createElement(C.r,{value:et.jsonData.incrementalQuerying??!1,onChange:(0,ee.hz)(Be,"incrementalQuerying")})))),n.createElement("div",{className:"gf-form-inline"},et.jsonData.incrementalQuerying&&n.createElement(h._,{label:"Query overlap window",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"Set a duration like 10m or 120s or 0s. Default of 10 minutes. This duration will be added to the duration of each incremental request."),interactive:!0,disabled:et.readOnly},n.createElement(n.Fragment,null,n.createElement(g.I,{onBlur:Fn=>Qn({...In,incrementalQueryOverlapWindow:Fn.currentTarget.value}),className:"width-20",value:et.jsonData.incrementalQueryOverlapWindow??Mt.Ji,onChange:Ft("incrementalQueryOverlapWindow",et,kt),spellCheck:!1}),un(In.incrementalQueryOverlapWindow,ia,da)))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(h._,{label:"Disable recording rules (beta)",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"This feature will disable recording rules Turn this on to improve dashboard performance"),interactive:!0,className:pn.switchField,disabled:et.readOnly},n.createElement(C.r,{value:et.jsonData.disableRecordingRules??!1,onChange:(0,ee.hz)(Be,"disableRecordingRules")})))))),n.createElement(m._,{title:"Other",className:pn.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(h._,{label:"Custom query parameters",labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"Add custom parameters to the Prometheus query URL. For example timeout, partial_response, dedup, or max_source_resolution. Multiple parameters should be concatenated together with an \u2018&\u2019. ",rn()),interactive:!0,disabled:et.readOnly},n.createElement(g.I,{className:"width-20",value:et.jsonData.customQueryParameters,onChange:Ft("customQueryParameters",et,kt),spellCheck:!1,placeholder:"Example: max_source_resolution=5m&timeout=10"})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h._,{labelWidth:cn,tooltip:n.createElement(n.Fragment,null,"You can use either POST or GET HTTP method to query your Prometheus data source. POST is the recommended method as it allows bigger queries. Change this to GET if you have a Prometheus version older than 2.1 or if POST requests are restricted in your network. ",rn()),interactive:!0,label:"HTTP method",disabled:et.readOnly},n.createElement(Pe.Ph,{width:40,"aria-label":"Select HTTP method",options:Tn,value:Tn.find(Fn=>Fn.value===et.jsonData.httpMethod),onChange:Ft("httpMethod",et,kt)})))))),n.createElement(gn,{options:et.jsonData.exemplarTraceIdDestinations,onChange:Fn=>(0,ee.tp)({onOptionsChange:kt,options:et},"exemplarTraceIdDestinations",Fn),disabled:et.readOnly}))},gt=Be=>Be?Be.hasOwnProperty("currentTarget")?Be.currentTarget.value:Be.value:"",Ft=(Be,et,kt)=>nn=>{kt({...et,jsonData:{...et.jsonData,[Be]:gt(nn)}})};var jt=e(97250);const an=({config:Be,onChange:et,className:kt})=>{const nn=In=>{et({...Be,jsonData:{...Be.jsonData,keepCookies:In}})},Pn=In=>{et({...Be,jsonData:{...Be.jsonData,timeout:parseInt(In.currentTarget.value,10)}})},pn={container:(0,t.css)({maxWidth:578})};return n.createElement(n.Fragment,null,n.createElement(m._,{title:"Advanced HTTP settings",className:(0,t.cx)(pn.container,kt)},n.createElement(h._,{htmlFor:"advanced-http-cookies",label:"Allowed cookies",labelWidth:cn,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",disabled:Be.readOnly,grow:!0},n.createElement(jt.B,{className:"width-20",id:"advanced-http-cookies",placeholder:"New cookie (hit enter to add)",tags:Be.jsonData.keepCookies,onChange:nn})),n.createElement(h._,{htmlFor:"advanced-http-timeout",label:"Timeout",labelWidth:cn,tooltip:"HTTP request timeout in seconds",disabled:Be.readOnly,grow:!0},n.createElement(g.I,{className:"width-20",id:"advanced-http-timeout",type:"number",min:0,placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:Be.jsonData.timeout,onChange:Pn}))))},cn=30,hn=Be=>{const{options:et,onOptionsChange:kt}=Be,nn=f.config.featureToggles.prometheusConfigOverhaulAuth,Pn=(0,n.useRef)(Be.options.access==="direct"),pn={azureAuthSupported:f.config.azureAuthEnabled,getAzureAuthEnabled:Fn=>R(Fn),setAzureAuthEnabled:(Fn,Ea)=>Ea?N(Fn):o(Fn),azureSettingsUI:k},In=(0,y.l4)(),Qn=nt(In);return n.createElement(n.Fragment,null,et.access==="direct"&&n.createElement(c.b,{title:"Error",severity:"error"},"Browser access mode in the Prometheus data source is no longer available. Switch to server access mode."),nn?n.createElement(n.Fragment,null,n.createElement(a.j,{dataSourceName:"Prometheus",docsLink:"https://grafana.com/docs/grafana/latest/datasources/prometheus/configure-prometheus-data-source/"}),n.createElement("hr",{className:`${Qn.hrTopSpace} ${Qn.hrBottomSpace}`}),n.createElement(Q,{options:et,onOptionsChange:kt,azureAuthSettings:pn,sigV4AuthToggleEnabled:f.config.sigV4AuthEnabled,renderSigV4Editor:n.createElement(r.IW,{inExperimentalAuthComponent:!0,...Be}),secureSocksDSProxyEnabled:f.config.secureSocksDSProxyEnabled})):n.createElement(l.E,{defaultUrl:"http://localhost:9090",dataSourceConfig:et,showAccessOptions:Pn.current,onChange:kt,sigV4AuthToggleEnabled:f.config.sigV4AuthEnabled,azureAuthSettings:pn,renderSigV4Editor:n.createElement(r.IW,{...Be}),secureSocksDSProxyEnabled:f.config.secureSocksDSProxyEnabled,urlLabel:"Prometheus server URL",urlDocs:rn()}),nn?n.createElement(n.Fragment,null,n.createElement("hr",null),n.createElement(i.K,{className:Qn.advancedSettings,title:"Advanced settings",description:"Additional settings are optional settings that can be configured for more control over your data source."},n.createElement(an,{className:Qn.advancedHTTPSettingsMargin,config:et,onChange:kt}),n.createElement(x,{options:et,onOptionsChange:kt}),n.createElement(Ha,{options:et,onOptionsChange:kt}))):n.createElement(n.Fragment,null,n.createElement("hr",{className:Qn.hrTopSpace}),n.createElement("h3",{className:Qn.sectionHeaderPadding},"Additional settings"),n.createElement("p",{className:`${Qn.secondaryGrey} ${Qn.subsectionText}`},"Additional settings are optional settings that can be configured for more control over your data source."),n.createElement(x,{options:et,onOptionsChange:kt}),n.createElement(Ha,{options:et,onOptionsChange:kt})))};function rn(Be){const et="https://grafana.com/docs/grafana/latest/datasources/prometheus/#configure-the-data-source";return n.createElement("a",{href:Be||et,target:"_blank",rel:"noopener noreferrer"},"Visit docs for more details here.")}const un=(Be,et,kt)=>{const nn="Value is not valid";return Be&&!Be.match(et)?n.createElement(d.S,null,kt||nn):!0};function nt(Be){return{additionalSettings:(0,t.css)`
      margin-bottom: 25px;
    `,secondaryGrey:(0,t.css)`
      color: ${Be.colors.secondary.text};
      opacity: 65%;
    `,inlineError:(0,t.css)`
      margin: 0px 0px 4px 245px;
    `,switchField:(0,t.css)`
      align-items: center;
    `,sectionHeaderPadding:(0,t.css)`
      padding-top: 32px;
    `,sectionBottomPadding:(0,t.css)`
      padding-bottom: 28px;
    `,subsectionText:(0,t.css)`
      font-size: 12px;
    `,hrBottomSpace:(0,t.css)`
      margin-bottom: 56px;
    `,hrTopSpace:(0,t.css)`
      margin-top: 50px;
    `,textUnderline:(0,t.css)`
      text-decoration: underline;
    `,versionMargin:(0,t.css)`
      margin-bottom: 12px;
    `,advancedHTTPSettingsMargin:(0,t.css)`
      margin: 24px 0 8px 0;
    `,advancedSettings:(0,t.css)`
      padding-top: 32px;
    `,alertingTop:(0,t.css)`
      margin-top: 40px !important;
    `,overhaulPageHeading:(0,t.css)`
      font-weight: 400;
    `,container:(0,t.css)`
      maxwidth: 578;
    `}}},93676:(X,L,e)=>{"use strict";e.d(L,{QG:()=>We,vQ:()=>Je});var t=e(86832),n=e(63781),r=e(39953),a=e(8894),i=e(31312),y=e(63302),c=e(15056),l=e(3195),d=e(74539),f=e(71476),m=e(82696),u=e(81595),h=e(10752),C=e(28830),x=e.n(C),b=e(96083),g=e(81626),p=e(72964),v=e(10694),E=e(92403),P=e(92743),S=e(4649),M=e(4148),R=e(12608),I=e(69865),A=e(44951),O=e(78313),N=e(6278),o=e(41182),w=e(17330),K=e(50820),V=e(74149),_=e(91386),U=e(87355),$=e(46101),k=e(30623),H=e(55629),j=e(28448),z=e(38637),F=e(94180);function J(Ye){const Ce=Ye.annotation,oe=Ye.onAnnotationChange,pe={expr:Ce.expr,refId:Ce.name,interval:Ce.step};return r.createElement(r.Fragment,null,r.createElement(_._,null,r.createElement(F.j,{...Ye,query:pe,showExplain:!1,onChange:Re=>{oe({...Ce,expr:Re.expr})}}),r.createElement(U.p,null,r.createElement($.S,{label:"Min step",tooltip:r.createElement(r.Fragment,null,"An additional lower limit for the step parameter of the Prometheus query and for the"," ",r.createElement("code",null,"$__interval")," and ",r.createElement("code",null,"$__rate_interval")," variables.")},r.createElement(j.H,{type:"text","aria-label":"Set lower limit for the step parameter",placeholder:"auto",minWidth:10,onCommitChange:Re=>{oe({...Ce,step:Re.currentTarget.value})},defaultValue:pe.interval})))),r.createElement(k.T,{v:.5}),r.createElement(U.p,null,r.createElement($.S,{label:"Title",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},r.createElement(z.I,{type:"text",placeholder:"{{alertname}}",value:Ce.titleFormat,onChange:Re=>{oe({...Ce,titleFormat:Re.currentTarget.value})}})),r.createElement($.S,{label:"Tags"},r.createElement(z.I,{type:"text",placeholder:"label1,label2",value:Ce.tagKeys,onChange:Re=>{oe({...Ce,tagKeys:Re.currentTarget.value})}})),r.createElement($.S,{label:"Text",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},r.createElement(z.I,{type:"text",placeholder:"{{instance}}",value:Ce.textFormat,onChange:Re=>{oe({...Ce,textFormat:Re.currentTarget.value})}})),r.createElement($.S,{label:"Series value as timestamp",tooltip:"The unit of timestamp is milliseconds. If the unit of the series value is seconds, multiply its range vector by 1000."},r.createElement(H.r,{value:Ce.useValueForTime,onChange:Re=>{oe({...Ce,useValueForTime:Re.currentTarget.value})}}))))}var Q=e(47810),Z=e(63163),ne=e(89527),ee=e(95522),de=e(64304);const Pe=/^label_names\(\)\s*$/,ye=/^label_values\((?:(.+),\s*)?([a-zA-Z_$][a-zA-Z0-9_]*)\)\s*$/,he=/^metrics\((.+)\)\s*$/,me=/^query_result\((.+)\)\s*$/,De=/^label_names\((.+)\)\s*$/;function le(Ye){if(typeof Ye!="string")return Ye;const Ce={refId:"PrometheusDatasource-VariableQuery",qryType:de.jo.LabelNames},oe=Ye.match(De);if(oe)return{...Ce,qryType:de.jo.LabelNames,match:oe[1]};const pe=Ye.match(Pe);if(pe)return{...Ce,qryType:de.jo.LabelNames};const Re=Ye.match(/^label_values\(/);if(Re){const xe=Ye.match(ye),Ge=xe?xe[2]:"",at=xe?xe[1]:"";if(at){const dt=(0,ee._)(at);return{...Ce,qryType:de.jo.LabelValues,label:Ge,metric:dt.query.metric,labelFilters:dt.query.labels}}else return{...Ce,qryType:de.jo.LabelValues,label:Ge}}const ae=Ye.match(/^metrics\(/);if(ae){const xe=Ye.match(he),Ge=xe?xe[1]:"";return{...Ce,qryType:de.jo.MetricNames,metric:Ge}}const ve=Ye.match(/^query_result\(/);if(ve){const xe=Ye.match(me),Ge=xe?xe[1]:"";return{...Ce,qryType:de.jo.VarQueryResult,varQuery:Ge}}return!pe&&!Re&&!ae&&!ve?{...Ce,qryType:de.jo.SeriesQuery,seriesQuery:Ye}:Ce}function Ee(Ye){switch(Ye.qryType){case de.jo.LabelNames:return Ye.match?`label_names(${Ye.match})`:"label_names()";case de.jo.LabelValues:if(Ye.metric){const oe={metric:Ye.metric,labels:Ye.labelFilters??[],operations:[]};return`label_values(${ne.Z.renderQuery(oe)},${Ye.label})`}else return`label_values(${Ye.label})`;case de.jo.MetricNames:return`metrics(${Ye.metric})`;case de.jo.VarQueryResult:return`query_result(${be(Ye.varQuery)})`;case de.jo.SeriesQuery:return Ye.seriesQuery??"";case de.jo.ClassicQuery:return Ye.classicQuery??""}return""}function be(Ye){return Ye?Ye.replace(/[\r\n]+/gm,""):""}class ge{constructor(Ce,oe){this.datasource=Ce,this.query=oe,this.datasource=Ce,this.query=oe,this.range=(0,N.$t)().timeRange()}process(){const Ce=Pe,oe=De,pe=/^label_values\((?:(.+),\s*)?([a-zA-Z_][a-zA-Z0-9_]*)\)\s*$/,Re=he,ae=me,ve=this.query.match(Ce),xe=this.query.match(oe);if(xe){const Pt=`{__name__=~".*${xe[1]}.*"}`;return this.datasource.languageProvider.getSeriesLabels(Pt,[]).then(we=>we.map(Le=>({text:Le})))}if(ve)return this.datasource.getTagKeys({filters:[]});const Ge=this.query.match(pe);if(Ge)return Ge[1]?this.labelValuesQuery(Ge[2],Ge[1]):this.labelValuesQuery(Ge[2]);const at=this.query.match(Re);if(at)return this.metricNameQuery(at[1]);const dt=this.query.match(ae);return dt?(0,i.n)(this.queryResultQuery(dt[1])):["label_values()","metrics()","query_result()"].includes(this.query)?Promise.resolve([]):this.metricNameAndLabelsQuery(this.query)}labelValuesQuery(Ce,oe){const pe=(0,Z.jj)(this.range.from,!1),Re=(0,Z.jj)(this.range.to,!0),ae={...oe&&{"match[]":oe},start:pe.toString(),end:Re.toString()};if(!oe||this.datasource.hasLabelsMatchAPISupport()){const ve=`/api/v1/label/${Ce}/values`;return this.datasource.metadataRequest(ve,ae).then(xe=>(0,t.map)(xe.data.data,Ge=>({text:Ge})))}else{const ve="/api/v1/series";return this.datasource.metadataRequest(ve,ae).then(xe=>{const Ge=(0,t.map)(xe.data.data,at=>at[Ce]||"").filter(at=>at!=="");return(0,t.uniq)(Ge).map(at=>({text:at,expandable:!0}))})}}metricNameQuery(Ce){const oe=(0,Z.jj)(this.range.from,!1),pe=(0,Z.jj)(this.range.to,!0),Re={start:oe.toString(),end:pe.toString()},ae="/api/v1/label/__name__/values";return this.datasource.metadataRequest(ae,Re).then(ve=>(0,t.chain)(ve.data.data).filter(xe=>new RegExp(Ce).test(xe)).map(xe=>({text:xe,expandable:!0})).value())}queryResultQuery(Ce){const oe=(0,Z.jj)(this.range.to,!0),pe={expr:Ce};return this.datasource.performInstantQuery(pe,oe).pipe((0,f.U)(Re=>{switch(Re.data.data.resultType){case"scalar":case"string":return[{text:Re.data.data.result[1]||"",expandable:!1}];case"vector":return(0,t.map)(Re.data.data.result,ae=>{let ve=ae.metric.__name__||"";return delete ae.metric.__name__,ve+="{"+(0,t.map)(ae.metric,(xe,Ge)=>Ge+'="'+xe+'"').join(",")+"}",ve+=" "+ae.value[1]+" "+ae.value[0]*1e3,{text:ve,expandable:!0}});default:throw Error(`Unknown/Unhandled result type: [${Re.data.data.resultType}]`)}}))}metricNameAndLabelsQuery(Ce){const oe=(0,Z.jj)(this.range.from,!1),pe=(0,Z.jj)(this.range.to,!0),Re={"match[]":Ce,start:oe.toString(),end:pe.toString()},ae="/api/v1/series",ve=this;return this.datasource.metadataRequest(ae,Re).then(xe=>(0,t.map)(xe.data.data,Ge=>({text:ve.datasource.getOriginalMetricName(Ge),expandable:!0})))}}const ue=20;function Ie(Ye,Ce,oe){const pe=[];if(Ye.trim().match(/^\w+_bucket$|^\w+_bucket{.*}$/)){const ae="Selected metric has buckets.";pe.push({type:"HISTOGRAM_QUANTILE",label:ae,fix:{label:"Consider calculating aggregated quantile by adding histogram_quantile().",action:{type:"ADD_HISTOGRAM_QUANTILE",query:Ye}}})}if(Ye.indexOf("rate(")===-1&&Ye.indexOf("increase(")===-1){const ae=Ye.match(/\b(\w+_(total|sum|count))\b/);let ve=ae?ae[1]:"";const xe=oe?.languageProvider?.metricsMetadata;let Ge=!1;if(xe&&(ve=Array.from(Ye.matchAll(/\$?[a-zA-Z_:][a-zA-Z0-9_:]*/g)).map(([dt])=>dt).filter(dt=>!dt.startsWith("$")).flatMap(dt=>dt.split(":")).find(dt=>{const st=xe[dt];return st&&st.type.toLowerCase()==="counter"?(Ge=!0,!0):!1})??""),ve){const at=Ye.trim().match(/^\w+$|^\w+{.*}$/);let st=`Selected metric ${Ge?"is":"looks like"} a counter.`,Pt;at?Pt={label:"Consider calculating rate of counter by adding rate().",action:{type:"ADD_RATE",query:Ye}}:st=`${st} Consider calculating rate of counter by adding rate().`,pe.push({type:"APPLY_RATE",label:st,fix:Pt})}}if(oe&&oe.ruleMappings){const ae=oe.ruleMappings,ve=Object.keys(ae).reduce((xe,Ge)=>Ye.search(Ge)>-1?{...xe,[Ge]:ae[Ge]}:xe,{});if((0,t.size)(ve)>0){const xe="Query contains recording rules.";pe.push({type:"EXPAND_RULES",label:xe,fix:{label:"Expand rules",action:{type:"EXPAND_RULES",query:Ye,options:ve}}})}}return Ce&&Ce.length>=ue&&Ye.trim().match(/^\w+$/)&&pe.push({type:"ADD_SUM",label:"Many time series results returned.",fix:{label:"Consider aggregating with sum().",action:{type:"ADD_SUM",query:Ye,preventSubmit:!0}}}),pe}function ot(Ye){const Ce=[];return Ye.directUrl.includes("/loki")&&!Ye.languageProvider.metrics.length&&Ce.push({label:"Using Loki as a Prometheus data source is no longer supported. You must use the Loki data source for your Loki instance.",type:"INFO"}),Ye.lookupsDisabled&&Ce.push({label:"Labels and metrics lookup was disabled in data source settings.",type:"INFO"}),Ce}var Qe=e(3395),Me=e(52226),Ne=e(72639),qe=e(32688);function bt(Ye,Ce,oe){const{app:pe,targets:Re}=Ce;if(!(pe===b.zj.Dashboard||pe===b.zj.PanelViewer))for(const ae of Re)(0,Ne.ff)("grafana_prometheus_query_executed",{app:pe,grafana_version:qe.config.buildInfo.version,has_data:Ye.data.some(ve=>ve.length>0),has_error:Ye.error!==void 0,expr:ae.expr,format:ae.format,instant:ae.instant,range:ae.range,exemplar:ae.exemplar,hinting:ae.hinting,interval:ae.interval,intervalFactor:ae.intervalFactor,utcOffsetSec:ae.utcOffsetSec,legend:ae.legendFormat,valueWithRefId:ae.valueWithRefId,requestId:Ce.requestId,showingGraph:ae.showingGraph,showingTable:ae.showingTable,editor_mode:ae.editorMode,simultaneously_sent_query_count:Re.length,time_range_from:Ce?.range?.from?.toISOString(),time_range_to:Ce?.range?.to?.toISOString(),time_taken:Date.now()-oe.getTime()})}var Fe=e(22605),Ve=e(95405),Ue=e(79059),it=e(74661),ze=e(69171),Xe=e(9558),St=e(68421),Bt=e(85308);const zt=[{label:"Label names",value:de.jo.LabelNames},{label:"Label values",value:de.jo.LabelValues},{label:"Metrics",value:de.jo.MetricNames},{label:"Query result",value:de.jo.VarQueryResult},{label:"Series query",value:de.jo.SeriesQuery},{label:"Classic query",value:de.jo.ClassicQuery}],qt="PrometheusVariableQueryEditor-VariableQuery",Qt=({onChange:Ye,query:Ce,datasource:oe})=>{const[pe,Re]=(0,r.useState)(void 0),[ae,ve]=(0,r.useState)(""),[xe,Ge]=(0,r.useState)(""),[at,dt]=(0,r.useState)(""),[st,Pt]=(0,r.useState)(""),[we,Le]=(0,r.useState)(""),[Ke,ht]=(0,r.useState)(""),[xt,lt]=(0,r.useState)([]),[Rt,Ut]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(Ce)if(Ce.qryType===de.jo.ClassicQuery)Re(Ce.qryType),ht(Ce.query??"");else{const ln=yn(Ce);Ge(ln.match??""),Re(ln.qryType),ve(ln.label??""),dt(ln.metric??""),Ut(ln.labelFilters??[]),Pt(ln.varQuery??""),Le(ln.seriesQuery??""),ht(ln.classicQuery??"")}},[Ce]),(0,r.useEffect)(()=>{if(pe!==de.jo.LabelValues)return;const ln=oe.getVariables().map(Wn=>({label:Wn,value:Wn}));if(!at)oe.getTagKeys({filters:[]}).then(Wn=>{const On=Wn.map(({text:Nn})=>({label:Nn,value:Nn}));lt([...ln,...On])});else{const Wn=[{label:"__name__",op:"=",value:at}],On=ne.Z.renderLabels(Wn);oe.hasLabelsMatchAPISupport()?oe.languageProvider.fetchSeriesLabelsMatch(On).then(Nn=>{const da=Object.keys(Nn).map(Da=>({label:Da,value:Da}));lt([...ln,...da])}):oe.languageProvider.fetchSeriesLabels(On).then(Nn=>{const da=Object.keys(Nn).map(Da=>({label:Da,value:Da}));lt([...ln,...da])})}},[oe,pe,at]);const Xt=(ln,Wn)=>{const ia={...{qryType:pe,label:ae,metric:at,match:xe,varQuery:st,seriesQuery:we,classicQuery:Ke,refId:"PrometheusVariableQueryEditor-VariableQuery"},...ln,...Wn?{labelFilters:Wn}:{labelFilters:Rt}},da=Ee(ia);Ye({query:da,qryType:ia.qryType,refId:qt})},$n=ln=>{Re(ln.value),ln.value!==de.jo.SeriesQuery&&Xt({qryType:ln.value??0})},Mt=ln=>{const Wn=ln&&ln.value?ln.value:"";ve(Wn),pe===de.jo.LabelValues&&Wn&&Xt({label:Wn})},yt=ln=>{dt(ln.metric),Ut(ln.labels);const Wn=ln.metric,On=ln.labels??[];pe===de.jo.LabelValues&&ae&&(Wn||On)&&Xt({qryType:pe,metric:Wn},On)},At=ln=>{pe===de.jo.LabelNames&&Xt({qryType:pe,match:ln})},Ht=ln=>{pe===de.jo.MetricNames&&ln&&Xt({metric:ln})},tn=ln=>{Pt(ln.currentTarget.value)},gn=ln=>{Le(ln.currentTarget.value)},mn=ln=>{ht(ln.currentTarget.value)},Tn=(0,r.useCallback)(()=>({metric:at,labels:Rt,operations:[]}),[at,Rt]);return r.createElement(r.Fragment,null,r.createElement(it.Z,null,r.createElement(ze._,{label:"Query type",labelWidth:20,tooltip:r.createElement("div",null,"The Prometheus data source plugin provides the following query types for template variables.")},r.createElement(Xe.Ph,{placeholder:"Select query type","aria-label":"Query type",onChange:$n,value:pe,options:zt,width:25}))),pe===de.jo.LabelValues&&r.createElement(r.Fragment,null,r.createElement(it.Z,null,r.createElement(ze._,{label:"Label",labelWidth:20,required:!0,"aria-labelledby":"label-select",tooltip:r.createElement("div",null,"Returns a list of label values for the label name in all metrics unless the metric is specified.")},r.createElement(Xe.Ph,{"aria-label":"label-select",onChange:Mt,value:ae,options:xt,width:25,allowCustomValue:!0,isClearable:!0}))),r.createElement(Bt.U,{query:Tn(),datasource:oe,onChange:yt,variableEditor:!0})),pe===de.jo.LabelNames&&r.createElement(it.Z,null,r.createElement(ze._,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric regex",tooltip:r.createElement("div",null,"Returns a list of label names, optionally filtering by specified metric regex.")},r.createElement(z.I,{type:"text","aria-label":"Metric regex",placeholder:"Metric regex",value:xe,onBlur:ln=>{Ge(ln.currentTarget.value),At(ln.currentTarget.value)},onChange:ln=>{Ge(ln.currentTarget.value)},width:25}))),pe===de.jo.MetricNames&&r.createElement(it.Z,null,r.createElement(ze._,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric selector",tooltip:r.createElement("div",null,"Returns a list of metrics matching the specified metric regex.")},r.createElement(z.I,{type:"text","aria-label":"Metric selector",placeholder:"Metric regex",value:at,onChange:ln=>{dt(ln.currentTarget.value)},onBlur:ln=>{dt(ln.currentTarget.value),Ht(ln.currentTarget.value)},width:25}))),pe===de.jo.VarQueryResult&&r.createElement(it.Z,null,r.createElement(ze._,{label:"Query",labelWidth:20,tooltip:r.createElement("div",null,"Returns a list of Prometheus query results for the query. This can include Prometheus functions, i.e. sum(go_goroutines).")},r.createElement(St.K,{type:"text","aria-label":"Prometheus Query",placeholder:"Prometheus Query",value:st,onChange:tn,onBlur:()=>{pe===de.jo.VarQueryResult&&st&&Xt({qryType:pe})},cols:100}))),pe===de.jo.SeriesQuery&&r.createElement(it.Z,null,r.createElement(ze._,{label:"Series Query",labelWidth:20,tooltip:r.createElement("div",null,'Enter enter a metric with labels, only a metric or only labels, i.e. go_goroutines{instance="localhost:9090"}, go_goroutines, or {instance="localhost:9090"}. Returns a list of time series associated with the entered data.')},r.createElement(z.I,{type:"text","aria-label":"Series Query",placeholder:"Series Query",value:we,onChange:gn,onBlur:()=>{pe===de.jo.SeriesQuery&&we&&Xt({qryType:pe})},width:100}))),pe===de.jo.ClassicQuery&&r.createElement(it.Z,null,r.createElement(ze._,{label:"Classic Query",labelWidth:20,tooltip:r.createElement("div",null,"The original implemetation of the Prometheus variable query editor. Enter a string with the correct query type and parameters as described in these docs. For example, label_values(label, metric).")},r.createElement(z.I,{type:"text","aria-label":"Classic Query",placeholder:"Classic Query",value:Ke,onChange:mn,onBlur:()=>{pe===de.jo.ClassicQuery&&Ke&&Xt({qryType:pe})},width:100}))))};function yn(Ye){return typeof Ye=="string"?le(Ye):Ye.query?le(Ye.query):Ye}class Zt extends Ve.Mg{constructor(Ce,oe=(0,Ue.J)(),pe=(0,N.$t)()){super(),this.datasource=Ce,this.templateSrv=oe,this.timeSrv=pe,this.editor=Qt}query(Ce){let oe;if(typeof Ce.targets[0]=="string"?oe=Ce.targets[0]:oe=Ce.targets[0].query,!oe)return(0,y.of)({data:[]});const pe={...Ce.scopedVars,__interval:{text:this.datasource.interval,value:this.datasource.interval},__interval_ms:{text:g.intervalToMs(this.datasource.interval),value:g.intervalToMs(this.datasource.interval)},...this.datasource.getRangeScopedVars(this.timeSrv.timeRange())},Re=this.templateSrv.replace(oe,pe,this.datasource.interpolateQueryExpr),ae=new ge(this.datasource,Re);return(0,Fe.D)(ae.process()).pipe((0,f.U)(xe=>({data:xe})))}}const re="60s",Te=["api/v1/query","api/v1/query_range","api/v1/series","api/v1/labels"],We="-Instant";class Je extends P.CK{constructor(Ce,oe=(0,o.J)(),pe=(0,N.$t)(),Re){super(Ce),this.templateSrv=oe,this.timeSrv=pe,this.metricsNameCache=new n.z({max:10}),this.init=async()=>{this.disableRecordingRules||this.loadRules(),this.exemplarsAvailable=await this.areExemplarsAvailable()},this.prepareTargets=(ae,ve,xe)=>{const Ge=[],at=[],dt=(0,t.cloneDeep)(ae.targets);for(const st of dt){if(!st.expr||st.hide)continue;const Pt=this.languageProvider.histogramMetrics.find(we=>st.expr.includes(we));if(ae.app===b.zj.Explore&&st.range===st.instant){const we=(0,t.cloneDeep)(st);we.format="table",we.instant=!0,we.range=!1,we.valueWithRefId=!0,delete we.maxDataPoints;const Le=(0,t.cloneDeep)(st);if(Le.format="time_series",Le.instant=!1,we.range=!0,st.exemplar){if(!Pt||Pt&&!at.some(Ke=>Ke.expr.includes(Pt))){const Ke=(0,t.cloneDeep)(st);Ke.instant=!1,Ge.push(this.createQuery(Ke,ae,ve,xe)),at.push(Ke)}we.exemplar=!1,Le.exemplar=!1}at.push(we,Le),Ge.push(this.createQuery(we,ae,ve,xe),this.createQuery(Le,ae,ve,xe))}else if(st.instant&&ae.app===b.zj.Explore){const we=(0,t.cloneDeep)(st);we.format="table",Ge.push(this.createQuery(we,ae,ve,xe)),at.push(we)}else{if(st.exemplar&&!st.instant){if(!Pt||Pt&&!at.some(we=>we.expr.includes(Pt))){const we=(0,t.cloneDeep)(st);Ge.push(this.createQuery(we,ae,ve,xe)),at.push(we)}st.exemplar=!1}Ge.push(this.createQuery(st,ae,ve,xe)),at.push(st)}}return{queries:Ge,activeTargets:at}},this.intepolateStringHelper=ae=>this.interpolateString(ae.expr),this.handleErrors=(ae,ve)=>{const xe={message:ae&&ae.statusText||"Unknown error during query transaction. Please check JS console logs.",refId:ve.refId};return ae.data?typeof ae.data=="string"?xe.message=ae.data:ae.data.error&&(xe.message=(0,A.Xh)(ae.data.error)):ae.message?xe.message=ae.message:typeof ae=="string"&&(xe.message=ae),xe.status=ae.status,xe.statusText=ae.statusText,xe},this.processAnnotationResponse=(ae,ve)=>{const xe=(0,S.z1)({data:ve}).data;if(!xe||!xe.length)return[];const Ge=ae.annotation,{tagKeys:at="",titleFormat:dt="",textFormat:st=""}=Ge,Pt=g.intervalToSeconds(Ge.step||re)*1e3,we=at.split(","),Le=[];for(const Ke of xe){if(Ke.fields.length===0)continue;const ht=Ke.fields[0],xt=Ke.fields[1],lt=xt?.labels||{},Rt=Object.keys(lt).filter(At=>we.includes(At)).map(At=>lt[At]),Ut=[];let Xt=0;xt.values.forEach(At=>{let Ht,tn;const gn=ht.values[Xt];ae.annotation.useValueForTime?(Ht=Math.floor(parseFloat(At)),tn=1):(Ht=Math.floor(parseFloat(gn)),tn=parseFloat(At)),Xt++,Ut.push([Ht,tn])});const Mt=Ut.filter(At=>At[1]>0).map(At=>At[0]);let yt=null;for(const At of Mt){if(yt&&(yt.timeEnd??0)+Pt>=At){yt.timeEnd=At;continue}yt&&Le.push(yt),yt={time:At,timeEnd:At,annotation:Ge,title:(0,p.W)(dt,lt),tags:Rt,text:(0,p.W)(st,lt)}}yt&&(yt.timeEnd=Mt[Mt.length-1],Le.push(yt))}return Le},this.type="prometheus",this.subType=w.T8.Prometheus,this.rulerEnabled=!1,this.id=Ce.id,this.url=Ce.url,this.access=Ce.access,this.basicAuth=Ce.basicAuth,this.withCredentials=Ce.withCredentials,this.interval=Ce.jsonData.timeInterval||"15s",this.queryTimeout=Ce.jsonData.queryTimeout,this.httpMethod=Ce.jsonData.httpMethod||"GET",this.directUrl=Ce.jsonData.directUrl??this.url,this.exemplarTraceIdDestinations=Ce.jsonData.exemplarTraceIdDestinations,this.hasIncrementalQuery=Ce.jsonData.incrementalQuerying??!1,this.ruleMappings={},this.languageProvider=Re??new Q.ZP(this),this.lookupsDisabled=Ce.jsonData.disableMetricsLookup??!1,this.customQueryParameters=new URLSearchParams(Ce.jsonData.customQueryParameters),this.datasourceConfigurationPrometheusFlavor=Ce.jsonData.prometheusType,this.datasourceConfigurationPrometheusVersion=Ce.jsonData.prometheusVersion,this.defaultEditor=Ce.jsonData.defaultEditor,this.disableRecordingRules=Ce.jsonData.disableRecordingRules??!1,this.variables=new Zt(this,this.templateSrv,this.timeSrv),this.exemplarsAvailable=!0,this.cacheLevel=Ce.jsonData.cacheLevel??de.x3.Low,this.cache=new Qe.tQ({getTargetSignature:this.getPrometheusTargetSignature.bind(this),overlapString:Ce.jsonData.incrementalQueryOverlapWindow??Qe.Ji,profileFunction:this.getPrometheusProfileData.bind(this)}),this.annotations={QueryEditor:J}}getQueryDisplayText(Ce){return Ce.expr}getPrometheusProfileData(Ce,oe){return{interval:oe.interval??Ce.interval,expr:this.interpolateString(oe.expr),datasource:"Prometheus"}}getPrometheusTargetSignature(Ce,oe){return`${this.interpolateString(oe.expr)}|${oe.interval??Ce.interval}|${JSON.stringify(Ce.rangeRaw??"")}|${oe.exemplar}`}hasLabelsMatchAPISupport(){return this._isDatasourceVersionGreaterOrEqualTo("2.24.0",w.T8.Prometheus)||this._isDatasourceVersionGreaterOrEqualTo("2.0.0",w.T8.Mimir)||this._isDatasourceVersionGreaterOrEqualTo("1.11.0",w.T8.Cortex)||this._isDatasourceVersionGreaterOrEqualTo("0.18.0",w.T8.Thanos)}_isDatasourceVersionGreaterOrEqualTo(Ce,oe){return!this.datasourceConfigurationPrometheusVersion||!this.datasourceConfigurationPrometheusFlavor||oe!==this.datasourceConfigurationPrometheusFlavor?!1:x().gte(this.datasourceConfigurationPrometheusVersion,Ce)}_addTracingHeaders(Ce,oe){Ce.headers={},this.access==="proxy"&&(Ce.headers["X-Dashboard-UID"]=oe.dashboardUID,Ce.headers["X-Panel-Id"]=oe.panelId)}_request(Ce,oe,pe={}){if(this.access==="direct"){const ve=new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.");return(0,a._)(()=>ve)}oe=oe||{};for(const[ve,xe]of this.customQueryParameters)oe[ve]==null&&(oe[ve]=xe);let Re=this.url+Ce;Ce.startsWith(`/api/datasources/uid/${this.uid}`)&&(Re=Ce);const ae=(0,t.defaults)(pe,{url:Re,method:this.httpMethod,headers:{}});return ae.method==="GET"?oe&&Object.keys(oe).length&&(ae.url=ae.url+(ae.url.search(/\?/)>=0?"&":"?")+Object.entries(oe).map(([ve,xe])=>`${encodeURIComponent(ve)}=${encodeURIComponent(xe)}`).join("&")):(ae.headers["Content-Type"]="application/x-www-form-urlencoded",ae.data=oe),(this.basicAuth||this.withCredentials)&&(ae.withCredentials=!0),this.basicAuth&&(ae.headers.Authorization=this.basicAuth),(0,M.i)().fetch(ae)}async importFromAbstractQueries(Ce){return Ce.map(oe=>this.languageProvider.importFromAbstractQuery(oe))}async exportToAbstractQueries(Ce){return Ce.map(oe=>this.languageProvider.exportToAbstractQuery(oe))}async metadataRequest(Ce,oe={},pe){if(Te.some(Re=>Ce.includes(Re)))try{return await(0,i.n)(this._request(`/api/datasources/uid/${this.uid}/resources${Ce}`,oe,{method:this.httpMethod,hideFromInspector:!0,showErrorAlert:!1,...pe}))}catch(Re){if(this.httpMethod==="POST"&&(0,M.kW)(Re)&&(Re.status===405||Re.status===400))console.warn("Couldn't use configured POST HTTP method for this request. Trying to use GET method instead.");else throw Re}return await(0,i.n)(this._request(`/api/datasources/uid/${this.uid}/resources${Ce}`,oe,{method:"GET",hideFromInspector:!0,...pe}))}interpolateQueryExpr(Ce=[],oe){if(!oe.multi&&!oe.includeAll)return ft(Ce);if(typeof Ce=="string")return Tt(Ce);const pe=Ce.map(Re=>Tt(Re));return pe.length===1?pe[0]:"("+pe.join("|")+")"}targetContainsTemplate(Ce){return this.templateSrv.containsTemplate(Ce.expr)}shouldRunExemplarQuery(Ce,oe){if(Ce.exemplar){const pe=this.languageProvider.histogramMetrics.find(ve=>Ce.expr.includes(ve)),Re=oe.targets.findIndex(ve=>ve.refId===Ce.refId),ae=oe.targets.slice(0,Re).filter(ve=>!ve.hide);return!!(!pe||pe&&!ae.some(ve=>ve.expr.includes(pe)))}return!1}processTargetV2(Ce,oe){const pe=[],Re={...Ce,exemplar:this.shouldRunExemplarQuery(Ce,oe),requestId:oe.panelId+Ce.refId,utcOffsetSec:this.timeSrv.timeRange().to.utcOffset()*60};return Ce.instant&&Ce.range?pe.push({...Re,refId:Re.refId,instant:!1},{...Re,refId:Re.refId+We,range:!1}):pe.push(Re),pe}query(Ce){if(this.access==="proxy"){let oe,pe;const Re=Ce.targets.some(xe=>xe.instant);this.hasIncrementalQuery&&!Re?(pe=this.cache.requestInfo(Ce),oe=pe.requests[0]):oe=Ce;const ae=oe.targets.map(xe=>this.processTargetV2(xe,oe)),ve=new Date;return super.query({...oe,targets:ae.flat()}).pipe((0,f.U)(xe=>{const Ge={...xe,data:this.cache.procFrames(Ce,pe,xe.data)};return(0,Me.n)(Ge,Ce,{exemplarTraceIdDestinations:this.exemplarTraceIdDestinations})}),(0,m.b)(xe=>{bt(xe,Ce,ve)}))}else{const oe=(0,Z.jj)(Ce.range.from,!1),pe=(0,Z.jj)(Ce.range.to,!0),{queries:Re,activeTargets:ae}=this.prepareTargets(Ce,oe,pe);return!Re||!Re.length?(0,y.of)({data:[],state:v.Gu.Done}):Ce.app===b.zj.Explore?this.exploreQuery(Re,ae,pe):this.panelsQuery(Re,ae,pe,Ce.requestId,Ce.scopedVars)}}exploreQuery(Ce,oe,pe){let Re=Ce.length;const ae=Ce.map((ve,xe)=>{const Ge=oe[xe],at=(0,c.z)((0,m.b)(()=>Re--),(0,u.h)(dt=>!dt.cancelled),(0,f.U)(dt=>({data:(0,Me.vs)(dt,{query:ve,target:Ge,responseListLength:Ce.length,exemplarTraceIdDestinations:this.exemplarTraceIdDestinations}),key:ve.requestId,state:Re===0?v.Gu.Done:v.Gu.Loading})));return this.runQuery(ve,pe,at)});return(0,l.T)(...ae)}panelsQuery(Ce,oe,pe,Re,ae){const ve=Ce.map((xe,Ge)=>{const at=oe[Ge],dt=(0,c.z)((0,u.h)(st=>!st.cancelled),(0,f.U)(st=>(0,Me.vs)(st,{query:xe,target:at,responseListLength:Ce.length,scopedVars:ae,exemplarTraceIdDestinations:this.exemplarTraceIdDestinations})));return this.runQuery(xe,pe,dt)});return(0,d.D)(ve).pipe((0,f.U)(xe=>({data:xe.reduce((at,dt)=>[...at,...dt],[]),key:Re,state:v.Gu.Done})))}runQuery(Ce,oe,pe){return Ce.instant?this.performInstantQuery(Ce,oe).pipe(pe):Ce.exemplar?this.getExemplars(Ce).pipe((0,h.K)(()=>(0,y.of)({data:[],state:v.Gu.Done})),pe):this.performTimeSeriesQuery(Ce,Ce.start,Ce.end).pipe(pe)}createQuery(Ce,oe,pe,Re){const ae={hinting:Ce.hinting,instant:Ce.instant,exemplar:Ce.exemplar,step:0,expr:"",refId:Ce.refId,start:0,end:0},ve=Math.ceil(Re-pe);let xe=g.intervalToSeconds(oe.interval);const Ge=g.intervalToSeconds(this.templateSrv.replace(Ce.interval||oe.interval,oe.scopedVars)),at=Ce.interval?g.intervalToSeconds(this.templateSrv.replace(Ce.interval,oe.scopedVars)):g.intervalToSeconds(this.interval),dt=Ce.intervalFactor||1,st=this.adjustInterval(xe,Ge,ve,dt);let Pt={...oe.scopedVars,...this.getRangeScopedVars(oe.range),...this.getRateIntervalScopedVariable(st,at)};xe!==st&&(xe=st,Pt=Object.assign({},oe.scopedVars,{__interval:{text:xe+"s",value:xe+"s"},__interval_ms:{text:xe*1e3,value:xe*1e3},...this.getRateIntervalScopedVariable(xe,at),...this.getRangeScopedVars(oe.range)})),ae.step=xe;let we=Ce.expr;we=this.enhanceExprWithAdHocFilters(oe.filters,we),ae.expr=this.templateSrv.replace(we,Pt,this.interpolateQueryExpr);const Le=je(pe,Re,ae.step,this.timeSrv.timeRange().to.utcOffset()*60);return ae.start=Le.start,ae.end=Le.end,this._addTracingHeaders(ae,oe),ae}getRateIntervalScopedVariable(Ce,oe){oe===0&&(oe=15);const pe=Math.max(Ce+oe,4*oe);return{__rate_interval:{text:pe+"s",value:pe+"s"}}}adjustInterval(Ce,oe,pe,Re){let ae=pe/11e3;return ae>1&&(ae=Math.ceil(ae)),Math.max(Ce*Re,oe,ae)}performTimeSeriesQuery(Ce,oe,pe){if(oe>pe)throw{message:"Invalid time range"};const Re="/api/v1/query_range",ae={query:Ce.expr,start:oe,end:pe,step:Ce.step};return this.queryTimeout&&(ae.timeout=this.queryTimeout),this._request(Re,ae,{requestId:Ce.requestId,headers:Ce.headers}).pipe((0,h.K)(ve=>ve.cancelled?(0,y.of)(ve):(0,a._)(this.handleErrors(ve,Ce))))}performInstantQuery(Ce,oe){const pe="/api/v1/query",Re={query:Ce.expr,time:oe};return this.queryTimeout&&(Re.timeout=this.queryTimeout),this._request(`/api/datasources/uid/${this.uid}/resources${pe}`,Re,{requestId:Ce.requestId,headers:Ce.headers}).pipe((0,h.K)(ae=>ae.cancelled?(0,y.of)(ae):(0,a._)(this.handleErrors(ae,Ce))))}metricFindQuery(Ce){if(!Ce)return Promise.resolve([]);const oe={__interval:{text:this.interval,value:this.interval},__interval_ms:{text:g.intervalToMs(this.interval),value:g.intervalToMs(this.interval)},...this.getRangeScopedVars(this.timeSrv.timeRange())},pe=this.templateSrv.replace(Ce,oe,this.interpolateQueryExpr);return new ge(this,pe).process()}getRangeScopedVars(Ce=this.timeSrv.timeRange()){const oe=Ce.to.diff(Ce.from),pe=Math.round(oe/1e3);return{__range_ms:{text:oe,value:oe},__range_s:{text:pe,value:pe},__range:{text:pe+"s",value:pe+"s"}}}async annotationQuery(Ce){if(this.access==="direct"){const ve=new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.");return Promise.reject(ve)}const oe=Ce.annotation,{expr:pe=""}=oe;if(!pe)return Promise.resolve([]);const Re=Ce.annotation.step||re,ae={expr:pe,range:!0,instant:!1,exemplar:!1,interval:Re,refId:"X",datasource:this.getRef()};return await(0,i.n)((0,M.i)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:((0,Z.jj)(Ce.range.from,!1)*1e3).toString(),to:((0,Z.jj)(Ce.range.to,!0)*1e3).toString(),queries:[this.applyTemplateVariables(ae,{})]},requestId:`prom-query-${oe.name}`}).pipe((0,f.U)(ve=>this.processAnnotationResponse(Ce,ve.data))))}getExemplars(Ce){const oe="/api/v1/query_exemplars";return this._request(oe,{query:Ce.expr,start:Ce.start.toString(),end:Ce.end.toString()},{requestId:Ce.requestId,headers:Ce.headers})}async getTagKeys(Ce){if(!Ce||Ce.filters.length===0)return await this.languageProvider.fetchLabels(),this.languageProvider.getLabelKeys().map(ae=>({value:ae,text:ae}));const oe=Ce.filters.map(ae=>({label:ae.key,value:ae.value,op:ae.operator})),pe=ne.Z.renderLabels(oe);let Re;return this.hasLabelsMatchAPISupport()?Re=await this.languageProvider.fetchSeriesLabelsMatch(pe):Re=await this.languageProvider.fetchSeriesLabels(pe),Object.keys(Re).filter(ae=>!Ce.filters.find(ve=>ve.key===ae)).map(ae=>({value:ae,text:ae}))}async getTagValues(Ce){const oe=Ce.filters.map(ve=>({label:ve.key,value:ve.value,op:ve.operator})),pe=ne.Z.renderLabels(oe);if(this.hasLabelsMatchAPISupport())return(await this.languageProvider.fetchSeriesValuesWithMatch(Ce.key,pe)).map(ve=>({value:ve,text:ve}));const Re=this.getTimeRangeParams();return(await this.metadataRequest(`/api/v1/label/${Ce.key}/values`,Re))?.data?.data?.map(ve=>({text:ve}))??[]}async getBuildInfo(){try{return await(0,O.WG)({url:this.url,name:this.name,type:"prometheus"})}catch{return}}getBuildInfoMessage(Ce){const oe=r.createElement(R.C,{color:"green",icon:"check",text:"Ruler API enabled"}),pe=r.createElement(R.C,{color:"orange",icon:"exclamation-triangle",text:"Ruler API not enabled"}),Re=r.createElement(I.u,{placement:"top",content:"Prometheus does not allow editing rules, connect to either a Mimir or Cortex datasource to manage alerts via Grafana."},r.createElement("div",null,r.createElement(R.C,{color:"red",icon:"exclamation-triangle",text:"Ruler API not supported"}))),ae={[w.T8.Cortex]:"/public/app/plugins/datasource/prometheus/img/cortex_logo.svg",[w.T8.Mimir]:"/public/app/plugins/datasource/prometheus/img/mimir_logo.svg",[w.T8.Prometheus]:"/public/app/plugins/datasource/prometheus/img/prometheus_logo.svg",[w.T8.Thanos]:"/public/app/plugins/datasource/prometheus/img/thanos_logo.svg"},ve={[w.T8.Cortex]:"blue",[w.T8.Mimir]:"orange",[w.T8.Prometheus]:"red",[w.T8.Thanos]:"purple"},xe={[w.T8.Cortex]:"Cortex",[w.T8.Mimir]:"Mimir",[w.T8.Prometheus]:"Prometheus",[w.T8.Thanos]:"Thanos"},Ge=this.datasourceConfigurationPrometheusFlavor??Ce.application,at=r.createElement(R.C,{text:r.createElement("span",null,r.createElement("img",{style:{width:14,height:14,verticalAlign:"text-bottom"},src:ae[Ge??w.T8.Prometheus],alt:""})," ",Ge?xe[Ge]:"Unknown"),color:ve[Ge??w.T8.Prometheus]});return r.createElement("div",{style:{display:"grid",gridTemplateColumns:"max-content max-content",rowGap:"0.5rem",columnGap:"2rem",marginTop:"1rem"}},r.createElement("div",null,"Type"),r.createElement("div",null,at),r.createElement(r.Fragment,null,r.createElement("div",null,"Ruler API"),Ce.application===w.T8.Prometheus&&r.createElement("div",null,Re),Ce.application!==w.T8.Prometheus&&r.createElement("div",null,Ce.features.rulerApiEnabled?oe:pe)))}interpolateVariablesInQueries(Ce,oe,pe){let Re=Ce;return Ce&&Ce.length&&(Re=Ce.map(ae=>{const ve=this.templateSrv.replace(ae.expr,oe,this.interpolateQueryExpr),xe=this.enhanceExprWithAdHocFilters(pe,ve);return{...ae,datasource:this.getRef(),expr:xe,interval:this.templateSrv.replace(ae.interval,oe)}})),Re}getQueryHints(Ce,oe){return Ie(Ce.expr??"",oe,this)}getInitHints(){return ot(this)}async loadRules(){try{const oe=(await this.metadataRequest("/api/v1/rules",{},{showErrorAlert:!1})).data?.data?.groups;oe&&(this.ruleMappings=pt(oe))}catch(Ce){console.log("Rules API is experimental. Ignore next error."),console.error(Ce)}}async areExemplarsAvailable(){try{return(await this.metadataRequest("/api/v1/query_exemplars",{query:"test",start:(0,E.CQ)().subtract(30,"minutes").valueOf().toString(),end:(0,E.CQ)().valueOf().toString()},{showErrorAlert:!1})).data.status==="success"}catch{return!1}}modifyQuery(Ce,oe){let pe=Ce.expr??"";switch(oe.type){case"ADD_FILTER":{const{key:Re,value:ae}=oe.options??{};Re&&ae&&(pe=(0,V.F)(pe,Re,ae));break}case"ADD_FILTER_OUT":{const{key:Re,value:ae}=oe.options??{};Re&&ae&&(pe=(0,V.F)(pe,Re,ae,"!="));break}case"ADD_HISTOGRAM_QUANTILE":{pe=`histogram_quantile(0.95, sum(rate(${pe}[$__rate_interval])) by (le))`;break}case"ADD_RATE":{pe=`rate(${pe}[$__rate_interval])`;break}case"ADD_SUM":{pe=`sum(${pe.trim()}) by ($1)`;break}case"EXPAND_RULES":{oe.options&&(pe=(0,Z.ll)(pe,oe.options));break}default:break}return{...Ce,expr:pe}}getAdjustedInterval(){if(!K.default.featureToggles.prometheusResourceBrowserCache)return this.getTimeRangeParams();const Ce=this.timeSrv.timeRange();return(0,Z.wY)(this.cacheLevel,Ce)}getTimeRangeParams(){const Ce=this.timeSrv.timeRange();return{start:(0,Z.jj)(Ce.from,!1).toString(),end:(0,Z.jj)(Ce.to,!0).toString()}}getOriginalMetricName(Ce){return(0,Me.nM)(Ce)}enhanceExprWithAdHocFilters(Ce,oe){return!Ce||Ce.length===0?oe:Ce.reduce((Re,ae)=>{const{key:ve,operator:xe}=ae;let{value:Ge}=ae;return(xe==="=~"||xe==="!~")&&(Ge=ft(Ge)),(0,V.F)(Re,ve,Ge,xe)},oe)}filterQuery(Ce){return!(Ce.hide||!Ce.expr)}applyTemplateVariables(Ce,oe,pe){const Re=(0,t.cloneDeep)(oe);delete Re.__interval,delete Re.__interval_ms;const ae=this.templateSrv.replace(Ce.expr,Re,this.interpolateQueryExpr),ve=this.enhanceExprWithAdHocFilters(pe,ae);return{...Ce,expr:ve,interval:this.templateSrv.replace(Ce.interval,Re),legendFormat:this.templateSrv.replace(Ce.legendFormat,Re)}}getVariables(){return this.templateSrv.getVariables().map(Ce=>`$${Ce.name}`)}interpolateString(Ce){return this.templateSrv.replace(Ce,void 0,this.interpolateQueryExpr)}getDebounceTimeInMilliseconds(){switch(this.cacheLevel){case de.x3.Medium:return 600;case de.x3.High:return 1200;default:return 350}}getDaysToCacheMetadata(){switch(this.cacheLevel){case de.x3.Medium:return 7;case de.x3.High:return 30;default:return 1}}getCacheDurationInMinutes(){return(0,Z.l3)(this.cacheLevel)}getDefaultQuery(Ce){const oe={refId:"A",expr:"",range:!0,instant:!1};return Ce===b.zj.UnifiedAlerting?{...oe,instant:!0,range:!1}:Ce===b.zj.Explore?{...oe,instant:!0,range:!0}:oe}}function je(Ye,Ce,oe,pe){const Re=Math.floor((Ce+pe)/oe)*oe-pe,ae=Math.floor((Ye+pe)/oe)*oe-pe;return{end:Re,start:ae}}function pt(Ye){return Ye.reduce((Ce,oe)=>oe.rules.filter(pe=>pe.type==="recording").reduce((pe,Re)=>({...pe,[Re.name]:Re.query}),Ce),{})}function ft(Ye){return typeof Ye=="string"?Ye.replace(/\\/g,"\\\\").replace(/'/g,"\\\\'"):Ye}function Tt(Ye){return typeof Ye=="string"?Ye.replace(/\\/g,"\\\\\\\\").replace(/[$^*{}\[\]\'+?.()|]/g,"\\\\$&"):Ye}},47810:(X,L,e)=>{"use strict";e.d(L,{UQ:()=>R,ZK:()=>p,ZP:()=>o,nW:()=>A,ws:()=>I});var t=e(86832),n=e.n(t),r=e(63781),a=e(10963),i=e.n(a),y=e(92403),c=e(54721),l=e(30976),d=e(32688),f=e(66445),m=e(63163),u=e(49403),h=e(64304);const C=["job","instance"],x="{}",b=5,g=1e3*60*60*24,p=1e4,v=K=>({label:K}),E=K=>(K.kind="function",K),P=K=>({headers:{"X-Grafana-Cache":`private, max-age=${K}`}});function S(K,V){const _=Date.now()-g,U=V.filter(j=>j.ts>_&&j.query===K.label),$=U.length,k=U[0];let H=`Queried ${$} times in the last 24h.`;if(k){const j=(0,y.CQ)(k.ts).fromNow();H=`${H} Last queried ${j}.`}return{...K,documentation:H}}function M(K,V){const _={label:K};return V&&V[K]&&(_.documentation=R(K,V)),_}function R(K,V){if(!V[K])return;const{type:_,help:U}=V[K];return`${_.toUpperCase()}: ${U}`}function I(K,V){if(V[K])return V[K].help}function A(K,V){if(V[K])return V[K].type}const O=/(="|!="|=~"|!~"|\{|\[|\(|\+|-|\/|\*|%|\^|\band\b|\bor\b|\bunless\b|==|>=|!=|<=|>|<|=|~|,)/,N=86400;class o extends c.iL{constructor(V,_){super(),this.labelKeys=[],this.labelsCache=new r.z({max:10}),this.labelValuesCache=new r.z({max:10}),this.request=async(U,$,k={},H)=>{try{return(await this.datasource.metadataRequest(U,k,H)).data.data}catch(j){console.error(j)}return $},this.start=async()=>this.datasource.lookupsDisabled?[]:(this.metrics=await this.fetchLabelValues("__name__")||[],this.histogramMetrics=(0,m.NO)(this.metrics).sort(),Promise.all([this.loadMetricsMetadata(),this.fetchLabels()])),this.provideCompletionItems=async({prefix:U,text:$,value:k,labelKey:H,wrapperClasses:j},z={})=>{const F={suggestions:[]};if(!k)return F;const J=k.document.text.length===0,Q=k.document.getTextsAtRange(k.selection),Z=Q.size===1?Q.first().getText():null,ne=Z?Z[k.selection.anchor.offset]:null,ee=j.length>3,de=U&&!ee,Pe=!ne||ne===")",ye=U&&!$.match(/^[\]})\s]+$/)&&Pe,he=/[+\-*/^%]/,me=$.match(he);return j.includes("context-range")?this.getRangeCompletionItems():j.includes("context-labels")?this.getLabelCompletionItems({prefix:U,text:$,value:k,labelKey:H,wrapperClasses:j}):j.includes("context-aggregation")?this.getAggregationCompletionItems(k):J?this.getEmptyCompletionItems(z):de&&Pe&&!me?this.getBeginningCompletionItems(z):de&&ye?this.getTermCompletionItems():F},this.getBeginningCompletionItems=U=>({suggestions:[...this.getEmptyCompletionItems(U).suggestions,...this.getTermCompletionItems().suggestions]}),this.getEmptyCompletionItems=U=>{const{history:$}=U,k=[];if($&&$.length){const H=(0,t.chain)($).map(j=>j.query.expr).filter().uniq().take(b).map(v).map(j=>S(j,$)).value();k.push({searchFunctionType:f.Z.Prefix,skipSort:!0,label:"History",items:H})}return{suggestions:k}},this.getTermCompletionItems=()=>{const{metrics:U,metricsMetadata:$}=this,k=[];return k.push({searchFunctionType:f.Z.Prefix,label:"Functions",items:u.r8.map(E)}),U&&U.length&&k.push({label:"Metrics",items:U.map(H=>M(H,$)),searchFunctionType:f.Z.Fuzzy}),{suggestions:k}},this.getAggregationCompletionItems=async U=>{const $=[];let k;const H=U.document.getBlocks().reduce((de,Pe)=>{if(de===void 0)return"";if(!Pe)return de;const ye=Pe?.getText();return U.anchorBlock.key===Pe.key&&(k=U.selection.anchor.offset+de.length),de+ye},""),j=H.lastIndexOf("(",k);let z=H.lastIndexOf("(",j-1),F=H.indexOf(")",z);if(z===-1){const de=H.indexOf(")",k);F=H.indexOf(")",de+1),z=H.lastIndexOf("(",F)}const J={suggestions:$,context:"context-aggregation"};if(z===-1)return J;const Q=H.slice(z+1,F).replace(/\[[^\]]+\]$/,""),Z=(0,m.rV)(Q,Q.length-2).selector,ne=await this.getSeries(Z),ee=Object.keys(ne);if(ee.length>0){const de=(0,m.ZO)(ee);$.push({label:`Labels${de}`,items:ee.map(v),searchFunctionType:f.Z.Fuzzy})}return J},this.getLabelCompletionItems=async({text:U,wrapperClasses:$,labelKey:k,value:H})=>{if(!H)return{suggestions:[]};const j=[],z=H.anchorBlock.getText(),F=H.selection.anchor.offset,J=z.substr(F),Q=z.substr(0,F),Z=U.match(/^(=|=~|!=|!~)/),ne=J.match(/^"?[,}]|$/),ee=Q.match(/(=|=~|!=|!~)$/)&&J.match(/^"/);if(!(Z&&ne)&&!(ne&&!Z)||ee)return{suggestions:j};let ye,he;try{he=(0,m.rV)(z,F),ye=he.selector}catch{ye=x}const me=ye.includes("__name__="),De=he?he.labelKeys:[];let le={};if(ye&&(le=await this.getSeries(ye,!me)),Object.keys(le).length===0)return console.warn(`Server did not return any values for selector = ${ye}`),{suggestions:j};let Ee;if(U&&Z||$.includes("attr-value")){if(k&&le[k]){Ee="context-label-values";const be=(0,m.ZO)(le[k]);j.push({label:`Label values for "${k}"${be}`,items:le[k].map(v),searchFunctionType:f.Z.Fuzzy})}}else{const be=le?Object.keys(le):me?null:C;if(be){const ge=(0,t.difference)(be,De);if(ge.length){Ee="context-labels";const ue=ge.map(Qe=>({label:Qe})),ot={label:`Labels${(0,m.ZO)(ue)}`,items:ue,searchFunctionType:f.Z.Fuzzy};j.push(ot)}}}return{context:Ee,suggestions:j}},this.fetchLabelValues=async U=>{const $=this.datasource.getAdjustedInterval(),H=`/api/v1/label/${this.datasource.interpolateString(U)}/values`;return await this.request(H,[],$,this.getDefaultCacheHeaders())??[]},this.getSeriesValues=async(U,$)=>this.datasource.hasLabelsMatchAPISupport()?await this.fetchSeriesValuesWithMatch(U,$):(await this.getSeries($))[U]??[],this.fetchSeriesValuesWithMatch=async(U,$)=>{const k=U?this.datasource.interpolateString(U):null,H=$?this.datasource.interpolateString($):null,j=this.datasource.getAdjustedInterval(),z={...j,...H&&{"match[]":H}};return d.config.featureToggles.prometheusResourceBrowserCache?await this.request(`/api/v1/label/${k}/values`,[],z,this.getDefaultCacheHeaders())??[]:await this.fetchSeriesValuesLRUCache(k,j,U,z)},this.getSeriesLabels=async(U,$)=>{let k,H;this.datasource.hasLabelsMatchAPISupport()?($.push({name:"__name__",value:"",op:"!="}),H=await this.fetchSeriesLabelsMatch(U),k=Object.keys(H)):(H=await this.getSeries(U),k=Object.keys(H));const j=new Set($.map(z=>z.name));return k.filter(z=>!j.has(z))},this.fetchSeriesLabels=async(U,$)=>{const k=this.datasource.interpolateString(U),H=this.datasource.getAdjustedInterval(),j={...H,"match[]":k},z="/api/v1/series";if(!d.config.featureToggles.prometheusResourceBrowserCache)return await this.fetchSeriesLabelsLRUCache(k,H,$,z,j);const F=await this.request(z,[],j,this.getDefaultCacheHeaders()),{values:J}=(0,m.DY)(F,$);return J},this.fetchSeriesLabelsMatch=async(U,$)=>{const k=this.datasource.interpolateString(U),H=this.datasource.getAdjustedInterval(),j={...H,"match[]":k},z="/api/v1/labels";return d.config.featureToggles.prometheusResourceBrowserCache?(await this.request(z,[],j,this.getDefaultCacheHeaders())).reduce((J,Q)=>({...J,[Q]:""}),{}):await this.fetchSeriesLabelMatchLRUCache(k,H,$,z,j)},this.fetchSeries=async U=>{const $="/api/v1/series",H={...this.datasource.getTimeRangeParams(),"match[]":U};return await this.request($,{},H,this.getDefaultCacheHeaders())},this.fetchDefaultSeries=(0,t.once)(async()=>{const U=await Promise.all(C.map($=>this.fetchLabelValues($)));return C.reduce(($,k,H)=>({...$,[k]:U[H]}),{})}),this.datasource=V,this.histogramMetrics=[],this.timeRange={start:0,end:0},this.metrics=[],Object.assign(this,_)}getDefaultCacheHeaders(){if(d.config.featureToggles.prometheusResourceBrowserCache&&this.datasource.cacheLevel!==h.x3.None)return P(this.datasource.getCacheDurationInMinutes()*60)}cleanText(V){return V.split(O).pop().trimLeft().replace(/"$/,"").replace(/^"/,"")}get syntax(){return u.ZP}async loadMetricsMetadata(){const V=d.config.featureToggles.prometheusResourceBrowserCache?P(this.datasource.getDaysToCacheMetadata()*N):{};this.metricsMetadata=(0,m.I4)(await this.request("/api/v1/metadata",{},{},{showErrorAlert:!1,...V}))}getLabelKeys(){return this.labelKeys}getRangeCompletionItems(){return{context:"context-range",suggestions:[{label:"Range vector",items:[...u.Ty]}]}}importFromAbstractQuery(V){return(0,m.e5)(V)}exportToAbstractQuery(V){const _=V.expr;if(!_||_.length===0)return{refId:V.refId,labelMatchers:[]};const U=i().tokenize(_,u.ZP),$=(0,m.UO)(U),k=w(_,U);return k&&k.length>0&&$.push({name:"__name__",operator:l.K2.Equal,value:k}),{refId:V.refId,labelMatchers:$}}async getSeries(V,_){if(this.datasource.lookupsDisabled)return{};try{return V===x?await this.fetchDefaultSeries():await this.fetchSeriesLabels(V,_)}catch(U){return console.error(U),{}}}async getLabelValues(V){return await this.fetchLabelValues(V)}async fetchLabels(){const V="/api/v1/labels",_=this.datasource.getAdjustedInterval();this.labelFetchTs=Date.now().valueOf();const U=await this.request(V,[],_,this.getDefaultCacheHeaders());return Array.isArray(U)&&(this.labelKeys=U.slice().sort()),[]}async fetchSeriesValuesLRUCache(V,_,U,$){const H=`/api/v1/label/?${new URLSearchParams({"match[]":V??"",start:(0,m.s4)(parseInt(_.start,10)).toString(),end:(0,m.s4)(parseInt(_.end,10)).toString(),name:U}).toString()}/values`;let j=this.labelValuesCache.get(H);return j||(j=await this.request(`/api/v1/label/${V}/values`,[],$),j&&this.labelValuesCache.set(H,j)),j??[]}async fetchSeriesLabelsLRUCache(V,_,U,$,k){const j=`/api/v1/series?${new URLSearchParams({"match[]":V,start:(0,m.s4)(parseInt(_.start,10)).toString(),end:(0,m.s4)(parseInt(_.end,10)).toString(),withName:U?"true":"false"}).toString()}`;let z=this.labelsCache.get(j);if(!z){const F=await this.request($,[],k),{values:J}=(0,m.DY)(F,U);z=J,this.labelsCache.set(j,z)}return z}async fetchSeriesLabelMatchLRUCache(V,_,U,$,k){const H=new URLSearchParams({"match[]":V,start:(0,m.s4)(parseInt(_.start,10)).toString(),end:(0,m.s4)(parseInt(_.end,10)).toString(),withName:U?"true":"false"}),j=`${$}?${H.toString()}`;let z=this.labelsCache.get(j);return z||(z=(await this.request($,[],k)).reduce((J,Q)=>({...J,[Q]:""}),{}),this.labelsCache.set(j,z)),z}}function w(K,V){let _="";for(let U in V)if(typeof V[U]=="string"){_=V[U];break}return _}},63163:(X,L,e)=>{"use strict";e.d(L,{DY:()=>h,I4:()=>v,My:()=>H,NO:()=>u,PL:()=>K,U9:()=>O,UO:()=>_,ZO:()=>R,e5:()=>V,jj:()=>k,l3:()=>$,ll:()=>g,o8:()=>E,rV:()=>b,s4:()=>P,tU:()=>N,wY:()=>U});var t=e(86832),n=e.n(t),r=e(10963),a=e.n(r),i=e(30976),y=e(80742),c=e(77877),l=e(74149),d=e(47810),f=e(53430),m=e(64304);const u=j=>{const z=new Set,F=new RegExp("_bucket($|:)");for(let J=0;J<j.length;J++){const Q=j[J];F.test(Q)&&z.add(Q)}return[...z]};function h(j,z=!1){const F={};j.forEach(Q=>{const{__name__:Z,...ne}=Q;z&&(F.__name__=F.__name__||new Set,F.__name__.has(Z)||F.__name__.add(Z)),Object.keys(ne).forEach(ee=>{F[ee]||(F[ee]=new Set),F[ee].has(ne[ee])||F[ee].add(ne[ee])})});const J={};return M(Object.keys(F)).forEach(Q=>{J[Q]=M(Array.from(F[Q]))}),{values:J,keys:Object.keys(J)}}const C=/\{[^}]*?(\}|$)/,x=/\b(\w+)(!?=~?)("[^"\n]*?")/g;function b(j,z=1){if(!j.match(C)){if(j.match(/^[A-Za-z:][\w:]*$/))return{selector:`{__name__="${j}"}`,labelKeys:["__name__"]};throw new Error("Query must contain a selector: "+j)}const F=j.slice(0,z),J=F.lastIndexOf("{"),Q=F.lastIndexOf("}");if(J===-1)throw new Error("Not inside selector, missing open brace: "+F);if(Q>-1&&Q>J)throw new Error("Not inside selector, previous selector already closed: "+F);const Z=j.slice(z),ee=Z.indexOf("}")+z,de=Z.indexOf("{"),Pe=de+z;if(ee===-1)throw new Error("Not inside selector, missing closing brace in suffix: "+Z);if(de>-1&&Pe<ee)throw new Error("Not inside selector, next selector opens before this one closed: "+Z);const ye=j.slice(J,ee),he={};ye.replace(x,(ge,ue,Ie,ot)=>{const Qe=j.indexOf(ge),Me=Qe+ue.length+Ie.length+1,Ne=Qe+ue.length+Ie.length+ot.length-1;return(z<Me||z>Ne)&&(he[ue]={value:ot,operator:Ie}),""});const De=j.slice(0,J).match(/[A-Za-z:][\w:]*$/);De&&(he.__name__={value:`"${De[0]}"`,operator:"="});const le=Object.keys(he).sort(),be=["{",le.map(ge=>`${ge}${he[ge].operator}${he[ge].value}`).join(","),"}"].join("");return{labelKeys:le,selector:be}}function g(j,z){const F=Object.keys(z),J=new RegExp(`(\\s|^)(${F.join("|")})(\\s|$|\\(|\\[|\\{)`,"ig"),Z=j.replace(J,(de,Pe,ye,he)=>`${Pe}${z[ye]}${he}`).split(/(\+|\-|\*|\/|\%|\^)/),ne=/(\)\{|\}\{|\]\{)/;return Z.map(de=>p(de,ne)).join("")}function p(j,z){const F=j.match(z);if(!F)return j;const J=F.index??0,Q=j.slice(0,J+1),Z=j.slice(J+1),ne=[];Z.replace(x,(de,Pe,ye,he)=>(ne.push({key:Pe,operator:ye,value:he}),""));let ee=Q;return ne.filter(Boolean).forEach(de=>{const Pe=de.value.slice(1,-1);ee=(0,l.F)(ee,de.key,Pe,de.operator)}),ee}function v(j){if(!j)return j;const z={},F={};for(const Q in j){const Z=j[Q][0];z[Q]=Z,Z.type==="histogram"&&(F[`${Q}_bucket`]={type:"counter",help:`Cumulative counters for the observation buckets (${Z.help})`},F[`${Q}_count`]={type:"counter",help:`Count of events that have been observed for the histogram metric (${Z.help})`},F[`${Q}_sum`]={type:"counter",help:`Total sum of all observed values for the histogram metric (${Z.help})`}),Z.type==="summary"&&(F[`${Q}_count`]={type:"counter",help:`Count of events that have been observed for the base metric (${Z.help})`},F[`${Q}_sum`]={type:"counter",help:`Total sum of all observed values for the base metric (${Z.help})`})}const J={};return J.ALERTS={type:"counter",help:"Time series showing pending and firing alerts. The sample value is set to 1 as long as the alert is in the indicated active (pending or firing) state."},{...z,...F,...J}}function E(j){return P(j/1e3)}function P(j){return Math.floor(j/60)}function S(j,z=1){return Math.ceil(j/60)-Math.ceil(j/60)%z}function M(j){return j.slice(0,d.ZK)}function R(j){return j&&j.length>=d.ZK?`, limited to the first ${d.ZK} received items`:""}const I=/[*+?()|\\.\[\]{}^$]/g;function A(j){return j.replace(I,"\\$&")}function O(j){return j.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function N(j){return O(A(j))}const o={"=":i.K2.Equal,"!=":i.K2.NotEqual,"=~":i.K2.EqualRegEx,"!~":i.K2.NotEqualRegEx},w=(0,t.invert)(o);function K(j){const z=j.labelMatchers.map(F=>{const J=w[F.operator];return J?`${F.name}${J}"${F.value}"`:""}).filter(F=>F!=="").join(", ");return z?`{${z}}`:""}function V(j){return{refId:j.refId,expr:K(j),range:!0}}function _(j){const z=[];for(let F in j)if(j[F]instanceof r.Token){let J=j[F];if(J.type==="context-labels"){let Q="",Z="",ne="",ee=J.content;for(let de in ee)if(typeof ee[de]=="string"){let Pe;Pe=ee[de],(Pe==="="||Pe==="!="||Pe==="=~"||Pe==="!~")&&(ne=Pe)}else if(ee[de]instanceof r.Token)switch(ee[de].type){case"label-key":Q=ee[de].content;break;case"label-value":Z=ee[de].content,Z=Z.substring(1,Z.length-1);const Pe=o[ne];Pe&&z.push({name:Q,operator:Pe,value:Z});break}}}return z}function U(j,z){if(j===m.x3.None)return{start:k(z.from,!1).toString(),end:k(z.to,!0).toString()};const F=k(z.from,!1),J=(0,y.mB)(F,$(j)*60),Q=k(z.to,!0),Z=S(Q,$(j))*60;if(J===Z){const de=Z+$(j)*60;return{start:J.toString(),end:de.toString()}}const ne=J.toString(),ee=Z.toString();return{start:ne,end:ee}}function $(j){switch(j){case m.x3.Medium:return 10;case m.x3.High:return 60;default:return 1}}function k(j,z){return typeof j=="string"&&(j=c.parse(j,z)),Math.ceil(j.valueOf()/1e3)}function H(j,z){return z===void 0&&(z=f.A5),j.length=Math.min(j.length,z),j}},49403:(X,L,e)=>{"use strict";e.d(L,{Ty:()=>t,ZP:()=>d,r8:()=>y});const t=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],n=["by","group_left","group_right","ignoring","on","offset","without"],r=null,a=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],y=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...a,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:"Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:"The value 1 for any series in the specified interval."}],c=y.map(f=>f.label),d={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${y.map(f=>f.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${n.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},89527:(X,L,e)=>{"use strict";e.d(L,{K:()=>v,Z:()=>E});var t=e(49403),n=e(96543),r=e(14091),a=e(82473),i=e(18533);function y(){return[{id:i.G3.HistogramQuantile,name:"Histogram quantile",params:[{name:"Quantile",type:"number",options:[.99,.95,.9,.75,.5,.25]}],defaultParams:[.9],category:i.CM.Functions,renderer:a.pS,addOperationHandler:a.PP},{id:i.G3.LabelReplace,name:"Label replace",params:[{name:"Destination label",type:"string"},{name:"Replacement",type:"string"},{name:"Source label",type:"string"},{name:"Regex",type:"string"}],category:i.CM.Functions,defaultParams:["","$1","","(.*)"],renderer:a.zJ,addOperationHandler:a.PP},{id:i.G3.Ln,name:"Ln",params:[],defaultParams:[],category:i.CM.Functions,renderer:a.pS,addOperationHandler:a.PP},l(i.G3.Changes),l(i.G3.Rate,!0),l(i.G3.Irate),l(i.G3.Increase,!0),l(i.G3.Idelta),l(i.G3.Delta),c({id:i.G3.HoltWinters,params:[(0,a.kq)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:i.CM.RangeFunctions,renderer:a.e8,addOperationHandler:m,changeTypeHandler:d}),c({id:i.G3.PredictLinear,params:[(0,a.kq)(),{name:"Seconds from now",type:"number"}],defaultParams:["$__interval",60],alternativesKey:"range function",category:i.CM.RangeFunctions,renderer:a.e8,addOperationHandler:m,changeTypeHandler:d}),c({id:i.G3.QuantileOverTime,params:[(0,a.kq)(),{name:"Quantile",type:"number"}],defaultParams:["$__interval",.5],alternativesKey:"overtime function",category:i.CM.RangeFunctions,renderer:a.NZ,addOperationHandler:m,changeTypeHandler:d}),...n.EX,{id:i.G3.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:i.CM.BinaryOps,renderer:(S,M,R)=>R,addOperationHandler:u},c({id:i.G3.Abs}),c({id:i.G3.Absent}),c({id:i.G3.Acos,category:i.CM.Trigonometric}),c({id:i.G3.Acosh,category:i.CM.Trigonometric}),c({id:i.G3.Asin,category:i.CM.Trigonometric}),c({id:i.G3.Asinh,category:i.CM.Trigonometric}),c({id:i.G3.Atan,category:i.CM.Trigonometric}),c({id:i.G3.Atanh,category:i.CM.Trigonometric}),c({id:i.G3.Ceil}),c({id:i.G3.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),c({id:i.G3.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),c({id:i.G3.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),c({id:i.G3.Cos,category:i.CM.Trigonometric}),c({id:i.G3.Cosh,category:i.CM.Trigonometric}),c({id:i.G3.DayOfMonth,category:i.CM.Time}),c({id:i.G3.DayOfWeek,category:i.CM.Time}),c({id:i.G3.DayOfYear,category:i.CM.Time}),c({id:i.G3.DaysInMonth,category:i.CM.Time}),c({id:i.G3.Deg}),l(i.G3.Deriv),c({id:i.G3.Exp}),c({id:i.G3.Floor}),c({id:i.G3.Group}),c({id:i.G3.Hour}),c({id:i.G3.LabelJoin,params:[{name:"Destination Label",type:"string",editor:r.g},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,editor:r.g}],defaultParams:["",",",""],renderer:h,addOperationHandler:C}),c({id:i.G3.Log10}),c({id:i.G3.Log2}),c({id:i.G3.Minute}),c({id:i.G3.Month}),c({id:i.G3.Pi,renderer:S=>`${S.id}()`}),c({id:i.G3.Quantile,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:a.pS}),c({id:i.G3.Rad}),l(i.G3.Resets),c({id:i.G3.Round,category:i.CM.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),c({id:i.G3.Scalar}),c({id:i.G3.Sgn}),c({id:i.G3.Sin,category:i.CM.Trigonometric}),c({id:i.G3.Sinh,category:i.CM.Trigonometric}),c({id:i.G3.Sort}),c({id:i.G3.SortDesc}),c({id:i.G3.Sqrt}),c({id:i.G3.Stddev}),c({id:i.G3.Tan,category:i.CM.Trigonometric}),c({id:i.G3.Tanh,category:i.CM.Trigonometric}),c({id:i.G3.Time,renderer:S=>`${S.id}()`}),c({id:i.G3.Timestamp}),c({id:i.G3.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:S=>`${S.id}(${S.params[0]})`}),c({id:i.G3.Year})]}function c(P){return{...P,id:P.id,name:P.name??(0,a.t7)(P.id),params:P.params??[],defaultParams:P.defaultParams??[],category:P.category??i.CM.Functions,renderer:P.renderer??(P.params?a.zJ:a.pS),addOperationHandler:P.addOperationHandler??a.PP}}function l(P,S=!1){return{id:P,name:(0,a.t7)(P),params:[(0,a.kq)(S)],defaultParams:[S?"$__rate_interval":"$__interval"],alternativesKey:"range function",category:i.CM.RangeFunctions,renderer:f,addOperationHandler:m,changeTypeHandler:d}}function d(P,S){return(P.params[0]==="$__rate_interval"&&S.defaultParams[0]!=="$__rate_interval"||P.params[0]==="$__interval"&&S.defaultParams[0]!=="$__interval")&&(P.params=S.defaultParams),P}function f(P,S,M){let R=(P.params??[])[0]??"5m";return`${S.id}(${M}[${R}])`}function m(P,S,M){const R={id:P.id,params:P.defaultParams};return S.operations.length>0&&M.getOperationDef(S.operations[0].id).addOperationHandler===m?{...S,operations:[R,...S.operations.slice(1)]}:{...S,operations:[R,...S.operations]}}function u(P,S){return{...S,binaryQueries:[...S.binaryQueries??[],{operator:"/",query:S}]}}function h(P,S,M){if(typeof P.params[1]!="string")throw"The separator must be a string";const R=`"${P.params[1]}"`;return`${P.id}(${M}, "${P.params[0]}", ${R}, "${P.params.slice(2).join(R)}")`}function C(P,S){const M={id:P.id,params:P.defaultParams};return{...S,operations:[...S.operations,M]}}function x(){return[...(0,a.IT)(i.G3.Sum),...(0,a.IT)(i.G3.Avg),...(0,a.IT)(i.G3.Min),...(0,a.IT)(i.G3.Max),...(0,a.IT)(i.G3.Count),...(0,a.Z3)(i.G3.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,a.Z3)(i.G3.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,a.Z3)(i.G3.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),b(i.G3.SumOverTime),b(i.G3.AvgOverTime),b(i.G3.MinOverTime),b(i.G3.MaxOverTime),b(i.G3.CountOverTime),b(i.G3.LastOverTime),b(i.G3.PresentOverTime),b(i.G3.AbsentOverTime),b(i.G3.StddevOverTime)]}function b(P){return{id:P,name:(0,a.t7)(P),params:[(0,a.kq)()],defaultParams:["$__interval"],alternativesKey:"overtime function",category:i.CM.RangeFunctions,renderer:g,addOperationHandler:m}}function g(P,S,M){let R=(P.params??[])[0]??"$__interval";return`${S.id}(${M}[${R}])`}var p=e(32449);class v extends p.x{constructor(){super(()=>{const S=[...y(),...x()];for(const M of S){const R=t.r8.find(I=>I.insertText===M.id);R&&(M.documentation=R.documentation)}return S}),this.setOperationCategories([i.CM.Aggregations,i.CM.RangeFunctions,i.CM.Functions,i.CM.BinaryOps,i.CM.Trigonometric,i.CM.Time])}getQueryPatterns(){return[{name:"Rate then sum",type:i.Fz.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]},{name:"Rate then sum by(label) then avg",type:i.Fz.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:[""]},{id:"avg",params:[]}]},{name:"Histogram quantile on rate",type:i.Fz.Histogram,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Histogram quantile on increase",type:i.Fz.Histogram,operations:[{id:"increase",params:["$__rate_interval"]},{id:"__max_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Binary Query",type:i.Fz.Binary,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}],binaryQueries:[{operator:"/",query:{metric:"",labels:[],operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]}}]}]}}const E=new v},96543:(X,L,e)=>{"use strict";e.d(L,{EX:()=>i,PX:()=>a,iQ:()=>r});var t=e(82473),n=e(18533);const r=[{id:n.G3.Addition,name:"Add scalar",sign:"+"},{id:n.G3.Subtraction,name:"Subtract scalar",sign:"-"},{id:n.G3.MultiplyBy,name:"Multiply by scalar",sign:"*"},{id:n.G3.DivideBy,name:"Divide by scalar",sign:"/"},{id:n.G3.Modulo,name:"Modulo by scalar",sign:"%"},{id:n.G3.Exponent,name:"Exponent",sign:"^"},{id:n.G3.EqualTo,name:"Equal to",sign:"==",comparison:!0},{id:n.G3.NotEqualTo,name:"Not equal to",sign:"!=",comparison:!0},{id:n.G3.GreaterThan,name:"Greater than",sign:">",comparison:!0},{id:n.G3.LessThan,name:"Less than",sign:"<",comparison:!0},{id:n.G3.GreaterOrEqual,name:"Greater or equal to",sign:">=",comparison:!0},{id:n.G3.LessOrEqual,name:"Less or equal to",sign:"<=",comparison:!0}],a=r.reduce((c,l)=>(c[l.sign]={id:l.id,comparison:l.comparison},c),{}),i=r.map(c=>{const l=[{name:"Value",type:"number"}],d=[2];return c.comparison&&(l.push({name:"Bool",type:"boolean",description:"If checked comparison will return 0 or 1 for the value rather than filtering."}),d.push(!1)),{id:c.id,name:c.name,params:l,defaultParams:d,alternativesKey:"binary scalar operations",category:n.CM.BinaryOps,renderer:y(c.sign),addOperationHandler:t.PP}});function y(c){return function(d,f,m){let u=d.params[0],h="";return d.params.length===2&&(h=d.params[1]?" bool":""),`${m} ${c}${h} ${u}`}}},14091:(X,L,e)=>{"use strict";e.d(L,{g:()=>y});var t=e(39953),n=e(99456),r=e(9558),a=e(89527),i=e(82473);function y({onChange:l,index:d,operationId:f,value:m,query:u,datasource:h}){const[C,x]=(0,t.useState)({});return t.createElement(r.Ph,{inputId:(0,i.i1)(f,d),autoFocus:m===""?!0:void 0,openMenuOnFocus:!0,onOpenMenu:async()=>{x({isLoading:!0});const b=await c(u,h);x({options:b,isLoading:void 0})},isLoading:C.isLoading,allowCustomValue:!0,noOptionsMessage:"No labels found",loadingMessage:"Loading labels",options:C.options,value:(0,n.E)(m),onChange:b=>l(d,b.value)})}async function c(l,d){let f=l.labels;d.type==="prometheus"&&(f=[{label:"__name__",op:"=",value:l.metric},...l.labels]);const m=a.Z.renderLabels(f),u=await d.languageProvider.fetchSeriesLabels(m);return Object.keys(u).map(h=>({label:h,value:h}))}},53430:(X,L,e)=>{"use strict";e.d(L,{kU:()=>re,A5:()=>Zt});var t=e(41407),n=e(97368),r=e.n(n),a=e(39953),i=e(90135),y=e.n(i),c=e(99456),l=e(60481),d=e(46101),f=e(32688),m=e(82803),u=e(4919),h=e(39285),C=e(15246),x=e(64447),b=e(9558),g=e(74661),p=e(69171),v=e(56127),E=e(63163),P=e(65234),S=e(73075),M=e(38637),R=e(28409),I=e(36884),A=e(48824),O=e(39017),N=e(26286),o=e(69865),w=e(72639),K=e(47810),V=e(93938);const{setFilteredMetricCount:_}=V.stateSlice.actions;async function U(je,pt,ft){let Tt=!0;const Ye=je.languageProvider.metricsMetadata;Ye&&Object.keys(Ye).length===0&&(Tt=!1);let Ce={},oe={},pe;return pe=ft?.map(Re=>{const ae=$(Re,je),ve=`${Re}\xA6${ae.description}`;return Ce[Re]=ae,oe[ve]=ae,ae}),{isLoading:!1,hasMetadata:Tt,metrics:pe??[],metaHaystackDictionary:oe,nameHaystackDictionary:Ce,totalMetricCount:pe?.length??0,filteredMetricCount:pe?.length??0}}function $(je,pt){let ft=(0,K.nW)(je,pt.languageProvider.metricsMetadata);const Tt=(0,K.ws)(je,pt.languageProvider.metricsMetadata);return["histogram","summary"].forEach(Ce=>{Tt?.toLowerCase().includes(Ce)&&ft!==Ce&&(ft+=` (${Ce})`)}),{value:je,type:ft,description:Tt}}function k(je,pt){const ft=H(je);return!je.isLoading&&je.filteredMetricCount!==ft.length&&pt(_(ft.length)),z(ft,je.pageNum,je.resultsPerPage)}function H(je){let pt=je.metrics;return je.fuzzySearchQuery&&!je.useBackend&&(je.fullMetaSearch?pt=je.metaHaystackOrder.map(ft=>je.metaHaystackDictionary[ft]):pt=je.nameHaystackOrder.map(ft=>je.nameHaystackDictionary[ft])),je.selectedTypes.length>0&&(pt=pt.filter((ft,Tt)=>je.selectedTypes.some(Ce=>ft.type&&Ce.value?ft.type.includes(Ce.value):!ft.type&&Ce.value==="no type"))),je.includeNullMetadata||(pt=pt.filter(ft=>ft.type!==void 0&&ft.description!==void 0)),pt}function j(je){if(!je.metrics.length)return[];const pt=je.resultsPerPage===0?1:je.resultsPerPage,ft=Math.floor(H(je).length/pt)+1;return[...Array(ft).keys()].map(Tt=>Tt+1)}function z(je,pt,ft){const Tt=ft===0?1:ft,Ye=pt===1?0:(pt-1)*Tt,Ce=Ye+Tt;return je.slice(Ye,Ce)}const F=(je,pt,ft)=>je<1?1:je>ft?ft:je??pt;async function J(je,pt,ft){const Tt=(0,P.Vl)(je),Ye=pt.map(pe=>`,${pe.label}="${pe.value}"`),Ce=`label_values({__name__=~".*${Tt}"${pt?Ye.join():""}},__name__)`;return await ft.metricFindQuery(Ce).then(pe=>pe.map(Re=>$(Re.text,ft)))}function Q(je,pt,ft,Tt){switch(je){case"grafana_prom_metric_encycopedia_tracking":(0,w.ff)(je,{metric:ft,hasMetadata:pt?.hasMetadata,totalMetricCount:pt?.totalMetricCount,fuzzySearchQuery:pt?.fuzzySearchQuery,fullMetaSearch:pt?.fullMetaSearch,selectedTypes:pt?.selectedTypes,useRegexSearch:pt?.useBackend,includeResultsWithoutMetadata:pt?.includeNullMetadata});case"grafana_prom_metric_encycopedia_disable_text_wrap_interaction":(0,w.ff)(je,{disableTextWrap:pt?.disableTextWrap});case"grafana_prometheus_metric_encyclopedia_open":(0,w.ff)(je,{query:Tt})}}const Z=[{value:"counter",description:"A cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero on restart."},{value:"gauge",description:"A metric that represents a single numerical value that can arbitrarily go up and down."},{value:"histogram",description:"A histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets."},{value:"summary",description:"A summary samples observations (usually things like request durations and response sizes) and can calculate configurable quantiles over a sliding time window."},{value:"unknown",description:"These metrics have been given the type unknown in the metadata."},{value:"no type",description:"These metrics have no defined type in the metadata."}],ne={browse:"Search metrics by name",metadataSearchSwitch:"Include description in search",type:"Filter by type",includeNullMetadata:"Include results with no metadata",setUseBackend:"Enable regex search"};function ee(je){const{state:pt,onChangeFullMetaSearch:ft,onChangeIncludeNullMetadata:Tt,onChangeDisableTextWrap:Ye,onChangeUseBackend:Ce}=je,oe=(0,m.l4)(),pe=de(oe);return a.createElement(a.Fragment,null,a.createElement("div",{className:pe.selectItem},a.createElement(N.r,{"data-testid":Qt.searchWithMetadata,value:pt.fullMetaSearch,disabled:pt.useBackend||!pt.hasMetadata,onChange:()=>ft()}),a.createElement("div",{className:pe.selectItemLabel},ne.metadataSearchSwitch)),a.createElement("div",{className:pe.selectItem},a.createElement(N.r,{value:pt.includeNullMetadata,disabled:!pt.hasMetadata,onChange:()=>Tt()}),a.createElement("div",{className:pe.selectItemLabel},ne.includeNullMetadata)),a.createElement("div",{className:pe.selectItem},a.createElement(N.r,{value:pt.disableTextWrap,onChange:()=>Ye()}),a.createElement("div",{className:pe.selectItemLabel},"Disable text wrap")),a.createElement("div",{className:pe.selectItem},a.createElement(N.r,{"data-testid":Qt.setUseBackend,value:pt.useBackend,onChange:()=>Ce()}),a.createElement("div",{className:pe.selectItemLabel},ne.setUseBackend,"\xA0"),a.createElement(o.u,{content:"Filter metric names by regex search, using an additional call on the Prometheus API.",placement:"bottom-end"},a.createElement(h.J,{name:"info-circle",size:"xs",className:pe.settingsIcon}))))}function de(je){return{settingsIcon:(0,t.css)`
      color: ${je.colors.text.secondary};
    `,selectItem:(0,t.css)`
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 4px 0;
    `,selectItemLabel:(0,t.css)`
      margin: 0 0 0 ${je.spacing(1)};
      align-self: center;
      color: ${je.colors.text.secondary};
      font-size: 12px;
    `}}var Pe=e(27366);function ye({feedbackUrl:je}){const pt=(0,m.wW)(he);return a.createElement(Pe.K,null,a.createElement("a",{href:je,className:pt.link,title:"The metrics explorer is new, please let us know how we can improve it",target:"_blank",rel:"noreferrer noopener"},a.createElement(h.J,{name:"comment-alt-message"})," Give feedback"))}function he(je){return{link:(0,t.css)({color:je.colors.text.secondary,fontSize:je.typography.bodySmall.fontSize,":hover":{color:je.colors.text.link},margin:"-25px 0 30px 0"})}}var me=e(91206);function De(je){const{metrics:pt,onChange:ft,onClose:Tt,query:Ye,state:Ce,disableTextWrap:oe}=je,pe=(0,m.l4)(),Re=le(pe,oe);function ae(st){st.value&&(ft({...Ye,metric:st.value}),Q("grafana_prom_metric_encycopedia_tracking",Ce,st.value),Tt())}function ve(st){return Ce.fullMetaSearch&&st?a.createElement(a.Fragment,null,a.createElement("td",null,Ge(st.type??"")),a.createElement("td",null,a.createElement(y(),{textToHighlight:st.description??"",searchWords:Ce.metaHaystackMatches,autoEscape:!0,highlightClassName:Re.matchHighLight}))):a.createElement(a.Fragment,null,a.createElement("td",null,Ge(st.type??"")),a.createElement("td",null,st.description??""))}function xe(st,Pt,we){return a.createElement(a.Fragment,null,st,a.createElement("span",{className:Re.tooltipSpace},a.createElement(o.u,{content:a.createElement(a.Fragment,null,"When creating a ",Pt,", Prometheus exposes multiple series with the type counter."," ",(0,me.Zg)(we)),placement:"bottom-start",interactive:!0},a.createElement(h.J,{name:"info-circle",size:"xs"}))))}function Ge(st){return st?st.includes("(summary)")?xe(st,"summary","https://prometheus.io/docs/concepts/metric_types/#summary"):st.includes("(histogram)")?xe(st,"histogram","https://prometheus.io/docs/concepts/metric_types/#histogram"):st:""}function at(){let st;return Ce.fuzzySearchQuery||(st="There are no metrics found in the data source."),Ye.labels.length>0&&(st="There are no metrics found. Try to expand your label filters."),(Ce.fuzzySearchQuery||Ce.selectedTypes.length>0)&&(st="There are no metrics found. Try to expand your search and filters."),a.createElement("tr",{className:Re.noResults},a.createElement("td",{colSpan:3},st))}function dt(st){return st.useBackend?[st.fuzzySearchQuery]:st.fullMetaSearch?st.metaHaystackMatches:st.nameHaystackMatches}return a.createElement("table",{className:Re.table},a.createElement("thead",{className:Re.stickyHeader},a.createElement("tr",null,a.createElement("th",{className:`${Re.nameWidth} ${Re.tableHeaderPadding}`},"Name"),Ce.hasMetadata&&a.createElement(a.Fragment,null,a.createElement("th",{className:`${Re.typeWidth} ${Re.tableHeaderPadding}`},"Type"),a.createElement("th",{className:`${Re.descriptionWidth} ${Re.tableHeaderPadding}`},"Description")),a.createElement("th",{className:Re.selectButtonWidth}," "))),a.createElement("tbody",null,a.createElement(a.Fragment,null,pt.length>0&&pt.map((st,Pt)=>a.createElement("tr",{key:st?.value??Pt,className:Re.row},a.createElement("td",{className:Re.nameOverflow},a.createElement(y(),{textToHighlight:st?.value??"",searchWords:dt(Ce),autoEscape:!0,highlightClassName:Re.matchHighLight})),Ce.hasMetadata&&ve(st),a.createElement("td",null,a.createElement(u.zx,{size:"md",variant:"secondary",onClick:()=>ae(st),className:Re.centerButton},"Select")))),pt.length===0&&!Ce.isLoading&&at())))}const le=(je,pt)=>({table:(0,t.css)`
      ${pt?"":"table-layout: fixed;"}
      border-radius: ${je.shape.radius.default};
      width: 100%;
      white-space: ${pt?"nowrap":"normal"};
      td {
        padding: ${je.spacing(1)};
      }

      td,
      th {
        min-width: ${je.spacing(3)};
        border-bottom: 1px solid ${je.colors.border.weak};
      }
    `,row:(0,t.css)`
      label: row;
      border-bottom: 1px solid ${je.colors.border.weak}
      &:last-child {
        border-bottom: 0;
      }
    `,tableHeaderPadding:(0,t.css)`
      padding: 8px;
    `,matchHighLight:(0,t.css)`
      background: inherit;
      color: ${je.components.textHighlight.text};
      background-color: ${je.components.textHighlight.background};
    `,nameWidth:(0,t.css)`
      ${pt?"":"width: 37.5%;"}
    `,nameOverflow:(0,t.css)`
      ${pt?"":"overflow-wrap: anywhere;"}
    `,typeWidth:(0,t.css)`
      ${pt?"":"width: 15%;"}
    `,descriptionWidth:(0,t.css)`
      ${pt?"":"width: 35%;"}
    `,selectButtonWidth:(0,t.css)`
      ${pt?"":"width: 12.5%;"}
    `,stickyHeader:(0,t.css)`
      position: sticky;
      top: 0;
      background-color: ${je.colors.background.primary};
    `,noResults:(0,t.css)`
      text-align: center;
      color: ${je.colors.text.secondary};
    `,tooltipSpace:(0,t.css)`
      margin-left: 4px;
    `,centerButton:(0,t.css)`
      display: block;
      margin: auto;
      border: none;
    `}),Ee=(je,pt)=>({modal:(0,t.css)`
      width: 85vw;
      ${je.breakpoints.down("md")} {
        width: 100%;
      }
      ${je.breakpoints.up("xl")} {
        width: 60%;
      }
    `,inputWrapper:(0,t.css)`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
    `,inputItemFirst:(0,t.css)`
      flex-basis: 40%;
      padding-right: 16px;
      ${je.breakpoints.down("md")} {
        padding-right: 0px;
        padding-bottom: 16px;
      }
    `,inputItem:(0,t.css)`
      flex-grow: 1;
      flex-basis: 20%;
      ${je.breakpoints.down("md")} {
        min-width: 100%;
      }
    `,selectWrapper:(0,t.css)`
      margin-bottom: ${je.spacing(1)};
    `,resultsAmount:(0,t.css)`
      color: ${je.colors.text.secondary};
      font-size: 0.85rem;
      padding: 0 0 4px 0;
    `,resultsData:(0,t.css)`
      margin: 4px 0 ${je.spacing(2)} 0;
    `,resultsDataCount:(0,t.css)`
      margin: 0;
    `,resultsDataFiltered:(0,t.css)`
      color: ${je.colors.text.secondary};
      text-align: center;
      border: solid 1px rgba(204, 204, 220, 0.25);
      padding: 7px;
    `,resultsDataFilteredText:(0,t.css)`
      display: inline;
      vertical-align: text-top;
    `,results:(0,t.css)`
      height: calc(80vh - 310px);
      overflow-y: scroll;
    `,resultsFooter:(0,t.css)`
      margin-top: 24px;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      position: sticky;
    `,currentlySelected:(0,t.css)`
      color: grey;
      opacity: 75%;
      font-size: 0.75rem;
    `,loadingSpinner:(0,t.css)`
      visibility: hidden;
    `,visible:(0,t.css)`
      visibility: visible;
    `,settingsBtn:(0,t.css)`
      float: right;
    `,noBorder:(0,t.css)`
      border: none;
    `,resultsPerPageLabel:(0,t.css)`
      color: ${je.colors.text.secondary};
      opacity: 75%;
      padding-top: 5px;
      font-size: 0.85rem;
      margin-right: 8px;
    `,resultsPerPageWrapper:(0,t.css)`
      display: flex;
    `});var be=e(5135),ge=e(86832);const ue=new be.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1});function Ie(je,pt,ft){const[Tt,Ye,Ce]=ue.search(je,pt,!1,1e5);let oe=[],pe=new Set;if(Tt&&Ce){const Re=(ae,ve)=>{ve&&pe.add(ae)};for(let ae=0;ae<Ce.length;ae++){let ve=Ce[ae];be.Z.highlight(je[Ye.idx[ve]],Ye.ranges[ve],Re),oe.push(je[Ye.idx[ve]])}ft([oe,[...pe]])}else pt||ft([[],[]])}const ot=(0,ge.debounce)(Ie,300),{setIsLoading:Qe,buildMetrics:Me,filterMetricsBackend:Ne,setResultsPerPage:qe,setPageNum:bt,setFuzzySearchQuery:Fe,setNameHaystack:Ve,setMetaHaystack:Ue,setFullMetaSearch:it,setIncludeNullMetadata:ze,setSelectedTypes:Xe,setUseBackend:St,setDisableTextWrap:Bt,showAdditionalSettings:zt}=V.stateSlice.actions,qt=je=>{const{datasource:pt,isOpen:ft,onClose:Tt,onChange:Ye,query:Ce,initialMetrics:oe}=je,[pe,Re]=(0,a.useReducer)(V.stateSlice.reducer,(0,V.E3)(Ce)),ae=(0,m.l4)(),ve=Ee(ae,pe.disableTextWrap),xe=(0,a.useCallback)(async()=>{Re(Qe(!0));const Le=await U(pt,Ce,oe);Re(Me({isLoading:!1,hasMetadata:Le.hasMetadata,metrics:Le.metrics,metaHaystackDictionary:Le.metaHaystackDictionary,nameHaystackDictionary:Le.nameHaystackDictionary,totalMetricCount:Le.metrics.length,filteredMetricCount:Le.metrics.length}))},[Ce,pt,oe]);(0,a.useEffect)(()=>{xe()},[xe]);const Ge=Z.map(Le=>({value:Le.value,label:Le.value,description:Le.description})),at=(0,a.useMemo)(()=>r()(async Le=>{Re(Qe(!0));const Ke=await J(Le,Ce.labels,pt);Re(Ne({metrics:Ke,filteredMetricCount:Ke.length,isLoading:!1}))},pt.getDebounceTimeInMilliseconds()),[pt,Ce]);function dt(Le){Re(Ve(Le))}function st(Le){Re(Ue(Le))}function Pt(Le,Ke){pe.useBackend&&Le===""?xe():pe.useBackend?at(Le):Ke?ot(Object.keys(pe.metaHaystackDictionary),Le,st):ot(Object.keys(pe.nameHaystackDictionary),Le,dt)}const we=a.createElement(ee,{state:pe,onChangeFullMetaSearch:()=>{const Le=!pe.fullMetaSearch;Re(it(Le)),Ye({...Ce,fullMetaSearch:Le}),Pt(pe.fuzzySearchQuery,Le)},onChangeIncludeNullMetadata:()=>{Re(ze(!pe.includeNullMetadata)),Ye({...Ce,includeNullMetadata:!pe.includeNullMetadata})},onChangeDisableTextWrap:()=>{Re(Bt()),Ye({...Ce,disableTextWrap:!pe.disableTextWrap}),Q("grafana_prom_metric_encycopedia_disable_text_wrap_interaction",pe,"")},onChangeUseBackend:()=>{const Le=!pe.useBackend;Re(St(Le)),Ye({...Ce,useBackend:Le}),Le===!1?xe():pe.fuzzySearchQuery!==""&&at(pe.fuzzySearchQuery)}});return a.createElement(S.u,{"data-testid":Qt.metricModal,isOpen:ft,title:"Metrics explorer",onDismiss:Tt,"aria-label":"Browse metrics",className:ve.modal},a.createElement(ye,{feedbackUrl:"https://forms.gle/DEMAJHoAMpe3e54CA"}),a.createElement("div",{className:ve.inputWrapper},a.createElement("div",{className:(0,t.cx)(ve.inputItem,ve.inputItemFirst)},a.createElement(M.I,{autoFocus:!0,"data-testid":Qt.searchMetric,placeholder:ne.browse,value:pe.fuzzySearchQuery,onInput:Le=>{const Ke=Le.currentTarget.value??"";Re(Fe(Ke)),Pt(Ke,pe.fullMetaSearch)}})),pe.hasMetadata&&a.createElement("div",{className:ve.inputItem},a.createElement(b.NU,{"data-testid":Qt.selectType,inputId:"my-select",options:Ge,value:pe.selectedTypes,placeholder:ne.type,onChange:Le=>Re(Xe(Le))})),a.createElement("div",null,a.createElement(R.$,{className:`${ve.loadingSpinner} ${pe.isLoading?ve.visible:""}`})),a.createElement("div",{className:ve.inputItem},a.createElement(I.P,{"aria-label":"Additional settings",content:we,placement:"bottom-end",closeButton:!1},a.createElement(A.h,{className:ve.settingsBtn},a.createElement(u.zx,{variant:"secondary",size:"md",onClick:()=>Re(zt()),"data-testid":Qt.showAdditionalSettings,className:ve.noBorder},"Additional Settings"),a.createElement(u.zx,{className:ve.noBorder,variant:"secondary",icon:pe.showAdditionalSettings?"angle-up":"angle-down"}))))),a.createElement("div",{className:ve.resultsData},Ce.metric&&a.createElement("i",{className:ve.currentlySelected},"Currently selected: ",Ce.metric),Ce.labels.length>0&&a.createElement("div",{className:ve.resultsDataFiltered},a.createElement(h.J,{name:"info-circle",size:"sm"}),a.createElement("div",{className:ve.resultsDataFilteredText},"\xA0These metrics have been pre-filtered by labels chosen in the label filters."))),a.createElement("div",{className:ve.results},pe.metrics&&a.createElement(De,{metrics:k(pe,Re),onChange:Ye,onClose:Tt,query:Ce,state:pe,disableTextWrap:pe.disableTextWrap})),a.createElement("div",{className:ve.resultsFooter},a.createElement("div",{className:ve.resultsAmount},"Showing ",pe.filteredMetricCount," of ",pe.totalMetricCount," results"),a.createElement(O.t,{currentPage:pe.pageNum??1,numberOfPages:j(pe).length,onNavigate:Le=>{Re(bt(Le??1))}}),a.createElement("div",{className:ve.resultsPerPageWrapper},a.createElement("p",{className:ve.resultsPerPageLabel},"# Results per page\xA0"),a.createElement(M.I,{"data-testid":Qt.resultsPerPage,value:F(pe.resultsPerPage,V.Xc,V.s6),placeholder:"results per page",width:10,title:"The maximum results per page is "+V.s6,type:"number",onInput:Le=>{const Ke=+Le.currentTarget.value;isNaN(Ke)||Ke>=V.s6||Re(qe(Ke))}}))))},Qt={metricModal:"metric-modal",searchMetric:"search-metric",searchWithMetadata:"search-with-metadata",selectType:"select-type",metricCard:"metric-card",useMetric:"use-metric",searchPage:"search-page",resultsPerPage:"results-per-page",setUseBackend:"set-use-backend",showAdditionalSettings:"show-additional-settings"},yn=" ",Zt=1e3;function re({datasource:je,query:pt,onChange:ft,onGetMetrics:Tt,labelsFilters:Ye,metricLookupDisabled:Ce,onBlur:oe,variableEditor:pe}){const Re=(0,m.wW)(Te),[ae,ve]=(0,a.useState)({}),xe=f.config.featureToggles.prometheusMetricEncyclopedia,Ge=[{value:"BrowseMetrics",label:"Metrics explorer",description:"Browse and filter all metrics and metadata with a fuzzy search"}],at=(0,a.useCallback)((lt,Rt)=>{const Ut=lt.label??lt.value;return Ut?Ut.toLowerCase?Rt.split(yn).reduce(($n,Mt)=>{const yt=Ut.toLowerCase().includes(Mt.toLowerCase());let At=!1;return xe&&(At=Ut==="Metrics explorer"),$n&&(yt||At)},!0):!0:!1},[xe]),dt=(0,a.useCallback)((lt,Rt)=>lt.__isNew__?lt.label:a.createElement(y(),{searchWords:Rt.inputValue.split(yn),textToHighlight:lt.label??"",highlightClassName:Re.highlight}),[Re.highlight]),st=(lt,Rt)=>{const Ut=(0,P.Vl)(lt);return We(Ut,Rt)},Pt=lt=>je.metricFindQuery(st(lt,Ye)).then(Ut=>{const Xt=Ut.length;(0,E.My)(Ut),Xt>Ut.length?ve({...ae,resultsTruncated:!0}):ve({...ae,resultsTruncated:!1});const $n=Ut.map(Mt=>({label:Mt.text,value:Mt.text}));return xe?[...Ge,...$n]:$n}),we=()=>Promise.resolve([]),Le=r()(lt=>Pt(lt),je.getDebounceTimeInMilliseconds()),Ke=lt=>{const Rt=lt.data;if(Rt.value==="BrowseMetrics"){const Ut=lt.isFocused?Re.focus:"";return a.createElement("div",{...lt.innerProps,ref:lt.innerRef,className:`${Re.customOptionWidth} metric-encyclopedia-open`,onKeyDown:Xt=>{Xt.code==="Enter"&&ve({...ae,metricsModalOpen:!0})}},a.createElement("div",{className:`${Re.customOption} ${Ut} metric-encyclopedia-open`},a.createElement("div",null,a.createElement("div",{className:"metric-encyclopedia-open"},Rt.label),a.createElement("div",{className:`${Re.customOptionDesc} metric-encyclopedia-open`},Rt.description)),a.createElement(u.zx,{fill:"text",size:"sm",variant:"secondary",onClick:()=>ve({...ae,metricsModalOpen:!0}),className:"metric-encyclopedia-open"},"Open",a.createElement(h.J,{name:"arrow-right"}))))}return(0,v.Qn)(lt)},ht=({children:lt,maxHeight:Rt,innerRef:Ut,innerProps:Xt})=>{const $n=(0,m.l4)(),Mt=(0,C.D)($n),yt=!a.isValidElement(lt)&&ae.resultsTruncated;return a.createElement("div",{...Xt,className:`${Mt.menu} ${Re.customMenuContainer}`,style:{maxHeight:Rt},"aria-label":"Select options menu"},a.createElement(x.$,{scrollRefCallback:Ut,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},lt),yt&&a.createElement("div",{className:Re.customMenuFooter},a.createElement("div",null,"Only the top 1000 metrics are displayed in the metric select. Use the metrics explorer to view all metrics.")))},xt=()=>a.createElement(b.qb,{isClearable:!!pe,inputId:"prometheus-metric-select",className:Re.select,value:pt.metric?(0,c.E)(pt.metric):void 0,placeholder:"Select metric",allowCustomValue:!0,formatOptionLabel:dt,filterOption:at,onOpenMenu:async()=>{if(Ce)return;ve({isLoading:!0});const lt=await Tt(),Rt=lt.map(Xt=>Xt.value),Ut=lt.length;lt.length>Zt&&(0,E.My)(lt),ve(xe?{metrics:[...Ge,...lt],isLoading:void 0,initialMetrics:Rt,resultsTruncated:Ut>lt.length}:{metrics:lt,isLoading:void 0,resultsTruncated:Ut>lt.length})},loadOptions:Ce?we:Le,isLoading:ae.isLoading,defaultOptions:ae.metrics,onChange:lt=>{const Rt=lt?.value;Rt?xe&&Rt==="BrowseMetrics"?(Q("grafana_prometheus_metric_encyclopedia_open",null,"",pt),ve({...ae,metricsModalOpen:!0})):ft({...pt,metric:Rt}):ft({...pt,metric:""})},components:xe?{Option:Ke,MenuList:ht}:{MenuList:ht},onBlur:oe||(()=>{})});return a.createElement(a.Fragment,null,xe&&!je.lookupsDisabled&&ae.metricsModalOpen&&a.createElement(qt,{datasource:je,isOpen:ae.metricsModalOpen,onClose:()=>ve({...ae,metricsModalOpen:!1}),query:pt,onChange:ft,initialMetrics:ae.initialMetrics??[]}),pe?a.createElement(g.Z,null,a.createElement(p._,{label:"Metric",labelWidth:20,tooltip:a.createElement("div",null,"Optional: returns a list of label values for the label name in the specified metric.")},xt())):a.createElement(l.s,null,a.createElement(d.S,{label:"Metric"},xt())))}const Te=je=>({select:(0,t.css)`
    min-width: 125px;
  `,highlight:(0,t.css)`
    label: select__match-highlight;
    background: inherit;
    padding: inherit;
    color: ${je.colors.warning.contrastText};
    background-color: ${je.colors.warning.main};
  `,customOption:(0,t.css)`
    padding: 8px;
    display: flex;
    justify-content: space-between;
    cursor: pointer;
    :hover {
      background-color: ${je.colors.emphasize(je.colors.background.primary,.1)};
    }
  `,customOptionlabel:(0,t.css)`
    color: ${je.colors.text.primary};
  `,customOptionDesc:(0,t.css)`
    color: ${je.colors.text.secondary};
    font-size: ${je.typography.size.xs};
    opacity: 50%;
  `,focus:(0,t.css)`
    background-color: ${je.colors.emphasize(je.colors.background.primary,.1)};
  `,customOptionWidth:(0,t.css)`
    min-width: 400px;
  `,customMenuFooter:(0,t.css)`
    flex: 0;
    display: flex;
    justify-content: space-between;
    padding: ${je.spacing(1.5)};
    border-top: 1px solid ${je.colors.border.weak};
    color: ${je.colors.text.secondary};
  `,customMenuContainer:(0,t.css)`
    display: flex;
    flex-direction: column;
    background: ${je.colors.background.primary};
    box-shadow: ${je.shadows.z3};
  `}),We=(je,pt)=>{const ft=pt?Je(pt):[];return`label_values({__name__=~".*${je}"${ft?ft.join(""):""}},__name__)`},Je=je=>je.map(pt=>`,${pt.label}="${pt.value}"`)},85308:(X,L,e)=>{"use strict";e.d(L,{U:()=>I});var t=e(39953),n=e(47810),r=e(63163),a=e(89527),i=e(65234),y=e(41407),c=e(86832),l=e(46298),d=e(60481),f=e(46101),m=e(74661),u=e(99491),h=e(97368),C=e.n(h),x=e(99456),b=e(75766),g=e(34964),p=e(81803),v=e(9558);function E({item:O,defaultOp:N,onChange:o,onDelete:w,onGetLabelNames:K,onGetLabelValues:V,invalidLabel:_,invalidValue:U,getLabelValuesAutofillSuggestions:$,debounceDuration:k}){const[H,j]=(0,t.useState)({}),[z,F]=(0,t.useState)(!1),[J,Q]=(0,t.useState)(!1),Z=(de=O.op)=>P.find(Pe=>Pe.label===de)?.isMultiValue,ne=de=>de?de.indexOf("|")>0?de.split("|"):[de]:[],ee=C()(de=>$(de,O.label),k);return t.createElement("div",{"data-testid":"prometheus-dimensions-filter-item"},t.createElement(g.B,null,t.createElement(v.Ph,{placeholder:"Select label","aria-label":b.wl.components.QueryBuilder.labelSelect,inputId:"prometheus-dimensions-filter-item-key",width:"auto",value:O.label?(0,x.E)(O.label):null,allowCustomValue:!0,onOpenMenu:async()=>{j({isLoadingLabelNames:!0});const de=await K(O);F(!0),j({labelNames:de,isLoadingLabelNames:void 0})},onCloseMenu:()=>{F(!1)},isOpen:z,isLoading:H.isLoadingLabelNames??!1,options:H.labelNames,onChange:de=>{de.label&&o({...O,op:O.op??N,label:de.label})},invalid:_}),t.createElement(v.Ph,{"aria-label":b.wl.components.QueryBuilder.matchOperatorSelect,className:"query-segment-operator",value:(0,x.E)(O.op??N),options:P,width:"auto",onChange:de=>{de.value!=null&&o({...O,op:de.value,value:Z(de.value)?O.value:ne(O?.value)[0]})}}),t.createElement(v.qb,{placeholder:"Select value","aria-label":b.wl.components.QueryBuilder.valueSelect,inputId:"prometheus-dimensions-filter-item-value",width:"auto",value:Z()?ne(O?.value).map(x.E):ne(O?.value).map(x.E)[0],allowCustomValue:!0,onOpenMenu:async()=>{j({isLoadingLabelValues:!0});const de=await V(O);(0,r.My)(de),Q(!0),j({...H,labelValues:de,isLoadingLabelValues:void 0})},onCloseMenu:()=>{Q(!1)},isOpen:J,defaultOptions:H.labelValues,isMulti:Z(),isLoading:H.isLoadingLabelValues,loadOptions:ee,onChange:de=>{if(de.value)o({...O,value:de.value,op:O.op??N});else{const Pe=de.map(ye=>ye.label).join("|");o({...O,value:Pe,op:O.op??N})}},invalid:U}),t.createElement(p._,{"aria-label":"remove",icon:"times",variant:"secondary",onClick:w})))}const P=[{label:"=",value:"=",isMultiValue:!1},{label:"!=",value:"!=",isMultiValue:!1},{label:"<",value:"<",isMultiValue:!1},{label:">",value:">",isMultiValue:!1},{label:"=~",value:"=~",isMultiValue:!0},{label:"!~",value:"!~",isMultiValue:!0}],S="Select at least 1 label filter (label and value)";function M({labelsFilters:O,onChange:N,onGetLabelNames:o,onGetLabelValues:w,labelFilterRequired:K,getLabelValuesAutofillSuggestions:V,debounceDuration:_,variableEditor:U}){const $="=",[k,H]=(0,t.useState)([{op:$}]);(0,t.useEffect)(()=>{O.length>0?H(O):H([{op:$}])},[O]);const j=J=>{H(J);const Q=J.filter(Z=>Z.label!=null&&Z.value!=null);(0,c.isEqual)(Q,O)||N(Q)},z=k.some(J=>J.label&&J.value),F=()=>t.createElement(l.k,{items:k,onChange:j,renderItem:(J,Q,Z)=>t.createElement(E,{debounceDuration:_,item:J,defaultOp:$,onChange:Q,onDelete:Z,onGetLabelNames:o,onGetLabelValues:w,invalidLabel:K&&!J.label,invalidValue:K&&!J.value,getLabelValuesAutofillSuggestions:V})});return t.createElement(t.Fragment,null,U?t.createElement(m.Z,null,t.createElement("div",{className:(0,y.cx)((0,y.css)`
              display: flex;
            `)},t.createElement(u.W,{width:20,tooltip:t.createElement("div",null,"Optional: used to filter the metric select for this query type.")},"Label filters"),F())):t.createElement(d.s,null,t.createElement(f.S,{label:"Label filters",error:S,invalid:K&&!z},F())))}var R=e(53430);function I({datasource:O,query:N,onChange:o,onBlur:w,variableEditor:K}){const V=F=>{o({...N,labels:F})},_=(0,t.useCallback)(async F=>{const J=O.getVariables(),Q=await F;return[...J.map(Z=>({label:Z,value:Z})),...Q.map(Z=>({label:Z.value,value:Z.value,title:Z.description}))]},[O]),U=async F=>{if(!N.metric)return await O.languageProvider.fetchLabels(),O.languageProvider.getLabelKeys().map(ne=>({value:ne}));const J=N.labels.filter(ne=>ne!==F);J.push({label:"__name__",op:"=",value:N.metric});const Q=a.Z.renderLabels(J);let Z;return O.hasLabelsMatchAPISupport()?Z=await O.languageProvider.fetchSeriesLabelsMatch(Q):Z=await O.languageProvider.fetchSeriesLabels(Q),Object.keys(Z).filter(ne=>!J.find(ee=>ee.label===ne)).map(ne=>({value:ne}))},$=(F,J)=>{const Q={label:J??"__name__",op:"=~",value:(0,i.Vl)(`.*${F}`)},Z=N.labels.filter(Pe=>Pe.label!==Q.label);Z.push(Q),N.metric&&Z.push({label:"__name__",op:"=",value:N.metric});const ne=Z.map(Pe=>({...Pe,label:O.interpolateString(Pe.label),value:O.interpolateString(Pe.value)})),ee=a.Z.renderLabels(ne);let de;return O.hasLabelsMatchAPISupport()?de=H(Q,ee):de=k(Q,ee),de.then(Pe=>((0,r.My)(Pe),Pe))},k=(F,J)=>{if(!F.label)return Promise.resolve([]);const Q=O.languageProvider.fetchSeries(J),Z=O.interpolateString(F.label);return Q.then(ne=>{const ee=new Set;return ne.forEach(de=>{const Pe=de[Z];ee.add(Pe)}),Array.from(ee).map(de=>({label:de,value:de}))})},H=(F,J)=>F.label?O.languageProvider.fetchSeriesValuesWithMatch(F.label,J).then(Q=>Q.map(Z=>({value:Z,label:Z}))):Promise.resolve([]),j=async F=>{if(!F.label)return[];if(!N.metric)return(await O.languageProvider.getLabelValues(F.label)).map(ne=>({value:ne}));const J=N.labels.filter(ne=>ne!==F);J.push({label:"__name__",op:"=",value:N.metric});const Q=J.map(ne=>({...ne,label:O.interpolateString(ne.label),value:O.interpolateString(ne.value)})),Z=a.Z.renderLabels(Q);return O.hasLabelsMatchAPISupport()?H(F,Z):k(F,Z)},z=(0,t.useCallback)(()=>_(A(O,N)),[O,N,_]);return t.createElement(t.Fragment,null,t.createElement(R.kU,{query:N,onChange:o,onGetMetrics:z,datasource:O,labelsFilters:N.labels,metricLookupDisabled:O.lookupsDisabled,onBlur:w||(()=>{}),variableEditor:K}),t.createElement(M,{debounceDuration:O.getDebounceTimeInMilliseconds(),getLabelValuesAutofillSuggestions:$,labelsFilters:N.labels,onChange:V,onGetLabelNames:F=>_(U(F)),onGetLabelValues:F=>_(j(F)),variableEditor:K}))}async function A(O,N){O.languageProvider.metricsMetadata||await O.languageProvider.loadMetricsMetadata(),O.languageProvider.metricsMetadata||(O.languageProvider.metricsMetadata={});let o;if(N.labels.length>0){const w=a.Z.renderLabels(N.labels);o=(await O.languageProvider.getSeries(w,!0)).__name__??[]}else o=await O.languageProvider.getLabelValues("__name__")??[];return o.map(w=>({value:w,description:(0,n.UQ)(w,O.languageProvider.metricsMetadata)}))}},55751:(X,L,e)=>{"use strict";e.d(L,{A:()=>d,n:()=>f});var t=e(39953),n=e(27366),r=e(49403),a=e(89527),i=e(95522),y=e(47433),c=e(23070),l=e(6155);const d="Fetch all series matching metric name and label filters.",f=t.memo(({query:m})=>{const u=(0,i._)(m||"").query,h={grammar:r.ZP,name:"promql"};return t.createElement(n.K,{gap:.5,direction:"column"},t.createElement(y.B,{stepNumber:1,title:t.createElement(l.U,{query:`${u.metric} ${a.Z.renderLabels(u.labels)}`,lang:h})},d),t.createElement(c.V,{stepNumber:2,queryModeller:a.Z,query:u,lang:h}))});f.displayName="PromQueryBuilderExplained"},94180:(X,L,e)=>{"use strict";e.d(L,{j:()=>y});var t=e(41407),n=e(39953),r=e(82803),a=e(63594),i=e(55751);function y(l){const{query:d,datasource:f,range:m,onRunQuery:u,onChange:h,data:C,app:x,showExplain:b}=l,g=(0,r.wW)(c);return n.createElement("div",{className:g.wrapper},n.createElement(a.ZP,{datasource:f,query:d,range:m,onRunQuery:u,onChange:h,history:[],data:C,app:x}),b&&n.createElement(i.n,{query:d.expr}))}const c=l=>({wrapper:(0,t.css)`
      .gf-form {
        margin-bottom: 0;
      }
    `})},93938:(X,L,e)=>{"use strict";e.d(L,{E3:()=>i,Gw:()=>y,Xc:()=>n,s6:()=>r,stateSlice:()=>a});var t=e(77960);const n=100,r=1e3,a=(0,t.oM)({name:"metrics-modal-state",initialState:i(),reducers:{filterMetricsBackend:(c,l)=>{c.metrics=l.payload.metrics,c.filteredMetricCount=l.payload.filteredMetricCount,c.isLoading=l.payload.isLoading},buildMetrics:(c,l)=>{c.isLoading=l.payload.isLoading,c.metrics=l.payload.metrics,c.hasMetadata=l.payload.hasMetadata,c.metaHaystackDictionary=l.payload.metaHaystackDictionary,c.nameHaystackDictionary=l.payload.nameHaystackDictionary,c.totalMetricCount=l.payload.totalMetricCount,c.filteredMetricCount=l.payload.filteredMetricCount},setIsLoading:(c,l)=>{c.isLoading=l.payload},setFilteredMetricCount:(c,l)=>{c.filteredMetricCount=l.payload},setResultsPerPage:(c,l)=>{c.resultsPerPage=l.payload},setPageNum:(c,l)=>{c.pageNum=l.payload},setFuzzySearchQuery:(c,l)=>{c.fuzzySearchQuery=l.payload,c.pageNum=1},setNameHaystack:(c,l)=>{c.nameHaystackOrder=l.payload[0],c.nameHaystackMatches=l.payload[1]},setMetaHaystack:(c,l)=>{c.metaHaystackOrder=l.payload[0],c.metaHaystackMatches=l.payload[1]},setFullMetaSearch:(c,l)=>{c.fullMetaSearch=l.payload,c.pageNum=1},setIncludeNullMetadata:(c,l)=>{c.includeNullMetadata=l.payload,c.pageNum=1},setSelectedTypes:(c,l)=>{c.selectedTypes=l.payload,c.pageNum=1},setUseBackend:(c,l)=>{c.useBackend=l.payload,c.fullMetaSearch=!1,c.pageNum=1},setDisableTextWrap:c=>{c.disableTextWrap=!c.disableTextWrap},showAdditionalSettings:c=>{c.showAdditionalSettings=!c.showAdditionalSettings}}});function i(c){return{isLoading:!0,metrics:[],hasMetadata:!0,metaHaystackDictionary:{},metaHaystackMatches:[],metaHaystackOrder:[],nameHaystackDictionary:{},nameHaystackOrder:[],nameHaystackMatches:[],totalMetricCount:0,filteredMetricCount:null,resultsPerPage:n,pageNum:1,fuzzySearchQuery:"",fullMetaSearch:c?.fullMetaSearch??!1,includeNullMetadata:c?.includeNullMetadata??!0,selectedTypes:[],useBackend:c?.useBackend??!1,disableTextWrap:c?.disableTextWrap??!1,showAdditionalSettings:!1}}function y(c){return{useBackend:c?.useBackend??!1,disableTextWrap:c?.disableTextWrap??!1,fullMetaSearch:c?.fullMetaSearch??!1,includeNullMetadata:c.includeNullMetadata??!1}}},95522:(X,L,e)=>{"use strict";e.d(L,{_:()=>a});var t=e(50590),n=e(96543),r=e(65234);function a(b){const g=(0,r.bU)(b),v=t.E2.parse(g).topNode,P={query:{metric:"",labels:[],operations:[]},errors:[]};try{y(g,v,P)}catch(S){console.error(S),S instanceof Error&&P.errors.push({text:S.message})}return x(P.query)&&(P.errors=[]),i(b)&&(P.errors=[]),P}function i(b){const g={query:{metric:"",labels:[],operations:[]},errors:[]};b=b.replace(/\$__interval/g,"1s"),b=b.replace(/\$__interval_ms/g,"1000"),b=b.replace(/\$__rate_interval/g,"1s"),b=b.replace(/\$__range_ms/g,"1000"),b=b.replace(/\$__range_s/g,"1"),b=b.replace(/\$__range/g,"1s");const v=t.E2.parse(b).topNode;try{y(b,v,g)}catch{return!1}return g.errors.length===0}function y(b,g,p){const v=p.query;switch(g.type.id){case t.tz:{v.metric=(0,r.KF)(b,g);break}case t.Zm:{v.labels.push(l(b,g));const E=g.getChild(r._A);E&&p.errors.push((0,r.wf)(b,E));break}case t.lX:{f(b,g,p);break}case t.aZ:{m(b,g,p);break}case t.vU:{h(b,g,p);break}case r._A:{if(c(g))break;p.errors.push((0,r.wf)(b,g));break}default:{g.type.id===t.Om&&p.errors.push((0,r.wf)(b,g));let E=g.firstChild;for(;E;)y(b,E,p),E=E.nextSibling}}}function c(b){return b.prevSibling?.type.id===t.wi&&b.prevSibling?.firstChild?.type.id===t.m6}function l(b,g){const p=(0,r.KF)(b,g.getChild(t.m0)),v=(0,r.KF)(b,g.getChild(t.e8)),E=(0,r.KF)(b,g.getChild(t.nv)).replace(/"/g,"");return{label:p,op:v,value:E}}const d=["changes","rate","irate","increase","delta"];function f(b,g,p){const v=p.query,E=g.getChild(t.hT),P=(0,r.KF)(b,E),M=g.getChild(t.yY).getChild(t.mW),R=[];let I="";if(d.includes(P)||P.endsWith("_over_time")){let O=(0,r.KF)(b,g).match(/\[(.+)\]/);O?.[1]&&(I=O[1],R.push(O[1]))}const A={id:P,params:R};if(v.operations.unshift(A),M){if((0,r.KF)(b,M)===I+"]")return;u(b,M,p,A)}}function m(b,g,p){const v=p.query,E=g.getChild(t.Ki);let P=(0,r.KF)(b,E);const S=g.getChild(t.Ip),M=[];S&&(S.getChild("By")&&P&&(P=`__${P}_by`),S.getChild(t.yN)&&(P=`__${P}_without`),M.push(...(0,r.ff)(b,S,t.Tm)));const I=g.getChild(t.yY).getChild(t.mW),O=I?.getChild(t.wi)?.getChild(t.vU);O&&p.errors.push({text:"Query parsing is ambiguous.",from:O.from,to:O.to});const N={id:P,params:[]};v.operations.unshift(N),u(b,I,p,N),N.params.push(...M)}function u(b,g,p,v){if(g)switch(g.type.id){case t.wi:case t.mW:{let E=g.firstChild;for(;E;){const S=E.getChild(t.wi)?.getChild(t.vU);S&&p.errors.push({text:"Query parsing is ambiguous.",from:S.from,to:S.to}),u(b,E,p,v),E=E.nextSibling}break}case t.iy:{v.params.push(parseFloat((0,r.KF)(b,g)));break}case t.nv:{v.params.push((0,r.KF)(b,g).replace(/"/g,""));break}default:y(b,g,p)}}function h(b,g,p){const v=p.query,E=g.firstChild,P=(0,r.KF)(b,E.nextSibling),S=C(b,g.getChild(t.v3)),M=g.lastChild,R=n.PX[P],I=E.getChild(t.iy),A=M.getChild(t.iy),O=M.getChild(t.vU);if(I||y(b,E,p),A)v.operations.push((0,r.Es)(R,b,M,!!S?.isBool));else if(O){const N=(0,r.ge)(M);N?.type.id===t.iy&&v.operations.push((0,r.Es)(R,b,N,!!S?.isBool)),y(b,M,p)}else{v.binaryQueries=v.binaryQueries||[];const N={operator:P,query:{metric:"",labels:[],operations:[]}};S?.isMatcher&&(N.vectorMatchesType=S.matchType,N.vectorMatches=S.matches),v.binaryQueries.push(N),y(b,M,{query:N.query,errors:p.errors})}}function C(b,g){if(g){if(g.getChild("Bool"))return{isBool:!0,isMatcher:!1};{const p=g.getChild(t.Wc);return p?{isMatcher:!0,isBool:!1,matches:(0,r.KF)(b,p.getChild(t.XT)?.getChild(t.pQ)),matchType:p.getChild(t.On)?"on":"ignoring"}:void 0}}}function x(b){return b.labels.length===0&&b.operations.length===0&&!b.metric}},32449:(X,L,e)=>{"use strict";e.d(L,{x:()=>r});var t=e(77663),n=e(18533);class r{constructor(i){this.categories=[],this.operationsRegistry=new t.B(i)}setOperationCategories(i){this.categories=i}getOperationsForCategory(i){return this.operationsRegistry.list().filter(y=>y.category===i&&!y.hideFromList)}getAlternativeOperations(i){return this.operationsRegistry.list().filter(y=>y.alternativesKey&&y.alternativesKey===i)}getCategories(){return this.categories}getOperationDef(i){return this.operationsRegistry.getIfExists(i)}renderOperations(i,y){for(const c of y){const l=this.operationsRegistry.getIfExists(c.id);if(!l)throw new Error(`Could not find operation ${c.id} in the registry`);i=l.renderer(c,l,i)}return i}renderBinaryQueries(i,y){if(y)for(const c of y)i=`${this.renderBinaryQuery(i,c)}`;return i}renderBinaryQuery(i,y){let c=i+` ${y.operator} `;return y.vectorMatches&&(c+=`${y.vectorMatchesType}(${y.vectorMatches}) `),c+this.renderQuery(y.query,!0)}renderLabels(i){if(i.length===0)return"";let y="{";for(const c of i)y!=="{"&&(y+=", "),y+=`${c.label}${c.op}"${c.value}"`;return y+"}"}renderQuery(i,y){let c=`${i.metric??""}${this.renderLabels(i.labels)}`;return c=this.renderOperations(c,i.operations),!y&&this.hasBinaryOp(i)&&i.binaryQueries?.length&&(c=`(${c})`),c=this.renderBinaryQueries(c,i.binaryQueries),y&&(this.hasBinaryOp(i)||i.binaryQueries?.length)&&(c=`(${c})`),c}hasBinaryOp(i){return i.operations.find(y=>this.getOperationDef(y.id)?.category===n.CM.BinaryOps)!==void 0}}},47433:(X,L,e)=>{"use strict";e.d(L,{B:()=>i});var t=e(41407),n=e(39953),r=e(52807),a=e(82803);function i({title:c,stepNumber:l,markdown:d,children:f}){const m=(0,a.wW)(y);return n.createElement("div",{className:m.box},l!==void 0&&n.createElement("div",{className:m.stepNumber},l),n.createElement("div",{className:m.boxInner},c&&n.createElement("div",{className:m.header},n.createElement("span",null,c)),n.createElement("div",{className:m.body},d&&n.createElement("div",{dangerouslySetInnerHTML:{__html:(0,r.a)(d)}}),f)))}const y=c=>({box:(0,t.css)({background:c.colors.background.secondary,padding:c.spacing(1),borderRadius:c.shape.radius.default,position:"relative"}),boxInner:(0,t.css)({marginLeft:c.spacing(4)}),stepNumber:(0,t.css)({fontWeight:c.typography.fontWeightMedium,background:c.colors.secondary.main,width:"20px",height:"20px",borderRadius:c.shape.radius.circle,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"10px",left:"11px",fontSize:c.typography.bodySmall.fontSize}),header:(0,t.css)({paddingBottom:c.spacing(.5),display:"flex",alignItems:"center",fontFamily:c.typography.fontFamilyMonospace}),body:(0,t.css)({color:c.colors.text.secondary,"p:last-child":{margin:0},a:{color:c.colors.text.link,textDecoration:"underline"}})})},23070:(X,L,e)=>{"use strict";e.d(L,{V:()=>a});var t=e(39953),n=e(47433),r=e(6155);function a({query:i,queryModeller:y,stepNumber:c,lang:l,onMouseEnter:d,onMouseLeave:f}){return t.createElement(t.Fragment,null,i.operations.map((m,u)=>{const h=y.getOperationDef(m.id);if(!h)return`Operation ${m.id} not found`;const C=h.renderer(m,h,"<expr>"),x=h.explainHandler?h.explainHandler(m,h):h.documentation??"no docs";return t.createElement("div",{key:u,onMouseEnter:()=>d?.(m,u),onMouseLeave:()=>f?.(m,u)},t.createElement(n.B,{stepNumber:u+c,title:t.createElement(r.U,{query:C,lang:l}),markdown:x}))}))}},6155:(X,L,e)=>{"use strict";e.d(L,{U:()=>y});var t=e(41407),n=e(10963),r=e.n(n),a=e(39953),i=e(82803);function y({query:l,lang:d,className:f}){const m=(0,i.l4)(),u=c(m),h=r().highlight(l,d.grammar,d.name);return a.createElement("div",{className:(0,t.cx)(u.editorField,"prism-syntax-highlight",f),"aria-label":"selector",dangerouslySetInnerHTML:{__html:h}})}const c=l=>({editorField:(0,t.css)({fontFamily:l.typography.fontFamilyMonospace,fontSize:l.typography.bodySmall.fontSize})})},82473:(X,L,e)=>{"use strict";e.d(L,{IT:()=>g,NZ:()=>m,PP:()=>h,Sp:()=>P,Z3:()=>p,ZI:()=>R,Zc:()=>I,e8:()=>f,i1:()=>x,j8:()=>M,kq:()=>b,pS:()=>c,t7:()=>C,zJ:()=>l});var t=e(86832),n=e.n(t),r=e(71757),a=e.n(r),i=e(14091),y=e(18533);function c(A,O,N){const o=u(A,O,N),w=A.id+"(";return N&&o.push(N),w+o.join(", ")+")"}function l(A,O,N){const o=u(A,O,N),w=A.id+"(";return N&&o.unshift(N),w+o.join(", ")+")"}function d(A,O,N,o){if(O.params.length<2)throw`Cannot render a function with params of length [${O.params.length}]`;let w=(A.params??[])[0]??"5m";const K=u({...A,params:A.params.slice(1)},{...O,params:O.params.slice(1),defaultParams:O.defaultParams.slice(1)},N),V=A.id+"(";return N&&(o?K.push(`${N}[${w}]`):K.unshift(`${N}[${w}]`)),V+K.join(", ")+")"}function f(A,O,N){return d(A,O,N,!1)}function m(A,O,N){return d(A,O,N,!0)}function u(A,O,N){return(A.params??[]).map((o,w)=>O.params[w].type==="string"?'"'+o+'"':o)}function h(A,O){const N={id:A.id,params:A.defaultParams};return{...O,operations:[...O.operations,N]}}function C(A){return(0,t.capitalize)(A.replace(/_/g," "))}function x(A,O){return`operations.${A}.param.${O}`}function b(A=!1){const O={name:"Range",type:"string",options:[{label:"$__interval",value:"$__interval"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]};return A&&O.options.unshift({label:"$__rate_interval",value:"$__rate_interval"}),O}function g(A,O={}){return[{id:A,name:C(A),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:y.CM.Aggregations,renderer:c,paramChangedHandler:R(`__${A}_by`),explainHandler:P(A,""),addOperationHandler:h,...O},{id:`__${A}_by`,name:`${C(A)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:i.g}],defaultParams:[""],alternativesKey:"aggregations by",category:y.CM.Aggregations,renderer:v(A),paramChangedHandler:M(A),explainHandler:P(A,"by"),addOperationHandler:h,hideFromList:!0,...O},{id:`__${A}_without`,name:`${C(A)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:i.g}],defaultParams:[""],alternativesKey:"aggregations by",category:y.CM.Aggregations,renderer:E(A),paramChangedHandler:M(A),explainHandler:P(A,"without"),addOperationHandler:h,hideFromList:!0,...O}]}function p(A,O,N={}){const o=g(A,N);return o[0].params.unshift(...O.params),o[1].params.unshift(...O.params),o[2].params.unshift(...O.params),o[0].defaultParams=O.defaultParams,o[1].defaultParams=[...O.defaultParams,""],o[2].defaultParams=[...O.defaultParams,""],o[1].renderer=S(A),o[2].renderer=S(A),o}function v(A){return function(N,o,w){return`${A} by(${N.params.join(", ")}) (${w})`}}function E(A){return function(N,o,w){return`${A} without(${N.params.join(", ")}) (${w})`}}function P(A,O){return function(o){const w=o.params.map(V=>`\`${V}\``).join(" and "),K=a()("label",o.params.length);switch(O){case"by":return`Calculates ${A} over dimensions while preserving ${K} ${w}.`;case"without":return`Calculates ${A} over the dimensions ${w}. All other labels are preserved.`;default:return`Calculates ${A} over the dimensions.`}}}function S(A){return function(N,o,w){const K=o.params.findIndex(U=>U.restParam),V=N.params.slice(0,K),_=N.params.slice(K);return`${A} by(${_.join(", ")}) (${V.map((U,$)=>o.params[$].type==="string"?`"${U}"`:U).join(", ")}, ${w})`}}function M(A){return function(N,o,w){return o.params.length<w.params.length?{...o,id:A}:o}}function R(A){return function(N,o,w){return o.params.length===w.params.length?{...o,id:A}:o}}function I(A,O){if(!A.label||!A.op||!A.value||O.length<2)return!1;const N=A.op.toString().startsWith("!");return O.filter(K=>K.label===A.label&&K.value===A.value&&K.op!==A.op).some(K=>!!(N&&K?.op?.toString().startsWith("!")===!1||N===!1&&K?.op?.toString().startsWith("!")))}},65234:(X,L,e)=>{"use strict";e.d(L,{Es:()=>d,KF:()=>l,Tt:()=>c,Vl:()=>x,_A:()=>t,bU:()=>i,ff:()=>f,ge:()=>n,wf:()=>r});const t=0;function n(b){return b.firstChild?n(b.firstChild):b}function r(b,g){return{text:l(b,g),from:g.from,to:g.to,parentType:g.parent?.name}}const a=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function i(b){return b.replace(a,(g,p,v,E,P,S,M)=>{const R=E||M;let I=p,A="0";return v&&(I=v,A="1"),P&&(I=P,A="2"),`__V_${A}__`+I+"__V__"+(R?"__F__"+R+"__F__":"")})}const y=[(b,g)=>`$${b}`,(b,g)=>`[[${b}${g?`:${g}`:""}]]`,(b,g)=>`\${${b}${g?`:${g}`:""}}`];function c(b){return b.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,(g,p,v,E)=>y[parseInt(p,10)](v,E))}function l(b,g){return g?c(b.substring(g.from,g.to)):""}function d(b,g,p,v){const E=[parseFloat(l(g,p))];return b.comparison&&E.push(v),{id:b.id,params:E}}function f(b,g,p){if(g.type.id===p||g.name===p)return[l(b,g)];const v=[];let E=0,P=g.childAfter(E);for(;P;)v.push(...f(b,P,p)),E=P.to,P=g.childAfter(E);return v}function m(b,g){if(!g){console.log("<empty>");return}const p=u(b,g),v=h(p);if(!v){console.log("<empty>");return}console.log(v)}function u(b,g){const p={},v=C(b,g),E=[];let P=0,S=g.childAfter(P);for(;S;)E.push(u(b,S)),P=S.to,S=g.childAfter(P);return p.name=v,p.children=E,p}function h(b,g={lastChild:!0,indent:""}){const p=b.name,{lastChild:v,indent:E}=g;let S=(E!==""?E+(v?"\u2514\u2500":"\u251C\u2500"):"")+p;const M=b.children;return M.forEach((R,I)=>{const A=I===M.length-1;S+=`
`+h(R,{lastChild:A,indent:E+(v?"  ":"\u2502 ")})}),S}function C(b,g){return g.name+": "+l(b,g)}const x=b=>b.split(" ").map(p=>`${p}.*`).join("")},83065:(X,L,e)=>{"use strict";e.d(L,{c:()=>t});var t=(n=>(n.Code="code",n.Builder="builder",n))(t||{})},18533:(X,L,e)=>{"use strict";e.d(L,{CM:()=>t,Fz:()=>r,G3:()=>n});var t=(a=>(a.Aggregations="Aggregations",a.RangeFunctions="Range functions",a.Functions="Functions",a.BinaryOps="Binary operations",a.Trigonometric="Trigonometric",a.Time="Time Functions",a))(t||{}),n=(a=>(a.Abs="abs",a.Absent="absent",a.AbsentOverTime="absent_over_time",a.Acos="acos",a.Acosh="acosh",a.Asin="asin",a.Asinh="asinh",a.Atan="atan",a.Atanh="atanh",a.Avg="avg",a.AvgOverTime="avg_over_time",a.BottomK="bottomk",a.Ceil="ceil",a.Changes="changes",a.Clamp="clamp",a.ClampMax="clamp_max",a.ClampMin="clamp_min",a.Cos="cos",a.Cosh="cosh",a.Count="count",a.CountOverTime="count_over_time",a.CountScalar="count_scalar",a.CountValues="count_values",a.DayOfMonth="day_of_month",a.DayOfWeek="day_of_week",a.DayOfYear="day_of_year",a.DaysInMonth="days_in_month",a.Deg="deg",a.Delta="delta",a.Deriv="deriv",a.DropCommonLabels="drop_common_labels",a.Exp="exp",a.Floor="floor",a.Group="group",a.HistogramQuantile="histogram_quantile",a.HoltWinters="holt_winters",a.Hour="hour",a.Idelta="idelta",a.Increase="increase",a.Irate="irate",a.LabelJoin="label_join",a.LabelReplace="label_replace",a.Last="last",a.LastOverTime="last_over_time",a.Ln="ln",a.Log10="log10",a.Log2="log2",a.Max="max",a.MaxOverTime="max_over_time",a.Min="min",a.MinOverTime="min_over_time",a.Minute="minute",a.Month="month",a.Pi="pi",a.PredictLinear="predict_linear",a.Present="present",a.PresentOverTime="present_over_time",a.Quantile="quantile",a.QuantileOverTime="quantile_over_time",a.Rad="rad",a.Rate="rate",a.Resets="resets",a.Round="round",a.Scalar="scalar",a.Sgn="sgn",a.Sin="sin",a.Sinh="sinh",a.Sort="sort",a.SortDesc="sort_desc",a.Sqrt="sqrt",a.Stddev="stddev",a.StddevOverTime="stddev_over_time",a.Sum="sum",a.SumOverTime="sum_over_time",a.Tan="tan",a.Tanh="tanh",a.Time="time",a.Timestamp="timestamp",a.TopK="topk",a.Vector="vector",a.Year="year",a.Addition="__addition",a.Subtraction="__subtraction",a.MultiplyBy="__multiply_by",a.DivideBy="__divide_by",a.Modulo="__modulo",a.Exponent="__exponent",a.NestedQuery="__nested_query",a.EqualTo="__equal_to",a.NotEqualTo="__not_equal_to",a.GreaterThan="__greater_than",a.LessThan="__less_than",a.GreaterOrEqual="__greater_or_equal",a.LessOrEqual="__less_or_equal",a))(n||{}),r=(a=>(a.Rate="rate",a.Histogram="histogram",a.Binary="binary",a))(r||{})},3395:(X,L,e)=>{"use strict";e.d(L,{tQ:()=>h,Ji:()=>m});var t=e(5195),n=e(92403),r=e(80742),a=e(46563),i=e(32688),y=e(72639),c=e(26058);function l(C,x){let[b]=C,[g]=x,p=b.length,v=b[0],E=b[p-1],P=g.length,S=g[0],M=g[P-1],R;if(p)if(P){if(S>E)R=C.map((I,A)=>C[A].concat(x[A]));else if(M<v)R=x.map((I,A)=>x[A].concat(C[A]));else if(S<=v&&M>=E)R=x;else if(!(S>v&&M<E)){if(S>=v){let I=(0,c.Ko)(S,b);I=b[I]<S?I-1:I,R=C.map((A,O)=>C[O].slice(0,I).concat(x[O]))}else if(M>=v){let I=(0,c.Ko)(M,b);I=b[I]<M?I:I+1,R=x.map((A,O)=>x[O].concat(C[O].slice(I)))}}}else R=C;else P?R=x:R=[[]];return R}function d(C,x,b){let[g,...p]=C,v,E;return g[0]<x&&(v=(0,c.Ko)(x,g),g[v]<x&&v++),g[g.length-1]>b&&(E=(0,c.Ko)(b,g),g[E]>b&&E--),(v!=null||E!=null)&&(g=g.slice(v??0,E),p=p.map(P=>P.slice(v??0,E))),[g,...p]}var f=e(6278);const m="10m",u=C=>`${C.type}|${C.name}|${JSON.stringify(C.labels??"")}`;class h{constructor(x){this.sendEventsInterval=6e4*10,this.pendingRequestIdsToTargSigs=new Map,this.pendingAccumulatedEvents=new Map,this.cache=new Map,this.sendPendingTrackingEvents=()=>{const g=this.pendingAccumulatedEvents.entries();for(let[p,v]of g)if(!v.sent){const E={datasource:v.datasource.toString(),requestCount:v.requestCount.toString(),savedBytesTotal:v.savedBytesTotal.toString(),initialRequestSize:v.initialRequestSize.toString(),lastRequestSize:v.lastRequestSize.toString(),panelId:v.panelId.toString(),dashId:v.dashId.toString(),expr:v.expr.toString(),refreshIntervalMs:v.refreshIntervalMs.toString(),from:v.from.toString(),queryRangeSeconds:v.queryRangeSeconds.toString()};i.config.featureToggles.prometheusIncrementalQueryInstrumentation?(0,y.ff)("grafana_incremental_queries_profile",E):a.s.api.pushEvent&&a.s.api.pushEvent("incremental query response size",E,"no-interaction",{skipDedupe:!0}),this.pendingAccumulatedEvents.set(p,{...v,sent:!0,requestCount:0,savedBytesTotal:0,initialRequestSize:0,lastRequestSize:0})}};const b=x.overlapString;if((0,t.jO)(b)){const g=(0,t.RA)(b);this.overlapWindowMs=(0,t.iX)(g)}else{const g=(0,t.RA)(m);this.overlapWindowMs=(0,t.iX)(g)}(i.config.grafanaJavascriptAgent.enabled||i.config.featureToggles?.prometheusIncrementalQueryInstrumentation)&&x.profileFunction!==void 0?(this.profile(),this.shouldProfile=!0):this.shouldProfile=!1,this.getProfileData=x.profileFunction,this.getTargetSignature=x.getTargetSignature}profile(){typeof PerformanceObserver=="function"&&(this.perfObeserver=new PerformanceObserver(x=>{x.getEntries().forEach(b=>{const g=b,p=typeof g?.transferSize=="number";if(g?.initiatorType==="fetch"&&p){let v=g.name;if(v.includes("/api/ds/query")){let E=v.match(/requestId=([a-z\d]+)/i);if(E){let P=E[1];const S=Math.round(g.transferSize),M=this.pendingRequestIdsToTargSigs.get(P);if(M){const R=this.pendingRequestIdsToTargSigs.entries();for(let[,I]of R)if(I.identity===M.identity&&I.bytes!==null){const A=this.pendingAccumulatedEvents.get(I.identity),O=I.bytes-S;this.pendingAccumulatedEvents.set(I.identity,{datasource:I.datasource??"N/A",requestCount:(A?.requestCount??0)+1,savedBytesTotal:(A?.savedBytesTotal??0)+O,initialRequestSize:I.bytes,lastRequestSize:S,panelId:M.panelId?.toString()??"",dashId:M.dashboardUID??"",expr:M.expr??"",refreshIntervalMs:M.refreshIntervalMs??0,sent:!1,from:M.from??"",queryRangeSeconds:M.queryRangeSeconds??0}),this.pendingRequestIdsToTargSigs.delete(P);return}this.pendingRequestIdsToTargSigs.set(P,{...M,bytes:S})}}}}})}),this.perfObeserver.observe({type:"resource",buffered:!1}),setInterval(this.sendPendingTrackingEvents,this.sendEventsInterval),window.addEventListener("beforeunload",this.sendPendingTrackingEvents))}requestInfo(x){const b=x.range.from.valueOf(),g=x.range.to.valueOf(),p=x.rangeRaw?.to?.toString()==="now";let v=p,E;const P=(0,f.$t)().refreshMS,S=new Map;x.targets.forEach(M=>{let R=`${x.dashboardUID}|${x.panelId}|${M.refId}`,I=this.getTargetSignature(x,M);this.shouldProfile&&this.getProfileData&&this.pendingRequestIdsToTargSigs.set(x.requestId,{...this.getProfileData(x,M),identity:R+"|"+I,bytes:null,panelId:x.panelId,dashboardUID:x.dashboardUID??"",from:x.rangeRaw?.from.toString()??"",queryRangeSeconds:x.range.to.diff(x.range.from,"seconds")??"",refreshIntervalMs:P??0}),S.set(R,I)});for(const[M,R]of S){let I=this.cache.get(M);if(I?.sig!==R?v=!1:(E=I?.prevTo??1/0,v=g>E&&b<=E),!v)break}if(v&&E){let M=Math.max(E-this.overlapWindowMs,b);const R=(0,n.CQ)(g),I=(0,n.CQ)((0,r.mB)(M,x.intervalMs));x={...x,range:{...x.range,from:I,to:R}}}else S.forEach((M,R)=>{this.cache.delete(R)});return{requests:[x],targSigs:S,shouldCache:p}}procFrames(x,b,g){if(b?.shouldCache){const p=x.range.from.valueOf(),v=x.range.to.valueOf(),E=new Map;g.forEach(S=>{let M=`${x.dashboardUID}|${x.panelId}|${S.refId}`,R=E.get(M);R||(R=[],E.set(M,R)),R.push(S)});let P=[];E.forEach((S,M)=>{let R=(M?this.cache.get(M)?.frames:null)??[];S.forEach(A=>{if(A.length===0||A.fields.length===0)return;let O=u(A.fields[1]),N=R.find(o=>u(o.fields[1])===O);if(!N)R.push(A);else{let o=N.fields.map(V=>V.values),w=A.fields.map(V=>V.values),K=l(o,w);if(K){for(let V=0;V<K.length;V++)N.fields[V].values=K[V];N.length=N.fields[0].values.length}}});let I=[];R.forEach(A=>{let O=A.fields.map(o=>o.values),N=d(O,p,v);if(N[0].length>0){for(let o=0;o<N.length;o++)A.fields[o].values=N[o];I.push(A)}}),this.cache.set(M,{sig:b.targSigs.get(M),frames:I,prevTo:v}),P.push(...I)}),g=P.map(S=>({...S,fields:S.fields.map(M=>({...M,config:{...M.config},values:M.values.slice()}))}))}return g}}},52226:(X,L,e)=>{"use strict";e.d(L,{Ky:()=>H,n:()=>E,nM:()=>_,nf:()=>k,vs:()=>R});var t=e(94079),n=e(86832),r=e.n(n),a=e(96083),i=e(89591),y=e(30976),c=e(33975),l=e(94123),d=e(72964),f=e(36822),m=e(51226),u=e(69330),h=e(32688),C=e(26205),x=e(79059),b=e(64304);const g=/^[+-]?inf(?:inity)?$/i,p=(j,z)=>z.app===a.zj.Explore&&(j.meta?.custom?.resultType==="vector"||j.meta?.custom?.resultType==="scalar")?!0:z.targets.find(J=>J.refId===j.refId)?.format==="table",v=(j,z)=>z.targets.find(J=>J.refId===j.refId)?.format==="heatmap";function E(j,z,F){h.config.featureToggles.prometheusDataplane&&j.data.forEach(be=>{const ge=z.targets.find(ue=>ue.refId===be.refId);ge&&ge.legendFormat==="__auto"&&be.fields.forEach(ue=>{if(ue.labels?.__name__&&ue.labels?.__name__===ue.name){const Ie={...ue,name:i.M5};ue.config.displayNameFromDS=(0,u.$w)(Ie,be,j.data)}})});const[J,Q]=(0,n.partition)(j.data,be=>p(be,z)),Z=S(J),[ne,ee]=(0,n.partition)(Q,be=>be.meta?.custom?.resultType==="exemplar"),{exemplarTraceIdDestinations:de}=F,Pe=ne.map(be=>{if(de?.length)for(const ge of de){const ue=be.fields.find(Ie=>Ie.name===ge.name);if(ue){const Ie=I(ge);ue.config.links=ue.config.links?.length?[...ue.config.links,...Ie]:Ie}}return{...be,meta:{...be.meta,dataTopic:y.w5.Annotations}}}),[ye,he]=(0,n.partition)(ee,be=>v(be,z));ye.forEach(be=>{if(be.name==null){let ge=be.fields.find(ue=>ue.type===i.fS.number);if(ge){let ue=ge.labels?.le;ue&&(be.name=ue,ge.config.displayNameFromDS=ue)}}});const me=(0,n.groupBy)(ye,be=>be.refId);let De=[];for(const be in me){const ge=me[be],ue=(0,n.groupBy)(ge,Ie=>{const ot=Ie.fields.find(Qe=>Qe.type===i.fS.number);if(ot?.labels&&P in ot.labels){const{le:Qe,...Me}=ot?.labels;return Object.values(Me).join()}return Object.values(ot?.labels??[]).join()});(0,n.forOwn)(ue,(Ie,ot)=>{const Qe=Ie.sort(k);De.push(U($(Qe)))})}const le=he.map(be=>({...be,meta:{...be.meta,preferredVisualisationType:"graph"}})),Ee=(0,n.flatten)(De);return{...j,data:[...le,...Z,...Ee,...Pe]}}const P="le";function S(j){if(j.length===0||j.length===1&&j[0].length===0)return j;const z=(0,n.groupBy)(j,"refId"),F=Object.keys(z);return F.map(Q=>{const Z=M(F.length,Q),ne=K({data:[],valueName:Z}),ee=w([]),de=[];z[Q].forEach(ye=>{const me=ye.fields[1]?.labels??{};Object.keys(me).sort().forEach(De=>{if(!de.some(le=>le.name===De)){const le=De===P;de.push({name:De,config:{filterable:!0},type:le?i.fS.number:i.fS.string,values:[]})}})}),z[Q].forEach(ye=>{const he=ye.fields[0]?.values??[],me=ye.fields[1]?.values??[];he.forEach(De=>ee.values.push(De)),me.forEach(De=>{ne.values.push(H(De));const le=ye.fields[1].labels??{};de.forEach(Ee=>Ee.values.push(o(le,Ee.name)))})});const Pe=[ee,...de,ne];return{refId:Q,fields:Pe,meta:{...z[Q][0].meta,preferredVisualisationType:"rawPrometheus"},length:ee.values.length}})}function M(j,z=""){return j>1?`Value #${z}`:"Value"}function R(j,z){const F={format:z.target.format,step:z.query.step,legendFormat:z.target.legendFormat,start:z.query.start,end:z.query.end,query:z.query.expr,responseListLength:z.responseListLength,scopedVars:z.scopedVars,refId:z.target.refId,valueWithRefId:z.target.valueWithRefId,meta:{preferredVisualisationType:z.query.instant?"rawPrometheus":"graph"}},J=j.data.data;if((0,b.WS)(J)){const Z=[];J.forEach(de=>{const Pe=de.exemplars.map(ye=>({[i.Ls]:ye.timestamp*1e3,[i.M5]:ye.value,...ye.labels,...de.seriesLabels}));Z.push(...Pe)});const ne=A(Z,F),ee=new c.i(ne);if(ee.meta={dataTopic:y.w5.Annotations},z.exemplarTraceIdDestinations?.length)for(const de of z.exemplarTraceIdDestinations){const Pe=ee.fields.find(ye=>ye.name===de.name);if(Pe){const ye=I(de);Pe.config.links=Pe.config.links?.length?[...Pe.config.links,...ye]:ye}}return[ee]}if(!J?.result)return[];if(J.resultType==="scalar")return[{meta:F.meta,refId:F.refId,length:1,fields:[w([J.result]),K({data:[J.result]})]}];if(F.format==="table")return[N(J.result,F)];const Q=[];return J.result.forEach(Z=>Q.push(O(Z,F))),F.format==="heatmap"?U($(Q.sort(k))):Q}function I(j){const z=[];if(j.datasourceUid){const J=(0,C.F)().getInstanceSettings(j.datasourceUid);J&&z.push({title:j.urlDisplayLabel||`Query with ${J?.name}`,url:"",internal:{query:{query:"${__value.raw}",queryType:"traceql"},datasourceUid:j.datasourceUid,datasourceName:J?.name??"Data source not found"}})}return j.url&&z.push({title:j.urlDisplayLabel||`Go to ${j.url}`,url:j.url,targetBlank:!0}),z}function A(j,z){const F=z.step||15,J={},Q=[];for(const de of j){const Pe=String(Math.floor(de[i.Ls]/1e3/F)*F*1e3);J[Pe]||(J[Pe]=[]),J[Pe].push(de),Q.push(de[i.M5])}const Z=(0,t.deviation)(Q),ne=Object.keys(J).sort(),ee=[];for(const de of ne){const Pe=J[de];if(Pe.length===1)ee.push(Pe[0]);else{const he=Pe.map(me=>me[i.M5]).sort(t.descending).reduce((me,De)=>{if(me.length===0)me.push(De);else{const le=me[me.length-1];Z&&le-De>=2*Z&&me.push(De)}return me},[]);ee.push(...he.map(me=>Pe.find(De=>De[i.M5]===me)))}}return ee}function O(j,z){const{name:F,labels:J}=V(j.metric,z),Q=[];if((0,b.el)(j)){const Z=z.step?z.step*1e3:NaN;let ne=z.start*1e3;const ee=[];for(const Pe of j.values){let ye=H(Pe[1]);isNaN(ye)&&(ye=null);const he=Pe[0]*1e3;for(let me=ne;me<he;me+=Z)ee.push([me,null]);ne=he+Z,ee.push([he,ye])}const de=z.end*1e3;for(let Pe=ne;Pe<=de;Pe+=Z)ee.push([Pe,null]);Q.push(w(ee,!0)),Q.push(K({data:ee,parseValue:!1,labels:J,displayNameFromDS:F}))}else Q.push(w([j.value])),Q.push(K({data:[j.value],labels:J,displayNameFromDS:F}));return{meta:z.meta,refId:z.refId,length:Q[0].values.length,fields:Q,name:F}}function N(j,z){if(!j||j.length===0)return{meta:z.meta,refId:z.refId,length:0,fields:[]};const F=z.responseListLength>1||z.valueWithRefId?`Value #${z.refId}`:"Value",J=w([]),Q=Object.keys(j.reduce((ne,ee)=>({...ne,...ee.metric}),{})).sort().map(ne=>({name:ne,config:{filterable:!0},type:ne===P?i.fS.number:i.fS.string,values:[]})),Z=K({data:[],valueName:F});return j.forEach(ne=>{(0,b.el)(ne)?ne.values.forEach(ee=>{J.values.push(ee[0]*1e3),Q.forEach(de=>de.values.push(o(ne.metric,de.name))),Z.values.push(H(ee[1]))}):(J.values.push(ne.value[0]*1e3),Q.forEach(ee=>ee.values.push(o(ne.metric,ee.name))),Z.values.push(H(ne.value[1])))}),{meta:z.meta,refId:z.refId,length:J.values.length,fields:[J,...Q,Z]}}function o(j,z){return j.hasOwnProperty(z)?z===P?H(j[z]):j[z]:""}function w(j,z=!1){return{name:i.Ls,type:i.fS.time,config:{},values:j.map(F=>z?F[0]:F[0]*1e3)}}function K({data:j,valueName:z=i.M5,parseValue:F=!0,labels:J,displayNameFromDS:Q}){return{name:z,type:i.fS.number,display:(0,l.U)(),config:{displayNameFromDS:Q},labels:J,values:j.map(Z=>F?H(Z[1]):Z[1])}}function V(j,z){if(z?.legendFormat)return{name:(0,d.W)((0,x.J)().replace(z.legendFormat,z?.scopedVars),j),labels:j};const{__name__:F,...J}=j,Q=(0,f.aA)(J);let Z=`${F??""}${Q}`;return Z||(Z=z.query),{name:Z,labels:J}}function _(j){const z=j.__name__||"";delete j.__name__;const F=Object.entries(j).map(J=>`${J[0]}="${J[1]}"`).join(",");return`${z}{${F}}`}function U(j){if(j.length===0||j.length===1&&j[0].length===0)return[];const z=j[0].fields.find(J=>J.type===i.fS.time),F=j.map(J=>{let Q=J.fields.find(Z=>Z.type===i.fS.number);return{...Q,name:Q.config.displayNameFromDS}});return[{...j[0],meta:{...j[0].meta,type:m.P.HeatmapRows},fields:[z,...F]}]}function $(j){for(let z=j.length-1;z>0;z--){const F=j[z].fields.find(Q=>Q.type===i.fS.number),J=j[z-1].fields.find(Q=>Q.type===i.fS.number);if(!F||!J)throw new Error("Prometheus heatmap transform error: data should be a time series");for(let Q=0;Q<F.values.length;Q++){const Z=J.values[Q]||[0];F.values[Q]-=Z}}return j}function k(j,z){let F,J;try{F=H(j.fields[1].state?.displayName??j.name??j.fields[1].name),J=H(z.fields[1].state?.displayName??z.name??z.fields[1].name)}catch(Q){return console.error(Q),0}return F>J?1:F<J?-1:0}function H(j){return g.test(j)?j[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:parseFloat(j)}},64304:(X,L,e)=>{"use strict";e.d(L,{WS:()=>r,el:()=>n,jo:()=>i,pD:()=>a,x3:()=>t});var t=(y=>(y.Low="Low",y.Medium="Medium",y.High="High",y.None="None",y))(t||{});function n(y){return"values"in y}function r(y){return y==null||!Array.isArray(y)?!1:y.length?"exemplars"in y[0]:!1}var a=(y=>(y.Auto="__auto",y.Verbose="__verbose",y.Custom="__custom",y))(a||{}),i=(y=>(y[y.LabelNames=0]="LabelNames",y[y.LabelValues=1]="LabelValues",y[y.MetricNames=2]="MetricNames",y[y.VarQueryResult=3]="VarQueryResult",y[y.SeriesQuery=4]="SeriesQuery",y[y.ClassicQuery=5]="ClassicQuery",y))(i||{})},1838:(X,L,e)=>{"use strict";e.d(L,{Mt:()=>r,NM:()=>a,sY:()=>n});const t={filters:[],groupBy:[]};var n=(i=>(i.Done="done",i.Error="error",i.Pending="pending",i.Streaming="streaming",i))(n||{}),r=(i=>(i.Spans="spans",i.Traces="traces",i))(r||{}),a=(i=>(i.Intrinsic="intrinsic",i.Resource="resource",i.Span="span",i.Unscoped="unscoped",i))(a||{})},1497:(X,L,e)=>{"use strict";e.d(L,{$C:()=>x,BC:()=>v,M7:()=>c,NZ:()=>h,T1:()=>g,Yt:()=>m,rB:()=>C,t3:()=>p,vO:()=>b,yf:()=>u});var t=e(98579),n=e(2221),r=e(7906),a=e(89591),i=e(97898),y=e(68586);function c(I){const{nodes:A,edges:O}=l(I),[N,o]=(0,y.np)();for(const w of A)N.add(w);for(const w of O)o.add(w);return[N,o]}function l(I){const A=[],O=[],N=new t.U(I),o=d(N),w=(0,y.nO)(K=>{if(K>=I.length)return;const V=N.get(K);return{span:{...V},id:V.spanID,parentIds:V.parentSpanID?[V.parentSpanID]:[]}});for(let K=0;K<N.length;K++){const V=N.get(K),_=w[V.spanID].children.map(H=>{const j=w[H].span;return[j.startTime,j.startTime+j.duration]}),U=(0,y.et)(_),$=V.duration-U,k=(0,y.fy)(V.duration,o,$);A.push({[n.z.id]:V.spanID,[n.z.title]:V.serviceName??"",[n.z.subTitle]:V.operationName,[n.z.mainStat]:k.main,[n.z.secondaryStat]:k.secondary,[n.z.color]:$/o}),V.parentSpanID&&w[V.parentSpanID].span&&O.push({[n.z.id]:V.parentSpanID+"--"+V.spanID,[n.z.target]:V.spanID,[n.z.source]:V.parentSpanID})}return{nodes:A,edges:O}}function d(I){let A=0,O=1/0;for(let N=0;N<I.length;N++){const o=I.get(N);o.startTime<O&&(O=o.startTime),o.startTime+o.duration>A&&(A=o.startTime+o.duration)}return A-O}const f="traces_service_graph_request_server_seconds_sum",m="traces_service_graph_request_total",u="traces_service_graph_request_failed_total",h="traces_service_graph_request_server_seconds_bucket",C={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:[]},x={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:['status_code="STATUS_CODE_ERROR"']},b={expr:"histogram_quantile(.9, sum(rate(traces_spanmetrics_latency_bucket{}[$__range])) by (le))",params:[]},g='span_kind="SPAN_KIND_SERVER"',p=[f,m,u,h];function v(I,A){const O=P(I),N={},o={};return M(O[m],"total",m,N,o),M(O[f],"seconds",f,N,o),M(O[u],"failed",u,N,o),R(N,o,A)}function E(){function I(N,o){return new r.v({name:N,fields:o,meta:{preferredVisualisationType:"nodeGraph"}})}const A=I("Nodes",[{name:n.z.id,type:a.fS.string},{name:n.z.title,type:a.fS.string,config:{displayName:"Service name"}},{name:n.z.subTitle,type:a.fS.string,config:{displayName:"Service namespace"}},{name:n.z.mainStat,type:a.fS.number,config:{unit:"ms/r",displayName:"Average response time"}},{name:n.z.secondaryStat,type:a.fS.number,config:{unit:"r/sec",displayName:"Requests per second"}},{name:n.z.arc+"success",type:a.fS.number,config:{displayName:"Success",color:{fixedColor:"green",mode:i.S.Fixed}}},{name:n.z.arc+"failed",type:a.fS.number,config:{displayName:"Failed",color:{fixedColor:"red",mode:i.S.Fixed}}}]),O=I("Edges",[{name:n.z.id,type:a.fS.string},{name:n.z.source,type:a.fS.string},{name:"sourceName",type:a.fS.string},{name:"sourceNamespace",type:a.fS.string},{name:n.z.target,type:a.fS.string},{name:"targetName",type:a.fS.string},{name:"targetNamespace",type:a.fS.string},{name:n.z.mainStat,type:a.fS.number,config:{unit:"ms/r",displayName:"Average response time"}},{name:n.z.secondaryStat,type:a.fS.number,config:{unit:"r/sec",displayName:"Requests per second"}}]);return[A,O]}function P(I){return I[0].data.reduce((A,O)=>(A[O.refId]=new t.U(O),A),{})}var S=(I=>(I.sourceName="sourceName",I.sourceNamespace="sourceNamespace",I.targetName="targetName",I.targetNamespace="targetNamespace",I))(S||{});function M(I,A,O,N,o){if(!I)return;const w=`Value #${O}`;for(let K=0;K<I.length;K++){const V=I.get(K),_=V.server_service_namespace?`${V.server_service_namespace}/${V.server}`:V.server,U=V.client_service_namespace?`${V.client_service_namespace}/${V.client}`:V.client,$=`${U}_${_}`;o[$]?o[$][A]=(o[$][A]||0)+V[w]:o[$]={target:_,targetName:V.server,targetNamespace:V.server_service_namespace,source:U,sourceName:V.client,sourceNamespace:V.client_service_namespace,[A]:V[w]},N[_]?N[_][A]=(N[_][A]||0)+V[w]:N[_]={name:V.server,namespace:V.server_service_namespace,[A]:V[w]},N[U]||(N[U]={name:V.client,namespace:V.client_service_namespace,[A]:0})}}function R(I,A,O){const[N,o]=E();for(const w of Object.keys(I)){const K=I[w];N.add({[n.z.id]:w,[n.z.title]:K.name,[n.z.subTitle]:K.namespace,[n.z.mainStat]:K.total?K.seconds/K.total*1e3:Number.NaN,[n.z.secondaryStat]:K.total?Math.round(K.total*100)/100:Number.NaN,[n.z.arc+"success"]:K.total?(K.total-Math.min(K.failed||0,K.total))/K.total:1,[n.z.arc+"failed"]:K.total?Math.min(K.failed||0,K.total)/K.total:0})}for(const w of Object.keys(A)){const K=A[w];o.add({[n.z.id]:w,[n.z.source]:K.source,sourceName:K.sourceName,sourceNamespace:K.sourceNamespace,[n.z.target]:K.target,targetName:K.targetName,targetNamespace:K.targetNamespace,[n.z.mainStat]:K.total?K.seconds/K.total*1e3:Number.NaN,[n.z.secondaryStat]:K.total?Math.round(K.total*100)/100:Number.NaN})}return{nodes:N,edges:o}}},94776:(X,L,e)=>{"use strict";e.d(L,{IM:()=>g,Jk:()=>I,KZ:()=>N,RY:()=>f,g9:()=>p,n4:()=>A});var t=e(24368),n=e(7906),r=e(89591),a=e(53305),i=e(48706),y=e(94123),c=e(1838),l=e(1497);function d(U,$,k,H){const j=new n.v({fields:[{name:"Time",type:r.fS.time,config:{custom:{width:200}}},{name:"traceID",type:r.fS.string,config:{displayNameFromDS:"Trace ID",custom:{width:180},links:[{title:"Click to open trace ${__value.raw}",url:"",internal:{datasourceUid:$,datasourceName:k,query:{query:"${__value.raw}"}}}]}},{name:"Message",type:r.fS.string}],meta:{preferredVisualisationType:"table"}});if(!U||H.length===0)return j;const z=U.fields.find(F=>F.type===r.fS.time);for(let F of U.fields){let J=!1;if(F.type===r.fS.string){const Q=F.values;for(let Z=0;Z<Q.length;Z++){const ne=Q[Z];if(ne)for(let ee of H){const de=ne.match(ee);if(de){const Pe=de[1],ye=z?z.values[Z]:null;j.fields[0].values.push(ye),j.fields[1].values.push(Pe),j.fields[2].values.push(ne),J=!0}}}}if(J)break}return j}function f(U,$,k,H){return U.data.forEach((j,z)=>{const F=d(j,$,k,H);U.data[z]=F}),U}function m(U){if(U.stringValue)return U.stringValue;if(U.boolValue!==void 0)return!!U.boolValue;if(U.intValue!==void 0)return Number.parseInt(U.intValue,10);if(U.doubleValue)return Number.parseFloat(U.doubleValue);if(U.arrayValue){const $=[];for(const k of U.arrayValue.values)$.push(m(k));return $}return""}function u(U){const $=[];let k="OTLPResourceNoServiceName";if(!U)return{serviceName:k,serviceTags:$};for(const H of U.attributes)H.key===t.R9.SERVICE_NAME&&(k=H.value.stringValue||k),$.push({key:H.key,value:m(H.value)});return{serviceName:k,serviceTags:$}}function h(U){const $=[];if(U.attributes)for(const k of U.attributes)$.push({key:k.key,value:m(k.value)});return $}function C(U){let $;if(U.kind){const k=U.kind.toString().toLowerCase().split("_");$=k.length?k[k.length-1]:U.kind.toString()}return $}function x(U){const $=[];if(U.links)for(const k of U.links){const{traceId:H,spanId:j}=k,z=[];if(k.attributes)for(const F of k.attributes)z.push({key:F.key,value:m(F.value)});$.push({traceID:H,spanID:j,tags:z})}return $}function b(U){const $=[];if(U.events)for(const k of U.events){const H=[];if(k.attributes)for(const j of k.attributes)H.push({key:j.key,value:m(j.value)});$.push({fields:H,timestamp:k.timeUnixNano/1e6})}return $}function g(U,$=!1){const k=new n.v({fields:[{name:"traceID",type:r.fS.string},{name:"spanID",type:r.fS.string},{name:"parentSpanID",type:r.fS.string},{name:"operationName",type:r.fS.string},{name:"serviceName",type:r.fS.string},{name:"kind",type:r.fS.string},{name:"statusCode",type:r.fS.number},{name:"statusMessage",type:r.fS.string},{name:"instrumentationLibraryName",type:r.fS.string},{name:"instrumentationLibraryVersion",type:r.fS.string},{name:"traceState",type:r.fS.string},{name:"serviceTags",type:r.fS.other},{name:"startTime",type:r.fS.number},{name:"duration",type:r.fS.number},{name:"logs",type:r.fS.other},{name:"references",type:r.fS.other},{name:"tags",type:r.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const j of U){const{serviceName:z,serviceTags:F}=u(j.resource);for(const J of j.instrumentationLibrarySpans)for(const Q of J.spans)k.add({traceID:Q.traceId.length>16?Q.traceId.slice(16):Q.traceId,spanID:Q.spanId,parentSpanID:Q.parentSpanId||"",operationName:Q.name||"",serviceName:z,kind:C(Q),statusCode:Q.status?.code,statusMessage:Q.status?.message,instrumentationLibraryName:J.instrumentationLibrary?.name,instrumentationLibraryVersion:J.instrumentationLibrary?.version,traceState:Q.traceState,serviceTags:F,startTime:Q.startTimeUnixNano/1e6,duration:(Q.endTimeUnixNano-Q.startTimeUnixNano)/1e6,tags:h(Q),logs:b(Q),references:x(Q)})}}catch(j){return console.error(j),{error:{message:"JSON is not valid OpenTelemetry format: "+j},data:[]}}let H=[k];return $&&H.push(...(0,l.M7)(k)),{data:H}}function p(U){let $={batches:[]},k={};for(let H=0;H<U.length;H++){const j=U.get(H);k[j.serviceName]||(k[j.serviceName]=$.batches.length,$.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let z=k[j.serviceName];$.batches[z].resource.attributes.length===0&&($.batches[z].resource.attributes=E(j.serviceTags)),$.batches[z].instrumentationLibrarySpans[0].instrumentationLibrary||j.instrumentationLibraryName&&($.batches[z].instrumentationLibrarySpans[0].instrumentationLibrary={name:j.instrumentationLibraryName,version:j.instrumentationLibraryVersion?j.instrumentationLibraryVersion:""}),$.batches[z].instrumentationLibrarySpans[0].spans.push({traceId:j.traceID.padStart(32,"0"),spanId:j.spanID,parentSpanId:j.parentSpanID||"",traceState:j.traceState||"",name:j.operationName,kind:v(j.kind),startTimeUnixNano:j.startTime*1e6,endTimeUnixNano:(j.startTime+j.duration)*1e6,attributes:j.tags?E(j.tags):[],droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:S(j),events:M(j.logs),links:R(j.references)})}return $}function v(U){let $;if(U)switch(U){case"server":$="SPAN_KIND_SERVER";break;case"client":$="SPAN_KIND_CLIENT";break;case"producer":$="SPAN_KIND_PRODUCER";break;case"consumer":$="SPAN_KIND_CONSUMER";break;case"internal":$="SPAN_KIND_INTERNAL";break}return $}function E(U){return U.reduce(($,k)=>[...$,{key:k.key,value:P(k)}],[])}function P(U){if(typeof U.value=="string")return{stringValue:U.value};if(typeof U.value=="boolean")return{boolValue:U.value};if(typeof U.value=="number")return U.value%1===0?{intValue:U.value}:{doubleValue:U.value};if(typeof U.value=="object"&&Array.isArray(U.value)){const $=[];for(const k of U.value)$.push(P(k));return{arrayValue:{values:$}}}return{stringValue:U.value}}function S(U){let $;return U.statusCode!==void 0&&($={code:U.statusCode,message:U.statusMessage?U.statusMessage:""}),$}function M(U){if(!U||!U.length)return;let $=[];for(const k of U){let H={timeUnixNano:k.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:""};for(const j of k.fields)H.attributes.push({key:j.key,value:P(j)});$.push(H)}return $}function R(U){if(!U||!U.length)return;let $=[];for(const k of U){let H={traceId:k.traceID,spanId:k.spanID,attributes:[],droppedAttributesCount:0};if(k.tags?.length)for(const j of k.tags)H.attributes?.push({key:j.key,value:P(j)});$.push(H)}return $}function I(U,$=!1){const k=U.data[0];if(!k)return _;let H=[...U.data];return $&&H.push(...(0,l.M7)(k)),{...U,data:H}}function A(U,$){const k=new n.v({name:"Traces",refId:"traces",fields:[{name:"traceID",type:r.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:$.uid,datasourceName:$.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"traceService",type:r.fS.string,config:{displayNameFromDS:"Trace service"}},{name:"traceName",type:r.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:r.fS.time,config:{displayNameFromDS:"Start time"}},{name:"traceDuration",type:r.fS.number,config:{displayNameFromDS:"Duration",unit:"ms"}}],meta:{preferredVisualisationType:"table"}});if(!U?.length)return k;const H=U.sort((j,z)=>parseInt(z?.startTimeUnixNano,10)/1e6-parseInt(j?.startTimeUnixNano,10)/1e6).map(O);for(const j of H)k.add(j);return k}function O(U){return{traceID:U.traceID,startTime:parseInt(U.startTimeUnixNano,10)/1e6,traceDuration:U.durationMs,traceService:U.rootServiceName||"",traceName:U.rootTraceName||""}}function N(U,$,k){return k===c.Mt.Spans?w(U,$):o(U,$)}function o(U,$){const k=(0,a.at)({name:"Traces",refId:"traces",fields:[{name:"traceID",type:r.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:$.uid,datasourceName:$.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:r.fS.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceService",type:r.fS.string,config:{displayNameFromDS:"Service"}},{name:"traceName",type:r.fS.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:r.fS.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}},{name:"nested",type:r.fS.nestedFrames}],meta:{preferredVisualisationType:"table"}});return U?.length?(k.length=U.length,U.sort((H,j)=>parseInt(j?.startTimeUnixNano,10)/1e6-parseInt(H?.startTimeUnixNano,10)/1e6).forEach(H=>{const j=O(H);k.fields[0].values.push(j.traceID),k.fields[1].values.push(j.startTime),k.fields[2].values.push(j.traceService),k.fields[3].values.push(j.traceName),k.fields[4].values.push(j.traceDuration),H.spanSets?k.fields[5].values.push(H.spanSets.map(z=>K(H,z,$))):H.spanSet&&k.fields[5].values.push([K(H,H.spanSet,$)])}),[k]):[k]}function w(U,$){const k={};let H=!1;U.forEach(z=>z.spanSets?.forEach(F=>{F.attributes?.forEach(J=>{k[J.key]={name:J.key,type:r.fS.string,config:{displayNameFromDS:J.key}}}),F.spans.forEach(J=>{J.name&&(H=!0),J.attributes?.forEach(Q=>{k[Q.key]={name:Q.key,type:r.fS.string,config:{displayNameFromDS:Q.key}}})})}));const j=new n.v({name:"Spans",refId:"traces",fields:[{name:"traceIdHidden",type:r.fS.string,config:{custom:{hidden:!0}}},{name:"traceService",type:r.fS.string,config:{displayNameFromDS:"Trace Service",custom:{width:200}}},{name:"traceName",type:r.fS.string,config:{displayNameFromDS:"Trace Name",custom:{width:200}}},{name:"spanID",type:r.fS.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:$.uid,datasourceName:$.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:r.fS.time,config:{displayNameFromDS:"Start time"}},{name:"name",type:r.fS.string,config:{displayNameFromDS:"Name",custom:{hidden:!H}}},...Object.values(k).sort((z,F)=>z.name.localeCompare(F.name)),{name:"duration",type:r.fS.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});return U?.length?(U.sort((z,F)=>parseInt(F?.startTimeUnixNano,10)/1e6-parseInt(z?.startTimeUnixNano,10)/1e6).forEach(z=>{z.spanSets?.forEach(F=>{F.spans.forEach(J=>{j.add(V(J,F,z))})})}),[j]):[j]}const K=(U,$,k)=>{const H={};let j=!1;$.attributes?.map(J=>{H[J.key]={name:J.key,type:r.fS.string,config:{displayNameFromDS:J.key}}}),$.spans.forEach(J=>{J.name&&(j=!0),J.attributes?.forEach(Q=>{H[Q.key]={name:Q.key,type:r.fS.string,config:{displayNameFromDS:Q.key}}})});const z=new n.v({fields:[{name:"traceIdHidden",type:r.fS.string,config:{custom:{hidden:!0}}},{name:"spanID",type:r.fS.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:k.uid,datasourceName:k.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:r.fS.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:r.fS.string,config:{displayNameFromDS:"Name",custom:{hidden:!j}}},...Object.values(H).sort((J,Q)=>J.name.localeCompare(Q.name)),{name:"duration",type:r.fS.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}}),F=(0,i.j)();for(const J of z.fields)J.display=(0,y.U)({field:J,theme:F});return $.spans.forEach(J=>{z.add(V(J,$,U))}),z};function V(U,$,k){const H=parseInt(U.startTimeUnixNano,10)/1e6,j={traceIdHidden:k.traceID,traceService:k.rootServiceName||"",traceName:k.rootTraceName||"",spanID:U.spanID,time:H,duration:parseInt(U.durationNanos,10),name:U.name};let z=[];return $.attributes&&(z=z.concat($.attributes)),U.attributes&&(z=z.concat(U.attributes)),z.forEach(F=>{(F.value.boolValue||F.value.Value?.bool_value)&&(j[F.key]=F.value.boolValue||F.value.Value?.bool_value),(F.value.doubleValue||F.value.Value?.double_value)&&(j[F.key]=F.value.doubleValue||F.value.Value?.double_value),(F.value.intValue||F.value.Value?.int_value)&&(j[F.key]=F.value.intValue||F.value.Value?.int_value),(F.value.stringValue||F.value.Value?.string_value)&&(j[F.key]=F.value.stringValue||F.value.Value?.string_value)}),j}const _={data:[new n.v({fields:[{name:"trace",type:r.fS.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},66820:(X,L,e)=>{"use strict";e.d(L,{H:()=>f,m:()=>i});var t=e(86832),n=e.n(t),r=e(7906),a=e(89591);function i(u){const h=u.map(y),C=new r.v({fields:[{name:"traceID",type:a.fS.string},{name:"spanID",type:a.fS.string},{name:"parentSpanID",type:a.fS.string},{name:"operationName",type:a.fS.string},{name:"serviceName",type:a.fS.string},{name:"serviceTags",type:a.fS.other},{name:"startTime",type:a.fS.number},{name:"duration",type:a.fS.number},{name:"logs",type:a.fS.other},{name:"tags",type:a.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const x of h)C.add(x);return C}function y(u){const h={traceID:u.traceId,spanID:u.id,parentSpanID:u.parentId,operationName:u.name,serviceName:u.localEndpoint?.serviceName||u.remoteEndpoint?.serviceName||"unknown",serviceTags:l(u),startTime:u.timestamp/1e3,duration:u.duration/1e3,logs:u.annotations?.map(c)??[],tags:Object.keys(u.tags||{}).reduce((C,x)=>x==="error"?(C.push({key:"error",value:!0}),C.push({key:"errorValue",value:u.tags.error}),C):(C.push({key:x,value:u.tags[x]}),C),[])};return u.kind&&(h.tags=[{key:"kind",value:u.kind},...h.tags??[]]),u.shared&&(h.tags=[{key:"shared",value:u.shared},...h.tags??[]]),h}function c(u){return{timestamp:u.timestamp,fields:[{key:"annotation",value:u.value}]}}function l(u){const h=u.localEndpoint||u.remoteEndpoint;return h?[d("ipv4",h.ipv4),d("ipv6",h.ipv6),d("port",h.port),d("endpointType",u.localEndpoint?"local":"remote")].filter(t.identity):[]}function d(u,h){if(h)return{key:u,value:h}}const f=u=>{let h=[];for(let C=0;C<u.length;C++){const x=u.get(C);h.push({traceId:x.traceID,parentId:x.parentSpanID,name:x.operationName,id:x.spanID,timestamp:x.startTime*1e3,duration:x.duration*1e3,...m(x),annotations:x.logs.length?x.logs.map(b=>({timestamp:b.timestamp,value:b.fields[0].value})):void 0,tags:x.tags.length?x.tags.filter(b=>b.key!=="kind"&&b.key!=="endpointType"&&b.key!=="shared").reduce((b,g)=>g.key==="error"?{...b,[g.key]:x.tags.find(p=>p.key==="errorValue").value||""}:{...b,[g.key]:g.value},{}):void 0,kind:x.tags.find(b=>b.key==="kind")?.value,shared:x.tags.find(b=>b.key==="shared")?.value})}return h},m=u=>{const h=u.serviceTags.find(C=>C.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return u.serviceName!=="unknown"?{[h]:{serviceName:u.serviceName,ipv4:u.serviceTags.find(C=>C.key==="ipv4")?.value,ipv6:u.serviceTags.find(C=>C.key==="ipv6")?.value,port:u.serviceTags.find(C=>C.key==="port")?.value}}:void 0}},3:(X,L,e)=>{"use strict";e.d(L,{As:()=>t,LM:()=>r,kx:()=>n,wO:()=>a});var t=(i=>(i[i.AlphaAsc=1]="AlphaAsc",i[i.AlphaDesc=2]="AlphaDesc",i[i.Importance=3]="Importance",i[i.TimeAsc=4]="TimeAsc",i[i.TimeDesc=5]="TimeDesc",i))(t||{}),n=(i=>(i.Current="current",i.RecentChanges="changes",i))(n||{}),r=(i=>(i.Default="default",i.Custom="custom",i))(r||{}),a=(i=>(i.List="list",i.Stat="stat",i))(a||{})},50342:(X,L,e)=>{"use strict";e.d(L,{Gj:()=>n,Qm:()=>y});var t=e(99331);const n=1,r=2,a=3,i=(c,l,d,f)=>(0,t.O)(l+c*(d+f),6);function y(c,l,d,f,m){let u=1-l,h=d===n?u/(c-1):d===r?u/c:d===a?u/(c+1):0;(isNaN(h)||h===1/0)&&(h=0);let C=d===n?0:d===r?h/2:d===a?h:0,x=l/c,b=(0,t.O)(x,6);if(f==null)for(let g=0;g<c;g++)m(g,i(g,C,x,h),b);else m(f,i(f,C,x,h),b)}},14197:(X,L,e)=>{"use strict";e.d(L,{Pn:()=>r,kK:()=>i,lW:()=>y,zZ:()=>a});const t=10,n=4;function r(c,l,d,f,m,u){return c>=d&&c<=m&&l>=f&&l<=u}function a(c,l,d){let f;if(c.o.length&&(f=c.o.find(m=>m.sidx===l&&m.didx===d)),f==null&&c.q)for(let m=0;m<c.q.length&&(f=a(c.q[m],l,d),!f);m++);return f}function i(c,l){return c.x<=l.x+l.w&&c.x+c.w>=l.x&&c.y+c.h>=l.y&&c.y<=l.y+l.h}class y{constructor(l,d,f,m,u=0){this.x=l,this.y=d,this.w=f,this.h=m,this.l=u,this.o=[],this.q=null}split(){let l=this,d=l.x,f=l.y,m=l.w/2,u=l.h/2,h=l.l+1;l.q=[new y(d+m,f,m,u,h),new y(d,f,m,u,h),new y(d,f+u,m,u,h),new y(d+m,f+u,m,u,h)]}quads(l,d,f,m,u){let h=this,C=h.q,x=h.x+h.w/2,b=h.y+h.h/2,g=d<b,p=l<x,v=l+f>x,E=d+m>b;g&&v&&u(C[0]),p&&g&&u(C[1]),p&&E&&u(C[2]),v&&E&&u(C[3])}add(l){let d=this;if(d.q!=null)d.quads(l.x,l.y,l.w,l.h,f=>{f.add(l)});else{let f=d.o;if(f.push(l),f.length>t&&d.l<n){d.split();for(let m=0;m<f.length;m++){let u=f[m];d.quads(u.x,u.y,u.w,u.h,h=>{h.add(u)})}d.o.length=0}}}get(l,d,f,m,u){let h=this,C=h.o;for(let x=0;x<C.length;x++)u(C[x]);h.q!=null&&h.quads(l,d,f,m,x=>{x.get(l,d,f,m,u)})}clear(){this.o.length=0,this.q=null}}},2104:(X,L,e)=>{"use strict";e.d(L,{M:()=>f,l:()=>m});var t=e(86832),n=e.n(t),r=e(39953),a=e(64943),i=e(52366),y=e(24300),c=e(22785),l=e(4367),d=e(50820);class f extends r.PureComponent{constructor(){super(...arguments),this.renderComponent=(h,C)=>{const{options:x,fieldConfig:b}=this.props,{value:g,alignmentFactors:p,orientation:v,width:E,height:P,count:S}=h,{field:M,display:R,view:I,colIndex:A}=g,{openMenu:O,targetClassName:N}=C;let o;return I&&(0,t.isNumber)(A)&&(o=I.getFieldDisplayProcessor(A)),r.createElement(y.xf,{value:m(S,b.defaults,R),width:E,height:P,orientation:v,field:M,text:x.text,display:o,theme:d.config.theme2,itemSpacing:this.getItemSpacing(),displayMode:x.displayMode,onClick:O,className:N,alignmentFactors:S>1?p:void 0,showUnfilled:x.showUnfilled,valueDisplayMode:x.valueMode})},this.renderValue=h=>{const{value:C,orientation:x}=h,{hasLinks:b,getLinks:g}=C;return b&&g?r.createElement("div",{style:{width:"100%",display:x===a.wm.Vertical?"flex":"initial"}},r.createElement(c.V,{style:{height:"100%"},links:g},p=>this.renderComponent(h,p))):this.renderComponent(h,{})},this.getValues=()=>{const{data:h,options:C,replaceVariables:x,fieldConfig:b,timeZone:g}=this.props;return(0,i.nG)({fieldConfig:b,reduceOptions:C.reduceOptions,replaceVariables:x,theme:d.config.theme2,data:h.series,timeZone:g})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}render(){const{height:h,width:C,options:x,data:b,renderCounter:g}=this.props;return r.createElement(l.Q,{source:b,getAlignmentFactors:i.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:g,width:C,height:h,minVizWidth:x.minVizWidth,minVizHeight:x.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:x.orientation})}}function m(u,h,C){return u===1&&!h.displayName?{...C,title:void 0}:C}},45587:(X,L,e)=>{"use strict";e.r(L),e.d(L,{plugin:()=>P});var t=e(40530),n=e(34547),r=e(40723),a=e(86085),i=e(86609);const y=S=>(0,i.rD)(S),c=(S,M,R)=>{const I=(0,i.ZH)(S,M,R);if(M==="singlestat"&&R.angular){const A=R.angular.gauge;A&&(I.showThresholdMarkers=A.thresholdMarkers,I.showThresholdLabels=A.thresholdLabels)}return I};var l=e(39953),d=e(94123),f=e(52366),m=e(78031),u=e(22785),h=e(4367),C=e(50820),x=e(2104);class b extends l.PureComponent{constructor(){super(...arguments),this.renderComponent=(M,R)=>{const{options:I,fieldConfig:A}=this.props,{width:O,height:N,count:o,value:w}=M,{field:K,display:V}=w,{openMenu:_,targetClassName:U}=R;return l.createElement(m.a,{value:(0,x.l)(o,A.defaults,V),width:O,height:N,field:K,text:I.text,showThresholdLabels:I.showThresholdLabels,showThresholdMarkers:I.showThresholdMarkers,theme:C.config.theme2,onClick:_,className:U,orientation:I.orientation})},this.renderValue=M=>{const{value:R}=M,{getLinks:I,hasLinks:A}=R;return A&&I?l.createElement(u.V,{links:I,style:{flexGrow:1}},O=>this.renderComponent(M,O)):this.renderComponent(M,{})},this.getValues=()=>{const{data:M,options:R,replaceVariables:I,fieldConfig:A,timeZone:O}=this.props;for(let N of M.series)for(let o of N.fields)if(o.config.unit==="percent"||o.config.unit==="percentunit"){const w=o.config.min??0,K=o.config.max??(o.config.unit==="percent"?100:1);o.state=o.state??{},o.state.range={min:w,max:K,delta:K-w},o.display=(0,d.U)({field:o,theme:C.config.theme2})}return(0,f.nG)({fieldConfig:A,reduceOptions:R.reduceOptions,replaceVariables:I,theme:C.config.theme2,data:M.series,timeZone:O})}}render(){const{height:M,width:R,data:I,renderCounter:A,options:O}=this.props;return l.createElement(h.Q,{getValues:this.getValues,renderValue:this.renderValue,width:R,height:M,source:I,autoGrid:!0,renderCounter:A,orientation:O.orientation,minVizHeight:O.minVizHeight,minVizWidth:O.minVizWidth})}}const g={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0};var p=e(60695),v=e(43419);class E{getSuggestionsForData(M){const{dataSummary:R}=M;if(!R.hasData||!R.hasNumberField||R.numberFieldCount>=50)return;const I=M.getListAppender({name:v.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:p.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:A=>{A.options.reduceOptions.values&&(A.options.reduceOptions.limit=2)}}});R.hasStringField&&R.frameCount===1&&R.rowCountTotal<10?(I.append({name:v.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),I.append({name:v.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(I.append({name:v.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),I.append({name:v.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const P=new t.c(b).useFieldConfig({useCustomConfig:S=>{S.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(S=>{(0,a.j)(S),(0,a.h)(S),S.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:g.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:g.showThresholdMarkers}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:g.minVizWidth,showIf:M=>M.orientation===n.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:g.minVizHeight,showIf:M=>M.orientation===n.wm.Horizontal}),r.Z(S)}).setPanelChangeHandler(c).setSuggestionsSupplier(new E).setMigrationHandler(y)},98950:(X,L,e)=>{"use strict";e.d(L,{Cg:()=>r,EQ:()=>i,Er:()=>y,H:()=>a,bD:()=>n});var t=e(34547),n=(c=>(c.Point="point",c.Line="line",c.Polygon="polygon",c.Any="*any*",c))(n||{});const r=5;var a=(c=>(c.Left="left",c.Center="center",c.Right="right",c))(a||{}),i=(c=>(c.Top="top",c.Middle="middle",c.Bottom="bottom",c))(i||{});const y=Object.freeze({size:{fixed:r,min:2,max:15},color:{fixed:"dark-green"},opacity:.4,symbol:{mode:t.Q8.Fixed,fixed:"img/icons/marker/circle.svg"},textConfig:{fontSize:12,textAlign:"center",textBaseline:"middle",offsetX:0,offsetY:0},rotation:{fixed:0,mode:t.eK.Mod,min:-360,max:360}})},97791:(X,L,e)=>{"use strict";e.d(L,{Q:()=>a});var t=e(41407),n=e(39953),r=e(68303);const a=i=>(0,r.CB)(i)?n.createElement("a",{href:i,target:"_blank",className:(0,t.cx)("external-link"),rel:"noreferrer"},i):i},68303:(X,L,e)=>{"use strict";e.d(L,{B1:()=>l,CB:()=>x,FB:()=>h,gE:()=>u,n_:()=>f,sA:()=>m,uH:()=>C,vV:()=>y});var t=e(10693),n=e(4218),r=e(85256),a=e(55623),i=e(98950);function y(b,g,p,v){const E={};return v&&Object.keys(v).length?(E.color=(0,r.getColorDimension)(b,v.color??i.Er.color,p),E.size=(0,r.getScaledDimension)(b,v.size??i.Er.size),E.rotation=(0,r.getScalarDimension)(b,v.rotation??i.Er.rotation),v.text&&(v.text.field||v.text.fixed)&&(E.text=(0,r.getTextDimension)(b,v.text))):g.fields&&(g.fields.color&&(E.color=(0,r.getColorDimension)(b,g.config.color??i.Er.color,p)),g.fields.size&&(E.size=(0,r.getScaledDimension)(b,g.config.size??i.Er.size)),g.fields.text&&(E.text=(0,r.getTextDimension)(b,g.config.text)),g.fields.rotation&&(E.rotation=(0,r.getScalarDimension)(b,g.config.rotation??i.Er.rotation))),E}let c;function l(){return c||(c=[],d()),c}async function d(){const b=await(0,a.e)();for(let g of["maps","gazetteer"])b.listFiles(g).subscribe({next:p=>{p.forEach(v=>{if(v.name.endsWith(".geojson")){const E=`public/${g}/${v.name}`;c.push({value:E,label:E})}})}})}const f=(b,g,p)=>{const[v]=b.initMapView(g.view,void 0);return b.map=new t.Z({view:v,pixelRatio:1,layers:[],controls:[],target:p,interactions:(0,n.c)({mouseWheelZoom:!1})})},m=(b,g)=>{b.initControls(g.controls),b.forceUpdate()},u=(b,g,p)=>{b.panelContext&&b.panelContext.onInstanceStateChange&&b.panelContext.onInstanceStateChange({map:b.map,layers:g,selected:p,actions:b.actions})},h=b=>{let g=b.layers.length;for(;g<100;){const p=`Layer ${g++}`;if(!b.byName.has(p))return p}return`Layer ${Date.now()}`};function C(b,g,p,v){const E=b.getPixelFromCoordinate(p),P=b.getPixelFromCoordinate(v),S=Math.abs(E[0]-P[0]),M=Math.abs(E[1]-P[1]);return S>g||M>g}const x=b=>{try{return new URL(b).protocol.includes("http")}catch{return!1}}},61068:(X,L,e)=>{"use strict";e.d(L,{o:()=>r});var t=e(39953),n=e(80583);function r(a){return t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingBottom:"6px"}},t.createElement(n.P,{onClick:a.onClick,style:{position:"relative",top:"auto",right:"auto",marginRight:0}}))}},85136:(X,L,e)=>{"use strict";e.d(L,{N:()=>u,U:()=>f});var t=e(41407),n=e(77814),r=e.n(n),a=e(39953),i=e(63374),y=e(73254),c=e(82803),l=e(39285),d=e(30697);const f=40,m=(g,p)=>({mainGroup:(0,t.css)`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${p==="inactive"?.5:1};
  `,mainCircle:(0,t.css)`
    fill: ${g.components.panel.background};
  `,hoverCircle:(0,t.css)`
    opacity: 0.5;
    fill: transparent;
    stroke: ${g.colors.primary.text};
  `,text:(0,t.css)`
    fill: ${g.colors.text.primary};
    pointer-events: none;
  `,titleText:(0,t.css)`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${(0,i.Z)(g.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 140px;
  `,statsText:(0,t.css)`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:(0,t.css)`
    width: 200px;
    & span {
      background-color: ${(0,i.Z)(g.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `,clickTarget:(0,t.css)`
    fill: none;
    stroke: none;
    pointer-events: fill;
  `}),u=(0,a.memo)(function(p){const{node:v,onMouseEnter:E,onMouseLeave:P,onClick:S,hovering:M}=p,R=(0,c.l4)(),I=m(R,M),A=M==="active",O=v.nodeRadius?.values[v.dataFrameRowIndex]||f;return v.x!==void 0&&v.y!==void 0?a.createElement("g",{"data-node-id":v.id,className:I.mainGroup,"aria-label":`Node: ${v.title}`},a.createElement("circle",{"data-testid":`node-circle-${v.id}`,className:I.mainCircle,r:O,cx:v.x,cy:v.y}),A&&a.createElement("circle",{className:I.hoverCircle,r:O-3,cx:v.x,cy:v.y,strokeWidth:2}),a.createElement(C,{node:v}),a.createElement("g",{className:I.text,style:{pointerEvents:"none"}},a.createElement(h,{node:v,hovering:M}),a.createElement("foreignObject",{x:v.x-(A?100:70),y:v.y+O+5,width:A?"200":"140",height:"40"},a.createElement("div",{className:r()(I.titleText,A&&I.textHovering)},a.createElement("span",null,v.title),a.createElement("br",null),a.createElement("span",null,v.subTitle)))),a.createElement("rect",{"data-testid":`node-click-rect-${v.id}`,onMouseEnter:()=>{E(v.id)},onMouseLeave:()=>{P(v.id)},onClick:N=>{S(N,v)},className:I.clickTarget,x:v.x-O-5,y:v.y-O-5,width:O*2+10,height:O*2+50})):null});function h({node:g,hovering:p}){const v=(0,c.l4)(),E=m(v,p),P=p==="active";return g.x!==void 0&&g.y!==void 0?g.icon?a.createElement("foreignObject",{x:g.x-35,y:g.y-20,width:"70",height:"40"},a.createElement("div",{style:{width:70,overflow:"hidden",display:"flex",justifyContent:"center",marginTop:-4}},a.createElement(l.J,{"data-testid":`node-icon-${g.icon}`,name:g.icon,size:"xxxl"}))):a.createElement("foreignObject",{x:g.x-(P?100:35),y:g.y-15,width:P?"200":"70",height:"40"},a.createElement("div",{className:r()(E.statsText,P&&E.textHovering)},a.createElement("span",null,g.mainStat&&(0,d.Ew)(g.mainStat.config,g.mainStat.values[g.dataFrameRowIndex])),a.createElement("br",null),a.createElement("span",null,g.secondaryStat&&(0,d.Ew)(g.secondaryStat.config,g.secondaryStat.values[g.dataFrameRowIndex])))):null}function C(g){const{node:p}=g,v=p.arcSections.find(R=>R.values[p.dataFrameRowIndex]>=1),E=(0,c.l4)(),P=p.nodeRadius?.values[p.dataFrameRowIndex]||f;if(v)return a.createElement("circle",{fill:"none",stroke:E.visualization.getColorByName(v.config.color?.fixedColor||""),strokeWidth:2,r:P,cx:p.x,cy:p.y});const S=p.arcSections.filter(R=>R.values[p.dataFrameRowIndex]!==0);if(S.length===0)return a.createElement("circle",{fill:"none",stroke:p.color?b(p.color,p.dataFrameRowIndex,E):"gray",strokeWidth:2,r:P,cx:p.x,cy:p.y});const{elements:M}=S.reduce((R,I,A)=>{const O=I.config.color?.fixedColor||"",N=I.values[p.dataFrameRowIndex],o=a.createElement(x,{key:A,r:P,x:p.x,y:p.y,startPercent:R.percent,percent:N+R.percent>1?1-R.percent:N,color:E.visualization.getColorByName(O),strokeWidth:2});return R.elements.push(o),R.percent=R.percent+N,R},{elements:[],percent:0});return a.createElement(a.Fragment,null,M)}function x({r:g,x:p,y:v,startPercent:E,percent:P,color:S,strokeWidth:M=2}){const R=E+P,I=p+Math.sin(2*Math.PI*E)*g,A=v-Math.cos(2*Math.PI*E)*g,O=p+Math.sin(2*Math.PI*R)*g,N=v-Math.cos(2*Math.PI*R)*g,o=P>.5?"1":"0";return a.createElement("path",{fill:"none",d:`M ${I} ${A} A ${g} ${g} 0 ${o} 1 ${O} ${N}`,stroke:S,strokeWidth:M})}function b(g,p,v){return g.config.color?(0,y.fD)(g).getCalculator(g,v)(0,g.values[p]):g.values[p]}},30697:(X,L,e)=>{"use strict";e.d(L,{E_:()=>N,Ee:()=>R,Ew:()=>g,F:()=>c,HB:()=>f,MP:()=>A,Tz:()=>M,dM:()=>y,lr:()=>l,uX:()=>O});var t=e(76892),n=e(2221),r=e(89591),a=e(97898),i=e(85136);function y(o,w,K){const V=o.x2-o.x1,_=o.y2-o.y1,U=Math.sqrt(V*V+_*_),$=(o.x2-o.x1)/U,k=(o.y2-o.y1)/U;return{x1:o.x1+$*(w+5),y1:o.y1+k*(w+5),x2:o.x2-$*(K+5),y2:o.y2-k*(K+5)}}function c(o){const w={...o,fields:o.fields.map(V=>({...V,name:V.name.toLowerCase()}))},K=new t.N(w);return{id:K.getFieldByName(n.z.id.toLowerCase()),title:K.getFieldByName(n.z.title.toLowerCase()),subTitle:K.getFieldByName(n.z.subTitle.toLowerCase()),mainStat:K.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:K.getFieldByName(n.z.secondaryStat.toLowerCase()),arc:d(o,n.z.arc),details:d(o,n.z.detail),color:K.getFieldByName(n.z.color),icon:K.getFieldByName(n.z.icon),nodeRadius:K.getFieldByName(n.z.nodeRadius.toLowerCase())}}function l(o){const w={...o,fields:o.fields.map(V=>({...V,name:V.name.toLowerCase()}))},K=new t.N(w);return{id:K.getFieldByName(n.z.id.toLowerCase()),source:K.getFieldByName(n.z.source.toLowerCase()),target:K.getFieldByName(n.z.target.toLowerCase()),mainStat:K.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:K.getFieldByName(n.z.secondaryStat.toLowerCase()),details:d(o,n.z.detail.toLowerCase())}}function d(o,w){return o.fields.filter(K=>K.name.match(new RegExp("^"+w)))}function f(o,w){if(!(w||o))return{nodes:[],edges:[]};if(o){const K=c(o);if(!K.id)throw new Error("id field is required for nodes data frame.");const V={};for(let U=0;U<K.id.values.length;U++){const $=K.id.values[U];V[$]=b($,K,U)}let _=w?m(w,l(w),V):[];for(const U of _)V[U.target].incoming++;return{nodes:Object.values(V),edges:_,legend:K.arc.map(U=>({color:U.config.color?.fixedColor??"",name:U.config.displayName||U.name}))}}else{w=w;const K={},V=l(w);for(let $=0;$<w.length;$++){const{source:k,target:H}=C(V,$);K[H.id]=K[H.id]||H,K[k.id]=K[k.id]||k,u(V.mainStat)&&(K[H.id].mainStatNumeric=(K[H.id].mainStatNumeric??0)+V.mainStat.values[$]),u(V.secondaryStat)&&(K[H.id].secondaryStatNumeric=(K[H.id].secondaryStatNumeric??0)+V.secondaryStat.values[$]),K[H.id].incoming++}let _=m(w,V,K);return{nodes:h(K,V),edges:_}}}function m(o,w,K){if(!w.id)throw new Error("id field is required for edges data frame.");return w.id.values.map((V,_)=>{const U=w.target?.values[_],$=w.source?.values[_],k=K[$],H=K[U];return{id:V,dataFrameRowIndex:_,source:$,target:U,sourceNodeRadius:k.nodeRadius?k.nodeRadius.values[k.dataFrameRowIndex]:i.U,targetNodeRadius:H.nodeRadius?H.nodeRadius.values[H.dataFrameRowIndex]:i.U,mainStat:w.mainStat?g(w.mainStat.config,w.mainStat.values[_]):"",secondaryStat:w.secondaryStat?g(w.secondaryStat.config,w.secondaryStat.values[_]):""}})}function u(o){return o&&o.type===r.fS.number}function h(o,w){const K=[],V=[],_=u(w.secondaryStat)?{...w.secondaryStat,values:K}:void 0,U=u(w.mainStat)?{...w.mainStat,values:V}:void 0;return Object.values(o).map(($,k)=>{if(U||_){const H={...$};return U&&(H.mainStat=U,V.push($.mainStatNumeric),H.dataFrameRowIndex=k),_&&(H.secondaryStat=_,K.push($.secondaryStatNumeric),H.dataFrameRowIndex=k),H}return $})}function C(o,w){const K=o.target?.values[w],V=o.source?.values[w];return{target:x(K,w),source:x(V,w)}}function x(o,w){return{id:o,title:o,subTitle:"",dataFrameRowIndex:w,incoming:0,arcSections:[]}}function b(o,w,K){return{id:o,title:w.title?.values[K]||"",subTitle:w.subTitle?.values[K]||"",dataFrameRowIndex:K,incoming:0,mainStat:w.mainStat,secondaryStat:w.secondaryStat,arcSections:w.arc,color:w.color,icon:w.icon?.values[K]||"",nodeRadius:w.nodeRadius}}function g(o,w){if(typeof w=="string")return w;{const K=o.decimals||2;return Number.isFinite(w)?w.toFixed(K)+(o.unit?" "+o.unit:""):""}}function p(o){const w=E();for(let K=0;K<o;K++)w.add(v(K));return w}function v(o){return{id:o.toString(),title:`service:${o}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5,icon:"database",noderadius:40}}function E(){const o={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:[],type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}},[NodeGraphDataFrameFieldNames.icon]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.nodeRadius]:{values:[],type:FieldType.number}};return new MutableDataFrame({name:"nodes",fields:Object.keys(o).map(w=>({...o[w],name:w}))})}function P(o){const w=S();for(const K of o)w.add({id:K.source+"--"+K.target,...K});return w}function S(){const o={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(o).map(w=>({...o[w],name:w}))})}function M(o){if(o.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const w=o.reduce((_,U)=>(U.x>_.right&&(_.right=U.x),U.x<_.left&&(_.left=U.x),U.y>_.bottom&&(_.bottom=U.y),U.y<_.top&&(_.top=U.y),_),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),K=w.top+(w.bottom-w.top)/2,V=w.left+(w.right-w.left)/2;return{...w,center:{x:V,y:K}}}function R(o,w){let K=o.filter(V=>!!(V.meta?.preferredVisualisationType==="nodeGraph"||V.name==="nodes"||V.name==="edges"||V.refId==="nodes"||V.refId==="edges"||new t.N(V).getFieldByName(n.z.id)));return w&&(K=I(K,w)),K}const I=(o,w)=>o.map(K=>{if(new t.N(K).getFieldByName(n.z.source.toLowerCase())){if(w?.edges?.mainStatUnit){const _=K.fields.find(U=>U.name.toLowerCase()===n.z.mainStat);_&&(_.config={..._.config,unit:w.edges.mainStatUnit})}if(w?.edges?.secondaryStatUnit){const _=K.fields.find(U=>U.name.toLowerCase()===n.z.secondaryStat);_&&(_.config={..._.config,unit:w.edges.secondaryStatUnit})}}else{if(w?.nodes?.mainStatUnit){const _=K.fields.find(U=>U.name.toLowerCase()===n.z.mainStat);_&&(_.config={..._.config,unit:w.nodes.mainStatUnit})}if(w?.nodes?.secondaryStatUnit){const _=K.fields.find(U=>U.name.toLowerCase()===n.z.secondaryStat);_&&(_.config={..._.config,unit:w.nodes.secondaryStatUnit})}if(w?.nodes?.arcs?.length)for(const _ of w.nodes.arcs){const U=K.fields.find($=>$.name.toLowerCase()===_.field);U&&_.color&&(U.config={...U.config,color:{fixedColor:_.color,mode:a.S.Fixed}})}}return K}),A=(o,w,K)=>{const V=w.find(_=>_.id===K);return V?[...new Set(o.filter(_=>V.source===_.id||V.target===_.id).map(_=>_.id))]:[]},O=(o,w,K)=>{const V=o.find(_=>_.id===K);if(V){const _=w.filter(U=>U.source===V.id||U.target===V.id);return[...new Set(_.flatMap(U=>o.filter($=>U.source===$.id||U.target===$.id).map($=>$.id)))]}return[]},N=o=>o.reduce((w,K)=>(K.fields.filter(_=>_.name==="source").length?w.edges.push(K):w.nodes.push(K),w),{edges:[],nodes:[]})},86085:(X,L,e)=>{"use strict";e.d(L,{h:()=>c,j:()=>y});var t=e(18985),n=e(53470),r=e(69330),a=e(55705),i=e(34547);function y(l,d=!0){const f=["Value options"];l.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:f,defaultValue:!1}),l.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:f,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:m=>m.reduceOptions.values===!0}),l.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:f,editor:t.S.get("stats-picker").editor,defaultValue:[n.gz.lastNotNull],showIf:m=>m.reduceOptions.values===!1}),d&&l.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:f,settings:{allowCustomValue:!0,options:[],getOptions:async m=>{const u=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(m&&m.data)for(const h of m.data)for(const C of h.fields){const x=(0,r.CZ)(C,h,m.data),b=`/^${(0,a.GE)(x)}$/`;u.push({value:b,label:x})}return Promise.resolve(u)}},defaultValue:""})}function c(l,d){l.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:d,settings:{options:[{value:i.wm.Auto,label:"Auto"},{value:i.wm.Horizontal,label:"Horizontal"},{value:i.wm.Vertical,label:"Vertical"}]},defaultValue:i.wm.Auto})}},88294:(X,L,e)=>{"use strict";e.r(L),e.d(L,{plugin:()=>P});var t=e(40530),n=e(34547),r=e(40723),a=e(86609),i=e(97898);const y=(S,M,R)=>{const I=(0,a.ZH)(S,M,R);if(R.angular&&(M==="singlestat"||M==="grafana-singlestat-panel")){const A=R.angular;if(I.graphMode=n.IG.None,A.sparkline&&A.sparkline.show&&(I.graphMode=n.IG.Area),A.colorBackground)I.colorMode=n.pc.Background;else if(A.colorValue)I.colorMode=n.pc.Value;else if(I.colorMode=n.pc.None,A.sparkline?.lineColor&&I.graphMode===n.IG.Area){const O=S.fieldConfig??{};O.defaults.color={mode:i.S.Fixed,fixedColor:A.sparkline.lineColor},S.fieldConfig=O}A.valueName==="name"&&(I.textMode=n.jG.Name)}return I};var c=e(86832),l=e(39953),d=e(89591),f=e(52366),m=e(52716),u=e(26753),h=e(22785),C=e(4367),x=e(50820);class b extends l.PureComponent{constructor(){super(...arguments),this.renderComponent=(M,R)=>{const{timeRange:I,options:A}=this.props,{value:O,alignmentFactors:N,width:o,height:w,count:K,orientation:V}=M,{openMenu:_,targetClassName:U}=R;let $=O.sparkline;return $&&($.timeRange=I),l.createElement(u.w6,{value:O.display,count:K,sparkline:$,colorMode:A.colorMode,graphMode:A.graphMode,justifyMode:A.justifyMode,textMode:this.getTextMode(),alignmentFactors:N,parentOrientation:V,text:A.text,width:o,height:w,theme:x.config.theme2,onClick:_,className:U})},this.renderValue=M=>{const{value:R}=M,{getLinks:I,hasLinks:A}=R;return A&&I?l.createElement(h.V,{links:I},O=>this.renderComponent(M,O)):this.renderComponent(M,{})},this.getValues=()=>{const{data:M,options:R,replaceVariables:I,fieldConfig:A,timeZone:O}=this.props;let N;for(let o of M.series)for(let w of o.fields){let{config:K}=w;if(w.type===d.fS.number){if(w.state?.range)continue;!N&&(!(0,c.isNumber)(K.min)||!(0,c.isNumber)(K.max))&&(N=(0,m.Xu)(M.series));const V=K.min??N.min,_=K.max??N.max;w.state=w.state??{},w.state.range={min:V,max:_,delta:_-V}}}return(0,f.nG)({fieldConfig:A,reduceOptions:R.reduceOptions,replaceVariables:I,theme:x.config.theme2,data:M.series,sparkline:R.graphMode!==n.IG.None,timeZone:O})}}getTextMode(){const{options:M,fieldConfig:R,title:I}=this.props;return M.textMode===n.jG.Auto&&(R.defaults.displayName||!I)?n.jG.ValueAndName:M.textMode}render(){const{height:M,options:R,width:I,data:A,renderCounter:O}=this.props;return l.createElement(C.Q,{getValues:this.getValues,getAlignmentFactors:f.sg,renderValue:this.renderValue,width:I,height:M,source:A,itemSpacing:3,renderCounter:O,autoGrid:!0,orientation:R.orientation})}}var g=e(86085);const p={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,textMode:n.jG.Auto};var v=e(43419);class E{getSuggestionsForData(M){const{dataSummary:R}=M;if(!R.hasData)return;const I=M.getListAppender({name:v.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:A=>{A.options.reduceOptions.values&&(A.options.reduceOptions.limit=1)}}});R.hasStringField&&R.hasNumberField&&R.frameCount===1&&R.rowCountTotal<10&&(I.append({name:v.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),I.append({name:v.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.Background}})),R.stringFieldCount===1&&R.frameCount===1&&R.rowCountTotal<10&&R.fieldCount===1&&I.append({name:v.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.None}}),R.hasNumberField&&R.hasTimeField&&(I.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),I.append({name:v.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.IG.None,colorMode:n.pc.Background}}))}}const P=new t.c(b).useFieldConfig().setPanelOptions(S=>{const M=["Stat styles"];(0,g.j)(S),(0,g.h)(S,M),r.Z(S),S.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:M,settings:{options:[{value:n.jG.Auto,label:"Auto"},{value:n.jG.Value,label:"Value"},{value:n.jG.ValueAndName,label:"Value and name"},{value:n.jG.Name,label:"Name"},{value:n.jG.None,label:"None"}]},defaultValue:p.textMode}),S.addSelect({path:"colorMode",name:"Color mode",defaultValue:n.pc.Value,category:M,settings:{options:[{value:n.pc.None,label:"None"},{value:n.pc.Value,label:"Value"},{value:n.pc.Background,label:"Background Gradient"},{value:n.pc.BackgroundSolid,label:"Background Solid"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:M,defaultValue:p.graphMode,settings:{options:[{value:n.IG.None,label:"None"},{value:n.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:p.justifyMode,category:M,settings:{options:[{value:n.ap.Auto,label:"Auto"},{value:n.ap.Center,label:"Center"}]}})}).setNoPadding().setPanelChangeHandler(y).setSuggestionsSupplier(new E).setMigrationHandler(a.rD)},46350:(X,L,e)=>{"use strict";e.d(L,{c:()=>i});var t=e(41407),n=e(39953),r=e(82803);const a=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],i=()=>{const c=(0,r.wW)(y);return n.createElement("div",{className:c.container},n.createElement("h1",{className:c.title},"Welcome to Grafana"),n.createElement("div",{className:c.help},n.createElement("h3",{className:c.helpText},"Need help?"),n.createElement("div",{className:c.helpLinks},a.map((l,d)=>n.createElement("a",{key:`${l.label}-${d}`,className:c.helpLink,href:`${l.href}?utm_source=grafana_gettingstarted`},l.label)))))},y=c=>({container:(0,t.css)`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${c.spacing(3)};

      ${c.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${c.breakpoints.down("sm")} {
        padding: 0 ${c.spacing(1)};
      }
    `,title:(0,t.css)`
      margin-bottom: 0;

      ${c.breakpoints.down("lg")} {
        margin-bottom: ${c.spacing(1)};
      }

      ${c.breakpoints.down("md")} {
        font-size: ${c.typography.h2.fontSize};
      }
      ${c.breakpoints.down("sm")} {
        font-size: ${c.typography.h3.fontSize};
      }
    `,help:(0,t.css)`
      display: flex;
      align-items: baseline;
    `,helpText:(0,t.css)`
      margin-right: ${c.spacing(2)};
      margin-bottom: 0;

      ${c.breakpoints.down("md")} {
        font-size: ${c.typography.h4.fontSize};
      }

      ${c.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:(0,t.css)`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:(0,t.css)`
      margin-right: ${c.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${c.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `})},74600:(X,L,e)=>{"use strict";e.d(L,{PQ:()=>r,WI:()=>i,h:()=>n,y0:()=>a});var t=e(17174);let n;function r(y){n=y}function a(){return!n||!n.getState?{templating:{...t.qM,lastKey:"key"}}:n.getState()}function i(y){if(!(!n||!n.getState))return n.dispatch(y)}},41516:()=>{"use strict"},70148:()=>{"use strict"},47041:()=>{"use strict"},89037:()=>{"use strict"},73431:(X,L,e)=>{"use strict";e.d(L,{Dn:()=>S,Eb:()=>v,GL:()=>c,QI:()=>p,Qt:()=>g,VJ:()=>P,Wj:()=>f,Xw:()=>d,Yr:()=>N,_B:()=>m,_z:()=>C,hS:()=>u,nq:()=>i,p8:()=>x,pO:()=>l,xF:()=>O,xt:()=>y});var t=e(71054),n=e(45276);const r=(0,t.X)("ds-request-response"),a=(0,t.X)("ds-request-error"),i=(0,t.X)("template-variable-value-updated"),y=(0,t.X)("graph-click"),c=(0,t.X)("threshold-changed");class l extends n.m{}l.type="panel-queries-changed";class d extends n.m{}d.type="panel-transformations-changed";class f extends n.m{}f.type="panels-options-changed";class m extends n.m{}m.type="dashboard-panels-changed";class u extends n.m{}u.type="dashboard-meta-changed";class h extends n.m{}h.type="panel-directive-ready";class C extends n.m{}C.type="render";class x extends n.R{}x.type="zoom-out";var b=(o=>(o[o.Left=-1]="Left",o[o.Right=1]="Right",o))(b||{});class g extends n.R{}g.type="shift-time";class p extends n.R{}p.type="absolute-time";class v extends n.R{}v.type="remove-panel";class E extends n.R{}E.type="show-modal";class P extends n.R{}P.type="show-confirm-modal";class S extends n.R{}S.type="show-react-modal";class M extends n.m{}M.type="hide-modal";class R extends n.m{}R.type="dashboard-saved";class I extends n.R{}I.type="annotation-query-started";class A extends n.R{}A.type="annotation-query-finished";class O extends n.R{}O.type="panel-edit-started";class N extends n.R{}N.type="panel-edit-finished"},65235:()=>{"use strict"},21527:(X,L,e)=>{"use strict";e.d(L,{AccessControlAction:()=>_,AppNotificationSeverity:()=>M,AppNotificationTimeout:()=>R,CoreEvents:()=>U,DashboardInitPhase:()=>i,KioskMode:()=>y,PermissionLevelString:()=>d,SearchQueryType:()=>f,ServiceAccountStateFilter:()=>v,createAsyncThunk:()=>o.hg,useDispatch:()=>o.I0,useSelector:()=>o.v9});var t=e(41516),n=e(11239),r=e(65235),a=($=>($.Home="home-dashboard",$.New="new-dashboard",$.Normal="normal-dashboard",$.Path="path-dashboard",$.Scripted="scripted-dashboard",$.Public="public-dashboard",$.Embedded="embedded-dashboard",$))(a||{}),i=($=>($.NotStarted="Not started",$.Fetching="Fetching",$.Services="Services",$.Failed="Failed",$.Completed="Completed",$))(i||{}),y=($=>($.TV="tv",$.Full="full",$))(y||{}),c=($=>($[$.Admin=4]="Admin",$[$.Editor=2]="Editor",$[$.Member=0]="Member",$[$.Viewer=1]="Viewer",$))(c||{}),l=($=>($[$.View=1]="View",$[$.Edit=2]="Edit",$[$.Admin=4]="Admin",$))(l||{}),d=($=>($.View="View",$.Edit="Edit",$.Admin="Admin",$))(d||{}),f=($=>($.Folder="dash-folder",$.Dashboard="dash-db",$.AlertFolder="dash-folder-alerting",$))(f||{}),m=($=>($[$.Query=1]="Query",$[$.Admin=2]="Admin",$))(m||{}),u=($=>($.Team="Team",$.User="User",$.Viewer="Viewer",$.Editor="Editor",$))(u||{});const h=[{value:1,label:"Query",description:"Can query data source."}],C=[{value:"Team",label:"Team"},{value:"User",label:"User"},{value:"Viewer",label:"Everyone With Viewer Role"},{value:"Editor",label:"Everyone With Editor Role"}],x=[{value:1,label:"View",description:"Can view dashboards."},{value:2,label:"Edit",description:"Can add, edit and delete dashboards."},{value:4,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}],b=[{value:0,label:"Member",description:"Is team member"},{value:4,label:"Admin",description:"Can add/remove permissions, members and delete team."}];var g=e(70148),p=e(69471),v=($=>($.All="All",$.WithExpiredTokens="WithExpiredTokens",$.Disabled="Disabled",$))(v||{}),E=e(89037),P=e(61985),S=e(67190),M=($=>($.Success="success",$.Warning="warning",$.Error="error",$.Info="info",$))(M||{}),R=($=>($[$.Success=3e3]="Success",$[$.Warning=5e3]="Warning",$[$.Error=7e3]="Error",$))(R||{});const I={success:3e3,warning:5e3,error:7e3,info:3e3},A=null;var O=($=>($.table="table",$.raw="raw",$))(O||{});const N=null;var o=e(28804),w=e(89103),K=e(47041),V=e(91779),_=($=>($.UsersRead="users:read",$.UsersWrite="users:write",$.UsersAuthTokenList="users.authtoken:read",$.UsersAuthTokenUpdate="users.authtoken:write",$.UsersPasswordUpdate="users.password:write",$.UsersDelete="users:delete",$.UsersCreate="users:create",$.UsersEnable="users:enable",$.UsersDisable="users:disable",$.UsersPermissionsUpdate="users.permissions:write",$.UsersLogout="users:logout",$.UsersQuotasList="users.quotas:read",$.UsersQuotasUpdate="users.quotas:write",$.ServiceAccountsRead="serviceaccounts:read",$.ServiceAccountsCreate="serviceaccounts:create",$.ServiceAccountsWrite="serviceaccounts:write",$.ServiceAccountsDelete="serviceaccounts:delete",$.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",$.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",$.OrgsRead="orgs:read",$.OrgsPreferencesRead="orgs.preferences:read",$.OrgsWrite="orgs:write",$.OrgsPreferencesWrite="orgs.preferences:write",$.OrgsCreate="orgs:create",$.OrgsDelete="orgs:delete",$.OrgUsersRead="org.users:read",$.OrgUsersAdd="org.users:add",$.OrgUsersRemove="org.users:remove",$.OrgUsersWrite="org.users:write",$.LDAPUsersRead="ldap.user:read",$.LDAPUsersSync="ldap.user:sync",$.LDAPStatusRead="ldap.status:read",$.DataSourcesExplore="datasources:explore",$.DataSourcesRead="datasources:read",$.DataSourcesCreate="datasources:create",$.DataSourcesWrite="datasources:write",$.DataSourcesDelete="datasources:delete",$.DataSourcesPermissionsRead="datasources.permissions:read",$.DataSourcesCachingRead="datasources.caching:read",$.DataSourcesInsightsRead="datasources.insights:read",$.ActionServerStatsRead="server.stats:read",$.ActionTeamsCreate="teams:create",$.ActionTeamsDelete="teams:delete",$.ActionTeamsRead="teams:read",$.ActionTeamsWrite="teams:write",$.ActionTeamsPermissionsRead="teams.permissions:read",$.ActionTeamsPermissionsWrite="teams.permissions:write",$.ActionRolesList="roles:read",$.ActionTeamsRolesList="teams.roles:read",$.ActionTeamsRolesAdd="teams.roles:add",$.ActionTeamsRolesRemove="teams.roles:remove",$.ActionUserRolesList="users.roles:read",$.ActionUserRolesAdd="users.roles:add",$.ActionUserRolesRemove="users.roles:remove",$.DashboardsRead="dashboards:read",$.DashboardsWrite="dashboards:write",$.DashboardsDelete="dashboards:delete",$.DashboardsCreate="dashboards:create",$.DashboardsPermissionsRead="dashboards.permissions:read",$.DashboardsPermissionsWrite="dashboards.permissions:write",$.DashboardsPublicWrite="dashboards.public:write",$.FoldersRead="folders:read",$.FoldersWrite="folders:write",$.FoldersDelete="folders:delete",$.FoldersCreate="folders:create",$.FoldersPermissionsRead="folders.permissions:read",$.FoldersPermissionsWrite="folders.permissions:write",$.ActionSupportBundlesCreate="support.bundles:create",$.ActionSupportBundlesRead="support.bundles:read",$.ActionSupportBundlesDelete="support.bundles:delete",$.AlertingRuleCreate="alert.rules:create",$.AlertingRuleRead="alert.rules:read",$.AlertingRuleUpdate="alert.rules:write",$.AlertingRuleDelete="alert.rules:delete",$.AlertingInstanceCreate="alert.instances:create",$.AlertingInstanceUpdate="alert.instances:write",$.AlertingInstanceRead="alert.instances:read",$.AlertingNotificationsRead="alert.notifications:read",$.AlertingNotificationsWrite="alert.notifications:write",$.AlertingRuleExternalWrite="alert.rules.external:write",$.AlertingRuleExternalRead="alert.rules.external:read",$.AlertingInstancesExternalWrite="alert.instances.external:write",$.AlertingInstancesExternalRead="alert.instances.external:read",$.AlertingNotificationsExternalWrite="alert.notifications.external:write",$.AlertingNotificationsExternalRead="alert.notifications.external:read",$.AlertingProvisioningReadSecrets="alert.provisioning.secrets:read",$.AlertingProvisioningRead="alert.provisioning:read",$.AlertingProvisioningWrite="alert.provisioning:write",$.ActionAPIKeysRead="apikeys:read",$.ActionAPIKeysCreate="apikeys:create",$.ActionAPIKeysDelete="apikeys:delete",$.PluginsInstall="plugins:install",$.PluginsWrite="plugins:write",$.SettingsRead="settings:read",$.SettingsWrite="settings:write",$))(_||{}),U=e(73431)},89103:()=>{"use strict"},11239:()=>{"use strict"},67190:()=>{"use strict"},61985:()=>{"use strict"},91779:()=>{"use strict"},28804:(X,L,e)=>{"use strict";e.d(L,{I0:()=>r,hg:()=>i,v9:()=>a});var t=e(77960),n=e(89772);const r=n.useDispatch,a=n.useSelector,i=(c,l,d)=>(0,t.hg)(c,l,d),y=null},43419:(X,L,e)=>{"use strict";e.d(L,{y:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n.FlameGraph="Flame graph",n))(t||{})},17330:(X,L,e)=>{"use strict";e.d(L,{ED:()=>y,T8:()=>l,bj:()=>n,pz:()=>c,x_:()=>t});var t=(f=>(f.Firing="firing",f.Inactive="inactive",f.Pending="pending",f))(t||{}),n=(f=>(f.Normal="Normal",f.Alerting="Alerting",f.Pending="Pending",f.NoData="NoData",f.Error="Error",f))(n||{});function r(f){return Object.values(t).includes(f)}function a(f){return Object.values(n).some(m=>m===f)}function i(f){return f!==null&&typeof f<"u"&&!Object.values(t).includes(f)}function y(f){return i(f)?f.split(" ")[0]:f}var c=(f=>(f.Alerting="alerting",f.Recording="recording",f))(c||{}),l=(f=>(f.Cortex="Cortex",f.Mimir="Mimir",f.Prometheus="Prometheus",f.Thanos="Thanos",f))(l||{}),d=(f=>(f.Alerting="Alerting",f.NoData="NoData",f.KeepLastState="KeepLastState",f.OK="OK",f.Error="Error",f))(d||{})},69471:()=>{"use strict"},23932:X=>{const L="    ";function e(a){let i="";return a&&Object.keys(a).forEach(function(y){i+=y+":"+a[y]+";"}),i}function t(a){function i(c){return'class="'+c+'"'}function y(c){return'style="'+e(a["."+c])+'"'}return a?y:i}function n(a){return a===null?"null":Array.isArray(a)?"array":typeof a=="string"&&/^https?:/.test(a)?"link":typeof a=="object"&&typeof a.toISOString=="function"?"date":typeof a}function r(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}X.exports=function(a,i){let y="";const c=t(i);let l=function(f,m,u,h){if(!f.length)return m+" "+u;let C=m+`
`;return y+=L,f.forEach(function(x,b){C+=y+h(x)+(b<f.length-1?",":"")+`
`}),y=y.slice(0,-L.length),C+y+u};function d(f){if(f===void 0)return"";switch(n(f)){case"boolean":return"<span "+c("json-markup-bool")+">"+f+"</span>";case"number":return"<span "+c("json-markup-number")+">"+f+"</span>";case"date":return'<span class="json-markup-string">"'+r(f.toISOString())+'"</span>';case"null":return"<span "+c("json-markup-null")+">null</span>";case"string":return"<span "+c("json-markup-string")+'>"'+r(f.replace(/\n/g,`
`+y))+'"</span>';case"link":return"<span "+c("json-markup-string")+'>"<a href="'+encodeURI(f)+'">'+r(f)+'</a>"</span>';case"array":return l(f,"[","]",d);case"object":const m=Object.keys(f).filter(function(u){return f[u]!==void 0});return l(m,"{","}",function(u){return"<span "+c("json-markup-key")+'>"'+r(u)+'":</span> '+d(f[u])})}return""}return"<div "+c("json-markup")+">"+d(a)+"</div>"}},26189:()=>{(function(X){var L={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(y){if(!y)n.x=-1;else{var c=t.p2c(y);n.x=Math.max(0,Math.min(c.left,t.width())),n.y=Math.max(0,Math.min(c.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(y){y&&t.setCrosshair(y),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function r(i){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function a(i){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var y=t.offset();n.x=Math.max(0,Math.min(i.pageX-y.left,t.width())),n.y=Math.max(0,Math.min(i.pageY-y.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(i,y){i.getOptions().crosshair.mode&&(y.mouseout(r),y.mousemove(a))}),t.hooks.drawOverlay.push(function(i,y){var c=i.getOptions().crosshair;if(c.mode){var l=i.getPlotOffset();if(y.save(),y.translate(l.left,l.top),n.x!=-1){var d=i.getOptions().crosshair.lineWidth%2?.5:0;if(y.strokeStyle=c.color,y.lineWidth=c.lineWidth,y.lineJoin="round",y.beginPath(),c.mode.indexOf("x")!=-1){var f=Math.floor(n.x)+d;y.moveTo(f,0),y.lineTo(f,i.height())}if(c.mode.indexOf("y")!=-1){var m=Math.floor(n.y)+d;y.moveTo(0,m),y.lineTo(i.width(),m)}y.stroke()}y.restore()}}),t.hooks.shutdown.push(function(i,y){y.unbind("mouseout",r),y.unbind("mousemove",a)})}X.plot.plugins.push({init:e,options:L,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(X){function L(e){e.hooks.processDatapoints.push(function(t,n,r){n.dashes.show&&t.hooks.draw.push(function(a,i){var y=a.getPlotOffset(),c=n.xaxis,l=n.yaxis;function d(h,C){var x=r.points,b=r.pointsize,g=null,p=null,v=0,E=!0,P,S;n.dashes.dashLength[0]?(P=n.dashes.dashLength[0],n.dashes.dashLength[1]?S=n.dashes.dashLength[1]:S=P):S=P=n.dashes.dashLength,i.beginPath();for(var M=b;M<x.length;M+=b){let U=function($){var k=Math.sqrt(Math.pow(w-N,2)+Math.pow(K-o,2));if(k<=$)return{deltaX:w-N,deltaY:K-o,distance:k,remainder:$-k};var H=w>N?1:-1,j=K>o?1:-1;return{deltaX:H*Math.sqrt(Math.pow($,2)/(1+Math.pow((K-o)/(w-N),2))),deltaY:j*Math.sqrt(Math.pow($,2)-Math.pow($,2)/(1+Math.pow((K-o)/(w-N),2))),distance:$,remainder:0}};var _=U,R=x[M-b],I=x[M-b+1],A=x[M],O=x[M+1];if(!(R==null||A==null)){if(I<=O&&I<l.min){if(O<l.min)continue;R=(l.min-I)/(O-I)*(A-R)+R,I=l.min}else if(O<=I&&O<l.min){if(I<l.min)continue;A=(l.min-I)/(O-I)*(A-R)+R,O=l.min}if(I>=O&&I>l.max){if(O>l.max)continue;R=(l.max-I)/(O-I)*(A-R)+R,I=l.max}else if(O>=I&&O>l.max){if(I>l.max)continue;A=(l.max-I)/(O-I)*(A-R)+R,O=l.max}if(R<=A&&R<c.min){if(A<c.min)continue;I=(c.min-R)/(A-R)*(O-I)+I,R=c.min}else if(A<=R&&A<c.min){if(R<c.min)continue;O=(c.min-R)/(A-R)*(O-I)+I,A=c.min}if(R>=A&&R>c.max){if(A>c.max)continue;I=(c.max-R)/(A-R)*(O-I)+I,R=c.max}else if(A>=R&&A>c.max){if(R>c.max)continue;O=(c.max-R)/(A-R)*(O-I)+I,A=c.max}(R!=g||I!=p)&&i.moveTo(c.p2c(R)+h,l.p2c(I)+C);var N=c.p2c(R)+h,o=l.p2c(I)+C,w=c.p2c(A)+h,K=l.p2c(O)+C,V;do V=U(v>0?v:E?P:S),(V.deltaX!=0||V.deltaY!=0)&&(E?i.lineTo(N+V.deltaX,o+V.deltaY):i.moveTo(N+V.deltaX,o+V.deltaY)),E=!E,v=V.remainder,N+=V.deltaX,o+=V.deltaY;while(V.distance>0);g=A,p=O}}i.stroke()}i.save(),i.translate(y.left,y.top),i.lineJoin="round";var f=n.dashes.lineWidth,m=n.shadowSize;if(f>0&&m>0){i.lineWidth=m,i.strokeStyle="rgba(0,0,0,0.1)";var u=Math.PI/18;d(Math.sin(u)*(f/2+m/2),Math.cos(u)*(f/2+m/2)),i.lineWidth=m/2,d(Math.sin(u)*(f/2+m/4),Math.cos(u)*(f/2+m/4))}i.lineWidth=f,i.strokeStyle=n.color,f>0&&d(0,0),i.restore()})})}X.plot.plugins.push({init:L,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(X){"use strict";var L={series:{fillBelowTo:null}};function e(t){function n(i,y){var c;for(c=0;c<y.length;++c)if(y[c].id===i.fillBelowTo)return y[c];return null}function r(i,y,c,l,d,f,m,u){var h,C,x,b,g,p;return h=c-i,C=l-y,x=m-d,b=u-f,g=(-C*(i-d)+h*(y-f))/(-x*C+h*b),p=(x*(y-f)-b*(i-d))/(-x*C+h*b),g>=0&&g<=1&&p>=0&&p<=1?[i+p*h,y+p*C]:null}function a(i,y,c){if(c.fillBelowTo===null)return;var l,d,f,m,u,h,C;function x(S,M){y.beginPath(),y.moveTo(c.xaxis.p2c(S)+h.left,c.yaxis.p2c(M)+h.top)}function b(){y.closePath(),y.fill()}function g(){if(f.length/d!==u.length/m)return console.error("Refusing to graph inconsistent number of points"),!1;var S;for(S=0;S<f.length/d;S++)if(f[S*d]!==null&&u[S*m]!==null&&f[S*d]!==u[S*m])return console.error("Refusing to graph points without matching value"),!1;return!0}function p(S,M){console.assert(M>S,"expects the end index to be greater than the start index");var R=S===0||f[S-1]===null||u[S-1]===null,I=!1,A,O;for(A=S;A<M;A++)if(f[A*d+1]===null||u[A*d+1]===null)I=!1,R=!0;else if(f[A*d+1]===u[A*m+1])I=!0,R=!1;else if(f[A*d+1]>u[A*m+1]){R?x(f[A*d],f[A*d+1]):I?x(f[(A-1)*d],f[(A-1)*d+1]):(O=v(A),x(O[0],O[1])),P(A,M);return}else R=!1,I=!1}function v(S){console.assert(S>0,"expects the second point in the series line segment");var M,R;for(M=1;M<u.length/m;M++)if(R=r(f[(S-1)*d],f[(S-1)*d+1],f[S*d],f[S*d+1],u[(M-1)*m],u[(M-1)*m+1],u[M*m],u[M*m+1]),R!==null)return R;console.error("intersectionPoint() should only be called when an intersection happens")}function E(S,M){console.assert(S>=M,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var R;for(R=S;R>=M;R--)y.lineTo(l.xaxis.p2c(u[R*m])+h.left,l.yaxis.p2c(u[R*m+1])+h.top);b()}function P(S,M){console.assert(S<=M,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var R,I;for(R=S;R<M;R++)if(f[R*d+1]===null&&R>S){E(R-1,S),p(R,M);return}else if(f[R*d+1]===u[R*m+1]){E(R,S),p(R,M);return}else if(f[R*d+1]<u[R*m+1]){I=v(R),y.lineTo(c.xaxis.p2c(I[0])+h.left,c.yaxis.p2c(I[1])+h.top),E(R,S),p(R,M);return}else y.lineTo(c.xaxis.p2c(f[R*d])+h.left,c.yaxis.p2c(f[R*d+1])+h.top);E(M,S)}l=n(c,i.getData()),l&&(d=c.datapoints.pointsize,f=c.datapoints.points,m=l.datapoints.pointsize,u=l.datapoints.points,h=i.getPlotOffset(),g()&&(C=X.color.parse(c.color),C.a=.4,C.normalize(),y.fillStyle=C.toString(),p(0,f.length/d)))}t.hooks.drawSeries.push(a)}X.plot.plugins.push({init:e,options:L,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(X){var L=function(){var c,l,d,f,m,u,h=function(S,M){c=M,l=S.getPlaceholder(),d=S.getOptions(),f=d.series.gauges,m=S.getData(),u=e(f.debug)};h.prototype.calculateLayout=function(){var S=l.width(),M=l.height(),R=Math.min(m.length,f.layout.columns),I=Math.ceil(m.length/R),A=f.layout.margin,O=f.layout.hMargin,N=f.layout.vMargin,o=(S-A*2-O*(R-1))/R,w=(M-A*2-N*(I-1))/I;if(f.layout.square){var K=Math.min(o,w);o=K,w=K}C(f,o);var V=f.cell.margin,_=0,U=0;f.label.show&&(_=f.label.margin,U=f.label.font.size);var $=0,k=0;f.value.show&&($=f.value.margin,k=f.value.font.size);var H=0;f.threshold.show&&(H=f.threshold.width);var j=0,z=0;f.threshold.label.show&&(j=f.threshold.label.margin,z=f.threshold.label.font.size);for(var F=o/2-V-H-j*2-z,J=f.gauge.startAngle,Q=f.gauge.endAngle,Z=(Q-J)/100,ne=-1,ee=J;ee<Q;ee+=Z)ne=Math.max(ne,Math.sin(r(ee)));ne=Math.max(ne,Math.sin(r(Q)));var de=(w-V*2-_*2-U)/(1+ne);de*ne<$+k/2&&(de=w-V*2-_*2-U-$-k/2);var Pe=de-j*2-z-H,ye=Math.min(F,Pe),he=f.gauge.width;he>=ye&&(he=Math.max(3,ye/3));var me=j*2+z+H+ye,De=Math.max(me*(1+ne),me+$+k/2);return{canvasWidth:S,canvasHeight:M,margin:A,hMargin:O,vMargin:N,columns:R,rows:I,cellWidth:o,cellHeight:w,cellMargin:V,labelMargin:_,labelFontSize:U,valueMargin:$,valueFontSize:k,width:he,radius:ye,thresholdWidth:H,thresholdLabelMargin:j,thresholdLabelFontSize:z,gaugeOuterHeight:De}};function C(S,M){S.gauge.width==="auto"&&(S.gauge.width=Math.max(5,M/8)),S.label.margin==="auto"&&(S.label.margin=Math.max(1,M/20)),S.label.font.size==="auto"&&(S.label.font.size=Math.max(5,M/8)),S.value.margin==="auto"&&(S.value.margin=Math.max(1,M/30)),S.value.font.size==="auto"&&(S.value.font.size=Math.max(5,M/9)),S.threshold.width==="auto"&&(S.threshold.width=Math.max(3,M/100)),S.threshold.label.margin==="auto"&&(S.threshold.label.margin=Math.max(3,M/40)),S.threshold.label.font.size==="auto"&&(S.threshold.label.font.size=Math.max(5,M/15))}h.prototype.calculateAutoValues=C,h.prototype.calculateCellLayout=function(S,M,R){var I=t(M.columns,R),A=n(M.columns,R),O=M.margin+(M.cellWidth+M.hMargin)*I,N=M.margin+(M.cellHeight+M.vMargin)*A,o=O+M.cellWidth/2,w=N+M.cellMargin+M.labelMargin*2+M.labelFontSize+M.thresholdWidth+M.thresholdLabelFontSize+M.thresholdLabelMargin*2+M.radius,K=M.cellHeight-M.cellMargin*2-M.labelMargin*2-M.labelFontSize-M.gaugeOuterHeight,V=0;return S.cell.vAlign==="middle"?V=K/2:S.cell.vAlign==="bottom"&&(V=K),w+=V,{col:I,row:A,x:O,y:N,offsetY:V,cellWidth:M.cellWidth,cellHeight:M.cellHeight,cellMargin:M.cellMargin,cx:o,cy:w}},h.prototype.drawBackground=function(S){f.frame.show&&(c.save(),c.strokeStyle=d.grid.borderColor,c.lineWidth=d.grid.borderWidth,c.strokeRect(0,0,S.canvasWidth,S.canvasHeight),d.grid.backgroundColor&&(c.fillStyle=d.grid.backgroundColor,c.fillRect(0,0,S.canvasWidth,S.canvasHeight)),c.restore())},h.prototype.drawCellBackground=function(S,M){c.save(),S.cell.border&&S.cell.border.show&&S.cell.border.color&&S.cell.border.width&&(c.strokeStyle=S.cell.border.color,c.lineWidth=S.cell.border.width,c.strokeRect(M.x,M.y,M.cellWidth,M.cellHeight)),S.cell.background&&S.cell.background.color&&(c.fillStyle=S.cell.background.color,c.fillRect(M.x,M.y,M.cellWidth,M.cellHeight)),c.restore()},h.prototype.drawGauge=function(S,M,R,I,A){var O=S.gauge.shadow.show?S.gauge.shadow.blur:0,N=g(S,A),o=x(S,M,A);v(R.cx,R.cy,M.radius,M.width,r(S.gauge.startAngle),r(S.gauge.endAngle),S.gauge.border.color,S.gauge.border.width,S.gauge.background.color,O),v(R.cx,R.cy,M.radius-1,M.width-2,r(o.a1),r(o.a2),N,1,N,O),S.gauge.neutralValue!=null&&b(S,M,R,N)};function x(S,M,R){let I={};var A=S.gauge.neutralValue;return A!=null?R<A?(I.a1=p(S,M,R),I.a2=p(S,M,A)):(I.a1=p(S,M,A),I.a2=p(S,M,R)):(I.a1=S.gauge.startAngle,I.a2=p(S,M,R)),I}function b(S,M,R,I){var A=(S.gauge.max-S.gauge.min)/600;a(c,R.cx,R.cy,M.radius-2,M.width-4,r(p(S,M,S.gauge.neutralValue-A)),r(p(S,M,S.gauge.neutralValue+A)),I,2,S.gauge.background.color)}function g(S,M){for(var R,I=0;I<S.threshold.values.length;I++){var A=S.threshold.values[I];if(R=A.color,M<A.value)break}return R}function p(S,M,R){var I=S.gauge.startAngle+(S.gauge.endAngle-S.gauge.startAngle)*((R-S.gauge.min)/(S.gauge.max-S.gauge.min));return I<S.gauge.startAngle?I=S.gauge.startAngle:I>S.gauge.endAngle&&(I=S.gauge.endAngle),I}h.prototype.drawThreshold=function(S,M,R){for(var I=S.gauge.startAngle,A=0;A<S.threshold.values.length;A++){var O=S.threshold.values[A];c1=O.color,a2=p(S,M,O.value),a(c,R.cx,R.cy,M.radius+M.thresholdWidth,M.thresholdWidth-2,r(I),r(a2),c1,1,c1),I=a2}};function v(S,M,R,I,A,O,N,o,w,K){A!==O&&(c.save(),a(c,S,M,R,I,A,O,N,o,w),K&&(a(c,S,M,R,I,A,O),c.clip(),c.shadowOffsetX=0,c.shadowOffsetY=0,c.shadowBlur=10,c.shadowColor="gray",a(c,S,M,R+1,I+2,A,O,N,1)),c.restore())}h.prototype.drawLable=function(S,M,R,I,A){P(R.cx,R.y+R.cellMargin+M.labelMargin+R.offsetY,"flotGaugeLabel"+I,S.label.formatter?S.label.formatter(A.label,A.data[0][1]):text,S.label)},h.prototype.drawValue=function(S,M,R,I,A){P(R.cx,R.cy-S.value.font.size/2,"flotGaugeValue"+I,S.value.formatter?S.value.formatter(A.label,A.data[0][1]):text,S.value)},h.prototype.drawThresholdValues=function(S,M,R,I){E(S,M,R,"Min"+I,S.gauge.min,S.gauge.startAngle),E(S,M,R,"Max"+I,S.gauge.max,S.gauge.endAngle);for(var A=0;A<S.threshold.values.length;A++){var O=S.threshold.values[A];if(O.value>S.gauge.min&&O.value<S.gauge.max){var N=p(S,M,O.value);E(S,M,R,I+"_"+A,O.value,N)}}var o=S.gauge.neutralValue;o!=null&&o>S.gauge.min&&o<S.gauge.max&&E(S,M,R,"Neutral"+I,o,p(S,M,o))};function E(S,M,R,I,A,O){P(R.cx+(M.thresholdLabelMargin+M.thresholdLabelFontSize/2+M.radius)*Math.cos(r(O)),R.cy+(M.thresholdLabelMargin+M.thresholdLabelFontSize/2+M.radius)*Math.sin(r(O)),"flotGaugeThresholdValue"+I,S.threshold.label.formatter?S.threshold.label.formatter(A):A,S.threshold.label,O)}function P(S,M,R,I,A,O){var N=X(l).find("#"+R),o=N.length;o||(N=X("<span></span>"),N.attr("id",R),N.attr("class","flot-temp-elem"),l.append(N)),N.css("position","absolute"),N.css("top",M+"px"),N.css("white-space","nowrap"),A.font.size&&N.css("font-size",A.font.size+"px"),A.font.family&&N.css("font-family",A.font.family),A.color&&N.css("color",A.color),A.background.color&&N.css("background-color",A.background.color),A.background.opacity&&N.css("opacity",A.background.opacity),N.text(I),N.css("left",S+"px"),N.css("left",parseInt(N.css("left"))-N.width()/2+"px"),!o&&O&&(N.css("top",parseInt(N.css("top"))-N.height()/2+"px"),N.css("transform","rotate("+(180*O+90)+"deg)"))}return h}();function e(c){return typeof Logger<"u"?new Logger(c):null}function t(c,l){return l%c}function n(c,l){return Math.floor(l/c)}function r(c){return c*Math.PI}function a(c,l,d,f,m,u,h,C,x,b){if(u!==h){var g=!1;c.save(),c.beginPath(),c.arc(l,d,f,u,h,g),c.lineTo(l+(f-m)*Math.cos(h),d+(f-m)*Math.sin(h)),c.arc(l,d,f-m,h,u,!g),c.closePath(),x&&(c.lineWidth=x),C&&(c.strokeStyle=C,c.stroke()),b&&(c.fillStyle=b,c.fill()),c.restore()}}function i(c){c.hooks.processOptions.push(function(l,d){var f=e(d.series.gauges.debug);d.series.gauges.show&&(d.grid.show=!1,d.legend.show=!1);var m=d.series.gauges.threshold.values;m.sort(function(u,h){return u.value<h.value?-1:u.value>h.value?1:0})}),c.hooks.draw.push(function(l,d){var f=l.getOptions(),m=f.series.gauges,u=e(m.debug);if(m.show){var h=l.getData();if(!(!h||!h.length)){var C=new L(l,d),x=C.calculateLayout();m.debug.layout,C.drawBackground(x);for(var b=0;b<h.length;b++){var g=h[b],p=X.extend({},m,g.gauges);g.gauges&&C.calculateAutoValues(p,x.cellWidth);var v=C.calculateCellLayout(p,x,b);C.drawCellBackground(p,v),p.debug.layout,p.label.show&&C.drawLable(p,x,v,b,g),C.drawGauge(p,x,v,g.label,g.data[0][1]),p.threshold.show&&C.drawThreshold(p,x,v),p.threshold.label.show&&C.drawThresholdValues(p,x,v,b),p.value.show&&C.drawValue(p,x,v,b,g)}}}})}var y={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(c,l){return c}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(c,l){return parseInt(l)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(c){return c}},values:[]}}}};X.plot.plugins.push({init:i,options:y,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(X){X.color={},X.color.make=function(e,t,n,r){var a={};return a.r=e||0,a.g=t||0,a.b=n||0,a.a=r??1,a.add=function(i,y){for(var c=0;c<i.length;++c)a[i.charAt(c)]+=y;return a.normalize()},a.scale=function(i,y){for(var c=0;c<i.length;++c)a[i.charAt(c)]*=y;return a.normalize()},a.toString=function(){return a.a>=1?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")"},a.normalize=function(){function i(y,c,l){return c<y?y:c>l?l:c}return a.r=i(0,parseInt(a.r),255),a.g=i(0,parseInt(a.g),255),a.b=i(0,parseInt(a.b),255),a.a=i(0,a.a,1),a},a.clone=function(){return X.color.make(a.r,a.b,a.g,a.a)},a.normalize()},X.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!X.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),X.color.parse(n)},X.color.parse=function(e){var t,n=X.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var r=X.trim(e).toLowerCase();return r=="transparent"?n(255,255,255,0):(t=L[r]||[0,0,0],n(t[0],t[1],t[2]))};var L={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(X){var L=Object.prototype.hasOwnProperty;X.fn.detach||(X.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(r,a){var i=a.children("."+r)[0];if(i==null&&(i=document.createElement("canvas"),i.className=r,X(i).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(a),!i.getContext))if(window.G_vmlCanvasManager)i=window.G_vmlCanvasManager.initElement(i);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=i;var y=this.context=i.getContext("2d"),c=window.devicePixelRatio||1,l=y.webkitBackingStorePixelRatio||y.mozBackingStorePixelRatio||y.msBackingStorePixelRatio||y.oBackingStorePixelRatio||y.backingStorePixelRatio||1;this.pixelRatio=c/l,this.resize(a.width(),a.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(r,a){if(r<=0||a<=0)throw new Error("Invalid dimensions for plot, width = "+r+", height = "+a);var i=this.element,y=this.context,c=this.pixelRatio;this.width!=r&&(i.width=r*c,i.style.width=r+"px",this.width=r),this.height!=a&&(i.height=a*c,i.style.height=a+"px",this.height=a),y.restore(),y.save(),y.scale(c,c)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var r=this._textCache;for(var a in r)if(L.call(r,a)){var i=this.getTextLayer(a),y=r[a];i.hide();for(var c in y)if(L.call(y,c)){var l=y[c];for(var d in l)if(L.call(l,d)){for(var f=l[d].positions,m=0,u;u=f[m];m++)u.active?u.rendered||(i.append(u.element),u.rendered=!0):(f.splice(m--,1),u.rendered&&u.element.detach());f.length==0&&delete l[d]}}i.show()}},e.prototype.getTextLayer=function(r){var a=this.text[r];return a==null&&(this.textContainer==null&&(this.textContainer=X("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),a=this.text[r]=X("<div></div>").addClass(r).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),a},e.prototype.getTextInfo=function(r,a,i,y,c){var l,d,f,m;if(a=""+a,typeof i=="object"?l=i.style+" "+i.variant+" "+i.weight+" "+i.size+"px/"+i.lineHeight+"px "+i.family:l=i,d=this._textCache[r],d==null&&(d=this._textCache[r]={}),f=d[l],f==null&&(f=d[l]={}),m=f[a],m==null){var u=X("<div></div>").html(a).css({position:"absolute","max-width":c,top:-9999}).appendTo(this.getTextLayer(r));typeof i=="object"?u.css({font:l,color:i.color}):typeof i=="string"&&u.addClass(i),m=f[a]={element:u,positions:[]};var h=this._textSizeCache[a];h?(m.width=h.width,m.height=h.height):(m.width=u.outerWidth(!0),m.height=u.outerHeight(!0),this._textSizeCache[a]={width:m.width,height:m.height}),u.detach()}return m},e.prototype.addText=function(r,a,i,y,c,l,d,f,m){var u=this.getTextInfo(r,y,c,l,d),h=u.positions;f=="center"?a-=u.width/2:f=="right"&&(a-=u.width),m=="middle"?i-=u.height/2:m=="bottom"&&(i-=u.height);for(var C=0,x;x=h[C];C++)if(x.x==a&&x.y==i){x.active=!0;return}x={active:!0,rendered:!1,element:h.length?u.element.clone():u.element,x:a,y:i},h.push(x),x.element.css({top:Math.round(i),left:Math.round(a),"text-align":f})},e.prototype.removeText=function(r,a,i,y,c,l){if(y==null){var d=this._textCache[r];if(d!=null){for(var f in d)if(L.call(d,f)){var m=d[f];for(var u in m)if(L.call(m,u))for(var h=m[u].positions,C=0,x;x=h[C];C++)x.active=!1}}}else for(var h=this.getTextInfo(r,y,c,l).positions,C=0,x;x=h[C];C++)x.x==a&&x.y==i&&(x.active=!1)};function t(r,a,i,y){var c=[],l={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},d=null,f=null,m=null,u=null,h=null,C=[],x=[],b={left:0,right:0,top:0,bottom:0},g=0,p=0,v={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},E=this;E.setData=R,E.setupGrid=J,E.draw=Pe,E.getPlaceholder=function(){return r},E.getCanvas=function(){return d.element},E.getPlotOffset=function(){return b},E.width=function(){return g},E.height=function(){return p},E.offset=function(){var re=m.offset();return re.left+=b.left,re.top+=b.top,re},E.getData=function(){return c},E.getAxes=function(){var re={},Te;return X.each(C.concat(x),function(We,Je){Je&&(re[Je.direction+(Je.n!=1?Je.n:"")+"axis"]=Je)}),re},E.getXAxes=function(){return C},E.getYAxes=function(){return x},E.c2p=N,E.p2c=o,E.getOptions=function(){return l},E.highlight=Bt,E.unhighlight=zt,E.triggerRedrawOverlay=Xe,E.pointOffset=function(re){return{left:parseInt(C[A(re,"x")-1].p2c(+re.x)+b.left,10),top:parseInt(x[A(re,"y")-1].p2c(+re.y)+b.top,10)}},E.shutdown=$,E.destroy=function(){$(),r.removeData("plot").empty(),c=[],l=null,d=null,f=null,m=null,u=null,h=null,C=[],x=[],v=null,Me=[],E=null},E.resize=function(){var re=r.width(),Te=r.height();d.resize(re,Te),f.resize(re,Te)},E.hooks=v,S(E),M(i),_(),R(a),J(),Pe(),U();function P(re,Te){Te=[E].concat(Te);for(var We=0;We<re.length;++We)re[We].apply(this,Te)}function S(){for(var re={Canvas:e},Te=0;Te<y.length;++Te){var We=y[Te];We.init(E,re),We.options&&X.extend(!0,l,We.options)}}function M(re){X.extend(!0,l,re),re&&re.colors&&(l.colors=re.colors),l.xaxis.color==null&&(l.xaxis.color=X.color.parse(l.grid.color).scale("a",.22).toString()),l.yaxis.color==null&&(l.yaxis.color=X.color.parse(l.grid.color).scale("a",.22).toString()),l.xaxis.tickColor==null&&(l.xaxis.tickColor=l.grid.tickColor||l.xaxis.color),l.yaxis.tickColor==null&&(l.yaxis.tickColor=l.grid.tickColor||l.yaxis.color),l.grid.borderColor==null&&(l.grid.borderColor=l.grid.color),l.grid.tickColor==null&&(l.grid.tickColor=X.color.parse(l.grid.color).scale("a",.22).toString());var Te,We,Je,je=r.css("font-size"),pt=je?+je.replace("px",""):13,ft={style:r.css("font-style"),size:Math.round(.8*pt),variant:r.css("font-variant"),weight:r.css("font-weight"),family:r.css("font-family")};for(Je=l.xaxes.length||1,Te=0;Te<Je;++Te)We=l.xaxes[Te],We&&!We.tickColor&&(We.tickColor=We.color),We=X.extend(!0,{},l.xaxis,We),l.xaxes[Te]=We,We.font&&(We.font=X.extend({},ft,We.font),We.font.color||(We.font.color=We.color),We.font.lineHeight||(We.font.lineHeight=Math.round(We.font.size*1.15)));for(Je=l.yaxes.length||1,Te=0;Te<Je;++Te)We=l.yaxes[Te],We&&!We.tickColor&&(We.tickColor=We.color),We=X.extend(!0,{},l.yaxis,We),l.yaxes[Te]=We,We.font&&(We.font=X.extend({},ft,We.font),We.font.color||(We.font.color=We.color),We.font.lineHeight||(We.font.lineHeight=Math.round(We.font.size*1.15)));for(l.xaxis.noTicks&&l.xaxis.ticks==null&&(l.xaxis.ticks=l.xaxis.noTicks),l.yaxis.noTicks&&l.yaxis.ticks==null&&(l.yaxis.ticks=l.yaxis.noTicks),l.x2axis&&(l.xaxes[1]=X.extend(!0,{},l.xaxis,l.x2axis),l.xaxes[1].position="top",l.x2axis.min==null&&(l.xaxes[1].min=null),l.x2axis.max==null&&(l.xaxes[1].max=null)),l.y2axis&&(l.yaxes[1]=X.extend(!0,{},l.yaxis,l.y2axis),l.yaxes[1].position="right",l.y2axis.min==null&&(l.yaxes[1].min=null),l.y2axis.max==null&&(l.yaxes[1].max=null)),l.grid.coloredAreas&&(l.grid.markings=l.grid.coloredAreas),l.grid.coloredAreasColor&&(l.grid.markingsColor=l.grid.coloredAreasColor),l.lines&&X.extend(!0,l.series.lines,l.lines),l.points&&X.extend(!0,l.series.points,l.points),l.bars&&X.extend(!0,l.series.bars,l.bars),l.shadowSize!=null&&(l.series.shadowSize=l.shadowSize),l.highlightColor!=null&&(l.series.highlightColor=l.highlightColor),Te=0;Te<l.xaxes.length;++Te)w(C,Te+1).options=l.xaxes[Te];for(Te=0;Te<l.yaxes.length;++Te)w(x,Te+1).options=l.yaxes[Te];for(var Tt in v)l.hooks[Tt]&&l.hooks[Tt].length&&(v[Tt]=v[Tt].concat(l.hooks[Tt]));P(v.processOptions,[l])}function R(re){c=I(re),K(),V()}function I(re){for(var Te=[],We=0;We<re.length;++We){var Je=X.extend(!0,{},l.series);re[We].data!=null?(Je.data=re[We].data,delete re[We].data,X.extend(!0,Je,re[We]),re[We].data=Je.data):Je.data=re[We],Te.push(Je)}return Te}function A(re,Te){var We=re[Te+"axis"];return typeof We=="object"&&(We=We.n),typeof We!="number"&&(We=1),We}function O(){return X.grep(C.concat(x),function(re){return re})}function N(re){var Te={},We,Je;for(We=0;We<C.length;++We)Je=C[We],Je&&(Te["x"+Je.n]=Je.c2p(re.left));for(We=0;We<x.length;++We)Je=x[We],Je&&(Te["y"+Je.n]=Je.c2p(re.top));return Te.x1!==void 0&&(Te.x=Te.x1),Te.y1!==void 0&&(Te.y=Te.y1),Te}function o(re){var Te={},We,Je,je;for(We=0;We<C.length;++We)if(Je=C[We],Je&&Je.used&&(je="x"+Je.n,re[je]==null&&Je.n==1&&(je="x"),re[je]!=null)){Te.left=Je.p2c(re[je]);break}for(We=0;We<x.length;++We)if(Je=x[We],Je&&Je.used&&(je="y"+Je.n,re[je]==null&&Je.n==1&&(je="y"),re[je]!=null)){Te.top=Je.p2c(re[je]);break}return Te}function w(re,Te){return re[Te-1]||(re[Te-1]={n:Te,direction:re==C?"x":"y",options:X.extend(!0,{},re==C?l.xaxis:l.yaxis)}),re[Te-1]}function K(){var re=c.length,Te=-1,We;for(We=0;We<c.length;++We){var Je=c[We].color;Je!=null&&(re--,typeof Je=="number"&&Je>Te&&(Te=Je))}re<=Te&&(re=Te+1);var je,pt=[],ft=l.colors,Tt=ft.length,Ye=0;for(We=0;We<re;We++)je=X.color.parse(ft[We%Tt]||"#666"),We%Tt==0&&We&&(Ye>=0?Ye<.5?Ye=-Ye-.2:Ye=0:Ye=-Ye),pt[We]=je.scale("rgb",1+Ye);var Ce=0,oe;for(We=0;We<c.length;++We){if(oe=c[We],oe.color==null?(oe.color=pt[Ce].toString(),++Ce):typeof oe.color=="number"&&(oe.color=pt[oe.color].toString()),oe.lines.show==null){var pe,Re=!0;for(pe in oe)if(oe[pe]&&oe[pe].show){Re=!1;break}Re&&(oe.lines.show=!0)}oe.lines.zero==null&&(oe.lines.zero=!!oe.lines.fill),oe.xaxis=w(C,A(oe,"x")),oe.yaxis=w(x,A(oe,"y"))}}function V(){var re=Number.POSITIVE_INFINITY,Te=Number.NEGATIVE_INFINITY,We=Number.MAX_VALUE,Je,je,pt,ft,Tt,Ye,Ce,oe,pe,Re,ae,ve,xe,Ge,at,dt;function st(Ut,Xt,$n){Xt<Ut.datamin&&Xt!=-We&&(Ut.datamin=Xt),$n>Ut.datamax&&$n!=We&&(Ut.datamax=$n)}for(X.each(O(),function(Ut,Xt){Xt.datamin=re,Xt.datamax=Te,Xt.used=!1}),Je=0;Je<c.length;++Je)Ye=c[Je],Ye.datapoints={points:[]},P(v.processRawData,[Ye,Ye.data,Ye.datapoints]);for(Je=0;Je<c.length;++Je){if(Ye=c[Je],at=Ye.data,dt=Ye.datapoints.format,!dt){if(dt=[],dt.push({x:!0,number:!0,required:!0}),dt.push({y:!0,number:!0,required:!0}),Ye.stack||Ye.bars.show||Ye.lines.show&&Ye.lines.fill){var Pt=!!(Ye.bars.show&&Ye.bars.zero||Ye.lines.show&&Ye.lines.zero);dt.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:Pt}),Ye.bars.horizontal&&(delete dt[dt.length-1].y,dt[dt.length-1].x=!0)}Ye.datapoints.format=dt}if(Ye.datapoints.pointsize==null){Ye.datapoints.pointsize=dt.length,oe=Ye.datapoints.pointsize,Ce=Ye.datapoints.points;var we=Ye.lines.show&&Ye.lines.steps;for(Ye.xaxis.used=Ye.yaxis.used=!0,je=pt=0;je<at.length;++je,pt+=oe){Ge=at[je];var Le=Ge==null;if(!Le)for(ft=0;ft<oe;++ft)ve=Ge[ft],xe=dt[ft],xe&&(xe.number&&ve!=null&&(ve=+ve,isNaN(ve)?ve=null:ve==1/0?ve=We:ve==-1/0&&(ve=-We)),ve==null&&(xe.required&&(Le=!0),xe.defaultValue!=null&&(ve=xe.defaultValue))),Ce[pt+ft]=ve;if(Le)for(ft=0;ft<oe;++ft)ve=Ce[pt+ft],ve!=null&&(xe=dt[ft],xe.autoscale!==!1&&(xe.x&&st(Ye.xaxis,ve,ve),xe.y&&st(Ye.yaxis,ve,ve))),Ce[pt+ft]=null;if(we&&pt>0&&(!Le||Ce[pt-oe]!=null)){for(ft=0;ft<oe;++ft)Ce[pt+oe+ft]=Ce[pt+ft];Ce[pt+1]=Ce[pt-oe+1]||0,Le&&(Ce[pt]=Ge[0]),pt+=oe}}}}for(Je=0;Je<c.length;++Je){if(Ye=c[Je],Ce=Ye.datapoints.points,oe=Ye.datapoints.pointsize,Ye.transform==="negative-Y")for(je=0;je<Ce.length;je+=oe)Ce[je]!=null&&(ve=Ce[je+1],Ce[je+1]=-ve);P(v.processDatapoints,[Ye,Ye.datapoints])}for(Je=0;Je<c.length;++Je){Ye=c[Je],Ce=Ye.datapoints.points,oe=Ye.datapoints.pointsize,dt=Ye.datapoints.format;var Ke=re,ht=re,xt=Te,lt=Te;for(je=0;je<Ce.length;je+=oe)if(Ce[je]!=null)for(ft=0;ft<oe;++ft)ve=Ce[je+ft],xe=dt[ft],!(!xe||xe.autoscale===!1||ve==We||ve==-We)&&(xe.x&&(ve<Ke&&(Ke=ve),ve>xt&&(xt=ve)),xe.y&&(ve<ht&&(ht=ve),ve>lt&&(lt=ve)));if(Ye.bars.show){var Rt;switch(Ye.bars.align){case"left":Rt=0;break;case"right":Rt=-Ye.bars.barWidth;break;default:Rt=-Ye.bars.barWidth/2}Ye.bars.horizontal?(ht+=Rt,lt+=Rt+Ye.bars.barWidth):(Ke+=Rt,xt+=Rt+Ye.bars.barWidth)}st(Ye.xaxis,Ke,xt),st(Ye.yaxis,ht,lt)}X.each(O(),function(Ut,Xt){Xt.datamin==re&&(Xt.datamin=null),Xt.datamax==Te&&(Xt.datamax=null)})}function _(){r.find(".flot-temp-elem").remove(),r.css("position")=="static"&&r.css("position","relative"),d=new e("flot-base",r),f=new e("flot-overlay",r),u=d.context,h=f.context,m=X(f.element).unbind();var re=r.data("plot");re&&(re.shutdown(),f.clear()),r.data("plot",E)}function U(){l.grid.hoverable&&(m.mousemove(bt),m.bind("mouseleave",Fe),X(document).bind("touchend",Ue)),l.grid.clickable&&m.click(Ve),P(v.bindEvents,[m])}function $(){Ne&&clearTimeout(Ne),m.unbind("mousemove",bt),m.unbind("mouseleave",Fe),m.unbind("click",Ve),X(document).unbind("touchend",Ue),P(v.shutdown,[m])}function k(re){function Te(ft){return ft}var We,Je,je=re.options.transform||Te,pt=re.options.inverseTransform;re.direction=="x"?(We=re.scale=g/Math.abs(je(re.max)-je(re.min)),Je=Math.min(je(re.max),je(re.min))):(We=re.scale=p/Math.abs(je(re.max)-je(re.min)),We=-We,Je=Math.max(je(re.max),je(re.min))),je==Te?re.p2c=function(ft){return(ft-Je)*We}:re.p2c=function(ft){return(je(ft)-Je)*We},pt?re.c2p=function(ft){return pt(Je+ft/We)}:re.c2p=function(ft){return Je+ft/We}}function H(re){for(var Te=re.options,We=re.ticks||[],Je=Te.labelWidth||0,je=Te.labelHeight||0,pt=Je||(re.direction=="x"?Math.floor(d.width/(We.length||1)):null),ft=re.direction+"Axis "+re.direction+re.n+"Axis",Tt="flot-"+re.direction+"-axis flot-"+re.direction+re.n+"-axis "+ft,Ye=Te.font||"flot-tick-label tickLabel",Ce=0;Ce<We.length;++Ce){var oe=We[Ce];if(oe.label){var pe=d.getTextInfo(Tt,oe.label,Ye,null,pt);Je=Math.max(Je,pe.width+1),je=Math.max(je,pe.height)}}re.labelWidth=Te.labelWidth||Je,re.labelHeight=Te.labelHeight||je}function j(re){var Te=re.labelWidth,We=re.labelHeight,Je=re.options.position,je=re.direction==="x",pt=re.options.tickLength,ft=l.grid.axisMargin,Tt=l.grid.labelMargin,Ye=l.grid.eventSectionHeight,Ce=!0,oe=!0,pe=!0,Re=!1;X.each(je?C:x,function(ae,ve){ve&&(ve.show||ve.reserveSpace)&&(ve===re?Re=!0:ve.options.position===Je&&(Re?oe=!1:Ce=!1),Re||(pe=!1))}),oe&&(ft=0),pt==null&&(pt=pe?"full":5),isNaN(+pt)||(Tt+=+pt),je?(We+=Tt,We+=Ye,Je=="bottom"?(b.bottom+=We+ft,re.box={top:d.height-b.bottom,height:We}):(re.box={top:b.top+ft,height:We},b.top+=We+ft)):(Te+=Tt,Je=="left"?(re.box={left:b.left+ft,width:Te},b.left+=Te+ft):(b.right+=Te+ft,re.box={left:d.width-b.right,width:Te})),re.position=Je,re.tickLength=pt,re.box.padding=Tt,re.box.eventSectionPadding=Ye,re.innermost=Ce}function z(re){re.direction=="x"?(re.box.left=b.left-re.labelWidth/2,re.box.width=d.width-b.left-b.right+re.labelWidth):(re.box.top=b.top-re.labelHeight/2,re.box.height=d.height-b.bottom-b.top+re.labelHeight)}function F(){var re=l.grid.minBorderMargin,Te,We;if(re==null)for(re=0,We=0;We<c.length;++We)re=Math.max(re,2*(c[We].points.radius+c[We].points.lineWidth/2));var Je={left:re,right:re,top:re,bottom:re};X.each(O(),function(je,pt){pt.reserveSpace&&pt.ticks&&pt.ticks.length&&(pt.direction==="x"?(Je.left=Math.max(Je.left,pt.labelWidth/2),Je.right=Math.max(Je.right,pt.labelWidth/2)):(Je.bottom=Math.max(Je.bottom,pt.labelHeight/2),Je.top=Math.max(Je.top,pt.labelHeight/2)))}),b.left=Math.ceil(Math.max(Je.left,b.left)),b.right=Math.ceil(Math.max(Je.right,b.right)),b.top=Math.ceil(Math.max(Je.top,b.top)),b.bottom=Math.ceil(Math.max(Je.bottom,b.bottom))}function J(){var re,Te=O(),We=l.grid.show;for(var Je in b){var je=l.grid.margin||0;b[Je]=typeof je=="number"?je:je[Je]||0}P(v.processOffset,[b]);for(var Je in b)typeof l.grid.borderWidth=="object"?b[Je]+=We?l.grid.borderWidth[Je]:0:b[Je]+=We?l.grid.borderWidth:0;if(X.each(Te,function(Tt,Ye){var Ce=Ye.options;Ye.show=Ce.show==null?Ye.used:Ce.show,Ye.reserveSpace=Ce.reserveSpace==null?Ye.show:Ce.reserveSpace,Q(Ye)}),P(v.processRange,[]),We){for(var pt=X.grep(Te,function(Tt){return Tt.show||Tt.reserveSpace}),ft=!1,re=0;re<2&&(X.each(pt,function(Ye,Ce){ne(Ce),ee(Ce),ft=de(Ce,Ce.ticks)||ft,H(Ce)}),ft&&v.processRange.length>0);re++)P(v.processRange,[]),ft=!1;for(re=pt.length-1;re>=0;--re)j(pt[re]);F(),X.each(pt,function(Tt,Ye){z(Ye)})}g=d.width-b.left-b.right,p=d.height-b.bottom-b.top,X.each(Te,function(Tt,Ye){k(Ye)}),We&&De(),Qe()}function Q(re){var Te=re.options,We=+(Te.min!=null?Te.min:re.datamin),Je=+(Te.max!=null?Te.max:re.datamax),je=Je-We;if(je==0){var pt=.25,ft=Math.abs(Je==0?1:Je*pt);Te.min==null&&(We-=ft),(Te.max==null||Te.min!=null)&&(Je+=ft)}else{var Tt=Te.autoscaleMargin;Tt!=null&&(Te.min==null&&(We-=je*Tt,We<0&&re.datamin!=null&&re.datamin>=0&&(We=0)),Te.max==null&&(Je+=je*Tt,Je>0&&re.datamax!=null&&re.datamax<=0&&(Je=0)))}re.min=We,re.max=Je}function Z(re){if(re=Math.abs(String(re).replace(".","")),re==0)return 0;for(;re!=0&&re%10==0;)re/=10;return Math.floor(Math.log(re)/Math.LN10)+1}function ne(re){var Te=re.options,We;typeof Te.ticks=="number"&&Te.ticks>0?We=Te.ticks:We=.3*Math.sqrt(re.direction=="x"?d.width:d.height);var Je=(re.max-re.min)/We,je=-Math.floor(Math.log(Je)/Math.LN10),pt=Te.tickDecimals;pt!=null&&je>pt&&(je=pt);var ft=Math.pow(10,-je),Tt=Je/ft,Ye;if(Tt<1.5?Ye=1:Tt<3?(Ye=2,Tt>2.25&&(pt==null||je+1<=pt)&&(Ye=2.5,++je)):Tt<7.5?Ye=5:Ye=10,Ye*=ft,Te.minTickSize!=null&&Ye<Te.minTickSize&&(Ye=Te.minTickSize),re.delta=Je,re.tickDecimals=Math.max(0,pt??je),re.tickSize=Te.tickSize||Ye,Te.mode=="time"&&!re.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(re.tickGenerator||(re.tickGenerator=function(ae){var ve=[],xe=n(ae.min,ae.tickSize),Ge=0,at=Number.NaN,dt;do dt=at,at=xe+Ge*ae.tickSize,ve.push(at),++Ge;while(at<ae.max&&at!=dt);return ve},re.tickFormatter=function(ae,ve){var xe=ve.tickDecimals?Math.pow(10,ve.tickDecimals):1,Ge=""+Math.round(ae*xe)/xe;if(ve.tickDecimals!=null){var at=Ge.indexOf("."),dt=at==-1?0:Ge.length-at-1;if(dt<ve.tickDecimals)return(dt?Ge:Ge+".")+(""+xe).substr(1,ve.tickDecimals-dt)}return Ge}),X.isFunction(Te.tickFormatter)&&(re.tickFormatter=function(ae,ve){return""+Te.tickFormatter(ae,ve)}),Te.alignTicksWithAxis!=null){var Ce=(re.direction=="x"?C:x)[Te.alignTicksWithAxis-1];if(Ce&&Ce.used&&Ce!=re){var oe=re.tickGenerator(re);if(oe.length>0&&(Te.min==null&&(re.min=Math.min(re.min,oe[0])),Te.max==null&&oe.length>1&&(re.max=Math.max(re.max,oe[oe.length-1]))),re.tickGenerator=function(ae){var ve=[],xe,Ge;for(Ge=0;Ge<Ce.ticks.length;++Ge)xe=(Ce.ticks[Ge].v-Ce.min)/(Ce.max-Ce.min),xe=ae.min+xe*(ae.max-ae.min),ve.push(xe);return ve},!re.mode&&Te.tickDecimals==null){var pe=Math.max(0,-Math.floor(Math.log(re.delta)/Math.LN10)+1),Re=re.tickGenerator(re);Re.length>1&&/\..*0$/.test((Re[1]-Re[0]).toFixed(pe))||(re.tickDecimals=pe)}}}}function ee(re){var Te=re.options.ticks,We=[];Te==null||typeof Te=="number"&&Te>0?We=re.tickGenerator(re):Te&&(X.isFunction(Te)?We=Te(re):We=Te);var Je,je;for(re.ticks=[],Je=0;Je<We.length;++Je){var pt=null,ft=We[Je];typeof ft=="object"?(je=+ft[0],ft.length>1&&(pt=ft[1])):je=+ft,pt==null&&(pt=re.tickFormatter(je,re)),isNaN(je)||re.ticks.push({v:je,label:pt})}}function de(re,Te){var We=!1;return re.options.autoscaleMargin&&Te.length>0&&(re.options.min==null&&(re.min=Math.min(re.min,Te[0].v),We=!0),re.options.max==null&&Te.length>1&&(re.max=Math.max(re.max,Te[Te.length-1].v),We=!0)),We}function Pe(){d.clear(),P(v.drawBackground,[u]);var re=l.grid;re.show&&re.backgroundColor&&he(),re.show&&!re.aboveData&&me();for(var Te=0;Te<c.length;++Te)P(v.drawSeries,[u,c[Te]]),Ee(c[Te]);P(v.draw,[u]),re.show&&re.aboveData&&me(),d.render(),Xe()}function ye(re,Te){for(var We,Je,je,pt,ft=O(),Tt=0;Tt<ft.length;++Tt)if(We=ft[Tt],We.direction==Te&&(pt=Te+We.n+"axis",!re[pt]&&We.n==1&&(pt=Te+"axis"),re[pt])){Je=re[pt].from,je=re[pt].to;break}if(re[pt]||(We=Te=="x"?C[0]:x[0],Je=re[Te+"1"],je=re[Te+"2"]),Je!=null&&je!=null&&Je>je){var Ye=Je;Je=je,je=Ye}return{from:Je,to:je,axis:We}}function he(){u.save(),u.translate(b.left,b.top),u.fillStyle=Zt(l.grid.backgroundColor,p,0,"rgba(255, 255, 255, 0)"),u.fillRect(0,0,g,p),u.restore()}function me(){var re,Te,We,Je;u.save(),u.translate(b.left,b.top);var je=l.grid.markings;if(je)for(X.isFunction(je)&&(Te=E.getAxes(),Te.xmin=Te.xaxis.min,Te.xmax=Te.xaxis.max,Te.ymin=Te.yaxis.min,Te.ymax=Te.yaxis.max,je=je(Te)),re=0;re<je.length;++re){var pt=je[re],ft=ye(pt,"x"),Tt=ye(pt,"y");if(ft.from==null&&(ft.from=ft.axis.min),ft.to==null&&(ft.to=ft.axis.max),Tt.from==null&&(Tt.from=Tt.axis.min),Tt.to==null&&(Tt.to=Tt.axis.max),!(ft.to<ft.axis.min||ft.from>ft.axis.max||Tt.to<Tt.axis.min||Tt.from>Tt.axis.max)){ft.from=Math.max(ft.from,ft.axis.min),ft.to=Math.min(ft.to,ft.axis.max),Tt.from=Math.max(Tt.from,Tt.axis.min),Tt.to=Math.min(Tt.to,Tt.axis.max);var Ye=ft.from===ft.to,Ce=Tt.from===Tt.to;if(!(Ye&&Ce))if(ft.from=Math.floor(ft.axis.p2c(ft.from)),ft.to=Math.floor(ft.axis.p2c(ft.to)),Tt.from=Math.floor(Tt.axis.p2c(Tt.from)),Tt.to=Math.floor(Tt.axis.p2c(Tt.to)),Ye||Ce){var oe=pt.lineWidth||l.grid.markingsLineWidth,pe=oe%2?.5:0;u.beginPath(),u.strokeStyle=pt.color||l.grid.markingsColor,u.lineWidth=oe,Ye?(u.moveTo(ft.to+pe,Tt.from),u.lineTo(ft.to+pe,Tt.to)):(u.moveTo(ft.from,Tt.to+pe),u.lineTo(ft.to,Tt.to+pe)),u.stroke()}else u.fillStyle=pt.color||l.grid.markingsColor,u.fillRect(ft.from,Tt.to,ft.to-ft.from,Tt.from-Tt.to)}}Te=O(),We=l.grid.borderWidth;for(var Re=0;Re<Te.length;++Re){var ae=Te[Re],ve=ae.box,xe=ae.tickLength,Ge,at,dt,st;if(!(!ae.show||ae.ticks.length==0)){for(u.lineWidth=1,ae.direction=="x"?(Ge=0,xe=="full"?at=ae.position=="top"?0:p:at=ve.top-b.top+(ae.position=="top"?ve.height:0)):(at=0,xe=="full"?Ge=ae.position=="left"?0:g:Ge=ve.left-b.left+(ae.position=="left"?ve.width:0)),ae.innermost||(u.strokeStyle=ae.options.color,u.beginPath(),dt=st=0,ae.direction=="x"?dt=g+1:st=p+1,u.lineWidth==1&&(ae.direction=="x"?at=Math.floor(at)+.5:Ge=Math.floor(Ge)+.5),u.moveTo(Ge,at),u.lineTo(Ge+dt,at+st),u.stroke()),u.strokeStyle=ae.options.tickColor,u.beginPath(),re=0;re<ae.ticks.length;++re){var Pt=ae.ticks[re].v;dt=st=0,!(isNaN(Pt)||Pt<ae.min||Pt>ae.max||xe=="full"&&(typeof We=="object"&&We[ae.position]>0||We>0)&&(Pt==ae.min||Pt==ae.max))&&(ae.direction=="x"?(Ge=ae.p2c(Pt),st=xe=="full"?-p:xe,ae.position=="top"&&(st=-st)):(at=ae.p2c(Pt),dt=xe=="full"?-g:xe,ae.position=="left"&&(dt=-dt)),u.lineWidth==1&&(ae.direction=="x"?Ge=Math.floor(Ge)+.5:at=Math.floor(at)+.5),u.moveTo(Ge,at),u.lineTo(Ge+dt,at+st))}u.stroke()}}We&&(Je=l.grid.borderColor,typeof We=="object"||typeof Je=="object"?(typeof We!="object"&&(We={top:We,right:We,bottom:We,left:We}),typeof Je!="object"&&(Je={top:Je,right:Je,bottom:Je,left:Je}),We.top>0&&(u.strokeStyle=Je.top,u.lineWidth=We.top,u.beginPath(),u.moveTo(0-We.left,0-We.top/2),u.lineTo(g,0-We.top/2),u.stroke()),We.right>0&&(u.strokeStyle=Je.right,u.lineWidth=We.right,u.beginPath(),u.moveTo(g+We.right/2,0-We.top),u.lineTo(g+We.right/2,p),u.stroke()),We.bottom>0&&(u.strokeStyle=Je.bottom,u.lineWidth=We.bottom,u.beginPath(),u.moveTo(g+We.right,p+We.bottom/2),u.lineTo(0,p+We.bottom/2),u.stroke()),We.left>0&&(u.strokeStyle=Je.left,u.lineWidth=We.left,u.beginPath(),u.moveTo(0-We.left/2,p+We.bottom),u.lineTo(0-We.left/2,0),u.stroke())):(u.lineWidth=We,u.strokeStyle=l.grid.borderColor,u.strokeRect(-We/2,-We/2,g+We,p+We))),u.restore()}function De(){X.each(O(),function(re,Te){var We=Te.box,Je=Te.direction+"Axis "+Te.direction+Te.n+"Axis",je="flot-"+Te.direction+"-axis flot-"+Te.direction+Te.n+"-axis "+Je,pt=Te.options.font||"flot-tick-label tickLabel",ft,Tt,Ye,Ce,oe;if(d.removeText(je),!(!Te.show||Te.ticks.length==0))for(var pe=0;pe<Te.ticks.length;++pe)ft=Te.ticks[pe],!(!ft.label||ft.v<Te.min||ft.v>Te.max)&&(Te.direction=="x"?(Ce="center",Tt=b.left+Te.p2c(ft.v),Te.position=="bottom"?Ye=We.top+We.padding+We.eventSectionPadding:(Ye=We.top+We.height-We.padding,oe="bottom")):(oe="middle",Ye=b.top+Te.p2c(ft.v),Te.position=="left"?(Tt=We.left+We.width-We.padding,Ce="right"):Tt=We.left+We.padding),d.addText(je,Tt,Ye,ft.label,pt,null,null,Ce,oe))})}function le(re){for(var Te=[],We=null,Je=null,je=re.datapoints,pt=[],ft=0;ft<je.pointsize-2;ft++)pt.push(0);for(var Tt=0;Tt<je.points.length;Tt+=je.pointsize){var Ye=je.points[Tt],Ce=je.points[Tt+1];Tt===je.points.length-je.pointsize?Je=null:Je=je.points[Tt+je.pointsize],Ye!==null&&Ce!==null&&We===null&&Je===null&&(Te.push(Ye),Te.push(Ce),Te.push.apply(Te,pt)),We=Ye}var oe=je.points;je.points=Te,re.points.radius=re.lines.lineWidth/2,ge(re),je.points=oe}function Ee(re){re.lines.show&&(be(re),!re.points.show&&!re.bars.show&&le(re)),re.bars.show&&Ie(re),re.points.show&&ge(re)}function be(re){function Te(Tt,Ye,Ce,oe,pe){var Re=Tt.points,ae=Tt.pointsize,ve=null,xe=null;u.beginPath();for(var Ge=ae;Ge<Re.length;Ge+=ae){var at=Re[Ge-ae],dt=Re[Ge-ae+1],st=Re[Ge],Pt=Re[Ge+1];if(!(at==null||st==null)){if(dt<=Pt&&dt<pe.min){if(Pt<pe.min)continue;at=(pe.min-dt)/(Pt-dt)*(st-at)+at,dt=pe.min}else if(Pt<=dt&&Pt<pe.min){if(dt<pe.min)continue;st=(pe.min-dt)/(Pt-dt)*(st-at)+at,Pt=pe.min}if(dt>=Pt&&dt>pe.max){if(Pt>pe.max)continue;at=(pe.max-dt)/(Pt-dt)*(st-at)+at,dt=pe.max}else if(Pt>=dt&&Pt>pe.max){if(dt>pe.max)continue;st=(pe.max-dt)/(Pt-dt)*(st-at)+at,Pt=pe.max}if(at<=st&&at<oe.min){if(st<oe.min)continue;dt=(oe.min-at)/(st-at)*(Pt-dt)+dt,at=oe.min}else if(st<=at&&st<oe.min){if(at<oe.min)continue;Pt=(oe.min-at)/(st-at)*(Pt-dt)+dt,st=oe.min}if(at>=st&&at>oe.max){if(st>oe.max)continue;dt=(oe.max-at)/(st-at)*(Pt-dt)+dt,at=oe.max}else if(st>=at&&st>oe.max){if(at>oe.max)continue;Pt=(oe.max-at)/(st-at)*(Pt-dt)+dt,st=oe.max}(at!=ve||dt!=xe)&&u.moveTo(oe.p2c(at)+Ye,pe.p2c(dt)+Ce),ve=st,xe=Pt,u.lineTo(oe.p2c(st)+Ye,pe.p2c(Pt)+Ce)}}u.stroke()}function We(Tt,Ye,Ce){for(var oe=Tt.points,pe=Tt.pointsize,Re=Math.min(Math.max(0,Ce.min),Ce.max),ae=0,ve,xe=!1,Ge=1,at=0,dt=0;!(pe>0&&ae>oe.length+pe);){ae+=pe;var st=oe[ae-pe],Pt=oe[ae-pe+Ge],we=oe[ae],Le=oe[ae+Ge];if(xe){if(pe>0&&st!=null&&we==null){dt=ae,pe=-pe,Ge=2;continue}if(pe<0&&ae==at+pe){u.fill(),xe=!1,pe=-pe,Ge=1,ae=at=dt+pe;continue}}if(!(st==null||we==null)){if(st<=we&&st<Ye.min){if(we<Ye.min)continue;Pt=(Ye.min-st)/(we-st)*(Le-Pt)+Pt,st=Ye.min}else if(we<=st&&we<Ye.min){if(st<Ye.min)continue;Le=(Ye.min-st)/(we-st)*(Le-Pt)+Pt,we=Ye.min}if(st>=we&&st>Ye.max){if(we>Ye.max)continue;Pt=(Ye.max-st)/(we-st)*(Le-Pt)+Pt,st=Ye.max}else if(we>=st&&we>Ye.max){if(st>Ye.max)continue;Le=(Ye.max-st)/(we-st)*(Le-Pt)+Pt,we=Ye.max}if(xe||(u.beginPath(),u.moveTo(Ye.p2c(st),Ce.p2c(Re)),xe=!0),Pt>=Ce.max&&Le>=Ce.max){u.lineTo(Ye.p2c(st),Ce.p2c(Ce.max)),u.lineTo(Ye.p2c(we),Ce.p2c(Ce.max));continue}else if(Pt<=Ce.min&&Le<=Ce.min){u.lineTo(Ye.p2c(st),Ce.p2c(Ce.min)),u.lineTo(Ye.p2c(we),Ce.p2c(Ce.min));continue}var Ke=st,ht=we;Pt<=Le&&Pt<Ce.min&&Le>=Ce.min?(st=(Ce.min-Pt)/(Le-Pt)*(we-st)+st,Pt=Ce.min):Le<=Pt&&Le<Ce.min&&Pt>=Ce.min&&(we=(Ce.min-Pt)/(Le-Pt)*(we-st)+st,Le=Ce.min),Pt>=Le&&Pt>Ce.max&&Le<=Ce.max?(st=(Ce.max-Pt)/(Le-Pt)*(we-st)+st,Pt=Ce.max):Le>=Pt&&Le>Ce.max&&Pt<=Ce.max&&(we=(Ce.max-Pt)/(Le-Pt)*(we-st)+st,Le=Ce.max),st!=Ke&&u.lineTo(Ye.p2c(Ke),Ce.p2c(Pt)),u.lineTo(Ye.p2c(st),Ce.p2c(Pt)),u.lineTo(Ye.p2c(we),Ce.p2c(Le)),we!=ht&&(u.lineTo(Ye.p2c(we),Ce.p2c(Le)),u.lineTo(Ye.p2c(ht),Ce.p2c(Le)))}}}u.save(),u.translate(b.left,b.top),u.lineJoin="round";var Je=re.lines.lineWidth,je=re.shadowSize;if(Je>0&&je>0){u.lineWidth=je,u.strokeStyle="rgba(0,0,0,0.1)";var pt=Math.PI/18;Te(re.datapoints,Math.sin(pt)*(Je/2+je/2),Math.cos(pt)*(Je/2+je/2),re.xaxis,re.yaxis),u.lineWidth=je/2,Te(re.datapoints,Math.sin(pt)*(Je/2+je/4),Math.cos(pt)*(Je/2+je/4),re.xaxis,re.yaxis)}u.lineWidth=Je,u.strokeStyle=re.color;var ft=ot(re.lines,re.color,0,p);ft&&(u.fillStyle=ft,We(re.datapoints,re.xaxis,re.yaxis)),Je>0&&Te(re.datapoints,0,0,re.xaxis,re.yaxis),u.restore()}function ge(re){function Te(Tt,Ye,Ce,oe,pe,Re,ae,ve){for(var xe=Tt.points,Ge=Tt.pointsize,at=0;at<xe.length;at+=Ge){var dt=xe[at],st=xe[at+1];dt==null||dt<Re.min||dt>Re.max||st<ae.min||st>ae.max||(u.beginPath(),dt=Re.p2c(dt),st=ae.p2c(st)+oe,ve=="circle"?u.arc(dt,st,Ye,0,pe?Math.PI:Math.PI*2,!1):ve(u,dt,st,Ye,pe),u.closePath(),Ce&&(u.fillStyle=Ce,u.fill()),u.stroke())}}u.save(),u.translate(b.left,b.top);var We=re.points.lineWidth,Je=re.shadowSize,je=re.points.radius,pt=re.points.symbol;if(We==0&&(We=1e-4),We>0&&Je>0){var ft=Je/2;u.lineWidth=ft,u.strokeStyle="rgba(0,0,0,0.1)",Te(re.datapoints,je,null,ft+ft/2,!0,re.xaxis,re.yaxis,pt),u.strokeStyle="rgba(0,0,0,0.2)",Te(re.datapoints,je,null,ft/2,!0,re.xaxis,re.yaxis,pt)}u.lineWidth=We,u.strokeStyle=re.color,Te(re.datapoints,je,ot(re.points,re.color),0,!1,re.xaxis,re.yaxis,pt),u.restore()}function ue(re,Te,We,Je,je,pt,ft,Tt,Ye,Ce,oe){var pe,Re,ae,ve,xe,Ge,at,dt,st;Ce?(dt=Ge=at=!0,xe=!1,pe=We,Re=re,ve=Te+Je,ae=Te+je,Re<pe&&(st=Re,Re=pe,pe=st,xe=!0,Ge=!1)):(xe=Ge=at=!0,dt=!1,pe=re+Je,Re=re+je,ae=We,ve=Te,ve<ae&&(st=ve,ve=ae,ae=st,dt=!0,at=!1)),!(Re<ft.min||pe>ft.max||ve<Tt.min||ae>Tt.max)&&(pe<ft.min&&(pe=ft.min,xe=!1),Re>ft.max&&(Re=ft.max,Ge=!1),ae<Tt.min&&(ae=Tt.min,dt=!1),ve>Tt.max&&(ve=Tt.max,at=!1),pe=ft.p2c(pe),ae=Tt.p2c(ae),Re=ft.p2c(Re),ve=Tt.p2c(ve),pt&&(Ye.fillStyle=pt(ae,ve),Ye.fillRect(pe,ve,Re-pe,ae-ve)),oe>0&&(xe||Ge||at||dt)&&(Ye.beginPath(),Ye.moveTo(pe,ae),xe?Ye.lineTo(pe,ve):Ye.moveTo(pe,ve),at?Ye.lineTo(Re,ve):Ye.moveTo(Re,ve),Ge?Ye.lineTo(Re,ae):Ye.moveTo(Re,ae),dt?Ye.lineTo(pe,ae):Ye.moveTo(pe,ae),Ye.stroke()))}function Ie(re){function Te(je,pt,ft,Tt,Ye,Ce){for(var oe=je.points,pe=je.pointsize,Re=0;Re<oe.length;Re+=pe)oe[Re]!=null&&ue(oe[Re],oe[Re+1],oe[Re+2],pt,ft,Tt,Ye,Ce,u,re.bars.horizontal,re.bars.lineWidth)}u.save(),u.translate(b.left,b.top),u.lineWidth=re.bars.lineWidth,u.strokeStyle=re.color;var We;switch(re.bars.align){case"left":We=0;break;case"right":We=-re.bars.barWidth;break;default:We=-re.bars.barWidth/2}var Je=re.bars.fill?function(je,pt){return ot(re.bars,re.color,je,pt)}:null;Te(re.datapoints,We,We+re.bars.barWidth,Je,re.xaxis,re.yaxis),u.restore()}function ot(re,Te,We,Je){var je=re.fill;if(!je)return null;if(re.fillColor)return Zt(re.fillColor,We,Je,Te);var pt=X.color.parse(Te);return pt.a=typeof je=="number"?je:.4,pt.normalize(),pt.toString()}function Qe(){if(l.legend.container!=null?X.find(l.legend.container).html(""):r.find(".legend").remove(),!!l.legend.show){for(var re=[],Te=[],We=!1,Je=l.legend.labelFormatter,je,pt,ft=0;ft<c.length;++ft)je=c[ft],je.label&&(pt=Je?Je(je.label,je):je.label,pt&&Te.push({label:pt,color:je.color}));if(l.legend.sorted)if(X.isFunction(l.legend.sorted))Te.sort(l.legend.sorted);else if(l.legend.sorted=="reverse")Te.reverse();else{var Tt=l.legend.sorted!="descending";Te.sort(function(Ge,at){return Ge.label==at.label?0:Ge.label<at.label!=Tt?1:-1})}for(var ft=0;ft<Te.length;++ft){var Ye=Te[ft];ft%l.legend.noColumns==0&&(We&&re.push("</tr>"),re.push("<tr>"),We=!0),re.push('<td class="legendColorBox"><div style="border:1px solid '+l.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+Ye.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+Ye.label+"</td>")}if(We&&re.push("</tr>"),re.length!=0){var Ce='<table style="font-size:smaller;color:'+l.grid.color+'">'+re.join("")+"</table>";if(l.legend.container!=null)X(l.legend.container).html(Ce);else{var oe="",pe=l.legend.position,Re=l.legend.margin;Re[0]==null&&(Re=[Re,Re]),pe.charAt(0)=="n"?oe+="top:"+(Re[1]+b.top)+"px;":pe.charAt(0)=="s"&&(oe+="bottom:"+(Re[1]+b.bottom)+"px;"),pe.charAt(1)=="e"?oe+="right:"+(Re[0]+b.right)+"px;":pe.charAt(1)=="w"&&(oe+="left:"+(Re[0]+b.left)+"px;");var ae=X('<div class="legend">'+Ce.replace('style="','style="position:absolute;'+oe+";")+"</div>").appendTo(r);if(l.legend.backgroundOpacity!=0){var ve=l.legend.backgroundColor;ve==null&&(ve=l.grid.backgroundColor,ve&&typeof ve=="string"?ve=X.color.parse(ve):ve=X.color.extract(ae,"background-color"),ve.a=1,ve=ve.toString());var xe=ae.children();X('<div style="position:absolute;width:'+xe.width()+"px;height:"+xe.height()+"px;"+oe+"background-color:"+ve+';"> </div>').prependTo(ae).css("opacity",l.legend.backgroundOpacity)}}}}}var Me=[],Ne=null;function qe(re,Te,We){var Je=l.grid.mouseActiveRadius,je=Je*Je+1,pt=null,ft=!1,Tt,Ye,Ce;for(Tt=c.length-1;Tt>=0;--Tt)if(We(c[Tt])){var oe=c[Tt],pe=oe.xaxis,Re=oe.yaxis,ae=oe.datapoints.points,ve=pe.c2p(re),xe=Re.c2p(Te),Ge=Je/pe.scale,at=Je/Re.scale;if(Ce=oe.datapoints.pointsize,pe.options.inverseTransform&&(Ge=Number.MAX_VALUE),Re.options.inverseTransform&&(at=Number.MAX_VALUE),oe.lines.show||oe.points.show)for(Ye=0;Ye<ae.length;Ye+=Ce){var dt=ae[Ye],st=ae[Ye+1];if(dt!=null&&!(dt-ve>Ge||dt-ve<-Ge||st-xe>at||st-xe<-at)){var Pt=Math.abs(pe.p2c(dt)-re),we=Math.abs(Re.p2c(st)-Te),Le=Pt*Pt+we*we;Le<je&&(je=Le,pt=[Tt,Ye/Ce])}}if(oe.bars.show&&!pt){var Ke,ht;switch(oe.bars.align){case"left":Ke=0;break;case"right":Ke=-oe.bars.barWidth;break;default:Ke=-oe.bars.barWidth/2}for(ht=Ke+oe.bars.barWidth,Ye=0;Ye<ae.length;Ye+=Ce){var dt=ae[Ye],st=ae[Ye+1],xt=ae[Ye+2];dt!=null&&(c[Tt].bars.horizontal?ve<=Math.max(xt,dt)&&ve>=Math.min(xt,dt)&&xe>=st+Ke&&xe<=st+ht:ve>=dt+Ke&&ve<=dt+ht&&xe>=Math.min(xt,st)&&xe<=Math.max(xt,st))&&(pt=[Tt,Ye/Ce])}}}return pt?(Tt=pt[0],Ye=pt[1],Ce=c[Tt].datapoints.pointsize,{datapoint:c[Tt].datapoints.points.slice(Ye*Ce,(Ye+1)*Ce),dataIndex:Ye,series:c[Tt],seriesIndex:Tt}):null}function bt(re){l.grid.hoverable&&ze("plothover",re,function(Te){return Te.hoverable!=!1})}function Fe(re){l.grid.hoverable&&ze("plothover",re,function(Te){return!1})}function Ve(re){E.isSelecting||ze("plotclick",re,function(Te){return Te.clickable!=!1})}function Ue(re){if(re.cancelable){if(!m.is(re.target)&&m.has(re.target).length===0){ze("plotleave",re,function(Te){});return}bt(it(re)),re.preventDefault()}}function it(re){if(!re||!re.originalEvent||re.pageX&&re.pageY)return re;var Te=re.originalEvent;if(Te.changedTouches.length===0)return re;var We=Te.changedTouches[0];return re.pageX=We.pageX,re.pageY=We.pageY,re}function ze(re,Te,We){var Je=m.offset(),je=Te.pageX-Je.left-b.left,pt=Te.pageY-Je.top-b.top,ft=N({left:je,top:pt});ft.pageX=Te.pageX,ft.pageY=Te.pageY,ft.ctrlKey=Te.ctrlKey,ft.metaKey=Te.metaKey;var Tt=qe(je,pt,We);if(Tt&&(Tt.pageX=parseInt(Tt.series.xaxis.p2c(Tt.datapoint[0])+Je.left+b.left,10),Tt.pageY=parseInt(Tt.series.yaxis.p2c(Tt.datapoint[1])+Je.top+b.top,10)),l.grid.autoHighlight){for(var Ye=0;Ye<Me.length;++Ye){var Ce=Me[Ye];Ce.auto==re&&!(Tt&&Ce.series==Tt.series&&Ce.point[0]==Tt.datapoint[0]&&Ce.point[1]==Tt.datapoint[1])&&zt(Ce.series,Ce.point)}Tt&&Bt(Tt.series,Tt.datapoint,re)}r.trigger(re,[ft,Tt])}function Xe(){var re=l.interaction.redrawOverlayInterval;if(re==-1){St();return}Ne||(Ne=setTimeout(St,re))}function St(){Ne=null,h.save(),f.clear(),h.translate(b.left,b.top);var re,Te;for(re=0;re<Me.length;++re)Te=Me[re],Te.series.bars.show?yn(Te.series,Te.point):Qt(Te.series,Te.point);h.restore(),P(v.drawOverlay,[h])}function Bt(re,Te,We){if(typeof re=="number"&&(re=c[re]),typeof Te=="number"){var Je=re.datapoints.pointsize;Te=re.datapoints.points.slice(Je*Te,Je*(Te+1))}var je=qt(re,Te);je==-1?(Me.push({series:re,point:Te,auto:We}),Xe()):We||(Me[je].auto=!1)}function zt(re,Te){if(re==null&&Te==null){Me=[],Xe();return}if(typeof re=="number"&&(re=c[re]),typeof Te=="number"){var We=re.datapoints.pointsize;Te=re.datapoints.points.slice(We*Te,We*(Te+1))}var Je=qt(re,Te);Je!=-1&&(Me.splice(Je,1),Xe())}function qt(re,Te){for(var We=0;We<Me.length;++We){var Je=Me[We];if(Je.series==re&&Je.point[0]==Te[0]&&Je.point[1]==Te[1])return We}return-1}function Qt(re,Te){var We=Te[0],Je=Te[1],je=re.xaxis,pt=re.yaxis,ft=typeof re.highlightColor=="string"?re.highlightColor:X.color.parse(re.color).scale("a",.5).toString();if(!(We<je.min||We>je.max||Je<pt.min||Je>pt.max)){var Tt=re.points.radius+re.points.lineWidth/2;h.lineWidth=Tt,h.strokeStyle=ft;var Ye=1.5*Tt;We=je.p2c(We),Je=pt.p2c(Je),h.beginPath(),re.points.symbol=="circle"?h.arc(We,Je,Ye,0,2*Math.PI,!1):re.points.symbol(h,We,Je,Ye,!1),h.closePath(),h.stroke()}}function yn(re,Te){var We=typeof re.highlightColor=="string"?re.highlightColor:X.color.parse(re.color).scale("a",.5).toString(),Je=We,je;switch(re.bars.align){case"left":je=0;break;case"right":je=-re.bars.barWidth;break;default:je=-re.bars.barWidth/2}h.lineWidth=re.bars.lineWidth,h.strokeStyle=We,ue(Te[0],Te[1],Te[2]||0,je,je+re.bars.barWidth,function(){return Je},re.xaxis,re.yaxis,h,re.bars.horizontal,re.bars.lineWidth)}function Zt(re,Te,We,Je){if(typeof re=="string")return re;for(var je=u.createLinearGradient(0,We,0,Te),pt=0,ft=re.colors.length;pt<ft;++pt){var Tt=re.colors[pt];if(typeof Tt!="string"){var Ye=X.color.parse(Je);Tt.brightness!=null&&(Ye=Ye.scale("rgb",Tt.brightness)),Tt.opacity!=null&&(Ye.a*=Tt.opacity),Tt=Ye.toString()}je.addColorStop(pt/(ft-1),Tt)}return je}}X.plot=function(r,a,i){var y=new t(X(r),a,i,X.plot.plugins);return y},X.plot.version="0.8.3",X.plot.plugins=[],X.fn.plot=function(r,a){return this.each(function(){X.plot(this,r,a)})};function n(r,a){return a*Math.floor(r/a)}}(jQuery)},4027:()=>{(function(X){function L(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},r=null;function a(b){t.active&&(m(b),e.getPlaceholder().trigger("plotselecting",[c()]))}function i(b){b.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),f(t.first,b),t.active=!0,r=function(g){y(g)},X(document).one("mouseup",r))}function y(b){return r=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,m(b),x()?l(b):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function c(){if(!x()||!t.show)return null;var b={},g=t.first,p=t.second,v=e.getAxes(),E=!0;return X.each(v,function(P,S){S.used&&(anyUsed=!1)}),X.each(v,function(P,S){if(S.used||E){var M=S.c2p(g[S.direction]),R=S.c2p(p[S.direction]);b[P]={from:Math.min(M,R),to:Math.max(M,R)}}}),b}function l(b){var g=c();g.ctrlKey=b.ctrlKey,g.metaKey=b.metaKey,e.getPlaceholder().trigger("plotselected",[g]),g.xaxis&&g.yaxis&&e.getPlaceholder().trigger("selected",[{x1:g.xaxis.from,y1:g.yaxis.from,x2:g.xaxis.to,y2:g.yaxis.to}])}function d(b,g,p){return g<b?b:g>p?p:g}function f(b,g){var p=e.getOptions(),v=e.getPlaceholder().offset(),E=e.getPlotOffset();b.x=d(0,g.pageX-v.left-E.left,e.width()),b.y=d(0,g.pageY-v.top-E.top,e.height()),p.selection.mode=="y"&&(b.x=b==t.first?0:e.width()),p.selection.mode=="x"&&(b.y=b==t.first?0:e.height())}function m(b){b.pageX!=null&&(f(t.second,b),x()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):u(!0))}function u(b){t.show&&(t.show=!1,e.triggerRedrawOverlay(),b||e.getPlaceholder().trigger("plotunselected",[]))}function h(b,g){var p,v,E,P,S=e.getAxes();for(var M in S)if(p=S[M],p.direction==g&&(P=g+p.n+"axis",!b[P]&&p.n==1&&(P=g+"axis"),b[P])){v=b[P].from,E=b[P].to;break}if(b[P]||(p=g=="x"?e.getXAxes()[0]:e.getYAxes()[0],v=b[g+"1"],E=b[g+"2"]),v!=null&&E!=null&&v>E){var R=v;v=E,E=R}return{from:v,to:E,axis:p}}function C(b,g){var p,v,E=e.getOptions();E.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(v=h(b,"x"),t.first.x=v.axis.p2c(v.from),t.second.x=v.axis.p2c(v.to)),E.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(v=h(b,"y"),t.first.y=v.axis.p2c(v.from),t.second.y=v.axis.p2c(v.to)),t.show=!0,e.triggerRedrawOverlay(),!g&&x()&&l()}function x(){var b=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=b&&Math.abs(t.second.y-t.first.y)>=b}e.clearSelection=u,e.setSelection=C,e.getSelection=c,e.hooks.bindEvents.push(function(b,g){var p=b.getOptions();p.selection.mode!=null&&(g.mousemove(a),g.mousedown(i))}),e.hooks.drawOverlay.push(function(b,g){if(t.show&&x()){var p=b.getPlotOffset(),v=b.getOptions();g.save(),g.translate(p.left,p.top);var E=X.color.parse(v.selection.color);g.strokeStyle=E.scale("a",.8).toString(),g.lineWidth=1,g.lineJoin=v.selection.shape,g.fillStyle=E.scale("a",.4).toString();var P=Math.min(t.first.x,t.second.x)+.5,S=Math.min(t.first.y,t.second.y)+.5,M=Math.abs(t.second.x-t.first.x)-1,R=Math.abs(t.second.y-t.first.y)-1;g.fillRect(P,S,M,R),g.strokeRect(P,S,M,R),g.restore()}}),e.hooks.shutdown.push(function(b,g){g.unbind("mousemove",a),g.unbind("mousedown",i),r&&(X(document).unbind("mouseup",r),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}X.plot.plugins.push({init:L,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(X){var L={series:{stack:null}};function e(t){function n(a,i){for(var y=null,c=0;c<i.length&&a!=i[c];++c)i[c].stack==a.stack&&(y=i[c]);return y}function r(a,i,y){if(!(i.stack==null||i.stack===!1)){var c=n(i,a.getData());if(c){for(var l=y.pointsize,d=y.points,f=c.datapoints.pointsize,m=c.datapoints.points,u=[],h,C,x,b,g,p,v=i.lines.show,E=i.bars.horizontal,P=l>2&&(E?y.format[2].x:y.format[2].y),S=v&&i.lines.steps,M=E?1:0,R=E?0:1,I=0,A=0,O,N;!(I>=d.length&&A>=m.length);){if(O=u.length,I<d.length&&d[I]==null){for(N=0;N<l;++N)u.push(d[I+N]);I+=l}else if(I>=d.length){for(N=0;N<l;++N)u.push(m[A+N]);P&&(u[O+2]=m[A+R]),A+=f}else if(A>=m.length){for(N=0;N<l;++N)u.push(d[I+N]);I+=l}else if(A<m.length&&m[A]==null)A+=f;else{if(h=d[I+M],C=d[I+R],b=m[A+M],g=m[A+R],p=0,h==b){for(N=0;N<l;++N)u.push(d[I+N]);u[O+R]+=g,p=g,I+=l,A+=f}else if(h>b){if(I==0){for(N=0;N<l;++N)u.push(m[A+N]);p=g}if(I>0&&d[I-l]!=null){for(x=0,u.push(b),u.push(x+g),N=2;N<l;++N)u.push(d[I+N]);p=g}A+=f}else{for(N=0;N<l;++N)u.push(d[I+N]);A>0&&m[A-f]!=null&&(p=0),u[O+R]+=p,I+=l}fromgap=!1,O!=u.length&&P&&(u[O+2]=p)}if(S&&O!=u.length&&O>0&&u[O]!=null&&u[O]!=u[O-l]&&u[O+1]!=u[O-l+1]){for(N=0;N<l;++N)u[O+l+N]=u[O+N];u[O+1]=u[O-l+1]}}y.points=u}}}t.hooks.processDatapoints.push(r)}X.plot.plugins.push({init:e,options:L,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(X){var L={series:{stackpercent:null}};function e(t){var n={},r=!1,a={};function i(l,d,f,m){if(r||(r=!0,a=y(l.getData())),d.stackpercent==!0){var u=f.length;d.percents=[];var h=0,C=1;d.bars&&d.bars.horizontal&&d.bars.horizontal===!0&&(h=1,C=0);for(var x=0;x<u;x++){var b=a[f[x][h]+""];b>0?d.percents.push(f[x][C]*100/b):d.percents.push(0)}}}function y(l){var d=l.length,f={};if(d>0){for(var m=0;m<d;m++)if(l[m].stackpercent){var u=0,h=1;l[m].bars&&l[m].bars.horizontal&&l[m].bars.horizontal===!0&&(u=1,h=0);for(var C=l[m].data.length,x=0;x<C;x++){var b=0;l[m].data[x][1]!=null&&(b=l[m].data[x][h]),f[l[m].data[x][u]+""]?f[l[m].data[x][u]+""]+=b:f[l[m].data[x][u]+""]=b}}}return f}function c(l,d,f){if(d.stackpercent){r||(a=y(l.getData()));var m=[],u=0,h=1;d.bars&&d.bars.horizontal&&d.bars.horizontal===!0&&(u=1,h=0);for(var C=0;C<f.points.length;C+=3)n[f.points[C+u]]||(n[f.points[C+u]]=0),m[C+u]=f.points[C+u],m[C+h]=f.points[C+h]+n[f.points[C+u]],m[C+2]=n[f.points[C+u]],n[f.points[C+u]]+=f.points[C+h],a[m[C+u]+""]>0?(m[C+h]=m[C+h]*100/a[m[C+u]+""],m[C+2]=m[C+2]*100/a[m[C+u]+""]):(m[C+h]=0,m[C+2]=0);f.points=m}}t.hooks.processRawData.push(i),t.hooks.processDatapoints.push(c)}X.plot.plugins.push({init:e,options:L,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(X){var L={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(d,f){return f*Math.floor(d/f)}function t(d,f,m,u){if(typeof d.strftime=="function")return d.strftime(f);var h=function(P,S){return P=""+P,S=""+(S??"0"),P.length==1?S+P:P},C=[],x=!1,b=d.getHours(),g=b<12;m==null&&(m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),u==null&&(u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var p;b>12?p=b-12:b==0?p=12:p=b;for(var v=0;v<f.length;++v){var E=f.charAt(v);if(x){switch(E){case"a":E=""+u[d.getDay()];break;case"b":E=""+m[d.getMonth()];break;case"d":E=h(d.getDate(),"");break;case"e":E=h(d.getDate()," ");break;case"h":case"H":E=h(b);break;case"I":E=h(p);break;case"l":E=h(p," ");break;case"m":E=h(d.getMonth()+1,"");break;case"M":E=h(d.getMinutes());break;case"q":E=""+(Math.floor(d.getMonth()/3)+1);break;case"S":E=h(d.getSeconds());break;case"y":E=h(d.getFullYear()%100);break;case"Y":E=""+d.getFullYear();break;case"p":E=g?"am":"pm";break;case"P":E=g?"AM":"PM";break;case"w":E=""+d.getDay();break}C.push(E),x=!1}else E=="%"?x=!0:C.push(E)}return C.join("")}function n(d){function f(C,x,b,g){C[x]=function(){return b[g].apply(b,arguments)}}var m={date:d};d.strftime!=null&&f(m,"strftime",d,"strftime"),f(m,"getTime",d,"getTime"),f(m,"setTime",d,"setTime");for(var u=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],h=0;h<u.length;h++)f(m,"get"+u[h],d,"getUTC"+u[h]),f(m,"set"+u[h],d,"setUTC"+u[h]);return m}function r(d,f){if(f.timezone=="browser")return new Date(d);if(!f.timezone||f.timezone=="utc")return n(new Date(d));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var m=new timezoneJS.Date;return m.setTimezone(f.timezone),m.setTime(d),m}else return n(new Date(d))}var a={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},i=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],y=i.concat([[3,"month"],[6,"month"],[1,"year"]]),c=i.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function l(d){d.hooks.processOptions.push(function(f,m){X.each(f.getAxes(),function(u,h){var C=h.options;C.mode=="time"&&(h.tickGenerator=function(x){var b=[],g=r(x.min,C),p=0,v=C.tickSize&&C.tickSize[1]==="quarter"||C.minTickSize&&C.minTickSize[1]==="quarter"?c:y;C.minTickSize!=null&&(typeof C.tickSize=="number"?p=C.tickSize:p=C.minTickSize[0]*a[C.minTickSize[1]]);for(var E=0;E<v.length-1&&!(x.delta<(v[E][0]*a[v[E][1]]+v[E+1][0]*a[v[E+1][1]])/2&&v[E][0]*a[v[E][1]]>=p);++E);var P=v[E][0],S=v[E][1];if(S=="year"){if(C.minTickSize!=null&&C.minTickSize[1]=="year")P=Math.floor(C.minTickSize[0]);else{var M=Math.pow(10,Math.floor(Math.log(x.delta/a.year)/Math.LN10)),R=x.delta/a.year/M;R<1.5?P=1:R<3?P=2:R<7.5?P=5:P=10,P*=M}P<1&&(P=1)}x.tickSize=C.tickSize||[P,S];var I=x.tickSize[0];S=x.tickSize[1];var A=I*a[S];S=="second"?g.setSeconds(e(g.getSeconds(),I)):S=="minute"?g.setMinutes(e(g.getMinutes(),I)):S=="hour"?g.setHours(e(g.getHours(),I)):S=="month"?g.setMonth(e(g.getMonth(),I)):S=="quarter"?g.setMonth(3*e(g.getMonth()/3,I)):S=="year"&&g.setFullYear(e(g.getFullYear(),I)),g.setMilliseconds(0),A>=a.minute&&g.setSeconds(0),A>=a.hour&&g.setMinutes(0),A>=a.day&&g.setHours(0),A>=a.day*4&&g.setDate(1),A>=a.month*2&&g.setMonth(e(g.getMonth(),3)),A>=a.quarter*2&&g.setMonth(e(g.getMonth(),6)),A>=a.year&&g.setMonth(0);var O=0,N=Number.NaN,o;do if(o=N,N=g.getTime(),b.push(N),S=="month"||S=="quarter")if(I<1){g.setDate(1);var w=g.getTime();g.setMonth(g.getMonth()+(S=="quarter"?3:1));var K=g.getTime();g.setTime(N+O*a.hour+(K-w)*I),O=g.getHours(),g.setHours(0)}else g.setMonth(g.getMonth()+I*(S=="quarter"?3:1));else S=="year"?g.setFullYear(g.getFullYear()+I):g.setTime(N+A);while(N<x.max&&N!=o);return b},h.tickFormatter=function(x,b){var g=r(x,b.options);if(C.timeformat!=null)return t(g,C.timeformat,C.monthNames,C.dayNames);var p=b.options.tickSize&&b.options.tickSize[1]=="quarter"||b.options.minTickSize&&b.options.minTickSize[1]=="quarter",v=b.tickSize[0]*a[b.tickSize[1]],E=b.max-b.min,P=C.twelveHourClock?" %p":"",S=C.twelveHourClock?"%I":"%H",M;v<a.minute?M=S+":%M:%S"+P:v<a.day?E<2*a.day?M=S+":%M"+P:M="%b %d "+S+":%M"+P:v<a.month?M="%b %d":p&&v<a.quarter||!p&&v<a.year?E<a.year?M="%b":M="%b %Y":p&&v<a.year?E<a.year?M="Q%q":M="Q%q %Y":M="%Y";var R=t(g,M,C.monthNames,C.dayNames);return R})})})}X.plot.plugins.push({init:l,options:L,name:"time",version:"1.0"}),X.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=9378.js.map