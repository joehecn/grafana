"use strict";(this.webpackChunkGrafanaToWebComponent=this.webpackChunkGrafanaToWebComponent||[]).push([[6987],{74156:(xt,Ae,S)=>{S.d(Ae,{q:()=>Ue});var y=S(41407),ee=S(39953),He=S(82803);const J=10,Ue=({colorPalette:te,min:oe,max:he,display:se,hoverValue:ue,useStopsPercentage:Ce})=>{const[Me,de]=(0,ee.useState)([]),[me,pe]=(0,ee.useState)({isShown:!1,value:0}),[ye,we]=(0,ee.useState)(null),re=(0,He.l4)(),q=Ie(re,Me);(0,ee.useEffect)(()=>{de(ke({colorArray:te,stops:J,useStopsPercentage:Ce}))},[te,Ce]);const Fe=Pe=>{const Oe=Pe.nativeEvent.offsetX,Ke=Pe.currentTarget.offsetWidth,Re=Math.floor(Oe*100/Ke+1),je=Math.floor((he-oe)*Re/100+oe);pe({isShown:!0,value:je}),we(Re)},le=()=>{pe({isShown:!1,value:0})};return(0,ee.useEffect)(()=>{we(ue==null?null:s((ue-oe)/(he-oe)))},[ue,oe,he]),ee.createElement("div",{className:q.scaleWrapper,onMouseMove:Fe,onMouseLeave:le},ee.createElement("div",{className:q.scaleGradient},se&&(me.isShown||ue!==void 0)&&ee.createElement("div",{className:q.followerContainer},ee.createElement("div",{className:q.follower,style:{left:`${ye}%`}}))),se&&ee.createElement("div",{className:q.followerContainer},ee.createElement("div",{className:q.legendValues},ee.createElement("span",null,se(oe)),ee.createElement("span",null,se(he))),ye!=null&&(me.isShown||ue!==void 0)&&ee.createElement("span",{className:q.hoverValue,style:{left:`${ye}%`}},se(ue??me.value))))},ke=({colorArray:te,stops:oe,useStopsPercentage:he=!0})=>{const se=te.length;if(he&&se<=20){const de=1/se*100;let me=0;const pe=[];for(const ye of te)me>0?pe.push(`${ye} ${me}%`):pe.push(ye),me+=de,pe.push(`${ye} ${me}%`);return pe}const ue=te[se-1],Ce=Math.ceil(se/oe),Me=new Set;for(let de=0;de<se;de+=Ce)Me.add(te[de]);return Me.add(ue),[...Me]};function s(te){return te>1?100:te<0?0:te*100}const Ie=(te,oe)=>({scaleWrapper:(0,y.css)`
    width: 100%;
    font-size: 11px;
    opacity: 1;
  `,scaleGradient:(0,y.css)`
    background: linear-gradient(90deg, ${oe.join()});
    height: 10px;
    pointer-events: none;
  `,legendValues:(0,y.css)`
    display: flex;
    justify-content: space-between;
    pointer-events: none;
  `,hoverValue:(0,y.css)`
    position: absolute;
    margin-top: -14px;
    padding: 3px 15px;
    background: ${te.colors.background.primary};
    transform: translateX(-50%);
  `,followerContainer:(0,y.css)`
    position: relative;
    pointer-events: none;
    white-space: nowrap;
  `,follower:(0,y.css)`
    position: absolute;
    height: 14px;
    width: 14px;
    border-radius: 50%;
    transform: translateX(-50%) translateY(-50%);
    border: 2px solid ${te.colors.text.primary};
    margin-top: 5px;
  `})},16568:(xt,Ae,S)=>{S.r(Ae),S.d(Ae,{plugin:()=>qt});var y=S(39953),ee=S(40530),He=S(82909),J=S(89591),Ue=S(63671),ke=S(32688),s=S(34547),Ie=S(41456),te=S(86246),oe=S(74156),he=S(12223),se=S(20454),ue=S(38637);const Ce=[{label:"Size",value:s.kW.Size,description:"Split the buckets based on size"},{label:"Count",value:s.kW.Count,description:"Split the buckets based on count"}],Me=[{label:"Split",value:s.kW.Size,description:"Split the buckets based on size"}],de=({value:e,onChange:a,item:t})=>y.createElement(he.Lh,null,y.createElement(se.S,{value:e?.mode||s.kW.Size,options:e?.scale?.type===s.wf.Log?Me:Ce,onChange:n=>{a({...e,mode:n})}}),y.createElement(ue.I,{value:e?.value??"",placeholder:"Auto",onChange:n=>{a({...e,value:n.currentTarget.value})}}));function me(e,a,t,n){a.addCustomEditor({id:"xBuckets",path:`${e}xBuckets`,name:"X Bucket",editor:de,category:n,defaultValue:{mode:s.kW.Size}}),a.addCustomEditor({id:"yBuckets",path:`${e}yBuckets`,name:"Y Bucket",editor:de,category:n,defaultValue:{mode:s.kW.Size}}),a.addCustomEditor({id:"yBuckets-scale",path:`${e}yBuckets.scale`,name:"Y Bucket scale",category:n,editor:Ie.Y,defaultValue:{type:s.wf.Linear}})}var pe=S(71476),ye=S(7959),we=S(69330),re=S(83502),q=S(51226),Fe=S(5195),le=S(80742),Pe=S(82837),Oe=S(99331);const{abs:Ke,pow:Re}=Math,je=new Map;function Xe(e,a,t,n){let l=[],i=n.map(Oe.d);for(let o=a;o<t;o++){let r=Ke(o),u=(0,Oe.O)(Re(e,o),r);for(let c=0;c<n.length;c++){let x=n[c]*u,d=(x>=0&&o>=0?0:r)+(o>=i[c]?0:i[c]),h=(0,Oe.O)(x,d);l.push(h),je.set(h,d)}}return l}const gt=e=>e%1===0,Je=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],qe=Xe(10,-16,0,Je),_e=Xe(10,0,16,Je),vt=_e.filter(gt),_t=qe.concat(_e),et=qe.concat(vt),xe=1*1e3,ge=60*xe,ve=60*ge,ae=24*ve,fe=365*ae,tt=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,xe,2*xe,4*xe,5*xe,10*xe,15*xe,20*xe,30*xe,ge,2*ge,4*ge,5*ge,10*ge,15*ge,20*ge,30*ge,ve,2*ve,4*ve,6*ve,8*ve,12*ve,18*ve,ae,2*ae,3*ae,4*ae,5*ae,6*ae,7*ae,10*ae,15*ae,30*ae,45*ae,60*ae,90*ae,180*ae,fe,2*fe,3*fe,4*fe,5*fe,6*fe,7*fe,8*fe,9*fe,10*fe],St={id:ye.W.heatmap,name:"Create heatmap",description:"Generate heatmap data from source data.",defaultOptions:{},operator:(e,a)=>t=>t.pipe((0,pe.U)(n=>St.transformer(e,a)(n))),transformer:e=>a=>{const t=lt(a,e);return e.keepOriginalData?[t,...a]:[t]}};function at(e){return e==="+Inf"?1/0:e==="-Inf"?-1/0:+(e??0)}function kt(e,a){return at(e)-at(a)}function Be(e){return e?.meta?.custom??{}}function Ne(e){let a=!1;for(let t of e.fields)switch(t.name){case"y":case"yMin":case"yMax":if(a)return!1;a=!0}return a}function Mt(e){const a=e.frame.fields[0],t=a.values,n=e.frame.fields.filter((p,L)=>p.type===J.fS.number&&L>0),l=t.length*n.length,i=new Array(l),o=new Array(l),r=new Array(l),u=n.map(p=>p.values.slice());u.forEach((p,L)=>{for(let E=0;E<p.length;E++)r[u.length*E+L]=p[E]});const c=Array.from({length:n.length},(p,L)=>L);for(let p=0,L=0,E=0;p<l;L=++p%c.length)o[p]=c[L],L===0&&p>=c.length&&E++,i[p]=t[E];let x=n[0].labels?.le!=null?"yMax":"y";switch(e.layout){case s.kv.le:x="yMax";break;case s.kv.ge:x="yMin";break;case s.kv.unknown:x="y";break}const d={yOrdinalDisplay:n.map(p=>(0,we.CZ)(p,e.frame)),yMatchWithLabel:Object.keys(n[0].labels??{})[0]};if(d.yMatchWithLabel&&(d.yOrdinalLabel=n.map(p=>p.labels?.[d.yMatchWithLabel]??""),d.yMatchWithLabel==="le"&&(d.yMinDisplay="0.0")),e.unit?.length||e.decimals!=null){const p=(0,re.Cf)(e.unit??"short");d.yMinDisplay&&(d.yMinDisplay=(0,re.zc)(p(0,e.decimals))),d.yOrdinalDisplay=d.yOrdinalDisplay.map(L=>{let E=+L;return Number.isNaN(E)?L:(0,re.zc)(p(E,e.decimals))})}const h={...n[0].config};return h.displayNameFromDS&&delete h.displayNameFromDS,{length:i.length,refId:e.frame.refId,meta:{type:q.P.HeatmapCells,custom:d},fields:[{name:a.type===J.fS.time?"xMax":"x",type:a.type,values:i,config:a.config},{name:x,type:J.fS.number,values:o,config:{unit:"short"}},{name:e.value?.length?e.value:"Value",type:J.fS.number,values:r,config:h,display:n[0].display}]}}function ea(e){e=e.slice(),e.sort((t,n)=>kt(t.name,n.name));const a=e.map(t=>t.fields[1].values.slice());return a.reverse(),a.forEach((t,n)=>{if(n<a.length-1)for(let l=0;l<t.length;l++)t[l]-=a[n+1][l]}),a.reverse(),e.map((t,n)=>({...t,fields:[t.fields[0],{...t.fields[1],values:a[n]}]}))}function lt(e,a){let t,n,l=0;for(let p of e)p.fields.find(E=>E.type===J.fS.time)&&(l+=p.length);let i=Array(l),o=Array(l),r=0;for(let p of e){const L=p.fields.find(T=>T.type===J.fS.time);if(!L)continue;t||(t=L);const E=L.values;for(let T of p.fields)if(T!==L&&T.type===J.fS.number){const w=T.values;for(let v=0;v<E.length;v++,r++)i[r]=E[v],o[r]=w[v];n||(n=T)}}if(!t||!n)throw"no heatmap fields found";if(!i.length||!o.length)throw"no values found";const u=a.xBuckets??{},c=a.yBuckets??{};if(u.scale?.type===s.wf.Log)throw"X axis only supports linear buckets";const x=a.yBuckets?.scale??{type:s.wf.Linear},d=wt(i,o,{xSorted:(0,Pe.lP)(i),xTime:t.type===J.fS.time,xMode:u.mode,xSize:u.mode===s.kW.Size?(0,Fe.iX)((0,Fe.RA)(u.value??"")):u.value?+u.value:void 0,yMode:c.mode,ySize:c.value?+c.value:void 0,yLog:x?.type===s.wf.Log?x?.log:void 0});return{length:d.x.length,name:(0,we.CZ)(n),meta:{type:q.P.HeatmapCells},fields:[{name:"xMin",type:t.type,values:d.x,config:t.config},{name:"yMin",type:J.fS.number,values:d.y,config:{...n.config,custom:{scaleDistribution:x}}},{name:"Count",type:J.fS.number,values:d.count,config:{unit:"short"}}]}}function wt(e,a,t){let n=e.length,l=t?.xSorted??!1,i=t?.ySorted??!1,o=l?e[0]:1/0,r=i?a[0]:1/0,u=l?e[n-1]:-1/0,c=i?a[n-1]:-1/0,x=t?.yLog;for(let M=0;M<n;M++)l||(o=Math.min(o,e[M]),u=Math.max(u,e[M])),i||(!x||a[M]>0)&&(r=Math.min(r,a[M]),c=Math.max(c,a[M]));let d=t?.xSize??0,h=t?.ySize??0,p=t?.xMode,L=t?.yMode;if((!Number.isFinite(d)||d<=0)&&(p=s.kW.Count,d=20),(!Number.isFinite(h)||h<=0)&&(L=s.kW.Count,h=10),p===s.kW.Count){let M=(u-o)/Math.max(d-1,1),b=t?.xTime?tt:et,H=b.findIndex($=>$>M)-1;d=b[Math.max(H,0)]}if(L===s.kW.Count){let M=(c-r)/Math.max(h-1,1),b=t?.yTime?tt:et,H=b.findIndex($=>$>M)-1;h=b[Math.max(H,0)]}let E=t?.xCeil?M=>(0,le.UO)(M,d):M=>(0,le.mB)(M,d),T=t?.yCeil?M=>(0,le.UO)(M,h):M=>(0,le.mB)(M,h);if(x){h=1/(t?.ySize??1);let M=x===2?Math.log2:Math.log10;T=t?.yCeil?b=>(0,le.UO)(M(b),h):b=>(0,le.mB)(M(b),h)}let w=E(o),v=E(u),P=T(r),I=T(c),X=Math.round((v-w)/d)+1,O=Math.round((I-P)/h)+1,[G,N,W]=Bt(X,O,w,d,P,h,x);for(let M=0;M<n;M++){if(x&&a[M]<=0)continue;const b=(E(e[M])-w)/d,H=(T(a[M])-P)/h,$=b*O+H;W[$]++}return{x:G,y:N,count:W}}function Bt(e,a,t,n,l,i,o){const r=e*a,u=new Array(r),c=new Array(r),x=new Array(r);for(let d=0,h=0,p=t;d<r;h=++d%a)x[d]=0,o?c[d]=o**(l+h*i):c[d]=l+h*i,h===0&&d>=a&&(p+=n),u[d]=p;return[u,c,x]}var Ct=S(41407),nt=S(52716),bt=S(30639),it=S(82803),Lt=S(31276),ot=S(96248),Et=S(79469),It=S(70393),Pt=S(41013),Ot=S(61068),Nt=S(4919),Vt=S(97433),st=S(80854);const Dt=e=>e.hover.seriesIdx===2?y.createElement(st.H,{data:e.data.exemplars,rowIndex:e.hover.dataIdx,header:"Exemplar"}):y.createElement(At,{...e}),At=({data:e,hover:a,showHistogram:t,scopedVars:n,replaceVars:l})=>{const i=a.dataIdx,o=e.heatmap?.fields[0],r=e.heatmap?.fields[1],u=e.heatmap?.fields[2],c=m=>{if(o?.display)return(0,re.zc)(o.display(m));if(o?.type===J.fS.time){const V="YYYY-MM-DD HH:mm:ss";return(0,Vt.h4)().getCurrent()?.formatDate(m,V)}return`${m}`},x=o?.values,d=r?.values,h=u?.values,p=Be(e.heatmap),L=r?.display?m=>(0,re.zc)(r.display(m)):m=>`${m}`,E=i%e.yBucketCount;let T,w,v;if(p.yOrdinalDisplay){const m=e.yLayout===s.kv.le?E-1:E,V=e.yLayout===s.kv.le?E:E+1;T=m<0?p.yMinDisplay:`${p.yOrdinalDisplay[m]}`,w=`${p.yOrdinalDisplay[V]}`,(!p.yOrdinalLabel||Number.isNaN(+p.yOrdinalLabel[0]))&&(v=e.yLayout===s.kv.le?w:T)}else{const m=d?.[E];if(e.yLayout===s.kv.le)if(w=`${m}`,e.yLog){let Y=(e.yLog===2?Math.log2:Math.log10)(m)-1/e.yLogSplit;T=`${e.yLog**Y}`}else T=`${m-e.yBucketSize}`;else if(T=`${m}`,e.yLog){let Y=(e.yLog===2?Math.log2:Math.log10)(m)+1/e.yLogSplit;w=`${e.yLog**Y}`}else w=`${m+e.yBucketSize}`}let P,I;e.xLayout===s.kv.le?(I=x?.[i],P=I-e.xBucketSize):(P=x?.[i],I=P+e.xBucketSize);const X=h?.[i],O=e.heatmap?.fields.filter(m=>!m.config.custom?.hideFrom?.tooltip),G=[],N=new Set;for(const m of O??[]){if(m.config.links&&m.config.links.length>0&&e.heatmap){const Y=n.find(U=>U&&U.__dataContext&&U.__dataContext.value.field.name===v);m.getLinks=(0,nt.oB)(e.heatmap,m,Y||{},l)}if(m.getLinks){const Y=m.values[i],U=m.display?m.display(Y):{text:`${Y}`,numeric:+Y};m.getLinks({calculatedValue:U,valueRowIndex:i}).forEach(R=>{const Z=`${R.title}/${R.href}`;N.has(Z)||(G.push(R),N.add(Z))})}}let W=(0,y.useRef)(null),M=150,b=50,H=Math.round(M*devicePixelRatio),$=Math.round(b*devicePixelRatio);(0,y.useEffect)(()=>{if(t){let m=W.current?.getContext("2d");if(m&&x&&d&&h){let V=i;for(;x[V--]===x[i];);V++;let Y=V+e.yBucketCount,U=0,R=V;for(;R<Y;){let ie=h[R];U=Math.max(U,ie),R++}let Z=new Path2D,D=new Path2D;R=V;let ne=0;for(;R<Y;){let ie=h[R];if(ie>0){let Q=ie/U,f=ne/(e.yBucketCount+1);(R===i?Z:D).rect(Math.round(H*f),Math.round($*(1-Q)),Math.round(H/e.yBucketCount),Math.round($*Q))}R++,ne++}m.clearRect(0,0,H,$),m.fillStyle="#ffffff80",m.fill(D),m.fillStyle="#ff000080",m.fill(Z)}}},[i]);const[_]=(0,y.useState)(()=>e.heatmap?.meta?.type===q.P.HeatmapCells&&!Ne(e.heatmap));if(_)return y.createElement("div",null,y.createElement(st.H,{data:e.heatmap,rowIndex:i}));const F=()=>{if(v)return y.createElement("div",null,"Name: ",v);switch(e.yLayout){case s.kv.unknown:return y.createElement("div",null,L(T))}return y.createElement("div",null,"Bucket: ",L(T)," - ",L(w))};return y.createElement(y.Fragment,null,y.createElement("div",null,y.createElement("div",null,c(P)),e.xLayout!==s.kv.unknown&&y.createElement("div",null,c(I))),t&&y.createElement("canvas",{width:H,height:$,ref:W,style:{width:H+"px",height:$+"px"}}),y.createElement("div",null,F(),y.createElement("div",null,(0,we.CZ)(u,e.heatmap),": ",e.display(X))),G.length>0&&y.createElement(he.wc,null,G.map((m,V)=>y.createElement(Nt.Qj,{key:V,icon:"external-link-alt",target:m.target,href:m.href,onClick:m.onClick,fill:"text",style:{width:"100%"}},m.title))))};var Ht=S(94123),Ve=S(52226),ze=S(92697),rt=S(36316),Ft=S(40793),Rt=S(80115),ct=S(14197);function zt(e){const{dataRef:a,theme:t,eventBus:n,onhover:l,onclick:i,onzoom:o,isToolTipOpen:r,timeZone:u,getTimeRange:c,cellGap:x,hideLE:d,hideGE:h,yAxisConfig:p,ySizeDivisor:L,sync:E,eventsScope:T="__global_"}=e,w="x";let v="time",P=!0;a.current?.heatmap?.fields[0].type!==J.fS.time&&(v=a.current?.heatmap?.fields[0].config?.unit??"x",P=!1);const I=devicePixelRatio;let X=a.current?.heatmap?.meta?.type;const O=t.visualization.getColorByName(e.exemplarColor);let G,N,W=new Rt.U(u),M;W.addHook("init",f=>{f.root.querySelectorAll(".u-cursor-pt").forEach(k=>{Object.assign(k.style,{borderRadius:"0",border:"1px solid white",background:"transparent"})}),i&&f.over.addEventListener("mouseup",k=>{f.cursor.drag._x||f.cursor.drag._y||i(k)},!0)}),o&&W.addHook("setSelect",f=>{o({xMin:f.posToVal(f.select.left,w),xMax:f.posToVal(f.select.left+f.select.width,w)}),f.setSelect({left:0,top:0,width:0,height:0},!1)}),P&&W.addHook("setData",f=>{let{min:k,max:g}=f.scales.x,B=c().from.valueOf(),C=c().to.valueOf();(k!==B||g!==C)&&queueMicrotask(()=>{f.setScale(w,{min:B,max:C})})}),W.addHook("syncRect",(f,k)=>{M=k});const b={point:{[v]:null},data:a.current?.heatmap},H=new rt.es(b);let $;l&&W.addHook("setLegend",f=>{if(f.cursor.idxs!=null)for(let k=0;k<f.cursor.idxs.length;k++){const g=f.cursor.idxs[k];if(g!=null){const{left:B,top:C}=f.cursor;b.rowIndex=g,b.point[v]=f.posToVal(B,w),n.publish(H),r.current||($&&(clearTimeout($),$=0),l({seriesIdx:k,dataIdx:g,pageX:M.left+B,pageY:M.top+C}));return}}r.current||$||($=setTimeout(()=>{l(null),b.rowIndex=void 0,b.point[v]=null,n.publish(H)},100))}),W.addHook("drawClear",f=>{G=G||new ct.lW(0,0,f.bbox.width,f.bbox.height),G.clear(),f.series.forEach((k,g)=>{g>0&&(k._paths=null)})}),W.setMode(2),W.addScale({scaleKey:w,isTime:P,orientation:s.wN.Horizontal,direction:s.bQ.Right,range:(f,k,g)=>{if(P)return[c().from.valueOf(),c().to.valueOf()];if(a.current?.xLayout===s.kv.le)return[k-a.current?.xBucketSize,g];if(a.current?.xLayout===s.kv.ge)return[k,g+a.current?.xBucketSize];{let B=a.current?.xBucketSize/2;return[k-B,g+B]}}});let _;if(!P){_=[];for(let f=0;f<10;f++)_.push(f*a.current?.xBucketSize)}W.addAxis({scaleKey:w,placement:s.LB.Bottom,incrs:_,isTime:P,theme:t,timeZone:u});const F=a.current?.heatmap?.fields[1];if(!F)return W;const V=F.config?.custom?.scaleDistribution??{type:s.wf.Linear},Y=!!p.reverse,U=X===q.P.HeatmapCells&&!Ne(a.current?.heatmap),R=V.type!==s.wf.Linear||U,Z=Be(a.current?.heatmap).yOrdinalDisplay!=null,D="y_"+(Math.random()+1).toString(36).substring(7);W.addScale({scaleKey:D,isTime:!1,orientation:s.wN.Vertical,direction:Y?s.bQ.Down:s.bQ.Up,distribution:R?s.wf.Log:s.wf.Linear,log:V.log??2,range:U?(f,k,g)=>{let B,C;if([B,C]=R?ze.Z.rangeLog(k,g,V.log??2,!0):[k,g],R&&!Z){let z=f.scales[D].log,j=z===2?Math.log2:Math.log10,{min:K,max:Se}=p;if(K!=null&&K>0){let Le=j(K);B=z**(0,le.mB)(Le,1)}if(Se!=null&&Se>0){let Le=j(Se);C=z**(0,le.UO)(Le,1)}}return[B,C]}:(f,k,g)=>{let B=k,C=g,{min:z,max:j}=p;if(R){let K=f.scales[D].log,Se=!1,Le=!1,$e=K===2?Math.log2:Math.log10;if(L!==1){let Ee=$e(k),yt=$e(g);Number.isInteger(Ee)||(B=K**(0,le.mB)(Ee,1),Se=!0),Number.isInteger(yt)||(C=K**(0,le.UO)(yt,1),Le=!0)}if(a.current?.yLayout===s.kv.le?Se||(B/=K):a.current?.yLayout===s.kv.ge?Le||(C*=K):(B/=K/2,C*=K/2),!Z){if(z!=null&&z>0){let Ee=$e(z);B=K**(0,le.mB)(Ee,1)}if(j!=null&&j>0){let Ee=$e(j);C=K**(0,le.UO)(Ee,1)}}}else{let K=a.current?.yBucketSize;K===0&&(K=1),K&&(a.current?.yLayout===s.kv.le?B-=K:a.current?.yLayout===s.kv.ge?C+=K:(B-=K/2,C+=K/2)),Z||(B=z??B,C=j??C)}return[B,C]}});const ne=F.display??(0,re.Cf)("short");W.addAxis({scaleKey:D,show:p.axisPlacement!==s.LB.Hidden,placement:p.axisPlacement||s.LB.Left,size:p.axisWidth||null,label:p.axisLabel,theme:t,formatValue:(f,k)=>(0,re.zc)(ne(f,k)),splits:Z?f=>{const k=Be(a.current?.heatmap);if(!k.yOrdinalDisplay)return[0,1];let g=k.yOrdinalDisplay.map((B,C)=>C);switch(a.current?.yLayout){case s.kv.le:g.unshift(-1);break;case s.kv.ge:g.push(g.length);break}if(f.height<60)g=[g[0],g[g.length-1]];else for(;g.length>3&&(f.height-15)/g.length<10;)g=g.filter((B,C)=>C%2===0);return g}:void 0,values:Z?(f,k)=>{const g=Be(a.current?.heatmap);return g.yOrdinalDisplay?k.map(B=>B<0?g.yMinDisplay??"":g.yOrdinalDisplay[B]??""):k}:void 0});const ie=U?Gt:Tt;W.addSeries({facets:[{scale:w,auto:!0,sorted:1},{scale:D,auto:!0}],pathBuilder:ie({each:(f,k,g,B,C,z,j)=>{G.add({x:B-f.bbox.left,y:C-f.bbox.top,w:z,h:j,sidx:k,didx:g})},gap:x,hideLE:d,hideGE:h,xAlign:a.current?.xLayout===s.kv.le?-1:a.current?.xLayout===s.kv.ge?1:0,yAlign:(a.current?.yLayout===s.kv.le?-1:a.current?.yLayout===s.kv.ge?1:0)*(Y?-1:1),ySizeDivisor:L,disp:{fill:{values:(f,k)=>a.current?.heatmapColors?.values,index:a.current?.heatmapColors?.palette}}}),theme:t,scaleKey:""}),W.addSeries({facets:[{scale:w,auto:!0,sorted:1},{scale:D,auto:!0}],pathBuilder:Wt({each:(f,k,g,B,C,z,j)=>{G.add({x:B-f.bbox.left,y:C-f.bbox.top,w:z,h:j,sidx:k,didx:g})}},O),theme:t,scaleKey:""});const Q={drag:{x:!0,y:!1,setScale:!1},dataIdx:(f,k)=>{if(k===1){N=null;let g=f.cursor.left*I,B=f.cursor.top*I;G.get(g,B,1,1,C=>{(0,ct.Pn)(g,B,C.x,C.y,C.x+C.w,C.y+C.h)&&(N=C)})}return N&&k===N.sidx?N.didx:null},points:{fill:"rgba(255,255,255, 0.3)",bbox:(f,k)=>{let g=N&&k===N.sidx;return{left:g?N.x/I:-10,top:g?N.y/I:-10,width:g?N.w/I:0,height:g?N.h/I:0}}}};return E&&E()!==Ft.m.Off&&(Q.sync={key:T,scales:[w,D],filters:{pub:(f,k,g,B,C,z,j)=>(g<0?(b.point[v]=null,n.publish(new rt.xH)):(b.point[v]=k.posToVal(g,w),n.publish(H)),!0)}},W.setSync()),W.setCursor(Q),W}const ut=4;function Tt(e){const{disp:a,each:t,gap:n=1,hideLE:l=-1/0,hideGE:i=1/0,xAlign:o=1,yAlign:r=1,ySizeDivisor:u=1}=e,c=devicePixelRatio,x=n>=ut?Math.round:h=>h,d=Math.round(n*c);return(h,p)=>(ze.Z.orient(h,p,(L,E,T,w,v,P,I,X,O,G,N,W,M,b,H)=>{let $=h.data[p];const _=$[0],F=$[1],m=$[2],V=_.length;let Y=a.fill.values(h,p),U=a.fill.index??[...new Set(Y)],R=U.map(z=>new Path2D),Z=V-F.lastIndexOf(F[0]),D=V/Z,ne=F[1]-F[0]||v.max-v.min,ie=_[Z]-_[0],Q,f;w.distr===3?Q=Math.abs(P(_[0]*w.log,w,G,X)-P(_[0],w,G,X)):Q=Math.abs(P(ie,w,G,X)-P(0,w,G,X)),v.distr===3?f=Math.abs(I(F[0]*v.log,v,N,O)-I(F[0],v,N,O))/u:f=Math.abs(I(ne,v,N,O)-I(0,v,N,O))/u,Q=Math.max(1,x(Q-d)),f=Math.max(1,x(f-d));let k=o===-1?-Q:o===0?-Q/2:0,g=r===1?-f:r===0?-f/2:0,B=F.slice(0,Z).map(z=>x(I(z,v,N,O)+g)),C=Array.from({length:D},(z,j)=>x(P(_[j*Z],w,G,X)+k));for(let z=0;z<V;z++)if(m[z]>l&&m[z]<i){let j=C[~~(z/Z)],K=B[z%Z],Se=R[Y[z]];b(Se,j,K,Q,f),t(h,1,z,j,K,Q,f)}return h.ctx.save(),h.ctx.rect(h.bbox.left,h.bbox.top,h.bbox.width,h.bbox.height),h.ctx.clip(),R.forEach((z,j)=>{h.ctx.fillStyle=U[j],h.ctx.fill(z)}),h.ctx.restore(),null}),null)}function Wt(e,a){return(t,n)=>(ze.Z.orient(t,n,(l,i,o,r,u,c,x,d,h,p,L,E,T,w,v)=>{let P=new Path2D,I=[P],X=[a??"rgba(255,0,255,0.7)"];for(let O=0;O<i.length;O++){let G=o[O];G-=.5;let N=Math.round(Math.random())*2-1;G+=N*.5*Math.random();let W=c(i[O],r,p,d),M=x(G,u,L,h),b=8,H=8;w(P,W-b/2,M-H/2,b,H),e.each(t,n,O,W-b/2,M-H/2,b,H)}t.ctx.save(),t.ctx.rect(t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip(),I.forEach((O,G)=>{t.ctx.fillStyle=X[G],t.ctx.fill(O)}),t.ctx.restore()}),null)}function Gt(e){const{disp:a,each:t,gap:n=1,hideLE:l=-1/0,hideGE:i=1/0}=e,o=devicePixelRatio,r=n>=ut?Math.round:c=>c,u=Math.round(n*o);return(c,x)=>(ze.Z.orient(c,x,(d,h,p,L,E,T,w,v,P,I,X,O,G,N,W)=>{let M=c.data[x];const b=M[0],H=M[1],$=M[2],_=M[3],F=b.length;let m=a.fill.values(c,x),V=a.fill.index??[...new Set(m)],Y=V.map(D=>new Path2D),U=new Map,R=new Map;for(let D=0;D<b.length;D++){let ne=b[D],ie=H[D],Q=$[D];U.has(ne)||U.set(ne,r(T(ne,L,I,v))),R.has(ie)||R.set(ie,r(w(ie,E,X,P))),R.has(Q)||R.set(Q,r(w(Q,E,X,P)))}let Z=U.get(b.find(D=>D!==b[0]))-U.get(b[0]);for(let D=0;D<F;D++){if(_[D]<=l||_[D]>=i)continue;let ne=b[D],ie=H[D],Q=$[D],f=U.get(ne),k=R.get(ie),g=R.get(Q),B=Z,C=k-g;B=Math.max(1,B-u),C=Math.max(1,C-u);let z=f,j=k,K=Y[m[D]];N(K,z,j,B,C),t(c,1,D,z,j,B,C)}c.ctx.save(),c.ctx.rect(c.bbox.left,c.bbox.top,c.bbox.width,c.bbox.height),c.ctx.clip(),Y.forEach((D,ne)=>{c.ctx.fillStyle=V[ne],c.ctx.fill(D)}),c.ctx.restore()}),null)}const dt=(e,a,t,n=-1/0,l=1/0)=>{if(a==null){a=1/0;for(let i=0;i<e.length;i++)e[i]>n&&e[i]<l&&(a=Math.min(a,e[i]))}if(t==null){t=-1/0;for(let i=0;i<e.length;i++)e[i]>n&&e[i]<l&&(t=Math.max(t,e[i]))}return[a,t]},mt=(e,a,t,n)=>{let l=n-t||1,i=a.length,o=Array(e.length);for(let r=0;r<e.length;r++)o[r]=e[r]<t?0:e[r]>n?i-1:Math.min(i-1,Math.floor(i*(e[r]-t)/l));return o};function Ze(e,a,t,n,l,i){if(!e?.length)return{};(0,we.UY)(e);const o=a?.find(u=>u.name==="exemplar");if(i&&o?.fields.forEach((u,c)=>{o.fields[c].getLinks=i(o,u)}),t.calculate)return Qe(lt(e,t.calculation??{}),o,t,n,l);let r;for(const u of e)switch(u.meta?.type){case q.P.HeatmapCells:return Ne(u)?Qe(u,o,t,n,l):Yt(u,o,t,n,l);case q.P.HeatmapRows:r=u}if(!r)if(e.length>1)e.every(c=>!Number.isNaN((0,Ve.Ky)(c.fields[1].state?.displayName)))&&e.sort(Ve.nf),r=[(0,Pe._9)({frames:e})][0];else{let u=e[0],c=u.fields.filter(d=>d.type===J.fS.number);c.every(d=>!Number.isNaN((0,Ve.Ky)(d.state?.displayName)))?(c.sort((d,h)=>(0,Ve.Ky)(d.state?.displayName)-(0,Ve.Ky)(h.state?.displayName)),r={...u,fields:[u.fields.find(d=>d.type===J.fS.time),...c]}):r=u}return Qe(Mt({unit:t.yAxis?.unit,decimals:t.yAxis?.decimals,...t.rowsFrame,frame:r}),o,t,n,l)}const Yt=(e,a,t,n,l)=>{if(e.meta?.type!==q.P.HeatmapCells||Ne(e))return{warning:"Expected sparse heatmap format",heatmap:e};Te(e.fields[1],t.yAxis,l);const i=e.fields[3],o=Te(i,t.cellValues,l);let[r,u]=dt(i.values,t.color.min,t.color.max,t.filterValues?.le,t.filterValues?.ge);return{heatmap:e,heatmapColors:{palette:n,values:mt(i.values,n,r,u),minValue:r,maxValue:u},exemplars:a,display:c=>(0,re.zc)(o(c))}},Qe=(e,a,t,n,l)=>{if(e.meta?.type!==q.P.HeatmapCells)return{warning:"Expected heatmap scanlines format",heatmap:e};if(e.fields.length<2||e.length<2)return{heatmap:e};const i=Be(e);let o,r,u;for(const O of e.fields)switch(O.name){case"y":r=O.name;case"yMin":case"yMax":{r||(r=O.name),i.yOrdinalDisplay==null&&Te(O,t.yAxis,l);break}case"x":case"xMin":case"xMax":o=O.name;break;default:O.type===J.fS.number&&!u&&(u=O)}if(!r)return{warning:"Missing Y field",heatmap:e};if(!r)return{warning:"Missing X field",heatmap:e};if(!u)return{warning:"Missing value field",heatmap:e};const c=Te(u,t.cellValues,l),x=e.fields[0].values,d=e.fields[1].values,h=x.length;let p=h-d.lastIndexOf(d[0]),L=h/p,E=d[1]-d[0],T=x[p]-x[0],[w,v]=dt(u.values,t.color.min,t.color.max,t.filterValues?.le,t.filterValues?.ge),P=t.calculation?.xBuckets,I=t.calculation?.yBuckets;return{heatmap:e,heatmapColors:{palette:n,values:mt(u.values,n,w,v),minValue:w,maxValue:v},exemplars:a?.length?a:void 0,xBucketSize:T,yBucketSize:E,xBucketCount:L,yBucketCount:p,yLog:I?.scale?.log??0,xLog:P?.scale?.log??0,xLogSplit:P?.scale?.log?+(P?.value??"1"):1,yLogSplit:I?.scale?.log?+(I?.value??"1"):1,xLayout:o==="xMax"?s.kv.le:o==="xMin"?s.kv.ge:s.kv.unknown,yLayout:r==="yMax"?s.kv.le:r==="yMin"?s.kv.ge:s.kv.unknown,display:O=>(0,re.zc)(c(O))}};function Te(e,a,t){if(a?.unit?.length||a?.decimals!=null){const{unit:n,decimals:l}=a;e.display=void 0,e.config={...e.config},n?.length&&(e.config.unit=n),l!=null&&(e.config.decimals=l)}return e.display||(e.display=(0,Ht.U)({field:e,theme:t})),e.display}var ft=S(94079),$t=S(40041),ht=S(63374),ce=(e=>(e.Opacity="opacity",e.Scheme="scheme",e))(ce||{}),be=(e=>(e.Exponential="exponential",e.Linear="linear",e))(be||{});const We={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:s.Jp.Auto,tooltip:{show:!0,yHistogram:!1}},A={...We,color:{...We.color,mode:ce.Scheme,scale:be.Exponential},yAxis:{...We.yAxis,axisPlacement:s.LB.Left},rowsFrame:{...We.rowsFrame,layout:s.kv.auto}},De=[{name:"BrBG",invert:"always"},{name:"PiYG",invert:"always"},{name:"PRGn",invert:"always"},{name:"PuOr",invert:"always"},{name:"RdBu",invert:"always"},{name:"RdGy",invert:"always"},{name:"RdYlBu",invert:"always"},{name:"RdYlGn",invert:"always"},{name:"Spectral",invert:"always"},{name:"Blues",invert:"dark"},{name:"Greens",invert:"dark"},{name:"Greys",invert:"dark"},{name:"Oranges",invert:"dark"},{name:"Purples",invert:"dark"},{name:"Reds",invert:"dark"},{name:"Turbo",invert:"light"},{name:"Cividis",invert:"light"},{name:"Viridis",invert:"light"},{name:"Magma",invert:"light"},{name:"Inferno",invert:"light"},{name:"Plasma",invert:"light"},{name:"Warm",invert:"light"},{name:"Cool",invert:"light"},{name:"Cubehelix",invert:"light",name2:"CubehelixDefault"},{name:"BuGn",invert:"dark"},{name:"BuPu",invert:"dark"},{name:"GnBu",invert:"dark"},{name:"OrRd",invert:"dark"},{name:"PuBuGn",invert:"dark"},{name:"PuBu",invert:"dark"},{name:"PuRd",invert:"dark"},{name:"RdPu",invert:"dark"},{name:"YlGnBu",invert:"dark"},{name:"YlGn",invert:"dark"},{name:"YlOrBr",invert:"dark"},{name:"YlOrRd",invert:"dark"},{name:"Rainbow",invert:"always"},{name:"Sinebow",invert:"always"}],Ut=De.find(e=>e.name==="Spectral");function Ge(e,a){const t={...A.color,...e},n=[],l=(t.steps??128)-1;if(e.mode===ce.Opacity){const i=(0,ht.Z)(a.visualization.getColorByName(e.fill)).toPercentageRgb(),o=t.scale===be.Exponential?ft.scalePow().exponent(t.exponent).domain([0,1]).range([0,1]):ft.scaleLinear().domain([0,1]).range([0,1]);for(let r=0;r<=l;r++)i.a=o(r/l),n.push((0,ht.Z)(i).toString("hex8"))}else{const i=De.find(u=>u.name===t.scheme)??Ut;let o="interpolate"+(i.name2??i.name);const r=$t[o];for(let u=0;u<=l;u++){let c=r(u/l),x=c.indexOf("rgb")===0?"#"+[...c.matchAll(/\d+/g)].map(d=>(+d[0]).toString(16).padStart(2,"0")).join(""):c;n.push(x)}(i.invert==="always"||i.invert==="dark"&&a.isDark||i.invert==="light"&&a.isLight)&&n.reverse(),e.reverse&&n.reverse()}return n}const Kt=({data:e,id:a,timeRange:t,timeZone:n,width:l,height:i,options:o,fieldConfig:r,eventBus:u,onChangeTimeRange:c,replaceVariables:x})=>{const d=(0,it.l4)(),h=(0,it.wW)(jt),{sync:p}=(0,Lt.R9)();let L=[];for(const F of e.series)for(const m of F.fields)m.state?.scopedVars&&L.push(m.state.scopedVars);let E=(0,y.useRef)(t);E.current=t;const T=(0,y.useCallback)((F,m)=>(0,nt.oB)(F,m,m.state?.scopedVars??{},x),[x]),w=(0,y.useMemo)(()=>Ge(o.color,d),[o.color,d]),v=(0,y.useMemo)(()=>{try{return Ze(e.series,e.annotations,o,w,d,T)}catch(F){return{warning:`${F}`}}},[e.series,e.annotations,o,w,d,T]),P=(0,y.useMemo)(()=>{let F=[],m=[];const V=Be(v.heatmap);return v.exemplars?.length&&V.yMatchWithLabel&&(F=v.exemplars?.fields[0].values,V.yOrdinalDisplay!=null?m=(v.exemplars?.fields.find(R=>R.name===V.yMatchWithLabel).values).map(R=>V.yOrdinalLabel?.indexOf(R)):m=v.exemplars?.fields[1].values),[null,v.heatmap?.fields.map(Y=>Y.values),[F,m]]},[v.heatmap,v.exemplars]),[I,X]=(0,y.useState)(void 0),[O,G]=(0,y.useState)(!1),N=(0,y.useRef)(!1),W=()=>{N.current=!1,G(!1),b(null)},M=()=>{N.current=!N.current,G(N.current)},b=(0,y.useCallback)(F=>{X(F??void 0)},[o,e.structureRev]),H=(0,y.useRef)(v);H.current=v;const $=(0,y.useMemo)(()=>{const F=H.current?.heatmap?.fields[1].config?.custom?.scaleDistribution;return zt({dataRef:H,theme:d,eventBus:u,onhover:b,onclick:o.tooltip.show?M:null,onzoom:m=>{m.xMax-m.xMin>1&&c({from:m.xMin,to:m.xMax})},isToolTipOpen:N,timeZone:n,getTimeRange:()=>E.current,sync:p,cellGap:o.cellGap,hideLE:o.filterValues?.le,hideGE:o.filterValues?.ge,exemplarColor:o.exemplars?.color??"rgba(255,0,255,0.7)",yAxisConfig:o.yAxis,ySizeDivisor:F?.type===s.wf.Log?+(o.calculation?.yBuckets?.value||1):1})},[o,n,e.structureRev]),_=()=>{if(!v.heatmap||!o.legend.show)return null;let V=H.current?.heatmap?.meta?.type===q.P.HeatmapCells&&!Ne(H.current?.heatmap)?3:2;const Y=v.heatmap.fields[V];let U;return I&&v.heatmap.fields&&I.seriesIdx===1&&(U=Y.values[I.dataIdx]),y.createElement(ot.AY.Legend,{placement:"bottom",maxHeight:"20%"},y.createElement("div",{className:h.colorScaleWrapper},y.createElement(oe.q,{hoverValue:U,colorPalette:w,min:H.current.heatmapColors?.minValue,max:H.current.heatmapColors?.maxValue,display:v.display})))};return v.warning||!v.heatmap?y.createElement(bt.Z,{panelId:a,fieldConfig:r,data:e,needsNumberField:!0,message:v.warning}):y.createElement(y.Fragment,null,y.createElement(ot.AY,{width:l,height:i,legend:_()},(F,m)=>y.createElement(Et.N,{config:$,data:P,width:F,height:m})),y.createElement(It.h_,null,I&&o.tooltip.show&&y.createElement(Pt.S,{position:{x:I.pageX,y:I.pageY},offset:{x:10,y:10},allowPointerEvents:N.current},O&&y.createElement(Ot.o,{onClick:W}),y.createElement(Dt,{timeRange:t,data:v,hover:I,showHistogram:o.tooltip.yHistogram,replaceVars:x,scopedVars:L}))))},jt=e=>({colorScaleWrapper:(0,Ct.css)`
    margin-left: 25px;
    padding: 10px 0;
    max-width: 300px;
  `}),Zt=e=>Object.keys(e.options).length===0?pt(e,"heatmap",{angular:e},e.fieldConfig):e.options,pt=(e,a,t,n)=>{if(a==="heatmap"&&t.angular){const{fieldConfig:l,options:i}=Qt({...t.angular,fieldConfig:n});return e.fieldConfig=l,i}if(a==="heatmap-new"){const{bucketFrame:l,...i}=e.options;return l?{...i,rowsFrame:l}:e.options}return{}};function Qt(e){const a={defaults:{},overrides:[]},t=e.dataFormat!=="tsbuckets",n={...A.calculation},l={logBase:1,...e.yAxis};t&&(e.xBucketSize?n.xBuckets={mode:s.kW.Size,value:`${e.xBucketSize}`}:e.xBucketNumber&&(n.xBuckets={mode:s.kW.Count,value:`${e.xBucketNumber}`}),e.yBucketSize?n.yBuckets={mode:s.kW.Size,value:`${e.yBucketSize}`}:e.xBucketNumber&&(n.yBuckets={mode:s.kW.Count,value:`${e.yBucketNumber}`}),l.logBase>1&&(n.yBuckets={mode:s.kW.Count,value:+l.splitFactor>0?`${l.splitFactor}`:void 0,scale:{type:s.wf.Log,log:l.logBase}}));const i=Ye(e.cards?.cardPadding,2),o={calculate:t,calculation:n,color:{...A.color,steps:128},cellGap:i||1,cellRadius:Ye(e.cards?.cardRound),yAxis:{axisPlacement:l.show===!1?s.LB.Hidden:s.LB.Left,reverse:!!e.reverseYBuckets,axisWidth:Ye(l.width),min:l.min,max:l.max,unit:l.format,decimals:l.decimals},cellValues:{decimals:Ye(e.tooltipDecimals)},rowsFrame:{layout:Xt(e.yBucketBound)},legend:{show:!!e.legend?.show},showValue:s.Jp.Never,tooltip:{show:!!e.tooltip?.show,yHistogram:!!e.tooltip?.showHistogram},exemplars:{...A.exemplars}};e.hideZeroBuckets&&(o.filterValues={...A.filterValues});const r=e.color??{};switch(r?.mode){case"spectrum":{o.color.mode=ce.Scheme;const u=r.colorScheme;let c=De.find(x=>x.name===u);c||(c=De.find(x=>u.indexOf(x.name)>=0)),o.color.scheme=c?c.name:A.color.scheme;break}case"opacity":{o.color.mode=ce.Opacity,o.color.scale=r.scale;break}}return o.color.fill=r.cardColor,o.color.min=r.min,o.color.max=r.max,typeof r.min=="number"&&typeof r.max=="number"&&r.min>r.max&&(o.color.min=r.max,o.color.max=r.min,o.color.reverse=!0),{fieldConfig:a,options:o}}function Xt(e){switch(e){case"upper":return s.kv.ge;case"lower":return s.kv.le;case"middle":return s.kv.unknown}return s.kv.auto}function Ye(e,a){if(e==null||e==="")return a;const t=+e;return isNaN(t)?a:t}class Jt{getSuggestionsForData(a){const{dataSummary:t}=a;if(!a.data?.series||!t.hasData||t.timeFieldCount<1||t.numberFieldCount<2||t.numberFieldCount>10)return;const n=Ge(A.color,ke.config.theme2),l=Ze(a.data.series,void 0,A,n,ke.config.theme2);!l||l.warning||a.getListAppender({name:"",pluginId:"heatmap",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}})}}const qt=new ee.c(Kt).useFieldConfig({disableStandardOptions:Object.values(He.qb).filter(e=>e!==He.qb.Links),useCustomConfig:e=>{e.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Y axis scale",category:["Heatmap"],editor:Ie.Y,override:Ie.Y,defaultValue:{type:s.wf.Linear},shouldApply:a=>a.type===J.fS.number,process:Ue.kG,hideFromDefaults:!0}),(0,te.B)(e)}}).setPanelChangeHandler(pt).setMigrationHandler(Zt).setPanelOptions((e,a)=>{const t=a.options??A;let n=!1;if(a.data.length>0)try{const i=Ge(t.color,ke.config.theme2),o=Ze(a.data,void 0,t,i,ke.config.theme2);n=Be(o.heatmap).yOrdinalDisplay!=null}catch{}let l=["Heatmap"];e.addRadio({path:"calculate",name:"Calculate from data",defaultValue:A.calculate,category:l,settings:{options:[{label:"Yes",value:!0},{label:"No",value:!1}]}}),t.calculate&&me("calculation.",e,t.calculation,l),l=["Y Axis"],e.addRadio({path:"yAxis.axisPlacement",name:"Placement",defaultValue:A.yAxis.axisPlacement??s.LB.Left,category:l,settings:{options:[{label:"Left",value:s.LB.Left},{label:"Right",value:s.LB.Right},{label:"Hidden",value:s.LB.Hidden}]}}).addUnitPicker({category:l,path:"yAxis.unit",name:"Unit",defaultValue:void 0,settings:{isClearable:!0}}).addNumberInput({category:l,path:"yAxis.decimals",name:"Decimals",settings:{placeholder:"Auto"}}),n||e.addNumberInput({path:"yAxis.min",name:"Min value",settings:{placeholder:"Auto"},category:l}).addTextInput({path:"yAxis.max",name:"Max value",settings:{placeholder:"Auto"},category:l}),e.addNumberInput({path:"yAxis.axisWidth",name:"Axis width",defaultValue:A.yAxis.axisWidth,settings:{placeholder:"Auto",min:5},category:l}).addTextInput({path:"yAxis.axisLabel",name:"Axis label",defaultValue:A.yAxis.axisLabel,settings:{placeholder:"Auto"},category:l}),t.calculate||e.addRadio({path:"rowsFrame.layout",name:"Tick alignment",defaultValue:A.rowsFrame?.layout??s.kv.auto,category:l,settings:{options:[{label:"Auto",value:s.kv.auto},{label:"Top (LE)",value:s.kv.le},{label:"Middle",value:s.kv.unknown},{label:"Bottom (GE)",value:s.kv.ge}]}}),e.addBooleanSwitch({path:"yAxis.reverse",name:"Reverse",defaultValue:A.yAxis.reverse===!0,category:l}),l=["Colors"],e.addRadio({path:"color.mode",name:"Mode",defaultValue:A.color.mode,category:l,settings:{options:[{label:"Scheme",value:ce.Scheme},{label:"Opacity",value:ce.Opacity}]}}),e.addColorPicker({path:"color.fill",name:"Color",defaultValue:A.color.fill,category:l,showIf:i=>i.color.mode===ce.Opacity}),e.addRadio({path:"color.scale",name:"Scale",defaultValue:A.color.scale,category:l,settings:{options:[{label:"Exponential",value:be.Exponential},{label:"Linear",value:be.Linear}]},showIf:i=>i.color.mode===ce.Opacity}),e.addSliderInput({path:"color.exponent",name:"Exponent",defaultValue:A.color.exponent,category:l,settings:{min:.1,max:2,step:.1},showIf:i=>i.color.mode===ce.Opacity&&i.color.scale===be.Exponential}),e.addSelect({path:"color.scheme",name:"Scheme",description:"",defaultValue:A.color.scheme,category:l,settings:{options:De.map(i=>({value:i.name,label:i.name}))},showIf:i=>i.color.mode!==ce.Opacity}),e.addSliderInput({path:"color.steps",name:"Steps",defaultValue:A.color.steps,category:l,settings:{min:2,max:128,step:1}}).addBooleanSwitch({path:"color.reverse",name:"Reverse",defaultValue:A.color.reverse,category:l}).addCustomEditor({id:"__scale__",path:"__scale__",name:"",category:l,editor:()=>{const i=Ge(t.color,ke.config.theme2);return y.createElement("div",null,y.createElement(oe.q,{colorPalette:i,min:1,max:100}))}}),e.addNumberInput({path:"color.min",name:"Start color scale from value",defaultValue:A.color.min,settings:{placeholder:"Auto (min)"},category:l}).addNumberInput({path:"color.max",name:"End color scale at value",defaultValue:A.color.max,settings:{placeholder:"Auto (max)"},category:l}),l=["Cell display"],t.calculate||e.addTextInput({path:"rowsFrame.value",name:"Value name",defaultValue:A.rowsFrame?.value,settings:{placeholder:"Value"},category:l}),e.addUnitPicker({category:l,path:"cellValues.unit",name:"Unit",defaultValue:void 0,settings:{isClearable:!0}}).addNumberInput({category:l,path:"cellValues.decimals",name:"Decimals",settings:{placeholder:"Auto"}}),e.addSliderInput({name:"Cell gap",path:"cellGap",defaultValue:A.cellGap,category:l,settings:{min:0,max:25}}).addNumberInput({path:"filterValues.le",name:"Hide cells with values <=",defaultValue:A.filterValues?.le,settings:{placeholder:"None"},category:l}).addNumberInput({path:"filterValues.ge",name:"Hide cells with values >=",defaultValue:A.filterValues?.ge,settings:{placeholder:"None"},category:l}),l=["Tooltip"],e.addBooleanSwitch({path:"tooltip.show",name:"Show tooltip",defaultValue:A.tooltip.show,category:l}),e.addBooleanSwitch({path:"tooltip.yHistogram",name:"Show histogram (Y axis)",defaultValue:A.tooltip.yHistogram,category:l,showIf:i=>i.tooltip.show}),l=["Legend"],e.addBooleanSwitch({path:"legend.show",name:"Show legend",defaultValue:A.legend.show,category:l}),l=["Exemplars"],e.addColorPicker({path:"exemplars.color",name:"Color",defaultValue:A.exemplars.color,category:l})}).setSuggestionsSupplier(new Jt)}}]);

//# sourceMappingURL=heatmapPanel.js.map