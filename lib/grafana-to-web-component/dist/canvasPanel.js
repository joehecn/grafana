"use strict";(this.webpackChunkGrafanaToWebComponent=this.webpackChunkGrafanaToWebComponent||[]).push([[3330],{8807:(sa,Ie,I)=>{I.d(Ie,{f:()=>le});var Je=I(39953),Mr=I(96428);const le=({onChange:y,options:nt,label:at})=>Je.createElement(Mr.b,{icon:"plus",label:at,variant:"secondary",options:nt,onChange:y,isFullWidth:!0})},82247:(sa,Ie,I)=>{I.d(Ie,{hs:()=>Lt});var Je=I(86832),Mr=I.n(Je),le=I(74602),y=I(47864);function nt(Vt,Xt,jt,wt){if(Vt===DisplayMode.Fill)return{width:Xt,height:jt};const tt=8*6,ft=60,Ee=(window.innerWidth-ft-GRID_CELL_VMARGIN*4)/GRID_COLUMN_COUNT*wt.gridPos.w,Ct=GRID_CELL_HEIGHT*wt.gridPos.h+tt,ne=Math.min(Xt/Ee,jt/Ct);return Ee<=Xt&&Ct<=jt?{width:Ee,height:Ct}:{width:Ee*ne,height:Ct*ne}}function at(Vt){return Vt?.meta.skipDataQuery===!1}const Wt=(Vt,Xt,jt,wt)=>{let tt={...Vt.defaults};const ft=jt==null||jt==="";return wt?tt.custom?ft?tt.custom=omit(tt.custom,Xt):tt.custom=Lt(tt.custom,Xt,jt):ft||(tt.custom=Lt(tt.custom,Xt,jt)):ft?tt=omit(tt,Xt):tt=Lt(tt,Xt,jt),{...Vt,defaults:tt}};function Lt(Vt,Xt,jt){const wt=Array.isArray(Xt)?Xt:Xt.split("."),tt=wt.shift();if(tt.endsWith("]")){const ve=tt.lastIndexOf("["),Ee=+tt.substring(ve+1,tt.length-1),Ct=tt.substring(0,ve);let ne=Vt[Ct];const sn=Array.isArray(ne)?[...ne]:[];return wt.length&&(ne=sn[Ee],(ne==null||typeof ne!="object")&&(ne={}),jt=Lt(ne,wt,jt)),sn[Ee]=jt,{...Vt,[Ct]:sn}}if(!wt.length)return{...Vt,[tt]:jt};let ft=Vt[tt];return(ft==null||typeof ft!="object")&&(ft={}),{...Vt,[tt]:Lt(ft,wt,jt)}}},35253:(sa,Ie,I)=>{I.r(Ie),I.d(Ie,{addStandardCanvasEditorOptions:()=>Rs,plugin:()=>dE});var Je=I(40530),Mr=I(82909),le=I(86832),y=I(39953),nt=(t=>(t.Center="center",t.Left="left",t.LeftRight="leftright",t.Right="right",t.Scale="scale",t))(nt||{}),at=(t=>(t.Bottom="bottom",t.Center="center",t.Scale="scale",t.Top="top",t.TopBottom="topbottom",t))(at||{}),Wt=(t=>(t.Contain="contain",t.Cover="cover",t.Fill="fill",t.Original="original",t.Tile="tile",t))(Wt||{}),Lt=(t=>(t.GET="GET",t.POST="POST",t))(Lt||{}),Vt=(t=>(t.Straight="straight",t))(Vt||{});const Xt={connections:[]},jt={inlineEditing:!0,showAdvancedTypes:!0};var wt=(t=>(t.Top="top",t.Bottom="bottom",t.Left="left",t.Right="right",t.HorizontalCenter="hcenter",t.VerticalCenter="vcenter",t))(wt||{}),tt=(t=>(t.Left="left",t.Center="center",t.Right="right",t))(tt||{}),ft=(t=>(t.Top="top",t.Middle="middle",t.Bottom="bottom",t))(ft||{}),ve=I(50820),Ee=(t=>(t.Straight="straight",t))(Ee||{});const Ct="#D9D9D9",ne="#000000",sn=ve.config.theme2.colors.text.primary;var qf=I(77663),Ns=I(30670),ln=I(34547),kr=I(4919),cn=I(19226),la=I(32688),Jf=I(19649),Tr=I(74661),Rr=I(69171),Ls=I(20454),Or=I(96227),ei=I(9558),Is=I(40866),Te=I(12223),un=I(38637),pe=I(68497);const Bs=({value:t,onChange:e})=>{const[n,r]=(0,y.useState)(""),[i,a]=(0,y.useState)(""),s=({currentTarget:d})=>{a(d.value)},o=({currentTarget:d})=>{r(d.value)},l=d=>()=>{const f=t.filter(v=>v[0]!==d);e(f)},c=()=>{const d=n;let f;t?f=t.filter(v=>v[0]!==d):f=[],f.push([d,i]),f.sort((v,p)=>v[0].localeCompare(p[0])),r(""),a(""),e(f)},u=!n&&!i;return y.createElement("div",null,y.createElement(Te.Lh,null,y.createElement(un.I,{placeholder:"Key",value:n,onChange:o}),y.createElement(un.I,{placeholder:"Value",value:i,onChange:s}),y.createElement(pe.h,{"aria-label":"add",name:"plus-circle",onClick:c,disabled:u})),y.createElement(Te.wc,null,Array.from(t||[]).map(d=>y.createElement(Te.Lh,{key:d[0]},y.createElement(un.I,{disabled:!0,value:d[0]}),y.createElement(un.I,{disabled:!0,value:d[1]}),y.createElement(pe.h,{"aria-label":"delete",onClick:l(d[0]),name:"trash-alt"})))))};var ri=I(71519),tv=I(4148),ev=I(79059),Fs=I(21308),rv=I(97433);const zs=(t,e=!1)=>{if(t&&t.endpoint){const n=nv(t);(0,tv.i)().fetch(n).subscribe({error:r=>{e&&(Fs.h$.emit(ri.SI.alertError,["Error has occurred: ",JSON.stringify(r)]),console.error(r))},complete:()=>{e&&Fs.h$.emit(ri.SI.alertSuccess,["Test successful"])}})}},tr=t=>{const e=(0,rv.h4)().getCurrent()?.panelInEdit;return(0,ev.J)().replace(t,e?.scopedVars)},nv=t=>{const e=[],n=new URL(tr(t.endpoint));let r={url:n.toString(),method:t.method,data:iv(t),headers:e};return t.headerParams&&t.headerParams.forEach(i=>{e.push([tr(i[0]),tr(i[1])])}),t.queryParams&&(t.queryParams?.forEach(i=>{n.searchParams.append(tr(i[0]),tr(i[1]))}),r.url=n.toString()),t.method===Lt.POST&&e.push(["Content-Type",t.contentType]),r.headers=e,r},iv=t=>{let e=t.data?tr(t.data):"{}";return t.method===Lt.GET&&(e=void 0),e},Gs={settings:{}},av=[{label:Lt.GET,value:Lt.GET},{label:Lt.POST,value:Lt.POST}],ov=[{label:"JSON",value:"application/json"},{label:"Text",value:"text/plain"},{label:"JavaScript",value:"application/javascript"},{label:"HTML",value:"text/html"},{label:"XML",value:"application/XML"},{label:"x-www-form-urlencoded",value:"application/x-www-form-urlencoded"}];function sv({value:t,context:e,onChange:n}){t||(t=dn);const i=(0,y.useCallback)((v="")=>{n({...t,endpoint:v})},[n,t]),a=(0,y.useCallback)(v=>{n({...t,data:v})},[n,t]),s=(0,y.useCallback)(v=>{n({...t,method:v})},[n,t]),o=(0,y.useCallback)(v=>{n({...t,contentType:v?.value})},[n,t]),l=v=>v,c=(0,y.useCallback)(v=>{n({...t,queryParams:v})},[n,t]),u=(0,y.useCallback)(v=>{n({...t,headerParams:v})},[n,t]),d=v=>{try{const p=JSON.parse(tr(v));return y.createElement(Jf.g,{json:p})}catch(p){return p instanceof Error?`Invalid JSON provided: ${p.message}`:"Invalid JSON provided"}},f=v=>{if(v&&v.endpoint)return y.createElement(kr.zx,{onClick:()=>zs(v,!0),title:"Test API"},"Test API")};return la.config.disableSanitizeHtml?y.createElement(y.Fragment,null,y.createElement(Tr.Z,null,y.createElement(Rr._,{label:"Endpoint",labelWidth:13,grow:!0},y.createElement(Is.A,{context:e,value:t?.endpoint,onChange:i,item:Gs}))),y.createElement(Tr.Z,null,y.createElement(Rr._,{label:"Method",labelWidth:13,grow:!0},y.createElement(Ls.S,{value:t?.method,options:av,onChange:s,fullWidth:!0}))),y.createElement(Or.g,{label:"Query parameters"},y.createElement(Bs,{value:t?.queryParams??[],onChange:c})),y.createElement(Or.g,{label:"Header parameters"},y.createElement(Bs,{value:t?.headerParams??[],onChange:u})),t?.method===Lt.POST&&y.createElement(y.Fragment,null,y.createElement(Tr.Z,null,y.createElement(Rr._,{label:"Content-Type",labelWidth:13,grow:!0},y.createElement(ei.Ph,{options:ov,allowCustomValue:!0,formatCreateLabel:l,value:t?.contentType,onChange:o}))),t?.contentType&&y.createElement(Or.g,{label:"Payload"},y.createElement(Is.A,{context:e,value:t?.data??"{}",onChange:a,item:{...Gs,settings:{useTextarea:!0}}}))),f(t),y.createElement("br",null),t?.method===Lt.POST&&t?.contentType===dn.contentType&&d(t?.data??"{}")):y.createElement(y.Fragment,null,"Must enable disableSanitizeHtml feature flag to access")}const lv=[{label:"primary",value:"primary"},{label:"secondary",value:"secondary"},{label:"success",value:"success"},{label:"destructive",value:"destructive"}],cv=({value:t,onChange:e})=>{t||(t=ni);const n=(0,y.useCallback)(r=>{e({...t,variant:r?.value??ni.variant})},[e,t]);return y.createElement(y.Fragment,null,y.createElement(Tr.Z,null,y.createElement(Rr._,{label:"Variant",grow:!0},y.createElement(ei.Ph,{options:lv,value:t?.variant,onChange:n}))))},dn={endpoint:"",method:Lt.POST,data:"{}",contentType:"application/json",queryParams:[],headerParams:[]},ni={variant:"primary"};class uv extends y.PureComponent{render(){const{data:e}=this.props,n=()=>{e?.api&&e?.api?.endpoint&&zs(e.api)};return y.createElement(kr.zx,{type:"submit",variant:e?.style?.variant,onClick:n},e?.text)}}const dv={id:"button",name:"Button",description:"Button",state:Ns.BV.alpha,display:uv,defaultSize:{width:78,height:32},getNewOptions:t=>({...t,config:{text:{mode:ln.xy.Fixed,fixed:"Button"},api:dn,style:ni},background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width,height:t?.placement?.height,top:t?.placement?.top??100,left:t?.placement?.left??100}}),prepareData:(t,e)=>{const n=()=>{if(e?.api)return e.api={...e.api,method:e.api.method??dn.method,contentType:e.api.contentType??dn.contentType},e.api};return{text:e?.text?t.getText(e.text).value():"",api:n(),style:e?.style??ni}},registerOptionsUI:t=>{const e=["Button"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:cn.$}).addCustomEditor({category:e,id:"styleSelector",path:"config.style",name:"Style",editor:cv}).addCustomEditor({category:e,id:"apiSelector",path:"config.api",name:"API",editor:sv})}};var Y=I(41407),Et=I(82803),Ft=I(473);const fv={id:"droneFront",name:"Drone Front",description:"Drone front",display:({data:t})=>{const e=(0,Et.wW)(vv),n=`rotate(${t?.rollAngle?t.rollAngle:0}deg)`;return y.createElement("svg",{className:e.droneFront,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1300 290",style:{transform:n,stroke:Ct}},y.createElement("g",{className:"arms",stroke:Ct,strokeWidth:"28px"},y.createElement("line",{x1:"510",x2:"320",y1:"100",y2:"150"}),y.createElement("line",{x1:"510",x2:"320",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"100",y2:"150"})),y.createElement("g",{className:"body",stroke:Ct,strokeWidth:"28px"},y.createElement("path",{fill:"none",d:" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z "}),y.createElement("circle",{cx:"650",cy:"160",r:"40",fill:"none"})),y.createElement("g",{className:"motors",stroke:Ct,strokeWidth:"28px"},y.createElement("path",{className:"motor",fill:"none",d:" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z "}),y.createElement("path",{className:"motor",fill:"none",d:" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z "})),y.createElement("g",{className:"propellers",fill:Ct},y.createElement("path",{className:"prop",d:" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z "}),y.createElement("path",{className:"prop",d:" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z "})))},defaultSize:{width:100,height:26},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??26,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>({rollAngle:e?.rollAngle?t.getScalar(e.rollAngle).value():0}),registerOptionsUI:t=>{const e=["Drone Front"];t.addCustomEditor({category:e,id:"rollAngle",path:"config.rollAngle",name:"Roll Angle",editor:Ft.k9})}},vv=t=>({droneFront:(0,Y.css)`
    transition: transform 0.4s;
  `}),pv={id:"droneSide",name:"Drone Side",description:"Drone Side",display:({data:t})=>{const e=(0,Et.wW)(hv),n=`rotate(${t?.pitchAngle?t.pitchAngle:0}deg)`;return y.createElement("svg",{className:e.droneSide,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1300 290",style:{transform:n,stroke:Ct}},y.createElement("g",{className:"arms",stroke:Ct,strokeWidth:"28px"},y.createElement("line",{x1:"510",x2:"320",y1:"100",y2:"150"}),y.createElement("line",{x1:"510",x2:"320",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"190",y2:"210"}),y.createElement("line",{x1:"790",x2:"980",y1:"100",y2:"150"})),y.createElement("g",{className:"body",stroke:Ct,strokeWidth:"28px"},y.createElement("path",{fill:"none",d:" M 510 130 C 510 124 510 110 510 100 C 510 90 530 71 540 70 C 640 61 670 60 760 70 C 770 71 790 90 790 100 Q 790 120 790 130 L 790 130 Q 790 177 790 196 C 790 207 770 225 760 226 C 670 236 640 236 540 226 C 530 226 510 206 510 196 Q 510 177 510 130 Q 510 133 510 130 Z "})),y.createElement("g",{className:"motors",stroke:Ct,strokeWidth:"28px"},y.createElement("path",{className:"motor",fill:"none",d:" M 320 60 L 250 60 L 250 230 L 260 290 L 310 290 L 320 230 L 320 60 Z "}),y.createElement("path",{className:"motor",fill:"none",d:" M 1050 60 L 980 60 L 980 230 L 990 290 L 1040 290 L 1050 230 L 1050 60 Z "})),y.createElement("g",{className:"propellers",fill:Ct},y.createElement("path",{className:"prop",d:" M 270 60 L 300 60 L 300 20 Q 311 30 330 30 Q 349 30 570 10 L 300 10 Q 300 0 290 0 C 286 0 284 0 280 0 Q 270 0 270 10 L 0 10 Q 220 30 240 30 Q 260 30 270 20 L 270 60 Z "}),y.createElement("path",{className:"prop",d:" M 1000 60 L 1030 60 L 1030 20 Q 1041 30 1060 30 Q 1079 30 1300 10 L 1030 10 Q 1030 0 1020 0 C 1016 0 1014 0 1010 0 Q 1000 0 1000 10 L 730 10 Q 950 30 970 30 Q 990 30 1000 20 L 1000 60 Z "})))},defaultSize:{width:100,height:26},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??26,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>({pitchAngle:e?.pitchAngle?t.getScalar(e.pitchAngle).value():0}),registerOptionsUI:t=>{const e=["Drone Side"];t.addCustomEditor({category:e,id:"pitchAngle",path:"config.pitchAngle",name:"Pitch Angle",editor:Ft.k9})}},hv=t=>({droneSide:(0,Y.css)`
    transition: transform 0.4s;
  `}),gv={id:"droneTop",name:"Drone Top",description:"Drone top",display:({data:t})=>{const e=(0,Et.wW)(mv),n=`spin ${t?.fRightRotorRPM?60/Math.abs(t.fRightRotorRPM):0}s linear infinite`,r=`spin ${t?.fLeftRotorRPM?60/Math.abs(t.fLeftRotorRPM):0}s linear infinite`,i=`spin ${t?.bRightRotorRPM?60/Math.abs(t.bRightRotorRPM):0}s linear infinite`,a=`spin ${t?.bLeftRotorRPM?60/Math.abs(t.bLeftRotorRPM):0}s linear infinite`,s=`rotate(${t?.yawAngle?t.yawAngle:0}deg)`;return y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"-43 -43 640 640",xmlSpace:"preserve",style:{transform:s,fill:Ct}},y.createElement("path",{fillRule:"evenodd",d:" M 137.95 127.967 C 137.14 127.157 136.189 126.58 135.178 126.218 C 138.173 121.545 139.967 116.036 140.125 110.123 L 217.64 151.862 C 214.049 157.411 211.8 163.922 211.386 170.95 L 209.694 199.712 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 L 137.95 127.967 Z  M 134.268 426.981 C 130.211 421.314 124.328 417.045 117.482 415.041 L 201.999 330.523 L 201.385 340.955 C 200.67 353.107 202.829 364.914 207.563 375.673 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 L 134.268 426.981 Z  M 324.765 373.673 L 228.527 373.673 Q 215.374 358.611 216.361 341.835 L 226.361 171.832 C 226.825 163.94 231.012 157.096 237.146 152.957 L 316.146 152.957 C 322.28 157.096 326.466 163.94 326.931 171.832 L 336.931 341.835 Q 337.918 358.611 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 L 324.765 373.673 Z  M 435.81 415.041 C 428.964 417.045 423.081 421.314 419.024 426.981 L 345.727 375.673 C 350.461 364.914 352.62 353.107 351.905 340.955 L 351.291 330.523 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 L 435.81 415.041 Z  M 343.596 199.713 L 341.904 170.951 C 341.49 163.923 339.242 157.411 335.651 151.863 L 413.167 110.124 C 413.325 116.037 415.119 121.546 418.114 126.219 C 417.103 126.581 416.152 127.158 415.342 127.968 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 L 343.596 199.713 Z  M 444.646 92.771 C 453.744 92.771 461.146 100.172 461.146 109.271 C 461.146 118.369 453.744 125.771 444.646 125.771 C 435.548 125.771 428.146 118.369 428.146 109.271 C 428.146 100.172 435.548 92.771 444.646 92.771 L 444.646 92.771 L 444.646 92.771 L 444.646 92.771 Z  M 108.647 92.771 C 117.745 92.771 125.147 100.172 125.147 109.271 C 125.147 118.369 117.745 125.771 108.647 125.771 C 99.549 125.771 92.147 118.369 92.147 109.271 C 92.147 100.172 99.549 92.771 108.647 92.771 L 108.647 92.771 L 108.647 92.771 Z  M 108.647 461.771 C 99.549 461.771 92.147 454.369 92.147 445.271 C 92.147 436.172 99.549 428.771 108.647 428.771 C 117.745 428.771 125.147 436.172 125.147 445.271 C 125.147 454.369 117.745 461.771 108.647 461.771 L 108.647 461.771 Z  M 92.322 136.202 C 97.086 139.1 102.675 140.771 108.647 140.771 C 114.883 140.771 120.697 138.941 125.594 135.802 C 125.956 136.813 126.534 137.764 127.343 138.573 L 207.342 218.573 C 207.711 218.942 208.109 219.264 208.528 219.54 L 203.212 309.908 C 201.794 310.182 200.44 310.869 199.342 311.967 L 95.343 415.967 C 94.954 416.356 94.62 416.779 94.335 417.224 C 93.651 417.575 92.976 417.942 92.322 418.34 Q 84.615 424.182 81.716 428.946 C 78.817 433.71 77.147 439.299 77.147 445.271 C 77.147 462.64 91.278 476.771 108.647 476.771 C 114.619 476.771 120.208 475.1 124.972 472.202 C 129.736 469.304 132.678 466.36 135.577 461.596 C 138.476 456.832 140.147 451.243 140.147 445.271 C 140.147 443.943 140.055 442.637 139.895 441.352 L 214.997 388.78 C 217.05 391.677 336.242 391.678 338.295 388.78 L 413.398 441.352 C 413.238 442.637 413.146 443.943 413.146 445.271 C 413.146 451.243 414.817 456.832 417.715 461.596 C 420.613 466.36 423.557 469.304 428.321 472.202 C 433.085 475.1 438.674 476.771 444.646 476.771 C 462.015 476.771 476.146 462.64 476.146 445.271 C 476.146 439.299 474.475 433.71 471.577 428.946 C 468.679 424.182 459.642 417.575 458.958 417.224 C 458.672 416.779 458.339 416.356 457.95 415.967 L 353.95 311.967 C 352.852 310.869 351.498 310.182 350.08 309.908 L 344.764 219.54 C 345.183 219.264 345.581 218.942 345.95 218.573 L 425.95 138.573 C 426.76 137.763 427.337 136.812 427.699 135.802 C 432.596 138.941 438.409 140.771 444.646 140.771 C 450.618 140.771 456.207 139.1 460.971 136.202 C 465.735 133.304 468.679 130.36 471.577 125.596 C 474.475 120.832 476.146 115.243 476.146 109.271 C 476.146 91.903 462.015 77.772 444.646 77.772 C 438.674 77.772 433.085 79.442 428.321 82.34 L 416.215 91.446 L 324.765 140.688 C 318.402 136.324 310.718 133.771 302.473 133.771 L 250.819 133.771 C 242.574 133.771 234.89 136.324 228.527 140.688 L 137.078 91.446 L 124.972 82.34 C 120.208 79.442 114.619 77.772 108.647 77.772 C 91.278 77.772 77.147 91.903 77.147 109.271 C 77.147 115.243 78.818 120.832 81.716 125.595 C 84.614 130.358 87.558 133.304 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 L 92.322 136.202 Z  M 444.646 461.771 C 435.548 461.771 428.146 454.369 428.146 445.271 C 428.146 436.172 435.548 428.771 444.646 428.771 C 453.744 428.771 461.146 436.172 461.146 445.271 C 461.146 454.369 453.744 461.771 444.646 461.771 Z "}),y.createElement("path",{fillRule:"evenodd",d:" M 259.458 334.235 L 259.458 337.211 L 254.514 337.211 L 254.514 350.795 L 250.842 350.795 L 250.842 337.211 L 245.898 337.211 L 245.898 334.235 L 259.458 334.235 Z  M 266.226 347.939 L 272.586 347.939 L 272.754 350.627 L 272.754 350.627 Q 270.498 350.867 265.074 350.867 L 265.074 350.867 L 265.074 350.867 Q 263.418 350.867 262.434 349.967 L 262.434 349.967 L 262.434 349.967 Q 261.45 349.067 261.426 347.531 L 261.426 347.531 L 261.426 337.499 L 261.426 337.499 Q 261.45 335.963 262.434 335.063 L 262.434 335.063 L 262.434 335.063 Q 263.418 334.163 265.074 334.163 L 265.074 334.163 L 265.074 334.163 Q 270.498 334.163 272.754 334.403 L 272.754 334.403 L 272.586 337.115 L 266.226 337.115 L 266.226 337.115 Q 265.626 337.115 265.362 337.403 L 265.362 337.403 L 265.362 337.403 Q 265.098 337.691 265.098 338.339 L 265.098 338.339 L 265.098 340.859 L 271.698 340.859 L 271.698 343.499 L 265.098 343.499 L 265.098 346.691 L 265.098 346.691 Q 265.098 347.363 265.362 347.651 L 265.362 347.651 L 265.362 347.651 Q 265.626 347.939 266.226 347.939 L 266.226 347.939 Z  M 275.202 333.995 L 278.73 333.995 L 278.73 346.931 L 278.73 346.931 Q 278.73 348.131 280.074 348.131 L 280.074 348.131 L 281.034 348.131 L 281.442 350.603 L 281.442 350.603 Q 280.53 351.083 278.61 351.083 L 278.61 351.083 L 278.61 351.083 Q 277.026 351.083 276.114 350.231 L 276.114 350.231 L 276.114 350.231 Q 275.202 349.379 275.202 347.819 L 275.202 347.819 L 275.202 333.995 Z  M 283.05 333.995 L 286.578 333.995 L 286.578 346.931 L 286.578 346.931 Q 286.578 348.131 287.922 348.131 L 287.922 348.131 L 288.882 348.131 L 289.29 350.603 L 289.29 350.603 Q 288.378 351.083 286.458 351.083 L 286.458 351.083 L 286.458 351.083 Q 284.874 351.083 283.962 350.231 L 283.962 350.231 L 283.962 350.231 Q 283.05 349.379 283.05 347.819 L 283.05 347.819 L 283.05 333.995 Z  M 292.086 335.759 L 292.086 335.759 L 292.086 335.759 Q 293.634 333.923 297.618 333.923 L 297.618 333.923 L 297.618 333.923 Q 301.602 333.923 303.162 335.759 L 303.162 335.759 L 303.162 335.759 Q 304.722 337.595 304.722 342.515 L 304.722 342.515 L 304.722 342.515 Q 304.722 347.435 303.162 349.271 L 303.162 349.271 L 303.162 349.271 Q 301.602 351.107 297.618 351.107 L 297.618 351.107 L 297.618 351.107 Q 293.634 351.107 292.086 349.271 L 292.086 349.271 L 292.086 349.271 Q 290.538 347.435 290.538 342.515 L 290.538 342.515 L 290.538 342.515 Q 290.538 337.595 292.086 335.759 Z  M 300.174 338.051 L 300.174 338.051 L 300.174 338.051 Q 299.49 336.875 297.618 336.875 L 297.618 336.875 L 297.618 336.875 Q 295.746 336.875 295.062 338.051 L 295.062 338.051 L 295.062 338.051 Q 294.378 339.227 294.378 342.515 L 294.378 342.515 L 294.378 342.515 Q 294.378 345.803 295.062 346.979 L 295.062 346.979 L 295.062 346.979 Q 295.746 348.155 297.618 348.155 L 297.618 348.155 L 297.618 348.155 Q 299.49 348.155 300.174 346.979 L 300.174 346.979 L 300.174 346.979 Q 300.858 345.803 300.858 342.515 L 300.858 342.515 L 300.858 342.515 Q 300.858 339.227 300.174 338.051 Z "}),y.createElement("g",{className:"propeller-group"},y.createElement("path",{className:`${e.propeller} ${e.propellerCW}`,style:{animation:i},d:" M 461.563 418.77 L 463.992 416.34 Q 465.495 407.116 466.461 400.395 C 467.426 393.675 469.363 388.087 474.731 383.284 Q 533.862 341.514 538.196 338.859 C 542.529 336.203 548.345 334.299 551.492 338.29 C 554.639 342.282 553.481 346.02 549.419 350.082 L 471.147 428.354 L 461.563 418.77 Z  M 427.729 471.772 L 425.299 474.202 Q 423.797 483.426 422.831 490.146 C 421.866 496.867 419.929 502.454 414.561 507.257 Q 355.43 549.028 351.096 551.683 C 346.763 554.338 340.947 556.243 337.8 552.251 C 334.653 548.26 335.811 544.522 339.873 540.46 L 418.145 462.187 L 427.729 471.772 Z "}),y.createElement("path",{className:`${e.propeller} ${e.propellerCCW}`,style:{animation:n},d:" M 461.563 135.773 L 463.992 138.203 Q 465.495 147.426 466.461 154.147 C 467.426 160.868 469.363 166.455 474.731 171.258 Q 533.862 213.028 538.196 215.684 C 542.529 218.339 548.345 220.244 551.492 216.252 C 554.639 212.26 553.481 208.523 549.419 204.46 L 471.147 126.188 L 461.563 135.773 Z  M 427.729 82.77 L 425.299 80.34 Q 423.797 71.117 422.831 64.396 C 421.866 57.675 419.929 52.088 414.561 47.285 Q 355.43 5.515 351.096 2.859 C 346.763 0.204 340.947 -1.701 337.8 2.291 C 334.653 6.282 335.811 10.02 339.873 14.082 L 418.145 92.355 L 427.729 82.77 Z "}),y.createElement("path",{className:`${e.propeller} ${e.propellerCCW}`,style:{animation:a},d:" M 125.563 471.772 L 127.993 474.202 Q 129.496 483.426 130.461 490.146 C 131.427 496.867 133.363 502.454 138.731 507.257 Q 197.863 549.028 202.196 551.683 C 206.53 554.338 212.345 556.243 215.492 552.251 C 218.639 548.26 217.482 544.522 213.419 540.46 L 135.148 462.187 L 125.563 471.772 Z  M 91.73 418.77 L 89.3 416.34 Q 87.797 407.116 86.832 400.395 C 85.866 393.675 83.93 388.087 78.562 383.284 Q 19.431 341.514 15.097 338.859 C 10.763 336.203 4.948 334.299 1.801 338.29 C -1.346 342.282 -0.189 346.02 3.874 350.082 L 82.146 428.354 L 91.73 418.77 Z "}),y.createElement("path",{className:`${e.propeller} ${e.propellerCW}`,style:{animation:r},d:" M 125.563 82.77 L 127.993 80.34 Q 129.496 71.117 130.461 64.396 C 131.427 57.675 133.363 52.088 138.731 47.285 Q 197.863 5.515 202.196 2.859 C 206.53 0.204 212.345 -1.701 215.492 2.291 C 218.639 6.282 217.482 10.02 213.419 14.083 L 135.147 92.355 L 125.563 82.77 Z  M 91.73 135.773 L 89.3 138.203 Q 87.797 147.426 86.832 154.147 C 85.866 160.868 83.93 166.455 78.562 171.258 Q 19.431 213.028 15.097 215.684 C 10.763 218.339 4.948 220.243 1.801 216.252 C -1.346 212.26 -0.189 208.523 3.874 204.46 L 82.146 126.188 L 91.73 135.773 Z "})))},defaultSize:{width:100,height:100},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}}}),prepareData:(t,e)=>({bRightRotorRPM:e?.bRightRotorRPM?t.getScalar(e.bRightRotorRPM).value():0,bLeftRotorRPM:e?.bLeftRotorRPM?t.getScalar(e.bLeftRotorRPM).value():0,fRightRotorRPM:e?.fRightRotorRPM?t.getScalar(e.fRightRotorRPM).value():0,fLeftRotorRPM:e?.fLeftRotorRPM?t.getScalar(e.fLeftRotorRPM).value():0,yawAngle:e?.yawAngle?t.getScalar(e.yawAngle).value():0}),registerOptionsUI:t=>{const e=["Drone Top"];t.addCustomEditor({category:e,id:"yawAngle",path:"config.yawAngle",name:"Yaw Angle",editor:Ft.k9}).addCustomEditor({category:e,id:"fRightRotorRPM",path:"config.fRightRotorRPM",name:"Front Right Rotor RPM",editor:Ft.k9}).addCustomEditor({category:e,id:"fLeftRotorRPM",path:"config.fLeftRotorRPM",name:"Front Left Rotor RPM",editor:Ft.k9}).addCustomEditor({category:e,id:"bRightRotorRPM",path:"config.bRightRotorRPM",name:"Back Right Rotor RPM",editor:Ft.k9}).addCustomEditor({category:e,id:"bLeftRotorRPM",path:"config.bLeftRotorRPM",name:"Back Left Rotor RPM",editor:Ft.k9})}},mv=t=>({propeller:(0,Y.css)`
    transform-origin: 50% 50%;
    transform-box: fill-box;
    display: block;
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }
  `,propellerCW:(0,Y.css)`
    animation-direction: normal;
  `,propellerCCW:(0,Y.css)`
    animation-direction: reverse;
  `});var ca=I(64084),Pr=I(29080);class yv extends y.PureComponent{render(){const{data:e}=this.props,n=_v(ve.config.theme2,e);return y.createElement("div",{className:n.container},y.createElement("span",{className:n.span},e?.text))}}const _v=(0,ca.B)((t,e)=>({container:(0,Y.css)`
    display: table;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 100%;
    height: 100%;
    background-color: ${e?.backgroundColor};
    border: ${e?.width}px solid ${e?.borderColor};
    border-radius: 50%;
  `,span:(0,Y.css)`
    display: table-cell;
    vertical-align: ${e?.valign};
    text-align: ${e?.align};
    font-size: ${e?.size}px;
    color: ${e?.color};
  `})),Ev={id:"ellipse",name:"Ellipse",description:"Ellipse",display:yv,defaultSize:{width:160,height:160},getNewOptions:t=>({...t,config:{backgroundColor:{fixed:Ct},borderColor:{fixed:"transparent"},width:1,align:tt.Center,valign:ft.Middle,color:{fixed:ne}},background:{color:{fixed:"transparent"}}}),prepareData:(t,e)=>{const n={width:e.width,text:e.text?t.getText(e.text).value():"",align:e.align??tt.Center,valign:e.valign??ft.Middle,size:e.size};return e.backgroundColor&&(n.backgroundColor=t.getColor(e.backgroundColor).value()),e.borderColor&&(n.borderColor=t.getColor(e.borderColor).value()),e.color&&(n.color=t.getColor(e.color).value()),n},registerOptionsUI:t=>{const e=["Ellipse"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:cn.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:Pr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:tt.Left,label:"Left"},{value:tt.Center,label:"Center"},{value:tt.Right,label:"Right"}]},defaultValue:tt.Left}).addCustomEditor({category:e,id:"config.borderColor",path:"config.borderColor",name:"Ellipse border color",editor:Pr.L,settings:{},defaultValue:{}}).addNumberInput({category:e,path:"config.width",name:"Ellipse border width",settings:{placeholder:"Auto"}}).addCustomEditor({category:e,id:"config.backgroundColor",path:"config.backgroundColor",name:"Ellipse background color",editor:Pr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:ft.Top,label:"Top"},{value:ft.Middle,label:"Middle"},{value:ft.Bottom,label:"Bottom"}]},defaultValue:ft.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}};var bv=I(65132),ua=I(85256);const Cv=(0,Y.css)`
  path {
    vector-effect: non-scaling-stroke;
  }
`;function xv(t){const{data:e}=t;if(!e?.path)return null;const n={fill:e?.fill,stroke:e?.strokeColor,strokeWidth:e?.stroke,height:"100%",width:"100%"};return y.createElement(bv.V,{src:e.path,style:n,className:n.strokeWidth?Cv:void 0})}const Sv={id:"icon",name:"Icon",description:"SVG Icon display",display:xv,getNewOptions:t=>({...t,config:{path:{mode:ln.Q8.Fixed,fixed:"img/icons/unicons/question-circle.svg"},fill:{fixed:Ct}},background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top??100,left:t?.placement?.left??100}}),prepareData:(t,e)=>{let n;e.path&&(n=t.getResource(e.path).value()),(!n||!(0,le.isString)(n))&&(n=(0,ua.getPublicOrAbsoluteUrl)("img/icons/unicons/question-circle.svg"));const r={path:n,fill:e.fill?t.getColor(e.fill).value():Ct};return e.stroke?.width&&e.stroke.color&&e.stroke.width>0&&(r.stroke=e.stroke?.width,r.strokeColor=t.getColor(e.stroke.color).value()),r},registerOptionsUI:t=>{const e=["Icon"];t.addCustomEditor({category:e,id:"iconSelector",path:"config.path",name:"SVG Path",editor:Ft.Lv,settings:{resourceType:"icon"}}).addCustomEditor({category:e,id:"config.fill",path:"config.fill",name:"Fill color",editor:Ft.Lm,settings:{},defaultValue:{fixed:"grey"}})}};var ii=I(67534),Ks=I(63302),fn=I(31276),wv=I(57669),Ws=I(29711),Ys=I(69330),$s=I(28833);class Dv extends y.PureComponent{render(){const{config:e}=this.props;return y.createElement("div",null,y.createElement("h3",null,"NOT FOUND:"),y.createElement("pre",null,JSON.stringify(e,null,2)))}}const da={id:"not-found",name:"Not found",description:"Display when element type is not found in the registry",display:Dv,defaultSize:{width:100,height:100},getNewOptions:()=>({config:{}})};let Mv=0;class ai{constructor(e,n,r){this.item=e,this.options=n,this.parent=r,this.UID=Mv++,this.revId=0,this.sizeStyle={},this.dataStyle={},this.initElement=s=>{this.div=s,this.applyLayoutStylesToDiv()},this.applyDrag=s=>{const o=this.options.constraint?.horizontal===nt.Center,l=this.options.constraint?.vertical===at.Center;if((o||l)&&!((this.getScene()?.selecto?.getSelectedTargets().length??0)>1)){const f=this.div?.getBoundingClientRect()?.height??100,v=l?f/4:0;s.target.style.transform=`translate(${s.translate[0]}px, ${s.translate[1]-v}px)`;return}s.target.style.transform=s.transform},this.applyResize=s=>{const o=this.options.placement,l=s.target.style,c=s.delta[0],u=s.delta[1],d=s.direction[0],f=s.direction[1];d===1?(o.width=s.width,l.width=`${o.width}px`):d===-1&&(o.left-=c,o.width=s.width,l.left=`${o.left}px`,l.width=`${o.width}px`),f===-1?(o.top-=u,o.height=s.height,l.top=`${o.top}px`,l.height=`${o.height}px`):f===1&&(o.height=s.height,l.height=`${o.height}px`)},this.handleMouseEnter=(s,o)=>{const l=this.getScene();l?.isEditingEnabled?o||l?.connections.handleMouseEnter(s):this.handleTooltip(s)},this.handleTooltip=s=>{const o=this.getScene();if(o?.tooltipCallback){const l=this.div?.getBoundingClientRect();o.tooltipCallback({anchorPoint:{x:l?.right??s.pageX,y:l?.top??s.pageY},element:this,isOpen:!1})}},this.handleMouseLeave=s=>{const o=this.getScene();o?.tooltipCallback&&!o?.tooltip?.isOpen&&o.tooltipCallback(void 0)},this.onElementClick=s=>{this.onTooltipCallback()},this.onElementKeyDown=s=>{s.key==="Enter"&&(s.currentTarget instanceof HTMLElement||s.currentTarget instanceof SVGElement)&&this.getScene()?.select({targets:[s.currentTarget]})},this.onTooltipCallback=()=>{const s=this.getScene();s?.tooltipCallback&&s.tooltip?.anchorPoint&&s.tooltipCallback({anchorPoint:{x:s.tooltip.anchorPoint.x,y:s.tooltip.anchorPoint.y},element:this,isOpen:!0})};const i=`Element ${Date.now()}`;n||(this.options={type:e.id,name:i}),n.constraint=n.constraint??{vertical:at.Top,horizontal:nt.Left},n.placement=n.placement??{width:100,height:100,top:0,left:0},n.background=n.background??{color:{fixed:"transparent"}},n.border=n.border??{color:{fixed:"dark-green"}};const a=this.getScene();if(!n.name){const s=a?.getNextElementName();n.name=s??i}a?.byName.set(n.name,this)}getScene(){let e=this.parent;for(;e;){if(e.isRoot())return e.scene;e=e.parent}}getName(){return this.options.name}applyLayoutStylesToDiv(e){if(this.isRoot())return;const{constraint:n}=this.options,{vertical:r,horizontal:i}=n??{},a=this.options.placement??{},o={cursor:this.getScene()?.isEditingEnabled?"grab":"auto",pointerEvents:e?"none":"auto",position:"absolute",minWidth:"10px",minHeight:"10px"},l=["0px","0px"];switch(r){case at.Top:a.top=a.top??0,a.height=a.height??100,o.top=`${a.top}px`,o.height=`${a.height}px`,delete a.bottom;break;case at.Bottom:a.bottom=a.bottom??0,a.height=a.height??100,o.bottom=`${a.bottom}px`,o.height=`${a.height}px`,delete a.top;break;case at.TopBottom:a.top=a.top??0,a.bottom=a.bottom??0,o.top=`${a.top}px`,o.bottom=`${a.bottom}px`,delete a.height,o.height="";break;case at.Center:a.top=a.top??0,a.height=a.height??100,l[1]="-50%",o.top=`calc(50% - ${a.top}px)`,o.height=`${a.height}px`,delete a.bottom;break;case at.Scale:a.top=a.top??0,a.bottom=a.bottom??0,o.top=`${a.top}%`,o.bottom=`${a.bottom}%`,delete a.height,o.height="";break}switch(i){case nt.Left:a.left=a.left??0,a.width=a.width??100,o.left=`${a.left}px`,o.width=`${a.width}px`,delete a.right;break;case nt.Right:a.right=a.right??0,a.width=a.width??100,o.right=`${a.right}px`,o.width=`${a.width}px`,delete a.left;break;case nt.LeftRight:a.left=a.left??0,a.right=a.right??0,o.left=`${a.left}px`,o.right=`${a.right}px`,delete a.width,o.width="";break;case nt.Center:a.left=a.left??0,a.width=a.width??100,l[0]="-50%",o.left=`calc(50% - ${a.left}px)`,o.width=`${a.width}px`,delete a.right;break;case nt.Scale:a.left=a.left??0,a.right=a.right??0,o.left=`${a.left}%`,o.right=`${a.right}%`,delete a.width,o.width="";break}if(o.transform=`translate(${l[0]}, ${l[1]})`,this.options.placement=a,this.sizeStyle=o,this.div){for(const c in this.sizeStyle)this.div.style[c]=this.sizeStyle[c];for(const c in this.dataStyle)this.div.style[c]=this.dataStyle[c]}}setPlacementFromConstraint(e,n){const{constraint:r}=this.options,{vertical:i,horizontal:a}=r??{};e||(e=this.div&&this.div.getBoundingClientRect());let s=0;n||(n=this.div&&this.div.parentElement?.getBoundingClientRect(),s=this.parent?.isRoot()?0:parseFloat(getComputedStyle(this.div?.parentElement).borderWidth));const o=e&&n?Math.round(e.top-n.top-s):0,l=e&&n?Math.round(n.bottom-s-e.bottom):0,c=e&&n?Math.round(e.left-n.left-s):0,u=e&&n?Math.round(n.right-s-e.right):0,d={},f=e?.width??100,v=e?.height??100;switch(i){case at.Top:d.top=o,d.height=v;break;case at.Bottom:d.bottom=l,d.height=v;break;case at.TopBottom:d.top=o,d.bottom=l;break;case at.Center:const p=e?o+v/2:0,g=(n?n.height/2:0)-p;d.top=g,d.height=v;break;case at.Scale:d.top=o/(n?.height??v)*100,d.bottom=l/(n?.height??v)*100;break}switch(a){case nt.Left:d.left=c,d.width=f;break;case nt.Right:d.right=u,d.width=f;break;case nt.LeftRight:d.left=c,d.right=u;break;case nt.Center:const p=e?c+f/2:0,g=(n?n.width/2:0)-p;d.left=g,d.width=f;break;case nt.Scale:d.left=c/(n?.width??f)*100,d.right=u/(n?.width??f)*100;break}this.options.placement=d,this.applyLayoutStylesToDiv(),this.revId++,this.getScene()?.save()}updateData(e){this.item.prepareData&&(this.data=this.item.prepareData(e,this.options.config),this.revId++);const{background:n,border:r}=this.options,i={};if(n){if(n.color){const a=e.getColor(n.color);i.backgroundColor=a.value()}if(n.image){const a=e.getResource(n.image);if(a){const s=a.value();if(s)switch(i.backgroundImage=`url("${s}")`,n.size??Wt.Contain){case Wt.Contain:i.backgroundSize="contain",i.backgroundRepeat="no-repeat";break;case Wt.Cover:i.backgroundSize="cover",i.backgroundRepeat="no-repeat";break;case Wt.Original:i.backgroundRepeat="no-repeat";break;case Wt.Tile:i.backgroundRepeat="repeat";break;case Wt.Fill:i.backgroundSize="100% 100%";break}else i.backgroundImage=""}}}if(r&&r.color&&r.width!==void 0){const a=e.getColor(r.color);i.borderWidth=`${r.width}px`,i.borderStyle="solid",i.borderColor=a.value(),i.backgroundImage&&(i.backgroundOrigin="padding-box")}this.dataStyle=i,this.applyLayoutStylesToDiv()}isRoot(){return!1}visit(e){e(this)}onChange(e){this.item.id!==e.type&&(this.item=pn.getIfExists(e.type)??da);const n=this.options.name,r=e.name;this.revId++,this.options={...e};let i=this.parent;for(;i;){if(i.isRoot()){i.scene.save();break}i.revId++,i=i.parent}const a=this.getScene();n!==r&&a&&(js(this,a.byName)&&Zs(this,a).forEach(s=>{s.info.targetName=r}),a.byName.delete(n),a.byName.set(r,this))}getSaveModel(){return{...this.options}}render(){const{item:e,div:n}=this,r=this.getScene(),i=n&&r&&r.selecto&&r.selecto.getSelectedTargets().includes(n);return y.createElement("div",{key:this.UID,ref:this.initElement,onMouseEnter:a=>this.handleMouseEnter(a,i),onMouseLeave:r?.isEditingEnabled?void 0:this.handleMouseLeave,onClick:r?.isEditingEnabled?void 0:this.onElementClick,onKeyDown:r?.isEditingEnabled?void 0:this.onElementKeyDown,role:"button",tabIndex:0},y.createElement(e.display,{key:`${this.UID}/${this.revId}`,config:this.options.config,data:this.data,isSelected:i}))}}function Hs(t,e){try{let n={targets:[]};if(e instanceof ie){const r=[];r.push(e?.div),n.targets=r,n.frame=e,t.select(n)}else t.currentLayer=e.parent,n.targets=[e?.div],t.select(n)}catch{$s.Z.emit(ri.SI.alertError,["Unable to select element, try selecting element in panel instead"])}}function oi(t,e){return Vs(t?[...li,...tl]:[...li],e)}function Vs(t,e){const n={options:[],current:[]},r=[];for(const i of t){const a={label:i.name,value:i.id,description:i.description};if(i.state===Ns.BV.alpha){if(!ve.Oh)continue;a.label=`${i.name} (Alpha)`,r.push(a)}else n.options.push(a);i.id===e&&n.current.push(a)}for(const i of r)n.options.push(i);return n}function fa(t,e,n){const r=pn.getIfExists(t.value)??da,i={...r.getNewOptions(),type:r.id,name:""};if(n&&(i.placement={...i.placement,top:n.y,left:n.x}),r.defaultSize&&(i.placement={...i.placement,...r.defaultSize}),e){const a=new ai(r,i,e);a.updateData(e.scene.context),e.elements.push(a),e.scene.save(),e.reinitializeMoveable(),setTimeout(()=>Hs(e.scene,a))}}function Xs(t,e,n){const i=t.getPanelData()?.series,a=[],s=new Set;return i?.forEach(o=>{const l=o.fields.filter(c=>!c.config.custom?.hideFrom?.tooltip);if(e.text?.field&&l.some(c=>(0,Ys.CZ)(c,o)===e.text?.field)){const c=l.filter(u=>(0,Ys.CZ)(u,o)===e.text?.field)[0];if(c?.getLinks){const u=c.display?c.display(n):{text:`${n}`,numeric:+n};c.getLinks({calculatedValue:u}).forEach(d=>{const f=`${d.title}/${d.href}`;s.has(f)||(a.push(d),s.add(f))})}}}),a}function kv(t){return t.options.connections&&t.options.connections.length>0}function js(t,e){return Us(e).some(r=>r.target===t)}function Us(t){const e=[];for(let n of t.values())n.options.connections&&n.options.connections.forEach((r,i)=>{(0,le.isString)(r.color)&&(r.color={fixed:r.color}),(0,le.isNumber)(r.size)&&(r.size={fixed:2,min:1,max:10});const a=r.targetName?t.get(r.targetName):n.parent;a&&e.push({index:i,source:n,target:a,info:r})});return e}function Zs(t,e){return e.connections.state.filter(n=>n.target===t)}function Tv(t,e){Zs(t,e).forEach(r=>{const a=(r.source.options.connections?.splice(0)??[]).filter(s=>s.targetName!==t.getName());r.source.onChange({...r.source.options,connections:a})})}const Rv={settings:{}},Ov=t=>{const{data:e,isSelected:n,config:r}=t,i=(0,Et.wW)(Qs(e)),a=(0,fn.R9)(),s=a.instanceState?.scene;let o;o=a.instanceState?.scene?.data.series;const l=(0,ii.Z)(s?.editModeEnabled??(0,Ks.of)(!1)),c=()=>o&&r.text?.field&&u()?"Field not found":o&&r.text?.field&&!e?.text?"No data":e?.text?e.text:"Double click to set field",u=()=>{const d=(0,Ws.g2)(o);return!(0,Ws.w3)(r.text?.field,d)};return l&&n?y.createElement(Pv,{...t}):y.createElement("div",{className:i.container},y.createElement("span",{className:i.span},c()))},Pv=t=>{let{data:e,config:n}=t;const r=(0,fn.R9)();let i;i=r.instanceState?.scene?.data.series;const a=(0,y.useCallback)(o=>{let l;if(l=r.instanceState?.selected[0],l){const c=l.options;l.onChange({...c,config:{...c.config,text:{fixed:"",field:o,mode:ln.xy.Field}},background:{color:{field:o,fixed:c.background?.color?.fixed??""}}});const u=r.instanceState?.scene;u&&(u.editModeEnabled.next(!1),u.updateData(u.data))}},[r.instanceState?.scene,r.instanceState?.selected]),s=(0,Et.wW)(Qs(e));return y.createElement("div",{className:s.inlineEditorContainer},i&&y.createElement(wv.b,{context:{data:i},value:n.text?.field??"",onChange:a,item:Rv}))},Qs=t=>e=>({container:(0,Y.css)`
    position: absolute;
    height: 100%;
    width: 100%;
    display: table;
  `,inlineEditorContainer:(0,Y.css)`
    height: 100%;
    width: 100%;
    display: flex;
    align-items: center;
    padding: 10px;
  `,span:(0,Y.css)`
    display: table-cell;
    vertical-align: ${t?.valign};
    text-align: ${t?.align};
    font-size: ${t?.size}px;
    color: ${t?.color};
  `}),vn={id:"metric-value",name:"Metric Value",description:"Display a field value",display:Ov,hasEditMode:!0,defaultSize:{width:260,height:50},getNewOptions:t=>({...t,config:{align:tt.Center,valign:ft.Middle,color:{fixed:ne},text:{mode:ln.xy.Field,fixed:"",field:""},size:20},background:{color:{fixed:Ct}},placement:{width:t?.placement?.width,height:t?.placement?.height,top:t?.placement?.top??100,left:t?.placement?.left??100}}),prepareData:(t,e)=>{const n={text:e.text?t.getText(e.text).value():"",align:e.align??tt.Center,valign:e.valign??ft.Middle,size:e.size};return e.color&&(n.color=t.getColor(e.color).value()),n.links=Xs(t,e,n.text),n},registerOptionsUI:t=>{const e=["Metric value"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:cn.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:Pr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:tt.Left,label:"Left"},{value:tt.Center,label:"Center"},{value:tt.Right,label:"Right"}]},defaultValue:tt.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:ft.Top,label:"Top"},{value:ft.Middle,label:"Middle"},{value:ft.Bottom,label:"Bottom"}]},defaultValue:ft.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}};class Av extends y.PureComponent{render(){const{data:e}=this.props,n=Nv(ve.config.theme2,e);return y.createElement("div",{className:n.container},y.createElement("span",{className:n.span},e?.text))}}const Nv=(0,ca.B)((t,e)=>({container:(0,Y.css)`
    position: absolute;
    height: 100%;
    width: 100%;
    display: table;
  `,span:(0,Y.css)`
    display: table-cell;
    vertical-align: ${e?.valign};
    text-align: ${e?.align};
    font-size: ${e?.size}px;
    color: ${e?.color};
  `})),Lv={id:"rectangle",name:"Rectangle",description:"Rectangle",display:Av,defaultSize:{width:240,height:160},getNewOptions:t=>({...t,config:{align:tt.Center,valign:ft.Middle,color:{fixed:ne}},background:{color:{fixed:Ct}}}),prepareData:(t,e)=>{const n={text:e.text?t.getText(e.text).value():"",align:e.align??tt.Center,valign:e.valign??ft.Middle,size:e.size};return e.color&&(n.color=t.getColor(e.color).value()),n},registerOptionsUI:t=>{const e=["Rectangle"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:cn.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:Pr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:tt.Left,label:"Left"},{value:tt.Center,label:"Center"},{value:tt.Right,label:"Right"}]},defaultValue:tt.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:ft.Top,label:"Top"},{value:ft.Middle,label:"Middle"},{value:ft.Bottom,label:"Bottom"}]},defaultValue:ft.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}},Iv=t=>{const e=(0,Et.wW)(si(t));return y.createElement("g",{className:e.outline},y.createElement("g",{className:e.server},y.createElement("path",{d:"m2.6953 37.5v20.883c0 7.6725 15.592 13.922 34.805 13.922s34.805-6.2493 34.805-13.922v-20.883"}),y.createElement("path",{d:"m2.6953 16.617v20.883c0 7.7035 15.592 13.922 34.805 13.922s34.805-6.2184 34.805-13.922v-20.883"}),y.createElement("path",{d:"m37.5 30.539c19.212 0 34.805-6.2185 34.805-13.922 0-7.7034-15.592-13.922-34.805-13.922s-34.805 6.2184-34.805 13.922c0 7.7035 15.592 13.922 34.805 13.922z"})),y.createElement("g",{className:e.circleBack},y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -132.86 -110.58)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -122.04 -111.7)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.21 -114.77)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})),y.createElement("g",{className:e.circle},y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -52.337 -30.65)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -41.518 -31.769)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.688 -34.842)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})))},Bv=t=>{const e=(0,Et.wW)(si(t));return y.createElement("g",null,y.createElement("g",{className:e.outline,transform:"matrix(1.01 0 0 1.01 -.375 -.375)"},y.createElement("g",{className:e.server},y.createElement("path",{d:"m3.2812 55.659 9.125-52.377h50.188l9.125 52.377"}),y.createElement("path",{d:"m3.2812 56.328c0-2.5246 2.0379-4.5625 4.5625-4.5625h59.313c2.5245 0 4.5625 2.0379 4.5625 4.5625v10.828c0 2.5245-2.038 4.5625-4.5625 4.5625h-59.313c-2.5246 0-4.5625-2.038-4.5625-4.5625z"})),y.createElement("path",{d:"m12.406 61.742h30.69"}),y.createElement("path",{d:"m52.8 51.765v19.953"}),y.createElement("path",{className:e.circleBack,transform:"matrix(2.7592 0 0 2.7592 -109.42 -108.61)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{className:e.circle,transform:"matrix(1.4775 0 0 1.4775 -29.697 -29.479)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})))},Fv=t=>{const e=(0,Et.wW)(si(t));return y.createElement("g",{className:e.outline,transform:"translate(.5 .49865)"},y.createElement("g",{className:e.server},y.createElement("path",{d:"m3.4834 21.768 8.0783-19.456h50.875l8.0784 19.456"}),y.createElement("path",{d:"m2.3125 24.852c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"}),y.createElement("path",{d:"m2.3125 42.031c0-2.5592 2.0658-4.6251 4.625-4.6251h60.125c2.5592 0 4.625 2.0659 4.625 4.6251v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"}),y.createElement("path",{d:"m2.3125 59.172c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"})),y.createElement("path",{d:"m11.562 28.797h31.111"}),y.createElement("path",{d:"m52.508 20.227v17.143"}),y.createElement("path",{d:"m11.562 63.117h31.111"}),y.createElement("path",{d:"m52.508 54.547v17.143"}),y.createElement("path",{d:"m11.562 45.977h31.111"}),y.createElement("path",{d:"m52.508 37.406v17.143"}),y.createElement("g",{className:e.circleBack},y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -143.2)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -126.14)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(2.7868 0 0 2.7868 -111.31 -108.86)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})),y.createElement("g",{className:e.circle},y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -63.277)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -46.209)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{transform:"matrix(1.4922 0 0 1.4922 -30.794 -28.93)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"})))},zv=t=>{const e=(0,Et.wW)(si(t));return y.createElement("g",{className:e.outline},y.createElement("g",{className:e.server},y.createElement("path",{d:"m5.3125 9.6562c0-3.5621 2.8754-6.4375 6.4375-6.4375h51.5c3.5621 0 6.4375 2.8754 6.4375 6.4375v28.625c0 3.5621-2.8754 6.4375-6.4375 6.4375h-51.5c-3.5621 0-6.4375-2.8754-6.4375-6.4375z"}),y.createElement("path",{d:"m2.8125 59.859c0-2.5592 2.0658-4.625 4.625-4.625h60.125c2.5592 0 4.625 2.0658 4.625 4.625v7.8933c0 2.5592-2.0658 4.625-4.625 4.625h-60.125c-2.5592 0-4.625-2.0658-4.625-4.625z"})),y.createElement("path",{d:"m37.5 46.719v2.875"}),y.createElement("path",{d:"m24.625 51.343h25.75"}),y.createElement("path",{d:"m12.062 63.804h31.111"}),y.createElement("path",{d:"m53.008 55.234v17.143"}),y.createElement("path",{className:e.circleBack,transform:"matrix(2.7868 0 0 2.7868 -110.81 -108.2)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}),y.createElement("path",{className:e.circle,transform:"matrix(1.4922 0 0 1.4922 -30.294 -28.27)",d:"m62.198 60.586c.6388 0 1.1558.5171 1.1558 1.1559 0 .6387-.517 1.1558-1.1558 1.1558-.6387 0-1.1558-.5171-1.1558-1.1558 0-.6388.5171-1.1559 1.1558-1.1559z"}))};var Gv=(t=>(t.Single="Single",t.Stack="Stack",t.Database="Database",t.Terminal="Terminal",t))(Gv||{});const qs=ve.default.theme2.colors.text.primary,Kv={id:"server",name:"Server",description:"Basic server with status",display:({data:t})=>t?y.createElement("svg",{viewBox:"0 0 75 75"},t.type==="Single"?y.createElement(Bv,{...t}):t.type==="Stack"?y.createElement(Fv,{...t}):t.type==="Database"?y.createElement(Iv,{...t}):t.type==="Terminal"?y.createElement(zv,{...t}):null):null,defaultSize:{width:100,height:100},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top,left:t?.placement?.left},config:{type:"Single"}}),prepareData:(t,e)=>({blinkRate:e?.blinkRate?t.getScalar(e.blinkRate).value():0,statusColor:e?.statusColor?t.getColor(e.statusColor).value():"transparent",bulbColor:e?.bulbColor?t.getColor(e.bulbColor).value():"green",type:e.type}),registerOptionsUI:t=>{const e=["Server"];t.addSelect({category:e,path:"config.type",name:"Type",settings:{options:[{value:"Single",label:"Single"},{value:"Stack",label:"Stack"},{value:"Database",label:"Database"},{value:"Terminal",label:"Terminal"}]},defaultValue:"Single"}).addCustomEditor({category:e,id:"statusColor",path:"config.statusColor",name:"Status color",editor:Ft.Lm,settings:{},defaultValue:{fixed:"transparent"}}).addCustomEditor({category:e,id:"bulbColor",path:"config.bulbColor",name:"Bulb color",editor:Ft.Lm,settings:{},defaultValue:{fixed:"green"}}).addCustomEditor({category:e,id:"blinkRate",path:"config.blinkRate",name:"Blink rate [hz] (0 = off)",editor:Ft.k9,settings:{min:0,max:100}})}},si=t=>e=>({bulb:(0,Y.css)`
    @keyframes blink {
      0% {
        fill-opacity: 0;
      }
      50% {
        fill-opacity: 1;
      }
      100% {
        fill-opacity: 0;
      }
    }
  `,server:(0,Y.css)`
    fill: ${t?.statusColor??"transparent"};
  `,circle:(0,Y.css)`
    animation: blink ${t?.blinkRate?1/t.blinkRate:0}s infinite step-end;
    fill: ${t?.bulbColor};
    stroke: none;
  `,circleBack:(0,Y.css)`
    fill: ${qs};
    stroke: none;
    opacity: 1;
  `,outline:(0,Y.css)`
    stroke: ${qs};
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-width: 4px;
  `}),Wv=t=>{const{data:e,isSelected:n}=t,r=(0,Et.wW)(Js(e)),a=(0,fn.R9)().instanceState?.scene;return(0,ii.Z)(a?.editModeEnabled??(0,Ks.of)(!1))&&n?y.createElement(Yv,{...t}):y.createElement("div",{className:r.container},y.createElement("span",{className:r.span},e?.text?e.text:"Double click to set text"))},Yv=t=>{let{data:e,config:n}=t;const r=(0,fn.R9)();let i;i=r.instanceState?.scene?.data.series;const a=(0,y.useRef)(n.text?.fixed??"");(0,y.useEffect)(()=>()=>{l(a.current)});const s=u=>{if(u.key==="Enter"){u.preventDefault();const d=r.instanceState?.scene;d&&d.editModeEnabled.next(!1)}},o=u=>{a.current=u.currentTarget.value},l=(0,y.useCallback)(u=>{let d;if(d=r.instanceState?.selected[0],d){const f=d.options;d.onChange({...f,config:{...f.config,text:{...d.options.config.text,fixed:u}}});const v=r.instanceState?.scene;v&&v.updateData(v.data)}},[r.instanceState?.scene,r.instanceState?.selected]),c=(0,Et.wW)(Js(e));return y.createElement("div",{className:c.inlineEditorContainer},i&&y.createElement(un.I,{defaultValue:n.text?.fixed??"",onKeyDown:s,onKeyUp:o,autoFocus:!0}))},Js=t=>e=>({container:(0,Y.css)`
    position: absolute;
    height: 100%;
    width: 100%;
    display: table;
  `,inlineEditorContainer:(0,Y.css)`
    height: 100%;
    width: 100%;
    display: flex;
    align-items: center;
    padding: 10px;
  `,span:(0,Y.css)`
    display: table-cell;
    vertical-align: ${t?.valign};
    text-align: ${t?.align};
    font-size: ${t?.size}px;
    color: ${t?.color};
  `}),$v={id:"text",name:"Text",description:"Display text",display:Wv,hasEditMode:!0,defaultSize:{width:100,height:50},getNewOptions:t=>({...t,config:{align:tt.Center,valign:ft.Middle,color:{fixed:sn},size:16},placement:{width:t?.placement?.width??100,height:t?.placement?.height??100,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>{const n={text:e.text?t.getText(e.text).value():"",align:e.align??tt.Center,valign:e.valign??ft.Middle,size:e.size};return e.color&&(n.color=t.getColor(e.color).value()),n.links=Xs(t,e,n.text),n},registerOptionsUI:t=>{const e=["Text"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:cn.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:Pr.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:tt.Left,label:"Left"},{value:tt.Center,label:"Center"},{value:tt.Right,label:"Right"}]},defaultValue:tt.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:ft.Top,label:"Top"},{value:ft.Middle,label:"Middle"},{value:ft.Bottom,label:"Bottom"}]},defaultValue:ft.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}},Hv={id:"windTurbine",name:"Wind Turbine",description:"Spinny spinny",display:({data:t})=>{const e=(0,Et.wW)(Vv),n=`spin ${t?.rpm?60/Math.abs(t.rpm):0}s linear infinite`;return y.createElement("svg",{viewBox:"0 0 189.326 283.989",preserveAspectRatio:"xMidYMid meet",style:{fill:Ct}},y.createElement("symbol",{id:"blade"},y.createElement("path",{fill:"#e6e6e6",id:"blade-front",d:"M14.6491879,1.85011601 C14.2684455,-0.0535962877 10.7150812,-0.815081206 9.06473318,3.37308585 L0.434338747,70.7658933 L8.93805104,91.9607889 L15.4106729,90.437819 L17.5684455,78.3807425 L14.5218097,1.97679814 L14.6491879,1.85011601 Z"}),y.createElement("path",{fill:"#d0d6d7",id:"blade-side",d:"M11.0951276,0.581206497 C10.3336427,0.961948956 9.57215777,1.85011601 8.93735499,3.24640371 L0.306960557,70.6392111 L8.81067285,91.8341067 L3.35359629,70.0044084 L11.0951276,0.581206497 Z"})),y.createElement("g",null,y.createElement("g",{id:"structure",transform:"translate(58.123, 82.664)",fillRule:"nonzero"},y.createElement("polygon",{id:"tower",fill:"#e6e6e6",points:"33.111,10.984 39.965,10.984 44.28,196.176 28.796,196.176"}),y.createElement("path",{id:"yaw",fill:"rgba(0,0,0,0.25)",d:"M40.3454756,23.2948956 L40.7262181,34.8445476 C38.8225058,35.0986079 35.7765661,35.0986079 32.349884,34.337123 L32.7306265,23.2955916 L40.3454756,23.2955916 L40.3454756,23.2948956 Z"}),y.createElement("path",{id:"base",fill:"#d0d6d7",transform:"translate(0 42)",d:"M26.3846868,150.591647 L46.5640371,150.591647 C48.8484919,150.591647 50.7522042,152.49536 50.7522042,154.779814 L50.7522042,158.967981 L22.0691415,158.967981 L22.0691415,154.779814 C22.0691415,152.49536 23.9728538,150.591647 26.2573086,150.591647 L26.3846868,150.591647 Z"}),y.createElement("circle",{id:"nacelle",fill:"#e6e6e6",cx:"36.54",cy:"12",r:"11.93"}),y.createElement("circle",{id:"gearbox",fill:"none",stroke:"#d0d6d7",strokeWidth:"2.75",cx:"36.538",cy:"11.999",r:"5.8"})),y.createElement("g",{className:e.blade,style:{animation:n}},y.createElement("use",{id:"blade1",href:"#blade",x:"83.24",y:"0"}),y.createElement("use",{id:"blade2",href:"#blade",x:"83.24",y:"0",transform:"rotate(120 94.663 94.663)"}),y.createElement("use",{id:"blade3",href:"#blade",x:"83.24",y:"0",transform:"rotate(-120 94.663 94.663)"}))))},defaultSize:{width:100,height:155},getNewOptions:t=>({...t,background:{color:{fixed:"transparent"}},placement:{width:t?.placement?.width??100,height:t?.placement?.height??155,top:t?.placement?.top,left:t?.placement?.left}}),prepareData:(t,e)=>({rpm:e?.rpm?t.getScalar(e.rpm).value():0}),registerOptionsUI:t=>{const e=["Wind Turbine"];t.addCustomEditor({category:e,id:"rpm",path:"config.rpm",name:"RPM",editor:Ft.k9})}},Vv=t=>({blade:(0,Y.css)`
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }

    transform-origin: 94.663px 94.663px;
    transform: rotate(15deg);
  `}),va={...vn.getNewOptions(),placement:{...vn.getNewOptions().placement,...vn.defaultSize},type:vn.id,name:"Element 1"},li=[vn,$v,Ev,Lv,Sv,Kv],tl=[dv,Hv,gv,fv,pv],pn=new qf.B(()=>[...li,...tl]);var Ut=(t=>(t.Delete="delete",t.Duplicate="duplicate",t.MoveTop="move-top",t.MoveBottom="move-bottom",t))(Ut||{}),Be=(t=>(t.ElementManagement="element-management",t.SelectedElement="selected-element",t.SelectedConnection="selected-connection",t))(Be||{});const be=10,ci=50,Xv={id:"frame",name:"Frame",description:"Frame",getNewOptions:()=>({config:{}}),display:()=>y.createElement("div",null,"FRAME!")};class ie extends ai{constructor(e,n,r){super(Xv,e,r),this.options=e,this.parent=r,this.elements=[],this.doAction=(a,s,o=!0,l=!0)=>{switch(a){case Ut.Delete:this.elements=this.elements.filter(d=>d!==s),Tv(s,this.scene),this.scene.byName.delete(s.options.name),this.scene.save(),this.reinitializeMoveable();break;case Ut.Duplicate:if(s.item.id==="frame"){console.log("Can not duplicate frames (yet)",a,s);return}const c=(0,le.cloneDeep)(s.options);if(l){const{constraint:d,placement:f}=s.options,{vertical:v,horizontal:p}=d??{},h={...f};switch(v){case at.Top:h.top==null?h.top=25:h.top+=be;break;case at.Bottom:h.bottom==null?h.bottom=100:h.bottom-=be;break;case at.TopBottom:h.top==null?h.top=25:h.top+=be,h.bottom==null?h.bottom=100:h.bottom-=be;break;case at.Center:h.top!=null&&(h.top-=be);break}switch(p){case nt.Left:h.left==null?h.left=ci:h.left+=be;break;case nt.Right:h.right==null?h.right=ci:h.right-=be;break;case nt.LeftRight:h.left==null?h.left=ci:h.left+=be,h.right==null?h.right=ci:h.right-=be;break;case nt.Center:h.left!=null&&(h.left-=be);break}c.placement=h}c.connections=void 0;const u=new ai(s.item,c,this);u.updateData(this.scene.context),o&&(u.options.name=this.scene.getNextElementName()),this.elements.push(u),this.scene.byName.set(u.options.name,u),this.scene.byName.set(s.options.name,s),this.scene.save(),this.reinitializeMoveable(),setTimeout(()=>{this.scene.targetsToSelect.add(u.div)});break;case Ut.MoveTop:case Ut.MoveBottom:s.parent?.doMove(s,a);break;default:console.log("DO action",a,s);return}},this.scene=n;let{elements:i}=this.options;i||(this.options.elements=i=[]);for(const a of i)if(a.type==="frame")this.elements.push(new ie(a,n,this));else{const s=pn.getIfExists(a.type)??da;this.elements.push(new ai(s,a,this))}}isRoot(){return!1}updateData(e){super.updateData(e);for(const n of this.elements)n.updateData(e)}reorder(e,n){const r=Array.from(this.elements),[i]=r.splice(e,1);r.splice(n,0,i),this.elements=r,this.reinitializeMoveable()}reorderTree(e,n,r=!1){const i=Array.from(this.elements),a=this.elements.indexOf(e),s=r?this.elements.length-1:this.elements.indexOf(n),[o]=i.splice(a,1);i.splice(s,0,o),this.elements=i,this.reinitializeMoveable()}doMove(e,n){const r=this.elements.filter(i=>i!==e);n===Ut.MoveBottom?r.unshift(e):r.push(e),this.elements=r,this.scene.save(),this.reinitializeMoveable()}reinitializeMoveable(){this.scene.clearCurrentSelection(),setTimeout(()=>this.scene.initMoveable(!0,this.scene.isEditingEnabled))}render(){return y.createElement("div",{key:this.UID,ref:this.initElement},this.elements.map(e=>e.render()))}visit(e){super.visit(e);for(const n of this.elements)e(n)}getSaveModel(){return{...this.options,elements:this.elements.map(e=>e.getSaveModel())}}}var el=I(56989),jv=I(31544),ui=I(13601);function Uv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function Zv(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function Ce(t,e){return function(n){n&&(t[e]=n)}}function rl(t,e,n){return function(r){r&&(t[e][n]=r)}}function pa(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function Qv(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var s,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var c=(s=this[r])[i].apply(s,o);return c===this[r]?this:c})})}}var qv=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,s=i.indexOf(n),o=s===-1?i.length:s;i[o]=n,a[o]=r},t}(),Jv=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t}(),tp=typeof Map=="function",ep=function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t}();function rp(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new ep;n[a]=o,r[s]=o}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var l=n[s],c=r[o-1],u=l.getIndex();l.disconnect(),c?l.connect(c,c.next):l.connect(void 0,n[0]);var d=l.getIndex();return[u,d]})}var np=function(){function t(n,r,i,a,s,o,l,c){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=l,this.fixed=c}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=rp(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],l=a[1],c=r[s],u=c[0],d=c[1];if(o!==l)return i.push([u,d]),!0}),this.cachePureChanged=i},t}();function hn(t,e,n){var r=tp?Map:n?Jv:qv,i=n||function(_){return _},a=[],s=[],o=[],l=t.map(i),c=e.map(i),u=new r,d=new r,f=[],v=[],p={},h=[],g=0,m=0;return l.forEach(function(_,b){u.set(_,b)}),c.forEach(function(_,b){d.set(_,b)}),l.forEach(function(_,b){var E=d.get(_);typeof E>"u"?(++m,s.push(b)):p[E]=m}),c.forEach(function(_,b){var E=u.get(_);typeof E>"u"?(a.push(b),++g):(o.push([E,b]),m=p[b]||0,f.push([E-m,b-g]),v.push(b===E),E!==b&&h.push([E,b]))}),s.reverse(),new np(t,e,a,s,h,o,f,v)}var ip=function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=hn(this.list,r,this.findKeyCallback);return this.list=r,i},t}();const ap=ip;var nl="rgb",il="rgba",al="hsl",ol="hsla",CE=[nl,il,al,ol],op="function",xE="property",SE="array",sp="object",lp="string",cp="number",gn="undefined",wE=typeof window!==gn,mn=typeof document!==gn&&document,sl=null,DE=function(t){if(!mn)return"";var e=(mn.body||mn.documentElement).style,n=sl.length;if(typeof e[t]!==gn)return t;for(var r=0;r<n;++r){var i="-"+sl[r]+"-"+t;if(typeof e[i]!==gn)return i}return""},ME=null,kE=null,TE=null,RE=null,up=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],er=1e-7,di={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function OE(t,e,n,r){return(t*r+e*n)/(n+r)}function dp(t){return typeof t===gn}function ha(t){return t&&typeof t===sp}function ll(t){return Array.isArray(t)}function rr(t){return typeof t===lp}function fp(t){return typeof t===cp}function vp(t){return typeof t===op}function pp(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function cl(t,e,n,r,i){var a=ga(t,e,n);return a?n:hp(t,e,n+1,r,i)}function ga(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function hp(t,e,n,r,i){for(var a=function(c){var u=e[c].trim();if(u===t.close&&!ga(t,e,c))return{value:c};var d=c,f=ya(i,function(v){var p=v.open;return p===u});if(f&&(d=cl(f,e,c,r,i)),d===-1)return s=c,"break";c=d,s=c},s,o=n;o<r;++o){var l=a(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function ul(t,e){var n=rr(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,c=n.openCloseCharacters,u=c===void 0?up:c,d=u.map(function(C){var D=C.open,w=C.close;return D===w?D:D+"|"+w}).join("|"),f="(\\s*"+i+"\\s*|"+d+"|\\s+)",v=new RegExp(f,"g"),p=t.split(v).filter(Boolean),h=p.length,g=[],m=[];function _(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var b=function(C){var D=p[C].trim(),w=C,k=ya(u,function(M){var R=M.open;return R===D}),T=ya(u,function(M){var R=M.close;return R===D});if(k){if(w=cl(k,p,C,h,u),w!==-1&&l)return _()&&a||(g.push(p.slice(C,w+1).join("")),C=w,a)?(E=C,"break"):(E=C,"continue")}else{if(T&&!ga(T,p,C))throw new Error("invalid format: "+T.close);if(pp(D,i)&&!s)return _(),a?(E=C,"break"):(E=C,"continue")}w===-1&&(w=h-1),m.push(p.slice(C,w+1).join("")),C=w,E=C},E,S=0;S<h;++S){var x=b(S);if(S=E,x==="break")break}return m.length&&g.push(m.join("")),g}function gp(t){return ul(t,"")}function Ar(t){return ul(t,",")}function dl(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function fl(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function PE(t){return t.replace(/[\s-_]([a-z])/g,function(e,n){return n.toUpperCase()})}function ma(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function AE(t){return[].slice.call(t)}function NE(){return Date.now?Date.now():new Date().getTime()}function vl(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function mp(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=r-1;i>=0;--i)if(e(t[i],i,t))return i;return n}function LE(t,e,n){var r=mp(t,e);return r>-1?t[r]:n}function ya(t,e,n){var r=vl(t,e);return r>-1?t[r]:n}var IE=null,BE=null;function FE(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in e)e.push(n);return e}function zE(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var i=e.indexOf(n),a=e.indexOf(r);return a===-1&&i===-1?0:i===-1?1:a===-1?-1:i-a})}function GE(t,e){var n=fl(t),r=n.value,i=n.unit;if(ha(e)){var a=e[i];if(a){if(vp(a))return a(r);if(di[i])return di[i](r,a)}}else if(i==="%")return r*e/100;return di[i]?di[i](r):r}function yp(t,e,n){return Math.max(e,Math.min(t,n))}function pl(t,e,n){return[[Fe(e[0],er),Fe(e[0]*t[1]/t[0],er)],[Fe(e[1]*t[0]/t[1],er),Fe(e[1],er)]].filter(function(r){return r.every(function(i,a){return n?i<=e[a]:i>=e[a]})})[0]||t}function KE(t,e,n,r){if(!r)return t.map(function(f,v){return yp(f,e[v],n[v])});var i=t[0],a=t[1],s=pl(t,e,!1),o=s[0],l=s[1],c=pl(t,n,!0),u=c[0],d=c[1];return i<o||a<l?(i=o,a=l):(i>u||a>d)&&(i=u,a=d),[i,a]}function WE(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function _p(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function hl(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Ep(t){return[0,1].map(function(e){return _p(t.map(function(n){return n[e]}))})}function YE(t){var e=Ep(t),n=hl(e,t[0]),r=hl(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function $E(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function Fe(t,e){return e?Math.round(t/e)*e:t}function HE(t,e){return t.forEach(function(n,r){t[r]=Fe(t[r],e)}),t}function VE(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function XE(t,e,n){var r=!1;return t.replace(e,function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r?i[0]:(r=!0,rr(n)?n:n.apply(void 0,i))})}function bp(t){return t.replace("#","")}function gl(t){var e=bp(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/255;return isNaN(a)&&(a=1),[n,r,i,a]}function Cp(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),i=t.charAt(4),a=["#",e,e,n,n,r,r,i,i];return a.join("")}function xp(t){var e,n=t[0],r=t[1],i=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(n/60%2-1)),o=i-a/2,l;return n<60?l=[a,s,0]:n<120?l=[s,a,0]:n<180?l=[0,a,s]:n<240?l=[0,s,a]:n<300?l=[s,0,a]:n<360?l=[a,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function jE(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?gl(Cp(t)):gl(t);if(t.indexOf("(")!==-1){var e=dl(t),n=e.prefix,r=e.value;if(!n||!r)return;var i=Ar(r),a=[0,0,0,1],s=i.length;switch(n){case nl:case il:for(var o=0;o<s;++o)a[o]=parseFloat(i[o]);return a;case al:case ol:for(var o=0;o<s;++o)i[o].indexOf("%")!==-1?a[o]=parseFloat(i[o])/100:a[o]=parseFloat(i[o]);return xp(a)}}}function UE(t,e){return e?mn.querySelectorAll(t):mn.querySelector(t)}function ZE(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function QE(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function qE(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function JE(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},i=window.getComputedStyle(n),a=e.length,s=0;s<a;++s)r[e[s]]=i[e[s]];return r}function tb(t,e,n,r){t.addEventListener(e,n,r)}function eb(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var _a=function(t,e){return _a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},_a(t,e)};function nr(t,e){_a(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ze=function(){return ze=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ze.apply(this,arguments)};function ml(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Sp(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Ea(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function ba(t,e){var n=Object.keys(t),r=Object.keys(e),i=hn(n,r,function(l){return l}),a={},s={},o={};return i.added.forEach(function(l){var c=r[l];a[c]=e[c]}),i.removed.forEach(function(l){var c=n[l];s[c]=t[c]}),i.maintained.forEach(function(l){var c=l[0],u=n[c],d=[t[u],e[u]];t[u]!==e[u]&&(o[u]=d)}),{added:a,removed:s,changed:o}}function yl(t){t.forEach(function(e){e()})}function _l(t){var e=0;return t.map(function(n){return n==null?"$compat"+ ++e:""+n})}function El(t,e,n,r){if(rr(t)||fp(t))return new kp("text_"+t,e,n,r,null,{});var i=typeof t.type=="string"?Tp:t.type.prototype.render?Op:Rp;return new i(t.type,e,n,r,t.ref,t.props)}function bl(t){var e=[];return t.forEach(function(n){e=e.concat(ll(n)?bl(n):n)}),e}function Cl(t){var e=t.className,n=ml(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function Ca(t,e){if(!e)return t;for(var n in e)dp(t[n])&&(t[n]=e[n]);return t}function de(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,s=i.ref,o=ml(i,["key","ref"]);return{type:t,key:a,ref:s,props:ze(ze({},o),{children:bl(n).filter(function(l){return l!=null&&l!==!1})})}}var yn=function(){function t(n,r,i,a,s,o){o===void 0&&(o={}),this.type=n,this.key=r,this.index=i,this.container=a,this.ref=s,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(n,r){return!0},e._update=function(n,r,i,a){if(this.base&&!rr(r)&&!a&&!this._should(r.props,i))return!1;this.original=r,this._setState(i);var s=this.props;return rr(r)||(this.props=r.props,this.ref=r.ref),this._render(n,this.base?s:{},i),!0},e._mounted=function(){var n=this.ref;n&&n(this.base)},e._setState=function(n){},e._updated=function(){var n=this.ref;n&&n(this.base)},e._destroy=function(){var n=this.ref;n&&n(null)},t}();function wp(t,e,n){var r=ba(t,e),i=r.added,a=r.removed,s=r.changed;for(var o in i)n.setAttribute(o,i[o]);for(var o in s)n.setAttribute(o,s[o][1]);for(var o in a)n.removeAttribute(o)}function Dp(t,e,n){var r=ba(t,e),i=r.added,a=r.removed,s=r.changed;for(var o in a)n.removeEventListener(o);for(var o in i)n.addEventListener(o,i[o]);for(var o in s)n.removeEventListener(o),n.addEventListener(o,s[o][1]);for(var o in a)n.removeEventListener(o)}function Mp(t,e,n){var r=n.style,i=ba(t,e),a=i.added,s=i.removed,o=i.changed;for(var l in a){var c=ma(l,"-");r.setProperty?r.setProperty(c,a[l]):r[c]=a[l]}for(var l in o){var c=ma(l,"-");r.setProperty?r.setProperty(c,o[l][1]):r[c]=o[l][1]}for(var l in s){var c=ma(l,"-");r.removeProperty?r.removeProperty(c):r[c]=""}}function xl(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var kp=function(t){nr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n._render=function(r){var i=this,a=!this.base;return a&&(this.base=document.createTextNode(this.type.replace("text_",""))),r.push(function(){a?i._mounted():i._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(yn),Tp=function(t){nr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.events={},r._isSVG=!1,r}var n=e.prototype;return n.addEventListener=function(r,i){var a=this.events;a[r]=function(s){s.nativeEvent=s,i(s)},this.base.addEventListener(r,a[r])},n.removeEventListener=function(r){var i=this.events;this.base.removeEventListener(r,i[r]),delete i[r]},n._should=function(r){return Ea(this.props,r)},n._render=function(r,i){var a=this,s=!this.base;if(s){var o=this._hasSVG();this._isSVG=o;var l=this.props.portalContainer;if(!l){var c=this.type;o?l=document.createElementNS("http://www.w3.org/2000/svg",c):l=document.createElement(c)}this.base=l}En(this,this._providers,this.props.children,r,null);var u=this.base,d=xl(i),f=d.attributes,v=d.events,p=xl(this.props),h=p.attributes,g=p.events;return wp(Cl(f),Cl(h),u),Dp(v,g,this),Mp(i.style||{},this.props.style||{},u),r.push(function(){s?a._mounted():a._updated()}),!0},n._unmount=function(){var r=this.events,i=this.base;for(var a in r)i.removeEventListener(a,r[a]);this._providers.forEach(function(s){s._unmount()}),this.events={},this.props.portalContainer||i.parentNode.removeChild(i)},n._hasSVG=function(){if(this._isSVG||this.type==="svg")return!0;var r=xa(this.container);return r&&"ownerSVGElement"in r},e}(yn);function xa(t){if(!t)return null;var e=t.base;return e instanceof Node?e:xa(t.container)}function _n(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?_n(e[0].base):null}var Rp=function(t){nr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n._render=function(r){var i=this.type(this.props);return En(this,this._providers,i?[i]:[],r),!0},n._unmount=function(){this._providers.forEach(function(r){r._unmount()})},e}(yn),Sl=function(t){nr(e,t);function e(r){var i=t.call(this,"container","container",0,null)||this;return i.base=r,i}var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(yn),Op=function(t){nr(e,t);function e(r,i,a,s,o,l){return l===void 0&&(l={}),t.call(this,r,i,a,s,o,Ca(l,r.defaultProps))||this}var n=e.prototype;return n._should=function(r,i){return this.base.shouldComponentUpdate(Ca(r,this.type.defaultProps),i||this.base.state)},n._render=function(r,i){var a=this;this.props=Ca(this.props,this.type.defaultProps);var s=!this.base;s?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var o=this.base,l=o.state,c=o.render();c&&c.props&&!c.props.children.length&&(c.props.children=this.props.children),En(this,this._providers,c?[c]:[],r),r.push(function(){s?(a._mounted(),o.componentDidMount()):(a._updated(),o.componentDidUpdate(i,l))})},n._setState=function(r){var i=this.base;!i||!r||(i.state=r)},n._unmount=function(){this._providers.forEach(function(r){r._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(yn),Sa=function(){function t(n){n===void 0&&(n={}),this.props=n,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(n,r){return!0},e.render=function(){return null},e.setState=function(n,r,i){var a=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=ze(ze({},this.$_state),n),i?this.$_setState(r,i):this.$_timer=setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_provider,s=En(a.container,[a],[a.original],i,ze(ze({},this.state),this.$_state),r);s&&(n&&i.push(n),yl(i))},t}(),wa=function(t){nr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return Ea(this.props,r)||Ea(this.state,i)},e}(Sa),Pp=function(t){nr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.componentDidMount=function(){var r=this.props,i=r.element,a=r.container;this._portalProvider=new Sl(a),fi(i,a,this._portalProvider)},n.componentDidUpdate=function(){var r=this.props,i=r.element,a=r.container;fi(i,a,this._portalProvider)},n.componentWillUnmount=function(){var r=this.props.container;fi(null,r,this._portalProvider),this._portalProvider=null},e}(wa);function Ap(t,e,n){var r=[];En(t,t._providers,e,r,n),yl(r)}function Np(t,e){for(var n=t._providers,r=n.length,i=e.index+1;i<r;++i){var a=_n(n[i].base);if(a)return a}return null}function Lp(t,e,n){var r=n.map(function(l){return rr(l)?null:l.key}),i=_l(e.map(function(l){return l.key})),a=_l(r),s=hn(i,a,function(l){return l});s.removed.forEach(function(l){e.splice(l,1)[0]._unmount()}),s.ordered.forEach(function(l){var c=l[0],u=l[1],d=e.splice(c,1)[0];e.splice(u,0,d);var f=_n(d.base),v=_n(e[u+1]&&e[u+1].base);f&&f.parentNode.insertBefore(f,v)}),s.added.forEach(function(l){e.splice(l,0,El(n[l],r[l],l,t))});var o=s.maintained.filter(function(l){var c=l[0],u=l[1],d=n[u],f=e[u],v=rr(d)?"text_"+d:d.type;return v!==f.type?(f._unmount(),e.splice(u,1,El(d,r[u],u,t)),!0):(f.index=u,!1)});return Sp(s.added,o.map(function(l){var c=l[0],u=l[1];return u}))}function En(t,e,n,r,i,a){var s=Lp(t,e,n),o=e.filter(function(c,u){return c._update(r,n[u],i,a)}),l=xa(t);return l&&s.reverse().forEach(function(c){var u=e[c],d=_n(u.base);if(d&&l!==d&&!d.parentNode){var f=Np(t,u);l.insertBefore(d,f)}}),o.length>0}function fi(t,e,n){n===void 0&&(n=e.__REACT_COMPAT__);var r=!!n;return n||(n=new Sl(e)),Ap(n,t?[t]:[]),r||(e.__REACT_COMPAT__=n),n}function wl(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),fi(t,e,r),n&&n()}function Ip(t,e){return de(Pp,{element:t,container:e})}var Bp="simple-1.1.0";function Da(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function Dl(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function Fp(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function Ma(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Ml(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function zp(t,e){var n=Ma("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function ka(t){return t.replace(/_/g,".")}function bn(t,e){var n=null,r="-1";return Da(t,function(i){var a=Ma("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=zp(i.versionTest.toLowerCase(),e)||r),r=ka(r),!0)}),{preset:n,version:r}}function vi(t,e){var n={brand:"",version:"-1"};return Da(t,function(r){var i=kl(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function kl(t,e){return Dl(t,function(n){var r=n.brand;return Ma(""+e.test,r.toLowerCase())})}var Tl=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Rl=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Ta=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Ol=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Pl=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Al(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!vi(Ol,n).brand},s={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&Da(Ta,function(f){return kl(n,f)});var o=vi(Rl,n);if(a.chromium=!!o.brand,a.chromiumVersion=o.version,!a.chromium){var l=vi(Ta,n);a.webkit=!!l.brand,a.webkitVersion=l.version}if(t){var c=t.platform.toLowerCase(),u=Dl(Pl,function(f){return new RegExp(""+f.test,"g").exec(c)});s.name=u?u.id:c,s.version=t.platformVersion}var d=vi(Tl,n);return d.brand&&(a.name=d.brand,a.version=t?t.uaFullVersion:d.version),navigator.platform==="Linux armv8l"?s.name="android":a.webkit&&(s.name=r?"ios":"mac"),s.name==="ios"&&a.webview&&(a.version="-1"),s.version=ka(s.version),a.version=ka(a.version),s.majorVersion=parseInt(s.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:s,isMobile:r,isHints:!0}}function Gp(t){var e=Fp(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!bn(Ol,e).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=bn(Tl,e),s=a.preset,o=a.version,l=bn(Pl,e),c=l.preset,u=l.version,d=bn(Rl,e);if(r.chromium=!!d.preset,r.chromiumVersion=d.version,!r.chromium){var f=bn(Ta,e);r.webkit=!!f.preset,r.webkitVersion=f.version}return c&&(i.name=c.id,i.version=u,i.majorVersion=parseInt(u,10)),s&&(r.name=s.id,r.version=o,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function rb(t){return Ml()?navigator.userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion","uaFullVersion"]).then(function(e){var n=Al(e);return t&&t(n),n}):(t&&t(Ra()),typeof Promise>"u"||!Promise?null:Promise.resolve(Ra()))}function Ra(t){return typeof t>"u"&&Ml()?Al():Gp(t)}const Kp=Ra;var Nl="rgb",Ll="rgba",Il="hsl",Bl="hsla",nb=[Nl,Ll,Il,Bl],Wp="function",ib="property",ab="array",Yp="object",$p="string",Hp="number",Cn="undefined",Fl=typeof window!==Cn,xn=typeof document!==Cn&&document,zl=null,ob=function(t){if(!xn)return"";var e=(xn.body||xn.documentElement).style,n=zl.length;if(typeof e[t]!==Cn)return t;for(var r=0;r<n;++r){var i="-"+zl[r]+"-"+t;if(typeof e[i]!==Cn)return i}return""},sb=null,lb=null,cb=null,ub=null,Vp=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Zt=1e-7,db=1/Zt,pi={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Xp(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function ir(t,e,n,r){return(t*r+e*n)/(n+r)}function Oa(t){return typeof t===Cn}function ar(t){return t&&typeof t===Yp}function zt(t){return Array.isArray(t)}function Ge(t){return typeof t===$p}function Gl(t){return typeof t===Hp}function Kl(t){return typeof t===Wp}function jp(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function Wl(t,e,n,r,i){var a=Pa(t,e,n);return a?n:Up(t,e,n+1,r,i)}function Pa(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function Up(t,e,n,r,i){for(var a=function(c){var u=e[c].trim();if(u===t.close&&!Pa(t,e,c))return{value:c};var d=c,f=sr(i,function(v){var p=v.open;return p===u});if(f&&(d=Wl(f,e,c,r,i)),d===-1)return s=c,"break";c=d,s=c},s,o=n;o<r;++o){var l=a(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Aa(t,e){var n=Ge(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,c=n.openCloseCharacters,u=c===void 0?Vp:c,d=u.map(function(C){var D=C.open,w=C.close;return D===w?D:D+"|"+w}).join("|"),f="(\\s*"+i+"\\s*|"+d+"|\\s+)",v=new RegExp(f,"g"),p=t.split(v).filter(Boolean),h=p.length,g=[],m=[];function _(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var b=function(C){var D=p[C].trim(),w=C,k=sr(u,function(R){var P=R.open;return P===D}),T=sr(u,function(R){var P=R.close;return P===D});if(k){if(w=Wl(k,p,C,h,u),w!==-1&&l)return _()&&a||(g.push(p.slice(C,w+1).join("")),C=w,a)?(E=C,"break"):(E=C,"continue")}else if(T&&!Pa(T,p,C)){var M=Xp(u);return M.splice(u.indexOf(T),1),{value:Aa(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:M})}}else if(jp(D,i)&&!s)return _(),a?(E=C,"break"):(E=C,"continue");w===-1&&(w=h-1),m.push(p.slice(C,w+1).join("")),C=w,E=C},E,S=0;S<h;++S){var x=b(S);if(S=E,typeof x=="object")return x.value;if(x==="break")break}return m.length&&g.push(m.join("")),g}function or(t){return Aa(t,"")}function Na(t){return Aa(t,",")}function Yl(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function hi(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function fb(t){return t.replace(/[\s-_]([a-z])/g,function(e,n){return n.toUpperCase()})}function Zp(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function vb(t){return[].slice.call(t)}function $l(){return Date.now?Date.now():new Date().getTime()}function Nr(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Qp(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=r-1;i>=0;--i)if(e(t[i],i,t))return i;return n}function pb(t,e,n){var r=Qp(t,e);return r>-1?t[r]:n}function sr(t,e,n){var r=Nr(t,e);return r>-1?t[r]:n}var Hl=function(){var t=$l(),e=Fl&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=$l(),i=window.setTimeout(function(){n(r-t)},1e3/60);return i}}(),qp=function(){var t=Fl&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function Ke(t){return Object.keys(t)}function hb(t){var e=Ke(t);return e.map(function(n){return t[n]})}function gb(t){var e=Ke(t);return e.map(function(n){return[n,t[n]]})}function mb(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var i=e.indexOf(n),a=e.indexOf(r);return a===-1&&i===-1?0:i===-1?1:a===-1?-1:i-a})}function xt(t,e){var n=hi(t),r=n.value,i=n.unit;if(ar(e)){var a=e[i];if(a){if(Kl(a))return a(r);if(pi[i])return pi[i](r,a)}}else if(i==="%")return r*e/100;return pi[i]?pi[i](r):r}function La(t,e,n){return Math.max(e,Math.min(t,n))}function Vl(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[lt(e[0],Zt),lt(e[0]/r,Zt)],[lt(e[1]*r,Zt),lt(e[1],Zt)]].filter(function(i){return i.every(function(a,s){var o=e[s],l=lt(o,Zt);return n?a<=o||a<=l:a>=o||a>=l})})[0]||t}function Jp(t,e,n,r){if(!r)return t.map(function(v,p){return La(v,e[p],n[p])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=Vl(t,e,!1,s),l=o[0],c=o[1],u=Vl(t,n,!0,s),d=u[0],f=u[1];return i<l||a<c?(i=l,a=c):(i>d||a>f)&&(i=d,a=f),[i,a]}function yb(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Ia(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Mt(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function th(t){return[0,1].map(function(e){return Ia(t.map(function(n){return n[e]}))})}function eh(t){var e=th(t),n=Mt(e,t[0]),r=Mt(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function Re(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function lt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function Xl(t,e){return t.forEach(function(n,r){t[r]=lt(t[r],e)}),t}function _b(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function Eb(t,e,n){var r=!1;return t.replace(e,function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r?i[0]:(r=!0,Ge(n)?n:n.apply(void 0,i))})}function bb(t){return t.reduce(function(e,n){return e.concat(n)},[])}function rh(t){return t.reduce(function(e,n){return zt(n)?e.push.apply(e,rh(n)):e.push(n),e},[])}function nh(t){return t.replace("#","")}function jl(t){var e=nh(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/255;return isNaN(a)&&(a=1),[n,r,i,a]}function ih(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),i=t.charAt(4),a=["#",e,e,n,n,r,r,i,i];return a.join("")}function ah(t){var e,n=t[0],r=t[1],i=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(n/60%2-1)),o=i-a/2,l;return n<60?l=[a,s,0]:n<120?l=[s,a,0]:n<180?l=[0,a,s]:n<240?l=[0,s,a]:n<300?l=[s,0,a]:n<360?l=[a,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function Cb(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?jl(ih(t)):jl(t);if(t.indexOf("(")!==-1){var e=Yl(t),n=e.prefix,r=e.value;if(!n||!r)return;var i=Na(r),a=[0,0,0,1],s=i.length;switch(n){case Nl:case Ll:for(var o=0;o<s;++o)a[o]=parseFloat(i[o]);return a;case Il:case Bl:for(var o=0;o<s;++o)i[o].indexOf("%")!==-1?a[o]=parseFloat(i[o])/100:a[o]=parseFloat(i[o]);return ah(a)}}}function xb(t,e){return e?xn.querySelectorAll(t):xn.querySelector(t)}function It(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Ul(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function Zl(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Sb(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},i=window.getComputedStyle(n),a=e.length,s=0;s<a;++s)r[e[s]]=i[e[s]];return r}function wb(t,e,n,r){t.addEventListener(e,n,r)}function Db(t,e,n,r){t.removeEventListener(e,n,r)}function oh(t,e,n,r,i,a){for(var s=0;s<i;++s){var o=n+s*i,l=r+s*i;t[o]+=t[l]*a,e[o]+=e[l]*a}}function sh(t,e,n,r,i){for(var a=0;a<i;++a){var s=n+a*i,o=r+a*i,l=t[s],c=e[s];t[s]=t[o],t[o]=l,e[s]=e[o],e[o]=c}}function lh(t,e,n,r,i){for(var a=0;a<r;++a){var s=n+a*r;t[s]/=i,e[s]/=i}}function Ql(t,e,n){n===void 0&&(n=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function he(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Dt(e),i=0;i<e;++i){var a=e*i+i;if(!Fe(n[a],er)){for(var s=i+1;s<e;++s)if(n[e*i+s]){sh(n,r,i,s,e);break}}if(!Fe(n[a],er))return[];lh(n,r,i,e,n[a]);for(var s=0;s<e;++s){var o=s,l=s+i*e,c=n[l];!Fe(c,er)||i===s||oh(n,r,o,i,e,-c)}}return r}function ch(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function ql(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function uh(t,e){for(var n=Dt(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function lr(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function xe(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Dt(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)r[a*n+s]=t[a*e+s];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function Ba(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Dt(t);return e.forEach(function(i){r=yt(r,i,t)}),r}function yt(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<a;++o){r[o*n+s]=0;for(var l=0;l<i;++l)r[o*n+s]+=t[l*n+s]*e[o*i+l]}return r}function ut(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Z(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function dh(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Jl(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Gt(t,e,n){n===void 0&&(n=e.length);var r=yt(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function tc(t,e){return yt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function ec(t,e){return yt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function rc(t,e){return yt(t,Ir(e,4))}function We(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return yt(t,[r,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function Sn(t,e){return Gt(Ir(e,3),lr(t,3))}function Lr(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return yt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,o,1],4)}function wn(t,e){return yt(t,e,4)}function Ir(t,e){var n=Math.cos(t),r=Math.sin(t),i=Dt(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function Dt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Fa(t,e){for(var n=Dt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Dn(t,e){for(var n=Dt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function za(t,e,n,r,i,a,s,o){var l=t[0],c=t[1],u=e[0],d=e[1],f=n[0],v=n[1],p=r[0],h=r[1],g=i[0],m=i[1],_=a[0],b=a[1],E=s[0],S=s[1],x=o[0],C=o[1],D=[l,0,u,0,f,0,p,0,c,0,d,0,v,0,h,0,1,0,1,0,1,0,1,0,0,l,0,u,0,f,0,p,0,c,0,d,0,v,0,h,0,1,0,1,0,1,0,1,-g*l,-m*l,-_*u,-b*u,-E*f,-S*f,-x*p,-C*p,-g*c,-m*c,-_*d,-b*d,-E*v,-S*v,-x*h,-C*h],w=he(D,8);if(!w.length)return[];var k=yt(w,[g,m,_,b,E,S,x,C],8);return k[8]=1,xe(ch(k),3,4)}function Mb(t){return[0,1].map(function(e){return average(t.map(function(n){return n[e]}))})}function nc(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Mn(t){return Br(cr(t))}function kb(t){return Mn(getComputedStyle(t).transform)}function fh(t,e){var n=Gt(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Tb(t,e){e===void 0&&(e=document.body);for(var n=t,r=nc();n;){var i=getComputedStyle(n).transform;if(r=matrix3d(Mn(i),r),n===e)break;n=n.parentElement}return r=invert(r,4),r[12]=0,r[13]=0,r[14]=0,r}function Br(t){var e=nc();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function cr(t){var e=ll(t)?t:gp(t);return e.map(function(n){var r=dl(n),i=r.prefix,a=r.value,s=null,o=i,l="";if(i==="translate"||i==="translateX"||i==="translate3d"){var c=Ar(a).map(function(k){return parseFloat(k)}),u=c[0],d=c[1],f=d===void 0?0:d,v=c[2],p=v===void 0?0:v;s=Lr,l=[u,f,p]}else if(i==="translateY"){var f=parseFloat(a);s=Lr,l=[0,f,0]}else if(i==="translateZ"){var p=parseFloat(a);s=Lr,l=[0,0,p]}else if(i==="scale"||i==="scale3d"){var h=Ar(a).map(function(k){return parseFloat(k)}),g=h[0],m=h[1],_=m===void 0?g:m,b=h[2],E=b===void 0?1:b;s=We,l=[g,_,E]}else if(i==="scaleX"){var g=parseFloat(a);s=We,l=[g,1,1]}else if(i==="scaleY"){var _=parseFloat(a);s=We,l=[1,_,1]}else if(i==="scaleZ"){var E=parseFloat(a);s=We,l=[1,1,E]}else if(i==="rotate"||i==="rotateZ"||i==="rotateX"||i==="rotateY"){var S=fl(a),x=S.unit,C=S.value,D=x==="rad"?C:C*Math.PI/180;i==="rotate"||i==="rotateZ"?(o="rotateZ",s=rc):i==="rotateX"?s=tc:i==="rotateY"&&(s=ec),l=D}else if(i==="matrix3d")s=wn,l=Ar(a).map(function(k){return parseFloat(k)});else if(i==="matrix"){var w=Ar(a).map(function(k){return parseFloat(k)});s=wn,l=[w[0],w[1],0,0,w[2],w[3],0,0,0,0,1,0,w[4],w[5],0,1]}else o="";return{name:i,functionName:o,value:a,matrixFunction:s,functionValue:l}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ga=function(t,e){return Ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ga(t,e)};function vh(t,e){Ga(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ic=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),ph=function(t){vh(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,ic)||this}return e}(ap);function Fr(t,e){return hn(t,e,ic)}const ac=ph;var oc="rgb",sc="rgba",lc="hsl",cc="hsla",Rb=[oc,sc,lc,cc],hh="function",Ob="property",Pb="array",gh="object",mh="string",yh="number",kn="undefined",Ab=typeof window!==kn,Tn=typeof document!==kn&&document,uc=null,Nb=function(t){if(!Tn)return"";var e=(Tn.body||Tn.documentElement).style,n=uc.length;if(typeof e[t]!==kn)return t;for(var r=0;r<n;++r){var i="-"+uc[r]+"-"+t;if(typeof e[i]!==kn)return i}return""},Lb=null,Ib=null,Bb=null,Fb=null,_h=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Oe=1e-7,zb=1/Oe,gi={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function Gb(t,e,n,r){return(t*r+e*n)/(n+r)}function Kb(t){return typeof t===kn}function Eh(t){return t&&typeof t===gh}function Wb(t){return Array.isArray(t)}function dc(t){return typeof t===mh}function Yb(t){return typeof t===yh}function bh(t){return typeof t===hh}function Ch(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function fc(t,e,n,r,i){var a=Ka(t,e,n);return a?n:xh(t,e,n+1,r,i)}function Ka(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function xh(t,e,n,r,i){for(var a=function(c){var u=e[c].trim();if(u===t.close&&!Ka(t,e,c))return{value:c};var d=c,f=Rn(i,function(v){var p=v.open;return p===u});if(f&&(d=fc(f,e,c,r,i)),d===-1)return s=c,"break";c=d,s=c},s,o=n;o<r;++o){var l=a(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function vc(t,e){var n=dc(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,c=n.openCloseCharacters,u=c===void 0?_h:c,d=u.map(function(C){var D=C.open,w=C.close;return D===w?D:D+"|"+w}).join("|"),f="(\\s*"+i+"\\s*|"+d+"|\\s+)",v=new RegExp(f,"g"),p=t.split(v).filter(Boolean),h=p.length,g=[],m=[];function _(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var b=function(C){var D=p[C].trim(),w=C,k=Rn(u,function(M){var R=M.open;return R===D}),T=Rn(u,function(M){var R=M.close;return R===D});if(k){if(w=fc(k,p,C,h,u),w!==-1&&l)return _()&&a||(g.push(p.slice(C,w+1).join("")),C=w,a)?(E=C,"break"):(E=C,"continue")}else{if(T&&!Ka(T,p,C))throw new Error("invalid format: "+T.close);if(Ch(D,i)&&!s)return _(),a?(E=C,"break"):(E=C,"continue")}w===-1&&(w=h-1),m.push(p.slice(C,w+1).join("")),C=w,E=C},E,S=0;S<h;++S){var x=b(S);if(S=E,x==="break")break}return m.length&&g.push(m.join("")),g}function $b(t){return vc(t,"")}function Sh(t){return vc(t,",")}function wh(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Dh(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function Hb(t){return t.replace(/[\s-_]([a-z])/g,function(e,n){return n.toUpperCase()})}function Vb(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Xb(t){return[].slice.call(t)}function pc(){return Date.now?Date.now():new Date().getTime()}function Wa(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Mh(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=r-1;i>=0;--i)if(e(t[i],i,t))return i;return n}function jb(t,e,n){var r=Mh(t,e);return r>-1?t[r]:n}function Rn(t,e,n){var r=Wa(t,e);return r>-1?t[r]:n}var Ub=null,Zb=null;function Qb(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in e)e.push(n);return e}function qb(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var i=e.indexOf(n),a=e.indexOf(r);return a===-1&&i===-1?0:i===-1?1:a===-1?-1:i-a})}function Jb(t,e){var n=Dh(t),r=n.value,i=n.unit;if(Eh(e)){var a=e[i];if(a){if(bh(a))return a(r);if(gi[i])return gi[i](r,a)}}else if(i==="%")return r*e/100;return gi[i]?gi[i](r):r}function kh(t,e,n){return Math.max(e,Math.min(t,n))}function hc(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[ur(e[0],Oe),ur(e[0]/r,Oe)],[ur(e[1]*r,Oe),ur(e[1],Oe)]].filter(function(i){return i.every(function(a,s){var o=e[s],l=ur(o,Oe);return n?a<=o||a<=l:a>=o||a>=l})})[0]||t}function tC(t,e,n,r){if(!r)return t.map(function(v,p){return kh(v,e[p],n[p])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=hc(t,e,!1,s),l=o[0],c=o[1],u=hc(t,n,!0,s),d=u[0],f=u[1];return i<l||a<c?(i=l,a=c):(i>d||a>f)&&(i=d,a=f),[i,a]}function Th(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Rh(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function gc(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Oh(t){return[0,1].map(function(e){return Rh(t.map(function(n){return n[e]}))})}function mc(t){var e=Oh(t),n=gc(e,t[0]),r=gc(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function yc(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function ur(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function eC(t,e){return t.forEach(function(n,r){t[r]=ur(t[r],e)}),t}function rC(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function nC(t,e,n){var r=!1;return t.replace(e,function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r?i[0]:(r=!0,dc(n)?n:n.apply(void 0,i))})}function Ph(t){return t.replace("#","")}function _c(t){var e=Ph(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/255;return isNaN(a)&&(a=1),[n,r,i,a]}function Ah(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),i=t.charAt(4),a=["#",e,e,n,n,r,r,i,i];return a.join("")}function Nh(t){var e,n=t[0],r=t[1],i=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(n/60%2-1)),o=i-a/2,l;return n<60?l=[a,s,0]:n<120?l=[s,a,0]:n<180?l=[0,a,s]:n<240?l=[0,s,a]:n<300?l=[s,0,a]:n<360?l=[a,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function iC(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?_c(Ah(t)):_c(t);if(t.indexOf("(")!==-1){var e=wh(t),n=e.prefix,r=e.value;if(!n||!r)return;var i=Sh(r),a=[0,0,0,1],s=i.length;switch(n){case oc:case sc:for(var o=0;o<s;++o)a[o]=parseFloat(i[o]);return a;case lc:case cc:for(var o=0;o<s;++o)i[o].indexOf("%")!==-1?a[o]=parseFloat(i[o])/100:a[o]=parseFloat(i[o]);return Nh(a)}}}function aC(t,e){return e?Tn.querySelectorAll(t):Tn.querySelector(t)}function oC(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function sC(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function lC(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function cC(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},i=window.getComputedStyle(n),a=e.length,s=0;s<a;++s)r[e[s]]=i[e[s]];return r}function ce(t,e,n,r){t.addEventListener(e,n,r)}function ae(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function dr(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Qt(t){return ur(t,Oe)}function Lh(t,e){return t.every(function(n,r){return Qt(n-e[r])===0})}function Ih(t,e){return!Qt(t[0]-e[0])&&!Qt(t[1]-e[1])}function Bh(t){return t.reduce(function(e,n){return e.push.apply(e,n),e},[])}function On(t){return t.length<3?0:Math.abs(Th(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function Ya(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,s=Ye(t),o=s.minX,l=s.minY,c=s.maxX,u=s.maxY,d=n/(c-o),f=r/(u-l);return t.map(function(v){return[i+(v[0]-o)*d,a+(v[1]-l)*f]})}function Ye(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function mi(t,e,n){var r=t[0],i=t[1],a=Ye(e),s=a.minX,o=a.maxX,l=[[s,i],[o,i]],c=fr(l[0],l[1]),u=Ha(e),d=[];if(u.forEach(function(p){var h=fr(p[0],p[1]),g=p[0];if(Lh(c,h))d.push({pos:t,line:p,type:"line"});else{var m=$a(yi(c,h),[l,p]);m.forEach(function(_){p.some(function(b){return Ih(b,_)})?d.push({pos:_,line:p,type:"point"}):Qt(g[1]-i)!==0&&d.push({pos:_,line:p,type:"intersection"})})}}),!n&&Rn(d,function(p){return p[0]===r}))return!0;var f=0,v={};return d.forEach(function(p){var h=p.pos,g=p.type,m=p.line;if(!(h[0]>r))if(g==="intersection")++f;else{if(g==="line")return;if(g==="point"){var _=Rn(m,function(S){return S[1]!==i}),b=v[h[0]],E=_[1]>i?1:-1;b?b!==E&&++f:v[h[0]]=E}}}),f%2===1}function Fh(t,e){var n=t[0],r=t[1],i=t[2];return(n*e[0]+r*e[1]+i)/(n*n+r*r)}function fr(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],s=i-n,o=a-r;Math.abs(s)<Oe&&(s=0),Math.abs(o)<Oe&&(o=0);var l=0,c=0,u=0;return s?o?(l=-o/s,c=1,u=-l*n-r):(c=1,u=-r):o&&(l=-1,u=n),[l,c,u]}function yi(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],o=e[2],l=n===0&&a===0,c=r===0&&s===0,u=[];if(l&&c)return[];if(l){var d=-i/r,f=-o/s;return d!==f?[]:[[-1/0,d],[1/0,d]]}else if(c){var v=-i/n,p=-o/a;return v!==p?[]:[[v,-1/0],[v,1/0]]}else if(n===0){var h=-i/r,g=-(s*h+o)/a;u=[[g,h]]}else if(a===0){var h=-o/s,g=-(r*h+i)/n;u=[[g,h]]}else if(r===0){var g=-i/n,h=-(a*g+o)/s;u=[[g,h]]}else if(s===0){var g=-o/a,h=-(n*g+i)/r;u=[[g,h]]}else{var g=(r*o-s*i)/(s*n-r*a),h=-(n*g+i)/r;u=[[g,h]]}return u.map(function(m){return[m[0],m[1]]})}function uC(t,e,n){var r=yi(fr(t[0],t[1]),fr(e[0],e[1]));return n?$a(r,[t,e]):r}function zh(t,e){var n=fr(e[0],e[1]);return Qt(Fh(n,t))===0}function $a(t,e){var n=e.map(function(d){return[0,1].map(function(f){return[Math.min(d[0][f],d[1][f]),Math.max(d[0][f],d[1][f])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(Qt(a-t[1][0])){if(!Qt(s-t[1][1])){var c=Math.max.apply(Math,n.map(function(d){return d[0][0]})),u=Math.min.apply(Math,n.map(function(d){return d[0][1]}));if(Qt(c-u)>0)return[];r=[[c,s],[u,s]]}}else{var o=Math.max.apply(Math,n.map(function(d){return d[1][0]})),l=Math.min.apply(Math,n.map(function(d){return d[1][1]}));if(Qt(o-l)>0)return[];r=[[a,o],[a,l]]}}return r.length||(r=t.filter(function(d){var f=d[0],v=d[1];return n.every(function(p){return 0<=Qt(f-p[0][0])&&0<=Qt(p[0][1]-f)&&0<=Qt(v-p[1][0])&&0<=Qt(p[1][1]-v)})})),r.map(function(d){return[Qt(d[0]),Qt(d[1])]})}function Ha(t){return dr(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function Va(t,e){var n=t.slice(),r=e.slice();mc(n)===-1&&n.reverse(),mc(r)===-1&&r.reverse();var i=Ha(n),a=Ha(r),s=i.map(function(u){return fr(u[0],u[1])}),o=a.map(function(u){return fr(u[0],u[1])}),l=[];s.forEach(function(u,d){var f=i[d],v=[];o.forEach(function(p,h){var g=yi(u,p),m=$a(g,[f,a[h]]);v.push.apply(v,m.map(function(_){return{index1:d,index2:h,pos:_,type:"intersection"}}))}),v.sort(function(p,h){return yc(f[0],p.pos)-yc(f[0],h.pos)}),l.push.apply(l,v),mi(f[1],r)&&l.push({index1:d,index2:-1,pos:f[1],type:"inside"})}),a.forEach(function(u,d){if(mi(u[1],n)){var f=!1,v=Wa(l,function(p){var h=p.index2;return h===d?(f=!0,!1):!!f});v===-1&&(f=!1,v=Wa(l,function(p){var h=p.index1,g=p.index2;return h===-1&&g+1===d?(f=!0,!1):!!f})),v===-1?l.push({index1:-1,index2:d,pos:u[1],type:"inside"}):l.splice(v,0,{index1:-1,index2:d,pos:u[1],type:"inside"})}});var c={};return l.filter(function(u){var d=u.pos,f=d[0]+"x"+d[1];return c[f]?!1:(c[f]=!0,!0)})}function Xa(t,e){var n=Va(t,e);return n.map(function(r){var i=r.pos;return i})}function Gh(t){var e=t[0],n=e.index1,r=e.index2,i=t[1],a=i.index1,s=i.index2;return n!==-1&&(n===a||n+1===a)||r!==-1&&(r===s||r+1===s)}function Kh(t,e){var n=Va(t,e),r=[],i;return Va(t,e).forEach(function(a,s,o){s===0||!Gh([o[s-1],a])?(i=[a],r.push(i)):i.push(a)}),r.map(function(a){return a.map(function(s){var o=s.pos;return o})})}function _i(t,e,n,r){n===void 0&&(n=0),r===void 0&&(r=[]);for(var i=r.length===0,a=t.length,s=t[n]?n:0,o=dr(t.slice(s),t.slice(0,s)),l=function(d){var f=o[d];if(find(e,function(m){return m[0]===f[0]&&m[1]===f[1]}))return"continue";if(r.some(function(m){return find(m,function(_){return _[0]===f[0]&&_[1]===f[1]})}))return i?"continue":"break";var v=void 0;i?(v=[],r.push(v)):v=r[r.length-1],v.push(f);var p=[f,t[n+1]||t[0]],h=e.filter(function(m){return zh(m,p)}).sort(function(m,_){return getDist(f,m)-getDist(f,_)})[0];if(h){var g=e.indexOf(h);if(_i(e,t,g,r),!i)return"break"}else return _i(o,e,d+1,r),"break"},c=0;c<a;++c){var u=l(c);if(u==="break")break}return r}function dC(t,e){return _i(t,dr(e).reverse())}function fC(t,e){if(!e.length)return[dr(t)];var n=Kh(t,e),r=[t];return n.forEach(function(i){var a=dr(i).reverse();r=Bh(r.map(function(s){var o=_i(s,a),l=o[0];if(o.length===1&&a.every(function(f){return l.indexOf(f)===-1})){var c=l[l.length-1],u=dr(a).sort(function(f,v){return getDist(c,f)-getDist(c,v)})[0],d=a.indexOf(u);l.push.apply(l,dr(a.slice(d),a.slice(0,d),[a[d],c]))}return o}))}),r}function Wh(t,e){var n=Xa(t,e);return On(n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ja=function(){return ja=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ja.apply(this,arguments)};function Yh(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var $h=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(ha(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(ha(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=vl(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,Yh(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(ja({listener:r},i))},t}();const zr=$h;var Ec="rgb",bc="rgba",Cc="hsl",xc="hsla",vC=[Ec,bc,Cc,xc],Hh="function",pC="property",hC="array",Vh="object",Xh="string",jh="number",Pn="undefined",gC=typeof window!==Pn,Gr=typeof document!==Pn&&document,Sc=null,mC=function(t){if(!Gr)return"";var e=(Gr.body||Gr.documentElement).style,n=Sc.length;if(typeof e[t]!==Pn)return t;for(var r=0;r<n;++r){var i="-"+Sc[r]+"-"+t;if(typeof e[i]!==Pn)return i}return""},yC=null,_C=null,EC=null,bC=null,Uh=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Kr=1e-7,CC=1/Kr,Ei={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Zh(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function xC(t,e,n,r){return(t*r+e*n)/(n+r)}function SC(t){return typeof t===Pn}function Qh(t){return t&&typeof t===Vh}function qh(t){return Array.isArray(t)}function Ua(t){return typeof t===Xh}function wC(t){return typeof t===jh}function wc(t){return typeof t===Hh}function Jh(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function Dc(t,e,n,r,i){var a=Za(t,e,n);return a?n:tg(t,e,n+1,r,i)}function Za(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function tg(t,e,n,r,i){for(var a=function(c){var u=e[c].trim();if(u===t.close&&!Za(t,e,c))return{value:c};var d=c,f=qa(i,function(v){var p=v.open;return p===u});if(f&&(d=Dc(f,e,c,r,i)),d===-1)return s=c,"break";c=d,s=c},s,o=n;o<r;++o){var l=a(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Qa(t,e){var n=Ua(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,c=n.openCloseCharacters,u=c===void 0?Uh:c,d=u.map(function(C){var D=C.open,w=C.close;return D===w?D:D+"|"+w}).join("|"),f="(\\s*"+i+"\\s*|"+d+"|\\s+)",v=new RegExp(f,"g"),p=t.split(v).filter(Boolean),h=p.length,g=[],m=[];function _(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var b=function(C){var D=p[C].trim(),w=C,k=qa(u,function(R){var P=R.open;return P===D}),T=qa(u,function(R){var P=R.close;return P===D});if(k){if(w=Dc(k,p,C,h,u),w!==-1&&l)return _()&&a||(g.push(p.slice(C,w+1).join("")),C=w,a)?(E=C,"break"):(E=C,"continue")}else if(T&&!Za(T,p,C)){var M=Zh(u);return M.splice(u.indexOf(T),1),{value:Qa(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:M})}}else if(Jh(D,i)&&!s)return _(),a?(E=C,"break"):(E=C,"continue");w===-1&&(w=h-1),m.push(p.slice(C,w+1).join("")),C=w,E=C},E,S=0;S<h;++S){var x=b(S);if(S=E,typeof x=="object")return x.value;if(x==="break")break}return m.length&&g.push(m.join("")),g}function DC(t){return Qa(t,"")}function eg(t){return Qa(t,",")}function rg(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function ng(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function MC(t){return t.replace(/[\s-_]([a-z])/g,function(e,n){return n.toUpperCase()})}function kC(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function TC(t){return[].slice.call(t)}function ig(){return Date.now?Date.now():new Date().getTime()}function ag(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function og(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=r-1;i>=0;--i)if(e(t[i],i,t))return i;return n}function RC(t,e,n){var r=og(t,e);return r>-1?t[r]:n}function qa(t,e,n){var r=ag(t,e);return r>-1?t[r]:n}var OC=null,PC=null;function Mc(t){return Object.keys(t)}function AC(t){var e=Mc(t);return e.map(function(n){return t[n]})}function NC(t){var e=Mc(t);return e.map(function(n){return[n,t[n]]})}function LC(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var i=e.indexOf(n),a=e.indexOf(r);return a===-1&&i===-1?0:i===-1?1:a===-1?-1:i-a})}function IC(t,e){var n=ng(t),r=n.value,i=n.unit;if(Qh(e)){var a=e[i];if(a){if(wc(a))return a(r);if(Ei[i])return Ei[i](r,a)}}else if(i==="%")return r*e/100;return Ei[i]?Ei[i](r):r}function sg(t,e,n){return Math.max(e,Math.min(t,n))}function kc(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[Wr(e[0],Kr),Wr(e[0]/r,Kr)],[Wr(e[1]*r,Kr),Wr(e[1],Kr)]].filter(function(i){return i.every(function(a,s){var o=e[s],l=Wr(o,Kr);return n?a<=o||a<=l:a>=o||a>=l})})[0]||t}function BC(t,e,n,r){if(!r)return t.map(function(v,p){return sg(v,e[p],n[p])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=kc(t,e,!1,s),l=o[0],c=o[1],u=kc(t,n,!0,s),d=u[0],f=u[1];return i<l||a<c?(i=l,a=c):(i>d||a>f)&&(i=d,a=f),[i,a]}function FC(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function lg(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Tc(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function cg(t){return[0,1].map(function(e){return lg(t.map(function(n){return n[e]}))})}function zC(t){var e=cg(t),n=Tc(e,t[0]),r=Tc(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function GC(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function Wr(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function KC(t,e){return t.forEach(function(n,r){t[r]=Wr(t[r],e)}),t}function WC(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function YC(t,e,n){var r=!1;return t.replace(e,function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r?i[0]:(r=!0,Ua(n)?n:n.apply(void 0,i))})}function $C(t){return t.reduce(function(e,n){return e.concat(n)},[])}function ug(t){return t.reduce(function(e,n){return qh(n)?e.push.apply(e,ug(n)):e.push(n),e},[])}function dg(t){return t.replace("#","")}function Rc(t){var e=dg(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/255;return isNaN(a)&&(a=1),[n,r,i,a]}function fg(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),i=t.charAt(4),a=["#",e,e,n,n,r,r,i,i];return a.join("")}function vg(t){var e,n=t[0],r=t[1],i=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(n/60%2-1)),o=i-a/2,l;return n<60?l=[a,s,0]:n<120?l=[s,a,0]:n<180?l=[0,a,s]:n<240?l=[0,s,a]:n<300?l=[s,0,a]:n<360?l=[a,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function HC(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?Rc(fg(t)):Rc(t);if(t.indexOf("(")!==-1){var e=rg(t),n=e.prefix,r=e.value;if(!n||!r)return;var i=eg(r),a=[0,0,0,1],s=i.length;switch(n){case Ec:case bc:for(var o=0;o<s;++o)a[o]=parseFloat(i[o]);return a;case Cc:case xc:for(var o=0;o<s;++o)i[o].indexOf("%")!==-1?a[o]=parseFloat(i[o])/100:a[o]=parseFloat(i[o]);return vg(a)}}}function VC(t,e){return Gr?e?Gr.querySelectorAll(t):Gr.querySelector(t):e?[]:null}function XC(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function jC(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function UC(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function ZC(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},i=window.getComputedStyle(n),a=e.length,s=0;s<a;++s)r[e[s]]=i[e[s]];return r}function QC(t,e,n,r){t.addEventListener(e,n,r)}function qC(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ja=function(t,e){return Ja=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ja(t,e)};function pg(t,e){Ja(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Yr=function(){return Yr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yr.apply(this,arguments)};function hg(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function Oc(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function bi(t){if(t){if(Ua(t))return document.querySelector(t)}else return null;if(wc(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var gg=function(t){pg(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=bi(i.container);if(!a){this._flag=!1;return}var s=0,o=0,l=0,c=0;if(a===document.body)l=window.innerWidth,c=window.innerHeight;else{var u=a.getBoundingClientRect();s=u.top,o=u.left,l=u.width,c=u.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:l,height:c},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,l=o===void 0?0:o,c=this,u=c._startRect,d=c._startPos;this._currentOptions=i;var f=[0,0];return u.top>s-l?(d[1]>u.top||s<d[1])&&(f[1]=-1):u.top+u.height<s+l&&(d[1]<u.top+u.height||s>d[1])&&(f[1]=1),u.left>a-l?(d[0]>u.left||a<d[0])&&(f[0]=-1):u.left+u.width<a+l&&(d[0]<u.left+u.width||a>d[0])&&(f[0]=1),!f[0]&&!f[1]?!1:this._continueDrag(Yr(Yr({},i),{direction:f,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,l=r.throttleTime,c=l===void 0?0:l,u=r.inputEvent,d=r.isDrag,f=this._getScrollPosition(o||[0,0],r),v=f[0]-s[0],p=f[1]-s[1],h=o||[v?Math.abs(v)/v:0,p?Math.abs(p)/p:0];return this._prevScrollPos=f,this._lock=!1,!v&&!p?!1:(this.emit("move",{offsetX:h[0]?v:0,offsetY:h[1]?p:0,inputEvent:u}),c&&d&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},c)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?hg:s;return o({container:bi(a),direction:r})},n._continueDrag=function(r){var i=this,a,s=r.container,o=r.direction,l=r.throttleTime,c=r.useScroll,u=r.isDrag,d=r.inputEvent;if(!(!this._flag||u&&this._isWait)){var f=ig(),v=Math.max(l+this._prevTime-f,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},v),!1;this._prevTime=f;var p=this._getScrollPosition(o,r);this._prevScrollPos=p,u&&(this._isWait=!0),c||(this._lock=!0);var h={container:bi(s),direction:o,inputEvent:d};return(a=r.requestScroll)===null||a===void 0||a.call(r,h),this.emit("scroll",h),this._isWait=!1,c||this.checkScroll(Yr(Yr({},r),{prevScrollPos:p,direction:o,inputEvent:d}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?Oc:i,s=bi(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=Oc(window,this._onScroll):this._unregister=a(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e}(zr);const Pc=gg;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var to=function(t,e){return to=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},to(t,e)};function mg(t,e){to(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ot=function(){return Ot=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ot.apply(this,arguments)};function yg(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function eo(t){return yg([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function _g(t){return t.touches&&t.touches.length>=2}function Ci(t){return t?t.touches?bg(t.touches):[Nc(t)]:[]}function Eg(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function Ac(t,e,n){var r=n.length,i=An(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,l=i.originalClientY,c=An(e,r),u=c.clientX,d=c.clientY,f=An(n,r),v=f.clientX,p=f.clientY,h=a-u,g=s-d,m=a-v,_=s-p;return{clientX:o,clientY:l,deltaX:h,deltaY:g,distX:m,distY:_}}function ro(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function bg(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(Nc(t[r]));return n}function Nc(t){return{clientX:t.clientX,clientY:t.clientY}}function An(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var i=t[r];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var no=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),eo(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),eo(e)-eo(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=Ac(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);var n=this.prevClients;return this.startClients.map(function(r,i){return Ac([e[i]],[n[i]],[r])})},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=An(e,this.length),i=An(this.prevClients,this.length),a=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(a*a+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),ro(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),ro(e)/ro(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t}(),Lc=["textarea","input"],Cg=function(t){mg(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.isMouse=!1,i.isTouch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i.onDragStart=function(d,f){if(f===void 0&&(f=!0),!(!i.flag&&d.cancelable===!1)){var v=i.options,p=v.container,h=v.pinchOutside,g=v.preventWheelClick,m=v.preventRightClick,_=v.preventDefault,b=v.checkInput,E=v.preventClickEventOnDragStart,S=v.preventClickEventOnDrag,x=v.preventClickEventByCondition,C=i.isTouch,D=!i.flag;if(i._isSecondaryButton=d.which===3||d.button===2,g&&(d.which===2||d.button===1)||m&&(d.which===3||d.button===2))return i.stop(),!1;if(D){var w=document.activeElement,k=d.target;if(k){var T=k.tagName.toLowerCase(),M=Lc.indexOf(T)>-1,R=k.isContentEditable;if(M||R){if(b||w===k||w&&R&&w.isContentEditable&&w.contains(k))return!1}else if((_||d.type==="touchstart")&&w){var P=w.tagName.toLowerCase();(w.isContentEditable||Lc.indexOf(P)>-1)&&w.blur()}(E||S||x)&&ce(window,"click",i._onClick,!0)}i.clientStores=[new no(Ci(d))],i.flag=!0,i.isDrag=!1,i._isTrusted=f,i._dragFlag=!0,i._prevInputEvent=d,i.data={},i.doubleFlag=pc()-i.prevTime<200,i._isMouseEvent=Eg(d),!i._isMouseEvent&&i._preventMouseEvent&&(i._preventMouseEvent=!1);var A=i._preventMouseEvent||i.emit("dragStart",Ot(Ot({data:i.data,datas:i.data,inputEvent:d,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:f,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){d.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));A===!1&&i.stop(),i._isMouseEvent&&i.flag&&_&&d.preventDefault()}if(!i.flag)return!1;var L=0;if(D?(i._attchDragEvent(),C&&h&&(L=setTimeout(function(){ce(p,"touchstart",i.onDragStart,{passive:!1})}))):C&&h&&ae(p,"touchstart",i.onDragStart),i.flag&&_g(d)){if(clearTimeout(L),D&&d.touches.length!==d.changedTouches.length)return;i.pinchFlag||i.onPinchStart(d)}}},i.onDrag=function(d,f){if(i.flag){var v=i.options.preventDefault;!i._isMouseEvent&&v&&d.preventDefault(),i._prevInputEvent=d;var p=Ci(d),h=i.moveClients(p,d,!1);if(i._dragFlag){if(i.pinchFlag||h.deltaX||h.deltaY){var g=i._preventMouseEvent||i.emit("drag",Ot(Ot({},h),{isScroll:!!f,inputEvent:d}));if(g===!1){i.stop();return}}i.pinchFlag&&i.onPinch(d,p)}i.getCurrentStore().getPosition(p,!0)}},i.onDragEnd=function(d){if(i.flag){var f=i.options,v=f.pinchOutside,p=f.container,h=f.preventClickEventOnDrag,g=f.preventClickEventOnDragStart,m=f.preventClickEventByCondition,_=i.isDrag;(h||g||m)&&requestAnimationFrame(function(){i._allowClickEvent()}),!m&&!g&&h&&!_&&i._allowClickEvent(),i.isTouch&&v&&ae(p,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(d);var b=d?.touches?Ci(d):[],E=b.length;E===0||!i.options.keepDragging?i.flag=!1:i._addStore(new no(b));var S=i._getPosition(),x=pc(),C=!_&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=_||C?0:x,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Ot({data:i.data,datas:i.data,isDouble:C,isDrag:_,isClick:!_,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:d,isTrusted:i._isTrusted},S)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){i._preventMouseEvent=!1})})))}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){ae(window,"click",i._onClick,!0)},i._onClick=function(d){i._allowClickEvent(),i._preventMouseEvent=!1;var f=i.options.preventClickEventByCondition;f?.(d)||(d.stopPropagation(),d.preventDefault())},i._onContextMenu=function(d){var f=i.options;f.preventRightClick?i.onDragEnd(d):d.preventDefault()},i._passCallback=function(){};var a=[].concat(n);i.options=Ot({checkInput:!1,container:a.length>1?window:a[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var s=i.options,o=s.container,l=s.events,c=s.checkWindowBlur;if(i.isTouch=l.indexOf("touch")>-1,i.isMouse=l.indexOf("mouse")>-1,i.targets=a,i.isMouse&&(a.forEach(function(d){ce(d,"mousedown",i.onDragStart),ce(d,"mousemove",i._passCallback)}),ce(o,"contextmenu",i._onContextMenu)),c&&ce(window,"blur",i.onBlur),i.isTouch){var u={passive:!1};a.forEach(function(d){ce(d,"touchstart",i.onDragStart,u),ce(d,"touchmove",i._passCallback,u)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(l){var c=l.clientX,u=l.clientY;return{clientX:c+i,clientY:u+a,originalClientX:c,originalClientY:u}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),Ot(Ot({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),ae(window,"blur",this.onBlur),this.isMouse&&(r.forEach(function(a){ae(a,"mousedown",n.onDragStart)}),ae(i,"contextmenu",this._onContextMenu)),this.isTouch&&(r.forEach(function(a){ae(a,"touchstart",n.onDragStart)}),ae(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>r)){var i=new no(Ci(n));this.pinchFlag=!0,this._addStore(i);var a=this.emit("pinchStart",Ot(Ot({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:n,isTrusted:this._isTrusted}));a===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Ot(Ot({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Ot(Ot({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),Ot(Ot({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(c,u){var d=u.getPosition();return c.distX+=d.distX,c.distY+=d.distY,c},a),o=s.distX,l=s.distY;return Ot(Ot({},a),{distX:o,distY:l})},e.prototype._attchDragEvent=function(){var n=this.options.container,r={passive:!1};this.isMouse&&(ce(n,"mousemove",this.onDrag),ce(n,"mouseup",this.onDragEnd)),this.isTouch&&(ce(n,"touchmove",this.onDrag,r),ce(n,"touchend",this.onDragEnd,r),ce(n,"touchcancel",this.onDragEnd,r))},e.prototype._dettachDragEvent=function(){var n=this.options.container;this.isMouse&&(ae(n,"mousemove",this.onDrag),ae(n,"mouseup",this.onDragEnd)),this.isTouch&&(ae(n,"touchstart",this.onDragStart),ae(n,"touchmove",this.onDrag),ae(n,"touchend",this.onDragEnd),ae(n,"touchcancel",this.onDragEnd))},e}(zr);function xg(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var Sg=xg;function wg(t){return Sg(t).toString(36)}function Dg(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Mg(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?Ar(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?""+o.replace(/\:host/g,"."+t):o?"."+t+" "+o:"."+t}).join(", ")+" {"})}function kg(t,e,n,r){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",t),n.nonce&&i.setAttribute("nonce",n.nonce),i.innerHTML=Mg(t,e,n),(r||document.head||document.body).appendChild(i),i}function Tg(t){var e="rCS"+wg(t),n=0,r;return{className:e,inject:function(i,a){a===void 0&&(a={});var s=Dg(i),o=n===0,l;return(s||o)&&(l=kg(e,t,a,s)),o&&(r=l),s||++n,{destroy:function(){s?(i.removeChild(l),l=null):(n>0&&--n,n===0&&r&&(r.parentNode.removeChild(r),r=null))}}}}}const Rg=Tg;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var io=function(t,e){return io=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},io(t,e)};function Ic(t,e){io(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ao=function(){return ao=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ao.apply(this,arguments)};function Og(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}var Pg=function(t){Ic(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.injectResult=null,r.tag="div",r}var n=e.prototype;return n.render=function(){var r=this.props,i=r.className,a=i===void 0?"":i,s=r.cspNonce,o=r.portalContainer,l=Og(r,["className","cspNonce","portalContainer"]),c=this.injector.className,u=this.tag,d={};return(Bp||"").indexOf("simple")>-1&&o&&(d={portalContainer:o}),de(u,ao({ref:Ce(this,"element"),"data-styled-id":c,className:a+" "+c},d,l))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},e}(Sa);function Ag(t,e){var n=Rg(e);return function(r){Ic(i,r);function i(){var a=r!==null&&r.apply(this,arguments)||this;return a.injector=n,a.tag=t,a}return i}(Pg)}const Bc=Ag;var oo=function(t,e){return oo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},oo(t,e)};function $r(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");oo(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var O=function(){return O=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},O.apply(this,arguments)};function Ng(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Lg(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function J(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Nn(t,e){var n;return O({events:{},props:(n={},n[t]=Boolean,n),name:t},e)}function Ig(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function Bg(t){var e=Ig(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var xi=Kp(),Fc=xi.browser.webkit,zc=Fc&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),Fg=xi.browser.name==="firefox",zg=parseInt(xi.browser.webkitVersion,10)>=612||parseInt(xi.browser.version,10)>=15,so="moveable-",Gg=`
{
	position: absolute;
	width: 1px;
	height: 1px;
	left: 0;
	top: 0;
    z-index: 3000;
    --moveable-color: #4af;
    --zoom: 1;
    --zoompx: 1px;
    will-change: transform;
    outline: 1px solid transparent;
}
.control-box {
    z-index: 0;
}
.line, .control {
    position: absolute;
	left: 0;
    top: 0;
    will-change: transform;
}
.control {
	width: 14px;
	height: 14px;
	border-radius: 50%;
	border: 2px solid #fff;
	box-sizing: border-box;
    background: #4af;
    background: var(--moveable-color);
	margin-top: -7px;
    margin-left: -7px;
    border: 2px solid #fff;
    z-index: 10;
}
.padding {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
    transform-origin: 0 0;
}
.line {
	width: 1px;
    height: 1px;
    background: #4af;
    background: var(--moveable-color);
	transform-origin: 0px 50%;
}
.line.edge {
    z-index: 1;
    background: transparent;
}
.line.dashed {
    box-sizing: border-box;
    background: transparent;
}
.line.dashed.horizontal {
    border-top: 1px dashed #4af;
    border-top-color: #4af;
    border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
    border-left: 1px dashed #4af;
    border-left-color: #4af;
    border-left-color: var(--moveable-color);
}
.line.vertical {
    transform: translateX(-50%);
}
.line.horizontal {
    transform: translateY(-50%);
}
.line.vertical.bold {
    width: 2px;
}
.line.horizontal.bold {
    height: 2px;
}

.control.origin {
	border-color: #f55;
	background: #fff;
	width: 12px;
	height: 12px;
	margin-top: -6px;
    margin-left: -6px;
	pointer-events: none;
}
`.concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
	`).concat(Bg(t),`
}
`)}).join(`
`),`

.line.direction:before {
    content: "";
    position: absolute;
    width: 100%;
    height: calc(var(--moveable-line-padding, 0) * 1px);
    bottom: 0;
    left: 0;
}
.group {
    z-index: -1;
}
.area {
    position: absolute;
}
.area-pieces {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}
.area.avoid, .area.pass {
    pointer-events: none;
}
.area.avoid+.area-pieces {
    display: block;
}
.area-piece {
    position: absolute;
}

`).concat(zc?`:global svg *:before {
	content:"";
	transform-origin: inherit;
}`:"",`
`),Kg=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],lo=1e-4,qt=1e-7,Si=1e-9,co=Math.pow(10,10),Gc=-co,Wg=["n","w","s","e"],uo=["n","w","s","e","nw","ne","sw","se"],Yg={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},fo={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Kc={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Wc=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag"];function Ln(t,e,n,r,i,a){var s,o;a===void 0&&(a="draggable");var l=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},c=l.originalDatas||l.datas,u=c[a]||(c[a]={});return O(O({},i?fu(e,l):l),{isPinch:!!r,parentEvent:!0,datas:u,originalDatas:t.originalDatas})}var Hr=function(){function t(n){var r;n===void 0&&(n="draggable"),this.ableName=n,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[n]={},r)}var e=t.prototype;return e.dragStart=function(n,r){this.isDrag=!1,this.isFlag=!1;var i=r.originalDatas;return this.datas=i,i[this.ableName]||(i[this.ableName]={}),O(O({},this.move(n,r.inputEvent)),{type:"dragstart"})},e.drag=function(n,r){return this.move([n[0]-this.prevX,n[1]-this.prevY],r)},e.move=function(n,r){var i,a,s=!1;if(!this.isFlag)this.prevX=n[0],this.prevY=n[1],this.startX=n[0],this.startY=n[1],i=n[0],a=n[1],this.isFlag=!0;else{var o=this.isDrag;i=this.prevX+n[0],a=this.prevY+n[1],(n[0]||n[1])&&(this.isDrag=!0),!o&&this.isDrag&&(s=!0)}return this.prevX=i,this.prevY=a,{type:"drag",clientX:i,clientY:a,inputEvent:r,isFirstDrag:s,isDrag:this.isDrag,distX:i-this.startX,distY:a-this.startY,deltaX:n[0],deltaY:n[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Yc(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,l=a.is3d,c=a.pos1,u=s.left,d=s.top,f=l?4:3,v=Z(hr(o,[n-u,r-d],f),c),p=v[0],h=v[1],g=Se({datas:i,distX:p,distY:h}),m=g[0],_=g[1];return[m,_]}function vr(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,s=r.is3d,o=r.left,l=r.top,c=r.origin,u=r.offsetMatrix,d=r.targetMatrix,f=r.transformOrigin,v=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=d,n.beforeMatrix=a,n.offsetMatrix=u,n.transformOrigin=f,n.inverseMatrix=he(i,v),n.inverseBeforeMatrix=he(a,v),n.absoluteOrigin=lr(ut([o,l],c),v),n.startDragBeforeDist=Gt(n.inverseBeforeMatrix,n.absoluteOrigin,v),n.startDragDist=Gt(n.inverseMatrix,n.absoluteOrigin,v)}function $g(t){return Xr(t.datas.beforeTransform,[50,50],100,100).direction}function wi(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,i=n.transformIndex,a=r.nextTransforms,s=a.length,o=r.nextTransformAppendedIndexes,l=0;i===-1?(e==="translate"?l=0:e==="rotate"&&(l=Nr(a,function(f){return f.match(/scale\(/g)})),l===-1&&(l=a.length),n.transformIndex=l):sr(o,function(f){return f.index===i&&f.functionName===e})?l=i:l=i+o.filter(function(f){return f.index<i}).length;var c=g0(a,l),u=c.targetFunction,d=e==="rotate"?"rotateZ":e;n.beforeFunctionTexts=c.beforeFunctionTexts,n.afterFunctionTexts=c.afterFunctionTexts,n.beforeTransform=c.beforeFunctionMatrix,n.beforeTransform2=c.beforeFunctionMatrix2,n.targetTansform=c.targetFunctionMatrix,n.afterTransform=c.afterFunctionMatrix,n.afterTransform2=c.afterFunctionMatrix2,n.targetAllTransform=c.allFunctionMatrix,u.functionName===d?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>l&&(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=J(J([],o,!0),[{functionName:e,index:l,isAppend:!0}],!1))}function Di(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Hg(t){var e=t.datas,n=t.distX,r=t.distY,i=Hc({datas:e,distX:n,distY:r}),a=i[0],s=i[1],o=$c(e,uh([a,s],4));return Gt(o,lr([0,0,0],4),4)}function $c(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,l=n?yt(o,e,4):yt(e,o,4),c=yt(he(n?a:r,4),l,4),u=yt(c,he(n?s:i,4),4);return u}function Hc(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,l=a?4:3;return Z(Gt(i,ut(o,[n,r]),l),s)}function Se(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=n.absoluteOrigin,d=o?4:3;return Z(Gt(e?a:s,ut(u,[r,i]),d),e?l:c)}function Vg(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.beforeMatrix,s=n.matrix,o=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=n.absoluteOrigin,d=o?4:3;return Z(Gt(e?a:s,ut(e?l:c,[r,i]),d),u)}function Xg(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var l=hi(s),c=l.value,u=l.unit,d=o?i:r,f=o?n:e;if(s==="%"||isNaN(c)){var v=d?a[o]/d:0;return f*v}else if(u!=="%")return c;return f*c/100}):a}function Vc(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function jg(t,e){return Vc(e).map(function(n){return t[n]})}function kt(t,e){var n=(e[0]+1)/2,r=(e[1]+1)/2,i=[ir(t[0][0],t[1][0],n,1-n),ir(t[0][1],t[1][1],n,1-n)],a=[ir(t[2][0],t[3][0],n,1-n),ir(t[2][1],t[3][1],n,1-n)];return[ir(i[0],a[0],r,1-r),ir(i[1],a[1],r,1-r)]}function Ug(t,e,n,r,i,a){var s=$e(e,n,r,i),o=kt(s,a),l=t[0]-o[0],c=t[1]-o[1];return[l,c]}function In(t,e,n,r){return yt(t,Oi(e,r,n),r)}function Zg(t,e,n){var r=t.transformOrigin,i=t.offsetMatrix,a=t.is3d,s=e.beforeTransform,o=e.afterTransform,l=a?4:3,c=Mn([n]);return In(i,xe(yt(yt(s,c,4),o,4),4,l),r,l)}function Qg(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=i?4:3;return In(r,yt(a,Fa(e,s),s),n,s)}function Mi(t){var e=Vr(t);return{setTransform:function(n,r){r===void 0&&(r=-1),e.startTransforms=zt(n)?n:or(n),vo(t,r)},setTransformIndex:function(n){vo(t,n)}}}function ki(t,e){var n=Vr(t),r=n.startTransforms;vo(t,Nr(r,function(i){return i.indexOf("".concat(e,"("))===0}))}function vo(t,e){var n=Vr(t),r=t.datas;if(r.transformIndex=e,e!==-1){var i=n.startTransforms[e];if(i){var a=cr([i]);r.startValue=a[0].functionValue}}}function po(t,e){var n=Vr(t);n.nextTransforms=or(e)}function Vr(t){return t.originalDatas.beforeRenderable}function Xc(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Ti(t){return Xc(t).join(" ")}function Ri(t){return Vr(t).nextStyle}function jc(t,e,n,r,i){po(i,e);var a=te.drag(t,Ln(i,t.state,n,r,!1)),s=a?a.transform:e;return O(O({transform:e,drag:a},Jt({transform:s},i)),{afterTransform:s})}function Uc(t,e,n,r,i){var a=t.state,s=a.left,o=a.top,l=t.props.groupable,c=Zg(t.state,i,e),u=l?s:0,d=l?o:0,f=Qc(t,n,c),v=Z(r,f);return Z(v,[u,d])}function qg(t,e,n,r,i){var a=Uc(t,"scale(".concat(e.join(", "),")"),n,r,i);return a}function Zc(t,e,n){return[-1+t[0]/(e/2),-1+t[1]/(n/2)]}function Qc(t,e,n){n===void 0&&(n=t.state.allMatrix);var r=t.state,i=r.width,a=r.height,s=r.is3d,o=s?4:3,l=[i/2*(1+e[0]),a/2*(1+e[1])];return Bt(n,l,o)}function Jg(t,e,n){var r=n.fixedDirection,i=n.fixedPosition;return Uc(t,"rotate(".concat(e,"deg)"),r,i,n)}function t0(t,e,n,r,i,a){var s=t.props.groupable,o=t.state,l=o.transformOrigin,c=o.offsetMatrix,u=o.is3d,d=o.width,f=o.height,v=o.left,p=o.top,h=a.fixedDirection,g=a.nextTargetMatrix||o.targetMatrix,m=u?4:3,_=Xg(i,e,n,d,f,l),b=s?v:0,E=s?p:0,S=In(c,g,_,m),x=Ug(r,S,e,n,m,h);return Z(x,[b,E])}function qc(t,e){return kt(oe(t.state),e)}function e0(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function r0(t,e){return[t[0]*e[0],t[1]*e[1]]}function Q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Uv.apply(void 0,J([so],t,!1))}function Jc(t){t()}function n0(t){return!t||t==="none"?[1,0,0,1,0,0]:ar(t)?t:Mn(t)}function Oi(t,e,n){return Ba(e,Dn(n,e),t,Dn(n.map(function(r){return-r}),e))}function i0(t,e,n){if(e==="%"){var r=go(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function a0(t){var e=Pi(Pe(t,":before"));return e.map(function(n,r){var i=hi(n),a=i.value,s=i.unit;return a*i0(t,s,r===0)})}function Pi(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function tu(t,e){e===void 0&&(e=Pe(t));var n=e.transform;if(n&&n!=="none")return e.transform;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(c){var u=i[c].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(d){return u[d]}).join(", "),")"))},l=0;l<a;++l)o(l);return s.join(" ")}return""}function Bn(t,e,n,r,i){var a,s,o,l=t&&t.ownerDocument?t.ownerDocument:document,c=l.documentElement||l.body,u=!1,d,f;if(!t||n)d=t;else{var v=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,p=t.parentElement;v?(u=!0,f=p,d=v):d=p}for(var h=!1,g=t===e||d===e,m="relative",_=1,b=parseFloat((s=i)===null||s===void 0?void 0:s.zoom)||1,E=i?.position;d&&d!==c;){e===d&&(g=!0);var S=Pe(d),x=d.tagName.toLowerCase(),C=tu(d,S),D=S.willChange,w=parseFloat(S.zoom)||1;if(m=S.position,r&&w!==1){_=w;break}if(!n&&r&&b!==1&&E&&E!=="absolute"||x==="svg"||m!=="static"||C&&C!=="none"||D==="transform")break;var k=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,T=d.parentNode;k&&(u=!0,f=T);var M=k||T;if(M&&M.nodeType===11){d=M.host,h=!0;break}d=M,m="relative"}return{offsetZoom:_,hasSlot:u,parentSlotElement:f,isCustomElement:h,isStatic:m==="static",isEnd:g||!d||d===c,offsetParent:d||c}}function o0(t,e,n){var r,i=t.tagName.toLowerCase(),a=t.offsetLeft,s=t.offsetTop,o=Oa(a),l=!o,c,u;return!l&&i!=="svg"?(c=zc?a0(t):Pi(n).map(function(d){return parseFloat(d)}),u=c.slice(),l=!0,r=c0(t,c,t===e&&e.tagName.toLowerCase()==="g"),a=r[0],s=r[1],c[0]=r[2],c[1]=r[3]):(c=Pi(n).map(function(d){return parseFloat(d)}),u=c.slice()),{tagName:i,isSVG:o,hasOffset:l,offset:[a||0,s||0],origin:c,targetOrigin:u}}function eu(t,e,n){n===void 0&&(n=Pe(t));var r=Pe(document.body),i=r.position;if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r.marginLeft,10),s=parseInt(r.marginTop,10);return n.position==="absolute"&&((n.top!=="auto"||n.bottom!=="auto")&&(s=0),(n.left!=="auto"||n.right!=="auto")&&(a=0)),[a,s]}function ho(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=xe(n,3,4))})}function s0(t){for(var e=t.parentElement,n=!1;e;){var r=Pe(e).transform;if(r&&r!=="none"){n=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:n}}function Ai(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Jl(t,!e).join(","),")")}function go(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function l0(t,e){var n=go(t),r=n.width,i=n.height,a=n.clientWidth,s=n.clientHeight,o=a/r,l=s/i,c=t.preserveAspectRatio.baseVal,u=c.align,d=c.meetOrSlice,f=[0,0],v=[o,l],p=[0,0];if(u!==1){var h=(u-2)%3,g=Math.floor((u-2)/3);f[0]=r*h/2,f[1]=i*g/2;var m=d===2?Math.max(l,o):Math.min(o,l);v[0]=m,v[1]=m,p[0]=(a-r)/2*h,p[1]=(s-i)/2*g}var _=Fa(v,e);return _[e*(e-1)]=p[0],_[e*(e-1)+1]=p[1],Oi(_,e,f)}function c0(t,e,n){if(!t.getBBox||!n&&t.tagName.toLowerCase()==="g")return[0,0,0,0];var r=t.getBBox(),i=go(t.ownerSVGElement),a=r.x-i.x,s=r.y-i.y;return[a,s,e[0]-a,e[1]-s]}function Bt(t,e,n){return Gt(t,lr(e,n),n)}function $e(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return Bt(t,i,r)})}function fe(t){var e=t.map(function(c){return c[0]}),n=t.map(function(c){return c[1]}),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),a=Math.max.apply(Math,e),s=Math.max.apply(Math,n),o=a-r,l=s-i;return{left:r,top:i,right:a,bottom:s,width:o,height:l}}function ru(t,e,n,r){var i=$e(t,e,n,r);return fe(i)}function u0(t,e,n,r,i){var a,s=t.target,o=t.origin,l=e.matrix,c=iu(s),u=c.offsetWidth,d=c.offsetHeight,f=n.getBoundingClientRect(),v=[0,0];n===document.body&&(v=eu(s,!0));for(var p=s.getBoundingClientRect(),h=p.left-f.left+n.scrollLeft-(n.clientLeft||0)+v[0],g=p.top-f.top+n.scrollTop-(n.clientTop||0)+v[1],m=p.width,_=p.height,b=Ba(r,i,l),E=ru(b,u,d,r),S=E.left,x=E.top,C=E.width,D=E.height,w=Bt(b,o,r),k=Z(w,[S,x]),T=[h+k[0]*m/C,g+k[1]*_/D],M=[0,0],R=0;++R<10;){var P=he(i,r);a=Z(Bt(P,T,r),Bt(P,w,r)),M[0]=a[0],M[1]=a[1];var A=Ba(r,i,Dn(M,r),l),L=ru(A,u,d,r),F=L.left,B=L.top,z=F-h,N=B-g;if(Math.abs(z)<2&&Math.abs(N)<2)break;T[0]-=z,T[1]-=N}return M.map(function(G){return Math.round(G)})}function d0(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(l){return Bt(t,l,i)}),s=n.left,o=n.top;return a.map(function(l){return[l[0]+s,l[1]+o]})}function Xr(t,e,n,r){var i=t.length===16,a=i?4:3,s=$e(t,n,r,a),o=s[0],l=o[0],c=o[1],u=s[1],d=u[0],f=u[1],v=s[2],p=v[0],h=v[1],g=s[3],m=g[0],_=g[1],b=Bt(t,e,a),E=b[0],S=b[1],x=Math.min(l,d,p,m),C=Math.min(c,f,h,_),D=Math.max(l,d,p,m),w=Math.max(c,f,h,_);l=l-x||0,d=d-x||0,p=p-x||0,m=m-x||0,c=c-C||0,f=f-C||0,h=h-C||0,_=_-C||0,E=E-x||0,S=S-C||0;var k=eh($e(t,100,100,a));return{left:x,top:C,right:D,bottom:w,origin:[E,S],pos1:[l,c],pos2:[d,f],pos3:[p,h],pos4:[m,_],direction:k}}function ge(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function nu(t,e){return ge([e[0]-t[0],e[1]-t[1]])}function Fn(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Mt(t,e));var i=nu(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function mo(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(o,l){return o+l[0]},0)/i,s=n.reduce(function(o,l){return o+l[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function pr(t,e){var n=t[e];return ar(n)?O(O({},t),n):t}function iu(t,e){e===void 0&&(e=t?Pe(t):null);var n=t&&!Oa(t.offsetWidth),r=0,i=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0,v=0,p=0,h=1/0,g=1/0,m=1/0,_=1/0,b=0,E=0,S=!1;if(t)if(!n&&t.tagName.toLowerCase()!=="svg"){var x=t.getBBox();S=!0,r=x.width,i=x.height,o=r,l=i,c=r,u=i,a=r,s=i}else{var C=t.style,D=e.boxSizing==="border-box",w=parseFloat(e.borderLeftWidth)||0,k=parseFloat(e.borderRightWidth)||0,T=parseFloat(e.borderTopWidth)||0,M=parseFloat(e.borderBottomWidth)||0,R=parseFloat(e.paddingLeft)||0,P=parseFloat(e.paddingRight)||0,A=parseFloat(e.paddingTop)||0,L=parseFloat(e.paddingBottom)||0,F=R+P,B=A+L,z=w+k,N=T+M,G=F+z,K=B+N,H=e.position,$=0,W=0;if("clientLeft"in t){var j=null;if(H==="absolute"){var q=Bn(t,document.body);j=q.offsetParent}else j=t.parentElement;if(j){var et=Pe(j);$=parseFloat(et.width),W=parseFloat(et.height)}}d=Math.max(F,xt(e.minWidth,$)||0),f=Math.max(B,xt(e.minHeight,W)||0),h=xt(e.maxWidth,$),g=xt(e.maxHeight,W),isNaN(h)&&(h=1/0),isNaN(g)&&(g=1/0),b=xt(C.width,0)||0,E=xt(C.height,0)||0,o=parseFloat(e.width)||0,l=parseFloat(e.height)||0,c=Math.abs(o-b)<1?La(d,b||o,h):o,u=Math.abs(l-E)<1?La(f,E||l,g):l,r=c,i=u,a=c,s=u,D?(m=h,_=g,v=d,p=f,c=r-G,u=i-K):(m=h+G,_=g+K,v=d+G,p=f+K,r=c+G,i=u+K),a=c+F,s=u+B}return{svg:S,offsetWidth:r,offsetHeight:i,clientWidth:a,clientHeight:s,contentWidth:c,contentHeight:u,inlineCSSWidth:b,inlineCSSHeight:E,cssWidth:o,cssHeight:l,minWidth:d,minHeight:f,maxWidth:h,maxHeight:g,minOffsetWidth:v,minOffsetHeight:p,maxOffsetWidth:m,maxOffsetHeight:_}}function au(t,e){return Mt(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Ni(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function ou(t,e){var n=t===document.body||t===document.documentElement,r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Pe(t).overflow!=="visible",O(O({},e),r)}function yo(t,e,n,r){var i=t.left,a=t.right,s=t.top,o=t.bottom,l=e.top,c=e.left,u={left:c+i,top:l+s,right:c+a,bottom:l+o,width:a-i,height:o-s};return n&&r?ou(n,u):u}function zn(t,e){var n=0,r=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,a=s.height}var o={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?ou(t,o):o}function su(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=lu(a,r)}return i}function lu(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function _o(t,e){return[ut(e,t[0]),ut(e,t[1]),ut(e,t[2]),ut(e,t[3])]}function oe(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return _o([r,i,a,s],[e,n])}function f0(t){return Math.round(t%1===-.5?t-1:t)}function jr(t,e){var n;(n=t[e])===null||n===void 0||n.unset(),t[e]=null}function Jt(t,e){if(e){var n=Vr(e);n.nextStyle=O(O({},n.nextStyle),t)}return{style:t,cssText:Ke(t).map(function(r){return"".concat(Zp(r,"-"),": ").concat(t[r],";")}).join("")}}function cu(t,e,n){var r=e.afterTransform||e.transform;return O(O({},Jt(O(O(O({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function it(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=O(O({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function ue(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),O(O({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function Li(t,e,n){t._emitter.on(e,n)}function X(t,e,n,r){return t.triggerEvent(e,n,r)}function Pe(t,e){return window.getComputedStyle(t,e)}function Ii(t,e,n){var r={},i={};return t.filter(function(a){var s=a.name;if(r[s]||!e.some(function(o){return a[o]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[s]=!0,!0})}function Eo(t,e){return t===e||t==null&&e==null}function v0(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!Oa(i))return i}return t[n]}function uu(t,e){var n=[],r=[];return t.forEach(function(i,a){var s=e(i,a,t),o=r.indexOf(s),l=n[o]||[];o===-1&&(r.push(s),n.push(l)),l.push(i)}),n}function p0(t,e){var n=[],r={};return t.forEach(function(i,a){var s=e(i,a,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(i)}),n}function du(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Ur(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Math.abs(r)-Math.abs(n)}),t[0]}function hr(t,e,n){return Gt(he(t,n),lr(e,n),n)}function fu(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=hr(i,[e.distX,e.distY],a),e.distX=n[0],e.distY=n[1],e}function Bi(t,e,n,r,i){return Z(Bt(t,ut(n,e),i),r)}function me(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function Fi(t){return Math.abs(t)<=qt?0:t}function bo(t){return function(e){if(!e.isDragging(t))return"";var n=e0(e,t),r=n.deg;return r?Q("view-control-rotation".concat(r)):""}}function Co(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return It(i,Q("direction"))&&(!t||It(i,Q(t)))}}function h0(t){var e={};for(var n in t)e[t[n]]=n;return e}function g0(t,e){var n=t.slice(0,e<0?void 0:e),r=t.slice(0,e<0?void 0:e+1),i=t[e]||"",a=e<0?[]:t.slice(e),s=e<0?[]:t.slice(e+1),o=cr(n),l=cr(r),c=cr([i]),u=cr(a),d=cr(s),f=Br(o),v=Br(l),p=Br(u),h=Br(d),g=yt(f,p,4);return{transforms:t,beforeFunctionMatrix:f,beforeFunctionMatrix2:v,targetFunctionMatrix:Br(c),afterFunctionMatrix:p,afterFunctionMatrix2:h,allFunctionMatrix:g,beforeFunctions:o,beforeFunctions2:l,targetFunction:c[0],afterFunctions:u,afterFunctions2:d,beforeFunctionTexts:n,beforeFunctionTexts2:r,targetFunctionText:i,afterFunctionTexts:a,afterFunctionTexts2:s}}function m0(t){return!t||!ar(t)||t instanceof Element?!1:zt(t)||"length"in t}function gr(t,e){return t?t instanceof Element?t:Ge(t)?e?document.querySelector(t):t:Kl(t)?t():"current"in t?t.current:t:null}function xo(t,e){if(!t)return[];var n=m0(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Ge(i)&&e?J(J([],r,!0),[].slice.call(document.querySelectorAll(i)),!0):(zt(i)?r.push(xo(i,e)):r.push(gr(i,e)),r)},[])}function y0(t,e,n){var r=Mt(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function vu(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=he(n,i);return r||(a=xe(a,3,4)),a[12]=0,a[13]=0,a[14]=0,fh(a,e)}function pu(t,e,n,r,i){var a=t[0],s=t[1],o=0,l=0;if(i&&a&&s){var c=Mt([0,0],e),u=Mt([0,0],r),d=ge(e),f=Math.cos(c-u)*d;if(!r[0])l=f,o=l*n;else if(!r[1])o=f,l=o/n;else{var v=r[0]*2*a,p=r[1]*2*s,h=ge([v+e[0],p+e[1]])-ge([v,p]),g=Mt([0,0],[n,1]);o=Math.cos(g)*h,l=Math.sin(g)*h}}else o=r[0]*e[0],l=r[1]*e[1];return[o,l]}function hu(t,e,n,r){var i,a=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,l=0,c=0,u=r.distX,d=r.distY,f=r.parentDistance,v=r.parentDist,p=r.parentScale,h=n.fixedDirection,g=[0,1].map(function(x){return Math.abs(t[x]-h[x])}),m=[0,1].map(function(x){var C=g[x];return C!==0&&(C=2/C),C});if(v)l=v[0],c=v[1],e&&(l?c||(c=l/a):l=c*a);else if(p)l=(p[0]-1)*s,c=(p[1]-1)*o;else if(f){var _=s*g[0],b=o*g[1],E=ge([_,b]);l=f/E*_*m[0],c=f/E*b*m[1]}else{var S=Se({datas:n,distX:u,distY:d});S=m.map(function(x,C){return S[C]*x}),i=pu([s,o],S,a,t,e),l=i[0],c=i[1]}return{distWidth:l,distHeight:c}}function So(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=t.split(" "),r=n[0],i=n[1],a=So(r||""),s=So(i||""),o=O(O({},a),s),l={x:"50%",y:"50%"};return o.x&&(l.x=o.x),o.y&&(l.y=o.y),o.value&&(o.x&&!o.y&&(l.y=o.value),!o.x&&o.y&&(l.x=o.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function _0(t,e,n){var r=So(t,!0),i=r.x,a=r.y;return[xt(i,e)||0,xt(a,n)||0]}function E0(t,e,n){var r=t.map(function(a){return Z(a,e)}),i=r.map(function(a){return Sn(a,n)});return{prev:r,next:i,result:i.map(function(a){return ut(a,e)})}}function gu(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=zt(n),s=zt(i);return a&&s?gu(n,i):!a&&!s?n===i:!1})}var b0=Nn("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,l=s.ables;if(!o)return!1;var c="onPinch".concat(r?"Group":"","Start"),u="drag".concat(r?"Group":"","ControlStart"),d=(o===!0?t.controlAbles:l.filter(function(h){return o.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[u]}),f=it(t,e,{});r&&(f.targets=r);var v=X(t,c,f);n.isPinch=v!==!1,n.ables=d;var p=n.isPinch;return p?(d.forEach(function(h){if(a[h.name]=a[h.name]||{},!!h[u]){var g=O(O({},e),{datas:a[h.name],parentRotate:i,isPinch:!0});h[u](t,g)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,l=e.angle;if(n.isPinch){var c=i*(1-1/r),u=it(t,e,{});o&&(u.targets=o);var d="onPinch".concat(o?"Group":"");X(t,d,u);var f=n.ables,v="drag".concat(o?"Group":"","Control");return f.forEach(function(p){p[v]&&p[v](t,O(O({},e),{datas:a[p.name],inputEvent:s,parentDistance:c,parentRotate:l,isPinch:!0}))}),u}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(a?"Group":"","End"),l=ue(t,e,{isDrag:r});a&&(l.targets=a),X(t,o,l);var c=n.ables,u="drag".concat(a?"Group":"","ControlEnd");return c.forEach(function(d){d[u]&&d[u](t,O(O({},e),{isDrag:r,datas:s[d.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,O(O({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,O(O({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,O(O({},e),{targets:t.props.targets}))}});function ye(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},O(O({},n),{datas:a[o][e],originalDatas:a[o]})})}function wo(t,e,n,r,i,a,s){var o=!!n.match(/Start$/g),l=!!n.match(/End$/g),c=i.isPinch,u=i.datas,d=ye(t,e.name,i),f=t.moveables,v=d.map(function(p,h){var g=f[h],m=g.state,_=m.gestos,b=p;if(o)b=new Hr(s).dragStart(r,p);else{if(_[s]||(_[s]=u.childGestos[h]),!_[s])return;b=Ln(p,m,r,c,a,s)}var E=e[n](g,O(O({},b),{parentFlag:!0}));return l&&(_[s]=null),E});return o&&(u.childGestos=f.map(function(p){return p.state.gestos[s]})),v}function Ae(t,e,n,r,i,a){i===void 0&&(i=function(u,d){return d});var s=!!n.match(/End$/g),o=ye(t,e.name,r),l=t.moveables,c=o.map(function(u,d){var f=l[d],v=u;v=i(f,u);var p=e[n](f,O(O({},v),{parentFlag:!0}));return p&&a&&a(f,u,p,d),s&&(f.state.gestos={}),p});return c}var C0=["left","right","center"],x0=["top","bottom","middle"],He={start:"left",end:"right",center:"center"},Ve={start:"top",end:"bottom",center:"middle"};function Zr(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,l=n.snapGridWidth,c=n.snapGridHeight,u=t.state,d=u.guidelines,f=u.enableSnap;return!r||!f||e&&r!==!0&&r.indexOf(e)<0?!1:!!(l||c||i||a||d&&d.length||s&&s.length||o&&o.length)}function Do(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function S0(t,e){var n=Do(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function Mo(t,e){var n=S0(t,e),r=x0.filter(function(a){return a in n}),i=C0.filter(function(a){return a in n});return{horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function w0(t,e,n){var r=Bt(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function D0(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];Math.abs(r)<Zt&&(r=0),Math.abs(i)<Zt&&(i=0);var a=0,s=0,o=0;return r?i?(a=-i/r,s=1,o=a*e[0]-e[1]):(s=1,o=-e[1]):(a=-1,o=e[0]),[a,s,o].map(function(l){return lt(l,Zt)})}function zi(t,e,n,r){var i=t.props,a=v0(r,i.snapThreshold,5);return mu(t.state.guidelines,e,n,a)}function mu(t,e,n,r){return{vertical:_u(t,"vertical",e,r),horizontal:_u(t,"horizontal",n,r)}}function M0(t,e,n){var r=n[0],i=n[1],a=e[0],s=e[1],o=Z(n,e),l=o[0],c=o[1],u=c>0,d=l>0;l=Fi(l),c=Fi(c);var f={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(l===0&&c===0)return{vertical:f,horizontal:v};var p=zi(t,l?[r]:[],c?[i]:[]),h=p.vertical,g=p.horizontal;h.posInfos.filter(function(P){var A=P.pos;return d?A>=a:A<=a}),g.posInfos.filter(function(P){var A=P.pos;return u?A>=s:A<=s}),h.isSnap=h.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=ko(h),_=m.isSnap,b=m.guideline,E=ko(g),S=E.isSnap,x=E.guideline,C=S?x.pos[1]:0,D=_?b.pos[0]:0;if(l===0)S&&(v.isSnap=!0,v.pos=x.pos[1],v.offset=i-v.pos);else if(c===0)_&&(f.isSnap=!0,f.pos=D,f.offset=r-D);else{var w=c/l,k=n[1]-w*r,T=0,M=0,R=!1;_?(M=D,T=w*M+k,R=!0):S&&(T=C,M=(T-k)/w,R=!0),R&&(f.isSnap=!0,f.pos=M,f.offset=r-M,v.isSnap=!0,v.pos=T,v.offset=i-T)}return{vertical:f,horizontal:v}}function yu(t,e,n){var r=Mo(t.props.snapDirections,e);return zi(t,r.vertical,r.horizontal,n)}function ko(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:s}}function _u(t,e,n,r){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var i=e==="vertical",a=i?0:1,s=n.map(function(l,c){var u=t.map(function(d){var f=d.pos,v=l-f[a];return{offset:v,dist:Math.abs(v),guideline:d}}).filter(function(d){var f=d.guideline,v=d.dist,p=f.type;return!(p!==e||v>r)}).sort(function(d,f){return d.dist-f.dist});return{pos:l,index:c,guidelineInfos:u}}).filter(function(l){return l.guidelineInfos.length>0}).sort(function(l,c){return l.guidelineInfos[0].dist-c.guidelineInfos[0].dist}),o=s.length>0;return{isSnap:o,index:o?s[0].index:-1,posInfos:s}}function k0(t,e,n,r){r===void 0&&(r=1);var i=[];if(n[0]&&n[1])i=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(o){return kt(e,o)});else if(!n[0]&&!n[1])for(var a=[e[0],e[1],e[3],e[2],e[0]],s=0;s<4;++s)i.push(a[s]),i.push([(a[s][0]+a[s+1][0])/2,(a[s][1]+a[s+1][1])/2]);else t.props.keepRatio?i=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(o){return kt(e,o)}):(i=jg(e,n),i.length>1&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]));return zi(t,i.map(function(o){return o[0]}),i.map(function(o){return o[1]}),r)}function Eu(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<qt?1:r<qt?-1:n-r}function Gi(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],s=n.offset[e],o=r.offset[e];if(i){if(!a)return-1}else return 1;return Eu({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function T0(t,e,n){var r=[];if(n)Math.abs(e[0])!==1||Math.abs(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var l=[s*i[0],o*i[1]];e[0]===l[0]&&e[1]===l[1]||r.push([e,l])})})}else if(t[0]){var a=Math.abs(e[0])===1?[1]:[1,-1];a.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=Math.abs(e[1])===1?[1]:[1,-1];a.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function bu(t,e){var n=Ia([e[0][0],e[1][0]]),r=Ia([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function To(t,e){var n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<qt&&(i=0),Math.abs(a)<qt&&(a=0);var s,o;if(!i)s=n[0],o=t[0];else if(!a)s=n[1],o=t[1];else{var l=a/i;s=l*(t[0]-n[0])+n[1],o=t[1]}return s-o}function Cu(t,e,n,r){return r===void 0&&(r=qt),t.every(function(i){var a=To(i,e),s=a<=0;return s===n||Math.abs(a)<=r})}function xu(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function R0(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=o.left,c=o.top,u=o.width,d=o.height,f=[[l,c],[l,c+d]],v=[[l,c],[l+u,c]],p=[[l+u,c],[l+u,c+d]],h=[[l,c+d],[l+u,c+d]];if(Cu([[l,c],[l+u,c],[l,c+d],[l+u,c+d]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Xe(n,s,v,i),m=Xe(n,s,h,i),_=Xe(n,s,f,a),b=Xe(n,s,p,a),E=g.isBound&&m.isBound,S=g.isBound||m.isBound,x=_.isBound&&b.isBound,C=_.isBound||b.isBound,D=Ur(g.offset,m.offset),w=Ur(_.offset,b.offset),k=[0,0],T=!1,M=!1;return Math.abs(w)<Math.abs(D)?(k=[D,0],T=S,M=E):(k=[0,w],T=C,M=x),{isAllBound:M,isVerticalBound:S,isHorizontalBound:C,isBound:T,offset:k}}function Xe(t,e,n,r,i,a){var s=e[0],o=e[1],l=t[0],c=n[0],u=n[1],d=Fi(u[1]-c[1]),f=Fi(u[0]-c[0]),v=o,p=s,h=-s/o;if(f){if(!d){if(a&&!v)return{isBound:!1,offset:0};if(p){var b=(c[1]-l[1])/h+l[0];return xu(b,c[0],u[0],r,i)}else{var m=c[1]-l[1],_=Math.abs(m)<=(i||0);return{isBound:_,offset:_?m:0}}}}else{if(a&&!p)return{isBound:!1,offset:0};if(v){var g=h*(c[0]-l[0])+l[1];return xu(g,c[1],u[1],r,i)}else{var m=c[0]-l[0],_=Math.abs(m)<=(i||0);return{isBound:_,offset:_?m:0}}}return{isBound:!1,offset:0}}function Su(t,e,n){return e.map(function(r){var i=R0(t,r),a=i.isBound,s=i.offset,o=i.isVerticalBound,l=i.isHorizontalBound,c=r.multiple,u=Se({datas:n,distX:s[0],distY:s[1]}).map(function(d,f){return d*(c[f]?2/c[f]:0)});return{sign:c,isBound:a,isVerticalBound:o,isHorizontalBound:l,isSnap:!1,offset:u}})}function O0(t,e,n){var r,i=Ro(t,e,[0,0],!1).map(function(f){return O(O({},f),{multiple:f.multiple.map(function(v){return Math.abs(v)*2})})}),a=Su(t,i,n),s=Gi(a,0),o=Gi(a,1),l=0,c=0,u=s.isVerticalBound||o.isVerticalBound,d=s.isHorizontalBound||o.isHorizontalBound;return(u||d)&&(r=Vg({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),l=r[0],c=r[1]),{vertical:{isBound:u,offset:l},horizontal:{isBound:d,offset:c}}}function P0(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function Ro(t,e,n,r){var i=t.state,a=i.allMatrix,s=i.is3d,o=$e(a,100,100,s?4:3),l=kt(o,[0,0]);return P0(n,r).map(function(c){var u=c[0],d=c[1],f=c[2],v=[kt(o,d),kt(o,f)],p=D0(v),h=bu(l,v),g=h.vertical,m=h.horizontal,_=To(l,v)<=0;return{multiple:u,centerSign:_,verticalSign:g,horizontalSign:m,lineConstants:p,line:[kt(e,d),kt(e,f)]}})}function wu(t,e,n,r){var i=r?t.map(function(a){return Sn(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=To(n,a)<=0;return!Cu(e,a,s)})}function A0(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!i)return Math.abs(e[1]);var a=i/r;return Math.abs((-a*e[0]+e[1])/Math.sqrt(Math.pow(a,2)+1))}function N0(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return[e[0],0];if(!i)return[0,e[1]];var a=i/r,s=-a*e[0]+e[1];return[-s/(a+1/a),s/(a*a+1)]}function L0(t,e,n,r,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,l=a.top,c=a.width,u=a.height,d=o-r[0],f=o+c-r[0],v=l-r[1],p=l+u-r[1],h=[[d,v],[f,v],[d,p],[f,p]],g=kt(n,[0,0]);if(!wu(n,h,g,0))return[];var m=[],_=h.map(function(b){return[ge(b),Mt([0,0],b)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(b){var E=Mt([0,0],N0(b)),S=A0(b);m.push.apply(m,_.filter(function(x){var C=x[0];return C&&S<=C}).map(function(x){var C=x[0],D=x[1],w=Math.acos(C?S/C:0),k=D+w,T=D-w;return[s+k-E,s+T-E]}).reduce(function(x,C){return x.push.apply(x,C),x},[]).filter(function(x){return!wu(e,h,g,x)}).map(function(x){return lt(x*180/Math.PI,qt)}))}),m}function I0(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,i=n.pos2,a=n.pos3,s=n.pos4,o=[r,i,a,s],l=kt(o,[0,0]),c=e.left,u=e.top,d=e.width,f=e.height,v=[[c,u],[c,u+f]],p=[[c,u],[c+d,u]],h=[[c+d,u],[c+d,u+f]],g=[[c,u+f],[c+d,u+f]],m=Ro(t,o,[0,0],!1),_=[],b=[],E={top:!1,bottom:!1,left:!1,right:!1};return m.forEach(function(S){var x=S.line,C=S.lineConstants,D=bu(l,x),w=D.horizontal,k=D.vertical,T=Xe(x,C,p,k,1,!0),M=Xe(x,C,g,k,1,!0),R=Xe(x,C,v,w,1,!0),P=Xe(x,C,h,w,1,!0);T.isBound&&!E.top&&(_.push(u),E.top=!0),M.isBound&&!E.bottom&&(_.push(u+f),E.bottom=!0),R.isBound&&!E.left&&(b.push(c),E.left=!0),P.isBound&&!E.right&&(b.push(c+d),E.right=!0)}),{horizontal:_,vertical:b}}function Oo(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,s=r.left,o=s===void 0?-1/0:s,l=r.top,c=l===void 0?-1/0:l,u=r.right,d=u===void 0?1/0:u,f=r.bottom,v=f===void 0?1/0:f,p={position:a,left:o,top:c,right:d,bottom:v};return{vertical:Du(p,e,!0),horizontal:Du(p,n,!1)}}function Ki(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,s=r.clientLeft,o=r.clientTop,l=n.snapOffset,c=l.left,u=l.top,d=l.right,f=l.bottom,v=e||t.props.bounds||{},p=v.position||"client",h=p==="css",g=v.left,m=g===void 0?-1/0:g,_=v.top,b=_===void 0?-1/0:_,E=v.right,S=E===void 0?h?-1/0:1/0:E,x=v.bottom,C=x===void 0?h?-1/0:1/0:x;return h&&(S=a+d-c-S,C=i+f-u-C),{left:m+c-s,right:S+c-s,top:b+u-o,bottom:C+u-o}}function B0(t,e,n){var r=Ki(t),i=r.left,a=r.top,s=r.right,o=r.bottom,l=n[0],c=n[1],u=Z(n,e),d=u[0],f=u[1];Math.abs(d)<qt&&(d=0),Math.abs(f)<qt&&(f=0);var v=f>0,p=d>0,h={isBound:!1,offset:0,pos:0},g={isBound:!1,offset:0,pos:0};if(d===0&&f===0)return{vertical:h,horizontal:g};if(d===0)v?o<c&&(g.pos=o,g.offset=c-o):a>c&&(g.pos=a,g.offset=c-a);else if(f===0)p?s<l&&(h.pos=s,h.offset=l-s):i>l&&(h.pos=i,h.offset=l-i);else{var m=f/d,_=n[1]-m*l,b=0,E=0,S=!1;p&&s<=l?(b=m*s+_,E=s,S=!0):!p&&l<=i&&(b=m*i+_,E=i,S=!0),S&&(b<a||b>o)&&(S=!1),S||(v&&o<=c?(b=o,E=(b-_)/m,S=!0):!v&&c<=a&&(b=a,E=(b-_)/m,S=!0)),S&&(h.isBound=!0,h.pos=E,h.offset=l-E,g.isBound=!0,g.pos=b,g.offset=c-b)}return{vertical:h,horizontal:g}}function Du(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,e),s=Math.max.apply(Math,e),o=[];return r+1>a&&o.push({isBound:!0,offset:a-r,pos:r}),i-1<s&&o.push({isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(l,c){return Math.abs(c.offset)-Math.abs(l.offset)})}function Mu(t,e,n){var r=n?t.map(function(i){return Sn(i,n)}):t;return r.some(function(i){return i[0]<e.left&&Math.abs(i[0]-e.left)>.1||i[0]>e.right&&Math.abs(i[0]-e.right)>.1||i[1]<e.top&&Math.abs(i[1]-e.top)>.1||i[1]>e.bottom&&Math.abs(i[1]-e.bottom)>.1})}function F0(t,e,n){var r=ge(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,s){return Math.abs(a-t[n?0:1])-Math.abs(s-t[n?0:1])}).map(function(a){return Mt([0,0],n?[a,e]:[e,a])})}function z0(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=Ki(t),o=s.left,l=s.top,c=s.right,u=s.bottom,d=o-r[0],f=c-r[0],v=l-r[1],p=u-r[1],h={left:d,top:v,right:f,bottom:p};if(!Mu(n,h,0))return[];var g=[];return[[d,0],[f,0],[v,1],[p,1]].forEach(function(m){var _=m[0],b=m[1];n.forEach(function(E){var S=Mt([0,0],E);g.push.apply(g,F0(E,_,b).map(function(x){return a+x-S}).filter(function(x){return!Mu(e,h,x)}).map(function(x){return lt(x*180/Math.PI,qt)}))})}),g}function G0(t,e){var n,r=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,l=t.key,c=r==="horizontal",u=c?"Y":"X";return e.createElement("div",{key:l,className:i.join(" "),style:(n={},n[c?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(u,"(-50%) scale").concat(u,"(").concat(o,")"),n)})}function Po(t,e){return G0(O(O({},t),{classNames:J([Q("line","guideline",t.direction)],t.classNames,!0).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(lt(n,.1),"px")})}),e)}function ku(t,e,n,r,i,a,s,o){var l=t.props.zoom;return n.map(function(c,u){var d=c.type,f=c.pos,v=[0,0];return v[s]=r,v[s?0:1]=-i+f,Po({key:"".concat(e,"TargetGuideline").concat(u),classNames:[Q("target","bold",d)],posValue:v,sizeValue:a,zoom:l,direction:e},o)})}function Tu(t,e,n,r,i,a){var s=t.props,o=s.zoom,l=s.isDisplayInnerSnapDigit,c=e==="horizontal"?He:Ve,u=i[c.start],d=i[c.end];return n.filter(function(f){var v=f.hide,p=f.elementRect;if(v)return!1;if(l&&p){var h=p.rect;if(h[c.start]<=u&&d<=h[c.end])return!1}return!0}).map(function(f,v){var p=f.pos,h=f.size,g=f.element,m=f.className,_=[-r[0]+p[0],-r[1]+p[1]];return Po({key:"".concat(e,"-default-guideline-").concat(v),classNames:g?[Q("bold"),m]:[Q("normal"),m],direction:e,posValue:_,sizeValue:h,zoom:o},a)})}function Gn(t,e,n,r,i,a,s,o){var l,c=t.props,u=c.snapDigit,d=u===void 0?0:u,f=c.isDisplaySnapDigit,v=f===void 0?!0:f,p=c.snapDistFormat,h=p===void 0?function(S,x){return S}:p,g=c.zoom,m=e==="horizontal"?"X":"Y",_=e==="vertical"?"height":"width",b=Math.abs(i),E=v?parseFloat(b.toFixed(d)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Q("guideline-group",e),style:(l={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},l[_]="".concat(b,"px"),l)},Po({direction:e,classNames:[Q(n),s],size:"100%",posValue:[0,0],sizeValue:b,zoom:g},o),o.createElement("div",{className:Q("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},E>0?h(E,e):""))}function K0(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?He:Ve,o=n[s.start],l=n[s.end];return uu(e,function(c){return c.pos[i]}).map(function(c){var u=[],d=[],f=[];return c.forEach(function(v){var p,h,g=v.element,m=v.elementRect.rect;if(m[s.end]<o)u.push(v);else if(l<m[s.start])d.push(v);else if(m[s.start]<=o&&l<=m[s.end]&&r){var _=v.pos,b={element:g,rect:O(O({},m),(p={},p[s.end]=m[s.start],p))},E={element:g,rect:O(O({},m),(h={},h[s.start]=m[s.end],h))},S=[0,0],x=[0,0];S[i]=_[i],S[a]=_[a],x[i]=_[i],x[a]=_[a]+v.size,u.push({type:t,pos:S,size:0,elementRect:b}),d.push({type:t,pos:x,size:0,elementRect:E})}}),u.sort(function(v,p){return p.pos[a]-v.pos[a]}),d.sort(function(v,p){return v.pos[a]-p.pos[a]}),{total:c,start:u,end:d,inner:f}})}function W0(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var l=e.filter(function(g){return g.type===o}),c=o==="vertical"?1:0,u=c?0:1,d=K0(o,l,r,a),f=c?Ve:He,v=c?He:Ve,p=r[f.start],h=r[f.end];d.forEach(function(g){var m=g.total,_=g.start,b=g.end,E=g.inner,S=n[u]+m[0].pos[u]-r[v.start],x=r;_.forEach(function(C){var D=C.elementRect.rect,w=x[f.start]-D[f.end];if(w>0){var k=[0,0];k[c]=n[c]+x[f.start]-p-w,k[u]=S,s.push(Gn(t,o,"dashed",s.length,w,k,C.className,i))}x=D}),x=r,b.forEach(function(C){var D=C.elementRect.rect,w=D[f.start]-x[f.end];if(w>0){var k=[0,0];k[c]=n[c]+x[f.end]-p,k[u]=S,s.push(Gn(t,o,"dashed",s.length,w,k,C.className,i))}x=D}),E.forEach(function(C){var D=C.elementRect.rect,w=p-D[f.start],k=D[f.end]-h,T=[0,0],M=[0,0];T[c]=n[c]-w,T[u]=S,M[c]=n[c]+h-p,M[u]=S,s.push(Gn(t,o,"dashed",s.length,w,T,C.className,i)),s.push(Gn(t,o,"dashed",s.length,k,M,C.className,i))})})}),s}function Y0(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(g){return g.type===s}).slice(0,1),l=s==="vertical"?0:1,c=l?0:1,u=l?Ve:He,d=l?He:Ve,f=r[u.start],v=r[u.end],p=r[d.start],h=r[d.end];o.forEach(function(g){var m=g.gap,_=g.gapRects,b=Math.max.apply(Math,J([p],_.map(function(x){var C=x.rect;return C[d.start]}),!1)),E=Math.min.apply(Math,J([h],_.map(function(x){var C=x.rect;return C[d.end]}),!1)),S=(b+E)/2;b===E||S===(p+h)/2||_.forEach(function(x){var C=x.rect,D=x.className,w=[n[0],n[1]];if(C[u.end]<f)w[l]+=C[u.end]-f;else if(v<C[u.start])w[l]+=C[u.start]-f-m;else return;w[c]+=S-p,a.push(Gn(t,l?"vertical":"horizontal","gap",a.length,m,w,D,i))})})}),a}function $0(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(Math.abs(i)<Zt&&(i=0),Math.abs(a)<Zt&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(r){var l=s*(e[0]+n)+o;return[n,l-e[1]]}else{var c=(e[1]+n-o)/s;return[c-e[0],n]}}function Ao(t,e,n,r,i){var a=$0(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var s=Re(t,e),o=Re(a,t),l=Re(a,e),c=o>s||l>s,u=Se({datas:i,distX:a[0],distY:a[1]}),d=u[0],f=u[1];return{offset:[d,f],isOutside:c}}function Wi(t,e){return t.isBound?t.offset:e.isSnap?ko(e).offset:0}function H0(t,e,n,r,i){var a=e[0],s=e[1],o=n[0],l=n[1],c=r[0],u=r[1],d=i[0],f=i[1],v=-d,p=-f;if(t&&a&&s){v=0,p=0;var h=[];if(o&&l?h.push([0,f],[d,0]):o?h.push([d,0]):l?h.push([0,f]):c&&u?h.push([0,f],[d,0]):c?h.push([d,0]):u&&h.push([0,f]),h.length){h.sort(function(b,E){return ge(Z([a,s],b))-ge(Z([a,s],E))});var g=h[0];if(g[0]&&Math.abs(a)>Zt)v=-g[0],p=s*Math.abs(a+v)/Math.abs(a)-s;else if(g[1]&&Math.abs(s)>Zt){var m=s;p=-g[1],v=a*Math.abs(s+p)/Math.abs(m)-a}if(t&&l&&o)if(Math.abs(v)>Zt&&Math.abs(v)<Math.abs(d)){var _=Math.abs(d)/Math.abs(v);v*=_,p*=_}else if(Math.abs(p)>Zt&&Math.abs(p)<Math.abs(f)){var _=Math.abs(f)/Math.abs(p);v*=_,p*=_}else v=Ur(-d,v),p=Ur(-f,p)}}else v=a||o?-d:0,p=s||l?-f:0;return[v,p]}function V0(t,e,n,r,i,a){if(!Zr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=_o(a.absolutePoses,[e,n]),o=fe(s),l=o.left,c=o.right,u=o.top,d=o.bottom,f={horizontal:s.map(function(P){return P[1]}),vertical:s.map(function(P){return P[0]})},v=Do(t.props.snapDirections),p=Mo(v,{left:l,right:c,top:u,bottom:d,center:(l+c)/2,middle:(u+d)/2}),h=Yi(t,i,p,f),g=h.vertical,m=h.horizontal,_=O0(t,s,a),b=_.vertical,E=_.horizontal,S=g.isSnap,x=m.isSnap,C=g.isBound||b.isBound,D=m.isBound||E.isBound,w=Ur(g.offset,b.offset),k=Ur(m.offset,E.offset),T=H0(r,[e,n],[C,D],[S,x],[w,k]),M=T[0],R=T[1];return[{isBound:C,isSnap:S,offset:M},{isBound:D,isSnap:x,offset:R}]}function Yi(t,e,n,r){r===void 0&&(r=n);var i=Oo(Ki(t),r.vertical,r.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:zi(t,n.vertical,n.horizontal),l=o.horizontal,c=o.vertical,u=Wi(a[0],l),d=Wi(s[0],c),f=Math.abs(u),v=Math.abs(d);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:f,bounds:a,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:v,bounds:s,snap:c}}}function Ru(t,e,n,r,i){var a=Oo(e,n,r),s=a.horizontal,o=a.vertical,l=mu(t,n,r,i),c=l.horizontal,u=l.vertical,d=Wi(s[0],c),f=Wi(o[0],u),v=Math.abs(d),p=Math.abs(f);return{horizontal:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:v,bounds:s,snap:c},vertical:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:p,bounds:o,snap:u}}}function X0(t,e,n,r){var i=Mt(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,o=a.isSnap,l=a.dist,c=n.horizontal,u=c.isBound,d=c.isSnap,f=c.dist,v=i%180,p=v<3||v>177,h=v>87&&v<93;return f<l&&(s||o&&!h&&(!r||!p))?"vertical":u||d&&!p&&(!r||!h)?"horizontal":""}function j0(t,e,n,r,i,a){return n.map(function(s){var o=s[0],l=s[1],c=kt(e,o),u=kt(e,l),d=r?U0(t,c,u,i):Yi(t,i,{vertical:[u[0]],horizontal:[u[1]]}),f=d.horizontal,v=f.offset,p=f.isBound,h=f.isSnap,g=d.vertical,m=g.offset,_=g.isBound,b=g.isSnap,E=Z(l,o);if(!m&&!v)return{isBound:_||p,isSnap:b||h,sign:E,offset:[0,0]};var S=X0(c,u,d,r);if(!S)return{sign:E,isBound:!1,isSnap:!1,offset:[0,0]};var x=S==="vertical",C=[0,0];return!r&&Math.abs(l[0])===1&&Math.abs(l[1])===1&&o[0]!==l[0]&&o[1]!==l[1]?C=Se({datas:a,distX:-m,distY:-v}):C=Ao(c,u,-(x?m:v),x,a).offset,C=C.map(function(D,w){return D*(E[w]?2/E[w]:0)}),{sign:E,isBound:x?_:p,isSnap:x?b:h,offset:C}})}function Ou(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function U0(t,e,n,r){var i=B0(t,e,n),a=i.horizontal,s=i.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:M0(t,e,n),l=o.horizontal,c=o.vertical,u=Ou(a,l),d=Ou(s,c),f=Math.abs(u),v=Math.abs(d);return{horizontal:{isBound:a.isBound,isSnap:l.isSnap,offset:u,dist:f},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:d,dist:v}}}function Z0(t,e,n,r,i){var a=[-n[0],-n[1]],s=t.state,o=s.width,l=s.height,c=t.props.bounds,u=1/0,d=1/0;if(c){var f=[[n[0],-n[1]],[-n[0],n[1]]],v=c.left,p=v===void 0?-1/0:v,h=c.top,g=h===void 0?-1/0:h,m=c.right,_=m===void 0?1/0:m,b=c.bottom,E=b===void 0?1/0:b;f.forEach(function(S){var x=S[0]!==a[0],C=S[1]!==a[1],D=kt(e,S),w=Mt(r,D)*360/Math.PI;if(C){var k=D.slice();(Math.abs(w-360)<2||Math.abs(w-180)<2)&&(k[1]=r[1]);var T=Ao(r,k,(r[1]<D[1]?E:g)-D[1],!1,i),M=T.offset,R=M[1],P=T.isOutside;isNaN(R)||(d=l+(P?1:-1)*Math.abs(R))}if(x){var k=D.slice();(Math.abs(w-90)<2||Math.abs(w-270)<2)&&(k[0]=r[0]);var A=Ao(r,k,(r[0]<D[0]?_:p)-D[0],!0,i),L=A.offset[0],F=A.isOutside;isNaN(L)||(u=o+(F?1:-1)*Math.abs(L))}})}return{maxWidth:u,maxHeight:d}}function No(t){var e=t.state,n=e.containerClientRect,r=e.hasFixed,i=n.overflow,a=n.scrollHeight,s=n.scrollWidth,o=n.clientHeight,l=n.clientWidth,c=n.clientLeft,u=n.clientTop,d=t.props,f=d.snapGap,v=f===void 0?!0:f,p=d.verticalGuidelines,h=d.horizontalGuidelines,g=d.snapThreshold,m=g===void 0?5:g,_=d.snapGridWidth,b=_===void 0?0:_,E=d.snapGridHeight,S=E===void 0?0:E,x=d.maxSnapElementGuidelineDistance,C=x===void 0?1/0:x,D=fe(oe(t.state)),w=D.top,k=D.left,T=D.bottom,M=D.right,R={top:w,left:k,bottom:T,right:M,center:(k+M)/2,middle:(w+T)/2},P=J0(t),A=J([],P,!0);v&&A.push.apply(A,Q0(t,R,m)),A.push.apply(A,q0(b,S,i?s:l,i?a:o,c,u));var L=O({},e.snapOffset||{left:0,top:0,bottom:0,right:0});if(r){var F=n.left,B=n.top;L.left+=F,L.top+=B,L.right+=F,L.bottom+=B}return A.push.apply(A,Au(h||!1,p||!1,i?s:l,i?a:o,c,u,L)),A=A.filter(function(z){var N=z.element,G=z.elementRect,K=z.type;if(!N||!G)return!0;var H=G.rect;return Pu(R,H,K,C)}),A}function Q0(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,l=t.state.elementRects,c=[];return[["vertical",He,Ve],["horizontal",Ve,He]].forEach(function(u){var d=u[0],f=u[1],v=u[2],p=e[f.start],h=e[f.end],g=e[f.center],m=e[v.start],_=e[v.end];function b(x){var C=x.rect;return C[f.end]<p+n?p-C[f.end]:h-n<C[f.start]?C[f.start]-h:-1}var E=l.filter(function(x){var C=x.rect;return C[v.start]>_||C[v.end]<m?!1:b(x)>0}).sort(function(x,C){return b(x)-b(C)}),S=[];E.forEach(function(x){E.forEach(function(C){if(x!==C){var D=x.rect,w=C.rect,k=D[v.start],T=D[v.end],M=w[v.start],R=w[v.end];k>R||M>T||S.push([x,C])}})}),S.forEach(function(x){var C=x[0],D=x[1],w=C.rect,k=D.rect,T=w[f.start],M=w[f.end],R=k[f.start],P=k[f.end],A=0,L=0,F=!1,B=!1,z=!1;if(M<=p&&h<=R){if(B=!0,A=(R-M-(h-p))/2,L=M+A+(h-p)/2,Math.abs(L-g)>n)return}else if(M<R&&P<p+n){if(F=!0,A=R-M,L=P+A,Math.abs(L-p)>n)return}else if(M<R&&h-n<T){if(z=!0,A=R-M,L=T-A,Math.abs(L-h)>n)return}else return;A&&Pu(e,k,d,a)&&(A>o||c.push({type:d,pos:d==="vertical"?[L,0]:[0,L],element:D.element,size:0,className:D.className,isStart:F,isCenter:B,isEnd:z,gap:A,hide:!0,gapRects:[C,D]}))})}),c}function q0(t,e,n,r,i,a){i===void 0&&(i=0),a===void 0&&(a=0);var s=[];if(e)for(var o=0;o<=r;o+=e)s.push({type:"horizontal",pos:[0,lt(o-a,.1)],size:n,hide:!0});if(t)for(var o=0;o<=n;o+=t)s.push({type:"vertical",pos:[lt(o-i,.1),0],size:r,hide:!0});return s}function Pu(t,e,n,r){return n==="horizontal"?Math.abs(t.right-e.left)<=r||Math.abs(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Math.abs(t.bottom-e.top)<=r||Math.abs(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function J0(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(f){return!f.refresh}),a=r.map(function(f){return ar(f)&&"element"in f?O(O({},f),{element:gr(f.element,!0)}):{element:gr(f,!0)}}).filter(function(f){return f.element}),s=Fr(i.map(function(f){return f.element}),a.map(function(f){return f.element})),o=s.maintained,l=s.added,c=[];o.forEach(function(f){var v=f[0],p=f[1];c[p]=i[v]}),tm(t,l.map(function(f){return a[f]})).map(function(f,v){c[l[v]]=f}),e.elementRects=c;var u=Do(t.props.elementSnapDirections),d=[];return c.forEach(function(f){var v=f.element,p=f.top,h=p===void 0?u.top:p,g=f.left,m=g===void 0?u.left:g,_=f.right,b=_===void 0?u.right:_,E=f.bottom,S=E===void 0?u.bottom:E,x=f.center,C=x===void 0?u.center:x,D=f.middle,w=D===void 0?u.middle:D,k=f.className,T=f.rect,M=Mo({top:h,right:b,left:m,bottom:S,center:C,middle:w},T),R=M.horizontal,P=M.vertical,A=T.top,L=T.left,F=T.right-L,B=T.bottom-A,z=[F,B];P.forEach(function(N){d.push({type:"vertical",element:v,pos:[lt(N,.1),A],size:B,sizes:z,className:k,elementRect:f})}),R.forEach(function(N){d.push({type:"horizontal",element:v,pos:[L,lt(N,.1)],size:F,sizes:z,className:k,elementRect:f})})}),d}function Au(t,e,n,r,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],l=s.left,c=s.top,u=s.bottom,d=s.right,f=n+d-l,v=r+u-c;return t&&t.forEach(function(p){var h=ar(p)?p:{pos:p};o.push({type:"horizontal",pos:[l,lt(h.pos-a+c,.1)],size:f,className:h.className})}),e&&e.forEach(function(p){var h=ar(p)?p:{pos:p};o.push({type:"vertical",pos:[lt(h.pos-i+l,.1),c],size:v,className:h.className})}),o}function tm(t,e){if(!e.length)return[];var n=t.state,r=n.containerClientRect,i=n.targetClientRect,a=i.top,s=i.left,o=n.rootMatrix,l=n.is3d,c=l?4:3,u=w0(o,r,c),d=u[0],f=u[1],v=oe(n),p=Ye(v),h=p.minX,g=p.minY,m=Z([h,g],hr(o,[s-d,a-f],c)).map(function(E){return f0(E)}),_=m[0],b=m[1];return e.map(function(E){var S=E.element.getBoundingClientRect(),x=S.left-d,C=S.top-f,D=C+S.height,w=x+S.width,k=hr(o,[x,C],c),T=k[0],M=k[1],R=hr(o,[w,D],c),P=R[0],A=R[1];return O(O({},E),{rect:{left:T+_,right:P+_,top:M+b,bottom:A+b,center:(T+P)/2+_,middle:(M+A)/2+b}})})}function $i(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var s=gr(r,!0);if(s){var o=zn(s),l=vu(e,[o.left-i.left,o.top-i.top]),c=vu(e,[o.right-i.right,o.bottom-i.bottom]);a.left=lt(l[0],1e-5),a.top=lt(l[1],1e-5),a.right=lt(c[0],1e-5),a.bottom=lt(c[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=No(t),e.enableSnap=!0,!0}function Nu(t,e,n,r,i,a){var s=$e(t,e,n,a?4:3),o=kt(s,r);return _o(s,Z(i,o))}function em(t,e,n,r,i,a){var s=a.fixedDirection,o=T0(n,s,r),l=Ro(t,e,n,r),c=J(J([],j0(t,e,o,r,i,a),!0),Su(t,l,a),!0),u=Gi(c,0),d=Gi(c,1);return{width:{isBound:u.isBound,offset:u.offset[0]},height:{isBound:d.isBound,offset:d.offset[1]}}}function rm(t,e,n,r,i,a,s,o,l){var c=kt(e,s),u=Yi(t,o,{vertical:[c[0]],horizontal:[c[1]]}),d=u.horizontal.offset,f=u.vertical.offset;if(lt(f,lo)||lt(d,lo)){var v=Se({datas:l,distX:-f,distY:-d}),p=v[0],h=v[1],g=Math.min(i||1/0,n+s[0]*p),m=Math.min(a||1/0,r+s[1]*h);return[g-n,m-r]}return[0,0]}function Lu(t,e,n,r,i,a,s,o){for(var l=oe(t.state),c=t.props.keepRatio,u=0,d=0,f=0;f<2;++f){var v=e(u,d),p=em(t,v,i,c,s,o),h=p.width,g=p.height,m=h.isBound,_=g.isBound,b=h.offset,E=g.offset;if(f===1&&(m||(b=0),_||(E=0)),f===0&&s&&!m&&!_)return[0,0];if(c){var S=Math.abs(b)*(n?1/n:1),x=Math.abs(E)*(r?1/r:1),C=m&&_?S<x:_||!m&&S<x;C?b=n*E/r:E=r*b/n}u+=b,d+=E}if(i[0]&&i[1]){var D=Z0(t,l,i,a,o),w=D.maxWidth,k=D.maxHeight,T=rm(t,e(u,d).map(function(P){return P.map(function(A){return lt(A,lo)})}),n+u,r+d,w,k,i,s,o),b=T[0],E=T[1];u+=b,d+=E}return[u,d]}function nm(t,e,n){if(!Zr(t,"rotatable"))return{isSnap:!1,rotation:n};var r=e.pos1,i=e.pos2,a=e.pos3,s=e.pos4,o=e.origin,l=n*Math.PI/180,c=[r,i,a,s].map(function(v){return Z(v,o)}),u=c.map(function(v){return Sn(v,l)}),d=J(J([],z0(t,c,u,o,n),!0),L0(t,c,u,o,n),!0);d.sort(function(v,p){return Math.abs(v-n)-Math.abs(p-n)});var f=d.length>0;return{isSnap:f,rotation:f?d[0]:n}}function im(t,e,n,r,i,a,s){if(!Zr(t,"resizable"))return[0,0];var o=s.fixedDirection,l=s.nextAllMatrix,c=t.state,u=c.allMatrix,d=c.is3d;return Lu(t,function(f,v){return Nu(l||u,e+f,n+v,o,i,d)},e,n,r,i,a,s)}function am(t,e,n,r,i){if(!Zr(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,l=i.fixedDirection,c=i.is3d,u=Lu(t,function(d,f){return Nu(Qg(i,ut(e,[d/a,f/s])),a,s,l,o,c)},a,s,n,o,r,i);return[u[0]/a,u[1]/s]}function om(t,e){e.absolutePoses=oe(t.state)}function Iu(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;e.indexOf(i)>-1||e.push(i)})}),e}function Bu(t,e,n,r,i,a){var s=Oo(Ki(t,a),e,n),o=s.vertical,l=s.horizontal;o.forEach(function(f){f.isBound&&r.push({type:"bounds",pos:f.pos})}),l.forEach(function(f){f.isBound&&i.push({type:"bounds",pos:f.pos})});var c=I0(t),u=c.vertical,d=c.horizontal;u.forEach(function(f){Nr(r,function(v){var p=v.type,h=v.pos;return p==="bounds"&&h===f})>=0||r.push({type:"bounds",pos:f})}),d.forEach(function(f){Nr(i,function(v){var p=v.type,h=v.pos;return p==="bounds"&&h===f})>=0||i.push({type:"bounds",pos:f})})}var sm=Co("",["resizable","scalable"]),lm={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,snapRenderThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[`:host {
    --bounds-color: #d66;
}
.guideline {
    pointer-events: none;
    z-index: 2;
}
.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}
.guideline-group {
    position: absolute;
    top: 0;
    left: 0;
}
.guideline-group .size-value {
    position: absolute;
    color: #f55;
    font-size: 12px;
    font-weight: bold;
}
.guideline-group.horizontal .size-value {
    transform-origin: 50% 100%;
    transform: translateX(-50%);
    left: 50%;
    bottom: 5px;
}
.guideline-group.vertical .size-value {
    transform-origin: 0% 50%;
    top: 50%;
    transform: translateY(-50%);
    left: 5px;
}
.guideline.gap {
    background: #f55;
}
.size-value.gap {
    color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,s=n.pos2,o=n.pos3,l=n.pos4,c=n.snapRenderInfo,u=t.props.snapRenderThreshold,d=u===void 0?1:u;if(!c||!c.render||!Zr(t,""))return[];n.guidelines=No(t);var f=Math.min(a[0],s[0],o[0],l[0]),v=Math.min(a[1],s[1],o[1],l[1]),p=c.externalPoses||[],h=oe(t.state),g=[],m=[],_=[],b=[],E=[],S=fe(h),x=S.width,C=S.height,D=S.top,w=S.left,k=S.bottom,T=S.right,M={left:w,right:T,top:D,bottom:k,center:(w+T)/2,middle:(D+k)/2},R=p.length>0,P=R?fe(p):{};if(!c.request){if(c.direction&&E.push(k0(t,h,c.direction,d)),c.snap){var A=fe(h);c.center&&(A.middle=(A.top+A.bottom)/2,A.center=(A.left+A.right)/2),E.push(yu(t,A,d))}R&&(c.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),E.push(yu(t,P,d))),E.forEach(function(z){var N=z.vertical.posInfos,G=z.horizontal.posInfos;g.push.apply(g,N.filter(function(K){var H=K.guidelineInfos;return H.some(function($){var W=$.guideline;return!W.hide})}).map(function(K){return{type:"snap",pos:K.pos}})),m.push.apply(m,G.filter(function(K){var H=K.guidelineInfos;return H.some(function($){var W=$.guideline;return!W.hide})}).map(function(K){return{type:"snap",pos:K.pos}})),_.push.apply(_,Iu(N)),b.push.apply(b,Iu(G))})}Bu(t,[w,T],[D,k],g,m),R&&Bu(t,[P.left,P.right],[P.top,P.bottom],g,m,c.externalBounds);var L=J(J([],_,!0),b,!0),F=L.filter(function(z){return z.element&&!z.gapRects}),B=L.filter(function(z){return z.gapRects}).sort(function(z,N){return z.gap-N.gap});return X(t,"onSnap",{guidelines:L.filter(function(z){var N=z.element;return!N}),elements:F,gaps:B},!0),J(J(J(J(J(J([],W0(t,F,[f,v],M,e),!0),Y0(t,B,[f,v],M,e),!0),Tu(t,"horizontal",b,[i,r],M,e),!0),Tu(t,"vertical",_,[i,r],M,e),!0),ku(t,"horizontal",m,f,r,x,0,e),!0),ku(t,"vertical",g,v,i,C,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},$i(t)},drag:function(t){var e=t.state;$i(t)||(e.guidelines=No(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(sm(t,e)||zo(t,e))return!0;if(!e.isRequest&&e.inputEvent)return It(e.inputEvent.target,Q("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,$i(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,$i(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Fu(t,e,n,r){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,l=pr(t.props,e).zoom,c=o>0?1:-1,u=s/Math.PI*180,d={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var v=f.renderDirectionMap;return n.forEach(function(p){var h=p.dir;d[h]=!0}),n.map(function(p){var h=p.data,g=p.classNames,m=p.dir,_=fo[m];if(!_||!d[m])return null;v[m]=!0;var b=(lt(u,15)+c*Kc[m]+720)%180,E={};return Ke(h).forEach(function(S){E["data-".concat(S)]=h[S]}),r.createElement("div",O({className:Q.apply(void 0,J(["control","direction",m,e],g,!1)),"data-rotation":b,"data-direction":m},E,{key:"direction-".concat(m),style:mo.apply(void 0,J([s,l],_.map(function(S){return a[S]}),!1))}))})}function zu(t,e,n,r){var i=pr(t.props,n).renderDirections,a=i===void 0?e:i;if(!a)return[];var s=a===!0?uo:a;return Fu(t,n,s.map(function(o){return{data:{},classNames:[],dir:o}}),r)}function cm(t,e){var n=t.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var r=t.getState(),i=r.renderPoses,a=r.rotation,s=r.direction,o=n.renderDirectionMap,l=t.props.zoom,c=s>0?1:-1,u=a/Math.PI*180;return Ke(o).map(function(d){var f=fo[d];if(!f)return null;var v=(lt(u,15)+c*Kc[d]+720)%180;return e.createElement("div",{className:Q("around-control"),"data-rotation":v,"data-direction":d,key:"direction-around-".concat(d),style:mo.apply(void 0,J([a,l],f.map(function(p){return i[p]}),!1))})})}function Kn(t,e,n,r,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var l=Mt(n,r),c=e?lt(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Q.apply(void 0,J(["line","direction",e?"edge":"",e],s,!1)),"data-rotation":c,"data-line-key":a,"data-direction":e,style:Fn(n,r,i,l)})}function Gu(t,e,n,r,i){var a=n===!0?Wg:n;return a.map(function(s,o){var l=fo[s],c=l[0],u=l[1];if(u!=null)return Kn(t,s,r[c],r[u],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function Ku(t){return function(e,n){var r=pr(e.props,t).edge;return r&&(r===!0||r.length)?J(J([],Gu(n,t,r,e.getState().renderPoses,e.props.zoom),!0),um(e,t,n),!0):Wu(e,t,n)}}function Wu(t,e,n){return zu(t,uo,e,n)}function um(t,e,n){return zu(t,["nw","ne","sw","se"],e,n)}var te={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},requestStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.throttleDragRotate,i=n.zoom,a=t.getState(),s=a.dragInfo,o=a.beforeOrigin;if(!r||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var c=ge(l),u=Mt(l,[0,0]);return[e.createElement("div",{className:Q("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(o[0],"px, ").concat(o[1],"px) rotate(").concat(u,"rad) scaleY(").concat(i,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],vr(t,e),ki(e,"translate"),om(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var l=it(t,e,O({set:function(u){n.startValue=u}},Mi(e))),c=r||X(t,"onDragStart",l);return c!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?l:!1},drag:function(t,e){if(e){wi(e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.isRequest,o=e.deltaOffset,l=e.distX,c=e.distY,u=n.isDrag,d=n.prevDist,f=n.prevBeforeDist,v=n.startValue;if(u){o&&(l+=o[0],c+=o[1]);var p=t.props,h=p.parentMoveable,g=r?0:p.throttleDrag||0,m=r?0:p.throttleDragRotate||0,_=0,b=!1,E=!1,S=!1,x=!1;if(!r&&m>0&&(l||c)){var C=p.startDragRotate||0,D=lt(C+Mt([0,0],[l,c])*180/Math.PI,m)-C,w=c*Math.abs(Math.cos((D-90)/180*Math.PI)),k=l*Math.abs(Math.cos(D/180*Math.PI)),T=ge([k,w]);_=D*Math.PI/180,l=T*Math.cos(_),c=T*Math.sin(_)}if(!a&&!r&&!i){var M=V0(t,l,c,m,s||o,n),R=M[0],P=M[1];b=R.isSnap,E=R.isBound,S=P.isSnap,x=P.isBound;var A=R.offset,L=P.offset;l+=A,c+=L}var F=ut(Hc({datas:n,distX:l,distY:c}),v),B=ut(Hg({datas:n,distX:l,distY:c}),v);Xl(B,qt),Xl(F,qt),m||(!b&&!E&&(B[0]=lt(B[0],g),F[0]=lt(F[0],g)),!S&&!x&&(B[1]=lt(B[1],g),F[1]=lt(F[1],g)));var z=Z(F,v),N=Z(B,v),G=Z(N,d),K=Z(z,f);n.prevDist=N,n.prevBeforeDist=z,n.passDelta=G,n.passDist=N;var H=n.left+z[0],$=n.top+z[1],W=n.right-z[0],j=n.bottom-z[1],q=Di(n,"translate(".concat(B[0],"px, ").concat(B[1],"px)"),"translate(".concat(N[0],"px, ").concat(N[1],"px)"));if(po(e,q),t.state.dragInfo.dist=r?[0,0]:N,!(!r&&!h&&G.every(function(dt){return!dt})&&K.some(function(dt){return!dt}))){var et=t.state,rt=et.width,V=et.height,U=it(t,e,O({transform:q,dist:N,delta:G,translate:B,beforeDist:z,beforeDelta:K,beforeTranslate:F,left:H,top:$,right:W,bottom:j,width:rt,height:V,isPinch:a},Jt({transform:q},e)));return!r&&X(t,"onDrag",U),U}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,O(O({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=ue(t,e,{});return!n&&X(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=this.dragStart(t,e);if(!a)return!1;var s=wo(t,this,"dragStart",[r||0,i||0],e,!1,"draggable"),o=O(O({},a),{targets:t.props.targets,events:s}),l=X(t,"onDragGroupStart",o);return n.isDrag=l!==!1,n.isDrag?a:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,e),i=e.datas.passDelta,a=wo(t,this,"drag",i,e,!1,"draggable");if(r){var s=O({targets:t.props.targets,events:a},r);return X(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=wo(t,this,"dragEnd",[0,0],e,!1,"draggable");return X(t,"onDragGroupEnd",ue(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(a){return"x"in a?r=a.x-n.left:"deltaX"in a&&(r+=a.deltaX),"y"in a?i=a.y-n.top:"deltaY"in a&&(i+=a.deltaY),{datas:e,distX:r,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},Yu=Co("resizable"),Lo={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean,checkResizableError:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:Ku("resizable"),dragControlCondition:Yu,viewClassName:bo("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,l=e.datas,c=e.parentFixedDirection,u=e.parentEvent,d=su(s,i,r,l),f=t.state,v=f.target,p=f.width,h=f.height,g=f.gestos;if(!d||!v||g.resizable)return!1;g.resizable=o||t.controlGesto,!i&&vr(t,e),l.datas={},l.direction=d,l.startOffsetWidth=p,l.startOffsetHeight=h,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=f.inlineCSSWidth||f.cssWidth,l.startHeight=f.inlineCSSHeight||f.cssHeight,l.maxSize=[1/0,1/0],a||(l.minSize=[f.minOffsetWidth,f.minOffsetHeight],l.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";l.transformOrigin=m&&Ge(m)?m.split(" "):m,l.startOffsetMatrix=f.offsetMatrix,l.startTransformOrigin=f.transformOrigin,l.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!d[0]&&!d[1]||d[0]||!d[1];function _(w){l.ratio=w&&isFinite(w)?w:0}l.startPositions=oe(t.state);function b(w){l.fixedDirection=w,l.fixedPosition=kt(l.startPositions,w)}function E(w){var k=t.state,T=k.width,M=k.height;l.fixedPosition=w,l.fixedDirection=Zc(w,T,M)}function S(w){l.minSize=[xt("".concat(w[0]),0)||0,xt("".concat(w[1]),0)||0]}function x(w){var k=[w[0]||1/0,w[1]||1/0];(!Gl(k[0])||isFinite(k[0]))&&(k[0]=xt("".concat(k[0]),0)||1/0),(!Gl(k[1])||isFinite(k[1]))&&(k[1]=xt("".concat(k[1]),0)||1/0),l.maxSize=k}_(p/h),b(c||[-d[0],-d[1]]),l.setFixedDirection=b,l.setFixedPosition=E,l.setMin=S,l.setMax=x;var C=it(t,e,{direction:d,startRatio:l.ratio,set:function(w){var k=w[0],T=w[1];l.startWidth=k,l.startHeight=T},setMin:S,setMax:x,setRatio:_,setFixedDirection:b,setFixedPosition:E,setOrigin:function(w){l.transformOrigin=w},dragStart:te.dragStart(t,new Hr().dragStart([0,0],e))}),D=u||X(t,"onResizeStart",C);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,D!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:d}),l.isResize?C:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,l=e.parentDist,c=e.isRequest,u=e.isGroup,d=e.parentEvent,f=e.resolveMatrix,v=r.isResize,p=r.transformOrigin,h=r.startWidth,g=r.startHeight,m=r.prevWidth,_=r.prevHeight,b=r.minSize,E=r.maxSize,S=r.ratio,x=r.startOffsetWidth,C=r.startOffsetHeight,D=r.isWidth;if(!v)return;if(f){var w=t.state.is3d,k=r.startOffsetMatrix,T=r.startTransformOrigin,M=w?4:3,R=Mn(Xc(e)),P=Math.sqrt(R.length);M!==P&&(R=xe(R,P,M));var A=In(k,R,T,M),L=$e(A,x,C,M);r.startPositions=L,r.nextTargetMatrix=R,r.nextAllMatrix=A}var F=pr(t.props,"resizable"),B=F.resizeFormat,z=F.throttleResize,N=z===void 0?i?0:1:z,G=F.parentMoveable,K=F.keepRatioFinally,H=r.direction,$=H,W=0,j=0;!H[0]&&!H[1]&&($=[1,1]);var q=S&&(s??F.keepRatio)||!1;function et(){var _t=r.fixedDirection,St=hu($,q,r,e);W=St.distWidth,j=St.distHeight;var ee=$[0]-_t[0]||q?Math.max(x+W,qt):x,se=$[1]-_t[1]||q?Math.max(C+j,qt):C;return q&&x&&C&&(D?se=ee/S:ee=se*S),[ee,se]}var rt=et(),V=rt[0],U=rt[1];d||(r.setFixedDirection(r.fixedDirection),X(t,"onBeforeResize",it(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(_t){var St;return r.setFixedDirection(_t),St=et(),V=St[0],U=St[1],[V,U]},setFixedPosition:function(_t){var St;return r.setFixedPosition(_t),St=et(),V=St[0],U=St[1],[V,U]},boundingWidth:V,boundingHeight:U,setSize:function(_t){V=_t[0],U=_t[1]}},!0)));var dt=o;o||(!i&&a?dt=qc(t,[0,0]):dt=r.fixedPosition);var ot=[0,0];a||(ot=im(t,V,U,H,dt,c,r)),l&&(!l[0]&&(ot[0]=0),!l[1]&&(ot[1]=0));function Rt(){var _t;B&&(_t=B([V,U]),V=_t[0],U=_t[1]),V=lt(V,N),U=lt(U,N)}if(q){$[0]&&$[1]&&ot[0]&&ot[1]&&(Math.abs(ot[0])>Math.abs(ot[1])?ot[1]=0:ot[0]=0);var ht=!ot[0]&&!ot[1];ht&&Rt(),$[0]&&!$[1]||ot[0]&&!ot[1]||ht&&D?(V+=ot[0],U=V/S):(!$[0]&&$[1]||!ot[0]&&ot[1]||ht&&!D)&&(U+=ot[1],V=U*S)}else V+=ot[0],U+=ot[1],V=Math.max(0,V),U=Math.max(0,U);n=Jp([V,U],b,E,q?S:!1),V=n[0],U=n[1],Rt(),q&&(u||K)&&(D?U=V/S:V=U*S),W=V-x,j=U-C;var vt=[W-m,j-_];r.prevWidth=W,r.prevHeight=j;var mt=t0(t,V,U,dt,p,r);if(!(!G&&vt.every(function(_t){return!_t})&&mt.every(function(_t){return!_t}))){var st=te.drag(t,Ln(e,t.state,mt,!!a,!1,"draggable")),ct=st.transform,pt=h+W,Ht=g+j,gt=it(t,e,O({width:pt,height:Ht,offsetWidth:Math.round(V),offsetHeight:Math.round(U),startRatio:S,boundingWidth:V,boundingHeight:U,direction:H,dist:[W,j],delta:vt,isPinch:!!a,drag:st},cu({style:{width:"".concat(pt,"px"),height:"".concat(Ht,"px")},transform:ct},st,e)));return!d&&X(t,"onResize",gt),gt}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var l=t.state,c=l.width,u=l.height,d=c-(i+s),f=u-(a+o),v=Math.abs(d)>3,p=Math.abs(f)>3;if(v&&(n.startWidth+=d,n.startOffsetWidth+=d,n.prevWidth+=d),p&&(n.startHeight+=f,n.startOffsetHeight+=f,n.prevHeight+=f),v||p)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=ue(t,e,{});return!r&&X(t,"onResizeEnd",i),i}},dragGroupControlCondition:Yu,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,O(O({},e),{isGroup:!0}));if(!r)return!1;var i=ye(t,"resizable",e);function a(p,h){var g=n.fixedDirection,m=n.fixedPosition,_=h.datas.startPositions||oe(p.state),b=kt(_,g),E=Gt(Ir(-t.rotation/180*Math.PI,3),[b[0]-m[0],b[1]-m[1],1],3),S=E[0],x=E[1];return h.datas.originalX=S,h.datas.originalY=x,h}var s=n.startOffsetWidth,o=n.startOffsetHeight;function l(){var p=n.minSize;i.forEach(function(h){var g=h.datas,m=g.minSize,_=g.startOffsetWidth,b=g.startOffsetHeight,E=s*(_?m[0]/_:0),S=o*(b?m[1]/b:0);p[0]=Math.max(p[0],E),p[1]=Math.max(p[1],S)})}function c(){var p=n.maxSize;i.forEach(function(h){var g=h.datas,m=g.maxSize,_=g.startOffsetWidth,b=g.startOffsetHeight,E=s*(_?m[0]/_:0),S=o*(b?m[1]/b:0);p[0]=Math.min(p[0],E),p[1]=Math.min(p[1],S)})}var u=Ae(t,this,"dragControlStart",e,function(p,h){return a(p,h)});l(),c();var d=function(p){r.setFixedDirection(p),u.forEach(function(h,g){h.setFixedDirection(p),a(h.moveable,i[g])})};n.setFixedDirection=d;var f=O(O({},r),{targets:t.props.targets,events:u.map(function(p){return O(O({},p),{setMin:function(h){p.setMin(h),l()},setMax:function(h){p.setMax(h),c()}})}),setFixedDirection:d,setMin:function(p){r.setMin(p),l()},setMax:function(p){r.setMax(p),c()}}),v=X(t,"onResizeGroupStart",f);return n.isResize=v!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=pr(t.props,"resizable");Li(t,"onBeforeResize",function(v){X(t,"onBeforeResizeGroup",it(t,e,O(O({},v),{targets:r.targets}),!0))});var i=this.dragControl(t,O(O({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,l=r.keepRatio,c=[a/(a-o[0]),s/(s-o[1])],u=n.fixedPosition,d=Ae(t,this,"dragControl",e,function(v,p){var h=Gt(Ir(t.rotation/180*Math.PI,3),[p.datas.originalX*c[0],p.datas.originalY*c[1],1],3),g=h[0],m=h[1];return O(O({},p),{parentDist:null,parentScale:c,dragClient:ut(u,[g,m]),parentKeepRatio:l})}),f=O({targets:r.targets,events:d},i);return X(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=Ae(t,this,"dragControlEnd",e),a=ue(t,e,{targets:t.props.targets,events:i});return X(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(a){var s;return{datas:e,parentDirection:a.direction||[1,1],parentIsWidth:(s=a?.horizontal)!==null&&s!==void 0?s:!0}},request:function(a){return"offsetWidth"in a?n=a.offsetWidth-i.offsetWidth:"deltaWidth"in a&&(n+=a.deltaWidth),"offsetHeight"in a?r=a.offsetHeight-i.offsetHeight:"deltaHeight"in a&&(r+=a.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:a.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function Io(t,e,n,r,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,l=e.origin,c=Bt(t.state.rootMatrix,Z([l[0],l[1]],a?[0,0]:[s.left,s.top]),o),u=ut([i.left,i.top],c);e.startAbsoluteOrigin=u,e.prevDeg=Mt(u,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Re(u,[n,r])}function Hi(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function Bo(t,e,n,r){return Hi(Mt(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function Fo(t,e,n,r,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,l=n.prevSnapDeg,c=0,u=!1;if(a){var d=nm(t,e,r);u=d.isSnap,c=i+d.rotation}u||(c=lt(i+r,o));var f=c-i;return n.prevSnapDeg=f,[f-l,f,c]}function $u(t,e,n){var r=e[0],i=e[1],a=e[2],s=e[3];if(t==="none")return[];if(zt(t))return t.map(function(h){return $u(h,[r,i,a,s],n)[0]});var o=(t||"top").split("-"),l=o[0],c=o[1],u=[r,i];l==="left"?u=[a,r]:l==="right"?u=[i,s]:l==="bottom"&&(u=[s,a]);var d=[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2],f=au(u,n);if(c){var v=c==="top"||c==="left",p=l==="bottom"||l==="left";d=u[v&&!p||!v&&p?0:1]}return[[d,f]]}function zo(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(It(n,Q("rotation-control"))||It(n,Q("around-control"))||It(n,Q("control"))&&It(n,Q("rotatable")))return!0;var r=t.props.rotationTarget;return r?xo(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var dm=uo.map(function(t){var e="",n="",r="center",i="center";return t.indexOf("n")>-1&&(e="top: -20px;",i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: -20px;",r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),fm=`.rotation {
    position: absolute;
    height: 40px;
    width: 1px;
    transform-origin: 50% 100%;
    height: calc(40px * var(--zoom));
    top: auto;
    left: 0;
    bottom: 100%;
    will-change: transform;
}
.rotation .rotation-line {
    display: block;
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
}
.rotation .rotation-control {
    border-color: #4af;
    border-color: var(--moveable-color);
    background:#fff;
    cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
    cursor: alias;
}
.around-control {
    position: absolute;
    will-change: transform;
    width: 20px;
    height: 20px;
    left: -10px;
    top: -10px;
    box-sizing: border-box;
    background: transparent;
    z-index: 8;
    cursor: alias;
    transform-origin: center center;
}
.rotatable.direction.control.move {
    cursor: move;
}
`.concat(dm,`
`),vm={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[fm],viewClassName:function(t){return t.isDragging("rotatable")?Q("view-rotation-dragging"):""},render:function(t,e){var n=pr(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,l=n.resolveAblesWithRotatable,c=t.getState(),u=c.renderPoses,d=c.direction;if(!r)return null;var f=$u(i,u,d),v=[];if(f.forEach(function(m,_){var b=m[0],E=m[1];v.push(e.createElement("div",{key:"rotation".concat(_),className:Q("rotation"),style:{transform:"translate(-50%) translate(".concat(b[0],"px, ").concat(b[1],"px) rotate(").concat(E,"rad)")}},e.createElement("div",{className:Q("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Q("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var p=Ke(l||{}),h={};p.forEach(function(m){l[m].forEach(function(_){h[_]=m})});var g=[];zt(s)&&(g=s.map(function(m){var _=h[m];return{data:_?{resolve:_}:{},classNames:_?["move"]:[],dir:m}})),v.push.apply(v,Fu(t,"rotatable",g,e))}return o&&v.push.apply(v,cm(t,e)),v},dragControlCondition:zo,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,l=e.parentFlag,c=e.isPinch,u=e.isRequest,d=t.state,f=d.target,v=d.left,p=d.top,h=d.direction,g=d.beforeDirection,m=d.targetTransform,_=d.moveableClientRect,b=d.offsetMatrix,E=d.targetMatrix,S=d.allMatrix,x=d.width,C=d.height;if(!u&&!f)return!1;var D=t.getRect();i.rect=D,i.transform=m,i.left=v,i.top=p;var w=function(W){var j=t.state,q=j.allMatrix,et=j.is3d,rt=j.width,V=j.height,U=Zc(W,rt,V);i.fixedDirection=U,i.fixedPosition=Bt(q,W,et?4:3),G&&G.setFixedPosition(W)},k=function(W){i.fixedDirection=W,i.fixedPosition=Qc(t,W),G&&G.setFixedDirection(W)},T=a,M=s;if(u||c||l){var R=o||0;i.beforeInfo={origin:D.beforeOrigin,prevDeg:R,defaultDeg:R,prevSnapDeg:0,startDist:0},i.afterInfo=O(O({},i.beforeInfo),{origin:D.origin}),i.absoluteInfo=O(O({},i.beforeInfo),{origin:D.origin,startValue:R})}else{var P=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(P){var A=P.getAttribute("data-direction")||"",L=Yg[A];if(L){i.isControl=!0,i.isAroundControl=It(P,Q("around-control")),i.controlDirection=L;var F=P.getAttribute("data-resolve");F&&(i.resolveAble=F);var B=d0(d.rootMatrix,d.renderPoses,_);n=kt(B,L),T=n[0],M=n[1]}}i.beforeInfo={origin:D.beforeOrigin},i.afterInfo={origin:D.origin},i.absoluteInfo={origin:D.origin,startValue:D.rotation};var z=w;w=function(W){var j=d.is3d?4:3,q=ut(ql(E,j),W),et=q[0],rt=q[1],V=Gt(b,lr([et,rt],j)),U=Gt(S,lr([W[0],W[1]],j));z(W);var dt=d.posDelta;i.beforeInfo.origin=Z(V,dt),i.afterInfo.origin=Z(U,dt),i.absoluteInfo.origin=Z(U,dt),Io(t,i.beforeInfo,T,M,_),Io(t,i.afterInfo,T,M,_),Io(t,i.absoluteInfo,T,M,_)},k=function(W){var j=kt([[0,0],[x,0],[0,C],[x,C]],W);w(j)}}i.startClientX=T,i.startClientY=M,i.direction=h,i.beforeDirection=g,i.startValue=0,i.datas={},ki(e,"rotate");var N=!1,G=!1;if(i.isControl&&i.resolveAble){var K=i.resolveAble;K==="resizable"&&(G=Lo.dragControlStart(t,O(O({},new Hr("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}G||(N=te.dragStart(t,new Hr().dragStart([0,0],e))),w(d.transformOrigin);var H=it(t,e,O(O({set:function(W){i.startValue=W*Math.PI/180},setFixedDirection:k,setFixedPosition:w},Mi(e)),{dragStart:N,resizeStart:G})),$=X(t,"onRotateStart",H);return i.isRotate=$!==!1,d.snapRenderInfo={request:e.isRequest},i.isRotate?H:!1},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,l=e.parentRotate,c=e.parentFlag,u=e.isPinch,d=e.groupDelta,f=a.beforeDirection,v=a.beforeInfo,p=a.afterInfo,h=a.absoluteInfo,g=a.isRotate,m=a.startValue,_=a.rect,b=a.startClientX,E=a.startClientY;if(g){wi(e,"rotate");var S=$g(e),x=f*S,C=t.props.parentMoveable,D=0,w,k,T=0,M,R,P=0,A,L,F=180/Math.PI*m,B=h.startValue,z=!1,N=b+s,G=E+o;if(!c&&"parentDist"in e){var K=e.parentDist;w=K,M=K,A=K}else u||c?(w=Hi(l,f,v),M=Hi(l,x,p),A=Hi(l,x,h)):(w=Bo(N,G,f,v),M=Bo(N,G,x,p),A=Bo(N,G,x,h),z=!0);if(k=F+w,R=F+M,L=B+A,X(t,"onBeforeRotate",it(t,e,{beforeRotation:k,rotation:R,absoluteRotation:L,setRotation:function(dt){M=dt-F,w=M,A=M}},!0)),n=Fo(t,_,v,w,F,z),D=n[0],w=n[1],k=n[2],r=Fo(t,_,p,M,F,z),T=r[0],M=r[1],R=r[2],i=Fo(t,_,h,A,B,z),P=i[0],A=i[1],L=i[2],!(!P&&!T&&!D&&!C)){var H=Di(a,"rotate(".concat(R,"deg)"),"rotate(".concat(M,"deg)")),$=Jg(t,M,a),W=Z(ut(d||[0,0],$),a.prevInverseDist||[0,0]);a.prevInverseDist=$,a.requestValue=null;var j=jc(t,H,W,u,e),q=j,et=Re([N,G],h.startAbsoluteOrigin)-h.startDist,rt=void 0;if(a.resolveAble==="resizable"){var V=Lo.dragControl(t,O(O({},Ln(e,t.state,[e.deltaX,e.deltaY],!!u,!1,"resizable")),{resolveMatrix:!0,parentDistance:et}));V&&(rt=V,q=cu(q,V,e))}var U=it(t,e,O(O({delta:T,dist:M,rotate:R,rotation:R,beforeDist:w,beforeDelta:D,beforeRotate:k,beforeRotation:k,absoluteDist:A,absoluteDelta:P,absoluteRotate:L,absoluteRotation:L,isPinch:!!u,resize:rt},j),q));return X(t,"onRotate",U),U}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ue(t,e,{});return X(t,"onRotateEnd",r),r}},dragGroupControlCondition:zo,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var l=Ae(t,this,"dragControlStart",e,function(d,f){var v=d.state,p=v.left,h=v.top,g=v.beforeOrigin,m=ut(Z([p,h],[i,a]),Z(g,s));return f.datas.startGroupClient=m,f.datas.groupClient=m,O(O({},f),{parentRotate:0})}),c=O(O({},o),{targets:t.props.targets,events:l}),u=X(t,"onRotateGroupStart",c);return n.isRotate=u!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){Li(t,"onBeforeRotate",function(c){X(t,"onBeforeRotateGroup",it(t,e,O(O({},c),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,s=a/180*Math.PI,o=Ae(t,this,"dragControl",e,function(c,u){var d=u.datas.startGroupClient,f=u.datas.groupClient,v=f[0],p=f[1],h=Sn(d,s*i),g=h[0],m=h[1],_=[g-v,m-p];return u.datas.groupClient=[g,m],O(O({},u),{parentRotate:a,groupDelta:_})});t.rotation=i*r.beforeRotation;var l=O({targets:t.props.targets,events:o,set:function(c){t.rotation=c},setGroupRotation:function(c){t.rotation=c}},r);return X(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=Ae(t,this,"dragControlEnd",e),a=ue(t,e,{targets:t.props.targets,events:i});return X(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},Hu=Co("scalable"),pm={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:Ku("scalable"),dragControlCondition:Hu,viewClassName:bo("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=su(a,r,i,n),o=t.state,l=o.width,c=o.height,u=o.targetTransform,d=o.target,f=o.pos1,v=o.pos2,p=o.pos4;if(!s||!d)return!1;r||vr(t,e),n.datas={},n.transform=u,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=l,n.startOffsetHeight=c,n.startValue=[1,1];var h=Re(f,v),g=Re(v,p),m=!s[0]&&!s[1]||s[0]||!s[1];n.scaleWidth=h,n.scaleHeight=g,n.scaleXRatio=h/l,n.scaleYRatio=g/c,ki(e,"scale"),n.isWidth=m;function _(x){n.ratio=x&&isFinite(x)?x:0}n.startPositions=oe(t.state);function b(x){n.fixedDirection=x,n.fixedPosition=kt(n.startPositions,x)}n.setFixedDirection=b,_(Re(f,v)/Re(v,p)),b([-s[0],-s[1]]);var E=it(t,e,O(O({direction:s,set:function(x){n.startValue=x},setRatio:_,setFixedDirection:b},Mi(e)),{dragStart:te.dragStart(t,new Hr().dragStart([0,0],e))})),S=X(t,"onScaleStart",E);return n.startFixedDirection=n.fixedDirection,S!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?E:!1},dragControl:function(t,e){wi(e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,l=n.prevDist,c=n.direction,u=n.startOffsetWidth,d=n.startOffsetHeight,f=n.isScale,v=n.startValue,p=n.isWidth,h=n.ratio;if(!f)return!1;var g=t.props,m=g.throttleScale,_=g.parentMoveable,b=c;!c[0]&&!c[1]&&(b=[1,1]);var E=h&&(r??g.keepRatio)||!1,S=t.state;function x(){var G=hu(b,E,n,e),K=G.distWidth,H=G.distHeight,$=u?(u+K)/u:1,W=d?(d+H)/d:1;return $=b[0]||E?$*v[0]:v[0],W=b[1]||E?W*v[1]:v[1],$===0&&($=(l[0]>0?1:-1)*Si),W===0&&(W=(l[1]>0?1:-1)*Si),[$,W]}var C=x();if(!a&&t.props.groupable){var D=S.snapRenderInfo||{},w=D.direction;zt(w)&&(w[0]||w[1])&&(S.snapRenderInfo={direction:c,request:e.isRequest})}X(t,"onBeforeScale",it(t,e,{scale:C,setFixedDirection:function(G){return n.setFixedDirection(G),C=x(),C},startFixedDirection:n.startFixedDirection,setScale:function(G){C=G}},!0));var k=[C[0]/v[0],C[1]/v[1]],T=s,M=[0,0];if(s||(!i&&a?T=qc(t,[0,0]):T=n.fixedPosition),a||(M=am(t,k,c,o,n)),E){b[0]&&b[1]&&M[0]&&M[1]&&(Math.abs(M[0]*u)>Math.abs(M[1]*d)?M[1]=0:M[0]=0);var R=!M[0]&&!M[1];if(R&&(p?k[0]=lt(k[0]*v[0],m)/v[0]:k[1]=lt(k[1]*v[1],m)/v[1]),b[0]&&!b[1]||M[0]&&!M[1]||R&&p){k[0]+=M[0];var P=u*k[0]*v[0]/h;k[1]=P/d/v[1]}else if(!b[0]&&b[1]||!M[0]&&M[1]||R&&!p){k[1]+=M[1];var A=d*k[1]*v[1]*h;k[0]=A/u/v[0]}}else k[0]+=M[0],k[1]+=M[1],M[0]||(k[0]=lt(k[0]*v[0],m)/v[0]),M[1]||(k[1]=lt(k[1]*v[1],m)/v[1]);k[0]===0&&(k[0]=(l[0]>0?1:-1)*Si),k[1]===0&&(k[1]=(l[1]>0?1:-1)*Si);var L=[k[0]/l[0],k[1]/l[1]];C=r0(k,v);var F=qg(t,k,n.fixedDirection,T,n),B=Z(F,n.prevInverseDist||[0,0]);if(n.prevDist=k,n.prevInverseDist=F,C[0]===l[0]&&C[1]===l[1]&&B.every(function(G){return!G})&&!_)return!1;var z=Di(n,"scale(".concat(C.join(", "),")"),"scale(".concat(k.join(", "),")")),N=it(t,e,O({offsetWidth:u,offsetHeight:d,direction:c,scale:C,dist:k,delta:L,isPinch:!!a},jc(t,z,B,a,e)));return X(t,"onScale",N),N},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ue(t,e,{});return X(t,"onScaleEnd",r),r},dragGroupControlCondition:Hu,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=ye(t,"resizable",e);function a(u,d){var f=n.fixedDirection,v=n.fixedPosition,p=d.datas.startPositions||oe(u.state),h=kt(p,f),g=Gt(Ir(-t.rotation/180*Math.PI,3),[h[0]-v[0],h[1]-v[1],1],3),m=g[0],_=g[1];return d.datas.originalX=m,d.datas.originalY=_,d}n.moveableScale=t.scale;var s=Ae(t,this,"dragControlStart",e,function(u,d){return a(u,d)}),o=function(u){r.setFixedDirection(u),s.forEach(function(d,f){d.setFixedDirection(u),a(d.moveable,i[f])})};n.setFixedDirection=o;var l=O(O({},r),{targets:t.props.targets,events:s,setFixedDirection:o}),c=X(t,"onScaleGroupStart",l);return n.isScale=c!==!1,n.isScale?l:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){Li(t,"onBeforeScale",function(d){X(t,"onBeforeScaleGroup",it(t,e,O(O({},d),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.moveableScale;t.scale=[r.scale[0]*i[0],r.scale[1]*i[1]];var a=t.props.keepRatio,s=r.dist,o=r.scale,l=n.fixedPosition,c=Ae(t,this,"dragControl",e,function(d,f){var v=Gt(Ir(t.rotation/180*Math.PI,3),[f.datas.originalX*s[0],f.datas.originalY*s[1],1],3),p=v[0],h=v[1];return O(O({},f),{parentDist:null,parentScale:o,parentKeepRatio:a,dragClient:ut(l,[p,h])})}),u=O({targets:t.props.targets,events:c},r);return X(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=Ae(t,this,"dragControlEnd",e),a=ue(t,e,{targets:t.props.targets,events:i});return X(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(r){return{datas:t,parentDirection:r.direction||[1,1]}},request:function(r){return e+=r.deltaWidth,n+=r.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:r.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function je(t,e){return t.map(function(n,r){return ir(n,e[r],1,2)})}function Vu(t,e,n){var r=Mt(t,e),i=Mt(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function hm(t,e){var n=Vu(t[0],t[1],t[2]),r=Vu(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var gm={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:bo("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,s=n.zoom;if(r||i||!a)return[];var o=t.state,l=o.pos1,c=o.pos2,u=o.pos3,d=o.pos4,f=je(l,c),v=je(c,l),p=je(l,u),h=je(u,l),g=je(u,d),m=je(d,u),_=je(c,d),b=je(d,c);return J([e.createElement("div",{className:Q("line"),key:"middeLine1",style:Fn(f,g,s)}),e.createElement("div",{className:Q("line"),key:"middeLine2",style:Fn(v,m,s)}),e.createElement("div",{className:Q("line"),key:"middeLine3",style:Fn(p,_,s)}),e.createElement("div",{className:Q("line"),key:"middeLine4",style:Fn(h,b,s)})],Wu(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return It(n,Q("direction"))&&It(n,Q("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,s=lu(a,n);if(!s||!i)return!1;var o=t.state,l=o.transformOrigin,c=o.is3d,u=o.targetTransform,d=o.targetMatrix,f=o.width,v=o.height,p=o.left,h=o.top;n.datas={},n.targetTransform=u,n.warpTargetMatrix=c?d:xe(d,3,4),n.targetInverseMatrix=Ql(he(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=p,n.top=h,n.poses=[[0,0],[f,0],[0,v],[f,v]].map(function(_){return Z(_,l)}),n.nextPoses=n.poses.map(function(_){var b=_[0],E=_[1];return Gt(n.warpTargetMatrix,[b,E,0,1],4)}),n.startValue=Dt(4),n.prevMatrix=Dt(4),n.absolutePoses=oe(o),n.posIndexes=Vc(s),vr(t,e),ki(e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var g=it(t,e,O({set:function(_){n.startValue=_}},Mi(e))),m=X(t,"onWarpStart",g);return m!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,l=n.isWarp,c=n.startValue,u=n.poses,d=n.posIndexes,f=n.absolutePoses;if(!l)return!1;if(wi(e,"matrix3d"),Zr(t,"warpable")){var v=d.map(function(w){return f[w]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var p=Yi(t,r,{horizontal:v.map(function(w){return w[1]+a}),vertical:v.map(function(w){return w[0]+i})}),h=p.horizontal,g=p.vertical;a-=h.offset,i-=g.offset}var m=Se({datas:n,distX:i,distY:a},!0),_=n.nextPoses.slice();if(d.forEach(function(w){_[w]=ut(_[w],m)}),!Kg.every(function(w){return hm(w.map(function(k){return u[k]}),w.map(function(k){return _[k]}))}))return!1;var b=za(u[0],u[2],u[1],u[3],_[0],_[2],_[1],_[3]);if(!b.length)return!1;var E=yt(s,b,4),S=$c(n,E,!0),x=yt(he(o,4),S,4);n.prevMatrix=S;var C=yt(c,S,4),D=Di(n,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(S.join(", "),")"));return po(e,D),X(t,"onWarp",it(t,e,O({delta:x,matrix:C,dist:S,multiply:yt,transform:D},Jt({transform:D},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,X(t,"onWarpEnd",ue(t,e,{})),r):!1}},mm=Q("area-pieces"),Vi=Q("area-piece"),Xu=Q("avoid"),ym=Q("view-dragging");function Go(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;Zl(e,Xu),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function ju(t){return t.createElement("div",{key:"area_pieces",className:mm},t.createElement("div",{className:Vi}),t.createElement("div",{className:Vi}),t.createElement("div",{className:Vi}),t.createElement("div",{className:Vi}))}var Uu={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,s=n.passDragArea,o=t.getState(),l=o.width,c=o.height,u=o.renderPoses,d=s?Q("area","pass"):Q("area");if(a)return[e.createElement("div",{key:"area",ref:Ce(t,"areaElement"),className:d}),ju(e)];if(!r||!i)return[];var f=za([0,0],[l,0],[0,c],[l,c],u[0],u[1],u[2],u[3]),v=f.length?Ai(f,!0):"none";return[e.createElement("div",{key:"area",ref:Ce(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(c,"px"),transformOrigin:"0 0",transform:v}}),ju(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,l=o.moveableClientRect,c=o.renderPoses,u=o.rootMatrix,d=o.is3d,f=l.left,v=l.top,p=fe(c),h=p.left,g=p.top,m=p.width,_=p.height,b=d?4:3,E=hr(u,[r-f,i-v],b),S=E[0],x=E[1];S-=h,x-=g;var C=[{left:h,top:g,width:m,height:x-10},{left:h,top:g,width:S-10,height:_},{left:h,top:g+x+10,width:m,height:_-x-10},{left:h+S+10,top:g,width:m-S-10,height:_}],D=[].slice.call(s.nextElementSibling.children);C.forEach(function(w,k){D[k].style.cssText="left: ".concat(w.left,"px;top: ").concat(w.top,"px; width: ").concat(w.width,"px; height: ").concat(w.height,"px;")}),Ul(s,Xu),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,Go(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||Go(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Go(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&Hl(function(){e.disableNativeEvent=!1})}},_m=Nn("origin",{render:function(t,e){var n=t.props.zoom,r=t.getState(),i=r.beforeOrigin,a=r.rotation;return[e.createElement("div",{className:Q("control","origin"),style:mo(a,n,i),key:"beforeOrigin"})]}});function Em(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var bm={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,scrollThrottleTime:Number,getScrollPosition:Function,scrollOptions:Object},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,s=new Pc,o=gr(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var l=e.isControl?"controlGesto":"targetGesto",c=e.targets;s.on("scroll",function(u){var d=u.container,f=u.direction,v=it(t,e,{scrollContainer:d,direction:f}),p=c?"onScrollGroup":"onScroll";c&&(v.targets=c),X(t,p,v)}).on("move",function(u){var d=u.offsetX,f=u.offsetY,v=u.inputEvent;t[l].scrollBy(d,f,v.inputEvent,!0)}).on("scrollDrag",function(u){var d=u.next;d(t[l].getCurrentEvent())}),s.dragStart(e,O({container:o},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,s=r.scrollThreshold,o=s===void 0?0:s,l=r.scrollThrottleTime,c=l===void 0?0:l,u=r.getScrollPosition,d=u===void 0?Em:u,f=r.scrollOptions;return n.drag(e,O({container:a,threshold:o,throttleTime:c,getScrollPosition:function(v){return d({scrollContainer:v.container,direction:v.direction})}},f)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,O(O({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,O(O({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,O(O({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,O(O({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,O(O({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,O(O({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,O(O({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},Zu={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object,persistData:Object,useAccuratePosition:Boolean,firstRenderState:Object,linePadding:Boolean},events:{onChangeTargets:"changeTargets"}},Cm=Nn("padding",{render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},i=r.left,a=i===void 0?0:i,s=r.top,o=s===void 0?0:s,l=r.right,c=l===void 0?0:l,u=r.bottom,d=u===void 0?0:u,f=t.getState(),v=f.renderPoses,p=f.pos1,h=f.pos2,g=f.pos3,m=f.pos4,_=[p,h,g,m],b=[];return a>0&&b.push([0,2]),o>0&&b.push([0,1]),c>0&&b.push([1,3]),d>0&&b.push([2,3]),b.map(function(E,S){var x=E[0],C=E[1],D=_[x],w=_[C],k=v[x],T=v[C],M=za([0,0],[100,0],[0,100],[100,100],D,w,k,T);if(M.length)return e.createElement("div",{key:"padding".concat(S),className:Q("padding"),style:{transform:Ai(M,!0)}})})}}),Qu=["nw","ne","se","sw"];function Xi(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var xm=[1,2,5,6],Sm=[0,3,4,7],mr=[1,-1,-1,1],yr=[1,1,-1,-1];function Ko(t,e,n,r,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=n),o===void 0&&(o=r);var l=[],c=!1,u=t.filter(function(f){return!f.virtual}),d=u.map(function(f){var v=f.horizontal,p=f.vertical,h=f.pos;if(p&&!c&&(c=!0,l.push("/")),c){var g=Math.max(0,p===1?h[1]-a:o-h[1]);return l.push(me(g,r,e)),g}else{var g=Math.max(0,v===1?h[0]-i:s-h[0]);return l.push(me(g,n,e)),g}});return{radiusPoses:u,styles:l,raws:d}}function qu(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function Ju(t,e,n,r,i,a,s){var o,l,c,u;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var d=t.indexOf("/"),f=(d>-1?t.slice(0,d):t).length,v=t.slice(0,f),p=t.slice(f+1),h=v.length,g=p.length,m=g>0,_=v[0],b=_===void 0?"0px":_,E=v[1],S=E===void 0?b:E,x=v[2],C=x===void 0?b:x,D=v[3],w=D===void 0?S:D,k=p[0],T=k===void 0?b:k,M=p[1],R=M===void 0?m?T:S:M,P=p[2],A=P===void 0?m?T:C:P,L=p[3],F=L===void 0?m?R:w:L,B=[b,S,C,w].map(function($){return xt($,e)}),z=[T,R,A,F].map(function($){return xt($,n)}),N=B.slice(),G=z.slice();o=Xi([N[0],N[1]],e),N[0]=o[0],N[1]=o[1],l=Xi([N[3],N[2]],e),N[3]=l[0],N[2]=l[1],c=Xi([G[0],G[3]],n),G[0]=c[0],G[3]=c[1],u=Xi([G[1],G[2]],n),G[1]=u[0],G[2]=u[1];var K=s?N:N.slice(0,Math.max(a[0],h)),H=s?G:G.slice(0,Math.max(a[1],g));return J(J([],K.map(function($,W){var j=Qu[W];return{virtual:W>=h,horizontal:mr[W],vertical:0,pos:[r+$,i+(yr[W]===-1?n:0)],sub:!0,raw:B[W],direction:j}}),!0),H.map(function($,W){var j=Qu[W];return{virtual:W>=g,horizontal:0,vertical:yr[W],pos:[r+(mr[W]===-1?e:0),i+$],sub:!0,raw:z[W],direction:j}}),!0)}function wm(t,e,n,r,i){i===void 0&&(i=e.length);var a=qu(t.slice(r)),s=a.horizontalRange,o=a.verticalRange,l=n-r,c=0;if(l===0)c=i;else if(l>0&&l<s[1])c=s[1]-l;else if(l>=o[0])c=o[0]+o[1]-l;else return;t.splice(n,c),e.splice(n,c)}function Dm(t,e,n,r,i,a,s,o,l,c,u){c===void 0&&(c=0),u===void 0&&(u=0);var d=qu(t.slice(n)),f=d.horizontalRange,v=d.verticalRange;if(r>-1)for(var p=mr[r]===1?a-c:o-a,h=f[1];h<=r;++h){var g=yr[h]===1?u:l,m=0;if(r===h?m=a:h===0?m=c+p:mr[h]===-1&&(m=o-(e[n][0]-c)),t.splice(n+h,0,{horizontal:mr[h],vertical:0,pos:[m,g]}),e.splice(n+h,0,[m,g]),h===0)break}else if(i>-1){var _=yr[i]===1?s-u:l-s;if(f[1]===0&&v[1]===0){var b=[c+_,u];t.push({horizontal:mr[0],vertical:0,pos:b}),e.push(b)}for(var E=v[0],h=v[1];h<=i;++h){var m=mr[h]===1?c:o,g=0;if(i===h?g=s:h===0?g=u+_:yr[h]===1?g=e[n+E][1]:yr[h]===-1&&(g=l-(e[n+E][1]-u)),t.push({horizontal:0,vertical:yr[h],pos:[m,g]}),e.push([m,g]),h===0)break}}}function Mm(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var km=[[0,-1,"n"],[1,0,"e"]],Tm=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Wo(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,l=o.type,c=o.poses,u=l==="rect",d=l==="circle";if(l==="polygon")return n.map(function(x){return"".concat(me(x[0],a,r)," ").concat(me(x[1],s,r))});if(u||l==="inset"){var f=n[1][1],v=n[3][0],p=n[7][0],h=n[5][1];if(u)return[f,v,h,p].map(function(x){return"".concat(x,"px")});var g=[f,a-v,s-h,p].map(function(x,C){return me(x,C%2?a:s,r)});if(n.length>8){var m=Z(n[4],n[0]),_=m[0],b=m[1];g.push.apply(g,J(["round"],Ko(c.slice(8).map(function(x,C){return O(O({},x),{pos:n[C]})}),r,_,b,p,f,v,h).styles,!1))}return g}else if(d||l==="ellipse"){var E=n[0],S=me(Math.abs(n[1][1]-E[1]),d?Math.sqrt((a*a+s*s)/2):s,r),g=d?[S]:[me(Math.abs(n[2][0]-E[0]),a,r),S];return g.push("at",me(E[0],a,r),me(E[1],s,r)),g}}function ji(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return Tm.map(function(s){var o=s[0],l=s[1],c=s[2],u=i[o+1],d=a[l+1];return{vertical:Math.abs(l),horizontal:Math.abs(o),direction:c,pos:[u,d]}})}function td(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[Math.abs(e[1]-e[0]),Math.abs(n[1]-n[0])]}function ed(t,e,n,r,i){var a,s,o,l,c,u,d;if(t){var f=i;if(!f){var v=getComputedStyle(t),p=v.clipPath;f=p!=="none"?p:v.clip}if(!((!f||f==="none"||f==="auto")&&(f=r,!f))){var h=Yl(f),g=h.prefix,m=g===void 0?f:g,_=h.value,b=_===void 0?"":_,E=m==="circle",S=" ";if(m==="polygon"){var x=Na(b||"0% 0%, 100% 0%, 100% 100%, 0% 100%");S=",";var C=x.map(function(st){var ct=st.split(" "),pt=ct[0],Ht=ct[1];return{vertical:1,horizontal:1,pos:[xt(pt,e),xt(Ht,n)]}}),D=Ye(C.map(function(st){return st.pos}));return{type:m,clipText:f,poses:C,splitter:S,left:D.minX,right:D.maxX,top:D.minY,bottom:D.maxY}}else if(E||m==="ellipse"){var w="",k="",T=0,M=0,x=or(b);if(E){var R="";a=x[0],R=a===void 0?"50%":a,s=x[2],w=s===void 0?"50%":s,o=x[3],k=o===void 0?"50%":o,T=xt(R,Math.sqrt((e*e+n*n)/2)),M=T}else{var P="",A="";l=x[0],P=l===void 0?"50%":l,c=x[1],A=c===void 0?"50%":c,u=x[3],w=u===void 0?"50%":u,d=x[4],k=d===void 0?"50%":d,T=xt(P,e),M=xt(A,n)}var L=[xt(w,e),xt(k,n)],C=J([{vertical:1,horizontal:1,pos:L,direction:"nesw"}],km.slice(0,E?1:2).map(function(pt){return{vertical:Math.abs(pt[1]),horizontal:pt[0],direction:pt[2],sub:!0,pos:[L[0]+pt[0]*T,L[1]+pt[1]*M]}}),!0);return{type:m,clipText:f,radiusX:T,radiusY:M,left:L[0]-T,top:L[1]-M,right:L[0]+T,bottom:L[1]+M,poses:C,splitter:S}}else if(m==="inset"){var x=or(b||"0 0 0 0"),F=x.indexOf("round"),B=(F>-1?x.slice(0,F):x).length,z=x.slice(B+1),N=x.slice(0,B),G=N[0],K=N[1],H=K===void 0?G:K,$=N[2],W=$===void 0?G:$,j=N[3],q=j===void 0?H:j,et=[G,W].map(function(pt){return xt(pt,n)}),rt=et[0],V=et[1],U=[q,H].map(function(pt){return xt(pt,e)}),dt=U[0],ot=U[1],Rt=e-ot,ht=n-V,vt=Ju(z,Rt-dt,ht-rt,dt,rt),C=J(J([],ji(rt,Rt,ht,dt),!0),vt,!0);return{type:"inset",clipText:f,poses:C,top:rt,left:dt,right:Rt,bottom:ht,radius:z,splitter:S}}else if(m==="rect"){var x=Na(b||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));S=",";var mt=x.map(function(St){var ee=hi(St).value;return ee}),rt=mt[0],ot=mt[1],V=mt[2],dt=mt[3],C=ji(rt,ot,V,dt);return{type:"rect",clipText:f,poses:C,top:rt,right:ot,bottom:V,left:dt,values:x,splitter:S}}}}}function Rm(t,e,n,r,i){var a=t[e],s=a.direction,o=a.sub,l=t.map(function(){return[0,0]}),c=s?s.split(""):[];if(r&&e<8){var u=c.filter(function(R){return R==="w"||R==="e"}),d=c.filter(function(R){return R==="n"||R==="s"}),f=u[0],v=d[0];l[e]=n;var p=td(t),h=p[0],g=p[1],m=h&&g?h/g:0;if(m&&i){var _=(e+4)%8,b=t[_].pos,E=[0,0];s.indexOf("w")>-1?E[0]=-1:s.indexOf("e")>-1&&(E[0]=1),s.indexOf("n")>-1?E[1]=-1:s.indexOf("s")>-1&&(E[1]=1);var S=pu([h,g],n,m,E,!0),x=h+S[0],C=g+S[1],D=b[1],w=b[1],k=b[0],T=b[0];E[0]===-1?k=T-x:E[0]===1?T=k+x:(k=k-x/2,T=T+x/2),E[1]===-1?D=w-C:(E[1]===1||(D=w-C/2),w=D+C);var M=ji(D,T,w,k);t.forEach(function(R,P){l[P][0]=M[P].pos[0]-R.pos[0],l[P][1]=M[P].pos[1]-R.pos[1]})}else t.forEach(function(R,P){var A=R.direction;A&&(A.indexOf(f)>-1&&(l[P][0]=n[0]),A.indexOf(v)>-1&&(l[P][1]=n[1]))}),f&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),v&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else s&&!o?c.forEach(function(R){var P=R==="n"||R==="s";t.forEach(function(A,L){var F=A.direction,B=A.horizontal,z=A.vertical;!F||F.indexOf(R)===-1||(l[L]=[P||!B?0:n[0],!P||!z?0:n[1]])})}):l[e]=n;return l}function Om(t,e){var n=Yc(t,e),r=n[0],i=n[1],a=e.datas,s=a.clipPath,o=a.clipIndex,l=s,c=l.type,u=l.poses,d=l.splitter,f=u.map(function(_){return _.pos});if(c==="polygon")f.splice(o,0,[r,i]);else if(c==="inset"){var v=xm.indexOf(o),p=Sm.indexOf(o),h=u.length;if(Dm(u,f,8,v,p,r,i,f[4][0],f[4][1],f[0][0],f[0][1]),h===u.length)return}else return;var g=Wo(t,s,f),m="".concat(c,"(").concat(g.join(d),")");X(t,"onClip",it(t,e,O({clipEventType:"added",clipType:c,poses:f,clipStyles:g,clipStyle:m,distX:0,distY:0},Jt({clipPath:m},e))))}function Pm(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,s=a.type,o=a.poses,l=a.splitter,c=o.map(function(v){return v.pos}),u=c.length;if(s==="polygon")o.splice(i,1),c.splice(i,1);else if(s==="inset"){if(i<8||(wm(o,c,i,8,u),u===o.length))return}else return;var d=Wo(t,r,c),f="".concat(s,"(").concat(d.join(l),")");X(t,"onClip",it(t,e,O({clipEventType:"removed",clipType:s,poses:c,clipStyles:d,clipStyle:f,distX:0,distY:0},Jt({clipPath:f},e))))}var Am={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[`.control.clip-control {
    background: #6d6;
    cursor: pointer;
}
.control.clip-control.clip-radius {
    background: #d66;
}
.line.clip-line {
    background: #6e6;
    cursor: move;
    z-index: 1;
}
.clip-area {
    position: absolute;
    top: 0;
    left: 0;
}
.clip-ellipse {
    position: absolute;
    cursor: move;
    border: 1px solid #6d6;
    border: var(--zoompx) solid #6d6;
    border-radius: 50%;
    transform-origin: 0px 0px;
}`,`:host {
    --bounds-color: #d66;
}`,`.guideline {
    pointer-events: none;
    z-index: 2;
}`,`.line.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,s=n.zoom,o=n.groupable,l=t.getState(),c=l.target,u=l.width,d=l.height,f=l.allMatrix,v=l.is3d,p=l.left,h=l.top,g=l.pos1,m=l.pos2,_=l.pos3,b=l.pos4,E=l.clipPathState,S=l.snapBoundInfos,x=l.rotation;if(!c||o)return[];var C=ed(c,u,d,i||"inset",E||r);if(!C)return[];var D=v?4:3,w=C.type,k=C.poses,T=k.map(function(ht){var vt=Bt(f,ht.pos,D);return[vt[0]-p,vt[1]-h]}),M=[],R=[],P=w==="rect",A=w==="inset",L=w==="polygon";if(P||A||L){var F=A?T.slice(0,8):T;R=F.map(function(ht,vt){var mt=vt===0?F[F.length-1]:F[vt-1],st=Mt(mt,ht),ct=nu(mt,ht);return e.createElement("div",{key:"clipLine".concat(vt),className:Q("line","clip-line","snap-control"),"data-clip-index":vt,style:{width:"".concat(ct,"px"),transform:"translate(".concat(mt[0],"px, ").concat(mt[1],"px) rotate(").concat(st,"rad) scaleY(").concat(s,")")}})})}if(M=T.map(function(ht,vt){return e.createElement("div",{key:"clipControl".concat(vt),className:Q("control","clip-control","snap-control"),"data-clip-index":vt,style:{transform:"translate(".concat(ht[0],"px, ").concat(ht[1],"px) rotate(").concat(x,"rad) scale(").concat(s,")")}})}),A&&M.push.apply(M,T.slice(8).map(function(ht,vt){return e.createElement("div",{key:"clipRadiusControl".concat(vt),className:Q("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+vt,style:{transform:"translate(".concat(ht[0],"px, ").concat(ht[1],"px) rotate(").concat(x,"rad) scale(").concat(s,")")}})})),w==="circle"||w==="ellipse"){var B=C.left,z=C.top,N=C.radiusX,G=C.radiusY,K=Z(Bt(f,[B,z],D),Bt(f,[0,0],D)),H=K[0],$=K[1],W="none";if(!a){for(var j=Math.max(10,N/5,G/5),q=[],et=0;et<=j;++et){var rt=Math.PI*2/j*et;q.push([N+(N-s)*Math.cos(rt),G+(G-s)*Math.sin(rt)])}q.push([N,-2]),q.push([-2,-2]),q.push([-2,G*2+2]),q.push([N*2+2,G*2+2]),q.push([N*2+2,-2]),q.push([N,-2]),W="polygon(".concat(q.map(function(ht){return"".concat(ht[0],"px ").concat(ht[1],"px")}).join(", "),")")}M.push(e.createElement("div",{key:"clipEllipse",className:Q("clip-ellipse","snap-control"),style:{width:"".concat(N*2,"px"),height:"".concat(G*2,"px"),clipPath:W,transform:"translate(".concat(-p+H,"px, ").concat(-h+$,"px) ").concat(Ai(f))}}))}if(a){var V=fe(J([g,m,_,b],T,!0)),U=V.width,dt=V.height,ot=V.left,Rt=V.top;if(L||P||A){var q=A?T.slice(0,8):T;M.push(e.createElement("div",{key:"clipArea",className:Q("clip-area","snap-control"),style:{width:"".concat(U,"px"),height:"".concat(dt,"px"),transform:"translate(".concat(ot,"px, ").concat(Rt,"px)"),clipPath:"polygon(".concat(q.map(function(vt){return"".concat(vt[0]-ot,"px ").concat(vt[1]-Rt,"px")}).join(", "),")")}}))}}return S&&["vertical","horizontal"].forEach(function(ht){var vt=S[ht],mt=ht==="horizontal";vt.isSnap&&R.push.apply(R,vt.snap.posInfos.map(function(st,ct){var pt=st.pos,Ht=Z(Bt(f,mt?[0,pt]:[pt,0],D),[p,h]),gt=Z(Bt(f,mt?[u,pt]:[pt,d],D),[p,h]);return Kn(e,"",Ht,gt,s,"clip".concat(ht,"snap").concat(ct),"guideline")})),vt.isBound&&R.push.apply(R,vt.bounds.map(function(st,ct){var pt=st.pos,Ht=Z(Bt(f,mt?[0,pt]:[pt,0],D),[p,h]),gt=Z(Bt(f,mt?[u,pt]:[pt,d],D),[p,h]);return Kn(e,"",Ht,gt,s,"clip".concat(ht,"bounds").concat(ct),"guideline","bounds","bold")}))}),J(J([],M,!0),R,!0)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,O(O({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,s=n.target,o=n.width,l=n.height,c=e.inputEvent?e.inputEvent.target:null,u=c&&c.getAttribute("class")||"",d=e.datas,f=ed(s,o,l,i||"inset",a);if(!f)return!1;var v=f.clipText,p=f.type,h=f.poses,g=X(t,"onClipStart",it(t,e,{clipType:p,clipStyle:v,poses:h.map(function(m){return m.pos})}));return g===!1?(d.isClipStart=!1,!1):(d.isControl=u&&u.indexOf("clip-control")>-1,d.isLine=u.indexOf("clip-line")>-1,d.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,d.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,d.clipPath=f,d.isClipStart=!0,n.clipPathState=v,vr(t,e),!0)},dragControl:function(t,e){var n,r,i=e.datas,a=e.originalDatas,s=e.isDragTarget;if(!i.isClipStart)return!1;var o=i,l=o.isControl,c=o.isLine,u=o.isArea,d=o.clipIndex,f=o.clipPath;if(!f)return!1;var v=pr(t.props,"clippable"),p=v.keepRatio,h=0,g=0,m=a.draggable,_=Se(e);s&&m?(n=m.prevBeforeDist,h=n[0],g=n[1]):(h=_[0],g=_[1]);var b=[h,g],E=t.state,S=E.width,x=E.height,C=!u&&!l&&!c,D=f.type,w=f.poses,k=f.splitter,T=w.map(function(bt){return bt.pos});C&&(h=-h,g=-g);var M=!l||w[d].direction==="nesw",R=D==="inset"||D==="rect",P=w.map(function(){return[0,0]});if(l&&!M){var A=w[d],L=A.horizontal,F=A.vertical,B=[h*Math.abs(L),g*Math.abs(F)];P=Rm(w,d,B,R,p)}else M&&(P=T.map(function(){return[h,g]}));var z=T.map(function(bt,re){return ut(bt,P[re])}),N=J([],z,!0);E.snapBoundInfos=null;var G=f.type==="circle",K=f.type==="ellipse";if(G||K){var H=fe(z),$=Math.abs(H.bottom-H.top),W=Math.abs(K?H.right-H.left:$),j=z[0][1]+$,q=z[0][0]-W,et=z[0][0]+W;G&&(N.push([et,H.bottom]),P.push([1,0])),N.push([H.left,j]),P.push([0,1]),N.push([q,H.bottom]),P.push([1,0])}var rt=Au((v.clipHorizontalGuidelines||[]).map(function(bt){return xt("".concat(bt),x)}),(v.clipVerticalGuidelines||[]).map(function(bt){return xt("".concat(bt),S)}),S,x),V=[],U=[];if(G||K)V=[N[4][0],N[2][0]],U=[N[1][1],N[3][1]];else if(R){var dt=[N[0],N[2],N[4],N[6]],ot=[P[0],P[2],P[4],P[6]];V=dt.filter(function(bt,re){return ot[re][0]}).map(function(bt){return bt[0]}),U=dt.filter(function(bt,re){return ot[re][1]}).map(function(bt){return bt[1]})}else V=N.filter(function(bt,re){return P[re][0]}).map(function(bt){return bt[0]}),U=N.filter(function(bt,re){return P[re][1]}).map(function(bt){return bt[1]});var Rt=[0,0],ht=Ru(rt,v.clipTargetBounds&&{left:0,top:0,right:S,bottom:x},V,U,5),vt=ht.horizontal,mt=ht.vertical,st=vt.offset,ct=mt.offset;if(vt.isBound&&(Rt[1]+=st),mt.isBound&&(Rt[0]+=ct),(K||G)&&P[0][0]===0&&P[0][1]===0){var H=fe(z),pt=H.bottom-H.top,Ht=K?H.right-H.left:pt,gt=mt.isBound?Math.abs(ct):mt.snapIndex===0?-ct:ct,_t=vt.isBound?Math.abs(st):vt.snapIndex===0?-st:st;Ht-=gt,pt-=_t,G&&(pt=Eu(mt,vt)>0?pt:Ht,Ht=pt);var St=N[0];N[1][1]=St[1]-pt,N[2][0]=St[0]+Ht,N[3][1]=St[1]+pt,N[4][0]=St[0]-Ht}else if(R&&p&&l){var ee=td(w),se=ee[0],Me=ee[1],wr=se&&Me?se/Me:0,Dr=w[d],ke=Dr.direction||"",oa=N[1][1],j=N[5][1],q=N[7][0],et=N[3][0];st<=ct?st=ct/wr:ct=st*wr,ke.indexOf("w")>-1?q-=ct:ke.indexOf("e")>-1?et-=ct:(q+=ct/2,et-=ct/2),ke.indexOf("n")>-1?oa-=st:ke.indexOf("s")>-1?j-=st:(oa+=st/2,j-=st/2);var fE=ji(oa,et,j,q);N.forEach(function(Qf,gE){var As;As=fE[gE].pos,Qf[0]=As[0],Qf[1]=As[1]})}else N.forEach(function(bt,re){var Zf=P[re];Zf[0]&&(bt[0]-=ct),Zf[1]&&(bt[1]-=st)});var Uf=Wo(t,f,z),Os="".concat(D,"(").concat(Uf.join(k),")");if(E.clipPathState=Os,G||K)V=[N[4][0],N[2][0]],U=[N[1][1],N[3][1]];else if(R){var dt=[N[0],N[2],N[4],N[6]];V=dt.map(function(re){return re[0]}),U=dt.map(function(re){return re[1]})}else V=N.map(function(bt){return bt[0]}),U=N.map(function(bt){return bt[1]});if(E.snapBoundInfos=Ru(rt,v.clipTargetBounds&&{left:0,top:0,right:S,bottom:x},V,U,1),m){var vE=E.is3d,pE=E.allMatrix,hE=vE?4:3,Ps=Rt;s&&(Ps=[b[0]+Rt[0]-_[0],b[1]+Rt[1]-_[1]]),m.deltaOffset=yt(pE,[Ps[0],Ps[1],0,0],hE)}return X(t,"onClip",it(t,e,O({clipEventType:"changed",clipType:D,poses:z,clipStyle:Os,clipStyles:Uf,distX:h,distY:g},Jt((r={},r[D==="rect"?"clip":"clipPath"]=Os,r),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,s=r.isClipStart,o=r.isControl;return s?(X(t,"onClipEnd",ue(t,e,{})),i&&(o?Pm(t,e):a&&Om(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Nm={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[`:host[data-able-origindraggable] .control.origin {
    pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":It(e.inputEvent.target,Q("origin"))},dragControlStart:function(t,e){var n=e.datas;vr(t,e);var r=it(t,e,{dragStart:te.dragStart(t,new Hr().dragStart([0,0],e))}),i=X(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=Se(e),s=a[0],o=a[1],l=t.state,c=l.width,u=l.height,d=l.offsetMatrix,f=l.targetMatrix,v=l.is3d,p=t.props.originRelative,h=p===void 0?!0:p,g=v?4:3,m=[s,o];if(i){var _=e.distOrigin;(_[0]||_[1])&&(m=_)}var b=ut(n.startOrigin,m),E=ut(n.startTargetOrigin,m),S=Z(m,n.prevOrigin),x=In(d,f,b,g),C=t.getRect(),D=fe($e(x,c,u,g)),w=[C.left-D.left,C.top-D.top];n.prevOrigin=m;var k=[me(E[0],c,h),me(E[1],u,h)].join(" "),T=te.drag(t,Ln(e,t.state,w,!!r,!1)),M=it(t,e,O(O({width:c,height:u,origin:b,dist:m,delta:S,transformOrigin:k,drag:T},Jt({transformOrigin:k,transform:T.transform},e)),{afterTransform:T.transform}));return X(t,"onDragOrigin",M),M},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(X(t,"onDragOriginEnd",ue(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Lm(t,e,n,r){var i=t.filter(function(l){var c=l.virtual,u=l.horizontal;return u&&!c}).length,a=t.filter(function(l){var c=l.virtual,u=l.vertical;return u&&!c}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];Im(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function Im(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function Bm(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function rd(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=or(t),Ju(a,e,n,0,0,r,i)}function nd(t,e,n,r,i){var a=t.state,s=a.width,o=a.height,l=Ko(i,t.props.roundRelative,s,o),c=l.raws,u=l.styles,d=l.radiusPoses,f=Mm(d,c),v=f.horizontals,p=f.verticals,h=u.join(" ");a.borderRadiusState=h;var g=it(t,e,O({horizontals:v,verticals:p,borderRadius:h,width:s,height:o,delta:r,dist:n},Jt({borderRadius:h},e)));return X(t,"onRound",g),g}function id(t){var e=t.getState().style,n=e.borderRadius||"";if(!n&&t.props.groupable){var r=t.getTargets()[0];r&&(n=getComputedStyle(r).borderRadius,e.borderRadius=n)}return n}var Fm={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd",onRoundGroupStart:"roundGroupStart",onRoundGroup:"roundGroup",onRoundGroupEnd:"roundGroupEnd"},css:[`.control.border-radius {
    background: #d66;
    cursor: pointer;
    z-index: 3;
}`,`.control.border-radius.vertical {
    background: #d6d;
    z-index: 2;
}`,`.control.border-radius.virtual {
    opacity: 0.5;
    z-index: 1;
}`,`:host.round-line-clickable .line.direction {
    cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Q("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,s=n.allMatrix,o=n.is3d,l=n.left,c=n.top,u=n.borderRadiusState,d=t.props,f=d.minRoundControls,v=f===void 0?[0,0]:f,p=d.maxRoundControls,h=p===void 0?[4,4]:p,g=d.zoom,m=d.roundPadding,_=m===void 0?0:m,b=d.isDisplayShadowRoundControls,E=d.groupable;if(!r)return null;var S=u||id(t),x=o?4:3,C=rd(S,i,a,v,!0);if(!C)return null;var D=0,w=0,k=E?[0,0]:[l,c];return C.map(function(T,M){var R=T.horizontal,P=T.vertical,A=T.direction||"",L=J([],T.pos,!0);w+=Math.abs(R),D+=Math.abs(P),R&&A.indexOf("n")>-1&&(L[1]-=_),P&&A.indexOf("w")>-1&&(L[0]-=_),R&&A.indexOf("s")>-1&&(L[1]+=_),P&&A.indexOf("e")>-1&&(L[0]+=_);var F=Z(Bt(s,L,x),k),B=T.vertical?D<=h[1]&&(b||!T.virtual):w<=h[0]&&(b||!T.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(M),className:Q("control","border-radius",T.vertical?"vertical":"",T.virtual?"virtual":""),"data-radius-index":M,style:{display:B?"block":"none",transform:"translate(".concat(F[0],"px, ").concat(F[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,l=s?parseInt(i.getAttribute("data-radius-index"),10):-1,c=-1;if(o){var u=i.getAttribute("data-line-key")||"";u&&(c=parseInt(u.replace(/render-line-/g,""),10),isNaN(c)&&(c=-1))}if(!s&&!o)return!1;var d=it(t,e,{}),f=X(t,"onRoundStart",d);if(f===!1)return!1;r.lineIndex=c,r.controlIndex=l,r.isControl=s,r.isLine=o,vr(t,e);var v=t.props,p=v.roundRelative,h=v.minRoundControls,g=h===void 0?[0,0]:h,m=t.state,_=m.width,b=m.height;r.isRound=!0,r.prevDist=[0,0];var E=id(t),S=rd(E||"",_,b,g,!0)||[];return r.controlPoses=S,m.borderRadiusState=Ko(S,p,_,b).styles.join(" "),d},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=Se(e),s=a[0],o=a[1],l=[s,o],c=Z(l,n.prevDist),u=t.props.maxRoundControls,d=u===void 0?[4,4]:u,f=t.state,v=f.width,p=f.height,h=r[i],g=h.vertical,m=h.horizontal,_=r.map(function(E){var S=E.horizontal,x=E.vertical,C=[S*m*l[0],x*g*l[1]];if(S){if(d[0]===1)return C;if(d[0]<4&&S!==m)return C}else{if(d[1]===0)return C[1]=x*m*l[0]/v*p,C;if(g){if(d[1]===1)return C;if(d[1]<4&&x!==g)return C}}return[0,0]});_[i]=l;var b=r.map(function(E,S){return O(O({},E),{pos:ut(E.pos,_[S])})});return i<4?b.slice(0,i+1).forEach(function(E){E.virtual=!1}):b.slice(4,i+1).forEach(function(E){E.virtual=!1}),n.prevDist=[s,o],nd(t,e,l,c,b)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,s=r.controlIndex,o=r.isLine,l=r.lineIndex,c=r.controlPoses,u=c.filter(function(m){var _=m.virtual;return _}).length,d=t.props.roundClickable,f=d===void 0?!0:d;if(i&&f){if(a&&(f===!0||f==="control"))Bm(c,s);else if(o&&(f===!0||f==="line")){var v=Yc(t,e),p=v[0],h=v[1];Lm(c,l,p,h)}u!==c.filter(function(m){var _=m.virtual;return _}).length&&nd(t,e,[0,0],[0,0],c)}var g=ue(t,e,{});return X(t,"onRoundEnd",g),n.borderRadiusState="",g},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=ye(t,"roundable",e),s=O({targets:t.props.targets,events:a.map(function(o,l){return O(O({},o),{target:i[l],moveable:r[l],currentTarget:r[l]})})},n);return X(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=ye(t,"roundable",e),s=O({targets:t.props.targets,events:a.map(function(o,l){return O(O(O({},o),{target:i[l],moveable:r[l],currentTarget:r[l]}),Jt({borderRadius:n.borderRadius},o))})},n);return X(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=ye(t,"roundable",e);Li(t,"onRound",function(o){var l=O({targets:t.props.targets,events:i.map(function(c,u){return O(O(O({},c),{target:r[u],moveable:n[u],currentTarget:n[u]}),Jt({borderRadius:o.borderRadius},c))})},o);X(t,"onRoundGroup",l)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=O({targets:t.props.targets,events:i.map(function(o,l){var c;return O(O({},o),{target:r[l],moveable:n[l],currentTarget:n[l],lastEvent:(c=o.datas)===null||c===void 0?void 0:c.lastEvent})})},a);return X(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function zm(t,e){var n=e?4:3,r=Dt(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var ad={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.target,a=n.targetMatrix,s=i?.style.transform,o=r?"matrix3d(".concat(a.join(","),")"):"matrix(".concat(Jl(a,!0),")"),l=!s||s==="none"?o:s;e.datas.startTransforms=zm(l,r)?[]:or(l)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return it(t,e,{setTransform:function(n){e.datas.startTransforms=zt(n)?n:or(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return it(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),X(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetStyle(e),X(t,"onBeforeRender",it(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){X(t,"onBeforeRenderEnd",it(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=ye(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var l=i[o];return n.setTransform(l,s),n.resetStyle(s),n.fillDragStartParams(l,s)});X(t,"onBeforeRenderGroupStart",it(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=ye(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var l=i[o];return n.resetStyle(s),n.fillDragParams(l,s)});X(t,"onBeforeRenderGroup",it(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),X(t,"onBeforeRenderGroupEnd",it(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},od={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){X(t,"onRenderStart",it(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){X(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){X(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){X(t,"onRenderGroupStart",it(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=ye(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var l=i[o];return n.fillDragParams(l,s)});X(t,"onRenderGroup",it(t,e,O(O({isPinch:!!e.isPinch,targets:t.props.targets,transform:Ti(e)},Jt(Ri(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=ye(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var l=i[o];return n.fillDragEndParams(l,s)});X(t,"onRenderGroupEnd",it(t,e,O({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transform:Ti(e)},Jt(Ri(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return it(t,e,O({isPinch:!!e.isPinch,transform:Ti(e)},Jt(Ri(e))))},fillDragEndParams:function(t,e){return it(t,e,O({isPinch:!!e.isPinch,isDrag:e.isDrag,transform:Ti(e)},Jt(Ri(e))))}};function Wn(t,e,n,r,i,a,s){var o=i==="Start",l=t.state.target,c=a.isRequest;if(!l||o&&r.indexOf("Control")>-1&&!c&&t.areaElement===a.inputEvent.target)return!1;var u="".concat(n).concat(r).concat(i),d="".concat(n).concat(r,"Condition"),f=i==="End",v=i==="After",p=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());p&&t.updateRect(i,!0,!1),a.clientDistX=a.distX,a.clientDistY=a.distY,i===""&&!c&&fu(t.state,a);var h=J([],t[e],!0);if(c){var g=a.requestAble;h.some(function(M){return M.name===g})||h.push.apply(h,t.props.ables.filter(function(M){return M.name===g}))}if(!h.length||h.every(function(M){return M.dragRelation}))return!1;var m=J(J([ad],h,!0),[od],!1).filter(function(M){return M[u]}),_=a.datas;p&&m.forEach(function(M){M.unset&&M.unset(t)});var b=a.inputEvent,E;f&&b&&(E=document.elementFromPoint(a.clientX,a.clientY)||b.target);var S=0,x=!1,C=function(){var M;x=!0,(M=a.stop)===null||M===void 0||M.call(a)},D=m.filter(function(M){var R=M.name,P=_[R]||(_[R]={});if(o&&(P.isEventStart=!M[d]||M[d](t,a)),P.isEventStart){var A=M[u](t,O(O({},a),{stop:C,resultCount:S,datas:P,originalDatas:_,inputTarget:E}));return t._emitter.off(),o&&A===!1&&(P.isEventStart=!1),S+=A||P.isEventStart?1:0,A}return!1}),w=D.length,k=!1;if(x&&(k=!0),!k&&o&&m.length&&!w&&(k=m.filter(function(M){var R=M.name,P=_[R];return P.isEventStart?M.dragRelation!=="strong":!1}).length),(f||k)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(M){M.state.gestos={}}),m.forEach(function(M){M.unset&&M.unset(t)})),o&&!k&&!c&&w&&a?.preventDefault(),t.isUnmounted||k)return!1;if(!o&&w&&!s||f){var T=t.props.flushSync||Jc;T(function(){t.updateRect(f?i:"",!0,!1),t.forceUpdate()})}return!o&&!f&&!v&&w&&!s&&Wn(t,e,n,r,i+"After",a),!0}function Yo(t){return function(e){var n=t.props.dragTarget,r=e.inputEvent.target,i=t.areaElement;return n&&(r===n||n.contains(r))||r===i||!t.isMoveableElement(r)&&!t.controlBox.getElement().contains(r)||It(r,"moveable-area")||It(r,"moveable-padding")||It(r,"moveable-edgeDraggable")}}function sd(t,e,n){var r=t.controlBox.getElement(),i=[],a=t.props.dragTarget;return i.push(r),(!t.props.dragArea||a)&&i.push(e),$o(t,i,"targetAbles",n,{dragStart:Yo(t),pinchStart:Yo(t)})}function $o(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",s=t.props,o=s.pinchOutside,l=s.pinchThreshold,c=s.preventClickEventOnDrag,u=s.preventClickDefault,d=s.checkInput,f={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:l,pinchOutside:o,preventClickEventOnDrag:a?c:!1,preventClickEventOnDragStart:a?u:!1,preventClickEventByCondition:a?null:function(h){return t.controlBox.getElement().contains(h.target)},checkInput:a?d:!1},v=new Cg(e,f),p=r==="Control";return["drag","pinch"].forEach(function(h){["Start","","End"].forEach(function(g){v.on("".concat(h).concat(g),function(m){var _,b=m.eventType;if(i[b]&&!i[b](m)){m.stop();return}var E=Wn(t,n,h,r,g,m);E?(t.props.stopPropagation||g==="Start"&&p)&&((_=m?.inputEvent)===null||_===void 0||_.stopPropagation()):m.stop()})})}),v}var Gm=function(){function t(n,r,i){var a=this;this.target=n,this.moveable=r,this.eventName=i,this.ables=[],this._onEvent=function(s){var o=a.eventName,l=a.moveable;l.state.disableNativeEvent||a.ables.forEach(function(c){c[o](l,{inputEvent:s})})},n.addEventListener(i.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(n){this.ables=n},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Km(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function ld(t,e,n){for(var r=t,i=[],a=document.documentElement||document.body,s=!n&&t===e||t===a,o=s,l=!1,c=3,u,d,f,v=!1,p=Bn(e,e,!0).offsetParent,h=1;r&&!o;){o=s;var g=getComputedStyle(r),m=g.position,_=tu(r,g),b=dh(n0(_)),E=m==="fixed",S={hasTransform:!1,fixedContainer:null};E&&(v=!0,S=s0(r),p=S.fixedContainer);var x=b.length;!l&&x===16&&(l=!0,c=4,ho(i),f&&(f=xe(f,3,4))),l&&x===9&&(b=xe(b,3,4));var C=o0(r,t,g),D=C.tagName,w=C.hasOffset,k=C.isSVG,T=C.origin,M=C.targetOrigin,R=C.offset,P=R[0],A=R[1];D==="svg"&&f&&(i.push({type:"target",target:r,matrix:l0(r,c)}),i.push({type:"offset",target:r,matrix:Dt(c)}));var L=void 0,F=!1,B=!1,z=parseFloat(g.zoom)||1;if(E)L=S.fixedContainer,F=!0;else{var N=Bn(r,e,!1,!0,g),G=N.offsetZoom;if(L=N.offsetParent,F=N.isEnd,B=N.isStatic,h*=G,G!==1&&B)P-=L.offsetLeft,A-=L.offsetTop;else if(Fg){var K=N.parentSlotElement;if(K){for(var H=L,$=0,W=0;H&&Km(H);)$+=H.offsetLeft,W+=H.offsetTop,H=H.offsetParent;P-=$,A-=W}}}Fc&&!zg&&w&&!k&&B&&(m==="relative"||m==="static")&&(P-=L.offsetLeft,A-=L.offsetTop,s=s||F);var j=0,q=0,et=0,rt=0;if(E)w&&S.hasTransform&&(et=L.clientLeft,rt=L.clientTop);else if(w&&p!==L&&(j=L.clientLeft,q=L.clientTop),w&&L===a){var V=eu(r,!1,g);P+=V[0],A+=V[1]}if(i.push({type:"target",target:r,matrix:Oi(b,c,T)}),w){var U=r===t,dt=U?0:r.scrollLeft,ot=U?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Dn([P-dt+j-et,A-ot+q-rt],c)})}else i.push({type:"offset",target:r,origin:T});if(z!==1&&i.push({type:"zoom",target:r,matrix:Oi(Fa([z,z],c),c,[0,0])}),f||(f=b),u||(u=T),d||(d=M),o||E)break;r=L,s=F,(!n||r===a)&&(o=s)}return f||(f=Dt(c)),u||(u=[0,0]),d||(d=[0,0]),{zoom:h,offsetContainer:p,matrixes:i,targetMatrix:f,transformOrigin:u,targetOrigin:d,is3d:l,hasFixed:v}}function Wm(t,e,n,r){var i;n===void 0&&(n=e);var a=ld(t,e),s=a.matrixes,o=a.is3d,l=a.targetMatrix,c=a.transformOrigin,u=a.targetOrigin,d=a.offsetContainer,f=a.hasFixed,v=a.zoom,p=ld(d,n,!0),h=p.matrixes,g=p.is3d,m=p.offsetContainer,_=p.zoom,b=r||g||o,E=b?4:3,S=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,x=l,C=Dt(E),D=Dt(E),w=Dt(E),k=Dt(E),T=s.length;h.reverse(),s.reverse(),!o&&b&&(x=xe(x,3,4),ho(s)),!g&&b&&ho(h),h.forEach(function(B){D=yt(D,B.matrix,E)});var M=n||document.body,R=((i=h[0])===null||i===void 0?void 0:i.target)||Bn(M,M,!0).offsetParent,P=h.slice(1).reduce(function(B,z){return yt(B,z.matrix,E)},Dt(E));s.forEach(function(B,z){if(T-2===z&&(w=C.slice()),T-1===z&&(k=C.slice()),!B.matrix){var N=s[z+1],G=u0(B,N,R,E,yt(P,C,E));B.matrix=Dn(G,E)}C=yt(C,B.matrix,E)});var A=!S&&o;x||(x=Dt(A?4:3));var L=Ai(S&&x.length===16?xe(x,4,3):x,A),F=D;return D=Ql(D,E,E),{hasZoom:v!==1||_!==1,hasFixed:f,rootMatrix:D,originalRootMatrix:F,beforeMatrix:w,offsetMatrix:k,allMatrix:C,targetMatrix:x,targetTransform:L,transformOrigin:c,targetOrigin:u,is3d:b,offsetContainer:d,offsetRootContainer:m}}function cd(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,s=0,o={},l=iu(t);if(t&&(i=l.offsetWidth,a=l.offsetHeight),t){var c=Wm(t,e,n,r),u=Xr(c.allMatrix,c.transformOrigin,i,a);o=O(O({},c),u);var d=Xr(c.allMatrix,[50,50],100,100);s=au([d.pos1,d.pos2],d.direction)}var f=r?4:3;return O(O(O({hasZoom:!1,width:i,height:a,rotation:s},l),{originalRootMatrix:Dt(f),rootMatrix:Dt(f),beforeMatrix:Dt(f),offsetMatrix:Dt(f),allMatrix:Dt(f),targetMatrix:Dt(f),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),o)}function JC(t,e,n){return n===void 0&&(n=e),cd(t,e,n,!0)}function Ho(t,e,n,r,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],l=Ni(),c=Ni(),u=Ni(),d=Ni(),f=[0,0],v={},p=cd(e,n,i,!0);if(e){var h=getComputedStyle(e);a.forEach(function(M){v[M]=h[M]});var g=p.is3d?4:3,m=Xr(p.offsetMatrix,ut(p.transformOrigin,ql(p.targetMatrix,g)),p.width,p.height);s=m.direction,o=ut(m.origin,[m.left-p.left,m.top-p.top]),d=zn(p.offsetRootContainer);var _=Bn(r,r,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var b=Xr(yt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),E=Xr(p.originalRootMatrix,Pi(getComputedStyle(_)).map(function(M){return parseFloat(M)}),_.offsetWidth,_.offsetHeight);if(l=yo(b,d),u=yo(E,d,_,!0),t){var S=b.left,x=b.top;c=yo({left:S,top:x,bottom:x,right:x},d)}}else{l=zn(e),u=zn(_,!0),t&&(c=zn(t));var C=u.left,D=u.top,w=u.clientLeft,k=u.clientTop,T=[l.left-C,l.top-D];f=Z(hr(p.rootMatrix,T,4),[w+p.left,k+p.top])}}return O({targetClientRect:l,containerClientRect:u,moveableClientRect:c,rootContainerClientRect:d,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:v,offsetDelta:f},p)}function ud(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Ye([e,n,r,i]),s=[a.minX,a.minY],o=Z(t.origin,s);return e=Z(e,s),n=Z(n,s),r=Z(r,s),i=Z(i,s),O(O({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var Qr=function(t){$r(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state=O({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Ho(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new zr,r._prevTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._observer=null,r._observerId=0,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r.checkUpdateRect=function(){if(!r.isDragging()){var i=r.props.parentMoveable;if(i){i.checkUpdateRect();return}qp(r._observerId),r._observerId=Hl(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(i){i.stopPropagation(),i.preventDefault()},r}var n=e.prototype;return n.render=function(){var r=this.props,i=this.getState(),a=r.parentPosition,s=r.className,o=r.target,l=r.zoom,c=r.cspNonce,u=r.translateZ,d=r.cssStyled,f=r.portalContainer,v=r.groupable,p=r.linePadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var h=a||[0,0],g=h[0],m=h[1],_=i.left,b=i.top,E=i.target,S=i.direction,x=i.hasFixed,C=i.offsetDelta,D=r.targets,w=this.isDragging(),k={};this.getEnabledAbles().forEach(function(L){k["data-able-".concat(L.name.toLowerCase())]=!0});var T=this._getAbleClassName(),M=D&&D.length&&(E||v)||o||!this._hasFirstTarget&&this.state.isPersisted,R=this.controlBox||this.props.firstRenderState||this.props.persistData,P=[_-g,b-m];!v&&r.useAccuratePosition&&(P[0]+=C[0],P[1]+=C[1]);var A={position:x?"fixed":"absolute",display:M?"block":"none",visibility:R?"visible":"hidden",transform:"translate3d(".concat(P[0],"px, ").concat(P[1],"px, ").concat(u,")"),"--zoom":l,"--zoompx":"".concat(l,"px")};return p&&(A["--moveable-line-padding"]=p),de(d,O({cspNonce:c,ref:Ce(this,"controlBox"),className:"".concat(Q("control-box",S===-1?"reverse":"",w?"dragging":"")," ").concat(T," ").concat(s)},k,{onClick:this._onPreventClick,portalContainer:f,style:A}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1,this.controlBox.getElement();var r=this.props,i=r.parentMoveable,a=r.container,s=r.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!a&&!i&&!s&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},n.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(r)},n.componentWillUnmount=function(){this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off();var r=this._viewContainer;r&&this._changeAbleViewClassNames([]),jr(this,"targetGesto"),jr(this,"controlGesto");var i=this.events;for(var a in i){var s=i[a];s&&s.destroy()}},n.getTargets=function(){var r=this.props.target;return r?[r]:[]},n.getAble=function(r){var i=this.props.ables||[];return sr(i,function(a){return a.name===r})},n.getContainer=function(){var r=this.props,i=r.parentMoveable,a=r.wrapperMoveable,s=r.container;return s||a&&a.getContainer()||i&&i.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(r){var i;return r&&(((i=r.getAttribute)===null||i===void 0?void 0:i.call(r,"class"))||"").indexOf(so)>-1},n.dragStart=function(r){var i=this.targetGesto,a=this.controlGesto;return i&&Yo(this)({inputEvent:r})?i.isFlag()||i.triggerDragStart(r):a&&this.isMoveableElement(r.target)&&(a.isFlag()||a.triggerDragStart(r)),this},n.hitTest=function(r){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,l=i.pos3,c=i.pos4,u=i.targetClientRect;if(!a)return 0;var d;if(r instanceof Element){var f=r.getBoundingClientRect();d={left:f.left,top:f.top,width:f.width,height:f.height}}else d=O({width:0,height:0},r);var v=d.left,p=d.top,h=d.width,g=d.height,m=Ya([s,o,c,l],u),_=Wh(m,[[v,p],[v+h,p],[v+h,p+g],[v,p+g]]),b=On(m);return!_||!b?0:Math.min(100,_/b*100)},n.isInside=function(r,i){var a=this.state,s=a.target,o=a.pos1,l=a.pos2,c=a.pos3,u=a.pos4,d=a.targetClientRect;return s?mi([r,i],Ya([o,l,u,c],d)):!1},n.updateRect=function(r,i,a){a===void 0&&(a=!0);var s=this.props,o=s.parentMoveable,l=this.state,c=l.target||this.props.target,u=this.getContainer(),d=o?o._rootContainer:this._rootContainer,f=Ho(this.controlBox&&this.controlBox.getElement(),c,u,u,d||u,this._getRequestStyles());if(!c&&this._hasFirstTarget&&s.persistData){var v=ud(s.persistData);for(var p in v)f[p]=v[p]}this.updateState(f,o?!1:a)},n.isDragging=function(r){var i,a,s=this.targetGesto,o=this.controlGesto;if(s?.isFlag()){if(!r)return!0;var l=s.getEventData();return!!(!((i=l[r])===null||i===void 0)&&i.isEventStart)}if(o?.isFlag()){if(!r)return!0;var l=o.getEventData();return!!(!((a=l[r])===null||a===void 0)&&a.isEventStart)}return!1},n.updateTarget=function(r){this.updateRect(r,!0)},n.getRect=function(){var r=this.state,i=oe(this.state),a=i[0],s=i[1],o=i[2],l=i[3],c=fe(i),u=r.width,d=r.height,f=c.width,v=c.height,p=c.left,h=c.top,g=[r.left,r.top],m=ut(g,r.origin),_=ut(g,r.beforeOrigin),b=r.transformOrigin;return{width:f,height:v,left:p,top:h,pos1:a,pos2:s,pos3:o,pos4:l,offsetWidth:u,offsetHeight:d,beforeOrigin:_,origin:m,transformOrigin:b,rotation:this.getRotation()}},n.getManager=function(){return this},n.stopDrag=function(r){var i,a;(!r||r==="target")&&((i=this.targetGesto)===null||i===void 0||i.stop()),(!r||r==="control")&&((a=this.controlGesto)===null||a===void 0||a.stop())},n.getRotation=function(){var r=this.state,i=r.pos1,a=r.pos2,s=r.direction;return y0(i,a,s)},n.request=function(r,i,a){i===void 0&&(i={});var s=this.props,o=s.ables,l=s.groupable,c=o.filter(function(g){return g.name===r})[0];if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var u=this,d=c.request(this),f=a||i.isInstant,v=d.isControl?"controlAbles":"targetAbles",p="".concat(l?"Group":"").concat(d.isControl?"Control":""),h={request:function(g){return Wn(u,v,"drag",p,"",O(O({},d.request(g)),{requestAble:r,isRequest:!0}),f),this},requestEnd:function(){return Wn(u,v,"drag",p,"End",O(O({},d.requestEnd()),{requestAble:r,isRequest:!0}),f),this}};return Wn(u,v,"drag",p,"Start",O(O({},d.requestStart(i)),{requestAble:r,isRequest:!0}),f),f?h.request(i).requestEnd():h},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var r=this.getState(),i=this.props,a=r.originalBeforeOrigin,s=r.transformOrigin,o=r.allMatrix,l=r.is3d,c=r.pos1,u=r.pos2,d=r.pos3,f=r.pos4,v=r.left,p=r.top,h=r.isPersisted,g=i.padding||{},m=g.left,_=m===void 0?0:m,b=g.top,E=b===void 0?0:b,S=g.bottom,x=S===void 0?0:S,C=g.right,D=C===void 0?0:C,w=l?4:3,k=[];h?k=s:this.controlBox&&i.groupable?k=a:k=ut(a,[v,p]),r.renderPoses=[ut(c,Bi(o,[-_,-E],s,k,w)),ut(u,Bi(o,[D,-E],s,k,w)),ut(d,Bi(o,[-_,x],s,k,w)),ut(f,Bi(o,[D,x],s,k,w))]},n.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,i=r.target,a=r.container,s=r.parentMoveable,o=this.state,l=o.target,c=o.container;if(!(!l&&!i)){this.updateAbles();var u=!Eo(l,i),d=u||!Eo(c,a);if(d){var f=a||this.controlBox;f&&this.unsetAbles(),this.updateState({target:i,container:a}),!s&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},n.waitToChangeTarget=function(){return new Promise(function(){})},n.triggerEvent=function(r,i){this._emitter.trigger(r,i);var a=this.props[r];return a&&a(i)},n.useCSS=function(r,i){var a=this.props.customStyledMap,s=r+i;return a[s]||(a[s]=Bc(r,i)),a[s]},n.getState=function(){var r,i=this.props;(i.target||!((r=i.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var a=this.controlBox,s=i.persistData,o=i.firstRenderState;if(o&&!a)return o;if(!this._hasFirstTarget&&s){var l=ud(s);if(l)return this.updateState(l,!1),this.state}return this.state.isPersisted=!1,this.state},n.updateSelectors=function(){},n.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(i){i.unset&&i.unset(r)})},n.updateAbles=function(r,i){r===void 0&&(r=this.props.ables),i===void 0&&(i="");var a=this.props,s=a.triggerAblesSimultaneously,o=this.getEnabledAbles(r),l="drag".concat(i,"Start"),c="pinch".concat(i,"Start"),u="drag".concat(i,"ControlStart"),d=Ii(o,[l,c],s),f=Ii(o,[u],s);this.enabledAbles=o,this.targetAbles=d,this.controlAbles=f},n.updateState=function(r,i){if(i){if(this.isUnmounted)return;this.setState(r)}else{var a=this.state;for(var s in r)a[s]=r[s]}},n.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var i=this.props;return r.filter(function(a){return a&&(a.always&&i[a.name]!==!1||i[a.name])})},n.renderAbles=function(){var r=this,i=this.props,a=i.triggerAblesSimultaneously,s={createElement:de};return this.renderState={},p0(du(Ii(this.getEnabledAbles(),["render"],a).map(function(o){var l=o.render;return l(r,s)||[]})).filter(function(o){return o}),function(o){var l=o.key;return l}).map(function(o){return o[0]})},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(i,a){var s,o,l=(o=(s=a.requestStyle)===null||s===void 0?void 0:s.call(a))!==null&&o!==void 0?o:[];return J(J([],i,!0),l,!0)},[]);return r},n._updateObserver=function(r){var i,a=this.props,s=a.target;if(!window.ResizeObserver||!s||!a.useResizeObserver){(i=this._observer)===null||i===void 0||i.disconnect();return}if(!(r.target===s&&this._observer)){var o=new ResizeObserver(this.checkUpdateRect);o.observe(s,{box:"border-box"}),this._observer=o}},n._updateEvents=function(){var r=this.controlBox.getElement(),i=this.targetAbles.length,a=this.controlAbles.length,s=this.props,o=s.dragTarget||s.target,l=!i&&this.targetGesto||this._isTargetChanged(!0);l&&(jr(this,"targetGesto"),this.updateState({gesto:null})),a||jr(this,"controlGesto"),o&&i&&!this.targetGesto&&(this.targetGesto=sd(this,o,"")),!this.controlGesto&&a&&(this.controlGesto=$o(this,r,"controlAbles","Control"))},n._updateTargets=function(){var r=this.props;this._prevTarget=r.dragTarget||r.target,this._prevDragArea=r.dragArea},n._renderLines=function(){var r=this.props,i=r,a=i.zoom,s=i.hideDefaultLines,o=i.hideChildMoveableDefaultLines,l=i.parentMoveable;if(s||l&&o)return[];var c=this.getState().renderPoses,u={createElement:de};return[[0,1],[1,3],[3,2],[2,0]].map(function(d,f){var v=d[0],p=d[1];return Kn(u,"",c[v],c[p],a,"render-line-".concat(f))})},n._isTargetChanged=function(r){var i=this.props,a=i.dragTarget||i.target,s=this._prevTarget,o=this._prevDragArea,l=i.dragArea,c=!l&&s!==a,u=(r||l)&&o!==l;return c||u},n._updateNativeEvents=function(){var r=this,i=this.props,a=i.dragArea?this.areaElement:this.state.target,s=this.events,o=Ke(s);if(this._isTargetChanged())for(var l in s){var c=s[l];c&&c.destroy(),s[l]=null}if(a){var u=this.enabledAbles;o.forEach(function(d){var f=Ii(u,[d]),v=f.length>0,p=s[d];if(!v){p&&(p.destroy(),s[d]=null);return}p||(p=new Gm(a,r,d),s[d]=p),p.setAbles(f)})}},n._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=gr(r,!0))},n._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=gr(r,!0));var i=this._viewContainer;i&&this._changeAbleViewClassNames(J(J([],this._getAbleViewClassNames(),!0),[this.isDragging()?ym:""],!1))},n._changeAbleViewClassNames=function(r){var i=this._viewContainer,a=uu(r.filter(Boolean),function(u){return u}).map(function(u){var d=u[0];return d}),s=this._viewClassNames,o=hn(s,a),l=o.removed,c=o.added;l.forEach(function(u){Zl(i,s[u])}),c.forEach(function(u){Ul(i,a[u])}),this._viewClassNames=a},n._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(i){var a;return((a=i.viewClassName)===null||a===void 0?void 0:a.call(i,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},n._getAbleClassName=function(r){var i=this;r===void 0&&(r="");var a=this.getEnabledAbles(),s=this.targetGesto,o=this.controlGesto,l=s?.isFlag()?s.getEventData():{},c=o?.isFlag()?o.getEventData():{};return a.map(function(u){var d,f,v,p=u.name,h=((d=u.className)===null||d===void 0?void 0:d.call(u,i))||"";return(!((f=l[p])===null||f===void 0)&&f.isEventStart||!((v=c[p])===null||v===void 0)&&v.isEventStart)&&(h+=" ".concat(Q("".concat(p).concat(r,"-dragging")))),h.trim()}).filter(Boolean).join(" ")},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,portalContainer:null,useResizeObserver:!1,linePadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Jc,firstRenderState:null,persistData:null,viewContainer:null,useAccuratePosition:!1},e}(wa),Vo={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,groupableProps:Object,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,e){var n,r=t.props,i=r.targets||[];t.moveables=[];var a=t.getState(),s=a.left,o=a.top,l=a.isPersisted,c=[s,o],u=r.zoom||1,d=t.renderGroupRects,f=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];return l?i=f.map(function(){return null}):f=[],J(J([],i.map(function(v,p){return e.createElement(Qr,{key:"moveable"+p,ref:rl(t,"moveables",p),target:v,origin:!1,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:c,persistData:f[p],zoom:u})}),!0),du(d.map(function(v,p){var h=v.pos1,g=v.pos2,m=v.pos3,_=v.pos4,b=[h,g,m,_];return[[0,1],[1,3],[3,2],[2,0]].map(function(E,S){var x=E[0],C=E[1];return Kn(e,"",Z(b[x],c),Z(b[C],c),u,"group-rect-".concat(p,"-").concat(S))})})),!0)}},Ym=Nn("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.getElement().contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=n.contains(i);X(t,"onClick",it(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),s=a>-1,o=!1;a===-1&&(a=Nr(i,function(l){return l.contains(r)}),o=a>-1),X(t,"onClickGroup",it(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function qr(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),O(O({},t),{datas:e})}var $m=Nn("edgeDraggable",{css:[`.edge.edgeDraggable.line {
    cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?Gu(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&It(i,Q("direction"))&&It(i,Q("edge"))&&It(i,Q("edgeDraggable"))},dragStart:function(t,e){return te.dragStart(t,qr(e))},drag:function(t,e){return te.drag(t,qr(e))},dragEnd:function(t,e){return te.dragEnd(t,qr(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&It(i,Q("direction"))&&It(i,Q("line"))},dragGroupStart:function(t,e){return te.dragGroupStart(t,qr(e))},dragGroup:function(t,e){return te.dragGroup(t,qr(e))},dragGroupEnd:function(t,e){return te.dragGroupEnd(t,qr(e))},unset:function(t){return te.unset(t)}}),dd={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Xo=[ad,Zu,lm,b0,te,$m,Lo,pm,gm,vm,bm,Cm,_m,Nm,Am,Fm,Vo,dd,Ym,Uu,od],Hm=Xo.reduce(function(t,e){return O(O({},t),"events"in e?e.events:{})},{}),Vm=Xo.reduce(function(t,e){return O(O({},t),e.props)},{}),Xm=h0(Hm),jm=Object.keys(Xm),Um=Object.keys(Vm);function fd(t,e){var n=t[0],r=t[1],i=t[2];return(n*e[0]+r*e[1]+i)/Math.sqrt(n*n+r*r)}function Ui(t,e){var n=t[0],r=t[1];return-n*e[0]-r*e[1]}function vd(t,e){return Math.max.apply(Math,t.map(function(n){var r=n[0],i=n[1],a=n[2],s=n[3];return Math.max(r[e],i[e],a[e],s[e])}))}function pd(t,e){return Math.min.apply(Math,t.map(function(n){var r=n[0],i=n[1],a=n[2],s=n[3];return Math.min(r[e],i[e],a[e],s[e])}))}function Zm(t,e){var n,r=[0,0],i=[0,0],a=[0,0],s=[0,0],o=0,l=0;if(!t.length)return{pos1:r,pos2:i,pos3:a,pos4:s,minX:0,minY:0,maxX:0,maxY:0,width:o,height:l,rotation:e};var c=lt(e,qt);if(c%90){var u=c/180*Math.PI,d=Math.tan(u),f=-1/d,v=[co,Gc],p=[[0,0],[0,0]],h=[co,Gc],g=[[0,0],[0,0]];t.forEach(function(z){z.forEach(function(N){var G=fd([-d,1,0],N),K=fd([-f,1,0],N);v[0]>G&&(p[0]=N,v[0]=G),v[1]<G&&(p[1]=N,v[1]=G),h[0]>K&&(g[0]=N,h[0]=K),h[1]<K&&(g[1]=N,h[1]=K)})});var m=p[0],_=p[1],b=g[0],E=g[1],S=[-d,1,Ui([-d,1],m)],x=[-d,1,Ui([-d,1],_)],C=[-f,1,Ui([-f,1],b)],D=[-f,1,Ui([-f,1],E)];n=[[S,C],[S,D],[x,C],[x,D]].map(function(z){var N=z[0],G=z[1];return yi(N,G)[0]}),r=n[0],i=n[1],a=n[2],s=n[3],o=h[1]-h[0],l=v[1]-v[0]}else{var w=pd(t,0),k=pd(t,1),T=vd(t,0),M=vd(t,1);if(r=[w,k],i=[T,k],a=[w,M],s=[T,M],o=T-w,l=M-k,c%180){var R=[a,r,s,i];r=R[0],i=R[1],a=R[2],s=R[3],o=M-k,l=T-w}}if(c%360>180){var R=[s,a,i,r];r=R[0],i=R[1],a=R[2],s=R[3]}var P=Ye([r,i,a,s]),A=P.minX,L=P.minY,F=P.maxX,B=P.maxY;return{pos1:r,pos2:i,pos3:a,pos4:s,width:o,height:l,minX:A,minY:L,maxX:F,maxY:B,rotation:e}}function hd(t,e){var n=e.map(function(r){if(zt(r)){var i=hd(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=sr(t,function(o){var l=o.manager;return l.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&zt(n[0])?n[0]:n}var Qm=function(t){$r(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.differ=new ac,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}var n=e.prototype;return n.componentDidMount=function(){t.prototype.componentDidMount.call(this)},n.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},n.getTargets=function(){return this.props.targets},n.updateRect=function(r,i,a){var s;a===void 0&&(a=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;this.moveables.forEach(function(et){et.updateRect(r,!1,!1)});var l=this.props,c=this.moveables,u=o.target||l.target,d=c.map(function(et){return{finded:!1,manager:et}}),f=this.props.targetGroups||[],v=hd(d,f);v.push.apply(v,d.filter(function(et){var rt=et.finded;return!rt}).map(function(et){var rt=et.manager;return rt}));var p=[],h=!i||r!==""&&l.updateGroup,g=l.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(s=this.props.persistData)===null||s===void 0?void 0:s.rotation;m!=null&&(g=m)}function _(et,rt,V){var U=et.map(function(st){if(zt(st)){var ct=_(st,rt),pt=[ct.pos1,ct.pos2,ct.pos3,ct.pos4];return p.push(ct),{poses:pt,rotation:ct.rotation}}else return{poses:oe(st.state),rotation:st.getRotation()}}),dt=U.map(function(st){var ct=st.rotation;return ct}),ot=0,Rt=dt[0],ht=dt.every(function(st){return Math.abs(Rt-st)<.1});h?ot=ht?Rt:g:ot=!V&&ht?Rt:rt;var vt=U.map(function(st){var ct=st.poses;return ct}),mt=Zm(vt,ot);return mt}var b=_(v,this.rotation,!0);h&&(this.rotation=b.rotation,this.transformOrigin=l.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=p;var E=this.transformOrigin,S=this.rotation,x=this.scale,C=b.width,D=b.height,w=b.minX,k=b.minY,T=E0([[0,0],[C,0],[0,D],[C,D]],_0(E,C,D),this.rotation/180*Math.PI),M=Ye(T.result),R=M.minX,P=M.minY,A=" rotate(".concat(S,"deg)")+" scale(".concat(x[0]>=0?1:-1,", ").concat(x[1]>=0?1:-1,")"),L="translate(".concat(-R,"px, ").concat(-P,"px)").concat(A);this.controlBox.getElement().style.transform="translate3d(".concat(w,"px, ").concat(k,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(E,";")+"width:".concat(C,"px;height:").concat(D,"px;")+"transform: ".concat(L),o.width=C,o.height=D;var F=this.getContainer(),B=Ho(this.controlBox.getElement(),u,this.controlBox.getElement(),this.getContainer(),this._rootContainer||F,[]),z=[B.left,B.top],N=oe(B),G=N[0],K=N[1],H=N[2],$=N[3],W=Ye([G,K,H,$]),j=[W.minX,W.minY],q=x[0]*x[1]>0?1:-1;B.pos1=Z(G,j),B.pos2=Z(K,j),B.pos3=Z(H,j),B.pos4=Z($,j),B.left=w-B.left+j[0],B.top=k-B.top+j[1],B.origin=Z(ut(z,B.origin),j),B.beforeOrigin=Z(ut(z,B.beforeOrigin),j),B.originalBeforeOrigin=ut(z,B.originalBeforeOrigin),B.transformOrigin=Z(ut(z,B.transformOrigin),j),u.style.transform="translate(".concat(-R-j[0],"px, ").concat(-P-j[1],"px)")+A,this.updateState(O(O({},B),{posDelta:j,direction:q,beforeDirection:q}),a)},n.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},n.triggerEvent=function(r,i,a){if(a||r.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,r,i);this._emitter.trigger(r,i)},n.updateAbles=function(){t.prototype.updateAbles.call(this,J(J([],this.props.ables,!0),[Vo],!1),"Group")},n._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},n._updateEvents=function(){var r=this.state,i=this.props,a=this._prevTarget,s=i.dragTarget||this.areaElement;a!==s&&(jr(this,"targetGesto"),jr(this,"controlGesto"),r.target=null),r.target||(r.target=this.areaElement,this.controlBox.getElement().style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=sd(this,s,"Group")),this.controlGesto||(this.controlGesto=$o(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var o=!Eo(r.container,i.container);o&&(r.container=i.container);var l=i.targets,c=this.differ.update(l),u=c.added,d=c.changed,f=c.removed,v=u.length||f.length;(o||v||this.transformOrigin!==(i.defaultGroupOrigin||"50% 50%")||d.length||l.length&&!gu(this._targetGroups,i.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!v},n._updateObserver=function(){},e.defaultProps=O(O({},Qr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Qr),qm=function(t){$r(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.moveables=[],r}var n=e.prototype;return n.render=function(){var r=this,i,a=this.props,s=a.cspNonce,o=a.cssStyled,l=a.persistData,c=a.targets||[],u=c.length,d=this.isUnmounted||!u,f=(i=l?.children)!==null&&i!==void 0?i:[];return d&&!u&&f.length?c=f.map(function(){return null}):d||(f=[]),de(o,{cspNonce:s,ref:Ce(this,"controlBox"),className:Q("control-box")},c.map(function(v,p){return de(Qr,O({key:"moveable"+p,ref:rl(r,"moveables",p)},r.props,{target:v,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:f[p]}))}))},n.componentDidUpdate=function(){},n.getTargets=function(){return this.props.targets},n.updateRect=function(r,i,a){a===void 0&&(a=!0),this.moveables.forEach(function(s){s.updateRect(r,i,a)})},n.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},n._updateEvents=function(){},n._updateObserver=function(){},e}(Qr);function gd(t,e){var n=[];return t.forEach(function(r){if(r){if(Ge(r)){e[r]&&n.push.apply(n,e[r]);return}zt(r)?n.push.apply(n,gd(r,e)):n.push(r)}}),n}function md(t,e){var n=[];return t.forEach(function(r){if(r){if(Ge(r)){e[r]&&n.push.apply(n,e[r]);return}zt(r)?n.push(md(r,e)):n.push(r)}}),n}function yd(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?zt(n)&&zt(i)?yd(n,i):!0:!1})}var _d=function(t){$r(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new ac,r._elementTargets=[],r._onChangeTargets=null,r}var n=e.prototype;return e.makeStyled=function(){var r={},i=this.getTotalAbles();i.forEach(function(s){var o=s.css;o&&o.forEach(function(l){r[l]=!0})});var a=Ke(r).join(`
`);this.defaultStyled=Bc("div",Zv(so,Gg+a))},e.getTotalAbles=function(){return J([Zu,Vo,dd,Uu],this.defaultAbles,!0)},n.render=function(){var r,i=this.constructor;i.defaultStyled||i.makeStyled();var a=this.props,s=a.ables,o=a.props,l=Ng(a,["ables","props"]),c=this._updateRefs(!0),u=gd(c,this.selectorMap),d=u.length>1,f=i.getTotalAbles(),v=J(J([],f,!0),s||[],!0),p=O(O(O({},l),o||{}),{ables:v,cssStyled:i.defaultStyled,customStyledMap:i.customStyledMap});this._elementTargets=u;var h=null,g=this.moveable,m=l.persistData;if(m?.children&&(d=!0),d){if(l.individualGroupable)return de(qm,O({key:"individual-group",ref:Ce(this,"moveable")},p,{target:null,targets:u}));var _=md(c,this.selectorMap);if(g&&!g.props.groupable&&!g.props.individualGroupable){var b=g.props.target;b&&u.indexOf(b)>-1&&(h=O({},g.state))}return de(Qm,O({key:"group",ref:Ce(this,"moveable")},p,(r=l.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:u,targetGroups:_,firstRenderState:h}))}else{var E=u[0];if(g&&(g.props.groupable||g.props.individualGroupable)){var S=g.moveables||[],x=sr(S,function(C){return C.props.target===E});x&&(h=O({},x.state))}return de(Qr,O({key:"single",ref:Ce(this,"moveable")},p,{target:E,firstRenderState:h}))}},n.componentDidMount=function(){this._checkChangeTargets(),this._updateRefs()},n.componentDidUpdate=function(){this._checkChangeTargets()},n.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},n.getTargets=function(){var r,i;return(i=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&i!==void 0?i:[]},n.updateSelectors=function(){this.selectorMap={},this._updateRefs()},n.waitToChangeTarget=function(){var r=this,i;return this._onChangeTargets=function(){r._onChangeTargets=null,i()},new Promise(function(a){i=a})},n.waitToChangeTargets=function(){return this.waitToChangeTarget()},n.getManager=function(){return this.moveable},n._updateRefs=function(r){var i=this.refTargets,a=xo(this.props.target||this.props.targets),s=typeof document<"u",o=yd(i,a),l=this.selectorMap,c={};return this.refTargets.forEach(function u(d){if(Ge(d)){var f=l[d];f?c[d]=l[d]:s&&(o=!0,c[d]=[].slice.call(document.querySelectorAll(d)))}else zt(d)&&d.forEach(u)}),this.refTargets=a,this.selectorMap=c,!r&&o&&this.forceUpdate(),a},n._checkChangeTargets=function(){var r,i,a,s=this._differ.update(this._elementTargets),o=s.added,l=s.removed,c=o.length||l.length;c&&((i=(r=this.props).onChangeTargets)===null||i===void 0||i.call(r,{moveable:this.moveable,targets:this._elementTargets}),(a=this._onChangeTargets)===null||a===void 0||a.call(this)),this._updateRefs()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,Lg([Qv(Wc)],e.prototype,"moveable",void 0),e}(wa),Jm=function(t){$r(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=Xo,e}(_d);function t2(t){var e;return e=function(n){$r(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(_d),e.defaultAbles=t,e}var t1=Jm,Ed="rgb",bd="rgba",Cd="hsl",xd="hsla",e2=[Ed,bd,Cd,xd],e1="function",r2="property",n2="array",r1="object",n1="string",i1="number",Yn="undefined",i2=typeof window!==Yn,_r=typeof document!==Yn&&document,Sd=null,a2=function(t){if(!_r)return"";var e=(_r.body||_r.documentElement).style,n=Sd.length;if(typeof e[t]!==Yn)return t;for(var r=0;r<n;++r){var i="-"+Sd[r]+"-"+t;if(typeof e[i]!==Yn)return i}return""},o2=null,s2=null,l2=null,c2=null,a1=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Jr=1e-7,u2=1/Jr,Zi={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o1(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function d2(t,e,n,r){return(t*r+e*n)/(n+r)}function f2(t){return typeof t===Yn}function tn(t){return t&&typeof t===r1}function Qi(t){return Array.isArray(t)}function jo(t){return typeof t===n1}function v2(t){return typeof t===i1}function wd(t){return typeof t===e1}function s1(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function Dd(t,e,n,r,i){var a=Uo(t,e,n);return a?n:l1(t,e,n+1,r,i)}function Uo(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function l1(t,e,n,r,i){for(var a=function(c){var u=e[c].trim();if(u===t.close&&!Uo(t,e,c))return{value:c};var d=c,f=qo(i,function(v){var p=v.open;return p===u});if(f&&(d=Dd(f,e,c,r,i)),d===-1)return s=c,"break";c=d,s=c},s,o=n;o<r;++o){var l=a(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Zo(t,e){var n=jo(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,c=n.openCloseCharacters,u=c===void 0?a1:c,d=u.map(function(C){var D=C.open,w=C.close;return D===w?D:D+"|"+w}).join("|"),f="(\\s*"+i+"\\s*|"+d+"|\\s+)",v=new RegExp(f,"g"),p=t.split(v).filter(function(C){return C&&C!=="undefined"}),h=p.length,g=[],m=[];function _(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var b=function(C){var D=p[C].trim(),w=C,k=qo(u,function(R){var P=R.open;return P===D}),T=qo(u,function(R){var P=R.close;return P===D});if(k){if(w=Dd(k,p,C,h,u),w!==-1&&l)return _()&&a||(g.push(p.slice(C,w+1).join("")),C=w,a)?(E=C,"break"):(E=C,"continue")}else if(T&&!Uo(T,p,C)){var M=o1(u);return M.splice(u.indexOf(T),1),{value:Zo(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:M})}}else if(s1(D,i)&&!s)return _(),a?(E=C,"break"):(E=C,"continue");w===-1&&(w=h-1),m.push(p.slice(C,w+1).join("")),C=w,E=C},E,S=0;S<h;++S){var x=b(S);if(S=E,typeof x=="object")return x.value;if(x==="break")break}return m.length&&g.push(m.join("")),g}function c1(t){return Zo(t,"")}function en(t){return Zo(t,",")}function Md(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function qi(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function Qo(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function p2(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function h2(t){return[].slice.call(t)}function kd(){return Date.now?Date.now():new Date().getTime()}function u1(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function d1(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=r-1;i>=0;--i)if(e(t[i],i,t))return i;return n}function g2(t,e,n){var r=d1(t,e);return r>-1?t[r]:n}function qo(t,e,n){var r=u1(t,e);return r>-1?t[r]:n}var m2=null,y2=null;function Td(t){return Object.keys(t)}function _2(t){var e=Td(t);return e.map(function(n){return t[n]})}function E2(t){var e=Td(t);return e.map(function(n){return[n,t[n]]})}function b2(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var i=e.indexOf(n),a=e.indexOf(r);return a===-1&&i===-1?0:i===-1?1:a===-1?-1:i-a})}function Rd(t,e){var n=qi(t),r=n.value,i=n.unit;if(tn(e)){var a=e[i];if(a){if(wd(a))return a(r);if(Zi[i])return Zi[i](r,a)}}else if(i==="%")return r*e/100;return Zi[i]?Zi[i](r):r}function Od(t,e,n){return Math.max(e,Math.min(t,n))}function Pd(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[rn(e[0],Jr),rn(e[0]/r,Jr)],[rn(e[1]*r,Jr),rn(e[1],Jr)]].filter(function(i){return i.every(function(a,s){var o=e[s],l=rn(o,Jr);return n?a<=o||a<=l:a>=o||a>=l})})[0]||t}function f1(t,e,n,r){if(!r)return t.map(function(v,p){return Od(v,e[p],n[p])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=Pd(t,e,!1,s),l=o[0],c=o[1],u=Pd(t,n,!0,s),d=u[0],f=u[1];return i<l||a<c?(i=l,a=c):(i>d||a>f)&&(i=d,a=f),[i,a]}function C2(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function v1(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Ad(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function p1(t){return[0,1].map(function(e){return v1(t.map(function(n){return n[e]}))})}function x2(t){var e=p1(t),n=Ad(e,t[0]),r=Ad(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function h1(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function rn(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function S2(t,e){return t.forEach(function(n,r){t[r]=rn(t[r],e)}),t}function w2(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function D2(t,e,n){var r=!1;return t.replace(e,function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r?i[0]:(r=!0,jo(n)?n:n.apply(void 0,i))})}function M2(t){return t.reduce(function(e,n){return e.concat(n)},[])}function g1(t){return t.reduce(function(e,n){return Qi(n)?e.push.apply(e,g1(n)):e.push(n),e},[])}function k2(t,e){t.indexOf(e)===-1&&t.push(e)}function m1(t){return t.replace("#","")}function Nd(t){var e=m1(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/255;return isNaN(a)&&(a=1),[n,r,i,a]}function y1(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),i=t.charAt(4),a=["#",e,e,n,n,r,r,i,i];return a.join("")}function _1(t){var e,n=t[0],r=t[1],i=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(n/60%2-1)),o=i-a/2,l;return n<60?l=[a,s,0]:n<120?l=[s,a,0]:n<180?l=[0,a,s]:n<240?l=[0,s,a]:n<300?l=[s,0,a]:n<360?l=[a,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function T2(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?Nd(y1(t)):Nd(t);if(t.indexOf("(")!==-1){var e=Md(t),n=e.prefix,r=e.value;if(!n||!r)return;var i=en(r),a=[0,0,0,1],s=i.length;switch(n){case Ed:case bd:for(var o=0;o<s;++o)a[o]=parseFloat(i[o]);return a;case Cd:case xd:for(var o=0;o<s;++o)i[o].indexOf("%")!==-1?a[o]=parseFloat(i[o])/100:a[o]=parseFloat(i[o]);return _1(a)}}}function R2(t,e){return _r?e?_r.querySelectorAll(t):_r.querySelector(t):e?[]:null}function E1(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function b1(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function O2(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function P2(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},i=Ue(n).getComputedStyle(n),a=e.length,s=0;s<a;++s)r[e[s]]=i[e[s]];return r}function Yt(t,e,n,r){t.addEventListener(e,n,r)}function Kt(t,e,n,r){t.removeEventListener(e,n,r)}function _e(t){return t?.ownerDocument||_r}function A2(t){return _e(t).documentElement}function N2(t){return _e(t).body}function Ue(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function C1(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Ld(t){return tn(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jo=function(t,e){return Jo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Jo(t,e)};function ts(t,e){Jo(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $n=function(){return $n=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$n.apply(this,arguments)};function x1(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var S1=function(t){ts(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return Ip(de(t1,$n({ref:Ce(this,"moveable")},this.state)),this.state.parentElement)},e}(Sa),w1=Um,D1=Wc,M1=jm,L2=null,k1=function(t){ts(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.tempElement=document.createElement("div");var s=$n({},i),o={};M1.forEach(function(c){o[Qo("on ".concat(c))]=function(u){return a.trigger(c,u)}}),wl(de(S1,$n({ref:Ce(a,"innerMoveable"),parentElement:r},s,o)),a.tempElement);var l=s.target;return Qi(l)&&l.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r){var i=this.innerMoveable;i.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r)},n.destroy=function(){wl(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=x1([pa(D1,function(r,i){r[i]||(r[i]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[i]))return o[i].apply(o,a)})}),pa(w1,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var s;this.setState((s={},s[i]=a,s))},enumerable:!0,configurable:!0})})],e),e}(zr),T1=function(t){ts(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(k1);function I2(t,e,n){return getElementInfo$1(t,e,n)}function B2(t,e){return makeAble$1(t,e)}var Id=I(23997),Bd=I(86261),Fd=I(5632);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var es=function(t,e){return es=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},es(t,e)};function R1(t,e){es(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Pt=function(){return Pt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pt.apply(this,arguments)};function O1(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function rs(t){return O1([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function P1(t){return t.touches&&t.touches.length>=2}function Ji(t){return t?t.touches?N1(t.touches):[Gd(t)]:[]}function A1(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function zd(t,e,n){var r=n.length,i=Hn(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,l=i.originalClientY,c=Hn(e,r),u=c.clientX,d=c.clientY,f=Hn(n,r),v=f.clientX,p=f.clientY,h=a-u,g=s-d,m=a-v,_=s-p;return{clientX:o,clientY:l,deltaX:h,deltaY:g,distX:m,distY:_}}function ns(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function N1(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(Gd(t[r]));return n}function Gd(t){return{clientX:t.clientX,clientY:t.clientY}}function Hn(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var i=t[r];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var is=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),rs(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),rs(e)-rs(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=zd(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);var n=this.prevClients;return this.startClients.map(function(r,i){return zd([e[i]],[n[i]],[r])})},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=Hn(e,this.length),i=Hn(this.prevClients,this.length),a=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(a*a+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),ns(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),ns(e)/ns(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t}(),Kd=["textarea","input"],L1=function(t){R1(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._window=window,i.onDragStart=function(f,v){if(v===void 0&&(v=!0),!(!i.flag&&f.cancelable===!1)){var p=f.type.indexOf("drag")>=-1;if(!(i.flag&&p)){i._isDragAPI=!0;var h=i.options,g=h.container,m=h.pinchOutside,_=h.preventWheelClick,b=h.preventRightClick,E=h.preventDefault,S=h.checkInput,x=h.dragFocusedInput,C=h.preventClickEventOnDragStart,D=h.preventClickEventOnDrag,w=h.preventClickEventByCondition,k=i._useTouch,T=!i.flag;if(i._isSecondaryButton=f.which===3||f.button===2,_&&(f.which===2||f.button===1)||b&&(f.which===3||f.button===2))return i.stop(),!1;if(T){var M=i._window.document.activeElement,R=f.target;if(R){var P=R.tagName.toLowerCase(),A=Kd.indexOf(P)>-1,L=R.isContentEditable;if(A||L){if(S||!x&&M===R)return!1;if(M&&(M===R||L&&M.isContentEditable&&M.contains(R)))if(x)R.blur();else return!1}else if((E||f.type==="touchstart")&&M){var F=M.tagName.toLowerCase();(M.isContentEditable||Kd.indexOf(F)>-1)&&M.blur()}(C||D||w)&&Yt(i._window,"click",i._onClick,!0)}i.clientStores=[new is(Ji(f))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=v,i._dragFlag=!0,i._prevInputEvent=f,i.data={},i.doubleFlag=kd()-i.prevTime<200,i._isMouseEvent=A1(f),!i._isMouseEvent&&i._preventMouseEvent&&(i._preventMouseEvent=!1);var B=i._preventMouseEvent||i.emit("dragStart",Pt(Pt({data:i.data,datas:i.data,inputEvent:f,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:v,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));B===!1&&i.stop(),i._isMouseEvent&&i.flag&&E&&f.preventDefault()}if(!i.flag)return!1;var z=0;if(T?(i._attchDragEvent(),k&&m&&(z=setTimeout(function(){Yt(g,"touchstart",i.onDragStart,{passive:!1})}))):k&&m&&Kt(g,"touchstart",i.onDragStart),i.flag&&P1(f)){if(clearTimeout(z),T&&f.touches.length!==f.changedTouches.length)return;i.pinchFlag||i.onPinchStart(f)}}}},i.onDrag=function(f,v){if(i.flag){var p=i.options.preventDefault;!i._isMouseEvent&&p&&f.preventDefault(),i._prevInputEvent=f;var h=Ji(f),g=i.moveClients(h,f,!1);if(i._dragFlag){if(i.pinchFlag||g.deltaX||g.deltaY){var m=i._preventMouseEvent||i.emit("drag",Pt(Pt({},g),{isScroll:!!v,inputEvent:f}));if(m===!1){i.stop();return}}i.pinchFlag&&i.onPinch(f,h)}i.getCurrentStore().getPosition(h,!0)}},i.onDragEnd=function(f){if(i.flag){var v=i.options,p=v.pinchOutside,h=v.container,g=v.preventClickEventOnDrag,m=v.preventClickEventOnDragStart,_=v.preventClickEventByCondition,b=i.isDrag;(g||m||_)&&requestAnimationFrame(function(){i._allowClickEvent()}),!_&&!m&&g&&!b&&i._allowClickEvent(),i._useTouch&&p&&Kt(h,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(f);var E=f?.touches?Ji(f):[],S=E.length;S===0||!i.options.keepDragging?i.flag=!1:i._addStore(new is(E));var x=i._getPosition(),C=kd(),D=!b&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=b||D?0:C,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Pt({data:i.data,datas:i.data,isDouble:D,isDrag:b,isClick:!b,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:f,isTrusted:i._isTrusted},x)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){i._preventMouseEvent=!1})})),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Kt(i._window,"click",i._onClick,!0)},i._onClick=function(f){i._allowClickEvent(),i._preventMouseEvent=!1;var v=i.options.preventClickEventByCondition;v?.(f)||(f.stopPropagation(),f.preventDefault())},i._onContextMenu=function(f){var v=i.options;v.preventRightClick?i.onDragEnd(f):f.preventDefault()},i._passCallback=function(){};var a=[].concat(n),s=a[0];i._window=C1(s)?s:Ue(s),i.options=Pt({checkInput:!1,container:s&&!("document"in s)?Ue(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=i.options,l=o.container,c=o.events,u=o.checkWindowBlur;if(i._useDrag=c.indexOf("drag")>-1,i._useTouch=c.indexOf("touch")>-1,i._useMouse=c.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(f){Yt(f,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(f){Yt(f,"mousedown",i.onDragStart),Yt(f,"mousemove",i._passCallback)}),Yt(l,"contextmenu",i._onContextMenu)),u&&Yt(Ue(),"blur",i.onBlur),i._useTouch){var d={passive:!1};a.forEach(function(f){Yt(f,"touchstart",i.onDragStart,d),Yt(f,"touchmove",i._passCallback,d)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(l){var c=l.clientX,u=l.clientY;return{clientX:c+i,clientY:u+a,originalClientX:c,originalClientY:u}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),Pt(Pt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),Kt(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){Kt(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){Kt(a,"mousedown",n.onDragStart)}),Kt(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){Kt(a,"touchstart",n.onDragStart)}),Kt(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new is(Ji(n));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",Pt(Pt({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Pt(Pt({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Pt(Pt({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),Pt(Pt({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(c,u){var d=u.getPosition();return c.distX+=d.distX,c.distY+=d.distY,c},a),o=s.distX,l=s.distY;return Pt(Pt({},a),{distX:o,distY:l})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Yt(r,"dragover",this.onDrag,i),Yt(n,"dragend",this.onDragEnd)),this._useMouse&&(Yt(r,"mousemove",this.onDrag),Yt(n,"mouseup",this.onDragEnd)),this._useTouch&&(Yt(r,"touchmove",this.onDrag,i),Yt(n,"touchend",this.onDragEnd,i),Yt(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(Kt(r,"dragover",this.onDrag),Kt(n,"dragend",this.onDragEnd)),this._useMouse&&(Kt(r,"mousemove",this.onDrag),Kt(n,"mouseup",this.onDragEnd)),this._useTouch&&(Kt(r,"touchstart",this.onDragStart),Kt(r,"touchmove",this.onDrag),Kt(n,"touchend",this.onDragEnd),Kt(n,"touchcancel",this.onDragEnd))},e}(zr),as=function(t,e){return as=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},as(t,e)};function I1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");as(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var B1="object",F1="string";function Wd(t){return t&&typeof t===B1}function Yd(t){return Array.isArray(t)}function $d(t){return typeof t===F1}function z1(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function os(t,e,n,r){t.addEventListener(e,n,r)}function ss(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ls=function(){return ls=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ls.apply(this,arguments)};function G1(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var K1=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Wd(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Wd(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=z1(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,G1(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(ls({listener:r},i))},t}();function W1(t,e){return e={exports:{}},t(e,e.exports),e.exports}var Vn=W1(function(t,e){function n(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return s[l];var u=String(l),d=r[u.toLowerCase()];if(d)return d;var d=i[u.toLowerCase()];if(d)return d;if(u.length===1)return u.charCodeAt(0)}n.isEventKey=function(c,u){if(c&&typeof c=="object"){var d=c.which||c.keyCode||c.charCode;if(d==null)return!1;if(typeof u=="string"){var f=r[u.toLowerCase()];if(f)return f===d;var f=i[u.toLowerCase()];if(f)return f===d}else if(typeof u=="number")return u===d;return!1}},e=t.exports=n;var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(a=97;a<123;a++)r[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)r[a-48]=a;for(a=1;a<13;a++)r["f"+a]=a+111;for(a=0;a<10;a++)r["numpad "+a]=a+96;var s=e.names=e.title={};for(a in r)s[r[a]]=a;for(var o in i)r[o]=i[o]}),F2=Vn.code,z2=Vn.codes,G2=Vn.aliases,Y1=Vn.names,K2=Vn.title,Hd={"+":"plus","left command":"meta","right command":"meta"},Vd={shift:1,ctrl:2,alt:3,meta:4};function Xd(t,e){var n=(Y1[t]||e||"").toLowerCase();for(var r in Hd)n=n.replace(r,Hd[r]);return n.replace(/\s/g,"")}function jd(t,e){e===void 0&&(e=Xd(t.keyCode,t.key));var n=$1(t);return n.indexOf(e)===-1&&n.push(e),n.filter(Boolean)}function $1(t){var e=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return e.filter(Boolean)}function Ud(t){var e=t.slice();return e.sort(function(n,r){var i=Vd[n]||5,a=Vd[r]||5;return i-a}),e}var Zd,H1=function(t){I1(e,t);function e(r){r===void 0&&(r=window);var i=t.call(this)||this;return i.container=r,i.ctrlKey=!1,i.altKey=!1,i.shiftKey=!1,i.metaKey=!1,i.clear=function(){return i.ctrlKey=!1,i.altKey=!1,i.shiftKey=!1,i.metaKey=!1,i},i.keydownEvent=function(a){i.triggerEvent("keydown",a)},i.keyupEvent=function(a){i.triggerEvent("keyup",a)},i.blur=function(){i.clear(),i.trigger("blur")},os(r,"blur",i.blur),os(r,"keydown",i.keydownEvent),os(r,"keyup",i.keyupEvent),i}var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return Zd||(Zd=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var r=this.container;this.clear(),this.off(),ss(r,"blur",this.blur),ss(r,"keydown",this.keydownEvent),ss(r,"keyup",this.keyupEvent)},n.keydown=function(r,i){return this.addEvent("keydown",r,i)},n.offKeydown=function(r,i){return this.removeEvent("keydown",r,i)},n.offKeyup=function(r,i){return this.removeEvent("keyup",r,i)},n.keyup=function(r,i){return this.addEvent("keyup",r,i)},n.addEvent=function(r,i,a){return Yd(i)?this.on(r+"."+Ud(i).join("."),a):$d(i)?this.on(r+"."+i,a):this.on(r,i),this},n.removeEvent=function(r,i,a){return Yd(i)?this.off(r+"."+Ud(i).join("."),a):$d(i)?this.off(r+"."+i,a):this.off(r,i),this},n.triggerEvent=function(r,i){this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey;var a=Xd(i.keyCode,i.key),s=a==="ctrl"||a==="shift"||a==="meta"||a==="alt",o={key:a,isToggle:s,inputEvent:i,keyCode:i.keyCode,ctrlKey:i.ctrlKey,altKey:i.altKey,shiftKey:i.shiftKey,metaKey:i.metaKey};this.trigger(r,o),this.trigger(r+"."+a,o);var l=jd(i,a);l.length>1&&this.trigger(r+"."+l.join("."),o)},e}(K1);const V1=H1;var Xn=function(){return Xn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xn.apply(this,arguments)};function cs(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Qd(t,e){return e===void 0&&(e=0),j1(U1(t,e))}function W2(t){return Qd(getComputedStyle(t).transform)}function us(t,e){var n=Gt(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function X1(t,e){e===void 0&&(e=document.body);for(var n=t,r=cs();n;){var i=getComputedStyle(n).transform;if(r=wn(Qd(i),r),n===e)break;n=n.parentElement}return r=he(r,4),r[12]=0,r[13]=0,r[14]=0,r}function j1(t){var e=cs();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function U1(t,e){e===void 0&&(e=0);var n=Qi(t)?t:c1(t);return n.map(function(r){var i=Md(r),a=i.prefix,s=i.value,o=null,l=a,c="";if(a==="translate"||a==="translateX"||a==="translate3d"){var u=tn(e)?Xn(Xn({},e),{"o%":e["%"]}):{"%":e,"o%":e},d=en(s).map(function(R,P){return P===0&&"x%"in u?u["%"]=e["x%"]:P===1&&"y%"in u?u["%"]=e["y%"]:u["%"]=e["o%"],Rd(R,u)}),f=d[0],v=d[1],p=v===void 0?0:v,h=d[2],g=h===void 0?0:h;o=Lr,c=[f,p,g]}else if(a==="translateY"){var m=tn(e)?Xn({"%":e["y%"]},e):{"%":e},p=Rd(s,m);o=Lr,c=[0,p,0]}else if(a==="translateZ"){var g=parseFloat(s);o=Lr,c=[0,0,g]}else if(a==="scale"||a==="scale3d"){var _=en(s).map(function(R){return parseFloat(R)}),b=_[0],E=_[1],S=E===void 0?b:E,x=_[2],C=x===void 0?1:x;o=We,c=[b,S,C]}else if(a==="scaleX"){var b=parseFloat(s);o=We,c=[b,1,1]}else if(a==="scaleY"){var S=parseFloat(s);o=We,c=[1,S,1]}else if(a==="scaleZ"){var C=parseFloat(s);o=We,c=[1,1,C]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var D=qi(s),w=D.unit,k=D.value,T=w==="rad"?k:k*Math.PI/180;a==="rotate"||a==="rotateZ"?(l="rotateZ",o=rc):a==="rotateX"?o=tc:a==="rotateY"&&(o=ec),c=T}else if(a==="matrix3d")o=wn,c=en(s).map(function(R){return parseFloat(R)});else if(a==="matrix"){var M=en(s).map(function(R){return parseFloat(R)});o=wn,c=[M[0],M[1],0,0,M[2],M[3],0,0,0,0,1,0,M[4],M[5],0,1]}else l="";return{name:a,functionName:l,value:s,matrixFunction:o,functionValue:c}})}function Z1(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var Q1=Z1;function q1(t){return Q1(t).toString(36)}function J1(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function ty(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?en(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function ey(t,e,n,r,i){var a=_e(r),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=ty(t,e,n),(i||a.head||a.body).appendChild(s),s}function ry(t){var e="rCS"+q1(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=J1(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=ey(e,t,r,n,i);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,l=parseFloat(a.getAttribute("data-styled-count"))||0;l<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(l-1))}}}}}const ny=ry;var ds=function(t,e){return ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ds(t,e)};function qd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ds(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var At=function(){return At=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},At.apply(this,arguments)};function iy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ay(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function jn(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function oy(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}else return{clientX:t.clientX,clientY:t.clientY}}function sy(t){if(typeof Map>"u")return t.filter(function(n,r){return t.indexOf(n)===r});var e=new Map;return t.filter(function(n){return e.has(n)?!1:(e.set(n,!0),!0)})}function ly(t,e,n){var r=_e(t);return r.elementFromPoint&&r.elementFromPoint(e,n)||null}function Jd(t,e,n){var r=t.tag,i=t.children,a=t.attributes,s=t.className,o=t.style,l=e||_e(n).createElement(r);for(var c in a)l.setAttribute(c,a[c]);var u=l.children;if(i.forEach(function(f,v){Jd(f,u[v],l)}),s&&s.split(/\s+/g).forEach(function(f){f&&!E1(l,f)&&b1(l,f)}),o){var d=l.style;for(var c in o)d[c]=o[c]}return!e&&n&&n.appendChild(l),l}function cy(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.className,s=a===void 0?"":a,o=i.style,l=o===void 0?{}:o,c=iy(i,["className","style"]);return{tag:t,className:s,style:l,attributes:c,children:n}}function fs(t,e,n){t!==e&&n(t,e)}function tf(t,e,n){var r;n===void 0&&(n=t.data.boundArea);var i=t.distX,a=i===void 0?0:i,s=t.distY,o=s===void 0?0:s,l=t.data,c=l.startX,u=l.startY;if(e>0){var d=Math.sqrt((a*a+o*o)/(1+e*e)),f=e*d;a=(a>=0?1:-1)*f,o=(o>=0?1:-1)*d}var v=Math.abs(a),p=Math.abs(o),h=a<0?c-n.left:n.right-c,g=o<0?u-n.top:n.bottom-u;r=f1([v,p],[0,0],[h,g],!!e),v=r[0],p=r[1],a=(a>=0?1:-1)*v,o=(o>=0?1:-1)*p;var m=Math.min(0,a),_=Math.min(0,o),b=c+m,E=u+_;return{left:b,top:E,right:b+v,bottom:E+p,width:v,height:p}}function ta(t){var e=t.getBoundingClientRect(),n=e.left,r=e.top,i=e.width,a=e.height;return{pos1:[n,r],pos2:[n+i,r],pos3:[n,r+a],pos4:[n+i,r+a]}}function ef(t,e,n){var r=Fr(t,e),i=r.list,a=r.prevList,s=r.added,o=r.removed,l=r.maintained;return jn(jn(jn([],s.map(function(c){return i[c]}),!0),o.map(function(c){return a[c]}),!0),n?l.map(function(c){var u=c[1];return i[u]}):[],!0)}function rf(t){for(var e=0,n=t.length,r=1;r<n;++r)e=Math.max(h1(t[r],t[r-1]),e);return e}var nf=ny(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),af="selecto-selection ".concat(nf.className),of=["className","boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],Y2=jn(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],of,!0),$2={className:String,boundContainer:null,portalContainer:null,container:null,dragContainer:null,selectableTargets:Array,selectByClick:Boolean,selectFromInside:Boolean,continueSelect:Boolean,toggleContinueSelect:Array,toggleContinueSelectWithoutDeselect:Array,keyContainer:null,hitRate:Number,scrollOptions:Object,checkInput:Boolean,preventDefault:Boolean,cspNonce:String,ratio:Number,getElementRect:Function,preventDragFromInside:Boolean,rootContainer:Object,dragCondition:Function,clickBySelectEnd:Boolean,continueSelectWithoutDeselect:Boolean,preventClickEventOnDragStart:Boolean,preventClickEventOnDrag:Boolean,checkOverflow:Boolean,innerScrollOptions:Object},H2=null,V2=null,uy=function(t){qd(e,t);function e(r){r===void 0&&(r={});var i=t.call(this)||this;i.selectedTargets=[],i.dragScroll=new Pc,i._onDragStart=function(o,l){var c=o.data,u=o.clientX,d=o.clientY,f=o.inputEvent,v=i.options,p=v.selectFromInside,h=v.selectByClick,g=v.rootContainer,m=v.boundContainer,_=v.preventDragFromInside,b=_===void 0?!0:_,E=v.clickBySelectEnd,S=v.dragCondition;if(S&&!S(o)){o.stop();return}c.data={};var x=Ue(i.container);c.innerWidth=x.innerWidth,c.innerHeight=x.innerHeight,i.findSelectableTargets(c),c.startSelectedTargets=i.selectedTargets,c.scaleMatrix=cs(),c.containerX=0,c.containerY=0;var C=i.container,D={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(g){var w=i.container.getBoundingClientRect();c.containerX=w.left,c.containerY=w.top,c.scaleMatrix=X1(i.container,g)}if(m){var k=tn(m)&&"element"in m?At({left:!0,top:!0,bottom:!0,right:!0},m):{element:m,left:!0,top:!0,bottom:!0,right:!0},T=k.element,M=void 0;if(T){jo(T)?M=_e(C).querySelector(T):T===!0?M=i.container:M=T;var R=M.getBoundingClientRect();k.left&&(D.left=R.left),k.top&&(D.top=R.top),k.right&&(D.right=R.right),k.bottom&&(D.bottom=R.bottom)}}c.boundArea=D;var P={left:u,top:d,right:u,bottom:d,width:0,height:0},A=[];if(!p||h&&!E){var L=i._findElement(l||f.target,c.selectableTargets);A=L?[L]:[]}var F=A.length>0,B=!p&&F;if(B&&!h)return o.stop(),!1;var z=f.type,N=z==="mousedown"||z==="touchstart",G=!o.isClick&&N?i.emit("dragStart",At(At({},o),{data:c.data})):!0;if(!G)return o.stop(),!1;if(i.continueSelect?(A=ef(i.selectedTargets,A,i.continueSelectWithoutDeselect),c.startPassedTargets=i.selectedTargets):c.startPassedTargets=[],i._select(A,P,o,!0,B&&h&&!E&&b),c.startX=u,c.startY=d,c.selectFlag=!1,c.preventDragFromInside=!1,f.target){var K=us(c.scaleMatrix,[u-c.containerX,d-c.containerY]);i.target.style.cssText+="position: ".concat(g?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(K[0],"px, ").concat(K[1],"px)")}if(B&&h&&!E)f.preventDefault(),b&&(i._selectEnd(c.startSelectedTargets,c.startPassedTargets,P,o,!0),c.preventDragFromInside=!0);else{c.selectFlag=!0;var H=i.options,$=H.scrollOptions,W=H.innerScrollOptions,j=!1;if(W){for(var q=o.inputEvent,et=q.target,rt=null,V=et;V&&V!==_e(C).body;){var U=getComputedStyle(V).overflow!=="visible";if(U){rt=V;break}V=V.parentElement}rt&&(c.innerScrollOptions=At({container:rt,checkScrollEvent:!0},W===!0?{}:W),i.dragScroll.dragStart(o,c.innerScrollOptions),j=!0)}!j&&$&&$.container&&i.dragScroll.dragStart(o,$),E&&(c.selectFlag=!1,o.preventDrag())}return!0},i._onDrag=function(o){if(o.data.selectFlag){var l=i.scrollOptions,c=o.data.innerScrollOptions,u=c||l?.container;if(u&&!o.isScroll&&i.dragScroll.drag(o,c||l))return}i._checkSelected(o)},i._onDragEnd=function(o){var l=o.data,c=o.inputEvent,u=tf(o,i.options.ratio),d=l.selectFlag,f=i.container;if(c&&i.emit("dragEnd",At(At({isDouble:!!o.isDouble,isClick:!!o.isClick,isDrag:!1,isSelect:d},o),{data:l.data,rect:u})),i.target.style.cssText+="display: none;",d)l.selectFlag=!1,i.dragScroll.dragEnd();else if(i.selectByClick&&i.clickBySelectEnd){var v=i._findElement(c?.target||ly(f,o.clientX,o.clientY),l.selectableTargets);i._select(v?[v]:[],u,o)}l.preventDragFromInside||i._selectEnd(l.startSelectedTargets,l.startPassedTargets,u,o)},i._onKeyDown=function(o){var l=i.options,c=!1;if(!i._keydownContinueSelect){var u=i._sameCombiKey(o,l.toggleContinueSelect);i._keydownContinueSelect=u,c||(c=u)}if(!i._keydownContinueSelectWithoutDeselection){var u=i._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect);i._keydownContinueSelectWithoutDeselection=u,c||(c=u)}c&&i.emit("keydown",{keydownContinueSelect:i._keydownContinueSelect,keydownContinueSelectWithoutDeselection:i._keydownContinueSelectWithoutDeselection})},i._onKeyUp=function(o){var l=i.options,c=!1;if(i._keydownContinueSelect){var u=i._sameCombiKey(o,l.toggleContinueSelect,!0);i._keydownContinueSelect=!u,c||(c=u)}if(i._keydownContinueSelectWithoutDeselection){var u=i._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect,!0);i._keydownContinueSelectWithoutDeselection=!u,c||(c=u)}c&&i.emit("keyup",{keydownContinueSelect:i._keydownContinueSelect,keydownContinueSelectWithoutDeselection:i._keydownContinueSelectWithoutDeselection})},i._onBlur=function(){(i._keydownContinueSelect||i._keydownContinueSelectWithoutDeselection)&&(i._keydownContinueSelect=!1,i._keydownContinueSelectWithoutDeselection=!1,i.emit("keyup",{keydownContinueSelect:i._keydownContinueSelect,keydownContinueSelectWithoutDeselection:i._keydownContinueSelectWithoutDeselection}))},i._onDocumentSelectStart=function(o){var l=_e(i.container);if(i.gesto.isFlag()){var c=i.dragContainer;c===Ue(i.container)&&(c=l.documentElement);var u=Ld(c)?[c]:[].slice.call(c),d=o.target;u.some(function(f){if(f===d||f.contains(d))return o.preventDefault(),!0})}},i.target=r.portalContainer;var a=r.container;i.options=At({className:"",portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:ta,cspNonce:"",ratio:0},r);var s=i.options.portalContainer;return s&&(a=s.parentElement),i.container=a||document.body,i.initElement(),i.initDragScroll(),i.setKeyController(),i}var n=e.prototype;return n.setSelectedTargets=function(r){var i=this.selectedTargets,a=Fr(i,r),s=a.added,o=a.removed,l=a.prevList,c=a.list;return this.selectedTargets=r,{added:s.map(function(u){return c[u]}),removed:o.map(function(u){return l[u]}),beforeSelected:i,selected:r}},n.setSelectedTargetsByPoints=function(r,i){var a=Math.min(r[0],i[0]),s=Math.min(r[1],i[1]),o=Math.max(r[0],i[0]),l=Math.max(r[1],i[1]),c={left:a,top:s,right:o,bottom:l,width:o-a,height:l-s},u={ignoreClick:!0};this.findSelectableTargets(u);var d=this.hitTest(c,u),f=this.setSelectedTargets(d);return At(At({},f),{rect:c})},n.selectTargetsByPoints=function(r,i){var a=new MouseEvent("mousedown",{clientX:r[0],clientY:r[1],cancelable:!0,bubbles:!0}),s=new MouseEvent("mousemove",{clientX:i[0],clientY:i[1],cancelable:!0,bubbles:!0}),o=new MouseEvent("mousemove",{clientX:i[0],clientY:i[1],cancelable:!0,bubbles:!0}),l=this.gesto,c=l.onDragStart(a);c!==!1&&(l.onDrag(s),l.onDragEnd(o))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(r){return this.gesto.triggerDragStart(r),this},n.destroy=function(){var r;this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),Kt(document,"selectstart",this._onDocumentSelectStart),this.options.portalContainer||(r=this.target.parentElement)===null||r===void 0||r.removeChild(this.target),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(r){var i=this.getElementRect||ta,a=i(r),s=[a.pos1,a.pos2,a.pos4,a.pos3];if(i!==ta){var o=r.getBoundingClientRect();return Ya(s,o)}return s},n.getSelectableElements=function(){var r=this.container,i=[];return this.options.selectableTargets.forEach(function(a){if(wd(a)){var s=a();s&&i.push.apply(i,[].slice.call(s))}else if(Ld(a))i.push(a);else if(tn(a))i.push(a.value||a.current);else{var o=[].slice.call(_e(r).querySelectorAll(a));i.push.apply(i,o)}}),i},n.checkScroll=function(){if(this.gesto.isFlag()){var r=this.scrollOptions,i=this.gesto.getEventData().innerScrollOptions,a=i||r?.container;a&&this.dragScroll.checkScroll(At({inputEvent:this.gesto.getCurrentEvent()},i||r))}},n.findSelectableTargets=function(r){var i=this;r===void 0&&(r=this.gesto.getEventData());var a=this.getSelectableElements(),s=a.map(function(d){return i.getElementPoints(d)});r.selectableTargets=a,r.selectablePoints=s,r.selectableParentMap=null;var o=this.options,l=o.checkOverflow||o.innerScrollOptions,c=_e(this.container);if(l){var u=new Map;r.selectableInnerScrollParentMap=u,r.selectableInnerScrollPathsList=a.map(function(d,f){for(var v=d.parentElement,p=[],h=[],g=function(){var m=u.get(v);if(!m){var _=getComputedStyle(v).overflow!=="visible";if(_){var b=ta(v);m={parentElement:v,indexes:[],points:[b.pos1,b.pos2,b.pos4,b.pos3],paths:jn([],h,!0)},p.push(v),p.forEach(function(E){u.set(E,m)}),p=[]}}m?(v=m.parentElement,u.get(v).indexes.push(f),h.push(v)):p.push(v),v=v.parentElement};v&&v!==c.body;)g();return h})}return o.checkOverflow||(r.selectableInners=a.map(function(){return!0})),this._refreshGroups(r),a},n.clickTarget=function(r,i){var a=oy(r),s=a.clientX,o=a.clientY,l={data:{selectFlag:!1},clientX:s,clientY:o,inputEvent:r,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(l,i)&&this._onDragEnd(l),this},n.setKeyController=function(){var r=this.options,i=r.keyContainer,a=r.toggleContinueSelect,s=r.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(a||s)&&(this.keycon=new V1(i||Ue(this.container)),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setClassName=function(r){this.options.className=r,this.target.setAttribute("class","".concat(af," ").concat(r||""))},n.setKeyEvent=function(){var r=this.options,i=r.toggleContinueSelect,a=r.toggleContinueSelectWithoutDeselect;!i&&!a||this.keycon||this.setKeyController()},n.setKeyContainer=function(r){var i=this,a=this.options;fs(a.keyContainer,r,function(){a.keyContainer=r,i.setKeyController()})},n.getContinueSelect=function(){var r=this.options,i=r.continueSelect,a=r.toggleContinueSelect;return!a||!this._keydownContinueSelect?i:!i},n.getContinueSelectWithoutDeselect=function(){var r=this.options,i=r.continueSelectWithoutDeselect,a=r.toggleContinueSelectWithoutDeselect;return!a||!this._keydownContinueSelectWithoutDeselection?i:!i},n.setToggleContinueSelect=function(r){var i=this,a=this.options;fs(a.toggleContinueSelect,r,function(){a.toggleContinueSelect=r,i.setKeyEvent()})},n.setToggleContinueSelectWithoutDeselect=function(r){var i=this,a=this.options;fs(a.toggleContinueSelectWithoutDeselect,r,function(){a.toggleContinueSelectWithoutDeselect=r,i.setKeyEvent()})},n.setPreventDefault=function(r){this.gesto.options.preventDefault=r},n.setCheckInput=function(r){this.gesto.options.checkInput=r},n.initElement=function(){var r=this.options,i=r.dragContainer,a=r.checkInput,s=r.preventDefault,o=r.preventClickEventOnDragStart,l=r.preventClickEventOnDrag,c=r.preventClickEventByCondition,u=r.preventRightClick,d=u===void 0?!0:u,f=r.className,v=this.container;this.target=Jd(cy("div",{className:"".concat(af," ").concat(f||"")}),this.target,v);var p=this.target;this.dragContainer=typeof i=="string"?[].slice.call(_e(v).querySelectorAll(i)):i||this.target.parentNode,this.gesto=new L1(this.dragContainer,{checkWindowBlur:!0,container:Ue(v),checkInput:a,preventDefault:s,preventClickEventOnDragStart:o,preventClickEventOnDrag:l,preventClickEventByCondition:c,preventRightClick:d}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),Yt(document,"selectstart",this._onDocumentSelectStart),this.injectResult=nf.inject(p,{nonce:this.options.cspNonce})},n.hitTest=function(r,i,a){var s=this.options,o=s.hitRate,l=s.selectByClick,c=r.left,u=r.top,d=r.right,f=r.bottom,v=i.innerGroups,p=i.innerWidth,h=i.innerHeight,g=a?.clientX,m=a?.clientY,_=i.ignoreClick,b=[[c,u],[d,u],[d,f],[c,f]],E=function(F,B){var z=qi(typeof o=="function"?"".concat(o(B)):"".concat(o)),N=_?!1:mi([g,m],F);if(l&&N)return!0;var G=Xa(b,F);if(!G.length)return!1;var K=On(G),H=0;if(K===0&&On(F)===0?(H=rf(F),K=rf(G)):H=On(F),z.unit==="px")return K>=z.value;var $=Od(Math.round(K/H*100),0,100);return $>=Math.min(100,z.value)},S=i.selectableTargets,x=i.selectablePoints,C=i.selectableInners;if(!v)return S.filter(function(F,B){return C[B]?E(x[B],S[B]):!1});for(var D=[],w=Math.floor(c/p),k=Math.floor(d/p),T=Math.floor(u/h),M=Math.floor(f/h),R=w;R<=k;++R){var P=v[R];if(P)for(var A=T;A<=M;++A){var L=P[A];L&&L.forEach(function(F){var B=x[F],z=C[F],N=S[F];z&&E(B,N)&&D.push(N)})}}return sy(D)},n.initDragScroll=function(){var r=this;this.dragScroll.on("scrollDrag",function(i){var a=i.next;a(r.gesto.getCurrentEvent())}).on("scroll",function(i){var a=i.container,s=i.direction,o=r.gesto.getEventData().innerScrollOptions;o?r.emit("innerScroll",{container:a,direction:s}):r.emit("scroll",{container:a,direction:s})}).on("move",function(i){var a=i.offsetX,s=i.offsetY,o=i.inputEvent,l=r.gesto;if(!(!l||!l.isFlag())){var c=r.gesto.getEventData(),u=c.boundArea;c.startX-=a,c.startY-=s;var d=r.gesto.getEventData().innerScrollOptions,f=d?.container,v=!1;if(f){var p=c.selectableInnerScrollParentMap,h=p.get(f);h&&(h.paths.forEach(function(g){var m=p.get(g);m.points.forEach(function(_){_[0]-=a,_[1]-=s})}),h.indexes.forEach(function(g){c.selectablePoints[g].forEach(function(m){m[0]-=a,m[1]-=s})}),v=!0)}v||c.selectablePoints.forEach(function(g){g.forEach(function(m){m[0]-=a,m[1]-=s})}),r._refreshGroups(c),u.left-=a,u.right-=a,u.top-=s,u.bottom-=s,r.gesto.scrollBy(a,s,o.inputEvent),r._checkSelected(r.gesto.getCurrentEvent())}})},n._select=function(r,i,a,s,o){o===void 0&&(o=!1);var l=a.inputEvent,c=a.data,u=this.setSelectedTargets(r),d=Fr(c.startSelectedTargets,r),f=d.added,v=d.removed,p=d.prevList,h=d.list,g={startSelected:p,startAdded:f.map(function(m){return h[m]}),startRemoved:v.map(function(m){return p[m]})};s&&this.emit("selectStart",At(At(At({},u),g),{rect:i,inputEvent:l,data:c.data,isTrusted:a.isTrusted,isDragStartEnd:o})),(u.added.length||u.removed.length)&&this.emit("select",At(At(At({},u),g),{rect:i,inputEvent:l,data:c.data,isTrusted:a.isTrusted,isDragStartEnd:o}))},n._selectEnd=function(r,i,a,s,o){o===void 0&&(o=!1);var l=s.inputEvent,c=s.isDouble,u=s.data,d=l&&l.type,f=d==="mousedown"||d==="touchstart",v=Fr(r,this.selectedTargets),p=v.added,h=v.removed,g=v.prevList,m=v.list,_=Fr(i,this.selectedTargets),b=_.added,E=_.removed,S=_.prevList,x=_.list;this.emit("selectEnd",{startSelected:r,beforeSelected:i,selected:this.selectedTargets,added:p.map(function(C){return m[C]}),removed:h.map(function(C){return g[C]}),afterAdded:b.map(function(C){return x[C]}),afterRemoved:E.map(function(C){return S[C]}),isDragStart:f&&o,isDragStartEnd:f&&o,isClick:!!s.isClick,isDouble:!!c,rect:a,inputEvent:l,data:u.data,isTrusted:s.isTrusted})},n._checkSelected=function(r,i){i===void 0&&(i=tf(r,this.options.ratio));var a=r.data,s=i.top,o=i.left,l=i.width,c=i.height,u=a.selectFlag,d=a.containerX,f=a.containerY,v=a.scaleMatrix,p=us(v,[o-d,s-f]),h=us(v,[l,c]),g=[];if(u){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(p[0],"px, ").concat(p[1],"px);")+"width:".concat(h[0],"px;height:").concat(h[1],"px;");var m=this.hitTest(i,a,r);g=ef(a.startPassedTargets,m,this.continueSelect&&this.continueSelectWithoutDeselect)}var _=this.emit("drag",At(At({},r),{data:a.data,isSelect:u,rect:i}));if(_===!1){this.target.style.cssText+="display: none;",r.stop();return}u&&this._select(g,i,r)},n._sameCombiKey=function(r,i,a){if(!i)return!1;var s=jd(r.inputEvent,r.key),o=[].concat(i),l=Qi(o[0])?o:[o];if(a){var c=r.key;return l.some(function(u){return u.some(function(d){return d===c})})}return l.some(function(u){return u.every(function(d){return s.indexOf(d)>-1})})},n._findElement=function(r,i){for(var a=r;a&&!(i.indexOf(a)>-1);)a=a.parentElement;return a},n._refreshGroups=function(r){var i,a=r.innerWidth,s=r.innerHeight,o=r.selectablePoints;if(this.options.checkOverflow){var l=(i=this.gesto.getEventData().innerScrollOptions)===null||i===void 0?void 0:i.container,c=r.selectableInnerScrollParentMap,u=r.selectableInnerScrollPathsList;r.selectableInners=u.map(function(v,p){var h=!1;return v.every(function(g){if(h)return!0;if(g===l)return h=!0,!0;var m=c.get(g);if(m){var _=o[p],b=m.points,E=Xa(_,b);if(!E.length)return!1}return!0})})}if(!a||!s)r.innerGroups=null;else{var d=r.selectablePoints,f={};d.forEach(function(v,p){var h=1/0,g=-1/0,m=1/0,_=-1/0;v.forEach(function(S){var x=Math.floor(S[0]/a),C=Math.floor(S[1]/s);h=Math.min(x,h),g=Math.max(x,g),m=Math.min(C,m),_=Math.max(C,_)});for(var b=h;b<=g;++b)for(var E=m;E<=_;++E)f[b]=f[b]||{},f[b][E]=f[b][E]||[],f[b][E].push(p)}),r.innerGroups=f}},e=ay([pa(of,function(r,i){var a={enumerable:!0,configurable:!0,get:function(){return this.options[i]}},s=Qo("get ".concat(i));r[s]?a.get=function(){return this[s]()}:a.get=function(){return this.options[i]};var o=Qo("set ".concat(i));r[o]?a.set=function(c){this[o](c)}:a.set=function(c){this.options[i]=c},Object.defineProperty(r,i,a)})],e),e}(zr),dy=function(t){qd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(uy);const fy=dy;var Un=I(70393),Zn=I(56501),Ne=I(85001),vy=I(53790);const py=({scene:t,panel:e})=>{const n=e.state.openInlineEdit,[r,i]=(0,y.useState)(!1),[a,s]=(0,y.useState)({x:0,y:0}),o=hy(),l=t.selecto?.getSelectedTargets(),c=e.context?.instanceState?.layer,u=(0,y.useCallback)(p=>{if(!(p instanceof MouseEvent))return;p.preventDefault(),e.setActivePanel(),p.currentTarget!==t.div&&(p.currentTarget instanceof HTMLElement||p.currentTarget instanceof SVGElement)&&t.select({targets:[p.currentTarget]}),s({x:p.pageX,y:p.pageY}),i(!0)},[t,e]);(0,y.useEffect)(()=>{t.selecto&&t.selecto.getSelectableElements().forEach(p=>{p.addEventListener("contextmenu",u)})},[u,t.selecto]),(0,y.useEffect)(()=>{t.div&&t.div.addEventListener("contextmenu",u)},[u,t.div]);const d=()=>{i(!1)},f=()=>{const p=!t.isPanelEditing&&y.createElement(Ne.s,{label:n?"Close Editor":"Open Editor",onClick:()=>{t.inlineEditingCallback&&(n?e.closeInlineEdit():t.inlineEditingCallback()),d()},className:o.menuItem}),h=()=>{if(l?.length===1){const E=()=>{t.editModeEnabled.next(!0),d()},S=t.findElementByTarget(l[0]);return S&&S.item.hasEditMode&&y.createElement(Ne.s,{label:"Edit",onClick:E,className:o.menuItem})}return null},g=oi(t.shouldShowAdvancedTypes).options,m=()=>{const E=[],S=x=>{let C=a.y,D=a.x;if(t.div){const w=t.div.getBoundingClientRect();C=C-w.top,D=D-w.left}fa(x,c,{...a,y:C,x:D})};return g.map(x=>{E.push(y.createElement(Ne.s,{key:x.value,label:x.label??"Canvas item",onClick:()=>S(x)}))}),E},_=!t.isPanelEditing&&y.createElement(Ne.s,{label:"Add item",className:o.menuItem,childItems:m(),customSubMenuContainerStyles:{maxHeight:"150px",overflowY:"auto"}}),b=!t.isPanelEditing&&y.createElement(Ne.s,{label:"Set background",onClick:()=>{t.setBackgroundCallback&&t.setBackgroundCallback(a),d()},className:o.menuItem});return l&&l.length>=1?y.createElement(y.Fragment,null,h(),y.createElement(Ne.s,{label:"Delete",onClick:()=>{v(Ut.Delete),d()},className:o.menuItem}),y.createElement(Ne.s,{label:"Duplicate",onClick:()=>{v(Ut.Duplicate),d()},className:o.menuItem}),y.createElement(Ne.s,{label:"Bring to front",onClick:()=>{v(Ut.MoveTop),d()},className:o.menuItem}),y.createElement(Ne.s,{label:"Send to back",onClick:()=>{v(Ut.MoveBottom),d()},className:o.menuItem}),p):y.createElement(y.Fragment,null,p,b,_)},v=p=>{t.selection.pipe((0,Fd.P)()).subscribe(h=>{const g=h[0].parent;h.forEach(m=>{g.doAction(p,m)})}),setTimeout(()=>{t.addToSelection(),t.targetsToSelect.clear()})};return r?y.createElement("div",{onContextMenu:p=>{p.preventDefault(),d()}},y.createElement(vy.x,{x:a.x,y:a.y,onClose:d,renderMenuItems:f,focusOnOpen:!1})):y.createElement(y.Fragment,null)},hy=()=>({menuItem:(0,Y.css)`
    max-width: 200px;
  `});var gy=I(41056),my=I(17037),yy=I(41013),_y=I(80583);const Ey=({scene:t})=>{const e=(0,Et.wW)(by),n=()=>{t?.tooltipCallback&&t.tooltip&&t.tooltipCallback(void 0)},r=(0,y.createRef)(),{overlayProps:i}=(0,my.Ir)({onClose:n,isDismissable:!0},r),{dialogProps:a}=(0,gy.R)({},r),s=t.tooltip?.element;if(!s)return y.createElement(y.Fragment,null);const o=()=>s.data?.links&&s.data?.links.length>0&&y.createElement("div",null,y.createElement(Te.wc,null,s.data?.links?.map((l,c)=>y.createElement(kr.Qj,{key:c,icon:"external-link-alt",target:l.target,href:l.href,onClick:l.onClick,fill:"text",style:{width:"100%"}},l.title))));return y.createElement(y.Fragment,null,t.tooltip?.element&&t.tooltip.anchorPoint&&y.createElement(Un.h_,null,y.createElement(yy.S,{position:{x:t.tooltip.anchorPoint.x,y:t.tooltip.anchorPoint.y},offset:{x:5,y:0},allowPointerEvents:t.tooltip.isOpen},y.createElement("section",{ref:r,...i,...a},t.tooltip.isOpen&&y.createElement(_y.P,{style:{zIndex:1},onClick:n}),y.createElement("div",{className:e.wrapper},o())))))},by=t=>({wrapper:(0,Y.css)`
    margin-top: 20px;
    background: ${t.colors.background.primary};
  `}),sf="connectionControl",lf="connection anchor",vs=8,Er=3,Cy=({setRef:t,handleMouseLeave:e})=>{const n=(0,y.useRef)(null),r=(0,Et.wW)(xy),i=2.5,a=5.5,s="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1cHgiIGhlaWdodD0iNXB4IiB2ZXJzaW9uPSIxLjEiPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2Utd2lkdGg9IjIiIHN0eWxlPSJzdHJva2Utb3BhY2l0eTowLjQiIHN0cm9rZT0iI2ZmZmZmZiIvPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2U9IiMyOWI2ZjIiLz48L3N2Zz4=",o=f=>{f.target instanceof HTMLImageElement&&n.current&&f.target.style&&(n.current.style.display="block",n.current.style.top=`calc(${f.target.style.top} - ${a}px + ${Er}px)`,n.current.style.left=`calc(${f.target.style.left} - ${a}px + ${Er}px)`)},l=()=>{n.current&&(n.current.style.display="none")},c=f=>{e(f)&&l()},u=[{x:-1,y:1},{x:-.5,y:1},{x:0,y:1},{x:.5,y:1},{x:1,y:1},{x:1,y:.5},{x:1,y:0},{x:1,y:-.5},{x:1,y:-1},{x:.5,y:-1},{x:0,y:-1},{x:-.5,y:-1},{x:-1,y:-1},{x:-1,y:-.5},{x:-1,y:0},{x:-1,y:.5}],d=(f=u)=>f.map(v=>{const p=`${v.x},${v.y}`,h={top:`calc(${-v.y*50+50}% - ${i}px - ${Er}px)`,left:`calc(${v.x*50+50}% - ${i}px - ${Er}px)`};return y.createElement("img",{id:p,key:p,alt:lf,className:r.anchor,style:h,src:s,onMouseEnter:o})});return y.createElement("div",{className:r.root,ref:t},y.createElement("div",{className:r.mouseoutDiv,onMouseOut:c,onBlur:c}),y.createElement("div",{id:sf,ref:n,className:r.highlightElement,onMouseLeave:l}),d())},xy=t=>({root:(0,Y.css)`
    position: absolute;
    display: none;
  `,mouseoutDiv:(0,Y.css)`
    position: absolute;
    margin: -30px;
    width: calc(100% + 60px);
    height: calc(100% + 60px);
  `,anchor:(0,Y.css)`
    padding: ${Er}px;
    position: absolute;
    cursor: cursor;
    width: calc(5px + 2 * ${Er}px);
    height: calc(5px + 2 * ${Er}px);
    z-index: 100;
    pointer-events: auto !important;
  `,highlightElement:(0,Y.css)`
    background-color: #00ff00;
    opacity: 0.3;
    position: absolute;
    cursor: cursor;
    position: absolute;
    pointer-events: auto;
    width: 16px;
    height: 16px;
    border-radius: ${t.shape.radius.circle};
    display: none;
    z-index: 110;
  `});let Sy=0;const wy=["input","textarea"],Dy=({setSVGRef:t,setLineRef:e,scene:n})=>{const r=(0,Et.wW)(My),i=Date.now()+"_"+Sy++,a=(0,y.useMemo)(()=>`connectionLineId-${i}`,[i]),s=(0,y.useMemo)(()=>`editorHead-${i}`,[i]),o=ve.config.theme2.colors.text.primary,l=2,[c,u]=(0,y.useState)(void 0),d=(0,y.useRef)(c);(0,y.useEffect)(()=>{d.current=c}),(0,y.useEffect)(()=>{n.panel.context.instanceState?.selectedConnection&&u(n.panel.context.instanceState?.selectedConnection)},[n.panel.context.instanceState?.selectedConnection]);const f=m=>{const _=m.target;if(_ instanceof HTMLElement&&!(wy.indexOf(_.nodeName.toLowerCase())>-1)){if(m.keyCode===8||m.keyCode===46)d.current&&d.current.source&&(d.current.source.options.connections=d.current.source.options.connections?.filter(b=>b!==d.current?.info),d.current.source.onChange(d.current.source.options),u(void 0),n.connections.select(void 0),n.connections.updateState(),n.save());else return;document.removeEventListener("keyup",f),n.selecto.rootContainer.removeEventListener("click",v)}},v=m=>{const _=m.target;!(_ instanceof SVGLineElement&&_.id===a)&&(u(void 0),n.connections.select(void 0))},p=m=>{n.isEditingEnabled&&(u(m),n.connections.select(m),document.addEventListener("keyup",f),n.selecto.rootContainer.addEventListener("click",v))},h=m=>{if(m){const E=n.context.getPanelData()?.series[0]?.fields.find(S=>S.name=m)?.values;return E?E.length-1:0}return 0},g=()=>n.connections.state.map((m,_)=>{const{source:b,target:E,info:S}=m,x=b.div?.getBoundingClientRect(),C=b.div?.parentElement,D=C?.getBoundingClientRect();if(!x||!C||!D)return;const w=x.left-D.left+x.width/2,k=x.top-D.top+x.height/2,T=w+S.source.x*x.width/2,M=k-S.source.y*x.height/2;let R,P;if(S.targetName){const K=E.div?.getBoundingClientRect(),H=K.left-D.left+K.width/2,$=K.top-D.top+K.height/2;R=H+S.target.x*K.width/2,P=$-S.target.y*K.height/2}else{const K=D.width/2,H=D.height/2;R=K+S.target.x*D.width/2,P=H-S.target.y*D.height/2}const A=c===m&&n.panel.context.instanceState.selectedConnection,L=S.color?n.context.getColor(S.color).value():o,F=h(S.size?.field),B=S.size?n.context.getScale(S.size).get(F):l,z=n.isEditingEnabled?"grab":"",N={stroke:"#44aaff",strokeOpacity:.6,strokeWidth:B+5},G=`connectionHead-${i+Math.random()}`;return y.createElement("svg",{className:r.connection,key:_},y.createElement("g",{onClick:()=>p(m)},y.createElement("defs",null,y.createElement("marker",{id:G,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:L},y.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:L}))),y.createElement("line",{id:`${a}_transparent`,cursor:z,pointerEvents:"auto",stroke:"transparent",strokeWidth:15,style:A?N:{},x1:T,y1:M,x2:R,y2:P}),y.createElement("line",{id:a,stroke:L,pointerEvents:"auto",strokeWidth:B,markerEnd:`url(#${G})`,x1:T,y1:M,x2:R,y2:P,cursor:z})))});return y.createElement(y.Fragment,null,y.createElement("svg",{ref:t,className:r.editorSVG},y.createElement("defs",null,y.createElement("marker",{id:s,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:o},y.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:o}))),y.createElement("line",{ref:e,stroke:o,strokeWidth:2,markerEnd:`url(#${s})`})),g())},My=t=>({editorSVG:(0,Y.css)`
    position: absolute;
    pointer-events: none;
    width: 100%;
    height: 100%;
    z-index: 1000;
    display: none;
  `,connection:(0,Y.css)`
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 1000;
    pointer-events: none;
  `});class ky{constructor(e){this.state=[],this.selection=new Bd.X(void 0),this.select=n=>{n!==this.selection.value&&this.selection.next(n)},this.updateState=()=>{const n=this.selection.value;if(this.state=Us(this.scene.byName),n){for(let r of this.state)if(r.source===n.source&&r.index===n.index){this.selection.next(r);break}}},this.setConnectionAnchorRef=n=>{this.connectionAnchorDiv=n},this.setConnectionSVGRef=n=>{this.connectionSVG=n},this.setConnectionLineRef=n=>{this.connectionLine=n},this.findElementTarget=n=>{let r;if(n!==this.scene.div)return r=this.scene.findElementByTarget(n),!r&&n.parentElement&&(r=this.findElementTarget(n.parentElement)),r},this.handleMouseEnter=n=>{if(!(n.target instanceof Element)||!this.scene.isEditingEnabled)return;let r=this.findElementTarget(n.target);if(!r){console.log("no element");return}if(this.isDrawingConnection)this.connectionTarget=r;else if(this.connectionSource=r,!this.connectionSource){console.log("no connection source");return}const i=r.div.getBoundingClientRect(),a=this.scene.div?.getBoundingClientRect(),s=i.top-(a?.top??0),o=i.left-(a?.left??0);this.connectionAnchorDiv&&(this.connectionAnchorDiv.style.display="none",this.connectionAnchorDiv.style.display="block",this.connectionAnchorDiv.style.top=`${s}px`,this.connectionAnchorDiv.style.left=`${o}px`,this.connectionAnchorDiv.style.height=`${i.height}px`,this.connectionAnchorDiv.style.width=`${i.width}px`)},this.handleMouseLeave=n=>n.relatedTarget instanceof HTMLImageElement&&n.relatedTarget.getAttribute("alt")===lf?!1:(this.connectionTarget=void 0,this.connectionAnchorDiv.style.display="none",!0),this.connectionListener=n=>{if(n.preventDefault(),!(this.connectionLine&&this.scene.div&&this.scene.div.parentElement))return;const r=this.scene.div.parentElement.getBoundingClientRect(),i=n.pageX-r.x,a=n.pageY-r.y;this.connectionLine.setAttribute("x2",`${i}`),this.connectionLine.setAttribute("y2",`${a}`);const s=this.connectionLine.x1.baseVal.value,o=this.connectionLine.y1.baseVal.value;if(this.didConnectionLeaveHighlight||Math.hypot(i-s,a-o)>vs&&this.connectionSVG&&(this.didConnectionLeaveHighlight=!0,this.connectionSVG.style.display="block",this.isDrawingConnection=!0),!n.buttons){if(this.connectionSource&&this.connectionSource.div&&this.connectionSource.div.parentElement){const l=this.connectionSource.div.getBoundingClientRect(),c=this.connectionSource.div.parentElement.getBoundingClientRect(),u=l.top-c.top+l.height/2,d=l.left-c.left+l.width/2,f=(s-d)/(l.width/2),v=(u-o)/(l.height/2);let p,h,g;if(this.connectionTarget&&this.connectionTarget.div){const b=this.connectionTarget.div.getBoundingClientRect(),E=b.top-c.top+b.height/2,S=b.left-c.left+b.width/2;p=(i-S)/(b.width/2),h=(E-a)/(b.height/2),g=this.connectionTarget.options.name}else{const b=c.height/2,E=c.width/2;p=(i-E)/(c.width/2),h=(b-a)/(c.height/2)}const m={source:{x:f,y:v},target:{x:p,y:h},targetName:g,color:{fixed:la.config.theme2.colors.text.primary},size:{fixed:2,min:1,max:10},path:Ee.Straight},{options:_}=this.connectionSource;_.connections||(_.connections=[]),this.didConnectionLeaveHighlight&&(this.connectionSource.options.connections=[..._.connections,m],this.connectionSource.onChange(this.connectionSource.options))}this.connectionSVG&&(this.connectionSVG.style.display="none"),this.scene.selecto&&this.scene.selecto.rootContainer&&(this.scene.selecto.rootContainer.style.cursor="default",this.scene.selecto.rootContainer.removeEventListener("mousemove",this.connectionListener)),this.isDrawingConnection=!1,this.updateState(),this.scene.save()}},this.handleConnectionDragStart=(n,r,i)=>{if(this.scene.selecto.rootContainer.style.cursor="crosshair",this.connectionSVG&&this.connectionLine&&this.scene.div&&this.scene.div.parentElement){const a=n.getBoundingClientRect(),s=this.scene.div.parentElement.getBoundingClientRect(),o=a.x-s.x+vs,l=a.y-s.y+vs,c=r-s.x,u=i-s.y;this.connectionLine.setAttribute("x1",`${o}`),this.connectionLine.setAttribute("y1",`${l}`),this.connectionLine.setAttribute("x2",`${c}`),this.connectionLine.setAttribute("y2",`${u}`),this.didConnectionLeaveHighlight=!1}this.scene.selecto?.rootContainer?.addEventListener("mousemove",this.connectionListener)},this.onChange=(n,r)=>{const i=n.source.options.connections?.splice(0)??[];i[n.index]=r,n.source.onChange({...n.source.options,connections:i}),this.updateState()},this.connectionsNeedUpdate=n=>kv(n)||js(n,this.scene.byName),this.scene=e,this.updateState()}render(){return y.createElement(y.Fragment,null,y.createElement(Cy,{setRef:this.setConnectionAnchorRef,handleMouseLeave:this.handleMouseLeave}),y.createElement(Dy,{setSVGRef:this.setConnectionSVGRef,setLineRef:this.setConnectionLineRef,scene:this.scene}))}}const Ty=t=>({name:"settingsViewable",props:{},events:{},render(e,n){if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;const r=(o,l)=>{const c=e.getContainer(),u=new PointerEvent("contextmenu",{clientX:o,clientY:l});c.dispatchEvent(u)},i=o=>{r(o.clientX,o.clientY)},a=o=>{if(o.key==="Enter"){const l=o.currentTarget.getBoundingClientRect();r(l.x,l.y)}},s=e.getRect();return n.createElement("div",{key:"settings-viewable",className:"moveable-settings",style:{position:"absolute",left:`${s.width+18}px`,top:"0px",color:"white",fontSize:"18px",cursor:"pointer",userSelect:"none",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100},onClick:i,onKeyDown:a,role:"button",tabIndex:0},"","\u2699\uFE0F","")}}),Ry={name:"dimensionViewable",props:{},events:{},render(t,e){const n=t.getRect();return e.createElement("div",{key:"dimension-viewable",className:"moveable-dimension",style:{position:"absolute",left:`${n.width/2}px`,top:`${n.height+20}px`,background:"#4af",borderRadius:"2px",padding:"2px 4px",color:"white",fontSize:"13px",whiteSpace:"nowrap",fontWeight:"bold",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100}},Math.round(n.offsetWidth)," x ",Math.round(n.offsetHeight))}},Oy=t=>({name:"constraintViewable",props:{},events:{},render(e,n){const r=e.getRect(),i=t.findElementByTarget(e.state.target);if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;let a=null,s=null;const o=i?.tempConstraint??i?.options.constraint??{},l="1px dashed #4af",c=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(45deg)"}}),u=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(-45deg)"}}),d=n.createElement("div",{},[c,u]),f=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,bottom:"0px",borderLeft:l,height:"100vh"}}),v=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height}px`,borderLeft:l,height:"100vh"}}),p=n.createElement("div",{},[f,v]),h=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/4}px`,borderLeft:l,height:`${r.height/2}px`}}),g=n.createElement("div",{},[h,d]);switch(o.vertical){case at.Top:a=f;break;case at.Bottom:a=v;break;case at.TopBottom:a=p;break;case at.Center:a=g;break}const m=n.createElement("div",{style:{position:"absolute",right:"0px",top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),_=n.createElement("div",{style:{position:"absolute",left:`${r.width}px`,top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),b=n.createElement("div",{},[m,_]),E=n.createElement("div",{style:{position:"absolute",left:`${r.width/4}px`,top:`${r.height/2}px`,borderTop:l,width:`${r.width/2}px`}}),S=n.createElement("div",{},[E,d]);switch(o.horizontal){case nt.Left:s=m;break;case nt.Right:s=_;break;case nt.LeftRight:s=b;break;case nt.Center:s=S;break}return n.createElement("div",{},[a,s])}});class Py extends ie{constructor(e,n,r){super(e,n),this.options=e,this.scene=n,this.changeCallback=r,this.setRootRef=i=>{this.div=i},this.sizeStyle={height:"100%",width:"100%"}}isRoot(){return!0}onChange(e){this.revId++,this.options={...e},this.changeCallback()}getSaveModel(){const{placement:e,constraint:n,...r}=this.options;return{...r,elements:this.elements.map(i=>i.getSaveModel())}}render(){return y.createElement("div",{onContextMenu:e=>e.preventDefault(),key:this.UID,ref:this.setRootRef,style:{...this.sizeStyle,...this.dataStyle}},this.elements.map(e=>e.render()))}}class Ay{constructor(e,n,r,i,a){this.onSave=i,this.styles=Ny(ve.config.theme2),this.selection=new el.t(1),this.moved=new Id.x,this.byName=new Map,this.revId=0,this.width=0,this.height=0,this.style={},this.skipNextSelectionBroadcast=!1,this.ignoreDataUpdate=!1,this.isPanelEditing=ui.E1.getSearchObject().editPanel!==void 0,this.editModeEnabled=new Bd.X(!1),this.targetsToSelect=new Set,this.getNextElementName=(s=!1)=>{const o=s?"Frame":"Element";let l=this.byName.size+1;const c=l+100;for(;l<c;){const u=`${o} ${l++}`;if(!this.byName.has(u))return u}return`${o} ${Date.now()}`},this.canRename=s=>!this.byName.has(s),this.context={getColor:s=>(0,Zn.FP)(this.data,s),getScale:s=>(0,Zn.pb)(this.data,s),getScalar:s=>(0,Zn.z2)(this.data,s),getText:s=>(0,Zn.WO)(this.data,s),getResource:s=>(0,Zn.Qz)(this.data,s),getPanelData:()=>this.data},this.generateFrameContainer=s=>{let o=1/0,l=1/0,c=0,u=0;return s.forEach(d=>{const f=d.div?.getBoundingClientRect();f&&(o>f.top&&(o=f.top),l>f.left&&(l=f.left),c<f.right&&(c=f.right),u<f.bottom&&(u=f.bottom))}),{top:o,left:l,width:c-l,height:u-o}},this.save=(s=!1)=>{this.onSave(this.root.getSaveModel()),s&&setTimeout(()=>{this.div&&this.initMoveable(!0,this.isEditingEnabled)})},this.findElementByTarget=s=>{const o=[...this.root.elements];for(;o.length>0;){const l=o.shift();if(l&&l.div&&l.div===s)return l;const c=l instanceof ie?l.elements:[];for(const u of c)o.unshift(u)}},this.setNonTargetPointerEvents=(s,o)=>{const l=[...this.root.elements];for(;l.length>0;){const c=l.shift();c&&c.div&&c.div!==s&&c.applyLayoutStylesToDiv(o);const u=c instanceof ie?c.elements:[];for(const d of u)l.unshift(d)}},this.setRef=s=>{this.div=s},this.select=s=>{this.selecto&&(this.selecto.setSelectedTargets(s.targets),this.updateSelection(s),this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none"))},this.updateSelection=s=>{if(this.moveable.target=s.targets,this.skipNextSelectionBroadcast){this.skipNextSelectionBroadcast=!1;return}if(s.frame)this.selection.next([s.frame]);else{const o=s.targets.map(l=>this.findElementByTarget(l));this.selection.next(o)}},this.generateTargetElements=s=>{let o=[];const l=[...s];for(;l.length>0;){const c=l.shift();c&&c.div&&o.push(c.div);const u=c instanceof ie?c.elements:[];for(const d of u)l.unshift(d)}return o},this.initMoveable=(s=!1,o=!0)=>{const l=this.generateTargetElements(this.root.elements);s&&this.selecto&&this.selecto.destroy(),this.selecto=new fy({container:this.div,rootContainer:this.div,selectableTargets:l,toggleContinueSelect:"shift",selectFromInside:!1,hitRate:0}),this.moveable=new T1(this.div,{draggable:o&&!this.editModeEnabled.getValue(),resizable:o,ables:[Ry,Oy(this),Ty(this)],props:{dimensionViewable:o,constraintViewable:o,settingsViewable:o},origin:!1,className:this.styles.selected}).on("click",u=>{const d=this.findElementByTarget(u.target);let f=!1;d&&(f=d.item.hasEditMode??!1),u.isDouble&&o&&!this.editModeEnabled.getValue()&&f&&this.editModeEnabled.next(!0)}).on("clickGroup",u=>{this.selecto.clickTarget(u.inputEvent,u.inputTarget)}).on("dragStart",u=>{this.ignoreDataUpdate=!0,this.setNonTargetPointerEvents(u.target,!0)}).on("dragGroupStart",u=>{this.ignoreDataUpdate=!0}).on("drag",u=>{const d=this.findElementByTarget(u.target);d&&(d.applyDrag(u),this.connections.connectionsNeedUpdate(d)&&this.moveableActionCallback&&this.moveableActionCallback(!0))}).on("dragGroup",u=>{let d=!1;for(let f of u.events){const v=this.findElementByTarget(f.target);v&&(v.applyDrag(f),d||(d=this.connections.connectionsNeedUpdate(v)))}d&&this.moveableActionCallback&&this.moveableActionCallback(!0)}).on("dragGroupEnd",u=>{u.events.forEach(d=>{const f=this.findElementByTarget(d.target);f&&f.setPlacementFromConstraint()}),this.moved.next(Date.now()),this.ignoreDataUpdate=!1}).on("dragEnd",u=>{const d=this.findElementByTarget(u.target);d&&d.setPlacementFromConstraint(),this.moved.next(Date.now()),this.ignoreDataUpdate=!1,this.setNonTargetPointerEvents(u.target,!1)}).on("resizeStart",u=>{const d=this.findElementByTarget(u.target);d&&(d.tempConstraint={...d.options.constraint},d.options.constraint={vertical:at.Top,horizontal:nt.Left},d.setPlacementFromConstraint())}).on("resize",u=>{const d=this.findElementByTarget(u.target);d&&(d.applyResize(u),this.connections.connectionsNeedUpdate(d)&&this.moveableActionCallback&&this.moveableActionCallback(!0)),this.moved.next(Date.now())}).on("resizeGroup",u=>{let d=!1;for(let f of u.events){const v=this.findElementByTarget(f.target);v&&(v.applyResize(f),d||(d=this.connections.connectionsNeedUpdate(v)))}d&&this.moveableActionCallback&&this.moveableActionCallback(!0),this.moved.next(Date.now())}).on("resizeEnd",u=>{const d=this.findElementByTarget(u.target);d&&(d.tempConstraint&&(d.options.constraint=d.tempConstraint,d.tempConstraint=void 0),d.setPlacementFromConstraint())});let c=[];this.selecto.on("dragStart",u=>{const d=u.inputEvent.target;if(d.id===sf){this.connections.handleConnectionDragStart(d,u.inputEvent.clientX,u.inputEvent.clientY),u.stop();return}const f=this.moveable.isMoveableElement(d)||c.some(p=>p===d||p.contains(d)),v=this.selecto?.getSelectedTargets().includes(d.parentElement.parentElement);this.isEditingEnabled&&!this.editModeEnabled.getValue()&&f&&this.selecto?.getSelectedTargets().length&&(this.selecto.getSelectedTargets()[0].style.cursor="grabbing"),(f||v||!this.isEditingEnabled)&&u.stop()}).on("select",()=>{this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none")}).on("selectEnd",u=>{c=u.selected,this.updateSelection({targets:c}),u.isDragStart&&(this.isEditingEnabled&&!this.editModeEnabled.getValue()&&this.selecto?.getSelectedTargets().length&&(this.selecto.getSelectedTargets()[0].style.cursor="grabbing"),u.inputEvent.preventDefault(),u.data.timer=setTimeout(()=>{this.moveable.dragStart(u.inputEvent)}))}).on("dragEnd",u=>{clearTimeout(u.data.timer)})},this.reorderElements=(s,o,l,c)=>{switch(l){case!0:switch(c){case-1:s.parent instanceof ie?o.parent&&(this.updateElements(s,o.parent,o.parent.elements.length),s.updateData(o.parent.scene.context)):o.parent?.reorderTree(s,o,!0);break;default:o.parent&&(this.updateElements(s,o.parent,o.parent.elements.indexOf(o)),s.updateData(o.parent.scene.context));break}break;case!1:o instanceof ie?s.parent===o?s.parent?.reorderTree(s,o,!0):(this.updateElements(s,o),s.updateData(o.scene.context)):s.parent===o.parent?s.parent?.reorderTree(s,o):o.parent&&(this.updateElements(s,o.parent),s.updateData(o.parent.scene.context));break}},this.updateElements=(s,o,l=null)=>{s.parent?.doAction(Ut.Delete,s),s.parent=o;const c=s.div?.getBoundingClientRect();s.setPlacementFromConstraint(c,o.div?.getBoundingClientRect());const u=l??o.elements.length-1;o.elements.splice(u,0,s),o.scene.save(),o.reinitializeMoveable()},this.addToSelection=()=>{try{let s={targets:[]};s.targets=[...this.targetsToSelect],this.select(s)}catch{$s.Z.emit(ri.SI.alertError,["Unable to add to selection"])}},this.root=this.load(e,n,r),this.subscription=this.editModeEnabled.subscribe(s=>{!this.moveable||!this.isEditingEnabled||(this.moveable.draggable=!s)}),this.panel=a,this.connections=new ky(this)}load(e,n,r){return this.root=new Py(e??{type:"frame",elements:[va]},this,this.save),this.isEditingEnabled=n,this.shouldShowAdvancedTypes=r,setTimeout(()=>{if(this.div){const i=n;this.initMoveable(i,n),this.currentLayer=this.root,this.selection.next([]),this.connections.select(void 0),this.connections.updateState()}}),this.root}updateData(e){this.data=e,this.root.updateData(this.context)}updateSize(e,n){this.width=e,this.height=n,this.style={width:e,height:n},this.selecto?.getSelectedTargets().length&&this.clearCurrentSelection()}frameSelection(){this.selection.pipe((0,Fd.P)()).subscribe(e=>{const n=e[0].parent,r=new ie({type:"frame",name:this.getNextElementName(!0),elements:[]},this,e[0].parent),i=this.generateFrameContainer(e);r.options.placement=i,e.forEach(a=>{const s=a.div?.getBoundingClientRect();a.setPlacementFromConstraint(s,i),n.doAction(Ut.Delete,a),r.doAction(Ut.Duplicate,a,!1,!1)}),r.setPlacementFromConstraint(i,n.div?.getBoundingClientRect()),n.elements.push(r),this.byName.set(r.getName(),r),this.save()})}clearCurrentSelection(e=!1){this.skipNextSelectionBroadcast=e;let n=new MouseEvent("click");this.selecto?.clickTarget(n,this.div)}updateCurrentLayer(e){this.currentLayer=e,this.clearCurrentSelection(),this.save()}render(){const e=this.isPanelEditing||!this.isPanelEditing&&this.isEditingEnabled,n=(this.tooltip?.element?.data?.links?.length??0)>0,r=!this.isEditingEnabled&&n;return y.createElement("div",{key:this.revId,className:this.styles.wrap,style:this.style,ref:this.setRef},this.connections.render(),this.root.render(),e&&y.createElement(Un.h_,null,y.createElement(py,{scene:this,panel:this.panel})),r&&y.createElement(Un.h_,null,y.createElement(Ey,{scene:this})))}}const Ny=(0,ca.B)(t=>({wrap:(0,Y.css)`
    overflow: hidden;
    position: relative;
  `,selected:(0,Y.css)`
    z-index: 999 !important;
  `}));var cf=I(73431),Ly=I(44207);function Iy({onClose:t,scene:e,anchorPoint:n}){const r=e.root.options.background?.image?.fixed??"",[i,a]=(0,y.useState)(r),s=(0,Et.l4)(),o=By(s,n),l=c=>{c&&(a(c),e.root&&(e.root.options.background={...e.root.options.background,image:{mode:ln.Q8.Fixed,fixed:c}},e.revId++,e.save(),e.root.reinitializeMoveable()),e&&e.updateData(e.data)),t()};return y.createElement(Un.h_,{className:o.portalWrapper},y.createElement(Ly.Y,{onChange:l,value:i,mediaType:ua.MediaType.Image,folderName:ua.ResourceFolderName.IOT}))}const By=(t,e)=>({portalWrapper:(0,Y.css)`
    width: 315px;
    height: 445px;
    transform: translate(${e.x}px, ${e.y-200}px);
  `});var Fy=I(28118),zy=I.n(Fy),Gy=I(17751),uf=I(23062),df=I(8807),Ky=I(973),ps=I(75766),Wy=I(54951),Yy=I(53721);function $y(){const{search:t}=(0,Yy.TH)(),e=(0,y.useMemo)(()=>(0,ui.Ox)(t||""),[t]),n=(0,y.useCallback)((r,i)=>ui.E1.partial(r,i),[]);return[e,n]}var Hy=I(91507);const ff="showCategory",hs=y.memo(({id:t,title:e,children:n,forceOpen:r,isOpenDefault:i,renderTitle:a,className:s,itemsCount:o,isNested:l=!1,sandboxId:c})=>{const u=i!==!1,[d,f]=(0,Ky.Z)(Xy(t),{isExpanded:u}),v=(0,Et.wW)(Vy),[p,h]=$y(),[g,m]=(0,y.useState)(d?.isExpanded??u),_=(0,y.useRef)(0),b=(0,y.useRef)(null),E=p[ff]===t;(0,y.useEffect)(()=>{_.current&&Date.now()-_.current<200||(E||r)&&(g||m(!0),E&&b.current?.scrollIntoView())},[r,g,E]);const S=(0,y.useCallback)(()=>{_.current=Date.now(),h({[ff]:g?void 0:t},!0),f({isExpanded:!g}),m(!g)},[f,m,h,g,t]);a||(a=function(k){return k||o===void 0||o===0?e:y.createElement("span",null,e," ",y.createElement(Wy.A,{value:o}))});const x=(0,Y.cx)({[v.box]:!0,[v.boxNestedExpanded]:l&&g},s,"options-group"),C=(0,Y.cx)(v.header,{[v.headerExpanded]:g,[v.headerNested]:l}),D=(0,Y.cx)(v.body,{[v.bodyNested]:l});return y.createElement("div",{className:x,"data-testid":"options-category","data-plugin-sandbox":c,"aria-label":ps.wl.components.OptionsGroup.group(t),ref:b},y.createElement("div",{className:C,onClick:S},y.createElement(kr.zx,{"aria-label":ps.wl.components.OptionsGroup.toggle(t),type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":g,className:v.toggleButton,icon:g?"angle-down":"angle-right",onClick:S}),y.createElement("h6",{id:`button-${t}`,className:v.title},a(g))),g&&y.createElement("div",{className:D,id:t,"aria-labelledby":`button-${t}`},n))});hs.displayName="OptionsPaneCategory";const Vy=t=>({box:(0,Y.css)`
      border-top: 1px solid ${t.colors.border.weak};
    `,boxNestedExpanded:(0,Y.css)`
      margin-bottom: ${t.spacing(2)};
    `,title:(0,Y.css)`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${t.typography.fontWeightMedium};
      margin: 0;
    `,header:(0,Y.css)`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${t.spacing(.5)};
      color: ${t.colors.text.primary};
      font-weight: ${t.typography.fontWeightMedium};

      &:hover {
        background: ${t.colors.emphasize(t.colors.background.primary,.03)};
      }
    `,toggleButton:(0,Y.css)`
      align-self: baseline;
    `,headerExpanded:(0,Y.css)`
      color: ${t.colors.text.primary};
    `,headerNested:(0,Y.css)`
      padding: ${t.spacing(.5,0,.5,0)};
    `,body:(0,Y.css)`
      padding: ${t.spacing(1,2,1,4)};
    `,bodyNested:(0,Y.css)`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${t.colors.border.weak};
      }
    `}),Xy=t=>`${Hy.jy}.optionGroup[${t}]`;class Qn{constructor(e){this.props=e,this.items=[],this.categories=[]}addItem(e){return e.parent=this,this.items.push(e),this}addCategory(e){return e.props.isNested=!0,e.parent=this,this.categories.push(e),this}getCategory(e){let n=this.categories.find(r=>r.props.id===e);return n||(n=new Qn({title:e,id:e}),this.addCategory(n),n)}render(e){return this.props.customRender?this.props.customRender():y.createElement(hs,{key:this.props.title,...this.props},this.items.map(n=>n.render(e)),this.categories.map(n=>n.render(e)))}}var vf=I(98458),X2=I(84278),jy=I(90135),Uy=I.n(jy),pf=I(36495),Zy=I(69865);function hf({overrides:t}){const e=(0,Et.wW)(Qy);return y.createElement("div",{className:e.wrapper},t.map((n,r)=>y.createElement(Zy.u,{content:n.tooltip,key:r.toString(),placement:"top"},y.createElement("div",{"aria-label":n.description,className:e[n.type]}))))}const Qy=t=>{const e={width:8,height:8,borderRadius:t.shape.radius.circle,marginLeft:t.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,Y.css)({display:"flex"}),rule:(0,Y.css)({...e,backgroundColor:t.colors.primary.main}),data:(0,Y.css)({...e,backgroundColor:t.colors.warning.main})}};class qy{constructor(e){this.props=e}getLabel(e){const{title:n,description:r,overrides:i,addon:a}=this.props;if(!e)return this.parent.props.title===n&&!i?.length?null:y.createElement(Jy,{title:n,description:r,overrides:i,addon:a});const s=[];return this.parent.parent&&s.push(this.highlightWord(this.parent.parent.props.title,e)),this.parent.props.title!==n&&s.push(this.highlightWord(this.parent.props.title,e)),y.createElement(pf._,{description:r&&this.highlightWord(r,e),category:s},this.highlightWord(n,e),i&&i.length>0&&y.createElement(hf,{overrides:i}))}highlightWord(e,n){return y.createElement(Uy(),{textToHighlight:e,searchWords:[n],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:e}=this.props;!e||e.length}render(e){const{title:n,description:r,render:i,showIf:a,skipField:s}=this.props,o=`${this.parent.props.id} ${n}`;return a&&!a()?null:s?i():y.createElement(Or.g,{label:this.getLabel(e),description:r,key:o,"aria-label":ps.wl.components.PanelEditor.OptionsPane.fieldLabel(o)},i())}}function Jy({title:t,description:e,overrides:n,addon:r}){const i=(0,Et.wW)(t_);return y.createElement("div",{className:i.container},y.createElement(pf._,{description:e},t,n&&n.length>0&&y.createElement(hf,{overrides:n})),r)}function t_(t){return{container:(0,Y.css)`
      display: flex;
      justify-content: space-between;
    `}}const gf="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",mf="An override rule exists for this property";function j2(t,e,n){const r=[];if(n){for(const a of n)for(const s of a.fields)if(lodashGet(s.config,t.path)!=null){r.push({type:"data",description:gf,tooltip:gf});break}}return e.overrides.some(a=>a.properties.some(s=>s.id===t.id))&&r.push({type:"rule",description:mf,tooltip:mf}),r}var ea=I(82247);function e_({data:t,replaceVariables:e,options:n,eventBus:r,instanceState:i}){const a=t?.series??[];return{data:a,replaceVariables:e,options:n,eventBus:r,getSuggestions:o=>getDataLinksVariableSuggestions(a,o),instanceState:i}}function U2(t){const{plugin:e,panel:n,onPanelOptionsChanged:r,onFieldConfigsChange:i,data:a,dashboard:s,instanceState:o}=t,l=n.getOptions(),c=n.fieldConfig,u={},d=e_({data:a,replaceVariables:n.replaceVariables,options:l,eventBus:s.events,instanceState:o}),f=p=>{const h=(p&&p[0])??`${e.meta.name}`,g=u[h];return g||(u[h]=new OptionsPaneCategoryDescriptor({title:h,id:h,sandboxId:e.meta.id}))},v={getValue:p=>lodashGet(l,p),onChange:(p,h)=>{const g=setOptionImmutably(l,p,h);r(g)}};gs(e.getPanelOptionsSupplier(),v,f,d);for(const p of e.fieldConfigRegistry.list()){if(p.isCustom&&p.showIf&&!p.showIf(c.defaults.custom,a?.series)||p.hideFromDefaults)continue;const h=f(p.category),g=p.editor,m=c.defaults,_=p.isCustom?m.custom?lodashGet(m.custom,p.path):void 0:lodashGet(m,p.path);p.getItemsCount&&(h.props.itemsCount=p.getItemsCount(_)),h.addItem(new OptionsPaneItemDescriptor({title:p.name,description:p.description,overrides:getOptionOverrides(p,c,a?.series),render:function(){const E=S=>{i(updateDefaultFieldConfigValue(c,p.path,S,p.isCustom))};return React.createElement(g,{value:_,onChange:E,item:p,context:d,id:p.id})}}))}return Object.values(u)}function gs(t,e,n,r,i){const a=new vf.rt;t(a,r);for(const s of a.getItems()){if(s.showIf&&!s.showIf(r.options,r.data))continue;let o=i;if(o?s.category?.[0]?.length&&(o=o.getCategory(s.category[0])):o=n(s.category),(0,vf.j)(s)){const c=s.getNestedValueAccess(e),u=c.getContext?c.getContext(r):{...r,options:e.getValue(s.path)};gs(s.getBuilder(),c,n,u,o);continue}const l=s.editor;o.addItem(new qy({title:s.name,description:s.description,render:function(){return y.createElement(l,{value:e.getValue(s.path),onChange:u=>{e.onChange(s.path,u)},item:s,context:r,id:s.id})}}))}}const r_=[{value:Wt.Original,label:"Original"},{value:Wt.Contain,label:"Contain"},{value:Wt.Cover,label:"Cover"},{value:Wt.Fill,label:"Fill"},{value:Wt.Tile,label:"Tile"}],n_=({value:t,onChange:e})=>{const n=t??Wt.Cover,r=(0,y.useCallback)(i=>{e(i)},[e]);return y.createElement(Tr.Z,null,y.createElement(Rr._,{grow:!0},y.createElement(Ls.S,{value:n,options:r_,onChange:r,fullWidth:!0})))},yf=(t,e)=>e!=="frame"&&e!==void 0?[t+` (${e})`]:[t],nn={addBackground:(t,e)=>{const n=yf("Background",e.options?.type);t.addCustomEditor({category:n,id:"background.color",path:"background.color",name:"Color",editor:Ft.Lm,settings:{},defaultValue:{fixed:""}}).addCustomEditor({category:n,id:"background.image",path:"background.image",name:"Image",editor:Ft.Lv,settings:{resourceType:"image"}}).addCustomEditor({category:n,id:"background.size",path:"background.size",name:"Image size",editor:n_,settings:{resourceType:"image"}})},addBorder:(t,e)=>{const n=yf("Border",e.options?.type);t.addSliderInput({category:n,path:"border.width",name:"Width",defaultValue:2,settings:{min:0,max:20}}),e.options?.border?.width&&t.addCustomEditor({category:n,id:"border.color",path:"border.color",name:"Color",editor:Ft.Lm,settings:{},defaultValue:{fixed:""}})},addColor:(t,e)=>{const n=["Color"];t.addCustomEditor({category:n,id:"color",path:"color",name:"Color",editor:Ft.Lm,settings:{},defaultValue:{fixed:""}})},addSize:(t,e)=>{const n=["Size"];t.addCustomEditor({category:n,id:"size",path:"size",name:"Size",editor:Ft.cL,settings:{min:1,max:10},defaultValue:{fixed:2,min:1,max:10}})}};var ms=I(39285),i_=I(30359);const a_=({onVerticalConstraintChange:t,onHorizontalConstraintChange:e,currentConstraints:n})=>{const r=(0,Et.wW)(o_(n)),i=()=>{t(at.Top)},a=()=>{t(at.Bottom)},s=()=>{t(at.Center)},o=()=>{e(nt.Left)},l=()=>{e(nt.Right)},c=()=>{e(nt.Center)};return y.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"75.000000pt",height:"75.000000pt",viewBox:"0 0 228.000000 228.000000",preserveAspectRatio:"xMidYMid meet",style:{marginBottom:"4.8px"}},y.createElement("g",{transform:"translate(0.000000,228.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},y.createElement("path",{fill:"#e5e5e5",d:`M198 2028 l-28 -32 0 -912 0 -912 31 -31 31 -31 915 0 915 0 29 29
29 29 0 917 0 917 -27 29 -28 29 -920 0 -920 0 -27 -32z m1876 -17 c15 -16 16
-98 16 -927 0 -860 -1 -909 -18 -926 -17 -17 -66 -18 -927 -18 -862 0 -910 1
-927 18 -17 17 -18 65 -18 926 0 832 1 911 16 927 16 18 45 19 468 21 248 2
659 2 912 0 431 -2 462 -4 478 -21z`}),y.createElement("rect",{className:r.topConstraint,height:"228",width:"46",y:"1735",x:"1123"}),y.createElement("rect",{className:r.constraintHover,onClick:i,height:"350",width:"300",y:"1680",x:"995",fill:"transparent"}),y.createElement("rect",{className:r.bottomConstraint,height:"228",width:"46",y:"210",x:"1123"}),y.createElement("rect",{className:r.constraintHover,onClick:a,height:"350",width:"300",y:"135",x:"995",fill:"transparent"}),y.createElement("rect",{className:r.leftConstraint,height:"46",width:"228",y:"1060",x:"265"}),y.createElement("rect",{className:r.constraintHover,onClick:o,height:"300",width:"350",y:"925",x:"200",fill:"transparent"}),y.createElement("rect",{className:r.rightConstraint,height:"46",width:"228",y:"1060",x:"1795"}),y.createElement("rect",{className:r.constraintHover,onClick:l,height:"300",width:"350",y:"925",x:"1730",fill:"transparent"}),y.createElement("path",{className:r.box,d:`M568 1669 c-17 -9 -18 -48 -18 -584 0 -558 1 -575 19 -585 27 -14
1125 -14 1152 0 18 10 19 27 19 580 0 504 -2 570 -16 584 -14 14 -80 16 -577
16 -363 -1 -568 -4 -579 -11z m1119 -42 c4 -5 4 -1079 0 -1084 -5 -4 -1079 -4
-1084 0 -5 6 -4 1077 1 1085 4 7 1076 6 1083 -1z`}),y.createElement("rect",{className:r.verticalCenterConstraint,height:"456",width:"46",y:"855",x:"1123"}),y.createElement("rect",{className:r.constraintHover,onClick:s,height:"660",width:"300",y:"750",x:"995",fill:"transparent"}),y.createElement("rect",{className:r.horizontalCenterConstraint,height:"46",width:"456",y:"1060",x:"918"}),y.createElement("rect",{className:r.constraintHover,onClick:c,height:"300",width:"660",y:"925",x:"815",fill:"transparent"})))},o_=t=>e=>{const n="#daebf7",r="0.6",i="#0d99ff",a=e.isDark?"#ffffff":"#000000";return{constraintHover:(0,Y.css)`
      &:hover {
        fill: ${n};
        fill-opacity: ${r};
      }
    `,topConstraint:(0,Y.css)`
      ${t.vertical===at.Top||t.vertical===at.TopBottom?`width: 92pt; x: 1085; fill: ${i};`:`fill: ${a};`}
    `,bottomConstraint:(0,Y.css)`
      ${t.vertical===at.Bottom||t.vertical===at.TopBottom?`width: 92pt; x: 1085; fill: ${i};`:`fill: ${a};`}
    `,leftConstraint:(0,Y.css)`
      ${t.horizontal===nt.Left||t.horizontal===nt.LeftRight?`height: 92pt; y: 1014; fill: ${i};`:`fill: ${a};`}
    `,rightConstraint:(0,Y.css)`
      ${t.horizontal===nt.Right||t.horizontal===nt.LeftRight?`height: 92pt; y: 1014; fill: ${i};`:`fill: ${a};`}
    `,horizontalCenterConstraint:(0,Y.css)`
      ${t.horizontal===nt.Center?`height: 92pt; y: 1014; fill: ${i};`:`fill: ${a};`}
    `,verticalCenterConstraint:(0,Y.css)`
      ${t.vertical===at.Center?`width: 92pt; x: 1085; fill: ${i};`:`fill: ${a};`}
    `,box:(0,Y.css)`
      fill: ${a};
    `}},s_=({onPositionChange:t,element:e,settings:n})=>{const r=(0,Et.wW)(l_),i=o=>{const l={vertical:at.Top,horizontal:nt.Left},c={...e.options.constraint};switch(e.options.constraint=l,e.setPlacementFromConstraint(),o){case wt.Top:t(0,"top");break;case wt.Bottom:t(s(e.options.placement?.height??0,"bottom"),"top");break;case wt.VerticalCenter:t(a(e.options.placement?.height??0,"v"),"top");break;case wt.Left:t(0,"left");break;case wt.Right:t(s(e.options.placement?.width??0,"right"),"left");break;case wt.HorizontalCenter:t(a(e.options.placement?.width??0,"h"),"left");break}e.options.constraint=c,e.setPlacementFromConstraint()},a=(o,l)=>((l==="h"?n.scene.width:n.scene.height)-o)/2,s=(o,l)=>(l==="right"?n.scene.width:n.scene.height)-o;return y.createElement("div",{className:r.buttonGroup},y.createElement(pe.h,{name:"horizontal-align-left",onClick:()=>i(wt.Left),className:r.button,size:"lg",tooltip:"Align left"}),y.createElement(pe.h,{name:"horizontal-align-center",onClick:()=>i(wt.HorizontalCenter),className:r.button,size:"lg",tooltip:"Align horizontal centers"}),y.createElement(pe.h,{name:"horizontal-align-right",onClick:()=>i(wt.Right),className:r.button,size:"lg",tooltip:"Align right"}),y.createElement(pe.h,{name:"vertical-align-top",onClick:()=>i(wt.Top),size:"lg",tooltip:"Align top"}),y.createElement(pe.h,{name:"vertical-align-center",onClick:()=>i(wt.VerticalCenter),className:r.button,size:"lg",tooltip:"Align vertical centers"}),y.createElement(pe.h,{name:"vertical-align-bottom",onClick:()=>i(wt.Bottom),className:r.button,size:"lg",tooltip:"Align bottom"}))},l_=t=>({buttonGroup:(0,Y.css)`
    display: flex;
    flex-wrap: wrap;
    padding: 12px 0 12px 0;
  `,button:(0,Y.css)`
    margin-left: 5px;
    margin-right: 5px;
  `}),c_=["top","left","bottom","right","width","height"],u_=[{label:"Left",value:nt.Left},{label:"Right",value:nt.Right},{label:"Left & right",value:nt.LeftRight},{label:"Center",value:nt.Center},{label:"Scale",value:nt.Scale}],d_=[{label:"Top",value:at.Top},{label:"Bottom",value:at.Bottom},{label:"Top & bottom",value:at.TopBottom},{label:"Center",value:at.Center},{label:"Scale",value:at.Scale}];function _f({item:t}){const e=t.settings;if((0,ii.Z)(e?.scene?e.scene.moved:new Id.x),!e)return y.createElement("div",null,"Loading...");const n=e.element;if(!n)return y.createElement("div",null,"???");const{options:r}=n,{placement:i,constraint:a}=r,s=()=>{setTimeout(()=>{e.scene.select({targets:[n.div]})})},o=v=>{l(v.value)},l=v=>{n.options.constraint.horizontal=v,n.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),s()},c=v=>{u(v.value)},u=v=>{n.options.constraint.vertical=v,n.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),s()},d=(v,p)=>{n.options.placement[p]=v??n.options.placement[p],n.applyLayoutStylesToDiv(),e.scene.clearCurrentSelection(!0),s()},f=n.tempConstraint??a??{};return y.createElement("div",null,y.createElement(s_,{onPositionChange:d,settings:e,element:n}),y.createElement("br",null),y.createElement(Or.g,{label:"Constraints"},y.createElement(Te.Lh,null,y.createElement(a_,{onVerticalConstraintChange:u,onHorizontalConstraintChange:l,currentConstraints:f}),y.createElement(Te.wc,null,y.createElement(Te.Lh,null,y.createElement(ms.J,{name:"arrows-h"}),y.createElement(ei.Ph,{options:u_,onChange:o,value:f.horizontal})),y.createElement(Te.Lh,null,y.createElement(ms.J,{name:"arrows-v"}),y.createElement(ei.Ph,{options:d_,onChange:c,value:f.vertical}))))),y.createElement("br",null),y.createElement(Or.g,{label:"Position"},y.createElement(y.Fragment,null,c_.map(v=>{const p=i[v];return p==null?null:y.createElement(Tr.Z,{key:v},y.createElement(Rr._,{label:v,labelWidth:8,grow:!0},y.createElement(i_.Y,{value:p,onChange:h=>d(h,v)})))}))))}function Ef(t){return{category:t.category,path:"--",values:e=>({getValue:n=>(0,le.get)(t.element.options,n),onChange:(n,r)=>{let i=t.element.options;if(n==="type"&&r){const a=pn.getIfExists(r);if(!a){console.warn("layer does not exist",r);return}i={...i,...a.getNewOptions(i),type:a.id}}else i=(0,ea.hs)(i,n,r);t.element.onChange(i),t.element.updateData(t.scene.context)}}),build:(e,n)=>{const{options:r}=t.element,i=r?.type?r.type:va.type,a=oi(t.scene.shouldShowAdvancedTypes,i).options,s=!t.scene.shouldShowAdvancedTypes&&!li.filter(u=>u.id===r?.type).length;e.addSelect({path:"type",name:void 0,settings:{options:a},description:s?"Selected element type is not supported by current settings. Please enable advanced element types.":""});const o=pn.getIfExists(r?.type??va.type);let l=r;l||(l={...o.getNewOptions(r),type:o.id,name:`Element ${Date.now()}.${Math.floor(Math.random()*100)}`});const c={...n,options:l};o?.registerOptionsUI&&o.registerOptionsUI(e,c),e.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Quick placement",editor:_f,settings:t}),nn.addBackground(e,c),nn.addBorder(e,c)}}}var bf=I(93986),we=I(855),Tt=I(31913),ys=I(56161),$t=I(98013),br=I(67565),Cf=I(30820),xf=I(47218),Ze=I(30260),Sf=I(22793),wf=I(93394),an=I(90690),Qe=I(69413),Df=I(75110),f_=I(95696),De=I.n(f_),_s=y.createContext(null),ra=I(48691),v_=function(e){for(var n=e.prefixCls,r=e.level,i=e.isStart,a=e.isEnd,s="".concat(n,"-indent-unit"),o=[],l=0;l<r;l+=1){var c;o.push(y.createElement("span",{key:l,className:De()(s,(c={},(0,Tt.Z)(c,"".concat(s,"-start"),i[l]),(0,Tt.Z)(c,"".concat(s,"-end"),a[l]),c))}))}return y.createElement("span",{"aria-hidden":"true",className:"".concat(n,"-indent")},o)};const p_=y.memo(v_);var h_=I(59560),g_=I(38532),m_=["children"];function Mf(t,e){return"".concat(t,"-").concat(e)}function y_(t){return t&&t.type&&t.type.isTreeNode}function qn(t,e){return t??e}function na(t){var e=t||{},n=e.title,r=e._title,i=e.key,a=e.children,s=n||"title";return{title:s,_title:r||[s],key:i||"key",children:a||"children"}}function Z2(t,e){var n=new Map;function r(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(i||[]).forEach(function(s){var o=s[e.key],l=s[e.children];warning(o!=null,"Tree node must have a certain key: [".concat(a).concat(o,"]"));var c=String(o);warning(!n.has(c)||o===null||o===void 0,"Same 'key' exist in the Tree: ".concat(c)),n.set(c,!0),r(l,"".concat(a).concat(c," > "))})}r(t)}function __(t){function e(n){var r=(0,h_.Z)(n);return r.map(function(i){if(!y_(i))return(0,Qe.ZP)(!i,"Tree/TreeNode can only accept TreeNode as children."),null;var a=i.key,s=i.props,o=s.children,l=(0,ra.Z)(s,m_),c=(0,$t.Z)({key:a},l),u=e(o);return u.length&&(c.children=u),c}).filter(function(i){return i})}return e(t)}function Es(t,e,n){var r=na(n),i=r._title,a=r.key,s=r.children,o=new Set(e===!0?[]:e),l=[];function c(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return u.map(function(f,v){for(var p=Mf(d?d.pos:"0",v),h=qn(f[a],p),g,m=0;m<i.length;m+=1){var _=i[m];if(f[_]!==void 0){g=f[_];break}}var b=(0,$t.Z)((0,$t.Z)({},(0,g_.Z)(f,[].concat((0,br.Z)(i),[a,s]))),{},{title:g,key:h,parent:d,pos:p,children:null,data:f,isStart:[].concat((0,br.Z)(d?d.isStart:[]),[v===0]),isEnd:[].concat((0,br.Z)(d?d.isEnd:[]),[v===u.length-1])});return l.push(b),e===!0||o.has(h)?b.children=c(f[s]||[],b):b.children=[],b})}return c(t),l}function E_(t,e,n){var r={};(0,ys.Z)(n)==="object"?r=n:r={externalGetKey:n},r=r||{};var i=r,a=i.childrenPropName,s=i.externalGetKey,o=i.fieldNames,l=na(o),c=l.key,u=l.children,d=a||u,f;s?typeof s=="string"?f=function(h){return h[s]}:typeof s=="function"&&(f=function(h){return s(h)}):f=function(h,g){return qn(h[c],g)};function v(p,h,g,m){var _=p?p[d]:t,b=p?Mf(g.pos,h):"0",E=p?[].concat((0,br.Z)(m),[p]):[];if(p){var S=f(p,b),x={node:p,index:h,pos:b,key:S,parentPos:g.node?g.pos:null,level:g.level+1,nodes:E};e(x)}_&&_.forEach(function(C,D){v(C,D,{node:p,pos:b,level:g?g.level+1:-1},E)})}v(null)}function b_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.initWrapper,r=e.processEntity,i=e.onProcessFinished,a=e.externalGetKey,s=e.childrenPropName,o=e.fieldNames,l=arguments.length>2?arguments[2]:void 0,c=a||l,u={},d={},f={posEntities:u,keyEntities:d};return n&&(f=n(f)||f),E_(t,function(v){var p=v.node,h=v.index,g=v.pos,m=v.key,_=v.parentPos,b=v.level,E=v.nodes,S={node:p,nodes:E,index:h,key:m,pos:g,level:b},x=qn(m,g);u[g]=S,d[x]=S,S.parent=u[_],S.parent&&(S.parent.children=S.parent.children||[],S.parent.children.push(S)),r&&r(S,f)},{externalGetKey:c,childrenPropName:s,fieldNames:o}),i&&i(f),f}function Jn(t,e){var n=e.expandedKeys,r=e.selectedKeys,i=e.loadedKeys,a=e.loadingKeys,s=e.checkedKeys,o=e.halfCheckedKeys,l=e.dragOverNodeKey,c=e.dropPosition,u=e.keyEntities,d=u[t],f={eventKey:t,expanded:n.indexOf(t)!==-1,selected:r.indexOf(t)!==-1,loaded:i.indexOf(t)!==-1,loading:a.indexOf(t)!==-1,checked:s.indexOf(t)!==-1,halfChecked:o.indexOf(t)!==-1,pos:String(d?d.pos:""),dragOver:l===t&&c===0,dragOverGapTop:l===t&&c===-1,dragOverGapBottom:l===t&&c===1};return f}function Nt(t){var e=t.data,n=t.expanded,r=t.selected,i=t.checked,a=t.loaded,s=t.loading,o=t.halfChecked,l=t.dragOver,c=t.dragOverGapTop,u=t.dragOverGapBottom,d=t.pos,f=t.active,v=t.eventKey,p=(0,$t.Z)((0,$t.Z)({},e),{},{expanded:n,selected:r,checked:i,loaded:a,loading:s,halfChecked:o,dragOver:l,dragOverGapTop:c,dragOverGapBottom:u,pos:d,active:f,key:v});return"props"in p||Object.defineProperty(p,"props",{get:function(){return(0,Qe.ZP)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),t}}),p}var C_=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],kf="open",Tf="close",x_="---",S_=function(t){(0,Sf.Z)(n,t);var e=(0,wf.Z)(n);function n(){var r;(0,Cf.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=e.call.apply(e,[this].concat(a)),r.state={dragNodeHighlight:!1},r.selectHandle=void 0,r.cacheIndent=void 0,r.onSelectorClick=function(o){var l=r.props.context.onNodeClick;l(o,Nt(r.props)),r.isSelectable()?r.onSelect(o):r.onCheck(o)},r.onSelectorDoubleClick=function(o){var l=r.props.context.onNodeDoubleClick;l(o,Nt(r.props))},r.onSelect=function(o){if(!r.isDisabled()){var l=r.props.context.onNodeSelect;o.preventDefault(),l(o,Nt(r.props))}},r.onCheck=function(o){if(!r.isDisabled()){var l=r.props,c=l.disableCheckbox,u=l.checked,d=r.props.context.onNodeCheck;if(!(!r.isCheckable()||c)){o.preventDefault();var f=!u;d(o,Nt(r.props),f)}}},r.onMouseEnter=function(o){var l=r.props.context.onNodeMouseEnter;l(o,Nt(r.props))},r.onMouseLeave=function(o){var l=r.props.context.onNodeMouseLeave;l(o,Nt(r.props))},r.onContextMenu=function(o){var l=r.props.context.onNodeContextMenu;l(o,Nt(r.props))},r.onDragStart=function(o){var l=r.props.context.onNodeDragStart;o.stopPropagation(),r.setState({dragNodeHighlight:!0}),l(o,(0,Ze.Z)(r));try{o.dataTransfer.setData("text/plain","")}catch{}},r.onDragEnter=function(o){var l=r.props.context.onNodeDragEnter;o.preventDefault(),o.stopPropagation(),l(o,(0,Ze.Z)(r))},r.onDragOver=function(o){var l=r.props.context.onNodeDragOver;o.preventDefault(),o.stopPropagation(),l(o,(0,Ze.Z)(r))},r.onDragLeave=function(o){var l=r.props.context.onNodeDragLeave;o.stopPropagation(),l(o,(0,Ze.Z)(r))},r.onDragEnd=function(o){var l=r.props.context.onNodeDragEnd;o.stopPropagation(),r.setState({dragNodeHighlight:!1}),l(o,(0,Ze.Z)(r))},r.onDrop=function(o){var l=r.props.context.onNodeDrop;o.preventDefault(),o.stopPropagation(),r.setState({dragNodeHighlight:!1}),l(o,(0,Ze.Z)(r))},r.onExpand=function(o){var l=r.props,c=l.loading,u=l.context.onNodeExpand;c||u(o,Nt(r.props))},r.setSelectHandle=function(o){r.selectHandle=o},r.getNodeState=function(){var o=r.props.expanded;return r.isLeaf()?null:o?kf:Tf},r.hasChildren=function(){var o=r.props.eventKey,l=r.props.context.keyEntities,c=l[o]||{},u=c.children;return!!(u||[]).length},r.isLeaf=function(){var o=r.props,l=o.isLeaf,c=o.loaded,u=r.props.context.loadData,d=r.hasChildren();return l===!1?!1:l||!u&&!d||u&&c&&!d},r.isDisabled=function(){var o=r.props.disabled,l=r.props.context.disabled;return!!(l||o)},r.isCheckable=function(){var o=r.props.checkable,l=r.props.context.checkable;return!l||o===!1?!1:l},r.syncLoadData=function(o){var l=o.expanded,c=o.loading,u=o.loaded,d=r.props.context,f=d.loadData,v=d.onNodeLoad;c||f&&l&&!r.isLeaf()&&!r.hasChildren()&&!u&&v(Nt(r.props))},r.isDraggable=function(){var o=r.props,l=o.data,c=o.context.draggable;return!!(c&&(!c.nodeDraggable||c.nodeDraggable(l)))},r.renderDragHandler=function(){var o=r.props.context,l=o.draggable,c=o.prefixCls;return l?.icon?y.createElement("span",{className:"".concat(c,"-draggable-icon")},l.icon):null},r.renderSwitcherIconDom=function(o){var l=r.props.switcherIcon,c=r.props.context.switcherIcon,u=l||c;return typeof u=="function"?u((0,$t.Z)((0,$t.Z)({},r.props),{},{isLeaf:o})):u},r.renderSwitcher=function(){var o=r.props.expanded,l=r.props.context.prefixCls;if(r.isLeaf()){var c=r.renderSwitcherIconDom(!0);return c!==!1?y.createElement("span",{className:De()("".concat(l,"-switcher"),"".concat(l,"-switcher-noop"))},c):null}var u=De()("".concat(l,"-switcher"),"".concat(l,"-switcher_").concat(o?kf:Tf)),d=r.renderSwitcherIconDom(!1);return d!==!1?y.createElement("span",{onClick:r.onExpand,className:u},d):null},r.renderCheckbox=function(){var o=r.props,l=o.checked,c=o.halfChecked,u=o.disableCheckbox,d=r.props.context.prefixCls,f=r.isDisabled(),v=r.isCheckable();if(!v)return null;var p=typeof v!="boolean"?v:null;return y.createElement("span",{className:De()("".concat(d,"-checkbox"),l&&"".concat(d,"-checkbox-checked"),!l&&c&&"".concat(d,"-checkbox-indeterminate"),(f||u)&&"".concat(d,"-checkbox-disabled")),onClick:r.onCheck},p)},r.renderIcon=function(){var o=r.props.loading,l=r.props.context.prefixCls;return y.createElement("span",{className:De()("".concat(l,"-iconEle"),"".concat(l,"-icon__").concat(r.getNodeState()||"docu"),o&&"".concat(l,"-icon_loading"))})},r.renderSelector=function(){var o=r.state.dragNodeHighlight,l=r.props,c=l.title,u=c===void 0?x_:c,d=l.selected,f=l.icon,v=l.loading,p=l.data,h=r.props.context,g=h.prefixCls,m=h.showIcon,_=h.icon,b=h.loadData,E=h.titleRender,S=r.isDisabled(),x="".concat(g,"-node-content-wrapper"),C;if(m){var D=f||_;C=D?y.createElement("span",{className:De()("".concat(g,"-iconEle"),"".concat(g,"-icon__customize"))},typeof D=="function"?D(r.props):D):r.renderIcon()}else b&&v&&(C=r.renderIcon());var w;typeof u=="function"?w=u(p):E?w=E(p):w=u;var k=y.createElement("span",{className:"".concat(g,"-title")},w);return y.createElement("span",{ref:r.setSelectHandle,title:typeof u=="string"?u:"",className:De()("".concat(x),"".concat(x,"-").concat(r.getNodeState()||"normal"),!S&&(d||o)&&"".concat(g,"-node-selected")),onMouseEnter:r.onMouseEnter,onMouseLeave:r.onMouseLeave,onContextMenu:r.onContextMenu,onClick:r.onSelectorClick,onDoubleClick:r.onSelectorDoubleClick},C,k,r.renderDropIndicator())},r.renderDropIndicator=function(){var o=r.props,l=o.disabled,c=o.eventKey,u=r.props.context,d=u.draggable,f=u.dropLevelOffset,v=u.dropPosition,p=u.prefixCls,h=u.indent,g=u.dropIndicatorRender,m=u.dragOverNodeKey,_=u.direction,b=!!d,E=!l&&b&&m===c,S=h??r.cacheIndent;return r.cacheIndent=h,E?g({dropPosition:v,dropLevelOffset:f,indent:S,prefixCls:p,direction:_}):null},r}return(0,xf.Z)(n,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var i=this.props.selectable,a=this.props.context.selectable;return typeof i=="boolean"?i:a}},{key:"render",value:function(){var i,a=this.props,s=a.eventKey,o=a.className,l=a.style,c=a.dragOver,u=a.dragOverGapTop,d=a.dragOverGapBottom,f=a.isLeaf,v=a.isStart,p=a.isEnd,h=a.expanded,g=a.selected,m=a.checked,_=a.halfChecked,b=a.loading,E=a.domRef,S=a.active,x=a.data,C=a.onMouseMove,D=a.selectable,w=(0,ra.Z)(a,C_),k=this.props.context,T=k.prefixCls,M=k.filterTreeNode,R=k.keyEntities,P=k.dropContainerKey,A=k.dropTargetKey,L=k.draggingNodeKey,F=this.isDisabled(),B=(0,Df.Z)(w,{aria:!0,data:!0}),z=R[s]||{},N=z.level,G=p[p.length-1],K=this.isDraggable(),H=!F&&K,$=L===s,W=D!==void 0?{"aria-selected":!!D}:void 0;return y.createElement("div",(0,we.Z)({ref:E,className:De()(o,"".concat(T,"-treenode"),(i={},(0,Tt.Z)(i,"".concat(T,"-treenode-disabled"),F),(0,Tt.Z)(i,"".concat(T,"-treenode-switcher-").concat(h?"open":"close"),!f),(0,Tt.Z)(i,"".concat(T,"-treenode-checkbox-checked"),m),(0,Tt.Z)(i,"".concat(T,"-treenode-checkbox-indeterminate"),_),(0,Tt.Z)(i,"".concat(T,"-treenode-selected"),g),(0,Tt.Z)(i,"".concat(T,"-treenode-loading"),b),(0,Tt.Z)(i,"".concat(T,"-treenode-active"),S),(0,Tt.Z)(i,"".concat(T,"-treenode-leaf-last"),G),(0,Tt.Z)(i,"".concat(T,"-treenode-draggable"),K),(0,Tt.Z)(i,"dragging",$),(0,Tt.Z)(i,"drop-target",A===s),(0,Tt.Z)(i,"drop-container",P===s),(0,Tt.Z)(i,"drag-over",!F&&c),(0,Tt.Z)(i,"drag-over-gap-top",!F&&u),(0,Tt.Z)(i,"drag-over-gap-bottom",!F&&d),(0,Tt.Z)(i,"filter-node",M&&M(Nt(this.props))),i)),style:l,draggable:H,"aria-grabbed":$,onDragStart:H?this.onDragStart:void 0,onDragEnter:K?this.onDragEnter:void 0,onDragOver:K?this.onDragOver:void 0,onDragLeave:K?this.onDragLeave:void 0,onDrop:K?this.onDrop:void 0,onDragEnd:K?this.onDragEnd:void 0,onMouseMove:C},W,B),y.createElement(p_,{prefixCls:T,level:N,isStart:v,isEnd:p}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),n}(y.Component),bs=function(e){return y.createElement(_s.Consumer,null,function(n){return y.createElement(S_,(0,we.Z)({},e,{context:n}))})};bs.displayName="TreeNode",bs.isTreeNode=1;const Cs=bs;var w_=null;function Le(t,e){if(!t)return[];var n=t.slice(),r=n.indexOf(e);return r>=0&&n.splice(r,1),n}function qe(t,e){var n=(t||[]).slice();return n.indexOf(e)===-1&&n.push(e),n}function xs(t){return t.split("-")}function D_(t,e){var n=[],r=e[t];function i(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];a.forEach(function(s){var o=s.key,l=s.children;n.push(o),i(l)})}return i(r.children),n}function M_(t){if(t.parent){var e=xs(t.pos);return Number(e[e.length-1])===t.parent.children.length-1}return!1}function k_(t){var e=xs(t.pos);return Number(e[e.length-1])===0}function Rf(t,e,n,r,i,a,s,o,l,c){var u,d=t.clientX,f=t.clientY,v=t.target.getBoundingClientRect(),p=v.top,h=v.height,g=(c==="rtl"?-1:1)*((i?.x||0)-d),m=(g-12)/r,_=o[n.props.eventKey];if(f<p+h/2){var b=s.findIndex(function(A){return A.key===_.key}),E=b<=0?0:b-1,S=s[E].key;_=o[S]}var x=_.key,C=_,D=_.key,w=0,k=0;if(!l.includes(x))for(var T=0;T<m&&M_(_);T+=1)_=_.parent,k+=1;var M=e.props.data,R=_.node,P=!0;return k_(_)&&_.level===0&&f<p+h/2&&a({dragNode:M,dropNode:R,dropPosition:-1})&&_.key===n.props.eventKey?w=-1:(C.children||[]).length&&l.includes(D)?a({dragNode:M,dropNode:R,dropPosition:0})?w=0:P=!1:k===0?m>-1.5?a({dragNode:M,dropNode:R,dropPosition:1})?w=1:P=!1:a({dragNode:M,dropNode:R,dropPosition:0})?w=0:a({dragNode:M,dropNode:R,dropPosition:1})?w=1:P=!1:a({dragNode:M,dropNode:R,dropPosition:1})?w=1:P=!1,{dropPosition:w,dropLevelOffset:k,dropTargetKey:_.key,dropTargetPos:_.pos,dragOverNodeKey:D,dropContainerKey:w===0?null:((u=_.parent)===null||u===void 0?void 0:u.key)||null,dropAllowed:P}}function Of(t,e){if(t){var n=e.multiple;return n?t.slice():t.length?[t[0]]:t}}var T_=function(e){return e};function R_(t,e){if(!t)return[];var n=e||{},r=n.processProps,i=r===void 0?T_:r,a=Array.isArray(t)?t:[t];return a.map(function(s){var o=s.children,l=_objectWithoutProperties(s,w_),c=R_(o,e);return React.createElement(TreeNode,_extends({key:l.key},i(l)),c)})}function Ss(t){if(!t)return null;var e;if(Array.isArray(t))e={checkedKeys:t,halfCheckedKeys:void 0};else if((0,ys.Z)(t)==="object")e={checkedKeys:t.checked||void 0,halfCheckedKeys:t.halfChecked||void 0};else return(0,Qe.ZP)(!1,"`checkedKeys` is not an array or an object"),null;return e}function Pf(t,e){var n=new Set;function r(i){if(!n.has(i)){var a=e[i];if(a){n.add(i);var s=a.parent,o=a.node;o.disabled||s&&r(s.key)}}}return(t||[]).forEach(function(i){r(i)}),(0,br.Z)(n)}function Af(t){if(t==null)throw new TypeError("Cannot destructure "+t)}var Cr=I(96199),Nf=I(37501),O_=I(84642),P_=I(59450);function A_(t,e){var n=y.useState(!1),r=(0,Cr.Z)(n,2),i=r[0],a=r[1];y.useLayoutEffect(function(){if(i)return t(),function(){e()}},[i]),y.useLayoutEffect(function(){return a(!0),function(){a(!1)}},[])}var N_=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],Lf=function(e,n){var r=e.className,i=e.style,a=e.motion,s=e.motionNodes,o=e.motionType,l=e.onMotionStart,c=e.onMotionEnd,u=e.active,d=e.treeNodeRequiredProps,f=(0,ra.Z)(e,N_),v=y.useState(!0),p=(0,Cr.Z)(v,2),h=p[0],g=p[1],m=y.useContext(_s),_=m.prefixCls,b=s&&o!=="hide";(0,Nf.Z)(function(){s&&b!==h&&g(b)},[s]);var E=function(){s&&l()},S=y.useRef(!1),x=function(){s&&!S.current&&(S.current=!0,c())};A_(E,x);var C=function(w){b===w&&x()};return s?y.createElement(P_.Z,(0,we.Z)({ref:n,visible:h},a,{motionAppear:o==="show",onVisibleChanged:C}),function(D,w){var k=D.className,T=D.style;return y.createElement("div",{ref:w,className:De()("".concat(_,"-treenode-motion"),k),style:T},s.map(function(M){var R=(0,we.Z)({},(Af(M.data),M.data)),P=M.title,A=M.key,L=M.isStart,F=M.isEnd;delete R.children;var B=Jn(A,d);return y.createElement(Cs,(0,we.Z)({},R,B,{title:P,active:u,data:M.data,key:A,isStart:L,isEnd:F}))}))}):y.createElement(Cs,(0,we.Z)({domRef:n,className:r,style:i},f,{active:u}))};Lf.displayName="MotionTreeNode";var L_=y.forwardRef(Lf);const I_=L_;function B_(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t.length,r=e.length;if(Math.abs(n-r)!==1)return{add:!1,key:null};function i(a,s){var o=new Map;a.forEach(function(c){o.set(c,!0)});var l=s.filter(function(c){return!o.has(c)});return l.length===1?l[0]:null}return n<r?{add:!0,key:i(t,e)}:{add:!1,key:i(e,t)}}function If(t,e,n){var r=t.findIndex(function(o){return o.key===n}),i=t[r+1],a=e.findIndex(function(o){return o.key===n});if(i){var s=e.findIndex(function(o){return o.key===i.key});return e.slice(a+1,s)}return e.slice(a+1)}var F_=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],Bf={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},z_=function(){},xr="RC_TREE_MOTION_".concat(Math.random()),ws={key:xr},Ff={key:xr,level:0,index:0,pos:"0",node:ws,nodes:[ws]},zf={parent:null,children:[],pos:Ff.pos,data:ws,title:null,key:xr,isStart:[],isEnd:[]};function Gf(t,e,n,r){return e===!1||!n?t:t.slice(0,Math.ceil(n/r)+1)}function Kf(t){var e=t.key,n=t.pos;return qn(e,n)}function G_(t){for(var e=String(t.data.key),n=t;n.parent;)n=n.parent,e="".concat(n.data.key," > ").concat(e);return e}var Wf=y.forwardRef(function(t,e){var n=t.prefixCls,r=t.data,i=t.selectable,a=t.checkable,s=t.expandedKeys,o=t.selectedKeys,l=t.checkedKeys,c=t.loadedKeys,u=t.loadingKeys,d=t.halfCheckedKeys,f=t.keyEntities,v=t.disabled,p=t.dragging,h=t.dragOverNodeKey,g=t.dropPosition,m=t.motion,_=t.height,b=t.itemHeight,E=t.virtual,S=t.focusable,x=t.activeItem,C=t.focused,D=t.tabIndex,w=t.onKeyDown,k=t.onFocus,T=t.onBlur,M=t.onActiveChange,R=t.onListChangeStart,P=t.onListChangeEnd,A=(0,ra.Z)(t,F_),L=y.useRef(null),F=y.useRef(null);y.useImperativeHandle(e,function(){return{scrollTo:function(_t){L.current.scrollTo(_t)},getIndentWidth:function(){return F.current.offsetWidth}}});var B=y.useState(s),z=(0,Cr.Z)(B,2),N=z[0],G=z[1],K=y.useState(r),H=(0,Cr.Z)(K,2),$=H[0],W=H[1],j=y.useState(r),q=(0,Cr.Z)(j,2),et=q[0],rt=q[1],V=y.useState([]),U=(0,Cr.Z)(V,2),dt=U[0],ot=U[1],Rt=y.useState(null),ht=(0,Cr.Z)(Rt,2),vt=ht[0],mt=ht[1],st=y.useRef(r);st.current=r;function ct(){var gt=st.current;W(gt),rt(gt),ot([]),mt(null),P()}(0,Nf.Z)(function(){G(s);var gt=B_(N,s);if(gt.key!==null)if(gt.add){var _t=$.findIndex(function(Dr){var ke=Dr.key;return ke===gt.key}),St=Gf(If($,r,gt.key),E,_,b),ee=$.slice();ee.splice(_t+1,0,zf),rt(ee),ot(St),mt("show")}else{var se=r.findIndex(function(Dr){var ke=Dr.key;return ke===gt.key}),Me=Gf(If(r,$,gt.key),E,_,b),wr=r.slice();wr.splice(se+1,0,zf),rt(wr),ot(Me),mt("hide")}else $!==r&&(W(r),rt(r))},[s,r]),y.useEffect(function(){p||ct()},[p]);var pt=m?et:r,Ht={expandedKeys:s,selectedKeys:o,loadedKeys:c,loadingKeys:u,checkedKeys:l,halfCheckedKeys:d,dragOverNodeKey:h,dropPosition:g,keyEntities:f};return y.createElement(y.Fragment,null,C&&x&&y.createElement("span",{style:Bf,"aria-live":"assertive"},G_(x)),y.createElement("div",null,y.createElement("input",{style:Bf,disabled:S===!1||v,tabIndex:S!==!1?D:null,onKeyDown:w,onFocus:k,onBlur:T,value:"",onChange:z_,"aria-label":"for screen reader"})),y.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},y.createElement("div",{className:"".concat(n,"-indent")},y.createElement("div",{ref:F,className:"".concat(n,"-indent-unit")}))),y.createElement(O_.Z,(0,we.Z)({},A,{data:pt,itemKey:Kf,height:_,fullHeight:!1,virtual:E,itemHeight:b,prefixCls:"".concat(n,"-list"),ref:L,onVisibleChange:function(_t,St){var ee=new Set(_t),se=St.filter(function(Me){return!ee.has(Me)});se.some(function(Me){return Kf(Me)===xr})&&ct()}}),function(gt){var _t=gt.pos,St=(0,we.Z)({},(Af(gt.data),gt.data)),ee=gt.title,se=gt.key,Me=gt.isStart,wr=gt.isEnd,Dr=qn(se,_t);delete St.key,delete St.children;var ke=Jn(Dr,Ht);return y.createElement(I_,(0,we.Z)({},St,ke,{title:ee,active:!!x&&se===x.key,pos:_t,data:gt.data,isStart:Me,isEnd:wr,motion:m,motionNodes:se===xr?dt:null,motionType:vt,onMotionStart:R,onMotionEnd:ct,treeNodeRequiredProps:Ht,onMouseMove:function(){M(null)}}))}))});Wf.displayName="NodeList";const K_=Wf;function Yf(t,e){var n=new Set;return t.forEach(function(r){e.has(r)||n.add(r)}),n}function W_(t){var e=t||{},n=e.disabled,r=e.disableCheckbox,i=e.checkable;return!!(n||r)||i===!1}function Y_(t,e,n,r){for(var i=new Set(t),a=new Set,s=0;s<=n;s+=1){var o=e.get(s)||new Set;o.forEach(function(d){var f=d.key,v=d.node,p=d.children,h=p===void 0?[]:p;i.has(f)&&!r(v)&&h.filter(function(g){return!r(g.node)}).forEach(function(g){i.add(g.key)})})}for(var l=new Set,c=n;c>=0;c-=1){var u=e.get(c)||new Set;u.forEach(function(d){var f=d.parent,v=d.node;if(!(r(v)||!d.parent||l.has(d.parent.key))){if(r(d.parent.node)){l.add(f.key);return}var p=!0,h=!1;(f.children||[]).filter(function(g){return!r(g.node)}).forEach(function(g){var m=g.key,_=i.has(m);p&&!_&&(p=!1),!h&&(_||a.has(m))&&(h=!0)}),p&&i.add(f.key),h&&a.add(f.key),l.add(f.key)}})}return{checkedKeys:Array.from(i),halfCheckedKeys:Array.from(Yf(a,i))}}function $_(t,e,n,r,i){for(var a=new Set(t),s=new Set(e),o=0;o<=r;o+=1){var l=n.get(o)||new Set;l.forEach(function(f){var v=f.key,p=f.node,h=f.children,g=h===void 0?[]:h;!a.has(v)&&!s.has(v)&&!i(p)&&g.filter(function(m){return!i(m.node)}).forEach(function(m){a.delete(m.key)})})}s=new Set;for(var c=new Set,u=r;u>=0;u-=1){var d=n.get(u)||new Set;d.forEach(function(f){var v=f.parent,p=f.node;if(!(i(p)||!f.parent||c.has(f.parent.key))){if(i(f.parent.node)){c.add(v.key);return}var h=!0,g=!1;(v.children||[]).filter(function(m){return!i(m.node)}).forEach(function(m){var _=m.key,b=a.has(_);h&&!b&&(h=!1),!g&&(b||s.has(_))&&(g=!0)}),h||a.delete(v.key),g&&s.add(v.key),c.add(v.key)}})}return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(Yf(s,a))}}function Ds(t,e,n,r){var i=[],a;r?a=r:a=W_;var s=new Set(t.filter(function(u){var d=!!n[u];return d||i.push(u),d})),o=new Map,l=0;Object.keys(n).forEach(function(u){var d=n[u],f=d.level,v=o.get(f);v||(v=new Set,o.set(f,v)),v.add(d),l=Math.max(l,f)}),(0,Qe.ZP)(!i.length,"Tree missing follow keys: ".concat(i.slice(0,100).map(function(u){return"'".concat(u,"'")}).join(", ")));var c;return e===!0?c=Y_(s,o,l,a):c=$_(s,e.halfCheckedKeys,o,l,a),c}function H_(t){var e=t.dropPosition,n=t.dropLevelOffset,r=t.indent,i={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(e){case-1:i.top=0,i.left=-n*r;break;case 1:i.bottom=0,i.left=-n*r;break;case 0:i.bottom=0,i.left=r;break}return y.createElement("div",{style:i})}var V_=10,Ms=function(t){(0,Sf.Z)(n,t);var e=(0,wf.Z)(n);function n(){var r;(0,Cf.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=e.call.apply(e,[this].concat(a)),r.destroyed=!1,r.delayedDragEnterLogic=void 0,r.loadingRetryTimes={},r.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:na()},r.dragStartMousePosition=null,r.dragNode=void 0,r.currentMouseOverDroppableNodeKey=null,r.listRef=y.createRef(),r.onNodeDragStart=function(o,l){var c=r.state,u=c.expandedKeys,d=c.keyEntities,f=r.props.onDragStart,v=l.props.eventKey;r.dragNode=l,r.dragStartMousePosition={x:o.clientX,y:o.clientY};var p=Le(u,v);r.setState({draggingNodeKey:v,dragChildrenKeys:D_(v,d),indent:r.listRef.current.getIndentWidth()}),r.setExpandedKeys(p),window.addEventListener("dragend",r.onWindowDragEnd),f?.({event:o,node:Nt(l.props)})},r.onNodeDragEnter=function(o,l){var c=r.state,u=c.expandedKeys,d=c.keyEntities,f=c.dragChildrenKeys,v=c.flattenNodes,p=c.indent,h=r.props,g=h.onDragEnter,m=h.onExpand,_=h.allowDrop,b=h.direction,E=l.props,S=E.pos,x=E.eventKey,C=(0,Ze.Z)(r),D=C.dragNode;if(r.currentMouseOverDroppableNodeKey!==x&&(r.currentMouseOverDroppableNodeKey=x),!D){r.resetDragState();return}var w=Rf(o,D,l,p,r.dragStartMousePosition,_,v,d,u,b),k=w.dropPosition,T=w.dropLevelOffset,M=w.dropTargetKey,R=w.dropContainerKey,P=w.dropTargetPos,A=w.dropAllowed,L=w.dragOverNodeKey;if(f.indexOf(M)!==-1||!A){r.resetDragState();return}if(r.delayedDragEnterLogic||(r.delayedDragEnterLogic={}),Object.keys(r.delayedDragEnterLogic).forEach(function(F){clearTimeout(r.delayedDragEnterLogic[F])}),D.props.eventKey!==l.props.eventKey&&(o.persist(),r.delayedDragEnterLogic[S]=window.setTimeout(function(){if(r.state.draggingNodeKey!==null){var F=(0,br.Z)(u),B=d[l.props.eventKey];B&&(B.children||[]).length&&(F=qe(u,l.props.eventKey)),"expandedKeys"in r.props||r.setExpandedKeys(F),m?.(F,{node:Nt(l.props),expanded:!0,nativeEvent:o.nativeEvent})}},800)),D.props.eventKey===M&&T===0){r.resetDragState();return}r.setState({dragOverNodeKey:L,dropPosition:k,dropLevelOffset:T,dropTargetKey:M,dropContainerKey:R,dropTargetPos:P,dropAllowed:A}),g?.({event:o,node:Nt(l.props),expandedKeys:u})},r.onNodeDragOver=function(o,l){var c=r.state,u=c.dragChildrenKeys,d=c.flattenNodes,f=c.keyEntities,v=c.expandedKeys,p=c.indent,h=r.props,g=h.onDragOver,m=h.allowDrop,_=h.direction,b=(0,Ze.Z)(r),E=b.dragNode;if(E){var S=Rf(o,E,l,p,r.dragStartMousePosition,m,d,f,v,_),x=S.dropPosition,C=S.dropLevelOffset,D=S.dropTargetKey,w=S.dropContainerKey,k=S.dropAllowed,T=S.dropTargetPos,M=S.dragOverNodeKey;u.indexOf(D)!==-1||!k||(E.props.eventKey===D&&C===0?r.state.dropPosition===null&&r.state.dropLevelOffset===null&&r.state.dropTargetKey===null&&r.state.dropContainerKey===null&&r.state.dropTargetPos===null&&r.state.dropAllowed===!1&&r.state.dragOverNodeKey===null||r.resetDragState():x===r.state.dropPosition&&C===r.state.dropLevelOffset&&D===r.state.dropTargetKey&&w===r.state.dropContainerKey&&T===r.state.dropTargetPos&&k===r.state.dropAllowed&&M===r.state.dragOverNodeKey||r.setState({dropPosition:x,dropLevelOffset:C,dropTargetKey:D,dropContainerKey:w,dropTargetPos:T,dropAllowed:k,dragOverNodeKey:M}),g?.({event:o,node:Nt(l.props)}))}},r.onNodeDragLeave=function(o,l){r.currentMouseOverDroppableNodeKey===l.props.eventKey&&!o.currentTarget.contains(o.relatedTarget)&&(r.resetDragState(),r.currentMouseOverDroppableNodeKey=null);var c=r.props.onDragLeave;c?.({event:o,node:Nt(l.props)})},r.onWindowDragEnd=function(o){r.onNodeDragEnd(o,null,!0),window.removeEventListener("dragend",r.onWindowDragEnd)},r.onNodeDragEnd=function(o,l){var c=r.props.onDragEnd;r.setState({dragOverNodeKey:null}),r.cleanDragState(),c?.({event:o,node:Nt(l.props)}),r.dragNode=null,window.removeEventListener("dragend",r.onWindowDragEnd)},r.onNodeDrop=function(o,l){var c,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=r.state,f=d.dragChildrenKeys,v=d.dropPosition,p=d.dropTargetKey,h=d.dropTargetPos,g=d.dropAllowed;if(g){var m=r.props.onDrop;if(r.setState({dragOverNodeKey:null}),r.cleanDragState(),p!==null){var _=(0,$t.Z)((0,$t.Z)({},Jn(p,r.getTreeNodeRequiredProps())),{},{active:((c=r.getActiveItem())===null||c===void 0?void 0:c.key)===p,data:r.state.keyEntities[p].node}),b=f.indexOf(p)!==-1;(0,Qe.ZP)(!b,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var E=xs(h),S={event:o,node:Nt(_),dragNode:r.dragNode?Nt(r.dragNode.props):null,dragNodesKeys:[r.dragNode.props.eventKey].concat(f),dropToGap:v!==0,dropPosition:v+Number(E[E.length-1])};u||m?.(S),r.dragNode=null}}},r.cleanDragState=function(){var o=r.state.draggingNodeKey;o!==null&&r.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),r.dragStartMousePosition=null,r.currentMouseOverDroppableNodeKey=null},r.triggerExpandActionExpand=function(o,l){var c=r.state,u=c.expandedKeys,d=c.flattenNodes,f=l.expanded,v=l.key,p=l.isLeaf;if(!(p||o.shiftKey||o.metaKey||o.ctrlKey)){var h=d.filter(function(m){return m.key===v})[0],g=Nt((0,$t.Z)((0,$t.Z)({},Jn(v,r.getTreeNodeRequiredProps())),{},{data:h.data}));r.setExpandedKeys(f?Le(u,v):qe(u,v)),r.onNodeExpand(o,g)}},r.onNodeClick=function(o,l){var c=r.props,u=c.onClick,d=c.expandAction;d==="click"&&r.triggerExpandActionExpand(o,l),u?.(o,l)},r.onNodeDoubleClick=function(o,l){var c=r.props,u=c.onDoubleClick,d=c.expandAction;d==="doubleClick"&&r.triggerExpandActionExpand(o,l),u?.(o,l)},r.onNodeSelect=function(o,l){var c=r.state.selectedKeys,u=r.state,d=u.keyEntities,f=u.fieldNames,v=r.props,p=v.onSelect,h=v.multiple,g=l.selected,m=l[f.key],_=!g;_?h?c=qe(c,m):c=[m]:c=Le(c,m);var b=c.map(function(E){var S=d[E];return S?S.node:null}).filter(function(E){return E});r.setUncontrolledState({selectedKeys:c}),p?.(c,{event:"select",selected:_,node:l,selectedNodes:b,nativeEvent:o.nativeEvent})},r.onNodeCheck=function(o,l,c){var u=r.state,d=u.keyEntities,f=u.checkedKeys,v=u.halfCheckedKeys,p=r.props,h=p.checkStrictly,g=p.onCheck,m=l.key,_,b={event:"check",node:l,checked:c,nativeEvent:o.nativeEvent};if(h){var E=c?qe(f,m):Le(f,m),S=Le(v,m);_={checked:E,halfChecked:S},b.checkedNodes=E.map(function(T){return d[T]}).filter(function(T){return T}).map(function(T){return T.node}),r.setUncontrolledState({checkedKeys:E})}else{var x=Ds([].concat((0,br.Z)(f),[m]),!0,d),C=x.checkedKeys,D=x.halfCheckedKeys;if(!c){var w=new Set(C);w.delete(m);var k=Ds(Array.from(w),{checked:!1,halfCheckedKeys:D},d);C=k.checkedKeys,D=k.halfCheckedKeys}_=C,b.checkedNodes=[],b.checkedNodesPositions=[],b.halfCheckedKeys=D,C.forEach(function(T){var M=d[T];if(M){var R=M.node,P=M.pos;b.checkedNodes.push(R),b.checkedNodesPositions.push({node:R,pos:P})}}),r.setUncontrolledState({checkedKeys:C},!1,{halfCheckedKeys:D})}g?.(_,b)},r.onNodeLoad=function(o){var l=o.key,c=new Promise(function(u,d){r.setState(function(f){var v=f.loadedKeys,p=v===void 0?[]:v,h=f.loadingKeys,g=h===void 0?[]:h,m=r.props,_=m.loadData,b=m.onLoad;if(!_||p.indexOf(l)!==-1||g.indexOf(l)!==-1)return null;var E=_(o);return E.then(function(){var S=r.state.loadedKeys,x=qe(S,l);b?.(x,{event:"load",node:o}),r.setUncontrolledState({loadedKeys:x}),r.setState(function(C){return{loadingKeys:Le(C.loadingKeys,l)}}),u()}).catch(function(S){if(r.setState(function(C){return{loadingKeys:Le(C.loadingKeys,l)}}),r.loadingRetryTimes[l]=(r.loadingRetryTimes[l]||0)+1,r.loadingRetryTimes[l]>=V_){var x=r.state.loadedKeys;(0,Qe.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),r.setUncontrolledState({loadedKeys:qe(x,l)}),u()}d(S)}),{loadingKeys:qe(g,l)}})});return c.catch(function(){}),c},r.onNodeMouseEnter=function(o,l){var c=r.props.onMouseEnter;c?.({event:o,node:l})},r.onNodeMouseLeave=function(o,l){var c=r.props.onMouseLeave;c?.({event:o,node:l})},r.onNodeContextMenu=function(o,l){var c=r.props.onRightClick;c&&(o.preventDefault(),c({event:o,node:l}))},r.onFocus=function(){var o=r.props.onFocus;r.setState({focused:!0});for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];o?.apply(void 0,c)},r.onBlur=function(){var o=r.props.onBlur;r.setState({focused:!1}),r.onActiveChange(null);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];o?.apply(void 0,c)},r.getTreeNodeRequiredProps=function(){var o=r.state,l=o.expandedKeys,c=o.selectedKeys,u=o.loadedKeys,d=o.loadingKeys,f=o.checkedKeys,v=o.halfCheckedKeys,p=o.dragOverNodeKey,h=o.dropPosition,g=o.keyEntities;return{expandedKeys:l||[],selectedKeys:c||[],loadedKeys:u||[],loadingKeys:d||[],checkedKeys:f||[],halfCheckedKeys:v||[],dragOverNodeKey:p,dropPosition:h,keyEntities:g}},r.setExpandedKeys=function(o){var l=r.state,c=l.treeData,u=l.fieldNames,d=Es(c,o,u);r.setUncontrolledState({expandedKeys:o,flattenNodes:d},!0)},r.onNodeExpand=function(o,l){var c=r.state.expandedKeys,u=r.state,d=u.listChanging,f=u.fieldNames,v=r.props,p=v.onExpand,h=v.loadData,g=l.expanded,m=l[f.key];if(!d){var _=c.indexOf(m),b=!g;if((0,Qe.ZP)(g&&_!==-1||!g&&_===-1,"Expand state not sync with index check"),b?c=qe(c,m):c=Le(c,m),r.setExpandedKeys(c),p?.(c,{node:l,expanded:b,nativeEvent:o.nativeEvent}),b&&h){var E=r.onNodeLoad(l);E&&E.then(function(){var S=Es(r.state.treeData,c,f);r.setUncontrolledState({flattenNodes:S})}).catch(function(){var S=r.state.expandedKeys,x=Le(S,m);r.setExpandedKeys(x)})}}},r.onListChangeStart=function(){r.setUncontrolledState({listChanging:!0})},r.onListChangeEnd=function(){setTimeout(function(){r.setUncontrolledState({listChanging:!1})})},r.onActiveChange=function(o){var l=r.state.activeKey,c=r.props.onActiveChange;l!==o&&(r.setState({activeKey:o}),o!==null&&r.scrollTo({key:o}),c?.(o))},r.getActiveItem=function(){var o=r.state,l=o.activeKey,c=o.flattenNodes;return l===null?null:c.find(function(u){var d=u.key;return d===l})||null},r.offsetActiveKey=function(o){var l=r.state,c=l.flattenNodes,u=l.activeKey,d=c.findIndex(function(p){var h=p.key;return h===u});d===-1&&o<0&&(d=c.length),d=(d+o+c.length)%c.length;var f=c[d];if(f){var v=f.key;r.onActiveChange(v)}else r.onActiveChange(null)},r.onKeyDown=function(o){var l=r.state,c=l.activeKey,u=l.expandedKeys,d=l.checkedKeys,f=l.fieldNames,v=r.props,p=v.onKeyDown,h=v.checkable,g=v.selectable;switch(o.which){case an.Z.UP:{r.offsetActiveKey(-1),o.preventDefault();break}case an.Z.DOWN:{r.offsetActiveKey(1),o.preventDefault();break}}var m=r.getActiveItem();if(m&&m.data){var _=r.getTreeNodeRequiredProps(),b=m.data.isLeaf===!1||!!(m.data[f.children]||[]).length,E=Nt((0,$t.Z)((0,$t.Z)({},Jn(c,_)),{},{data:m.data,active:!0}));switch(o.which){case an.Z.LEFT:{b&&u.includes(c)?r.onNodeExpand({},E):m.parent&&r.onActiveChange(m.parent.key),o.preventDefault();break}case an.Z.RIGHT:{b&&!u.includes(c)?r.onNodeExpand({},E):m.children&&m.children.length&&r.onActiveChange(m.children[0].key),o.preventDefault();break}case an.Z.ENTER:case an.Z.SPACE:{h&&!E.disabled&&E.checkable!==!1&&!E.disableCheckbox?r.onNodeCheck({},E,!d.includes(c)):!h&&g&&!E.disabled&&E.selectable!==!1&&r.onNodeSelect({},E);break}}}p?.(o)},r.setUncontrolledState=function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!r.destroyed){var u=!1,d=!0,f={};Object.keys(o).forEach(function(v){if(v in r.props){d=!1;return}u=!0,f[v]=o[v]}),u&&(!l||d)&&r.setState((0,$t.Z)((0,$t.Z)({},f),c))}},r.scrollTo=function(o){r.listRef.current.scrollTo(o)},r}return(0,xf.Z)(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var i=this.props.activeKey;i!==void 0&&i!==this.state.activeKey&&(this.setState({activeKey:i}),i!==null&&this.scrollTo({key:i}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var i,a=this.state,s=a.focused,o=a.flattenNodes,l=a.keyEntities,c=a.draggingNodeKey,u=a.activeKey,d=a.dropLevelOffset,f=a.dropContainerKey,v=a.dropTargetKey,p=a.dropPosition,h=a.dragOverNodeKey,g=a.indent,m=this.props,_=m.prefixCls,b=m.className,E=m.style,S=m.showLine,x=m.focusable,C=m.tabIndex,D=C===void 0?0:C,w=m.selectable,k=m.showIcon,T=m.icon,M=m.switcherIcon,R=m.draggable,P=m.checkable,A=m.checkStrictly,L=m.disabled,F=m.motion,B=m.loadData,z=m.filterTreeNode,N=m.height,G=m.itemHeight,K=m.virtual,H=m.titleRender,$=m.dropIndicatorRender,W=m.onContextMenu,j=m.onScroll,q=m.direction,et=m.rootClassName,rt=m.rootStyle,V=(0,Df.Z)(this.props,{aria:!0,data:!0}),U;return R&&((0,ys.Z)(R)==="object"?U=R:typeof R=="function"?U={nodeDraggable:R}:U={}),y.createElement(_s.Provider,{value:{prefixCls:_,selectable:w,showIcon:k,icon:T,switcherIcon:M,draggable:U,draggingNodeKey:c,checkable:P,checkStrictly:A,disabled:L,keyEntities:l,dropLevelOffset:d,dropContainerKey:f,dropTargetKey:v,dropPosition:p,dragOverNodeKey:h,indent:g,direction:q,dropIndicatorRender:$,loadData:B,filterTreeNode:z,titleRender:H,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},y.createElement("div",{role:"tree",className:De()(_,b,et,(i={},(0,Tt.Z)(i,"".concat(_,"-show-line"),S),(0,Tt.Z)(i,"".concat(_,"-focused"),s),(0,Tt.Z)(i,"".concat(_,"-active-focused"),u!==null),i)),style:rt},y.createElement(K_,(0,we.Z)({ref:this.listRef,prefixCls:_,style:E,data:o,disabled:L,selectable:w,checkable:!!P,motion:F,dragging:c!==null,height:N,itemHeight:G,virtual:K,focusable:x,focused:s,tabIndex:D,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:W,onScroll:j},this.getTreeNodeRequiredProps(),V))))}}],[{key:"getDerivedStateFromProps",value:function(i,a){var s=a.prevProps,o={prevProps:i};function l(x){return!s&&x in i||s&&s[x]!==i[x]}var c,u=a.fieldNames;if(l("fieldNames")&&(u=na(i.fieldNames),o.fieldNames=u),l("treeData")?c=i.treeData:l("children")&&((0,Qe.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),c=__(i.children)),c){o.treeData=c;var d=b_(c,{fieldNames:u});o.keyEntities=(0,$t.Z)((0,Tt.Z)({},xr,Ff),d.keyEntities)}var f=o.keyEntities||a.keyEntities;if(l("expandedKeys")||s&&l("autoExpandParent"))o.expandedKeys=i.autoExpandParent||!s&&i.defaultExpandParent?Pf(i.expandedKeys,f):i.expandedKeys;else if(!s&&i.defaultExpandAll){var v=(0,$t.Z)({},f);delete v[xr],o.expandedKeys=Object.keys(v).map(function(x){return v[x].key})}else!s&&i.defaultExpandedKeys&&(o.expandedKeys=i.autoExpandParent||i.defaultExpandParent?Pf(i.defaultExpandedKeys,f):i.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,c||o.expandedKeys){var p=Es(c||a.treeData,o.expandedKeys||a.expandedKeys,u);o.flattenNodes=p}if(i.selectable&&(l("selectedKeys")?o.selectedKeys=Of(i.selectedKeys,i):!s&&i.defaultSelectedKeys&&(o.selectedKeys=Of(i.defaultSelectedKeys,i))),i.checkable){var h;if(l("checkedKeys")?h=Ss(i.checkedKeys)||{}:!s&&i.defaultCheckedKeys?h=Ss(i.defaultCheckedKeys)||{}:c&&(h=Ss(i.checkedKeys)||{checkedKeys:a.checkedKeys,halfCheckedKeys:a.halfCheckedKeys}),h){var g=h,m=g.checkedKeys,_=m===void 0?[]:m,b=g.halfCheckedKeys,E=b===void 0?[]:b;if(!i.checkStrictly){var S=Ds(_,!0,f);_=S.checkedKeys,E=S.halfCheckedKeys}o.checkedKeys=_,o.halfCheckedKeys=E}}return l("loadedKeys")&&(o.loadedKeys=i.loadedKeys),o}}]),n}(y.Component);Ms.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:H_,allowDrop:function(){return!0},expandAction:!1},Ms.TreeNode=Cs;const X_=Ms;function j_(t){return(0,bf.css)`
    .moveable-control-box {
      z-index: 999;
    }
    ,
    .rc-tree {
      margin: 0;
      margin-bottom: 15px;
      border: 1px solid transparent;

      &-focused:not(&-active-focused) {
        border-color: cyan;
      }

      .rc-tree-title {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
      }

      .rc-tree-treenode {
        margin: 0;
        padding: 1px;
        line-height: 24px;
        white-space: nowrap;
        list-style: none;
        outline: 0;

        display: flex;
        margin-bottom: 3px;
        cursor: pointer;

        .draggable {
          color: #333;
          -moz-user-select: none;
          -khtml-user-select: none;
          -webkit-user-select: none;
          user-select: none;
          /* Required to make elements draggable in old WebKit */
          // -khtml-user-drag: element;
          // -webkit-user-drag: element;
        }

        &.drop-container {
          > .draggable::after {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            box-shadow: inset 0 0 0 2px blue;
            content: '';
          }
          & ~ .rc-tree-treenode {
            border-left: 2px solid ${t.components.input.borderColor};
          }
        }
        &.drop-target {
          & ~ .rc-tree-treenode {
            border-left: none;
          }
        }
        &.filter-node {
          > .rc-tree-node-content-wrapper {
            color: #a60000 !important;
            font-weight: bold !important;
          }
        }
        ul {
          margin: 0;
          padding: 0 0 0 18px;
        }
        .rc-tree-node-content-wrapper {
          position: relative;
          display: inline-block;
          height: 24px;
          margin: 0;
          padding: 0;
          text-decoration: none;
          vertical-align: top;
          cursor: grab;
          flex-grow: 1;
          display: flex;

          border: 1px solid ${t.components.input.borderColor};
          border-radius: ${t.shape.radius.default};
          background: ${t.colors.background.secondary};
          min-height: ${t.spacing.gridSize*4}px;

          &:hover {
            border: 1px solid ${t.components.input.borderHover};
          }

          &.rc-tree-node-selected {
            border: 1px solid ${t.colors.primary.border};
            opacity: 1;
          }
        }

        span {
          &.rc-tree-checkbox,
          &.rc-tree-iconEle {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-right: 2px;
            line-height: 16px;
            vertical-align: -0.125em;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-switcher {
            display: flex;
            align-items: center;
            width: 16px;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-icon_loading {
            margin-right: 2px;
            vertical-align: top;
            background: url('data:image/gif;base64,R0lGODlhEAAQAKIGAMLY8YSx5HOm4Mjc88/g9Ofw+v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAGACwAAAAAEAAQAAADMGi6RbUwGjKIXCAA016PgRBElAVlG/RdLOO0X9nK61W39qvqiwz5Ls/rRqrggsdkAgAh+QQFCgAGACwCAAAABwAFAAADD2hqELAmiFBIYY4MAutdCQAh+QQFCgAGACwGAAAABwAFAAADD1hU1kaDOKMYCGAGEeYFCQAh+QQFCgAGACwKAAIABQAHAAADEFhUZjSkKdZqBQG0IELDQAIAIfkEBQoABgAsCgAGAAUABwAAAxBoVlRKgyjmlAIBqCDCzUoCACH5BAUKAAYALAYACgAHAAUAAAMPaGpFtYYMAgJgLogA610JACH5BAUKAAYALAIACgAHAAUAAAMPCAHWFiI4o1ghZZJB5i0JACH5BAUKAAYALAAABgAFAAcAAAMQCAFmIaEp1motpDQySMNFAgA7')
              no-repeat scroll 0 0 transparent;
          }
          &.rc-tree-switcher {
            &.rc-tree-switcher-noop {
              cursor: auto;
            }
            &.rc-tree-switcher_open {
              background-position: -93px -56px;
            }
            &.rc-tree-switcher_close {
              background-position: -75px -56px;
            }
          }
          &.rc-tree-checkbox {
            width: 13px;
            height: 13px;
            margin: 0 3px;
            background-position: 0 0;
            &-checked {
              background-position: -14px 0;
            }
            &-indeterminate {
              background-position: -14px -28px;
            }
            &-disabled {
              background-position: 0 -56px;
            }
            &.rc-tree-checkbox-checked.rc-tree-checkbox-disabled {
              background-position: -14px -56px;
            }
            &.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled {
              position: relative;
              background: #ccc;
              border-radius: 3px;
              &::after {
                position: absolute;
                top: 5px;
                left: 3px;
                width: 5px;
                height: 0;
                border: 2px solid #fff;
                border-top: 0;
                border-left: 0;
                -webkit-transform: scale(1);
                transform: scale(1);
                content: ' ';
              }
            }
          }
        }
      }
      &:not(.rc-tree-show-line) {
        .rc-tree-treenode {
          .rc-tree-switcher-noop {
            background: none;
          }
        }
      }
      &.rc-tree-show-line {
        .rc-tree-treenode:not(:last-child) {
          > ul {
            background: url('data:image/gif;base64,R0lGODlhCQACAIAAAMzMzP///yH5BAEAAAEALAAAAAAJAAIAAAIEjI9pUAA7') 0 0
              repeat-y;
          }
          > .rc-tree-switcher-noop {
            background-position: -56px -18px;
          }
        }
        .rc-tree-treenode:last-child {
          > .rc-tree-switcher-noop {
            background-position: -56px -36px;
          }
        }
      }
      &-child-tree {
        display: none;
        &-open {
          display: block;
        }
      }
      &-treenode-disabled {
        > span:not(.rc-tree-switcher),
        > a,
        > a span {
          color: #767676;
          cursor: not-allowed;
        }
      }
      &-treenode-active {
        background: rgba(0, 0, 0, 0.1);
      }
      &-node-selected {
        opacity: 0.8;
      }
      &-icon__open {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -16px;
      }
      &-icon__close {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px 0;
      }
      &-icon__docu {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -32px;
      }
      &-icon__customize {
        margin-right: 2px;
        vertical-align: top;
      }
      &-title {
        display: inline-block;
      }
      &-indent {
        display: inline-block;
        height: 0;
        vertical-align: bottom;
      }
      &-indent-unit {
        display: inline-block;
        width: 16px;
      }

      &-draggable-icon {
        display: inline-flex;
        justify-content: center;
        width: 16px;
      }
    }
  `}var U_=I(93114);const Z_=({settings:t,nodeData:e,setAllowSelection:n})=>{const r=e.dataRef,i=e.dataRef.getName(),a=(0,Et.wW)(Q_),s=t.layer,o=()=>{if(t?.layer)return t.layer.scene},l=v=>{(v.parent??s).doAction(Ut.Delete,v),n(!1)},c=v=>{(v.parent??s).doAction(Ut.Duplicate,v),n(!1)},u=(v,p)=>{v.onChange({...v.options,name:p})},d=v=>!!o()?.canRename(v),f=v=>v.options.type;return y.createElement(y.Fragment,null,y.createElement(U_.X,{name:i,onChange:v=>u(r,v),verifyLayerNameUniqueness:d??void 0}),y.createElement("div",{className:a.textWrapper},"\xA0 ",f(r)),!e.children&&y.createElement("div",{className:a.actionButtonsWrapper},y.createElement(pe.h,{name:"copy",title:"Duplicate",className:a.actionIcon,onClick:()=>c(r),tooltip:"Duplicate"}),y.createElement(pe.h,{name:"trash-alt",title:"remove",className:a.actionIcon,onClick:()=>l(r),tooltip:"Remove"})))},Q_=t=>({actionButtonsWrapper:(0,Y.css)`
    display: flex;
    align-items: flex-end;
  `,actionIcon:(0,Y.css)`
    color: ${t.colors.text.secondary};
    cursor: pointer;
    &:hover {
      color: ${t.colors.text.primary};
    }
  `,textWrapper:(0,Y.css)`
    display: flex;
    align-items: center;
    flex-grow: 1;
    overflow: hidden;
    margin-right: ${t.spacing(1)};
  `,layerName:(0,Y.css)`
    font-weight: ${t.typography.fontWeightMedium};
    color: ${t.colors.primary.text};
    cursor: pointer;
    overflow: hidden;
    margin-left: ${t.spacing(.5)};
  `});function ks(t,e,n){let r=[];if(t)for(let i=t.elements.length;i--;i>=0){const a=t.elements[i],s={key:a.UID,title:a.getName(),selectable:!0,dataRef:a};a instanceof ie&&(s.children=ks(a,e,n)),r.push(s)}return r}function q_(t,e){const n=t.node.key,r=t.dragNode.key,i=t.node.pos.split("-"),a=t.dropPosition-Number(i[i.length-1]),s=(c,u,d)=>{c.forEach((f,v,p)=>{if(f.key===u){d(f,v,p);return}f.children&&s(f.children,u,d)})},o=[...e];let l;if(s(o,r,(c,u,d)=>{d.splice(u,1),l=c}),a===0)s(o,n,c=>{c.children=c.children||[],c.children.unshift(l)});else{let c=[],u=0;s(o,n,(d,f,v)=>{c=v,u=f}),a===-1?c.splice(u,0,l):c.splice(u+1,0,l)}return o}let $f=!0;const J_=({item:t})=>{const[e,n]=(0,y.useState)(ks(t?.settings?.scene.root)),[r,i]=(0,y.useState)(!0),[a,s]=(0,y.useState)([]),[o,l]=(0,y.useState)([]),c=(0,Et.l4)(),u=j_(c),d=(0,Et.wW)(tE),f=c.colors.primary.border,{settings:v}=t,p=(0,y.useMemo)(()=>v?.selected?v.selected.map(T=>T?.getName()):[],[v?.selected]),h=(0,y.useMemo)(()=>v?.selected?v.selected.map(T=>T?.UID):[],[v?.selected]);if((0,y.useEffect)(()=>{n(ks(t?.settings?.scene.root,p,f)),l(h),x()},[t?.settings?.scene.root,f,p,h]),!v)return y.createElement("div",null,"No settings");const g=v.layer;if(!g)return y.createElement("div",null,"Missing layer?");const m=(T,M)=>{$f&&t.settings?.scene&&Hs(t.settings.scene,M.node.dataRef)},_=()=>!0,b=T=>{const M=T.node.pos.split("-"),R=T.dropPosition-Number(M[M.length-1]),P=T.dragNode.dataRef,A=T.node.dataRef,L=q_(T,e);n(L),A.parent?.scene.reorderElements(P,A,T.dropToGap,R)},E=T=>{s(T),i(!1)},S=T=>T.isLeaf?y.createElement(y.Fragment,null):y.createElement(ms.J,{name:"angle-right",title:"Node Icon",style:{transform:`rotate(${T.expanded?90:0}deg)`,fill:c.colors.text.primary}}),x=(T=!0)=>{$f=T},C=()=>{g.scene.clearCurrentSelection()},D=T=>y.createElement(Z_,{nodeData:T,setAllowSelection:x,settings:v}),w=()=>{g.scene?g.scene.frameSelection():console.warn("no scene!")},k=oi(v.scene.shouldShowAdvancedTypes).options;return y.createElement(y.Fragment,null,y.createElement(bf.Global,{styles:u}),y.createElement(X_,{selectable:!0,onSelect:m,draggable:!0,defaultExpandAll:!0,autoExpandParent:r,showIcon:!1,allowDrop:_,onDrop:b,expandedKeys:a,onExpand:E,treeData:e,titleRender:D,switcherIcon:S,selectedKeys:o,multiple:!0}),y.createElement(Te.Lh,{justify:"space-between"},y.createElement("div",{className:d.addLayerButton},y.createElement(df.f,{onChange:T=>fa(T,g),options:k,label:"Add item"})),p.length>0&&y.createElement(kr.zx,{size:"sm",variant:"secondary",onClick:C},"Clear selection"),p.length>1&&la.config.featureToggles.canvasPanelNesting&&y.createElement(kr.zx,{size:"sm",variant:"secondary",onClick:w},"Frame selection")))},tE=t=>({addLayerButton:(0,Y.css)`
    margin-left: 18px;
    min-width: 150px;
  `});function Hf(t){const{selected:e,scene:n}=t;if(n.currentLayer||(n.currentLayer=n.root),e)for(const i of e){if(i instanceof ie){n.currentLayer=i;break}if(i&&i.parent){n.currentLayer=i.parent;break}}const r=n.currentLayer.options||{elements:[]};return{category:["Layer"],path:"--",values:i=>({getValue:a=>(0,le.get)(r,a),onChange:(a,s)=>{if(a==="type"&&s){console.warn("unable to change layer type");return}const o=(0,ea.hs)(r,a,s);n.currentLayer?.onChange(o),n.currentLayer?.updateData(n.context)}}),build:(i,a)=>{const s=n.currentLayer;s&&s.isRoot(),i.addCustomEditor({id:"content",path:"root",name:"Elements",editor:J_,settings:{scene:n,layer:n.currentLayer,selected:e}});const o={...a,options:r};nn.addBackground(i,o),nn.addBorder(i,o),s&&!s.isRoot()&&i.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Constraints",editor:_f,settings:{scene:t.scene,element:s}})}}}var eE=I(22784),rE=I(77804);const nE=({onTabChange:t})=>{const[e,n]=(0,y.useState)(Be.SelectedElement),r=[{label:"Selected Element",value:Be.SelectedElement},{label:"Element Management",value:Be.ElementManagement}],i=a=>{t(a),n(a)};return y.createElement(y.Fragment,null,y.createElement(eE.J,null,r.map((a,s)=>y.createElement(rE.O,{key:`${a.value}-${s}`,label:a.label,active:a.value===e,onChangeTab:()=>i(a.value)}))))};function iE(){const t=(0,ii.Z)(on),e=t?.panel.context?.instanceState,n=(0,Et.wW)(oE),[r,i]=(0,y.useState)(Be.SelectedElement),a=(0,y.useMemo)(()=>{const d=t?.panel,f=e;if(!f||!d)return new Qn({id:"root",title:"root"});const v=(p,h)=>{r===Be.ElementManagement&&p.addNestedOptions(Hf(e));const g=f.selected;if(g?.length===1&&r===Be.SelectedElement){const m=g[0];m&&!(m instanceof ie)&&p.addNestedOptions(Ef({category:[`Selected element (${m.options.name})`],element:m,scene:f.scene}))}Rs(p)};return aE({options:d.props.options,onChange:d.props.onOptionsChange,data:d.props.data?.series},v)},[e,t,r]),s={marginLeft:15,marginTop:10},o=d=>{i(d)},l=oi(e?.scene.shouldShowAdvancedTypes).options,c=e?.layer,u=e&&r===Be.SelectedElement&&e.selected.length===0;return y.createElement(y.Fragment,null,y.createElement("div",{style:s},a.items.map(d=>d.render())),y.createElement("div",{style:s},y.createElement(df.f,{onChange:d=>fa(d,c),options:l,label:"Add item"})),y.createElement("div",{style:s},y.createElement(nE,{onTabChange:o}),a.categories.map(d=>Vf(d)),u&&y.createElement("div",{className:n.selectElement},"Please select an element")))}function Vf(t){return y.createElement(hs,{...t.props,key:t.props.id},y.createElement("div",null,t.items.map(e=>e.render())),t.categories.map(e=>Vf(e)))}function aE(t,e){const n={data:t.data??[],options:t.options},r=new Qn({id:"root",title:"root"});return gs(e,{getValue:s=>(0,le.get)(t.options,s),onChange:(s,o)=>{t.onChange((0,ea.hs)(t.options,s,o))}},s=>{if(s?.length){const o=s[0];let l=r.categories.find(c=>c.props.id===o);return l||(l=new Qn({id:o,title:o}),r.categories.push(l)),l}return r},n),r}const oE=t=>({selectElement:(0,Y.css)`
    color: ${t.colors.text.secondary};
    padding: ${t.spacing(2)};
  `}),Ts=10,Xf=32;function sE({onClose:t,id:e,scene:n}){const r=n.root.div?.getBoundingClientRect(),i=window.innerHeight,a=window.innerWidth,s=(0,y.useRef)(null),o=(0,Et.wW)(lE),l="inlineEditPanel"+e.toString(),c={width:400,height:400},u=r?.width??c.width+Ts*2,d=r?.x??0+u-c.width-Ts,f=r?.y??0+Xf,v=uf.Z.getObject(l,{x:d,y:f,w:c.width,h:c.height}),[p,h]=(0,y.useState)({width:v.w,height:v.h}),[g,m]=(0,y.useState)({x:v.x,y:v.y});(0,y.useEffect)(()=>{const S=a-p.width-Ts,x=i-p.height-Xf;S<g.x&&S>0&&m({...g,x:S}),x<g.y&&x>0&&m({...g,y:x})},[i,a,g,p]);const _=(S,x)=>{let C=x.x<0?0:x.x,D=x.y<0?0:x.y;m({x:C,y:D}),E(C,D,p.width,p.height)},b=(S,x)=>{const{size:C}=x;h({width:C.width,height:C.height}),E(g.x,g.y,C.width,C.height)},E=(S,x,C,D)=>{uf.Z.setObject(l,{x:S,y:x,w:C,h:D})};return y.createElement(Un.h_,null,y.createElement("div",{className:o.draggableWrapper},y.createElement(zy(),{handle:"strong",onStop:_,position:{x:g.x,y:g.y}},y.createElement(Gy.Resizable,{height:p.height,width:p.width,onResize:b},y.createElement("div",{className:o.inlineEditorContainer,style:{height:`${p.height}px`,width:`${p.width}px`},ref:s},y.createElement("strong",{className:o.inlineEditorHeader},y.createElement("div",{className:o.placeholder}),y.createElement("div",null,"Canvas Inline Editor"),y.createElement(pe.h,{name:"times",size:"xl",className:o.inlineEditorClose,onClick:t,tooltip:"Close inline editor"})),y.createElement("div",{className:o.inlineEditorContentWrapper},y.createElement("div",{className:o.inlineEditorContent},y.createElement(iE,null))))))))}const lE=t=>({inlineEditorContainer:(0,Y.css)`
    display: flex;
    flex-direction: column;
    background: ${t.components.panel.background};
    border: 1px solid ${t.colors.border.weak};
    box-shadow: ${t.shadows.z3};
    z-index: 1000;
    opacity: 1;
    min-width: 400px;
  `,draggableWrapper:(0,Y.css)`
    width: 0;
    height: 0;
  `,inlineEditorHeader:(0,Y.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    background: ${t.colors.background.canvas};
    border-bottom: 1px solid ${t.colors.border.weak};
    height: 40px;
    cursor: move;
  `,inlineEditorContent:(0,Y.css)`
    white-space: pre-wrap;
    padding: 10px;
  `,inlineEditorClose:(0,Y.css)`
    margin-left: auto;
  `,placeholder:(0,Y.css)`
    width: 24px;
    height: 24px;
    visibility: hidden;
    margin-right: auto;
  `,inlineEditorContentWrapper:(0,Y.css)`
    overflow: scroll;
  `});let ti=[],Sr,ia=!1,aa=!1;const on=new el.t(1);class jf extends y.Component{constructor(e){super(e),this.subs=new jv.w0,this.needsReload=!1,this.isEditing=ui.E1.getSearchObject().editPanel!==void 0,this.onUpdateScene=n=>{const{onOptionsChange:r,options:i}=this.props;r({...i,root:n}),this.setState({refresh:this.state.refresh+1}),on.next({panel:this})},this.openInlineEdit=()=>{if(ia){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openInlineEdit:!0}),ia=!0},this.openSetBackground=n=>{if(aa){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openSetBackground:!0}),this.setState({contextMenuAnchorPoint:n}),aa=!0},this.tooltipCallback=n=>{this.scene.tooltip=n,this.forceUpdate()},this.moveableActionCallback=n=>{this.setState({moveableAction:n}),this.forceUpdate()},this.closeInlineEdit=()=>{this.setState({openInlineEdit:!1}),ia=!1},this.closeSetBackground=()=>{this.setState({openSetBackground:!1}),aa=!1},this.setActivePanel=()=>{Sr=this,on.next({panel:this})},this.renderInlineEdit=()=>y.createElement(sE,{onClose:()=>this.closeInlineEdit(),id:this.props.id,scene:this.scene}),this.renderSetBackground=()=>y.createElement(Iy,{onClose:()=>this.closeSetBackground(),scene:this.scene,anchorPoint:this.state.contextMenuAnchorPoint}),this.state={refresh:0,openInlineEdit:!1,openSetBackground:!1,contextMenuAnchorPoint:{x:0,y:0},moveableAction:!1},this.scene=new Ay(this.props.options.root,this.props.options.inlineEditing,this.props.options.showAdvancedTypes,this.onUpdateScene,this),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),this.scene.inlineEditingCallback=this.openInlineEdit,this.scene.setBackgroundCallback=this.openSetBackground,this.scene.tooltipCallback=this.tooltipCallback,this.scene.moveableActionCallback=this.moveableActionCallback,this.subs.add(this.props.eventBus.subscribe(cf.xF,n=>{this.scene.clearCurrentSelection(),this.closeInlineEdit()})),this.subs.add(this.props.eventBus.subscribe(cf.Yr,n=>{this.props.id===n.payload&&(this.needsReload=!0,this.scene.clearCurrentSelection())}))}componentDidMount(){Sr=this,on.next({panel:this}),this.panelContext=this.context,this.panelContext.onInstanceStateChange&&(this.panelContext.onInstanceStateChange({scene:this.scene,layer:this.scene.root}),this.subs.add(this.scene.selection.subscribe({next:e=>{e.length&&(Sr=this,on.next({panel:this})),ti.forEach(n=>{n!==Sr&&(n.scene.clearCurrentSelection(!0),n.scene.connections.select(void 0))}),this.panelContext?.onInstanceStateChange({scene:this.scene,selected:e,layer:this.scene.root})}})),this.subs.add(this.scene.connections.selection.subscribe({next:e=>{this.context.instanceState&&(this.panelContext?.onInstanceStateChange({scene:this.scene,selected:this.context.instanceState.selected,selectedConnection:e,layer:this.scene.root}),e&&(Sr=this,on.next({panel:this})),ti.forEach(n=>{n!==Sr&&(n.scene.clearCurrentSelection(!0),n.scene.connections.select(void 0))}),setTimeout(()=>{this.forceUpdate()}))}}))),ti.push(this)}componentWillUnmount(){this.scene.subscription.unsubscribe(),this.subs.unsubscribe(),ia=!1,aa=!1,ti=ti.filter(e=>e.props.id!==Sr?.props.id)}shouldComponentUpdate(e,n){const{width:r,height:i,data:a,options:s}=this.props;let o=!1;(r!==e.width||i!==e.height)&&(this.scene.updateSize(e.width,e.height),o=!0),a!==e.data&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),o=!0),s!==e.options&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),o=!0),this.state.refresh!==n.refresh&&(o=!0),this.state.openInlineEdit!==n.openInlineEdit&&(o=!0),this.state.openSetBackground!==n.openSetBackground&&(o=!0),this.state.moveableAction!==n.moveableAction&&(o=!0);const l=this.props.options.inlineEditing!==e.options.inlineEditing,c=this.props.options.showAdvancedTypes!==e.options.showAdvancedTypes;return(this.needsReload||l||c)&&(l&&this.scene.revId++,this.needsReload=!1,this.scene.load(e.options.root,e.options.inlineEditing,e.options.showAdvancedTypes),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),o=!0),o}render(){return y.createElement(y.Fragment,null,this.scene.render(),this.state.openInlineEdit&&this.renderInlineEdit(),this.state.openSetBackground&&this.renderSetBackground())}}jf.contextType=fn.bb;function cE(t){return{category:t.category,path:"--",values:e=>({getValue:n=>(0,le.get)(t.connection.info,n),onChange:(n,r)=>{console.log(r,typeof r);let i=t.connection.info;i=(0,ea.hs)(i,n,r),t.scene.connections.onChange(t.connection,i)}}),build:(e,n)=>{const r={...n,options:t.connection.info};nn.addColor(e,r),nn.addSize(e,r)}}}const uE=t=>{if((t?.pluginVersion??"")===""){const n=t.options?.root;if(n?.elements)for(const r of n.elements)r.type==="text-box"&&(r.type="rectangle")}return t.options},Rs=t=>{t.addBooleanSwitch({path:"inlineEditing",name:"Inline editing",description:"Enable editing the panel directly",defaultValue:!0}),t.addBooleanSwitch({path:"showAdvancedTypes",name:"Experimental element types",description:"Enable selection of experimental element types",defaultValue:!0})},dE=new Je.c(jf).setNoPadding().useFieldConfig({standardOptions:{[Mr.qb.Mappings]:{settings:{icon:!0}}}}).setMigrationHandler(uE).setPanelOptions((t,e)=>{const n=e.instanceState;if(Rs(t),n){t.addNestedOptions(Hf(n));const r=n.selected,i=n.selectedConnection;if(r?.length===1){const a=r[0];a instanceof ie||t.addNestedOptions(Ef({category:[`Selected element (${a.options.name})`],element:a,scene:n.scene}))}i&&t.addNestedOptions(cE({category:["Selected connection"],connection:i,scene:n.scene}))}})},67534:(sa,Ie,I)=>{I.d(Ie,{Z:()=>y});var Je=I(39953),Mr=I(94545);function le(nt,at){var Wt=(0,Je.useState)(at),Lt=Wt[0],Vt=Wt[1];return(0,Mr.Z)(function(){var Xt=nt.subscribe(Vt);return function(){return Xt.unsubscribe()}},[nt]),Lt}const y=le}}]);

//# sourceMappingURL=canvasPanel.js.map