(this.webpackChunkGrafanaToWebComponent=this.webpackChunkGrafanaToWebComponent||[]).push([[4755],{34397:(re,i,e)=>{"use strict";e.d(i,{K:()=>o});var n=e(41407),O=e(39953),S=e(82803);const o=({children:R})=>{const L=(0,S.wW)(N);return O.createElement("div",{className:L.root},R)},N=R=>({root:(0,n.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:R.spacing(3),minHeight:R.spacing(4)})})},13579:(re,i,e)=>{"use strict";e.d(i,{B:()=>O});var n=e(39953);const O=({grow:S,shrink:o})=>n.createElement("div",{style:{display:"block",flexGrow:S,flexShrink:o}})},56504:(re,i,e)=>{"use strict";e.d(i,{X:()=>F});var n=e(41407),O=e(39953),S=e(82803),o=e(9558),N=e(28987),R=Object.defineProperty,L=Object.defineProperties,A=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,M=(V,H,z)=>H in V?R(V,H,{enumerable:!0,configurable:!0,writable:!0,value:z}):V[H]=z,b=(V,H)=>{for(var z in H||(H={}))y.call(H,z)&&M(V,z,H[z]);if(I)for(var z of I(H))C.call(H,z)&&M(V,z,H[z]);return V},D=(V,H)=>L(V,A(H)),x=(V,H)=>{var z={};for(var $ in V)y.call(V,$)&&H.indexOf($)<0&&(z[$]=V[$]);if(V!=null&&I)for(var $ of I(V))H.indexOf($)<0&&C.call(V,$)&&(z[$]=V[$]);return z};function F(V){var H=V,{label:z}=H,$=x(H,["label"]);const _=(0,S.wW)(W),[Y]=(0,O.useState)(()=>Math.random().toString(16).slice(2)),w={SelectContainer:J,ValueContainer:U,SingleValue:U};return O.createElement("div",{className:_.root},z&&O.createElement("label",{className:_.label,htmlFor:Y},z,":","\xA0"),O.createElement(o.Ph,D(b({openMenuOnFocus:!0,inputId:Y},$),{components:w})))}const J=V=>{const{children:H}=V,z=(0,S.wW)(W);return O.createElement(N.e,D(b({},V),{className:(0,n.cx)(V.className,z.container)}),H)},U=V=>{const{className:H,children:z}=V,$=(0,S.wW)(W);return O.createElement("div",{className:(0,n.cx)(H,$.valueContainer)},z)},W=V=>({root:(0,n.css)({display:"flex",fontSize:12,alignItems:"center"}),label:(0,n.css)({color:V.colors.text.secondary,whiteSpace:"nowrap"}),container:(0,n.css)({background:"none",borderColor:"transparent"}),valueContainer:(0,n.css)({display:"flex",alignItems:"center",flex:"initial",color:V.colors.text.secondary,fontSize:12})})},68250:(re,i,e)=>{"use strict";e.r(i),e.d(i,{AND:()=>b,AS:()=>C,ASC:()=>A,BY:()=>R,COMPARISON_OPERATORS:()=>U,DESC:()=>L,EQUALS:()=>F,FROM:()=>O,GROUP:()=>o,LIMIT:()=>I,LOGICAL_OPERATORS:()=>x,NOT_EQUALS:()=>J,OR:()=>D,ORDER:()=>N,SCHEMA:()=>M,SELECT:()=>n,STD_OPERATORS:()=>W,WHERE:()=>S,WITH:()=>y,conf:()=>V,language:()=>H});const n="select",O="from",S="where",o="group",N="order",R="by",L="desc",A="asc",I="limit",y="with",C="as",M="schema",b="AND",D="OR",x=[b,D],F="=",J="!=",U=[F,J],W=[...U],V={comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},H={defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["ABORT","ABSOLUTE","ACTION","ADA","ADD","AFTER","ALL","ALLOCATE","ALTER","ALWAYS","ANALYZE","AND","ANY","ARE","AS","ASC","ASSERTION","AT","ATTACH","AUTHORIZATION","AUTOINCREMENT","AVG","BACKUP","BEFORE","BEGIN","BETWEEN","BIT","BIT_LENGTH","BOTH","BREAK","BROWSE","BULK","BY","CASCADE","CASCADED","CASE","CAST","CATALOG","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLLATION","COLUMN","COMMIT","COMPUTE","CONFLICT","CONNECT","CONNECTION","CONSTRAINT","CONSTRAINTS","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CORRESPONDING","COUNT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATE","DAY","DBCC","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DETACH","DIAGNOSTICS","DISCONNECT","DISK","DISTINCT","DISTRIBUTED","DO","DOMAIN","DOUBLE","DROP","DUMP","EACH","ELSE","END","END-EXEC","ERRLVL","ESCAPE","EXCEPT","EXCEPTION","EXCLUDE","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTERNAL","EXTRACT","FAIL","FALSE","FETCH","FILE","FILLFACTOR","FILTER","FIRST","FLOAT","FOLLOWING","FOR","FOREIGN","FORTRAN","FOUND","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GENERATED","GET","GLOB","GLOBAL","GO","GOTO","GRANT","GROUP","GROUPS","HAVING","HOLDLOCK","HOUR","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IGNORE","IMMEDIATE","IN","INCLUDE","INDEX","INDEXED","INDICATOR","INITIALLY","INNER","INPUT","INSENSITIVE","INSERT","INSTEAD","INT","INTEGER","INTERSECT","INTERVAL","INTO","IS","ISNULL","ISOLATION","JOIN","KEY","KILL","LANGUAGE","LAST","LEADING","LEFT","LEVEL","LIKE","LIMIT","LINENO","LOAD","LOCAL","LOWER","MATCH","MATERIALIZED","MAX","MERGE","MIN","MINUTE","MODULE","MONTH","NAMES","NATIONAL","NATURAL","NCHAR","NEXT","NO","NOCHECK","NONCLUSTERED","NONE","NOT","NOTHING","NOTNULL","NULL","NULLIF","NULLS","NUMERIC","OCTET_LENGTH","OF","OFF","OFFSET","OFFSETS","ON","ONLY","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OTHERS","OUTER","OUTPUT","OVER","OVERLAPS","PAD","PARTIAL","PARTITION","PASCAL","PERCENT","PIVOT","PLAN","POSITION","PRAGMA","PRECEDING","PRECISION","PREPARE","PRESERVE","PRIMARY","PRINT","PRIOR","PRIVILEGES","PROC","PROCEDURE","PUBLIC","QUERY","RAISE","RAISERROR","RANGE","READ","READTEXT","REAL","RECONFIGURE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELATIVE","RELEASE","RENAME","REPLACE","REPLICATION","RESTORE","RESTRICT","RETURN","RETURNING","REVERT","REVOKE","RIGHT","ROLLBACK","ROW","ROWCOUNT","ROWGUIDCOL","ROWS","RULE","SAVE","SAVEPOINT","SCHEMA","SCROLL","SECOND","SECTION","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION","SESSION_USER","SET","SETUSER","SHUTDOWN","SIZE","SMALLINT","SOME","SPACE","SQL","SQLCA","SQLCODE","SQLERROR","SQLSTATE","SQLWARNING","STATISTICS","SUBSTRING","SUM","SYSTEM_USER","TABLE","TABLESAMPLE","TEMP","TEMPORARY","TEXTSIZE","THEN","TIES","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TOP","TRAILING","TRAN","TRANSACTION","TRANSLATE","TRANSLATION","TRIGGER","TRIM","TRUE","TRUNCATE","TRY_CONVERT","TSEQUAL","UNBOUNDED","UNION","UNIQUE","UNKNOWN","UNPIVOT","UPDATE","UPDATETEXT","UPPER","USAGE","USE","USER","USING","VACUUM","VALUE","VALUES","VARCHAR","VARYING","VIEW","VIRTUAL","WAITFOR","WHEN","WHENEVER","WHERE","WHILE","WINDOW","WITH","WITHIN GROUP","WITHOUT","WORK","WRITE","WRITETEXT","YEAR","ZONE"],operators:["EXCEPT","INTERSECT","UNION","APPLY","CROSS","FULL","INNER","JOIN","LEFT","OUTER","RIGHT","CONTAINS","FREETEXT","IS","NULL","PIVOT","UNPIVOT","MATCHED"],logicalOperators:["ALL","AND","ANY","BETWEEN","EXISTS","IN","LIKE","NOT","OR","SOME"],comparisonOperators:["<>",">","<",">=","<=","=","!=","&","~","^","%"],builtinFunctions:["AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","SUM","STDEV","STDEVP","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","COLLATE","COLLATIONPROPERTY","TERTIARY_WEIGHTS","FEDERATION_FILTERING_VALUE","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","CURRENT_TIMESTAMP","DATEADD","DATEDIFF","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","CHOOSE","COALESCE","IIF","NULLIF","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASE_PRINCIPAL_ID","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHAR","CHARINDEX","CONCAT","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","NCHAR","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STUFF","SUBSTRING","UNICODE","UPPER","BINARY_CHECKSUM","CHECKSUM","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","ERROR_LINE","ERROR_NUMBER","ERROR_MESSAGE","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GETANSINULL","GET_FILESTREAM_TRANSACTION_CONTEXT","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","XACT_STATE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","CHANGETABLE","CHANGE_TRACKING_CONTEXT","CHANGE_TRACKING_CURRENT_VERSION","CHANGE_TRACKING_IS_COLUMN_IN_MASK","CHANGE_TRACKING_MIN_VALID_VERSION","CONTAINSTABLE","FREETEXTTABLE","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","FILETABLEROOTPATH","GETFILENAMESPACEPATH","GETPATHLOCATOR","PATHNAME","GET_TRANSMISSION_STATUS"],builtinVariables:["@@DATEFIRST","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","@@CURSOR_ROWS","@@FETCH_STATUS","@@DATEFIRST","@@PROCID","@@ERROR","@@IDENTITY","@@ROWCOUNT","@@TRANCOUNT","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACKET_ERRORS","@@PACK_RECEIVED","@@PACK_SENT","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE"],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@templateVariables"},{include:"@macros"},{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},{include:"@schemaTable"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$|<|>|=|!|%|&|+|\|-|*|/|~|^]+/,{cases:{"@operators":"operator","@comparisonOperators":"operator","@logicalOperators":"operator","@builtinVariables":"predefined","@builtinFunctions":"predefined","@keywords":"keyword","@default":"identifier"}}]],templateVariables:[[/\$[a-zA-Z0-9]+/,"variable"]],macros:[[/\$__[a-zA-Z0-9-_]+/,"type"]],schemaTable:[[/(\w+)\./,"identifier"],[/(\w+\.\w+)/,"identifier"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]]}}},69415:(re,i,e)=>{"use strict";e.d(i,{h:()=>N});var n=e(78597);const O="column",S="'5m'",o=[{id:"$__timeFilter(dateColumn)",name:"$__timeFilter(dateColumn)",text:"$__timeFilter",args:[O],type:n.mB.Filter,description:"Will be replaced by a time range filter using the specified column name. For example, dateColumn BETWEEN FROM_UNIXTIME(1494410783) AND FROM_UNIXTIME(1494410983)"},{id:"$__timeFrom()",name:"$__timeFrom()",text:"$__timeFrom",args:[],type:n.mB.Filter,description:"Will be replaced by the start of the currently active time selection. For example, FROM_UNIXTIME(1494410783)"},{id:"$__timeTo()",name:"$__timeTo()",text:"$__timeTo",args:[],type:n.mB.Filter,description:"Will be replaced by the end of the currently active time selection. For example, FROM_UNIXTIME(1494410983)"},{id:"$__timeGroup(dateColumn, '5m')",name:"$__timeGroup(dateColumn, '5m')",text:"$__timeGroup",args:[O,S],type:n.mB.Value,description:"Will be replaced by an expression usable in GROUP BY clause. For example, *cast(cast(UNIX_TIMESTAMP(dateColumn)/(300) as signed)*300 as signed),*"},{id:"$__table",name:"$__table",text:"$__table",args:[],type:n.mB.Table,description:"Will be replaced by the query table."},{id:"$__column",name:"$__column",text:"$__column",args:[],type:n.mB.Column,description:"Will be replaced by the query column."}];function N(R,L){var A,I,y;const C={triggerCharacters:["."," ","$",",","(","'"]};L&&Array.isArray(L.builtinFunctions)&&(C.supportedFunctions=()=>L.builtinFunctions.map(b=>({id:b,name:b})));const M=[];return(A=L?.comparisonOperators)!=null&&A.length&&M.push(...L.comparisonOperators.map(b=>({id:b.toLocaleLowerCase(),operator:b,type:n.$M.Comparison}))),L.logicalOperators=(I=L.logicalOperators)!=null?I:L.operators,(y=L?.logicalOperators)!=null&&y.length&&M.push(...L.logicalOperators.map(b=>({id:b.toLocaleLowerCase(),operator:b,type:n.$M.Logical}))),C.supportedOperators=()=>M,C.supportedMacros=()=>o,C}},78597:(re,i,e)=>{"use strict";e.d(i,{$M:()=>n,G8:()=>R,a7:()=>A,cm:()=>L,fC:()=>o,is:()=>N,iv:()=>S,je:()=>I,mB:()=>O});var n=(y=>(y[y.Comparison=0]="Comparison",y[y.Logical=1]="Logical",y))(n||{}),O=(y=>(y[y.Value=0]="Value",y[y.Filter=1]="Filter",y[y.Group=2]="Group",y[y.Column=3]="Column",y[y.Table=4]="Table",y))(O||{}),S=(y=>(y.Parenthesis="delimiter.parenthesis.sql",y.Whitespace="white.sql",y.Keyword="keyword.sql",y.Delimiter="delimiter.sql",y.Operator="operator.sql",y.Identifier="identifier.sql",y.IdentifierQuote="identifier.quote.sql",y.Type="type.sql",y.Function="predefined.sql",y.Number="number.sql",y.String="string.sql",y.Variable="variable.sql",y))(S||{}),o=(y=>(y.Unknown="unknown",y.SelectKeyword="selectKeyword",y.WithKeyword="withKeyword",y.AfterSelectKeyword="afterSelectKeyword",y.AfterSelectArguments="afterSelectArguments",y.AfterSelectFuncFirstArgument="afterSelectFuncFirstArgument",y.SelectAlias="selectAlias",y.AfterFromKeyword="afterFromKeyword",y.AfterTable="afterTable",y.SchemaFuncFirstArgument="schemaFuncFirstArgument",y.SchemaFuncExtraArgument="schemaFuncExtraArgument",y.FromKeyword="fromKeyword",y.AfterFrom="afterFrom",y.WhereKeyword="whereKeyword",y.WhereComparisonOperator="whereComparisonOperator",y.WhereValue="whereValue",y.AfterWhereFunctionArgument="afterWhereFunctionArgument",y.AfterGroupByFunctionArgument="afterGroupByFunctionArgument",y.AfterWhereValue="afterWhereValue",y.AfterGroupByKeywords="afterGroupByKeywords",y.AfterGroupBy="afterGroupBy",y.AfterOrderByKeywords="afterOrderByKeywords",y.AfterOrderByFunction="afterOrderByFunction",y.AfterOrderByDirection="afterOrderByDirection",y.AfterIsOperator="afterIsOperator",y.AfterIsNotOperator="afterIsNotOperator",y.AfterSchema="afterSchema",y))(o||{}),N=(y=>(y.Schemas="schemas",y.Tables="tables",y.Columns="columns",y.SelectKeyword="selectKeyword",y.WithKeyword="withKeyword",y.FunctionsWithArguments="functionsWithArguments",y.FromKeyword="fromKeyword",y.WhereKeyword="whereKeyword",y.GroupByKeywords="groupByKeywords",y.OrderByKeywords="orderByKeywords",y.FunctionsWithoutArguments="functionsWithoutArguments",y.LimitKeyword="limitKeyword",y.SortOrderDirectionKeyword="sortOrderDirectionKeyword",y.ComparisonOperators="comparisonOperators",y.LogicalOperators="logicalOperators",y.SelectMacro="selectMacro",y.TableMacro="tableMacro",y.FilterMacro="filterMacro",y.GroupMacro="groupMacro",y.BoolValues="boolValues",y.NullValue="nullValue",y.NotKeyword="notKeyword",y.TemplateVariables="templateVariables",y.StarWildCard="starWildCard",y))(N||{}),R=(y=>(y.High="a",y.MediumHigh="d",y.Medium="g",y.MediumLow="k",y.Low="q",y))(R||{}),L=(y=>(y[y.Method=0]="Method",y[y.Function=1]="Function",y[y.Constructor=2]="Constructor",y[y.Field=3]="Field",y[y.Variable=4]="Variable",y[y.Class=5]="Class",y[y.Struct=6]="Struct",y[y.Interface=7]="Interface",y[y.Module=8]="Module",y[y.Property=9]="Property",y[y.Event=10]="Event",y[y.Operator=11]="Operator",y[y.Unit=12]="Unit",y[y.Value=13]="Value",y[y.Constant=14]="Constant",y[y.Enum=15]="Enum",y[y.EnumMember=16]="EnumMember",y[y.Keyword=17]="Keyword",y[y.Text=18]="Text",y[y.Color=19]="Color",y[y.File=20]="File",y[y.Reference=21]="Reference",y[y.Customcolor=22]="Customcolor",y[y.Folder=23]="Folder",y[y.TypeParameter=24]="TypeParameter",y[y.User=25]="User",y[y.Issue=26]="Issue",y[y.Snippet=27]="Snippet",y))(L||{}),A=(y=>(y[y.KeepWhitespace=1]="KeepWhitespace",y[y.InsertAsSnippet=4]="InsertAsSnippet",y))(A||{}),I=(y=>(y.Builder="builder",y.Code="code",y))(I||{})},42933:(re,i,e)=>{"use strict";e.d(i,{M:()=>Fr});var n=e(39953),O=e(20653),S=e(30623),o=e(78597),N=e(57642),R=e(86654),L=e(96977),A=e.n(L),I=e(87786),y=function(ne){ne===void 0&&(ne={});var te=(0,n.useState)(ne),ie=te[0],de=te[1],me=(0,n.useCallback)(function(Oe){de(function(Le){return Object.assign({},Le,Oe instanceof Function?Oe(Le):Oe)})},[]);return[ie,me]};const C=y;var M=function(){var ne=(0,I.Z)(),te=C({value:void 0,error:void 0,noUserInteraction:!0}),ie=te[0],de=te[1],me=(0,n.useCallback)(function(Oe){if(ne()){var Le,Fe;try{if(typeof Oe!="string"&&typeof Oe!="number"){var Ke=new Error("Cannot copy typeof "+typeof Oe+" to clipboard, must be a string");de({value:Oe,error:Ke,noUserInteraction:!0});return}else if(Oe===""){var Ke=new Error("Cannot copy empty string to clipboard.");de({value:Oe,error:Ke,noUserInteraction:!0});return}Fe=Oe.toString(),Le=A()(Fe),de({value:Fe,error:void 0,noUserInteraction:Le})}catch(xe){de({value:Fe,error:xe,noUserInteraction:Le})}}},[]);return[ie,me]};const b=M;var D=e(34032),x=e(34397),F=e(56504),J=e(13579),U=e(87355),W=e(46101),V=e(72639),H=e(26286),z=e(4919),$=e(69865),_=e(20454),Y=e(246),w=e(73075),T=e(39285);function v({isOpen:ne,onCancel:te,onDiscard:ie,onCopy:de}){const me=(0,n.useRef)(null);return(0,n.useEffect)(()=>{ne&&me.current?.focus()},[ne]),n.createElement(w.u,{title:n.createElement("div",{className:"modal-header-title"},n.createElement(T.J,{name:"exclamation-triangle",size:"lg"}),n.createElement("span",{className:"p-l-1"},"Warning")),onDismiss:te,isOpen:ne},n.createElement("p",null,"Builder mode does not display changes made in code. The query builder will display the last changes you made in builder mode."),n.createElement("p",null,"Do you want to copy your code to the clipboard?"),n.createElement(w.u.ButtonRow,null,n.createElement(z.zx,{type:"button",variant:"secondary",onClick:te,fill:"outline"},"Cancel"),n.createElement(z.zx,{variant:"destructive",type:"button",onClick:ie,ref:me},"Discard code and switch"),n.createElement(z.zx,{variant:"primary",onClick:de},"Copy code and switch")))}var l=e(9558),p=e(7391);const s=({dataset:ne,db:te,isPostgresInstance:ie,onChange:de,preconfiguredDataset:me})=>{const Oe=!!me||ie,Le=(0,O.Z)(async()=>(0,p.F)()&&Oe?(de((0,Y.Er)(me)),[(0,Y.Er)(me)]):(ne&&de((0,Y.Er)(ne)),(await te.datasets()).map(Y.Er)),[]);return(0,n.useEffect)(()=>{(0,p.F)()||(ne?Le.value&&Le.value.find(Fe=>Fe.value===ne)===void 0&&Le.value.length>0&&de(Le.value[0]):Le.value&&Le.value[0]&&de(Le.value[0]))},[Le.value,de,ne]),n.createElement(l.Ph,{"aria-label":"Dataset selector",value:ne,options:Le.value,onChange:de,disabled:Le.loading,isLoading:Le.loading,menuShouldPortal:!0})};var u=e(99456);const g=({db:ne,dataset:te,table:ie,className:de,onChange:me})=>{const Oe=(0,O.Z)(async()=>te?(await ne.tables(te)).map(u.E):[],[te]);return n.createElement(l.Ph,{className:de,disabled:Oe.loading,"aria-label":"Table selector",value:ie,options:Oe.value,onChange:me,isLoading:Oe.loading,menuShouldPortal:!0,placeholder:Oe.loading?"Loading tables":"Select table"})},m=[{label:"Builder",value:o.je.Builder},{label:"Code",value:o.je.Code}];function E({db:ne,isPostgresInstance:te,isQueryRunnable:ie,onChange:de,onQueryRowChange:me,onRunQuery:Oe,preconfiguredDataset:Le,query:Fe,queryRowFilter:Ke}){const{editorMode:xe}=Fe,[qe,ct]=b(),[Tt,rt]=(0,n.useState)(!1),ft=ne.toRawSql,at=(0,n.useCallback)(ht=>{if(ht===o.je.Code&&(0,V.ff)("grafana_sql_editor_mode_changed",{datasource:Fe.datasource?.type,selectedEditorMode:o.je.Code}),xe===o.je.Code){rt(!0);return}de({...Fe,editorMode:ht})},[xe,de,Fe]),Dt=ht=>{const Nt={...Fe,format:ht.value!==void 0?ht.value:Y.ws.Table};(0,V.ff)("grafana_sql_format_changed",{datasource:Fe.datasource?.type,selectedFormat:Nt.format}),de(Nt)},zt=ht=>{if(ht.value===Fe.dataset)return;const Nt={...Fe,dataset:ht.value,table:void 0,sql:void 0,rawSql:""};de(Nt)},At=ht=>{if(ht.value===Fe.table)return;const Nt={...Fe,table:ht.value,sql:void 0,rawSql:""};de(Nt)},Gt=()=>!(!(0,p.F)()&&te);return n.createElement(n.Fragment,null,n.createElement(x.K,null,n.createElement(F.X,{label:"Format",value:Fe.format,placeholder:"Select format",menuShouldPortal:!0,onChange:Dt,options:Y.x7}),xe===o.je.Builder&&n.createElement(n.Fragment,null,n.createElement(H.x,{id:`sql-filter-${(0,D.Z)()}}`,label:"Filter",transparent:!0,showLabel:!0,value:Ke.filter,onChange:ht=>{ht.target instanceof HTMLInputElement&&((0,V.ff)("grafana_sql_filter_toggled",{datasource:Fe.datasource?.type,displayed:ht.target.checked}),me({...Ke,filter:ht.target.checked}))}}),n.createElement(H.x,{id:`sql-group-${(0,D.Z)()}}`,label:"Group",transparent:!0,showLabel:!0,value:Ke.group,onChange:ht=>{ht.target instanceof HTMLInputElement&&((0,V.ff)("grafana_sql_group_toggled",{datasource:Fe.datasource?.type,displayed:ht.target.checked}),me({...Ke,group:ht.target.checked}))}}),n.createElement(H.x,{id:`sql-order-${(0,D.Z)()}}`,label:"Order",transparent:!0,showLabel:!0,value:Ke.order,onChange:ht=>{ht.target instanceof HTMLInputElement&&((0,V.ff)("grafana_sql_order_toggled",{datasource:Fe.datasource?.type,displayed:ht.target.checked}),me({...Ke,order:ht.target.checked}))}}),n.createElement(H.x,{id:`sql-preview-${(0,D.Z)()}}`,label:"Preview",transparent:!0,showLabel:!0,value:Ke.preview,onChange:ht=>{ht.target instanceof HTMLInputElement&&((0,V.ff)("grafana_sql_preview_toggled",{datasource:Fe.datasource?.type,displayed:ht.target.checked}),me({...Ke,preview:ht.target.checked}))}})),n.createElement(J.B,{grow:1}),ie?n.createElement(z.zx,{icon:"play",variant:"primary",size:"sm",onClick:()=>Oe()},"Run query"):n.createElement($.u,{theme:"error",content:n.createElement(n.Fragment,null,"Your query is invalid. Check below for details. ",n.createElement("br",null),"However, you can still run this query."),placement:"top"},n.createElement(z.zx,{icon:"exclamation-triangle",variant:"secondary",size:"sm",onClick:()=>Oe()},"Run query")),n.createElement(_.S,{options:m,size:"sm",value:xe,onChange:at}),n.createElement(v,{isOpen:Tt,onCopy:()=>{(0,V.ff)("grafana_sql_editor_mode_changed",{datasource:Fe.datasource?.type,selectedEditorMode:o.je.Builder,type:"copy"}),rt(!1),ct(Fe.rawSql),de({...Fe,rawSql:ft(Fe),editorMode:o.je.Builder})},onDiscard:()=>{(0,V.ff)("grafana_sql_editor_mode_changed",{datasource:Fe.datasource?.type,selectedEditorMode:o.je.Builder,type:"discard"}),rt(!1),de({...Fe,rawSql:ft(Fe),editorMode:o.je.Builder})},onCancel:()=>{(0,V.ff)("grafana_sql_editor_mode_changed",{datasource:Fe.datasource?.type,selectedEditorMode:o.je.Builder,type:"cancel"}),rt(!1)}})),xe===o.je.Builder&&n.createElement(n.Fragment,null,n.createElement(S.T,{v:.5}),n.createElement(U.p,null,Gt()&&n.createElement(W.S,{label:"Dataset",width:25},n.createElement(s,{db:ne,dataset:Fe.dataset,isPostgresInstance:te,preconfiguredDataset:Le,onChange:zt})),n.createElement(W.S,{label:"Table",width:25},n.createElement(g,{db:ne,dataset:Fe.dataset||Le,table:Fe.table,onChange:At})))))}var f=e(41407),a=e(13479),r=e(19977),d=e(82803),c=e(84541);function P(ne,te){var ie;const de=ne?.getPreviousNonWhiteSpaceToken(),me=ne?.getPreviousKeyword(),Oe=(ie=ne?.getPreviousNonWhiteSpaceToken())==null?void 0:ie.is(o.iv.Operator,"/"),Le=te.list(),Fe=[];for(const Ke of Le)Ke.resolve(ne,me??null,de??null,!!Oe)&&Fe.push(Ke.id);return Fe.length===0?[o.fC.Unknown]:Fe}var G=Object.defineProperty,q=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,K=(ne,te,ie)=>te in ne?G(ne,te,{enumerable:!0,configurable:!0,writable:!0,value:ie}):ne[te]=ie,k=(ne,te)=>{for(var ie in te||(te={}))Z.call(te,ie)&&K(ne,ie,te[ie]);if(q)for(var ie of q(te))j.call(te,ie)&&K(ne,ie,te[ie]);return ne};const Q=(ne,te,ie={})=>k({label:ne,insertText:ne,kind:o.cm.Field,sortText:o.G8.Medium,range:te},ie);var ae=Object.defineProperty,oe=Object.defineProperties,le=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,ye=(ne,te,ie)=>te in ne?ae(ne,te,{enumerable:!0,configurable:!0,writable:!0,value:ie}):ne[te]=ie,Re=(ne,te)=>{for(var ie in te||(te={}))he.call(te,ie)&&ye(ne,ie,te[ie]);if(ue)for(var ie of ue(te))pe.call(te,ie)&&ye(ne,ie,te[ie]);return ne},Ce=(ne,te)=>oe(ne,le(te));const Ae=async(ne,te,ie,de,me)=>{let Oe=[];const Fe=te?.isWhiteSpace()||te?.isParenthesis()||te?.isIdentifier()&&te.value.endsWith(".")||!te?.range?ne.Range.fromPositions(de.position):te?.range;for(const Ke of[...new Set(ie)]){const xe=me.getIfExists(Ke);if(xe){const qe=await xe.suggestions(Ce(Re({},de),{range:Fe}),ne);Oe=[...Oe,...qe.map(ct=>Q(ct.label,Fe,Re({kind:ct.kind},ct)))]}}return Promise.resolve(Oe)},Te=()=>[{id:o.fC.SelectKeyword,name:o.fC.SelectKeyword,kind:[o.is.SelectKeyword]},{id:o.fC.WithKeyword,name:o.fC.WithKeyword,kind:[o.is.WithKeyword]},{id:o.fC.AfterSelectKeyword,name:o.fC.AfterSelectKeyword,kind:[o.is.StarWildCard,o.is.FunctionsWithArguments,o.is.Columns,o.is.SelectMacro]},{id:o.fC.AfterSelectFuncFirstArgument,name:o.fC.AfterSelectFuncFirstArgument,kind:[o.is.Columns]},{id:o.fC.AfterGroupByFunctionArgument,name:o.fC.AfterGroupByFunctionArgument,kind:[o.is.Columns]},{id:o.fC.AfterWhereFunctionArgument,name:o.fC.AfterWhereFunctionArgument,kind:[o.is.Columns]},{id:o.fC.AfterSelectArguments,name:o.fC.AfterSelectArguments,kind:[o.is.Columns]},{id:o.fC.AfterFromKeyword,name:o.fC.AfterFromKeyword,kind:[o.is.Schemas,o.is.Tables,o.is.TableMacro]},{id:o.fC.AfterSchema,name:o.fC.AfterSchema,kind:[o.is.Tables,o.is.TableMacro]},{id:o.fC.SelectAlias,name:o.fC.SelectAlias,kind:[o.is.Columns,o.is.FunctionsWithArguments]},{id:o.fC.FromKeyword,name:o.fC.FromKeyword,kind:[o.is.FromKeyword]},{id:o.fC.AfterFrom,name:o.fC.AfterFrom,kind:[o.is.WhereKeyword,o.is.GroupByKeywords,o.is.OrderByKeywords,o.is.LimitKeyword]},{id:o.fC.AfterTable,name:o.fC.AfterTable,kind:[o.is.WhereKeyword,o.is.GroupByKeywords,o.is.OrderByKeywords,o.is.LimitKeyword]},{id:o.fC.WhereKeyword,name:o.fC.WhereKeyword,kind:[o.is.Columns,o.is.FilterMacro,o.is.TemplateVariables]},{id:o.fC.WhereComparisonOperator,name:o.fC.WhereComparisonOperator,kind:[o.is.ComparisonOperators]},{id:o.fC.WhereValue,name:o.fC.WhereValue,kind:[o.is.FilterMacro,o.is.TemplateVariables]},{id:o.fC.AfterWhereValue,name:o.fC.AfterWhereValue,kind:[o.is.LogicalOperators,o.is.GroupByKeywords,o.is.OrderByKeywords,o.is.LimitKeyword,o.is.Columns,o.is.TemplateVariables]},{id:o.fC.AfterGroupByKeywords,name:o.fC.AfterGroupByKeywords,kind:[o.is.GroupMacro,o.is.Columns]},{id:o.fC.AfterGroupBy,name:o.fC.AfterGroupBy,kind:[o.is.OrderByKeywords,o.is.LimitKeyword]},{id:o.fC.AfterOrderByKeywords,name:o.fC.AfterOrderByKeywords,kind:[o.is.Columns]},{id:o.fC.AfterOrderByFunction,name:o.fC.AfterOrderByFunction,kind:[o.is.SortOrderDirectionKeyword,o.is.LimitKeyword]},{id:o.fC.AfterOrderByDirection,name:o.fC.AfterOrderByDirection,kind:[o.is.LimitKeyword]},{id:o.fC.AfterIsOperator,name:o.fC.AfterOrderByDirection,kind:[o.is.NotKeyword,o.is.NullValue,o.is.BoolValues]},{id:o.fC.AfterIsNotOperator,name:o.fC.AfterOrderByDirection,kind:[o.is.NullValue,o.is.BoolValues]}];function be(ne,te){let ie=[];for(let de=0;de<ne.length;de++){const me=te.getIfExists(ne[de]);me&&(ie=ie.concat(me.kind))}return ie}class We{constructor(te,ie,de,me,Oe){this.type=te,this.value=ie,this.range=de,this.previous=me,this.next=Oe}isKeyword(){return this.type===o.iv.Keyword}isWhiteSpace(){return this.type===o.iv.Whitespace}isParenthesis(){return this.type===o.iv.Parenthesis}isIdentifier(){return this.type===o.iv.Identifier}isString(){return this.type===o.iv.String}isNumber(){return this.type===o.iv.Number}isDoubleQuotedString(){return this.type===o.iv.Type}isVariable(){return this.type===o.iv.Variable}isFunction(){return this.type===o.iv.Function}isOperator(){return this.type===o.iv.Operator}isTemplateVariable(){return this.type===o.iv.Variable}is(te,ie){const de=this.type===te;return ie!==void 0?de&&je(te,this,ie):de}getPreviousNonWhiteSpaceToken(){let te=this.previous;for(;te!=null;){if(!te.isWhiteSpace())return te;te=te.previous}return null}getPreviousOfType(te,ie){let de=this.previous;for(;de!=null;){const me=de.type===te;if(ie!==void 0?me&&je(te,de,ie):me)return de;de=de.previous}return null}getPreviousUntil(te,ie,de){let me=[],Oe=this.previous;for(;Oe!=null;){if(ie.some(Fe=>Fe===Oe?.type)){Oe=Oe.previous;continue}const Le=Oe.type===te;if(de!==void 0?Le&&je(te,Oe,de):Le)return me;Oe.isWhiteSpace()||me.push(Oe),Oe=Oe.previous}return me}getNextUntil(te,ie,de){let me=[],Oe=this.next;for(;Oe!=null;){if(ie.some(Fe=>Fe===Oe?.type)){Oe=Oe.next;continue}const Le=Oe.type===te;if(de!==void 0?Le&&je(te,Oe,de):Le)return me;Oe.isWhiteSpace()||me.push(Oe),Oe=Oe.next}return me}getPreviousKeyword(){let te=this.previous;for(;te!=null;){if(te.isKeyword())return te;te=te.previous}return null}getNextNonWhiteSpaceToken(){let te=this.next;for(;te!=null;){if(!te.isWhiteSpace())return te;te=te.next}return null}getNextOfType(te,ie){let de=this.next;for(;de!=null;){const me=de.type===te;if(ie!==void 0?me&&je(te,de,ie):me)return de;de=de.next}return null}}function je(ne,te,ie){return ne===o.iv.Keyword||ne===o.iv.Operator?te.value.toLowerCase()===ie.toString().toLowerCase():te.value===ie}function He(ne,te,ie,de="sql"){var me;let Oe=null,Le=null;const Fe=ne.editor.tokenize((me=te.getValue())!=null?me:"",de);for(let Ke=0;Ke<Fe.length;Ke++){const xe=Fe[Ke];if(!xe.length&&Le){const qe={offset:0,type:o.iv.Whitespace,language:de,_tokenBrand:void 0};xe.push(qe)}for(let qe=0;qe<xe.length;qe++){const ct=xe[qe];let Tt=xe.length>qe+1?xe[qe+1].offset+1:te.getLineLength(Ke+1)+1;const rt={startLineNumber:Ke+1,startColumn:ct.offset===0?0:ct.offset+1,endLineNumber:Ke+1,endColumn:Tt},ft=te.getValueInRange(rt),at=new We(ct.type,ft,rt,Le,null);ne.Range.containsPosition(rt,ie)&&(Oe=at),Le&&(Le.next=at),Le=at}}return Oe}var De=e(68250);const Ye=ne=>{var te;return(te=ne?.getPreviousOfType(o.iv.Keyword,De.SELECT))!=null?te:null},nt=ne=>{const te=Ye(ne);return te?.getNextOfType(o.iv.Keyword,De.FROM)},ke=ne=>{var te;const ie=nt(ne),de=ie?.getNextNonWhiteSpaceToken();return de?.isVariable()||de?.isKeyword()&&((te=de.next)!=null&&te.is(o.iv.Parenthesis,"("))?null:de},ve=ne=>{const te=ne?.value.split(".");return te?.length===1?{table:te[0]}:te?.length===2?{schema:te[0],table:te[1]}:null},Ee={id:"editor.action.triggerSuggest",title:""};var Ie,we=new Uint8Array(16);function Ue(){if(!Ie&&(Ie=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ie))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ie(we)}const Ge=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ve(ne){return typeof ne=="string"&&Ge.test(ne)}const _e=Ve;for(var ze=[],ot=0;ot<256;++ot)ze.push((ot+256).toString(16).substr(1));function Qe(ne){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ie=(ze[ne[te+0]]+ze[ne[te+1]]+ze[ne[te+2]]+ze[ne[te+3]]+"-"+ze[ne[te+4]]+ze[ne[te+5]]+"-"+ze[ne[te+6]]+ze[ne[te+7]]+"-"+ze[ne[te+8]]+ze[ne[te+9]]+"-"+ze[ne[te+10]]+ze[ne[te+11]]+ze[ne[te+12]]+ze[ne[te+13]]+ze[ne[te+14]]+ze[ne[te+15]]).toLowerCase();if(!_e(ie))throw TypeError("Stringified UUID is invalid");return ie}const ut=Qe;function pt(ne,te,ie){ne=ne||{};var de=ne.random||(ne.rng||Ue)();if(de[6]=de[6]&15|64,de[8]=de[8]&63|128,te){ie=ie||0;for(var me=0;me<16;++me)te[ie+me]=de[me];return te}return ut(de)}const et=pt;var vt=e(77663),Et=e(79059);const Pt=(ne,te,ie)=>()=>[{id:o.is.SelectKeyword,name:o.is.SelectKeyword,suggestions:(de,me)=>Promise.resolve([{label:"SELECT <column>",insertText:"SELECT $0",insertTextRules:o.a7.InsertAsSnippet,kind:o.cm.Snippet,command:Ee,sortText:o.G8.Medium},{label:"SELECT <column> FROM <table>",insertText:"SELECT $2 FROM $1",insertTextRules:o.a7.InsertAsSnippet,kind:o.cm.Snippet,command:Ee,sortText:o.G8.Medium}])},{id:o.is.TemplateVariables,name:o.is.TemplateVariables,suggestions:(de,me)=>{const Oe=(0,Et.J)();return Oe?Promise.resolve(Oe.getVariables().map(Le=>{const Fe=`$${Le.name}`,Ke=Oe.replace(Fe);return{label:Fe,detail:`(Template Variable) ${Ke}`,kind:o.cm.Snippet,documentation:`(Template Variable) ${Ke}`,insertText:`\\$${Le.name} `,insertTextRules:o.a7.InsertAsSnippet,command:Ee,sortText:o.G8.Low}})):Promise.resolve([])}},{id:o.is.SelectMacro,name:o.is.SelectMacro,suggestions:(de,me)=>Promise.resolve([...ie.list().filter(Oe=>Oe.type===o.mB.Value||Oe.type===o.mB.Column).map(Ct)])},{id:o.is.TableMacro,name:o.is.TableMacro,suggestions:(de,me)=>Promise.resolve([...ie.list().filter(Oe=>Oe.type===o.mB.Table).map(Ct)])},{id:o.is.GroupMacro,name:o.is.GroupMacro,suggestions:(de,me)=>Promise.resolve([...ie.list().filter(Oe=>Oe.type===o.mB.Group).map(Ct)])},{id:o.is.FilterMacro,name:o.is.FilterMacro,suggestions:(de,me)=>Promise.resolve([...ie.list().filter(Oe=>Oe.type===o.mB.Filter).map(Ct)])},{id:o.is.WithKeyword,name:o.is.WithKeyword,suggestions:(de,me)=>Promise.resolve([{label:"WITH <alias> AS ( ... )",insertText:"WITH $1  AS ( $2 )",insertTextRules:o.a7.InsertAsSnippet,kind:o.cm.Snippet,command:Ee,sortText:o.G8.Medium}])},{id:o.is.StarWildCard,name:o.is.StarWildCard,suggestions:(de,me)=>Promise.resolve([{label:"*",insertText:"* $0",insertTextRules:o.a7.InsertAsSnippet,kind:o.cm.Field,command:Ee,sortText:o.G8.High}])},{id:o.is.FunctionsWithArguments,name:o.is.FunctionsWithArguments,suggestions:(de,me)=>Promise.resolve([...ne.list().map(Oe=>({label:Oe.name,insertText:`${Oe.name}($0)`,documentation:Oe.description,insertTextRules:o.a7.InsertAsSnippet,kind:o.cm.Function,command:Ee,sortText:o.G8.MediumLow}))])},{id:o.is.FunctionsWithoutArguments,name:o.is.FunctionsWithoutArguments,suggestions:(de,me)=>Promise.resolve([...ne.list().map(Oe=>({label:Oe.name,insertText:`${Oe.name}()`,documentation:Oe.description,insertTextRules:o.a7.InsertAsSnippet,kind:o.cm.Function,command:Ee,sortText:o.G8.MediumHigh}))])},{id:o.is.FromKeyword,name:o.is.FromKeyword,suggestions:(de,me)=>Promise.resolve([{label:"FROM",insertText:"FROM $0",command:Ee,insertTextRules:o.a7.InsertAsSnippet,kind:o.cm.Keyword}])},{id:o.is.Schemas,name:o.is.Schemas,suggestions:(de,me)=>Promise.resolve([])},{id:o.is.Tables,name:o.is.Tables,suggestions:(de,me)=>Promise.resolve([])},{id:o.is.Columns,name:o.is.Columns,suggestions:(de,me)=>Promise.resolve([])},{id:o.is.LogicalOperators,name:o.is.LogicalOperators,suggestions:(de,me)=>Promise.resolve(te.list().filter(Oe=>Oe.type===o.$M.Logical).map(Oe=>({label:Oe.operator,insertText:`${Oe.operator} `,documentation:Oe.description,command:Ee,sortText:o.G8.MediumHigh,kind:o.cm.Operator})))},{id:o.is.WhereKeyword,name:o.is.WhereKeyword,suggestions:(de,me)=>Promise.resolve([{label:"WHERE",insertText:"WHERE ",command:Ee,sortText:o.G8.MediumHigh,kind:o.cm.Keyword}])},{id:o.is.ComparisonOperators,name:o.is.ComparisonOperators,suggestions:(de,me)=>Promise.resolve([...te.list().filter(Oe=>Oe.type===o.$M.Comparison).map(Oe=>({label:Oe.operator,insertText:`${Oe.operator} `,documentation:Oe.description,command:Ee,sortText:o.G8.MediumHigh,kind:o.cm.Operator})),{label:"IN (...)",insertText:"IN ( $0 )",command:Ee,sortText:o.G8.Medium,kind:o.cm.Operator,insertTextRules:o.a7.InsertAsSnippet},{label:"NOT IN (...)",insertText:"NOT IN ( $0 )",command:Ee,sortText:o.G8.Medium,kind:o.cm.Operator,insertTextRules:o.a7.InsertAsSnippet},{label:"IS",insertText:"IS",command:Ee,sortText:o.G8.Medium,kind:o.cm.Operator},{label:"IS NOT",insertText:"IS NOT",command:Ee,sortText:o.G8.Medium,kind:o.cm.Operator}])},{id:o.is.GroupByKeywords,name:o.is.GroupByKeywords,suggestions:(de,me)=>Promise.resolve([{label:"GROUP BY",insertText:"GROUP BY ",command:Ee,sortText:o.G8.MediumHigh,kind:o.cm.Keyword}])},{id:o.is.OrderByKeywords,name:o.is.OrderByKeywords,suggestions:(de,me)=>Promise.resolve([{label:"ORDER BY",insertText:"ORDER BY ",command:Ee,sortText:o.G8.Medium,kind:o.cm.Keyword},{label:"ORDER BY(ascending)",insertText:"ORDER BY $1 ASC ",command:Ee,sortText:o.G8.MediumLow,kind:o.cm.Snippet,insertTextRules:o.a7.InsertAsSnippet},{label:"ORDER BY(descending)",insertText:"ORDER BY $1 DESC",command:Ee,sortText:o.G8.MediumLow,kind:o.cm.Snippet,insertTextRules:o.a7.InsertAsSnippet}])},{id:o.is.LimitKeyword,name:o.is.LimitKeyword,suggestions:(de,me)=>Promise.resolve([{label:"LIMIT",insertText:"LIMIT ",command:Ee,sortText:o.G8.MediumLow,kind:o.cm.Keyword}])},{id:o.is.SortOrderDirectionKeyword,name:o.is.SortOrderDirectionKeyword,suggestions:(de,me)=>Promise.resolve([De.ASC,De.DESC].map(Oe=>({label:Oe,insertText:`${Oe} `,command:Ee,kind:o.cm.Keyword})))},{id:o.is.NotKeyword,name:o.is.NotKeyword,suggestions:()=>Promise.resolve([{label:"NOT",insertText:"NOT",command:Ee,kind:o.cm.Keyword,sortText:o.G8.High}])},{id:o.is.BoolValues,name:o.is.BoolValues,suggestions:()=>Promise.resolve(["TRUE","FALSE"].map(de=>({label:de,insertText:`${de}`,command:Ee,kind:o.cm.Keyword,sortText:o.G8.Medium})))},{id:o.is.NullValue,name:o.is.NullValue,suggestions:()=>Promise.resolve(["NULL"].map(de=>({label:de,insertText:`${de}`,command:Ee,kind:o.cm.Keyword,sortText:o.G8.Low})))}];function Ct(ne){return{label:ne.name,insertText:`${"\\"+ne.text}${lt(ne.args)} `,insertTextRules:o.a7.InsertAsSnippet,kind:o.cm.Snippet,documentation:ne.description,command:Ee}}function lt(ne){return ne?"(".concat(ne.map((te,ie)=>`\${${ie}:${te}}`).join(", ")).concat(")"):"()"}function Rt(){return[{id:o.fC.SelectKeyword,name:o.fC.SelectKeyword,resolve:(ne,te,ie,de)=>!!(ne===null||ne.isWhiteSpace()&&ne.previous===null||ne.is(o.iv.Keyword,De.SELECT)||ne.is(o.iv.Keyword,De.SELECT)&&ne.previous===null||de||ne.isIdentifier()&&(de||ne?.previous===null)||ne.isIdentifier()&&De.SELECT.startsWith(ne.value.toLowerCase()))},{id:o.fC.WithKeyword,name:o.fC.WithKeyword,resolve:(ne,te,ie,de)=>!!(ne===null||ne.isWhiteSpace()&&ne.previous===null||ne.is(o.iv.Keyword,De.WITH)&&ne.previous===null||ne.isIdentifier()&&De.WITH.toLowerCase().startsWith(ne.value.toLowerCase()))},{id:o.fC.AfterSelectKeyword,name:o.fC.AfterSelectKeyword,resolve:(ne,te,ie,de)=>ie?.value.toLowerCase()===De.SELECT},{id:o.fC.AfterSelectArguments,name:o.fC.AfterSelectArguments,resolve:(ne,te,ie,de)=>te?.value.toLowerCase()===De.SELECT&&ie?.value===","},{id:o.fC.AfterSelectFuncFirstArgument,name:o.fC.AfterSelectFuncFirstArgument,resolve:(ne,te,ie,de)=>!!((te?.value.toLowerCase()===De.SELECT||te?.value.toLowerCase()===De.AS)&&(ie?.is(o.iv.Parenthesis,"(")||ne?.is(o.iv.Parenthesis,"()")))},{id:o.fC.AfterWhereFunctionArgument,name:o.fC.AfterWhereFunctionArgument,resolve:(ne,te,ie,de)=>!!(te?.is(o.iv.Keyword,De.WHERE)&&(ie?.is(o.iv.Parenthesis,"(")||ne?.is(o.iv.Parenthesis,"()")))},{id:o.fC.AfterGroupBy,name:o.fC.AfterGroupBy,resolve:(ne,te,ie,de)=>{var me;return!!(te?.is(o.iv.Keyword,De.BY)&&((me=te?.getPreviousKeyword())!=null&&me.is(o.iv.Keyword,De.GROUP))&&(ie?.isIdentifier()||ie?.isDoubleQuotedString()||ie?.is(o.iv.Parenthesis,")")||ie?.is(o.iv.Parenthesis,"()")))}},{id:o.fC.SelectAlias,name:o.fC.SelectAlias,resolve:(ne,te,ie,de)=>ie?.value===","&&te?.value.toLowerCase()===De.AS},{id:o.fC.FromKeyword,name:o.fC.FromKeyword,resolve:(ne,te,ie,de)=>!!(te?.value.toLowerCase()===De.SELECT&&ie?.value!==","||(ne?.isKeyword()||ne?.isIdentifier())&&De.FROM.toLowerCase().startsWith(ne.value.toLowerCase()))},{id:o.fC.AfterFromKeyword,name:o.fC.AfterFromKeyword,resolve:(ne,te,ie,de)=>!ne?.value.includes(".")&&ie?.value.toLowerCase()===De.FROM},{id:o.fC.AfterSchema,name:o.fC.AfterSchema,resolve:(ne,te,ie,de)=>(ne?.isWhiteSpace()&&ne?.next&&(ne=ne?.previous,ie=ne.getPreviousNonWhiteSpaceToken()),!!(ne?.isIdentifier()&&ne?.value.endsWith(".")&&ie?.value.toLowerCase()===De.FROM))},{id:o.fC.AfterFrom,name:o.fC.AfterFrom,resolve:(ne,te,ie,de)=>!!(te?.value.toLowerCase()===De.FROM&&ie?.isDoubleQuotedString()||te?.value.toLowerCase()===De.FROM&&ie?.isIdentifier()||te?.value.toLowerCase()===De.FROM&&ie?.isVariable())},{id:o.fC.AfterTable,name:o.fC.AfterTable,resolve:(ne,te,ie,de)=>!!(te?.value.toLowerCase()===De.FROM&&(ie?.isVariable()||ie?.value!==""&&ie?.value.toLowerCase()!==De.FROM))},{id:o.fC.WhereKeyword,name:o.fC.WhereKeyword,resolve:(ne,te,ie,de)=>!!(te?.value.toLowerCase()===De.WHERE&&(ie?.isKeyword()||ie?.is(o.iv.Parenthesis,"(")||ie?.is(o.iv.Operator,De.AND)))},{id:o.fC.WhereComparisonOperator,name:o.fC.WhereComparisonOperator,resolve:(ne,te,ie,de)=>{var me;return!!(te?.value.toLowerCase()===De.WHERE&&!((me=ie?.getPreviousNonWhiteSpaceToken())!=null&&me.isOperator())&&!ne?.is(o.iv.Delimiter,".")&&!ne?.isParenthesis()&&(ie?.isIdentifier()||ie?.isDoubleQuotedString()))}},{id:o.fC.WhereValue,name:o.fC.WhereValue,resolve:(ne,te,ie,de)=>!!(te?.value.toLowerCase()===De.WHERE&&ie?.isOperator())},{id:o.fC.AfterWhereValue,name:o.fC.AfterWhereValue,resolve:(ne,te,ie,de)=>{var me,Oe,Le;return!!(te?.value.toLowerCase()===De.WHERE&&(ie?.is(o.iv.Operator,"and")||ie?.is(o.iv.Operator,"or")||ie?.isString()||ie?.isNumber()||ie?.is(o.iv.Parenthesis,")")||ie?.is(o.iv.Parenthesis,"()")||ie?.isTemplateVariable()||ie?.is(o.iv.IdentifierQuote)&&((me=ie.getPreviousNonWhiteSpaceToken())!=null&&me.is(o.iv.Identifier))&&((Le=(Oe=ie?.getPreviousNonWhiteSpaceToken())==null?void 0:Oe.getPreviousNonWhiteSpaceToken())!=null&&Le.is(o.iv.IdentifierQuote))))}},{id:o.fC.AfterGroupByKeywords,name:o.fC.AfterGroupByKeywords,resolve:(ne,te,ie,de)=>{var me;return!!(te?.is(o.iv.Keyword,De.BY)&&((me=te?.getPreviousKeyword())!=null&&me.is(o.iv.Keyword,De.GROUP))&&(ie?.is(o.iv.Keyword,De.BY)||ie?.is(o.iv.Delimiter,",")))}},{id:o.fC.AfterGroupByFunctionArgument,name:o.fC.AfterGroupByFunctionArgument,resolve:(ne,te,ie,de)=>{var me;return!!(te?.is(o.iv.Keyword,De.BY)&&((me=te?.getPreviousKeyword())!=null&&me.is(o.iv.Keyword,De.GROUP))&&(ie?.is(o.iv.Parenthesis,"(")||ne?.is(o.iv.Parenthesis,"()")))}},{id:o.fC.AfterOrderByKeywords,name:o.fC.AfterOrderByKeywords,resolve:(ne,te,ie,de)=>{var me;return!!(ie?.is(o.iv.Keyword,De.BY)&&((me=ie?.getPreviousKeyword())!=null&&me.is(o.iv.Keyword,De.ORDER)))}},{id:o.fC.AfterOrderByFunction,name:o.fC.AfterOrderByFunction,resolve:(ne,te,ie,de)=>{var me,Oe;return!!(te?.is(o.iv.Keyword,De.BY)&&((me=te?.getPreviousKeyword())!=null&&me.is(o.iv.Keyword,De.ORDER))&&ie?.is(o.iv.Parenthesis)&&((Oe=ie?.getPreviousNonWhiteSpaceToken())!=null&&Oe.is(o.iv.Function)))}},{id:o.fC.AfterOrderByDirection,name:o.fC.AfterOrderByDirection,resolve:(ne,te,ie,de)=>!!(te?.is(o.iv.Keyword,De.DESC)||te?.is(o.iv.Keyword,De.ASC))},{id:o.fC.AfterIsOperator,name:o.fC.AfterIsOperator,resolve:(ne,te,ie,de)=>!!ie?.is(o.iv.Operator,"IS")},{id:o.fC.AfterIsNotOperator,name:o.fC.AfterIsNotOperator,resolve:(ne,te,ie,de)=>{var me;return!!(ie?.is(o.iv.Operator,"NOT")&&((me=ie.getPreviousNonWhiteSpaceToken())!=null&&me.is(o.iv.Operator,"IS")))}}]}var Ft=e(66841),bt=e(42851);let Bt={logger:()=>{}},st=()=>{};Ft.x&&bt.h&&(Bt=(0,bt.h)("SQLEditor"),st=Bt.logger,(0,Ft.x)("sqleditor",void 0,Bt));var Ot=e(69415);const Vt={id:"standardSql",extensions:[".sql"],aliases:["sql"],mimetypes:[],loader:()=>Promise.resolve().then(e.bind(e,68250)),completionProvider:Ot.h};var It=Object.defineProperty,Ht=Object.defineProperties,Ut=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,dt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,Ze=(ne,te,ie)=>te in ne?It(ne,te,{enumerable:!0,configurable:!0,writable:!0,value:ie}):ne[te]=ie,yt=(ne,te)=>{for(var ie in te||(te={}))dt.call(te,ie)&&Ze(ne,ie,te[ie]);if($e)for(var ie of $e(te))gt.call(te,ie)&&Ze(ne,ie,te[ie]);return ne},xt=(ne,te)=>Ht(ne,Ut(te));const jt="sql",$t=new Map,Je=new Map,kt=({children:ne,onBlur:te,onChange:ie,query:de,language:me={id:jt},width:Oe,height:Le})=>{const Fe=(0,n.useRef)(null),Ke=(0,n.useRef)(),xe=(0,n.useMemo)(()=>{const ct=et(),Tt=`${me.id}-${ct}`;return Ke.current=Tt,Tt},[me.id]);(0,n.useEffect)(()=>()=>{Ke.current&&Je.delete(Ke.current),st(`Removing instance cache ${Ke.current}`,!1,Je)},[]);const qe=(0,n.useCallback)(()=>{Fe.current&&Fe.current.getAction("editor.action.formatDocument").run()},[]);return n.createElement("div",{style:{width:Oe}},n.createElement(c.p,{height:Le||"240px",width:Oe?`${Oe-2}px`:void 0,language:xe,value:de,onBlur:ct=>{ie&&ie(ct,!1),te&&te()},showMiniMap:!1,showLineNumbers:!0,onEditorDidMount:(ct,Tt)=>{Fe.current=ct,ct.onDidChangeModelContent(rt=>{const ft=ct.getValue();ie&&ie(ft,!1)}),ct.addCommand(Tt.KeyMod.CtrlCmd|Tt.KeyCode.Enter,()=>{const rt=ct.getValue();ie&&ie(rt,!0)}),ct.onKeyUp(rt=>{rt.keyCode===84&&ct.trigger(Ee.id,Ee.id,{})}),Se(Tt,me,xe)}}),ne&&ne({formatQuery:qe}))},ce=(ne,te)=>{if(te?.id!==jt&&!te.loader){st(`Loading language '${te?.id}' from Monaco registry`,!1);const de=ne.languages.getLanguages().find(({id:me})=>me===te?.id);if(!de)throw Error(`Unknown Monaco language ${te?.id}`);return yt(yt({completionProvider:Ot.h},de),te)}return yt(yt({},Vt),te)},Se=async(ne,te,ie)=>{const de=ce(ne,te);if(!de.loader)return;const{language:me,conf:Oe}=await de.loader(ne);if(ne.languages.register({id:ie}),ne.languages.setMonarchTokensProvider(ie,yt({},me)),ne.languages.setLanguageConfiguration(ie,yt({},Oe)),de.formatter&&ne.languages.registerDocumentFormattingEditProvider(ie,{provideDocumentFormattingEdits:Le=>{var Fe;const Ke=(Fe=te.formatter)==null?void 0:Fe.call(te,Le.getValue());return[{range:Le.getFullModelRange(),text:Ke||""}]}}),de.completionProvider){const Le=de.completionProvider(ne,me);Be(te.id,ie,Le);const Fe=$t.get(te.id),Ke=Je.get(ie),xe=async(qe,ct,Tt,rt)=>{const ft=He(ne,qe,ct,ie),at=P(ft,Fe.positionResolvers),Dt=be(at,Fe.suggestionKinds);st("Statement position",!1,at),st("Suggestion kinds",!1,Dt);const zt={position:ct,currentToken:ft,statementPosition:at,kind:Dt,range:ne.Range.fromPositions(ct)};return{suggestions:await Ae(ne,ft,Dt,zt,Ke)}};ne.languages.registerCompletionItemProvider(ie,xt(yt({},Le),{provideCompletionItems:xe}))}};function Be(ne,te,ie){var de;$t.has(ne)||it(ne);const me=$t.get(ne);Je.has(te)||Je.set(te,new vt.B(Pt(me.functions,me.operators,me.macros)));const Oe=Je.get(te);if(ie.supportedFunctions)for(const Le of ie.supportedFunctions())me.functions.getIfExists(Le.id)||me.functions.register(Le);if(ie.supportedOperators)for(const Le of ie.supportedOperators())me.operators.getIfExists(Le.id)||me.operators.register(xt(yt({},Le),{name:Le.id}));if(ie.supportedMacros)for(const Le of ie.supportedMacros())me.macros.getIfExists(Le.id)||me.macros.register(xt(yt({},Le),{name:Le.id}));if(ie.customStatementPlacement)for(const Le of ie.customStatementPlacement()){const Fe=me.positionResolvers.getIfExists(Le.id);if(!Fe)me.positionResolvers.register(xt(yt({},Le),{id:Le.id,name:Le.id})),me.suggestionKinds.register({id:Le.id,name:Le.id,kind:[]});else{const Ke=Fe.resolve;Fe.resolve=(...xe)=>{const qe=Le.resolve(...xe);return Le.overrideDefault?qe:Ke(...xe)||qe}}}if(ie.customSuggestionKinds)for(const Le of ie.customSuggestionKinds()){if((de=Le.applyTo)==null||de.forEach(Fe=>{const Ke=me.suggestionKinds.getIfExists(Fe);Ke&&Ke.kind.indexOf(Le.id)===-1&&Ke.kind.push(Le.id)}),Le.overrideDefault){const Fe=Oe.get(Le.id);if(Fe!==void 0){Fe.suggestions=Le.suggestionsResolver;continue}}Oe.register({id:Le.id,name:Le.id,suggestions:Le.suggestionsResolver})}if(ie.schemas){const Le=Oe.get(o.is.Schemas),Fe=Le.suggestions;Le.suggestions=async(Ke,xe)=>{const qe=await Fe(Ke,xe);if(!ie.schemas)return[...qe];const Tt=(await ie.schemas.resolve()).map(rt=>{var ft;return{label:rt.name,insertText:`${(ft=rt.completion)!=null?ft:rt.name}.`,command:Ee,kind:o.cm.Module,sortText:o.G8.High}});return[...qe,...Tt]}}if(ie.tables){const Le=Oe.get(o.is.Tables),Fe=Le.suggestions;Le.suggestions=async(Ke,xe)=>{var qe,ct,Tt,rt,ft;const at=await Fe(Ke,xe),Dt=ke(Ke.currentToken),At=((ct=(qe=ie.tables)==null?void 0:qe.parseName)!=null?ct:ve)(Dt),Gt=((ft=await((rt=(Tt=ie.tables)==null?void 0:Tt.resolve)==null?void 0:rt.call(Tt,At)))!=null?ft:[]).map(ht=>{var Nt;return{label:ht.name,insertText:`${(Nt=ht.completion)!=null?Nt:ht.name}${ht.completion===ht.name?" $0":""}`,insertTextRules:o.a7.InsertAsSnippet,command:Ee,kind:o.cm.Field,sortText:o.G8.MediumHigh}});return[...at,...Gt]}}if(ie.columns){const Le=Oe.get(o.is.Columns),Fe=Le.suggestions;Le.suggestions=async(Ke,xe)=>{var qe,ct,Tt;const rt=await Fe(Ke,xe),ft=ke(Ke.currentToken);let at;const Dt=(ct=(qe=ie.tables)==null?void 0:qe.parseName)!=null?ct:ve;ft&&ft.value&&(at=Dt(ft));let zt=[];if(at){const At=await((Tt=ie.columns)==null?void 0:Tt.resolve(at));zt=At?At.map(Gt=>{var ht;return{label:Gt.name,insertText:(ht=Gt.completion)!=null?ht:Gt.name,kind:o.cm.Field,sortText:o.G8.High,detail:Gt.type,documentation:Gt.description}}):[]}return[...rt,...zt]}}}function it(ne){return $t.has(ne)||$t.set(ne,{functions:new vt.B,operators:new vt.B,suggestionKinds:new vt.B(Te),positionResolvers:new vt.B(Rt),macros:new vt.B}),$t.get(ne)}function Lt({children:ne,onChange:te,query:ie,width:de,height:me,editorLanguageDefinition:Oe}){const Le=(0,n.useRef)(ie);(0,n.useEffect)(()=>{Le.current=ie},[ie]);const Fe=(0,n.useCallback)((Ke,xe)=>{const qe={...Le.current,rawQuery:!0,rawSql:Ke};te(qe,xe)},[te]);return n.createElement(kt,{width:de,height:me,query:ie.rawSql,onChange:Fe,language:Oe},ne)}var Yt=e(12223),qt=e(68497),Sr=e(65489),sr=e(87231),Rr=e(83502),br=e(28409);function fr({db:ne,query:te,onValidate:ie,range:de}){const[me,Oe]=(0,n.useState)(),Le=(0,d.l4)(),Fe=(0,n.useMemo)(()=>(0,Rr.Cf)("bytes"),[]),Ke=(0,n.useMemo)(()=>({error:(0,f.css)`
        color: ${Le.colors.error.text};
        font-size: ${Le.typography.bodySmall.fontSize};
        font-family: ${Le.typography.fontFamilyMonospace};
      `,valid:(0,f.css)`
        color: ${Le.colors.success.text};
      `,info:(0,f.css)`
        color: ${Le.colors.text.secondary};
      `}),[Le]),[xe,qe]=(0,Sr.Z)(async Tt=>Tt.rawSql?.trim()===""?null:await ne.validateQuery(Tt,de),[ne]),[,]=(0,sr.Z)(async()=>{const Tt=await qe(te);return Tt&&Oe(Tt),null},1e3,[te,qe]);if((0,n.useEffect)(()=>{me?.isError&&ie(!1),me?.isValid&&ie(!0)},[me,ie]),!xe.value&&!xe.loading)return null;const ct=xe.value?.error?cr(xe.value.error):"";return n.createElement(n.Fragment,null,xe.loading&&n.createElement("div",{className:Ke.info},n.createElement(br.$,{inline:!0,size:12})," Validating query..."),!xe.loading&&xe.value&&n.createElement(n.Fragment,null,n.createElement(n.Fragment,null,xe.value.isValid&&xe.value.statistics&&n.createElement("div",{className:Ke.valid},n.createElement(T.J,{name:"check"})," This query will process"," ",n.createElement("strong",null,(0,Rr.zc)(Fe(xe.value.statistics.TotalBytesProcessed)))," ","when run.")),n.createElement(n.Fragment,null,xe.value.isError&&n.createElement("div",{className:Ke.error},ct))))}function cr(ne){const te=ne.split(":");return te.length>2?te.slice(2).join(":"):ne}function dr({showTools:ne,onFormatCode:te,onExpand:ie,isExpanded:de,...me}){const Oe=(0,d.l4)(),[Le,Fe]=(0,n.useState)(),Ke=(0,n.useMemo)(()=>({container:(0,f.css)`
        border: 1px solid ${Oe.colors.border.medium};
        border-top: none;
        padding: ${Oe.spacing(.5,.5,.5,.5)};
        display: flex;
        flex-grow: 1;
        justify-content: space-between;
        font-size: ${Oe.typography.bodySmall.fontSize};
      `,error:(0,f.css)`
        color: ${Oe.colors.error.text};
        font-size: ${Oe.typography.bodySmall.fontSize};
        font-family: ${Oe.typography.fontFamilyMonospace};
      `,valid:(0,f.css)`
        color: ${Oe.colors.success.text};
      `,info:(0,f.css)`
        color: ${Oe.colors.text.secondary};
      `,hint:(0,f.css)`
        color: ${Oe.colors.text.disabled};
        white-space: nowrap;
        cursor: help;
      `}),[Oe]);let xe={};return!ne&&Le===void 0&&(xe={height:0,padding:0,visibility:"hidden"}),n.createElement("div",{className:Ke.container,style:xe},n.createElement("div",null,me.onValidate&&n.createElement(fr,{...me,onValidate:qe=>{Fe(qe),me.onValidate(qe)}})),ne&&n.createElement("div",null,n.createElement(Yt.Lh,{spacing:"sm"},te&&n.createElement(qt.h,{onClick:()=>{(0,V.ff)("grafana_sql_query_formatted",{datasource:me.query.datasource?.type}),te()},name:"brackets-curly",size:"xs",tooltip:"Format query"}),ie&&n.createElement(qt.h,{onClick:()=>{(0,V.ff)("grafana_sql_editor_expand",{datasource:me.query.datasource?.type,expanded:!de}),ie(!de)},name:de?"angle-up":"angle-down",size:"xs",tooltip:de?"Collapse editor":"Expand editor"}),n.createElement($.u,{content:"Hit CTRL/CMD+Return to run query"},n.createElement(T.J,{className:Ke.hint,name:"keyboard"})))))}function pr({db:ne,query:te,onChange:ie,onRunQuery:de,onValidate:me,queryToValidate:Oe,range:Le}){const Fe=(0,d.l4)(),Ke=(0,d.wW)(ur),[xe,qe]=(0,n.useState)(!1),[ct,Tt]=(0,a.Z)(),[rt,ft]=(0,a.Z)(),at=(0,n.useMemo)(()=>ne.getEditorLanguageDefinition(),[ne]),Dt=(Gt,ht)=>n.createElement(Lt,{editorLanguageDefinition:at,query:te,width:Gt,height:ht?ht-Tt.height:void 0,onChange:ie},({formatQuery:Nt})=>n.createElement("div",{ref:ct},n.createElement(dr,{db:ne,query:Oe,onValidate:me,onFormatCode:Nt,showTools:!0,range:Le,onExpand:qe,isExpanded:xe}))),zt=(Gt=!1)=>Gt?n.createElement(r.Z,null,({width:ht,height:Nt})=>Dt(ht,Nt)):n.createElement("div",{ref:rt},Dt()),At=()=>n.createElement("div",{style:{width:ft.width,height:ft.height,background:Fe.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"center"}},"Editing in expanded code editor");return n.createElement(n.Fragment,null,xe?At():zt(),xe&&n.createElement(w.u,{title:`Query ${te.refId}`,closeOnBackdropClick:!1,closeOnEscape:!1,className:Ke.modal,contentClassName:Ke.modalContent,isOpen:xe,onDismiss:()=>{(0,V.ff)("grafana_sql_editor_expand",{datasource:te.datasource?.type,expanded:!1}),qe(!1)}},zt(!0)))}function ur(ne){return{modal:(0,f.css)`
      width: 95vw;
      height: 95vh;
    `,modalContent:(0,f.css)`
      height: 100%;
      padding-top: 0;
    `}}var Cr=e(91386),vr=e(96227),gr=e(55232);function Mr({rawSql:ne,datasourceType:te}){const[ie,de]=b(),me=(0,d.wW)(lr),Oe=Fe=>{de(Fe),(0,V.ff)("grafana_sql_preview_copied",{datasource:te})},Le=n.createElement("div",{className:me.labelWrapper},n.createElement("span",{className:me.label},"Preview"),n.createElement(qt.h,{tooltip:"Copy to clipboard",onClick:()=>Oe(ne),name:"copy"}));return n.createElement(vr.g,{label:Le,className:me.grow},n.createElement(c.p,{language:"sql",height:80,value:(0,gr._)(ne),monacoOptions:{scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1},readOnly:!0,showMiniMap:!1}))}function lr(ne){return{grow:(0,f.css)({flexGrow:1}),label:(0,f.css)({fontSize:12,fontWeight:ne.typography.fontWeightMedium}),labelWrapper:(0,f.css)({display:"flex",justifyContent:"space-between",paddingBottom:ne.spacing(.5)})}}function rr({query:ne,onQueryChange:te,db:ie}){return{onSqlChange:(0,n.useCallback)(me=>{const Oe=ie.toRawSql,Le=Oe({sql:me,dataset:ne.dataset,table:ne.table,refId:ne.refId}),Fe={...ne,sql:me,rawSql:Le};te(Fe)},[ie,te,ne])}}var on=e(46298),xr=e(34964),Mt=e(81803);function Kr({sql:ne,columns:te,onSqlChange:ie}){const de=(0,n.useCallback)(me=>{const Oe=me.map(Fe=>(0,R.U2)(Fe.property?.name)),Le={...ne,groupBy:Oe};ie(Le)},[ie,ne]);return n.createElement(on.k,{items:ne.groupBy,onChange:de,renderItem:Hr({options:te})})}function Hr({options:ne}){return function(ie,de,me){return n.createElement(xr.B,null,n.createElement(l.Ph,{value:ie.property?.name?(0,u.E)(ie.property.name):null,"aria-label":"Group by",options:ne,menuShouldPortal:!0,onChange:({value:Oe})=>Oe&&de((0,R.U2)(Oe))}),n.createElement(Mt._,{"aria-label":"Remove group by column",icon:"times",variant:"secondary",onClick:me}))}}function Qt({fields:ne,query:te,onQueryChange:ie,db:de}){const{onSqlChange:me}=rr({query:te,onQueryChange:ie,db:de});return n.createElement(Kr,{columns:ne,sql:te.sql,onSqlChange:me})}var Xt=e(86832),nr=e(38637);const kr=[{description:"Sort by ascending",value:"ASC",icon:"sort-amount-up"},{description:"Sort by descending",value:"DESC",icon:"sort-amount-down"}];function Ar({sql:ne,onSqlChange:te,columns:ie,showOffset:de}){const me=(0,n.useCallback)(Ke=>{const xe={...ne,orderByDirection:Ke};te(xe)},[te,ne]),Oe=(0,n.useCallback)(Ke=>{const xe={...ne,limit:Number.parseInt(Ke.currentTarget.value,10)};te(xe)},[te,ne]),Le=(0,n.useCallback)(Ke=>{const xe={...ne,offset:Number.parseInt(Ke.currentTarget.value,10)};te(xe)},[te,ne]),Fe=(0,n.useCallback)(Ke=>{const xe={...ne,orderBy:(0,R.ax)(Ke?.value)};Ke===null&&(xe.orderByDirection=void 0),te(xe)},[te,ne]);return n.createElement(n.Fragment,null,n.createElement(W.S,{label:"Order by",width:25},n.createElement(xr.B,null,n.createElement(l.Ph,{"aria-label":"Order by",options:ie,value:ne.orderBy?.property.name?(0,u.E)(ne.orderBy.property.name):null,isClearable:!0,menuShouldPortal:!0,onChange:Fe}),n.createElement(S.T,{h:1.5}),n.createElement(_.S,{options:kr,disabled:!ne?.orderBy?.property.name,value:ne.orderByDirection,onChange:me}))),n.createElement(W.S,{label:"Limit",optional:!0,width:25},n.createElement(nr.I,{type:"number",min:0,id:(0,Xt.uniqueId)("limit-"),value:ne.limit||"",onChange:Oe})),de&&n.createElement(W.S,{label:"Offset",optional:!0,width:25},n.createElement(nr.I,{type:"number",id:(0,Xt.uniqueId)("offset-"),value:ne.offset||"",onChange:Le})))}function Yr({fields:ne,query:te,onQueryChange:ie,db:de}){const{onSqlChange:me}=rr({query:te,onQueryChange:ie,db:de});let Oe=[];return ne&&(Oe=[{value:"",label:"Selected columns",options:te.sql?.columns?.map((Fe,Ke)=>{const xe=Fe.name?`${Fe.name}(${Fe.parameters?.map(qe=>qe.name)})`:Fe.parameters?.map(qe=>qe.name);return{value:xe,label:`${Ke+1} - ${xe}`}}),expanded:!0},...ne]),n.createElement(Ar,{sql:te.sql,onSqlChange:me,columns:Oe})}var wr=e(18996),zr=e(27366),Pr=e(76813);const hr={label:"*",value:"*"};function $r({sql:ne,format:te,columns:ie,onSqlChange:de,functions:me}){const Oe=(0,d.wW)(ar),Le=[hr,...ie||[]],Fe=[];te===Y.ws.Timeseries&&(Fe.push({label:"time",value:"time"}),Fe.push({label:"value",value:"value"}));const Ke=(0,n.useCallback)((rt,ft)=>at=>{let Dt={...rt};rt.parameters?.length?Dt.parameters=rt.parameters.map(At=>At.type===Pr.a.FunctionParameter?{...At,name:at.value}:At):Dt.parameters=[{type:Pr.a.FunctionParameter,name:at.value}];const zt={...ne,columns:ne.columns?.map((At,Gt)=>Gt===ft?Dt:At)};de(zt)},[de,ne]),xe=(0,n.useCallback)((rt,ft)=>at=>{const Dt={...rt,name:at?.value},zt={...ne,columns:ne.columns?.map((At,Gt)=>Gt===ft?Dt:At)};de(zt)},[de,ne]),qe=(0,n.useCallback)((rt,ft)=>at=>{let Dt={...rt};at!==null?Dt={...rt,alias:`"${at?.value?.trim()}"`}:delete Dt.alias;const zt={...ne,columns:ne.columns?.map((At,Gt)=>Gt===ft?Dt:At)};de(zt)},[de,ne]),ct=(0,n.useCallback)(rt=>()=>{const ft=[...ne.columns];ft.splice(rt,1);const at={...ne,columns:ft};de(at)},[de,ne]),Tt=(0,n.useCallback)(()=>{const rt={...ne,columns:[...ne.columns,(0,R.Wf)()]};de(rt)},[de,ne]);return n.createElement(zr.K,{gap:2,wrap:!0,direction:"column"},ne.columns?.map((rt,ft)=>n.createElement("div",{key:ft},n.createElement(zr.K,{gap:2,alignItems:"end"},n.createElement(W.S,{label:"Column",width:25},n.createElement(l.Ph,{value:Lr(rt),options:Le,inputId:`select-column-${ft}-${(0,Xt.uniqueId)()}`,menuShouldPortal:!0,allowCustomValue:!0,onChange:Ke(rt,ft)})),n.createElement(W.S,{label:"Aggregation",optional:!0,width:25},n.createElement(l.Ph,{value:rt.name?(0,u.E)(rt.name):null,inputId:`select-aggregation-${ft}-${(0,Xt.uniqueId)()}`,isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0,options:me,onChange:xe(rt,ft)})),n.createElement(W.S,{label:"Alias",optional:!0,width:15},n.createElement(l.Ph,{value:rt.alias?(0,u.E)(rt.alias):null,inputId:`select-alias-${ft}-${(0,Xt.uniqueId)()}`,options:Fe,onChange:qe(rt,ft),isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0})),n.createElement(z.zx,{"aria-label":"Remove",type:"button",icon:"trash-alt",variant:"secondary",size:"md",onClick:ct(ft)})))),n.createElement(z.zx,{type:"button",onClick:Tt,variant:"secondary",size:"md",icon:"plus","aria-label":"Add",className:Oe.addButton}))}const ar=()=>({addButton:(0,f.css)({alignSelf:"flex-start"})});function Lr({parameters:ne}){const te=ne?.find(ie=>ie.type===Pr.a.FunctionParameter);return te?.name?(0,u.E)(te.name):null}function Ir({fields:ne,query:te,onQueryChange:ie,db:de}){const{onSqlChange:me}=rr({query:te,onQueryChange:ie,db:de}),Oe=[...wr.W,...de.functions?.()||[]].map(u.E);return n.createElement($r,{columns:ne,sql:te.sql,format:te.format,functions:Oe,onSqlChange:me})}var Kt=e(99292),wt=e(17351),Vr=e(92403),_r=e(67823);const mr={add:"Add",remove:"Remove"},un={id:wt.cQ.uuid(),type:"group",children1:{[wt.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},Jt={id:wt.cQ.uuid(),type:"group",children1:{[wt.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},yr={...wt.I4.widgets,text:{...wt.I4.widgets.text,factory:function(te){return n.createElement(nr.I,{value:te?.value||"",placeholder:te?.placeholder,onChange:ie=>te?.setValue(ie.currentTarget.value)})}},number:{...wt.I4.widgets.number,factory:function(te){return n.createElement(nr.I,{value:te?.value,placeholder:te?.placeholder,type:"number",onChange:ie=>te?.setValue(Number.parseInt(ie.currentTarget.value,10))})}},datetime:{...wt.I4.widgets.datetime,factory:function(te){return n.createElement(_r.x,{onChange:ie=>{te?.setValue(ie.format(wt.I4.widgets.datetime.valueFormat))},date:(0,Vr.CQ)(te?.value).utc()})}}},Er={...wt.I4.settings,canRegroup:!1,maxNesting:1,canReorder:!1,showNot:!1,addRuleLabel:mr.add,deleteLabel:mr.remove,renderConjs:function(te){return n.createElement(l.Ph,{id:te?.id,"aria-label":"Conjunction",menuShouldPortal:!0,options:te?.conjunctionOptions?Object.keys(te?.conjunctionOptions).map(u.E):void 0,value:te?.selectedConjunction,onChange:ie=>te?.setConjunction(ie.value)})},renderField:function(te){const ie=te?.config?.fields||{};return n.createElement(l.Ph,{id:te?.id,width:25,"aria-label":"Field",menuShouldPortal:!0,options:te?.items.map(de=>{const me=ie[de.key].mainWidgetProps?.customProps?.icon;return{label:de.label,value:de.key,icon:me}}),value:te?.selectedKey,onChange:de=>{te?.setField(de.label)}})},renderButton:function(te){return n.createElement(z.zx,{type:"button",title:`${te?.label} filter`,onClick:te?.onClick,variant:"secondary",size:"md",icon:te?.label===mr.add?"plus":"times"})},renderOperator:function(te){return n.createElement(l.Ph,{options:te?.items.map(ie=>({label:ie.label,value:ie.key})),"aria-label":"Operator",menuShouldPortal:!0,value:te?.selectedKey,onChange:ie=>{te?.setField(ie.value||"")}})}};var Or=(ne=>(ne.IN="select_any_in",ne.NOT_IN="select_not_any_in",ne))(Or||{});const Qr=jr(wt.I4),Ur=wt.I4.types.text.widgets.text,Gr=[...Ur.operators||[],"select_any_in","select_not_any_in"],Xr={...Ur,operators:Gr},ln={...wt.I4.types,text:{...wt.I4.types.text,widgets:{...wt.I4.types.text.widgets,text:Xr}}},sn={...wt.I4,widgets:yr,settings:Er,operators:Qr,types:ln};function jr(ne){const{...te}=ne.operators,ie=()=>"",de=te.select_any_in.sqlFormatOp||ie,me=(Ke,xe,qe,ct,Tt,rt,ft,at)=>de(Ke,xe,Jr(qe),ct,Tt,rt,ft,at),Oe=te.select_not_any_in.sqlFormatOp||ie,Le=(Ke,xe,qe,ct,Tt,rt,ft,at)=>Oe(Ke,xe,Jr(qe),ct,Tt,rt,ft,at);return{...te,select_any_in:{...te.select_any_in,sqlFormatOp:me},select_not_any_in:{...te.select_not_any_in,sqlFormatOp:Le}}}function Jr(ne){return(0,Xt.isString)(ne)?ne.split(","):ne}function Zr({sql:ne,config:te,onSqlChange:ie}){const[de,me]=(0,n.useState)(),Oe=(0,n.useMemo)(()=>({...sn,...te}),[te]);(0,n.useEffect)(()=>{if(!de){const Fe=wt.cQ.checkTree(wt.cQ.loadTree(ne.whereJsonTree??Jt),Oe);me(Fe)}},[Oe,ne.whereJsonTree,de]),(0,n.useEffect)(()=>{ne.whereJsonTree||me(wt.cQ.checkTree(wt.cQ.loadTree(Jt),Oe))},[Oe,ne.whereJsonTree]);const Le=(0,n.useCallback)((Fe,Ke)=>{me(Fe);const xe={...ne,whereJsonTree:wt.cQ.getTree(Fe),whereString:wt.cQ.sqlFormat(Fe,Ke)};ie(xe)},[ie,ne]);return de?n.createElement(wt.AE,{...Oe,value:de,onChange:Le,renderBuilder:Fe=>n.createElement(wt.Ib,{...Fe})}):null}function Nr(ne){return`
    display: flex;
    gap: 8px;
    flex-direction: ${ne};`}(0,f.injectGlobal)`
  .group--header {
    ${Nr("row")}
  }

  .group-or-rule {
    ${Nr("column")}
    .rule {
      flex-direction: row;
    }
  }

  .rule--body {
    ${Nr("row")}
  }

  .group--children {
    ${Nr("column")}
  }

  .group--conjunctions:empty {
    display: none;
  }
`;function qr({query:ne,fields:te,onQueryChange:ie,db:de}){const me=(0,Kt.Z)(async()=>fn(te),[te]),{onSqlChange:Oe}=rr({query:ne,onQueryChange:ie,db:de});return n.createElement(Zr,{key:JSON.stringify(me.value),config:{fields:me.value||{}},sql:ne.sql,onSqlChange:Le=>{const Fe=(0,Et.J)().getVariables();cn(Le,Fe),Oe(Le)}})}function fn(ne){const te={};for(const ie of ne)te[ie.value]={type:ie.raqbFieldType||"text",valueSources:["value"],mainWidgetProps:{customProps:{icon:ie.icon}}};return te}function cn(ne,te){const ie=de=>de.multi&&(ne.whereString?.includes(`\${${de.name}}`)||ne.whereString?.includes(`$${de.name}`));te.some(de=>ie(de))&&(ne.whereString=ne.whereString?.replaceAll("')",")"),ne.whereString=ne.whereString?.replaceAll("('","("))}const Tr=({query:ne,db:te,queryRowFilter:ie,onChange:de,onValidate:me,range:Oe})=>{const Le=(0,O.Z)(async()=>await te.fields(ne),[te,ne.dataset,ne.table]);return n.createElement(n.Fragment,null,n.createElement(Cr._,null,n.createElement(U.p,null,n.createElement(Ir,{fields:Le.value||[],query:ne,onQueryChange:de,db:te})),ie.filter&&n.createElement(U.p,null,n.createElement(W.S,{label:"Filter by column value",optional:!0},n.createElement(qr,{fields:Le.value||[],query:ne,onQueryChange:de,db:te}))),ie.group&&n.createElement(U.p,null,n.createElement(W.S,{label:"Group by column"},n.createElement(Qt,{fields:Le.value||[],query:ne,onQueryChange:de,db:te}))),ie.order&&n.createElement(U.p,null,n.createElement(Yr,{fields:Le.value||[],query:ne,onQueryChange:de,db:te})),ie.preview&&ne.rawSql&&n.createElement(U.p,null,n.createElement(Mr,{rawSql:ne.rawSql,datasourceType:ne.datasource?.type}))),n.createElement(dr,{db:te,query:ne,onValidate:me,range:Oe}))};function Fr({datasource:ne,query:te,onChange:ie,onRunQuery:de,range:me,queryHeaderProps:Oe}){const[Le,Fe]=(0,n.useState)(!0),Ke=ne.getDB(),{preconfiguredDatabase:xe}=ne,qe=!!Oe?.isPostgresInstance,{loading:ct,error:Tt}=(0,O.Z)(async()=>()=>{ne.getDB(ne.id).init!==void 0&&ne.getDB(ne.id).init()},[ne]),rt=(0,N.Y)(te),[ft,at]=(0,n.useState)({filter:!!rt.sql?.whereString,group:!!rt.sql?.groupBy?.[0]?.property.name,order:!!rt.sql?.orderBy?.property.name,preview:!0}),[Dt,zt]=(0,n.useState)(rt);(0,n.useEffect)(()=>()=>{ne.getDB(ne.id).dispose!==void 0&&ne.getDB(ne.id).dispose()},[ne]);const At=(0,n.useCallback)(Nt=>{en(Nt)&&de&&de()},[de]),Gt=(Nt,Wr=!0)=>{zt(Nt),ie(Nt),(0,R.IC)(Nt.sql?.columns)&&Nt.sql?.columns.some(er=>er.name)&&!ft.group&&at({...ft,group:!0}),Wr&&At(Nt)},ht=Nt=>{zt(Nt),ie(Nt)};return ct||Tt?null:n.createElement(n.Fragment,null,n.createElement(E,{db:Ke,preconfiguredDataset:xe,onChange:ht,onRunQuery:de,onQueryRowChange:at,queryRowFilter:ft,query:rt,isQueryRunnable:Le,isPostgresInstance:qe}),n.createElement(S.T,{v:.5}),rt.editorMode!==o.je.Code&&n.createElement(Tr,{db:Ke,query:rt,onChange:Nt=>Gt(Nt,!1),queryRowFilter:ft,onValidate:Fe,range:me}),rt.editorMode===o.je.Code&&n.createElement(pr,{db:Ke,query:rt,queryToValidate:Dt,onChange:Gt,onRunQuery:de,onValidate:Fe,range:me}))}const en=ne=>!!ne.rawSql},7391:(re,i,e)=>{"use strict";e.d(i,{F:()=>O});var n=e(32688);const O=()=>!!n.config.featureToggles.sqlDatasourceDatabaseSelection},18996:(re,i,e)=>{"use strict";e.d(i,{W:()=>n,n:()=>O});const n=["AVG","COUNT","MAX","MIN","SUM"],O=["$__time","$__timeEpoch","$__timeFilter","$__timeFrom","$__timeTo","$__timeGroup","$__timeGroupAlias","$__unixEpochFilter","$__unixEpochNanoFilter","$__unixEpochNanoFrom","$__unixEpochNanoTo","$__unixEpochGroup","$__unixEpochGroupAlias"]},64755:(re,i,e)=>{"use strict";e.d(i,{D:()=>z});var n=e(8894),O=e(31312),S=e(71476),o=e(96083),N=e(40729),R=e(54554),L=e(98579),A=e(78597),I=e(92743),y=e(79059),C=e(72639),M=e(4148),b=e(4649),D=e(86832);class x{transformMetricFindResponse(_){const Y=[],w=_.fields.find(v=>v.name==="__text"),T=_.fields.find(v=>v.name==="__value");if(w&&T)for(let v=0;v<w.values.length;v++)Y.push({text:""+w.values[v],value:""+T.values[v]});else for(const v of _.fields)for(const l of v.values)Y.push({text:l});return(0,D.uniqBy)(Y,"text")}}var F=e(42933),J=e(18996),U=e(246),W=e(57642);function V($){const _=typeof $.rawQuery=="string"?$.rawQuery:null;if(!_)return $;const Y=(0,W.Y)({refId:"Annotation",...$.target??{},rawSql:_});return{...$,rawQuery:void 0,workspace:void 0,subscription:void 0,queryType:void 0,target:Y}}var H=e(7391);class z extends I.CK{constructor(_,Y=(0,y.J)()){super(_),this.templateSrv=Y,this.interpolateVariable=(T,v)=>typeof T=="string"?v.multi||v.includeAll?this.getQueryModel().quoteLiteral(T):String(T).replace(/'/g,"''"):typeof T=="number"?T:Array.isArray(T)?T.map(p=>this.getQueryModel().quoteLiteral(p)).join(","):T,this.name=_.name,this.responseParser=new x,this.id=_.id;const w=_.jsonData||{};this.interval=w.timeInterval||"1m",this.db=this.getDB(),this.preconfiguredDatabase=w.database??"",this.annotations={prepareAnnotation:V,QueryEditor:F.M}}getResponseParser(){return this.responseParser}interpolateVariablesInQueries(_,Y){let w=_;return _&&_.length>0&&(w=_.map(T=>({...T,datasource:this.getRef(),rawSql:this.templateSrv.replace(T.rawSql,Y,this.interpolateVariable),rawQuery:!0}))),w}filterQuery(_){return!_.hide}applyTemplateVariables(_,Y){return{refId:_.refId,datasource:this.getRef(),rawSql:this.templateSrv.replace(_.rawSql,Y,this.interpolateVariable),format:_.format}}query(_){if((0,H.F)()){const Y=this.checkForDatabaseIssue(_);if(Y){const w=new Error(Y);return(0,n._)(()=>w)}}return _.targets.forEach(Y=>{(0,C.ff)("grafana_sql_query_executed",{datasource:Y.datasource?.type,editorMode:Y.editorMode,format:Y.format,app:_.app})}),super.query(_)}checkForDatabaseIssue(_){if(this.type==="postgres"&&!this.preconfiguredDatabase)return`You do not currently have a default database configured for this data source. Postgres requires a default
             database with which to connect. Please configure one through the Data Sources Configuration page, or if you
             are using a provisioning file, update that configuration file with a default database.`;if(_.app!==o.zj.Explore&&this.preconfiguredDatabase){for(const Y of _.targets)if(Y.editorMode===A.je.Builder&&Y.dataset!==this.preconfiguredDatabase)return`The configuration for this panel's data source has been modified. The previous database used in this panel's
                   saved query is no longer available. Please update the query to use the new database option.
                   Previous query parameters will be preserved until the query is updated.`}}async metricFindQuery(_,Y){const w=Y?.range;if(w==null)return[];let T="tempvar";Y&&Y.variable&&Y.variable.name&&(T=Y.variable.name);const v={...Y?.scopedVars,...(0,N._)({query:_,wildcardChar:"%",options:Y})},l=this.templateSrv.replace(_,v,this.interpolateVariable),p={refId:T,datasource:this.getRef(),rawSql:l,format:U.ws.Table},s=await this.runMetaQuery(p,w);return this.getResponseParser().transformMetricFindResponse(s)}async runSql(_,Y){const w=(0,R.JK)(),T=await this.runMetaQuery({rawSql:_,format:U.ws.Table,refId:Y?.refId},w);return new L.U(T)}runMetaQuery(_,Y){const w=_.refId||"meta",T=[{..._,datasource:_.datasource||this.getRef(),refId:w}];return(0,O.n)((0,M.i)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:Y.from.valueOf().toString(),to:Y.to.valueOf().toString(),queries:T},requestId:w}).pipe((0,S.U)(v=>(0,b.z1)(v,T).data[0]??{fields:[]})))}targetContainsTemplate(_){let Y=_.rawSql;return J.n.forEach(w=>{Y=Y?.replace(w,"")||""}),this.templateSrv.containsTemplate(Y)}}},57642:(re,i,e)=>{"use strict";e.d(i,{Y:()=>o});var n=e(78597),O=e(246),S=e(86654);function o(N){let R=N?.editorMode||n.je.Builder;return N?.editorMode===void 0&&N?.rawSql!==void 0&&(R=n.je.Code),{...N,refId:N?.refId||"A",format:N?.format!==void 0?N.format:O.ws.Table,rawSql:N?.rawSql||"",editorMode:R,sql:N?.sql??{columns:[(0,S.Wf)()],groupBy:[(0,S.U2)()],limit:50}}}},76813:(re,i,e)=>{"use strict";e.d(i,{R:()=>n,a:()=>O});var n=(S=>(S.String="string",S))(n||{}),O=(S=>(S.Property="property",S.Operator="operator",S.Or="or",S.And="and",S.GroupBy="groupBy",S.Function="function",S.FunctionParameter="functionParameter",S))(O||{})},246:(re,i,e)=>{"use strict";e.d(i,{Er:()=>N,ws:()=>O,x7:()=>S});var n=e(99456),O=(R=>(R.Timeseries="time_series",R.Table="table",R))(O||{});const S=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],o=R=>({label:R,value:R}),N=n.E??o},55232:(re,i,e)=>{"use strict";e.d(i,{_:()=>O});var n=e(4662);function O(S){return n.ZP.format(S).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,o=>o.replace(/\s/g,""))}},86654:(re,i,e)=>{"use strict";e.d(i,{IC:()=>S,U2:()=>o,Wf:()=>R,ax:()=>N,zE:()=>O});var n=e(76813);function O(L){return`SELECT ${L.map(I=>{let y="";return I.name&&I.alias?y+=`${I.name}(${I.parameters?.map(C=>`${C.name}`)}) AS ${I.alias}`:I.name?y+=`${I.name}(${I.parameters?.map(C=>`${C.name}`)})`:I.alias?y+=`${I.parameters?.map(C=>`${C.name}`)} AS ${I.alias}`:y+=`${I.parameters?.map(C=>`${C.name}`)}`,y}).join(", ")} `}const S=L=>{if(!L)return!1;const A=L.some(y=>y.parameters?.length||y.parameters?.some(C=>C.name)),I=L.some(y=>y.name);return A||I};function o(L){return{type:n.a.GroupBy,property:{type:n.R.String,name:L}}}function N(L){return{type:n.a.Property,property:{type:n.R.String,name:L}}}function R(L){return{type:n.a.Function,name:L,parameters:[]}}},64710:(re,i,e)=>{"use strict";var n=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.setDragStart=i.setDragProgress=i.setDragEnd=void 0;var O=o(e(5166));function S(A){if(typeof WeakMap!="function")return null;var I=new WeakMap,y=new WeakMap;return(S=function(M){return M?y:I})(A)}function o(A,I){if(!I&&A&&A.__esModule)return A;if(A===null||n(A)!=="object"&&typeof A!="function")return{default:A};var y=S(I);if(y&&y.has(A))return y.get(A);var C={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in A)if(b!=="default"&&Object.prototype.hasOwnProperty.call(A,b)){var D=M?Object.getOwnPropertyDescriptor(A,b):null;D&&(D.get||D.set)?Object.defineProperty(C,b,D):C[b]=A[b]}return C.default=A,y&&y.set(A,C),C}var N=function(I,y){return{type:O.SET_DRAG_PROGRESS,mousePos:I,dragging:y}};i.setDragProgress=N;var R=function(I,y,C){return{type:O.SET_DRAG_START,dragStart:I,dragging:y,mousePos:C}};i.setDragStart=R;var L=function(){return{type:O.SET_DRAG_END}};i.setDragEnd=L},55951:(re,i,e)=>{"use strict";var n=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.setNot=i.setLock=i.setConjunction=void 0;var O=N(e(5166)),S=e(12461);function o(I){if(typeof WeakMap!="function")return null;var y=new WeakMap,C=new WeakMap;return(o=function(b){return b?C:y})(I)}function N(I,y){if(!y&&I&&I.__esModule)return I;if(I===null||n(I)!=="object"&&typeof I!="function")return{default:I};var C=o(y);if(C&&C.has(I))return C.get(I);var M={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in I)if(D!=="default"&&Object.prototype.hasOwnProperty.call(I,D)){var x=b?Object.getOwnPropertyDescriptor(I,D):null;x&&(x.get||x.set)?Object.defineProperty(M,D,x):M[D]=I[D]}return M.default=I,C&&C.set(I,M),M}var R=function(y,C,M){return{type:O.SET_CONJUNCTION,path:(0,S.toImmutableList)(C),conjunction:M}};i.setConjunction=R;var L=function(y,C,M){return{type:O.SET_NOT,path:(0,S.toImmutableList)(C),not:M}};i.setNot=L;var A=function(y,C,M){return{type:O.SET_LOCK,path:(0,S.toImmutableList)(C),lock:M}};i.setLock=A},43239:(re,i,e)=>{"use strict";var n=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.tree=i.rule=i.group=i.drag=void 0;var O=L(e(84840));i.tree=O;var S=L(e(55951));i.group=S;var o=L(e(67466));i.rule=o;var N=L(e(64710));i.drag=N;function R(A){if(typeof WeakMap!="function")return null;var I=new WeakMap,y=new WeakMap;return(R=function(M){return M?y:I})(A)}function L(A,I){if(!I&&A&&A.__esModule)return A;if(A===null||n(A)!=="object"&&typeof A!="function")return{default:A};var y=R(I);if(y&&y.has(A))return y.get(A);var C={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in A)if(b!=="default"&&Object.prototype.hasOwnProperty.call(A,b)){var D=M?Object.getOwnPropertyDescriptor(A,b):null;D&&(D.get||D.set)?Object.defineProperty(C,b,D):C[b]=A[b]}return C.default=A,y&&y.set(A,C),C}},67466:(re,i,e)=>{"use strict";var n=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.setValueSrc=i.setValue=i.setOperatorOption=i.setOperator=i.setField=void 0;var O=N(e(5166)),S=e(12461);function o(C){if(typeof WeakMap!="function")return null;var M=new WeakMap,b=new WeakMap;return(o=function(x){return x?b:M})(C)}function N(C,M){if(!M&&C&&C.__esModule)return C;if(C===null||n(C)!=="object"&&typeof C!="function")return{default:C};var b=o(M);if(b&&b.has(C))return b.get(C);var D={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var F in C)if(F!=="default"&&Object.prototype.hasOwnProperty.call(C,F)){var J=x?Object.getOwnPropertyDescriptor(C,F):null;J&&(J.get||J.set)?Object.defineProperty(D,F,J):D[F]=C[F]}return D.default=C,b&&b.set(C,D),D}var R=function(M,b,D){return{type:O.SET_FIELD,path:(0,S.toImmutableList)(b),field:D,config:M}};i.setField=R;var L=function(M,b,D){return{type:O.SET_OPERATOR,path:(0,S.toImmutableList)(b),operator:D,config:M}};i.setOperator=L;var A=function(M,b,D,x,F,J,U){return{type:O.SET_VALUE,path:(0,S.toImmutableList)(b),delta:D,value:x,valueType:F,asyncListValues:J,config:M,__isInternal:U}};i.setValue=A;var I=function(M,b,D,x){return{type:O.SET_VALUE_SRC,path:(0,S.toImmutableList)(b),delta:D,srcKey:x,config:M}};i.setValueSrc=I;var y=function(M,b,D,x){return{type:O.SET_OPERATOR_OPTION,path:(0,S.toImmutableList)(b),name:D,value:x,config:M}};i.setOperatorOption=y},84840:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.setTree=i.removeRule=i.removeGroup=i.moveItem=i.addRule=i.addGroup=i.addDefaultCaseGroup=i.addCaseGroup=void 0;var S=n(e(14850)),o=e(12461),N=e(26749),R=I(e(5166)),L=n(e(7134));function A(U){if(typeof WeakMap!="function")return null;var W=new WeakMap,V=new WeakMap;return(A=function(z){return z?V:W})(U)}function I(U,W){if(!W&&U&&U.__esModule)return U;if(U===null||O(U)!=="object"&&typeof U!="function")return{default:U};var V=A(W);if(V&&V.has(U))return V.get(U);var H={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in U)if($!=="default"&&Object.prototype.hasOwnProperty.call(U,$)){var _=z?Object.getOwnPropertyDescriptor(U,$):null;_&&(_.get||_.set)?Object.defineProperty(H,$,_):H[$]=U[$]}return H.default=U,V&&V.set(U,H),H}var y=function(W,V){return{type:R.SET_TREE,tree:V,config:W}};i.setTree=y;var C=function(W,V,H){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"rule",$=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;return{type:R.ADD_RULE,ruleType:z,children:$,path:(0,o.toImmutableList)(V),id:(0,S.default)(),properties:(0,N.defaultRuleProperties)(W).merge(H||{}),config:W}};i.addRule=C;var M=function(W,V){return{type:R.REMOVE_RULE,path:(0,o.toImmutableList)(V),config:W}};i.removeRule=M;var b=function(W,V,H){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:R.ADD_CASE_GROUP,path:(0,o.toImmutableList)(V),children:z,id:(0,S.default)(),properties:(0,N.defaultGroupProperties)(W).merge(H||{}),config:W,meta:{isDefaultCase:!0}}};i.addDefaultCaseGroup=b;var D=function(W,V,H){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:R.ADD_CASE_GROUP,path:(0,o.toImmutableList)(V),children:z,id:(0,S.default)(),properties:(0,N.defaultGroupProperties)(W).merge(H||{}),config:W}};i.addCaseGroup=D;var x=function(W,V,H){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:R.ADD_GROUP,path:(0,o.toImmutableList)(V),children:z,id:(0,S.default)(),properties:(0,N.defaultGroupProperties)(W).merge(H||{}),config:W}};i.addGroup=x;var F=function(W,V){return{type:R.REMOVE_GROUP,path:(0,o.toImmutableList)(V),config:W}};i.removeGroup=F;var J=function(W,V,H,z){return{type:R.MOVE_ITEM,fromPath:(0,o.toImmutableList)(V),toPath:(0,o.toImmutableList)(H),placement:z,config:W}};i.moveItem=J},87375:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(52690)),o=n(e(86661)),N=n(e(99513)),R=n(e(70963)),L=n(e(11780)),A=W(e(39953)),I=n(e(61240)),y=W(e(7134)),C=e(39700),M=n(e(70046)),b=e(89479),D=n(e(14850)),x=e(58479),F,J;function U($){if(typeof WeakMap!="function")return null;var _=new WeakMap,Y=new WeakMap;return(U=function(T){return T?Y:_})($)}function W($,_){if(!_&&$&&$.__esModule)return $;if($===null||O($)!=="object"&&typeof $!="function")return{default:$};var Y=U(_);if(Y&&Y.has($))return Y.get($);var w={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in $)if(v!=="default"&&Object.prototype.hasOwnProperty.call($,v)){var l=T?Object.getOwnPropertyDescriptor($,v):null;l&&(l.get||l.set)?Object.defineProperty(w,v,l):w[v]=$[v]}return w.default=$,Y&&Y.set($,w),w}function V($){var _=H();return function(){var w=(0,L.default)($),T;if(_){var v=(0,L.default)(this).constructor;T=Reflect.construct(w,arguments,v)}else T=w.apply(this,arguments);return(0,R.default)(this,T)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var z=(0,M.default)(F=(J=function($){(0,N.default)(Y,$);var _=V(Y);function Y(w){var T;return(0,S.default)(this,Y),T=_.call(this,w),T._updPath(w),T}return(0,o.default)(Y,[{key:"shouldComponentUpdate",value:function(T,v){var l=this.props,p=(0,x.pureShouldComponentUpdate)(this)(T,v);if(p){var s=[];for(var u in T){var g=T[u]!==l[u];g&&u!="__isInternalValueChange"&&s.push(u)}s.length||(p=!1),s.length==1&&s[0]=="tree"&&T.__isInternalValueChange&&(p=!1)}return p}},{key:"_updPath",value:function(T){var v=T.tree.get("id");this.path=y.default.List.of(v)}},{key:"render",value:function(){var T=this.props.tree,v=T.get("type"),l=v=="switch_group",p=l?null:(0,b.getTotalReordableNodesCountInTree)(T),s=l?null:(0,b.getTotalRulesCountInTree)(T),u=T.get("id");return A.default.createElement(C.Item,{key:u,id:u,path:this.path,type:v,properties:T.get("properties")||new y.Map,config:this.props.config,actions:this.props.actions,children1:T.get("children1")||new y.Map,reordableNodesCnt:p,totalRulesCnt:s,parentReordableNodesCnt:0,onDragStart:this.props.onDragStart})}}]),Y}(A.Component),J.propTypes={tree:I.default.any.isRequired,config:I.default.object.isRequired,actions:I.default.object.isRequired,onDragStart:I.default.func},J))||F;i.default=z},24151:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(47552)),o=n(e(52690)),N=n(e(86661)),R=n(e(50757)),L=n(e(99513)),A=n(e(70963)),I=n(e(11780)),y=U(e(39953)),C=e(84811),M=n(e(59169)),b=n(e(61240)),D=U(e(43239)),x=e(12461),F=e(58479);function J(w){if(typeof WeakMap!="function")return null;var T=new WeakMap,v=new WeakMap;return(J=function(p){return p?v:T})(w)}function U(w,T){if(!T&&w&&w.__esModule)return w;if(w===null||O(w)!=="object"&&typeof w!="function")return{default:w};var v=J(T);if(v&&v.has(w))return v.get(w);var l={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in w)if(s!=="default"&&Object.prototype.hasOwnProperty.call(w,s)){var u=p?Object.getOwnPropertyDescriptor(w,s):null;u&&(u.get||u.set)?Object.defineProperty(l,s,u):l[s]=w[s]}return l.default=w,v&&v.set(w,l),l}function W(w,T){var v=Object.keys(w);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(w);T&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(w,p).enumerable})),v.push.apply(v,l)}return v}function V(w){for(var T=1;T<arguments.length;T++){var v=arguments[T]!=null?arguments[T]:{};T%2?W(Object(v),!0).forEach(function(l){(0,S.default)(w,l,v[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(v)):W(Object(v)).forEach(function(l){Object.defineProperty(w,l,Object.getOwnPropertyDescriptor(v,l))})}return w}function H(w){var T=z();return function(){var l=(0,I.default)(w),p;if(T){var s=(0,I.default)(this).constructor;p=Reflect.construct(l,arguments,s)}else p=l.apply(this,arguments);return(0,A.default)(this,p)}}function z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $=function(w){(0,L.default)(v,w);var T=H(v);function v(l){var p;return(0,o.default)(this,v),p=T.call(this,l),p.shouldComponentUpdate=(0,F.liteShouldComponentUpdate)((0,R.default)(p),{tree:function(u){return!(u===p.oldValidatedTree&&p.oldValidatedTree===p.validatedTree)}}),(0,F.useOnPropsChanged)((0,R.default)(p)),p._updateActions(l),p.validatedTree=l.getMemoizedTree(l.config,l.tree),p.oldValidatedTree=p.validatedTree,p}return(0,N.default)(v,[{key:"_updateActions",value:function(p){var s=p.config,u=p.dispatch;this.actions=(0,F.bindActionCreators)(V(V(V({},D.tree),D.group),D.rule),s,u)}},{key:"onPropsChanged",value:function(p){var s=p.onChange,u=this.props.config,g=p.tree,m=this.props.tree,E=p.config;this.oldValidatedTree=this.validatedTree,this.validatedTree=g,u!==E&&(this._updateActions(p),this.validatedTree=p.getMemoizedTree(E,g,u));var f=!(0,x.immutableEqual)(this.validatedTree,this.oldValidatedTree);f&&s&&s(this.validatedTree,E,p.__lastAction)}},{key:"render",value:function(){var p=this.props,s=p.config,u=p.renderBuilder,g=p.dispatch,m=p.__isInternalValueChange,E={tree:this.validatedTree,actions:this.actions,config:s,dispatch:g,__isInternalValueChange:m};return u(E)}}]),v}(y.Component);$.propTypes={config:b.default.object.isRequired,onChange:b.default.func,renderBuilder:b.default.func,tree:b.default.any};var _=(0,C.connect)(function(w){return{tree:w.tree,__isInternalValueChange:w.__isInternalValueChange,__lastAction:w.__lastAction}},null,null,{context:M.default})($);_.displayName="ConnectedQuery";var Y=_;i.default=Y},17026:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(52690)),o=n(e(86661)),N=n(e(50757)),R=n(e(99513)),L=n(e(70963)),A=n(e(11780)),I=$(e(39953)),y=n(e(61240)),C=n(e(42889)),M=n(e(59169)),b=e(53508),D=e(84811),x=$(e(43239)),F=e(58560),J=e(12461),U=e(26749),W=e(46286),V=e(58479),H=n(e(24151));function z(T){if(typeof WeakMap!="function")return null;var v=new WeakMap,l=new WeakMap;return(z=function(s){return s?l:v})(T)}function $(T,v){if(!v&&T&&T.__esModule)return T;if(T===null||O(T)!=="object"&&typeof T!="function")return{default:T};var l=z(v);if(l&&l.has(T))return l.get(T);var p={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in T)if(u!=="default"&&Object.prototype.hasOwnProperty.call(T,u)){var g=s?Object.getOwnPropertyDescriptor(T,u):null;g&&(g.get||g.set)?Object.defineProperty(p,u,g):p[u]=T[u]}return p.default=T,l&&l.set(T,p),p}function _(T){var v=Y();return function(){var p=(0,A.default)(T),s;if(v){var u=(0,A.default)(this).constructor;s=Reflect.construct(p,arguments,u)}else s=p.apply(this,arguments);return(0,L.default)(this,s)}}function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=function(T){(0,R.default)(l,T);var v=_(l);function l(p,s){var u;(0,S.default)(this,l),u=v.call(this,p,s),u.shouldComponentUpdate=(0,V.liteShouldComponentUpdate)((0,N.default)(u),{value:function(d,c,P){return!1}}),(0,V.useOnPropsChanged)((0,N.default)(u)),u.getMemoizedConfig=(0,F.createConfigMemo)(),u.getMemoizedTree=(0,W.createValidationMemo)();var g=u.getMemoizedConfig(p),m=p.value,E=u.getMemoizedTree(g,m),f=(0,C.default)(g,E,u.getMemoizedTree),a=(0,b.createStore)(f);return u.state={store:a,config:g},u}return(0,o.default)(l,[{key:"onPropsChanged",value:function(s){var u=this,g=this.state.config,m=this.getMemoizedConfig(s),E=g!==m,f=this.state.store.getState().tree,a=!(0,J.immutableEqual)(s.value,this.props.value)&&!(0,J.immutableEqual)(s.value,f),r=a?s.value||(0,U.defaultRoot)(s):f;if(E&&this.setState({config:m}),a||E){var d=this.getMemoizedTree(m,r,g);return Promise.resolve().then(function(){u.state.store.dispatch(x.tree.setTree(m,d))})}}},{key:"render",value:function(){var s=this.props,u=s.renderBuilder,g=s.get_children,m=s.onChange,E=s.settings,f=this.state,a=f.config,r=f.store,d=E.renderProvider;return I.default.createElement(d,{config:a},I.default.createElement(D.Provider,{store:r,context:M.default},I.default.createElement(H.default,{config:a,getMemoizedTree:this.getMemoizedTree,onChange:m,renderBuilder:u||g})))}}]),l}(I.Component);i.default=w,w.propTypes={conjunctions:y.default.object.isRequired,fields:y.default.object.isRequired,types:y.default.object.isRequired,operators:y.default.object.isRequired,widgets:y.default.object.isRequired,settings:y.default.object.isRequired,onChange:y.default.func,renderBuilder:y.default.func,value:y.default.any}},79528:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(70764)),o=n(e(73045)),N=n(e(52690)),R=n(e(86661)),L=n(e(99513)),A=n(e(70963)),I=n(e(11780)),y=x(e(39953)),C=n(e(61240)),M=e(70046),b=["isDraggingTempo","isDraggingMe","dragging"];function D(V){if(typeof WeakMap!="function")return null;var H=new WeakMap,z=new WeakMap;return(D=function(_){return _?z:H})(V)}function x(V,H){if(!H&&V&&V.__esModule)return V;if(V===null||O(V)!=="object"&&typeof V!="function")return{default:V};var z=D(H);if(z&&z.has(V))return z.get(V);var $={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Y in V)if(Y!=="default"&&Object.prototype.hasOwnProperty.call(V,Y)){var w=_?Object.getOwnPropertyDescriptor(V,Y):null;w&&(w.get||w.set)?Object.defineProperty($,Y,w):$[Y]=V[Y]}return $.default=V,z&&z.set(V,$),$}function F(V){var H=J();return function(){var $=(0,I.default)(V),_;if(H){var Y=(0,I.default)(this).constructor;_=Reflect.construct($,arguments,Y)}else _=$.apply(this,arguments);return(0,A.default)(this,_)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=e(95696),W=function(H){return function(z){var $;return $=function(_){(0,L.default)(w,_);var Y=F(w);function w(T){var v;return(0,N.default)(this,w),v=Y.call(this,T),v.handleDraggerMouseDown=function(l){var p=v.props.id,s=v.wrapper.current;v.props.onDragStart&&v.props.onDragStart(p,s,l)},v.wrapper=y.default.createRef(),v}return(0,R.default)(w,[{key:"render",value:function(){var v=this.props,l=v.isDraggingTempo,p=v.isDraggingMe,s=v.dragging,u=(0,o.default)(v,b),g=u.isTrueLocked,m={};p&&l&&(M._isReorderingTree||(m={top:s.y,left:s.x,width:s.w}));var E=U(H,"group-or-rule",p&&l?"qb-draggable":null,p&&!l?"qb-placeholder":null,g?"locked":null);return y.default.createElement("div",{className:E,style:m,ref:this.wrapper,"data-id":this.props.id},y.default.createElement(z,(0,S.default)({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:p,isDraggingTempo:l},u)))}}]),w}(y.PureComponent),$.propTypes={isDraggingTempo:C.default.bool,isDraggingMe:C.default.bool,onDragStart:C.default.func,dragging:C.default.object,isLocked:C.default.bool,isTrueLocked:C.default.bool},$}};i.default=W},22611:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(52690)),o=n(e(86661)),N=n(e(50757)),R=n(e(99513)),L=n(e(70963)),A=n(e(11780)),I=J(e(39953)),y=n(e(61240)),C=n(e(33973)),M=n(e(59169)),b=e(58479),D=e(84811),x=e(26749);function F(z){if(typeof WeakMap!="function")return null;var $=new WeakMap,_=new WeakMap;return(F=function(w){return w?_:$})(z)}function J(z,$){if(!$&&z&&z.__esModule)return z;if(z===null||O(z)!=="object"&&typeof z!="function")return{default:z};var _=F($);if(_&&_.has(z))return _.get(z);var Y={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in z)if(T!=="default"&&Object.prototype.hasOwnProperty.call(z,T)){var v=w?Object.getOwnPropertyDescriptor(z,T):null;v&&(v.get||v.set)?Object.defineProperty(Y,T,v):Y[T]=z[T]}return Y.default=z,_&&_.set(z,Y),Y}function U(z){var $=W();return function(){var Y=(0,A.default)(z),w;if($){var T=(0,A.default)(this).constructor;w=Reflect.construct(Y,arguments,T)}else w=Y.apply(this,arguments);return(0,L.default)(this,w)}}function W(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var V=function($){var _;return _=function(Y){(0,R.default)(T,Y);var w=U(T);function T(v){var l;return(0,S.default)(this,T),l=w.call(this,v),l._selectedConjunction=function(p){return p=p||l.props,p.conjunction||(0,x.defaultGroupConjunction)(p.config,p.field)},l.setConjunction=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;l.props.actions.setConjunction(l.props.path,p)},l.setNot=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;l.props.actions.setNot(l.props.path,p)},l.setLock=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;l.props.actions.setLock(l.props.path,p)},l.dummyFn=function(){},l.removeSelf=function(){l.props.actions.removeGroup(l.props.path)},l.addGroup=function(){l.props.actions.addGroup(l.props.path)},l.addCaseGroup=function(){l.props.actions.addCaseGroup(l.props.path)},l.addDefaultCaseGroup=function(){l.props.actions.addDefaultCaseGroup(l.props.path)},l.addRule=function(){l.props.actions.addRule(l.props.path)},l.setField=function(p){l.props.actions.setField(l.props.path,p)},l.setOperator=function(p){l.props.actions.setOperator(l.props.path,p)},l.setValue=function(p,s,u){l.props.actions.setValue(l.props.path,p,s,u)},(0,b.useOnPropsChanged)((0,N.default)(l)),l.selectedConjunction=l._selectedConjunction(v),l.conjunctionOptions=l._getConjunctionOptions(v),l.dummyFn.isDummyFn=!0,l}return(0,o.default)(T,[{key:"shouldComponentUpdate",value:function(l,p){var s=this.props,u=this.state,g=(0,b.pureShouldComponentUpdate)(this)(l,p);if(g&&u==p&&s!=l){var m=l.dragging.id||s.dragging.id,E=m==l.id,f=[];for(var a in l){var r=l[a]!=s[a];a=="dragging"&&!E&&(r=!1),r&&f.push(a)}f.length||(g=!1)}return g}},{key:"onPropsChanged",value:function(l){var p=l.config,s=l.id,u=l.conjunction,g=this.props.config,m=this.props.conjunction;(g!=p||m!=u)&&(this.selectedConjunction=this._selectedConjunction(l),this.conjunctionOptions=this._getConjunctionOptions(l))}},{key:"_getConjunctionOptions",value:function(l){var p=this;return(0,C.default)(l.config.conjunctions,function(s,u){return{id:"conjunction-".concat(l.id,"-").concat(u),name:"conjunction[".concat(l.id,"]"),key:u,label:s.label,checked:u===p._selectedConjunction(l)}})}},{key:"render",value:function(){var l=this.props.dragging.id==this.props.id,p=this.props.path.size,s=this.props.config.settings.maxNesting,u=!l&&this.props.isDraggingTempo,g=typeof s>"u"||p<s,m=p==1;return I.default.createElement("div",{className:"group-or-rule-container group-container","data-id":this.props.id},[l?I.default.createElement($,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:m,allowFurtherNesting:g,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,I.default.createElement($,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:l,isDraggingTempo:u,onDragStart:this.props.onDragStart,isRoot:m,allowFurtherNesting:g,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:u?this.dummyFn:this.setConjunction,setNot:u?this.dummyFn:this.setNot,setLock:u?this.dummyFn:this.setLock,removeSelf:u?this.dummyFn:this.removeSelf,addGroup:u?this.dummyFn:this.addGroup,addCaseGroup:u?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:u?this.dummyFn:this.addDefaultCaseGroup,addRule:u?this.dummyFn:this.addRule,setField:u?this.dummyFn:this.setField,setOperator:u?this.dummyFn:this.setOperator,setValue:u?this.dummyFn:this.setValue,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),T}(I.Component),_.propTypes={config:y.default.object.isRequired,actions:y.default.object.isRequired,path:y.default.any.isRequired,id:y.default.string.isRequired,groupId:y.default.string,not:y.default.bool,conjunction:y.default.string,children1:y.default.any,onDragStart:y.default.func,reordableNodesCnt:y.default.number,field:y.default.string,parentField:y.default.string,isLocked:y.default.bool,isTrueLocked:y.default.bool,dragging:y.default.object,isDraggingTempo:y.default.bool},_},H=function($){var _=(0,D.connect)(function(Y){return{dragging:Y.dragging}},null,null,{context:M.default})(V($));return _.displayName="ConnectedGroupContainer",_};i.default=H},32548:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(52690)),o=n(e(86661)),N=n(e(99513)),R=n(e(70963)),L=n(e(11780)),A=x(e(39953)),I=n(e(61240)),y=n(e(59169)),C=e(58560),M=e(58479),b=e(84811);function D(H){if(typeof WeakMap!="function")return null;var z=new WeakMap,$=new WeakMap;return(D=function(Y){return Y?$:z})(H)}function x(H,z){if(!z&&H&&H.__esModule)return H;if(H===null||O(H)!=="object"&&typeof H!="function")return{default:H};var $=D(z);if($&&$.has(H))return $.get(H);var _={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in H)if(w!=="default"&&Object.prototype.hasOwnProperty.call(H,w)){var T=Y?Object.getOwnPropertyDescriptor(H,w):null;T&&(T.get||T.set)?Object.defineProperty(_,w,T):_[w]=H[w]}return _.default=H,$&&$.set(H,_),_}function F(H){var z=J();return function(){var _=(0,L.default)(H),Y;if(z){var w=(0,L.default)(this).constructor;Y=Reflect.construct(_,arguments,w)}else Y=_.apply(this,arguments);return(0,R.default)(this,Y)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=e(95696),W=function(z){var $;return $=function(_){(0,N.default)(w,_);var Y=F(w);function w(T){var v;return(0,S.default)(this,w),v=Y.call(this,T),v.dummyFn=function(){},v.removeSelf=function(){v.props.actions.removeRule(v.props.path)},v.setLock=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;v.props.actions.setLock(v.props.path,l)},v.setField=function(l){v.props.actions.setField(v.props.path,l)},v.setOperator=function(l){v.props.actions.setOperator(v.props.path,l)},v.setOperatorOption=function(l,p){v.props.actions.setOperatorOption(v.props.path,l,p)},v.setValue=function(l,p,s,u,g){v.props.actions.setValue(v.props.path,l,p,s,u,g)},v.setValueSrc=function(l,p){v.props.actions.setValueSrc(v.props.path,l,p)},v.dummyFn.isDummyFn=!0,v}return(0,o.default)(w,[{key:"shouldComponentUpdate",value:function(v,l){var p=this.props,s=this.state,u=(0,M.pureShouldComponentUpdate)(this)(v,l);if(u&&s==l&&p!=v){var g=v.dragging.id||p.dragging.id,m=g==v.id,E=[];for(var f in v){var a=v[f]!=p[f];f=="dragging"&&!m&&(a=!1),a&&E.push(f)}E.length||(u=!1)}return u}},{key:"render",value:function(){var v=this.props.dragging.id==this.props.id,l=(0,C.getFieldConfig)(this.props.config,this.props.field),p=this.props.config.settings.showErrorMessage,s=l&&l.type=="!struct",u=!v&&this.props.isDraggingTempo,g=this.props.valueError,m=g&&g.toArray().filter(function(f){return!!f}).shift()||null,E=m!=null&&p;return A.default.createElement("div",{className:U("group-or-rule-container","rule-container",E?"rule-with-error":null),"data-id":this.props.id},[v?A.default.createElement(z,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,A.default.createElement(z,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:v,isDraggingTempo:u,onDragStart:this.props.onDragStart,setLock:u?this.dummyFn:this.setLock,removeSelf:u?this.dummyFn:this.removeSelf,setField:u?this.dummyFn:this.setField,setOperator:u?this.dummyFn:this.setOperator,setOperatorOption:u?this.dummyFn:this.setOperatorOption,setValue:u?this.dummyFn:this.setValue,setValueSrc:u?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),w}(A.Component),$.propTypes={id:I.default.string.isRequired,groupId:I.default.string,config:I.default.object.isRequired,path:I.default.any.isRequired,operator:I.default.string,field:I.default.string,actions:I.default.object.isRequired,onDragStart:I.default.func,value:I.default.any,valueSrc:I.default.any,asyncListValues:I.default.array,valueError:I.default.any,operatorOptions:I.default.object,reordableNodesCnt:I.default.number,parentField:I.default.string,isLocked:I.default.bool,isTrueLocked:I.default.bool,dragging:I.default.object,isDraggingTempo:I.default.bool},$},V=function(z){var $=(0,b.connect)(function(_){return{dragging:_.dragging}},null,null,{context:y.default})(W(z));return $.displayName="ConnectedRuleContainer",$};i.default=V},70046:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=i._isReorderingTree=void 0;var S=n(e(70764)),o=n(e(68148)),N=n(e(52690)),R=n(e(86661)),L=n(e(50757)),A=n(e(99513)),I=n(e(70963)),y=n(e(11780)),C=z(e(39953)),M=e(84811),b=e(89479),D=e(12461),x=n(e(59169)),F=z(e(5166)),J=n(e(80189)),U=n(e(61240)),W=z(e(43239)),V=e(58479);function H(v){if(typeof WeakMap!="function")return null;var l=new WeakMap,p=new WeakMap;return(H=function(u){return u?p:l})(v)}function z(v,l){if(!l&&v&&v.__esModule)return v;if(v===null||O(v)!=="object"&&typeof v!="function")return{default:v};var p=H(l);if(p&&p.has(v))return p.get(v);var s={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in v)if(g!=="default"&&Object.prototype.hasOwnProperty.call(v,g)){var m=u?Object.getOwnPropertyDescriptor(v,g):null;m&&(m.get||m.set)?Object.defineProperty(s,g,m):s[g]=v[g]}return s.default=v,p&&p.set(v,s),s}function $(v){var l=_();return function(){var s=(0,y.default)(v),u;if(l){var g=(0,y.default)(this).constructor;u=Reflect.construct(s,arguments,g)}else u=s.apply(this,arguments);return(0,I.default)(this,u)}}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Y=!1;i._isReorderingTree=Y;var w=function(l){var p,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return p=function(u){(0,A.default)(m,u);var g=$(m);function m(E){var f;return(0,N.default)(this,m),f=g.call(this,E),f._getEventTarget=function(a,r){return a&&a.__mocked_window||document.body||window},f.onDragStart=function(a,r,d){var c=r.closest(".query-builder");f._isUsingLegacyReactDomRender===void 0&&(f._isUsingLegacyReactDomRender=(0,V.isUsingLegacyReactDomRender)(c)),document.body.classList.add("qb-dragging"),c.classList.add("qb-dragging");var P=c.closest(".query-builder-container")||c;P=f._getScrollParent(P)||document.body;var G=P.scrollTop,q=f._getDraggableNodeEl(c),Z=f._getPlaceholderNodeEl(c),j=c.querySelectorAll(".group--children"),K=j.length?j[0]:null,k;K&&(k=window.getComputedStyle(K,null).getPropertyValue("padding-left"),k=parseInt(k));var Q={id:a,x:r.offsetLeft,y:r.offsetTop,w:r.offsetWidth,h:r.offsetHeight,itemInfo:f.tree.items[a],paddingLeft:k},ae={id:a,x:r.offsetLeft,y:r.offsetTop,scrollTop:G,clientX:d.clientX,clientY:d.clientY,itemInfo:(0,J.default)(f.tree.items[a]),treeEl:c,treeElContainer:P},oe={clientX:d.clientX,clientY:d.clientY},le=f._getEventTarget(d,ae);f.eventTarget=le,le.addEventListener("mousemove",f.onDrag),le.addEventListener("mouseup",f.onDragEnd),f.props.setDragStart(ae,Q,oe)},f.onDrag=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,d=Object.assign({},f.props.dragging),c=f.props.dragStart,P=d.paddingLeft,G=c.treeElContainer,q=G.scrollTop;if(d.itemInfo=f.tree.items[d.id],!!d.itemInfo){var Z={clientX:a.clientX,clientY:a.clientY},j={clientX:c.clientX,clientY:c.clientY};if(a.__mock_dom){var K=c.treeEl,k=f._getDraggableNodeEl(K),Q=f._getPlaceholderNodeEl(K);a.__mock_dom({treeEl:K,dragEl:k,plhEl:Q})}if(!c.plX){var ae=c.treeEl,oe=f._getPlaceholderNodeEl(ae);oe&&(c.plX=oe.getBoundingClientRect().left+window.scrollX,c.plY=oe.getBoundingClientRect().top+window.scrollY)}var le=c.x,ue=c.y,he=c.clientX,pe=c.clientY,ye=c.scrollTop,Re={x:le+(a.clientX-he),y:ue+(a.clientY-pe)+(q-ye)};d.x=Re.x,d.y=Re.y,d.paddingLeft=P,d.mousePos=Z,d.startMousePos=j,f.props.setDragProgress(Z,d);var Ce=r?f.handleDrag(d,a,s):!1;Ce||a.preventDefault&&a.preventDefault()}},f.onDragEnd=function(){var a=f.props.dragStart.treeEl;f.props.setDragEnd(),a.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),f._cacheEls={};var r=f.eventTarget||f._getEventTarget();r.removeEventListener("mousemove",f.onDrag),r.removeEventListener("mouseup",f.onDragEnd)},(0,V.useOnPropsChanged)((0,L.default)(f)),f.onPropsChanged(E),f}return(0,R.default)(m,[{key:"onPropsChanged",value:function(f){this.tree=(0,b.getFlatTree)(f.tree)}},{key:"shouldComponentUpdate",value:function(f,a){var r=this.props,d=this.state,c=(0,V.pureShouldComponentUpdate)(this)(f,a);if(c&&d==a&&r!=f){var P=[];for(var G in f){var q=f[G]!=r[G];q&&G!="dragging"&&G!="mousePos"&&P.push(G)}P.length||(c=!1)}return c}},{key:"componentDidUpdate",value:function(f,a){var r=this.props.dragging,d=this.props.dragStart;if(i._isReorderingTree=Y=!1,d&&d.id&&(r.itemInfo=this.tree.items[r.id],r.itemInfo&&(r.itemInfo.index!=d.itemInfo.index||r.itemInfo.parent!=d.itemInfo.parent))){var c=d.treeEl,P=d.treeElContainer,G=this._getPlaceholderNodeEl(c,!0);if(G){var q=G.getBoundingClientRect().left+window.scrollX,Z=G.getBoundingClientRect().top+window.scrollY,j=d.plX,K=d.plY,k=P.scrollTop;d.plX=q,d.plY=Z,d.itemInfo=(0,J.default)(r.itemInfo),d.y=G.offsetTop,d.x=G.offsetLeft,d.clientY+=Z-K,d.clientX+=q-j,P!=document.body&&(d.scrollTop=k),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(f,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a==null)return null;this._cacheEls||(this._cacheEls={});var d=this._cacheEls[a];return d&&document.contains(d)&&!r||(d=f.querySelector('.group-or-rule-container[data-id="'+a+'"]'),this._cacheEls[a]=d),d}},{key:"_getDraggableNodeEl",value:function(f){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var r=this._cacheEls.draggable;if(r&&document.contains(r)&&!a)return r;var d=f.getElementsByClassName("qb-draggable");return r=d.length?d[0]:null,this._cacheEls.draggable=r,r}},{key:"_getPlaceholderNodeEl",value:function(f){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var r=this._cacheEls.placeholder;if(r&&document.contains(r)&&!a)return r;var d=f.getElementsByClassName("qb-placeholder");return r=d.length?d[0]:null,this._cacheEls.placeholder=r,r}},{key:"_isScrollable",value:function(f){var a=window.getComputedStyle(f)["overflow-y"];return(a==="scroll"||a==="auto")&&f.scrollHeight>f.offsetHeight}},{key:"_getScrollParent",value:function(f){return f==null?null:f===document.body||this._isScrollable(f)?f:this._getScrollParent(f.parentNode)}},{key:"handleDrag",value:function(f,a,r){var d=this,c=!0,P=f.itemInfo,G=f.paddingLeft,q=null,Z=this.props.dragStart.treeEl,j=f.id,K=this._getDraggableNodeEl(Z),k=this._getPlaceholderNodeEl(Z),Q,ae,oe,le;if(K&&k){if(Q=K.getBoundingClientRect(),ae=k.getBoundingClientRect(),!ae.width)return;var ue={hrz:0,vrt:0};Q.top<ae.top?ue.vrt=-1:Q.bottom>ae.bottom&&(ue.vrt=1),Q.left>ae.left?ue.hrz=1:Q.left<ae.left&&(ue.hrz=-1),le=Z.getBoundingClientRect();var he={x:le.left+(le.right-le.left)/2,y:ue.vrt>=0?Q.bottom:Q.top},pe;if(a.__mocked_hov_container)pe=a.__mocked_hov_container;else{var ye=document.elementFromPoint(he.x,he.y-1);if(pe=ye?ye.closest(".group-or-rule-container"):null,!pe&&ye&&ye.classList.contains("query-builder-container")){var Re,Ce=ye==null||(Re=ye.firstChild)===null||Re===void 0?void 0:Re.firstChild;Ce&&Ce.classList.contains("group-or-rule-container")&&(pe=Ce)}}if(!pe)D.logger.log("out of tree bounds!");else{var Ae=pe.classList.contains("group-container"),Te=pe.getAttribute("data-id"),be=pe,We=!1,je=!1;if(be){oe=be.getBoundingClientRect();var He=oe.bottom-oe.top,De=this.tree.items[Te],Ye=null,nt=null,ke=null,ve=null;if(ue.vrt==0)ke=P,nt=k,nt&&(Ye=nt.getBoundingClientRect());else if(Ae){if(ue.vrt>0){var Ee=pe.getElementsByClassName("group--header"),Ie=Ee.length?Ee[0]:null;if(Ie){var we=Ie.getBoundingClientRect(),Ue=we.bottom-we.top,Ge=Q.bottom-we.top>Ue*3/4;Ge&&De.top>f.itemInfo.top&&(ke=De,Ye=we,nt=Ie,je=!0)}}else if(ue.vrt<0&&De.lev>=P.lev){var Ve=oe.bottom-Q.top>=2;Ve&&De.top<f.itemInfo.top&&(ke=De,Ye=oe,nt=be,We=!0)}if(!je&&!We||c){var _e=ue.vrt<0?oe.bottom-Q.top>He-5:Q.bottom-oe.top>He-5;_e&&(!je&&!We&&(ke=De,Ye=oe,nt=be),c&&(ve=De))}}else{var ze=ue.vrt<0?oe.bottom-Q.top>He/2:Q.bottom-oe.top>He/2;ze&&(ke=De,Ye=oe,nt=be)}var ot=ke&&ke.id==j;if(Ye){var Qe=Q.left-le.left,ut=Ye.left-le.left,pt=ut/G,et=Math.max(0,Math.round(Qe/G)),vt=[],Et=[];if(!ot){if(Ae&&(We?vt.push([F.PLACEMENT_APPEND,ke,ke.lev+1]):je&&vt.push([F.PLACEMENT_PREPEND,ke,ke.lev+1]),c&&ve)){var Pt=ve.lev==0,Ct=ve.type=="case_group"&&P.type!="case_group",lt=ve.prev&&this.tree.items[ve.prev].caseId,Rt=ve.next&&this.tree.items[ve.next].caseId;P.caseId==lt&&(lt=null),P.caseId==Rt&&(Rt=null);var Ft=lt&&this.tree.items[lt],bt=Rt&&this.tree.items[Rt];ue.vrt>0?Pt?Et.push([F.PLACEMENT_APPEND,ve,ve.lev+1]):Ct&&bt?Et.push([F.PLACEMENT_PREPEND,bt,bt.lev+1]):Et.push([F.PLACEMENT_AFTER,ve,ve.lev]):ue.vrt<0&&(Pt?Et.push([F.PLACEMENT_PREPEND,ve,ve.lev+1]):Ct&&Ft?Et.push([F.PLACEMENT_APPEND,Ft,Ft.lev+1]):Et.push([F.PLACEMENT_BEFORE,ve,ve.lev]))}!We&&!je&&(ue.vrt<0?vt.push([F.PLACEMENT_BEFORE,ke,ke.lev]):ue.vrt>0&&vt.push([F.PLACEMENT_AFTER,ke,ke.lev]))}var Bt=function(dt){var gt=dt[1],Ze=P.caseId?d.tree.items[P.caseId]:null,yt=gt.caseId?d.tree.items[gt.caseId]:null;return[].concat((0,o.default)(dt),[Ze,yt])};vt=vt.map(Bt),Et=Et.map(Bt),vt=vt.filter(function($e){var dt=$e[0],gt=$e[1];if((dt==F.PLACEMENT_BEFORE||dt==F.PLACEMENT_AFTER)&&gt.parent==null||gt.collapsed&&(dt==F.PLACEMENT_APPEND||dt==F.PLACEMENT_PREPEND))return!1;var Ze=gt.id==P.id;if(!Ze){for(var yt=gt;yt.parent;)if(yt=d.tree.items[yt.parent],yt.id==P.id){Ze=!0;break}}return!Ze}).map(function($e){var dt=$e[0],gt=$e[1],Ze=$e[2],yt=$e[3],xt=$e[4],jt=null;return dt==F.PLACEMENT_APPEND||dt==F.PLACEMENT_PREPEND?jt=gt:jt=d.tree.items[gt.parent],jt&&jt.parent==null&&(jt=null),$e[5]=jt,$e});var st=null,Ot=vt.filter(function($e){return d.canMove(P,$e[1],$e[0],$e[3],$e[4],$e[5],r)});c&&Ot.length==0&&Et.length>0&&(Ot=Et.filter(function($e){return d.canMove(P,$e[1],$e[0],$e[3],$e[4],$e[5],r)}));var Vt=Ot.map(function($e){return $e[2]}),It=P.lev,Ht=Vt.concat(It),Ut=null;Ht.indexOf(et)!=-1?Ut=et:et>Math.max.apply(Math,(0,o.default)(Ht))?Ut=Math.max.apply(Math,(0,o.default)(Ht)):et<Math.min.apply(Math,(0,o.default)(Ht))&&(Ut=Math.min.apply(Math,(0,o.default)(Ht))),st=Ot.find(function($e){return $e[2]==Ut}),!ot&&!st&&Ot.length&&(st=Ot[0]),q=st}}}}return q?(this.move(P,q[1],q[0],q[3]),!0):!1}},{key:"canMove",value:function(f,a,r,d,c,P,G){if(!f||!a||f.id===a.id)return!1;var q=this.props.config.settings,Z=q.canRegroup,j=q.canRegroupCases,K=q.maxNesting,k=q.maxNumberOfRules,Q=q.canLeaveEmptyCase,ae=P?P.lev+1:a.lev,oe=r==F.PLACEMENT_BEFORE||r==F.PLACEMENT_AFTER,le=r==F.PLACEMENT_PREPEND||r==F.PLACEMENT_APPEND,ue=oe&&a.lev==1||le&&a.lev==0,he=f.parent!=a.parent,pe=le||he,ye=f.type=="case_group"&&!ue||f.parentType=="rule_group"||a.type=="rule_group"||a.parentType=="rule_group"||f.type!="case_group"&&a.type=="case_group"&&oe||f.type!="case_group"&&a.type=="switch_group"||!j&&f.caseId!=a.caseId,Re=a.isLocked||f.isLocked||P&&P.isLocked;if(K&&ae>K||pe&&(!Z||ye||Re))return!1;if(f.type!="case_group"&&f.caseId!=a.caseId){var Ce=d?d._height==2:!1,Ae=c?c.leafsCount+1:0;if(k&&Ae>k||Ce&&!Q)return!1}if(f.type=="case_group"&&(f.isDefaultCase||a.isDefaultCase||a.type=="switch_group"&&r==F.PLACEMENT_APPEND))return!1;var Te=!0;return G&&(Te=G(f.node.toJS(),a.node.toJS(),r,P?P.node.toJS():null)),Te}},{key:"move",value:function(f,a,r,d){this._isUsingLegacyReactDomRender||(i._isReorderingTree=Y=!0),this.props.actions.moveItem(f.path,a.path,r)}},{key:"render",value:function(){return C.default.createElement(l,(0,S.default)({},this.props,{onDragStart:this.onDragStart}))}}]),m}(C.Component),p.propTypes={tree:U.default.any.isRequired,actions:U.default.object.isRequired},p},T=function(l){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=(0,M.connect)(function(u){return{dragging:u.dragging,dragStart:u.dragStart,mousePos:u.mousePos}},{setDragStart:W.drag.setDragStart,setDragProgress:W.drag.setDragProgress,setDragEnd:W.drag.setDragEnd},null,{context:x.default})(w(l,p));return s.displayName="ConnectedSortableContainer",s};i.default=T},27041:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(47552)),S=n(e(52690)),o=n(e(86661)),N=n(e(50757)),R=n(e(39314)),L=n(e(99513)),A=n(e(70963)),I=n(e(11780)),y=n(e(39953)),C=n(e(61240)),M=n(e(22611)),b=n(e(79528)),D=e(60755),x=e(88137),F=e(58479),J=e(87401),U=n(e(84098)),W,V,H;function z(l,p){var s=Object.keys(l);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(l);p&&(u=u.filter(function(g){return Object.getOwnPropertyDescriptor(l,g).enumerable})),s.push.apply(s,u)}return s}function $(l){for(var p=1;p<arguments.length;p++){var s=arguments[p]!=null?arguments[p]:{};p%2?z(Object(s),!0).forEach(function(u){(0,O.default)(l,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(s)):z(Object(s)).forEach(function(u){Object.defineProperty(l,u,Object.getOwnPropertyDescriptor(s,u))})}return l}function _(l){var p=Y();return function(){var u=(0,I.default)(l),g;if(p){var m=(0,I.default)(this).constructor;g=Reflect.construct(u,arguments,m)}else g=u.apply(this,arguments);return(0,A.default)(this,g)}}function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=e(95696),T=(W=(0,b.default)("group case_group"),(0,M.default)(V=W(V=(0,J.ConfirmFn)(V=(H=function(l){(0,L.default)(s,l);var p=_(s);function s(u){var g;return(0,S.default)(this,s),g=p.call(this,u),g.childrenClassName=function(){return"case_group--children"},g.renderFooterWrapper=function(){return null},(0,F.useOnPropsChanged)((0,N.default)(g)),g.onPropsChanged(u),g}return(0,o.default)(s,[{key:"onPropsChanged",value:function(g){}},{key:"isDefaultCase",value:function(){return this.props.children1==null}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(g){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(g){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return this.isDefaultCase()?!1:(0,R.default)((0,I.default)(s.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return y.default.createElement("div",{key:"group-header",className:w("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:y.default.createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderValue())}},{key:"renderHeaderLeft",value:function(){if(this.isDefaultCase()){var g=this.props.config.settings.defaultCaseLabel;return g||""}return y.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:(0,R.default)((0,I.default)(s.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?this.renderValue():null}},{key:"canAddGroup",value:function(){return this.isDefaultCase()?!1:(0,R.default)((0,I.default)(s.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return this.isDefaultCase()?!1:(0,R.default)((0,I.default)(s.prototype),"canAddRule",this).call(this)}},{key:"renderValue",value:function(){var g=this.props,m=g.config,E=g.isLocked,f=g.value,a=g.setValue,r=g.id,d=m.settings.immutableValuesMode,c=y.default.createElement(U.default,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:f,valueSrc:"value",valueError:null,config:m,setValue:d?J.dummyFn:a,setValueSrc:J.dummyFn,readonly:d||E,id:r,groupId:null});return y.default.createElement(J.Col,{className:"case_group--value"},c)}},{key:"renderActions",value:function(){var g=this.props,m=g.config,E=g.addGroup,f=g.addRule,a=g.isLocked,r=g.isTrueLocked,d=g.id;return y.default.createElement(x.GroupActions,{config:m,addGroup:E,addRule:f,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:a,isTrueLocked:r,id:d})}},{key:"isEmptyCurrentGroup",value:function(){var g=this.props.value,m=g&&g.size?g.get(0):null,E=m!=null&&(Array.isArray(m)?m.length>0:!0);return(0,R.default)((0,I.default)(s.prototype),"isEmptyCurrentGroup",this).call(this)&&!E}}]),s}(D.BasicGroup),H.propTypes=$($({},D.BasicGroup.propTypes),{},{parentReordableNodesCnt:C.default.number,value:C.default.any,setValue:C.default.func}),H))||V)||V)||V),v=T;i.default=v},60755:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BasicGroup=void 0;var S=n(e(70764)),o=n(e(47552)),N=n(e(52690)),R=n(e(86661)),L=n(e(50757)),A=n(e(99513)),I=n(e(70963)),y=n(e(11780)),C=V(e(39953)),M=n(e(61240)),b=n(e(33604)),D=n(e(22611)),x=n(e(79528)),F=e(39700),J=e(88137),U=e(87401);function W(l){if(typeof WeakMap!="function")return null;var p=new WeakMap,s=new WeakMap;return(W=function(g){return g?s:p})(l)}function V(l,p){if(!p&&l&&l.__esModule)return l;if(l===null||O(l)!=="object"&&typeof l!="function")return{default:l};var s=W(p);if(s&&s.has(l))return s.get(l);var u={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in l)if(m!=="default"&&Object.prototype.hasOwnProperty.call(l,m)){var E=g?Object.getOwnPropertyDescriptor(l,m):null;E&&(E.get||E.set)?Object.defineProperty(u,m,E):u[m]=l[m]}return u.default=l,s&&s.set(l,u),u}function H(l,p){var s=Object.keys(l);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(l);p&&(u=u.filter(function(g){return Object.getOwnPropertyDescriptor(l,g).enumerable})),s.push.apply(s,u)}return s}function z(l){for(var p=1;p<arguments.length;p++){var s=arguments[p]!=null?arguments[p]:{};p%2?H(Object(s),!0).forEach(function(u){(0,o.default)(l,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach(function(u){Object.defineProperty(l,u,Object.getOwnPropertyDescriptor(s,u))})}return l}function $(l){var p=_();return function(){var u=(0,y.default)(l),g;if(p){var m=(0,y.default)(this).constructor;g=Reflect.construct(u,arguments,m)}else g=u.apply(this,arguments);return(0,I.default)(this,g)}}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Y=e(95696),w="topRight",T=function(l){(0,A.default)(s,l);var p=$(s);function s(u){var g;return(0,N.default)(this,s),g=p.call(this,u),g.childrenClassName=function(){return""},g.renderBeforeActions=function(){var m=g.props.config.settings.renderBeforeActions;return m==null?null:typeof m=="function"?C.default.createElement(m,g.props):m},g.renderAfterActions=function(){var m=g.props.config.settings.renderAfterActions;return m==null?null:typeof m=="function"?C.default.createElement(m,g.props):m},g.removeSelf=g.removeSelf.bind((0,L.default)(g)),g.setLock=g.setLock.bind((0,L.default)(g)),g.renderItem=g.renderItem.bind((0,L.default)(g)),g}return(0,R.default)(s,[{key:"isGroupTopPosition",value:function(){return(0,b.default)(this.props.config.settings.groupActionsPosition||w,"top")}},{key:"setLock",value:function(g){this.props.setLock(g)}},{key:"removeSelf",value:function(){var g=this,m=this.props.confirmFn,E=this.props.config.settings,f=E.renderConfirm,a=E.removeGroupConfirmOptions,r=function(){g.props.removeSelf()};a&&!this.isEmptyCurrentGroup()?f(z(z({},a),{},{onOk:r,onCancel:null,confirmFn:m})):r()}},{key:"isEmptyCurrentGroup",value:function(){var g=this.props.children1;return!g||g.size==0||g.size==1&&this.isEmpty(g.first())}},{key:"isEmpty",value:function(g){var m=g.get("type")=="group"||g.get("type")=="rule_group";return m?this.isEmptyGroup(g):this.isEmptyRule(g)}},{key:"isEmptyGroup",value:function(g){var m=g.get("children1");return!m||m.size==0||m.size==1&&this.isEmpty(m.first())}},{key:"isEmptyRule",value:function(g){var m=g.get("properties");return!(m.get("field")!==null&&m.get("operator")!==null&&m.get("value").filter(function(E){return E!==void 0}).size>0)}},{key:"render",value:function(){return C.default.createElement(C.default.Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}},{key:"showNot",value:function(){var g=this.props.config;return g.settings.showNot}},{key:"showConjs",value:function(){var g=this.props,m=g.conjunctionOptions,E=g.children1,f=g.config,a=Object.keys(m).length;return a>1||this.showNot()}},{key:"isOneChild",value:function(){var g=this.props.children1;return g?g.size<2:!0}},{key:"renderChildrenWrapper",value:function(){var g=this.props.children1;return g&&C.default.createElement("div",{key:"group-children",className:Y("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var g=this.isGroupTopPosition();return C.default.createElement("div",{key:"group-header",className:Y("group--header",this.isOneChild()?"one--child":"")},this.renderHeader(),g&&this.renderBeforeActions(),g&&this.renderActions(),g&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){var g=this.isGroupTopPosition();return!g&&C.default.createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var g=this.props,m=g.config,E=g.addRule,f=g.addGroup,a=g.isLocked,r=g.isTrueLocked,d=g.id;return C.default.createElement(J.GroupActions,{config:m,addRule:E,addGroup:f,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:a,isTrueLocked:r,id:d})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var g=this.props.config.settings.maxNumberOfRules,m=this.props.totalRulesCnt;return g?m<g:!0}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var g=this.props.children1;return g?g.map(this.renderItem).toList():null}},{key:"renderItem",value:function(g){var m=this.props,E=m.config,f=m.actions,a=m.onDragStart,r=m.isLocked,d=g.get("type")=="group"&&g.getIn(["properties","field"])!=null,c=d?"rule_group":g.get("type");return C.default.createElement(F.Item,(0,S.default)({},this.extraPropsForItem(g),{key:g.get("id"),id:g.get("id"),groupId:m.id,path:g.get("path"),type:c,properties:g.get("properties"),config:E,actions:f,children1:g.get("children1"),reordableNodesCnt:this.reordableNodesCntForItem(g),totalRulesCnt:this.totalRulesCntForItem(g),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:a,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:r}))}},{key:"extraPropsForItem",value:function(g){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(g){return this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(g){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var g=this.props,m=g.config,E=g.isRoot,f=g.isLocked,a=this.reordableNodesCnt();return m.settings.canReorder&&!E&&a>1&&!f}},{key:"renderDrag",value:function(){var g=this.props.handleDraggerMouseDown,m=this.showDragIcon()&&C.default.createElement("span",{key:"group-drag-icon",className:"qb-drag-handler group--drag-handler",onMouseDown:g},C.default.createElement(U.DragIcon,null)," ");return m}},{key:"conjunctionOptions",value:function(){var g=this.props.conjunctionOptions;return g}},{key:"renderConjs",value:function(){var g=this.props,m=g.config,E=g.children1,f=g.id,a=g.selectedConjunction,r=g.setConjunction,d=g.not,c=g.setNot,P=g.isLocked,G=m.settings,q=G.immutableGroupsMode,Z=G.renderConjs,j=G.showNot,K=G.notLabel,k=this.conjunctionOptions();if(!this.showConjs()||!E||!E.size)return null;var Q={disabled:this.isOneChild(),readonly:q||P,selectedConjunction:a,setConjunction:q?U.dummyFn:r,conjunctionOptions:k,config:m,not:d||!1,id:f,setNot:q?U.dummyFn:c,notLabel:K,showNot:this.showNot(),isLocked:P};return C.default.createElement(Z,Q)}},{key:"renderHeader",value:function(){return C.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}}]),s}(C.PureComponent);i.BasicGroup=T,T.propTypes={reordableNodesCnt:M.default.number,conjunctionOptions:M.default.object.isRequired,allowFurtherNesting:M.default.bool.isRequired,isRoot:M.default.bool.isRequired,not:M.default.bool,selectedConjunction:M.default.string,config:M.default.object.isRequired,id:M.default.string.isRequired,groupId:M.default.string,path:M.default.any,children1:M.default.any,isDraggingMe:M.default.bool,isDraggingTempo:M.default.bool,isLocked:M.default.bool,isTrueLocked:M.default.bool,handleDraggerMouseDown:M.default.func,onDragStart:M.default.func,addRule:M.default.func.isRequired,addGroup:M.default.func.isRequired,removeSelf:M.default.func.isRequired,setConjunction:M.default.func.isRequired,setNot:M.default.func.isRequired,setLock:M.default.func.isRequired,actions:M.default.object.isRequired};var v=(0,D.default)((0,x.default)("group")((0,U.ConfirmFn)(T)));i.default=v},88137:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.GroupActions=void 0;var S=n(e(52690)),o=n(e(86661)),N=n(e(99513)),R=n(e(70963)),L=n(e(11780)),A=y(e(39953));function I(F){if(typeof WeakMap!="function")return null;var J=new WeakMap,U=new WeakMap;return(I=function(V){return V?U:J})(F)}function y(F,J){if(!J&&F&&F.__esModule)return F;if(F===null||O(F)!=="object"&&typeof F!="function")return{default:F};var U=I(J);if(U&&U.has(F))return U.get(F);var W={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in F)if(H!=="default"&&Object.prototype.hasOwnProperty.call(F,H)){var z=V?Object.getOwnPropertyDescriptor(F,H):null;z&&(z.get||z.set)?Object.defineProperty(W,H,z):W[H]=F[H]}return W.default=F,U&&U.set(F,W),W}function C(F){var J=M();return function(){var W=(0,L.default)(F),V;if(J){var H=(0,L.default)(this).constructor;V=Reflect.construct(W,arguments,H)}else V=W.apply(this,arguments);return(0,R.default)(this,V)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},D="topRight",x=function(F){(0,N.default)(U,F);var J=C(U);function U(){return(0,S.default)(this,U),J.apply(this,arguments)}return(0,o.default)(U,[{key:"render",value:function(){var V=this.props,H=V.config,z=V.addRule,$=V.addGroup,_=V.removeSelf,Y=V.setLock,w=V.isLocked,T=V.isTrueLocked,v=V.id,l=V.canAddGroup,p=V.canAddRule,s=V.canDeleteGroup,u=H.settings,g=u.immutableGroupsMode,m=u.addRuleLabel,E=u.addGroupLabel,f=u.delGroupLabel,a=u.groupActionsPosition,r=u.renderButton,d=u.renderSwitch,c=u.renderButtonGroup,P=u.lockLabel,G=u.lockedLabel,q=u.showLock,Z=u.canDeleteLocked,j=b[a||D],K=q&&!(w&&!T)&&A.default.createElement(d,{type:"lock",id:v,value:w,setValue:Y,label:P,checkedLabel:G,config:H}),k=!g&&p&&!w&&A.default.createElement(r,{type:"addRule",onClick:z,label:m,readonly:w,config:H}),Q=!g&&l&&!w&&A.default.createElement(r,{type:"addGroup",onClick:$,label:E,readonly:w,config:H}),ae=!g&&s&&(!w||w&&Z)&&A.default.createElement(r,{type:"delGroup",onClick:_,label:f,config:H});return A.default.createElement("div",{className:"group--actions ".concat(j)},A.default.createElement(c,{config:H},K,k,Q,ae))}}]),U}(A.PureComponent);i.GroupActions=x},39700:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.Item=void 0;var S=n(e(73045)),o=n(e(52690)),N=n(e(86661)),R=n(e(99513)),L=n(e(70963)),A=n(e(11780)),I=n(e(70764)),y=n(e(47552)),C=H(e(39953)),M=n(e(61240)),b=n(e(23706)),D=n(e(60755)),x=n(e(3384)),F=n(e(52156)),J=n(e(90138)),U=n(e(27041)),W=["type"];function V(p){if(typeof WeakMap!="function")return null;var s=new WeakMap,u=new WeakMap;return(V=function(m){return m?u:s})(p)}function H(p,s){if(!s&&p&&p.__esModule)return p;if(p===null||O(p)!=="object"&&typeof p!="function")return{default:p};var u=V(s);if(u&&u.has(p))return u.get(p);var g={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in p)if(E!=="default"&&Object.prototype.hasOwnProperty.call(p,E)){var f=m?Object.getOwnPropertyDescriptor(p,E):null;f&&(f.get||f.set)?Object.defineProperty(g,E,f):g[E]=p[E]}return g.default=p,u&&u.set(p,g),g}function z(p){var s=$();return function(){var g=(0,A.default)(p),m;if(s){var E=(0,A.default)(this).constructor;m=Reflect.construct(g,arguments,E)}else m=g.apply(this,arguments);return(0,L.default)(this,m)}}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(p,s){var u=Object.keys(p);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(p);s&&(g=g.filter(function(m){return Object.getOwnPropertyDescriptor(p,m).enumerable})),u.push.apply(u,g)}return u}function Y(p){for(var s=1;s<arguments.length;s++){var u=arguments[s]!=null?arguments[s]:{};s%2?_(Object(u),!0).forEach(function(g){(0,y.default)(p,g,u[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(u)):_(Object(u)).forEach(function(g){Object.defineProperty(p,g,Object.getOwnPropertyDescriptor(u,g))})}return p}var w=["rule","group","rule_group","switch_group","case_group"],T=function(s){var u=s.properties.toObject(),g=Y({},u);return s.isParentLocked&&(g.isLocked=!0),u.isLocked&&(g.isTrueLocked=!0),g},v={rule:function(s){return C.default.createElement(b.default,(0,I.default)({},T(s),{id:s.id,groupId:s.groupId,path:s.path,actions:s.actions,reordableNodesCnt:s.reordableNodesCnt,totalRulesCnt:s.totalRulesCnt,config:s.config,onDragStart:s.onDragStart,isDraggingTempo:s.isDraggingTempo,parentField:s.parentField,parentReordableNodesCnt:s.parentReordableNodesCnt}))},group:function(s){return C.default.createElement(D.default,(0,I.default)({},T(s),{id:s.id,groupId:s.groupId,path:s.path,actions:s.actions,config:s.config,reordableNodesCnt:s.reordableNodesCnt,totalRulesCnt:s.totalRulesCnt,onDragStart:s.onDragStart,isDraggingTempo:s.isDraggingTempo,children1:s.children1,parentField:null,parentReordableNodesCnt:s.parentReordableNodesCnt}))},rule_group:function(s){return C.default.createElement(x.default,(0,I.default)({},T(s),{id:s.id,groupId:s.groupId,path:s.path,actions:s.actions,config:s.config,reordableNodesCnt:s.reordableNodesCnt,totalRulesCnt:s.totalRulesCnt,onDragStart:s.onDragStart,isDraggingTempo:s.isDraggingTempo,children1:s.children1,parentField:s.parentField,parentReordableNodesCnt:s.parentReordableNodesCnt}))},rule_group_ext:function(s){return C.default.createElement(F.default,(0,I.default)({},T(s),{id:s.id,groupId:s.groupId,path:s.path,actions:s.actions,config:s.config,reordableNodesCnt:s.reordableNodesCnt,totalRulesCnt:s.totalRulesCnt,onDragStart:s.onDragStart,isDraggingTempo:s.isDraggingTempo,children1:s.children1,parentField:s.parentField,parentReordableNodesCnt:s.parentReordableNodesCnt}))},switch_group:function(s){return C.default.createElement(J.default,(0,I.default)({},T(s),{id:s.id,groupId:s.groupId,path:s.path,actions:s.actions,config:s.config,reordableNodesCnt:s.reordableNodesCnt,totalRulesCnt:s.totalRulesCnt,onDragStart:s.onDragStart,isDraggingTempo:s.isDraggingTempo,children1:s.children1,parentField:null,parentReordableNodesCnt:s.parentReordableNodesCnt}))},case_group:function(s){return C.default.createElement(U.default,(0,I.default)({},T(s),{id:s.id,groupId:s.groupId,path:s.path,actions:s.actions,config:s.config,reordableNodesCnt:s.reordableNodesCnt,totalRulesCnt:s.totalRulesCnt,onDragStart:s.onDragStart,isDraggingTempo:s.isDraggingTempo,children1:s.children1,parentField:null,parentReordableNodesCnt:s.parentReordableNodesCnt}))}},l=function(p){(0,R.default)(u,p);var s=z(u);function u(){return(0,o.default)(this,u),s.apply(this,arguments)}return(0,N.default)(u,[{key:"render",value:function(){var m=this.props,E=m.type,f=(0,S.default)(m,W),a=f.properties.get("mode"),r=a=="array"?"_ext":"",d=f.config.settings.renderItem,c=v[E+r];return d?d(Y(Y({},f),{},{type:E,itemComponent:c})):c?c(f):null}}]),u}(C.PureComponent);i.Item=l,l.propTypes={config:M.default.object.isRequired,id:M.default.string.isRequired,groupId:M.default.string,type:M.default.oneOf(w).isRequired,path:M.default.any.isRequired,properties:M.default.any.isRequired,children1:M.default.any,actions:M.default.object.isRequired,reordableNodesCnt:M.default.number,onDragStart:M.default.func,parentField:M.default.string,isDraggingTempo:M.default.bool,isParentLocked:M.default.bool}},23706:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(47552)),o=n(e(52690)),N=n(e(86661)),R=n(e(50757)),L=n(e(99513)),A=n(e(70963)),I=n(e(11780)),y=w(e(39953)),C=n(e(61240)),M=n(e(32548)),b=n(e(79528)),D=n(e(20215)),x=n(e(15693)),F=n(e(84098)),J=n(e(6103)),U=e(58560),W=e(1694),V=e(58479),H=e(87401),z,$,_;function Y(m){if(typeof WeakMap!="function")return null;var E=new WeakMap,f=new WeakMap;return(Y=function(r){return r?f:E})(m)}function w(m,E){if(!E&&m&&m.__esModule)return m;if(m===null||O(m)!=="object"&&typeof m!="function")return{default:m};var f=Y(E);if(f&&f.has(m))return f.get(m);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in m)if(d!=="default"&&Object.prototype.hasOwnProperty.call(m,d)){var c=r?Object.getOwnPropertyDescriptor(m,d):null;c&&(c.get||c.set)?Object.defineProperty(a,d,c):a[d]=m[d]}return a.default=m,f&&f.set(m,a),a}function T(m,E){var f=Object.keys(m);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(m);E&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(m,r).enumerable})),f.push.apply(f,a)}return f}function v(m){for(var E=1;E<arguments.length;E++){var f=arguments[E]!=null?arguments[E]:{};E%2?T(Object(f),!0).forEach(function(a){(0,S.default)(m,a,f[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(f)):T(Object(f)).forEach(function(a){Object.defineProperty(m,a,Object.getOwnPropertyDescriptor(f,a))})}return m}function l(m){var E=p();return function(){var a=(0,I.default)(m),r;if(E){var d=(0,I.default)(this).constructor;r=Reflect.construct(a,arguments,d)}else r=a.apply(this,arguments);return(0,A.default)(this,r)}}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var s=e(95696),u=(z=(0,b.default)("rule"),(0,M.default)($=z($=(0,H.ConfirmFn)($=(_=function(m){(0,L.default)(f,m);var E=l(f);function f(a){var r;return(0,o.default)(this,f),r=E.call(this,a),(0,V.useOnPropsChanged)((0,R.default)(r)),r.removeSelf=r.removeSelf.bind((0,R.default)(r)),r.setLock=r.setLock.bind((0,R.default)(r)),r.onPropsChanged(a),r}return(0,N.default)(f,[{key:"onPropsChanged",value:function(r){var d=this.props,c=["selectedField","selectedOperator","config","reordableNodesCnt","isLocked"],P=!this.meta||c.map(function(G){return r[G]!==d[G]}).filter(function(G){return G}).length>0;P&&(this.meta=this.getMeta(r))}},{key:"getMeta",value:function(r){var d=r.selectedField,c=r.selectedOperator,P=r.config,G=r.reordableNodesCnt,q=r.isLocked,Z=(0,W.getFieldPathLabels)(d,P),j=(0,U.getFieldConfig)(P,d),K=j&&j.type=="!struct",k=d&&c&&!K,Q=(0,U.getOperatorConfig)(P,c,d),ae=Q&&Q.options!=null,oe=(0,U.getFieldWidgetConfig)(P,d,c)||{},le=oe.hideOperator,ue=P.settings.canReorder&&G>1&&!q,he=d&&!le,pe=d&&le&&oe.operatorInlineLabel,ye=k,Re=k&&ae;return{selectedFieldPartsLabels:Z,selectedFieldWidgetConfig:oe,showDragIcon:ue,showOperator:he,showOperatorLabel:pe,showWidget:ye,showOperatorOptions:Re}}},{key:"setLock",value:function(r){this.props.setLock(r)}},{key:"removeSelf",value:function(){var r=this,d=this.props.confirmFn,c=this.props.config.settings,P=c.renderConfirm,G=c.removeRuleConfirmOptions,q=function(){r.props.removeSelf()};G&&!this.isEmptyCurrentRule()?P(v(v({},G),{},{onOk:q,onCancel:null,confirmFn:d})):q()}},{key:"isEmptyCurrentRule",value:function(){return!(this.props.selectedField!==null&&this.props.selectedOperator!==null&&this.props.value.filter(function(r){return r!==void 0}).size>0)}},{key:"renderField",value:function(){var r=this.props,d=r.config,c=r.isLocked,P=d.settings.immutableFieldsMode;return y.default.createElement(x.default,{key:"field",classname:"rule--field",config:d,selectedField:this.props.selectedField,setField:P?H.dummyFn:this.props.setField,parentField:this.props.parentField,readonly:P||c,id:this.props.id,groupId:this.props.groupId})}},{key:"renderOperator",value:function(){var r=this.props,d=r.config,c=r.isLocked,P=this.meta,G=P.selectedFieldPartsLabels,q=P.selectedFieldWidgetConfig,Z=P.showOperator,j=P.showOperatorLabel,K=d.settings.immutableOpsMode;return y.default.createElement(D.default,{key:"operator",config:d,selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,setOperator:K?H.dummyFn:this.props.setOperator,selectedFieldPartsLabels:G,showOperator:Z,showOperatorLabel:j,selectedFieldWidgetConfig:q,readonly:K||c,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var r=this.props,d=r.config,c=r.valueError,P=r.isLocked,G=this.meta.showWidget,q=d.settings.immutableValuesMode;if(!G)return null;var Z=y.default.createElement(F.default,{key:"values",field:this.props.selectedField,parentField:this.props.parentField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:this.props.valueSrc,asyncListValues:this.props.asyncListValues,valueError:c,config:d,setValue:q?H.dummyFn:this.props.setValue,setValueSrc:q?H.dummyFn:this.props.setValueSrc,readonly:q||P,id:this.props.id,groupId:this.props.groupId});return y.default.createElement(H.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},Z)}},{key:"renderOperatorOptions",value:function(){var r=this.props.config,d=this.meta.showOperatorOptions,c=r.settings,P=c.immutableOpsMode,G=c.immutableValuesMode;if(!d)return null;var q=y.default.createElement(J.default,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:P?H.dummyFn:this.props.setOperatorOption,config:r,readonly:G});return y.default.createElement(H.Col,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},q)}},{key:"renderBeforeWidget",value:function(){var r=this.props.config,d=r.settings.renderBeforeWidget;return d&&y.default.createElement(H.Col,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},typeof d=="function"?d(this.props):d)}},{key:"renderAfterWidget",value:function(){var r=this.props.config,d=r.settings.renderAfterWidget;return d&&y.default.createElement(H.Col,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},typeof d=="function"?d(this.props):d)}},{key:"renderError",value:function(){var r=this.props,d=r.config,c=r.valueError,P=d.settings,G=P.renderRuleError,q=P.showErrorMessage,Z=c&&c.toArray().filter(function(j){return!!j}).shift()||null;return q&&Z&&y.default.createElement("div",{className:"rule--error"},G?G({error:Z}):Z)}},{key:"renderDrag",value:function(){var r=this.meta.showDragIcon;return r&&y.default.createElement("span",{key:"rule-drag-icon",className:"qb-drag-handler rule--drag-handler",onMouseDown:this.props.handleDraggerMouseDown},y.default.createElement(H.DragIcon,null)," ")}},{key:"renderDel",value:function(){var r=this.props,d=r.config,c=r.isLocked,P=d.settings,G=P.deleteLabel,q=P.immutableGroupsMode,Z=P.renderButton,j=P.canDeleteLocked;return!q&&(!c||c&&j)&&y.default.createElement(Z,{type:"delRule",onClick:this.removeSelf,label:G,config:d})}},{key:"renderLock",value:function(){var r=this.props,d=r.config,c=r.isLocked,P=r.isTrueLocked,G=r.id,q=d.settings,Z=q.lockLabel,j=q.lockedLabel,K=q.showLock,k=q.renderSwitch;return K&&!(c&&!P)&&y.default.createElement(k,{type:"lock",id:G,value:c,setValue:this.setLock,label:Z,checkedLabel:j,hideLabel:!0,config:d})}},{key:"render",value:function(){var r=this.meta,d=r.showOperatorOptions,c=r.selectedFieldWidgetConfig,P=this.props,G=P.valueSrc,q=P.value,Z=P.config,j=G.first()=="value"&&!d&&q.size==1&&c.fullWidth,K=Z.settings.renderButtonGroup,k=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],Q=y.default.createElement("div",{key:"rule-body",className:s("rule--body",j&&"can--shrink--value")},k),ae=this.renderError(),oe=this.renderDrag(),le=this.renderLock(),ue=this.renderDel();return y.default.createElement(y.default.Fragment,null,oe,y.default.createElement("div",{className:"rule--body--wrapper"},Q,ae),y.default.createElement("div",{className:"rule--header"},y.default.createElement(K,{config:Z},le,ue)))}}]),f}(y.PureComponent),_.propTypes={id:C.default.string.isRequired,groupId:C.default.string,selectedField:C.default.string,selectedOperator:C.default.string,operatorOptions:C.default.object,config:C.default.object.isRequired,value:C.default.any,valueSrc:C.default.any,asyncListValues:C.default.array,isDraggingMe:C.default.bool,isDraggingTempo:C.default.bool,parentField:C.default.string,valueError:C.default.any,isLocked:C.default.bool,isTrueLocked:C.default.bool,handleDraggerMouseDown:C.default.func,setField:C.default.func,setOperator:C.default.func,setOperatorOption:C.default.func,setLock:C.default.func,removeSelf:C.default.func,setValue:C.default.func,setValueSrc:C.default.func,reordableNodesCnt:C.default.number},_))||$)||$)||$),g=u;i.default=g},3384:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(47552)),S=n(e(52690)),o=n(e(86661)),N=n(e(50757)),R=n(e(39314)),L=n(e(99513)),A=n(e(70963)),I=n(e(11780)),y=n(e(39953)),C=n(e(61240)),M=n(e(22611)),b=n(e(79528)),D=e(60755),x=e(35045),F=n(e(15693)),J=e(58479),U=e(87401),W,V,H;function z(v,l){var p=Object.keys(v);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(v);l&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(v,u).enumerable})),p.push.apply(p,s)}return p}function $(v){for(var l=1;l<arguments.length;l++){var p=arguments[l]!=null?arguments[l]:{};l%2?z(Object(p),!0).forEach(function(s){(0,O.default)(v,s,p[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(p)):z(Object(p)).forEach(function(s){Object.defineProperty(v,s,Object.getOwnPropertyDescriptor(p,s))})}return v}function _(v){var l=Y();return function(){var s=(0,I.default)(v),u;if(l){var g=(0,I.default)(this).constructor;u=Reflect.construct(s,arguments,g)}else u=s.apply(this,arguments);return(0,A.default)(this,u)}}function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=(W=(0,b.default)("group rule_group"),(0,M.default)(V=W(V=(0,U.ConfirmFn)(V=(H=function(v){(0,L.default)(p,v);var l=_(p);function p(s){var u;return(0,S.default)(this,p),u=l.call(this,s),u.childrenClassName=function(){return"rule_group--children"},u.renderHeaderWrapper=function(){return null},u.renderFooterWrapper=function(){return null},u.renderConjs=function(){return null},u.canAddGroup=function(){return!1},u.canAddRule=function(){return!0},u.canDeleteGroup=function(){return!1},(0,J.useOnPropsChanged)((0,N.default)(u)),u.onPropsChanged(s),u}return(0,o.default)(p,[{key:"onPropsChanged",value:function(u){}},{key:"reordableNodesCntForItem",value:function(u){if(this.props.isLocked)return 0;var g=this.props.children1;return g.size}},{key:"renderChildrenWrapper",value:function(){return y.default.createElement(y.default.Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),(0,R.default)((0,I.default)(p.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var u=this.props,g=u.config,m=u.selectedField,E=u.setField,f=u.parentField,a=u.id,r=u.groupId,d=u.isLocked,c=g.settings.immutableFieldsMode;return y.default.createElement(F.default,{key:"field",classname:"group--field",config:g,selectedField:m,setField:E,parentField:f,readonly:c||d,id:a,groupId:r})}},{key:"renderActions",value:function(){var u=this.props,g=u.config,m=u.addRule,E=u.isLocked,f=u.isTrueLocked,a=u.id;return y.default.createElement(x.RuleGroupActions,{config:g,addRule:m,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:E,isTrueLocked:f,id:a})}},{key:"extraPropsForItem",value:function(u){return{parentField:this.props.selectedField}}}]),p}(D.BasicGroup),H.propTypes=$($({},D.BasicGroup.propTypes),{},{selectedField:C.default.string,parentField:C.default.string,setField:C.default.func}),H))||V)||V)||V),T=w;i.default=T},35045:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.RuleGroupActions=void 0;var S=n(e(52690)),o=n(e(86661)),N=n(e(99513)),R=n(e(70963)),L=n(e(11780)),A=y(e(39953));function I(D){if(typeof WeakMap!="function")return null;var x=new WeakMap,F=new WeakMap;return(I=function(U){return U?F:x})(D)}function y(D,x){if(!x&&D&&D.__esModule)return D;if(D===null||O(D)!=="object"&&typeof D!="function")return{default:D};var F=I(x);if(F&&F.has(D))return F.get(D);var J={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in D)if(W!=="default"&&Object.prototype.hasOwnProperty.call(D,W)){var V=U?Object.getOwnPropertyDescriptor(D,W):null;V&&(V.get||V.set)?Object.defineProperty(J,W,V):J[W]=D[W]}return J.default=D,F&&F.set(D,J),J}function C(D){var x=M();return function(){var J=(0,L.default)(D),U;if(x){var W=(0,L.default)(this).constructor;U=Reflect.construct(J,arguments,W)}else U=J.apply(this,arguments);return(0,R.default)(this,U)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b=function(D){(0,N.default)(F,D);var x=C(F);function F(){return(0,S.default)(this,F),x.apply(this,arguments)}return(0,o.default)(F,[{key:"render",value:function(){var U=this.props,W=U.config,V=U.addRule,H=U.canAddRule,z=U.canDeleteGroup,$=U.removeSelf,_=U.setLock,Y=U.isLocked,w=U.isTrueLocked,T=U.id,v=W.settings,l=v.immutableGroupsMode,p=v.addRuleLabel,s=v.delGroupLabel,u=v.renderButton,g=v.renderSwitch,m=v.renderButtonGroup,E=v.lockLabel,f=v.lockedLabel,a=v.showLock,r=v.canDeleteLocked,d=a&&!(Y&&!w)&&A.default.createElement(g,{type:"lock",id:T,value:Y,setValue:_,label:E,checkedLabel:f,hideLabel:!0,config:W}),c=!l&&H&&!Y&&A.default.createElement(u,{type:"addRuleGroup",onClick:V,label:p,readonly:Y,config:W}),P=!l&&z&&(!Y||Y&&r)&&A.default.createElement(u,{type:"delRuleGroup",onClick:$,label:s,config:W});return A.default.createElement("div",{className:"group--actions"},A.default.createElement(m,{config:W},d,c,P))}}]),F}(A.PureComponent);i.RuleGroupActions=b},52156:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(47552)),S=n(e(52690)),o=n(e(86661)),N=n(e(50757)),R=n(e(39314)),L=n(e(99513)),A=n(e(70963)),I=n(e(11780)),y=n(e(39953)),C=n(e(61240)),M=n(e(22611)),b=n(e(79528)),D=e(60755),x=e(8369),F=n(e(15693)),J=n(e(20215)),U=e(58479),W=e(87401),V=e(58560),H=n(e(84098)),z,$,_;function Y(E,f){var a=Object.keys(E);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(E);f&&(r=r.filter(function(d){return Object.getOwnPropertyDescriptor(E,d).enumerable})),a.push.apply(a,r)}return a}function w(E){for(var f=1;f<arguments.length;f++){var a=arguments[f]!=null?arguments[f]:{};f%2?Y(Object(a),!0).forEach(function(r){(0,O.default)(E,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach(function(r){Object.defineProperty(E,r,Object.getOwnPropertyDescriptor(a,r))})}return E}function T(E,f){var a=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(!a){if(Array.isArray(E)||(a=v(E))||f&&E&&typeof E.length=="number"){a&&(E=a);var r=0,d=function(){};return{s:d,n:function(){return r>=E.length?{done:!0}:{done:!1,value:E[r++]}},e:function(Z){throw Z},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,P=!1,G;return{s:function(){a=a.call(E)},n:function(){var Z=a.next();return c=Z.done,Z},e:function(Z){P=!0,G=Z},f:function(){try{!c&&a.return!=null&&a.return()}finally{if(P)throw G}}}}function v(E,f){if(E){if(typeof E=="string")return l(E,f);var a=Object.prototype.toString.call(E).slice(8,-1);if(a==="Object"&&E.constructor&&(a=E.constructor.name),a==="Map"||a==="Set")return Array.from(E);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(E,f)}}function l(E,f){(f==null||f>E.length)&&(f=E.length);for(var a=0,r=new Array(f);a<f;a++)r[a]=E[a];return r}function p(E){var f=s();return function(){var r=(0,I.default)(E),d;if(f){var c=(0,I.default)(this).constructor;d=Reflect.construct(r,arguments,c)}else d=r.apply(this,arguments);return(0,A.default)(this,d)}}function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var u=e(95696),g=(z=(0,b.default)("group rule_group_ext"),(0,M.default)($=z($=(0,W.ConfirmFn)($=(_=function(E){(0,L.default)(a,E);var f=p(a);function a(r){var d;return(0,S.default)(this,a),d=f.call(this,r),d.childrenClassName=function(){return"rule_group_ext--children"},d.renderFooterWrapper=function(){return null},d.canAddGroup=function(){return!1},d.canAddRule=function(){return!0},d.canDeleteGroup=function(){return!0},(0,U.useOnPropsChanged)((0,N.default)(d)),d.onPropsChanged(r),d}return(0,o.default)(a,[{key:"onPropsChanged",value:function(d){}},{key:"renderHeaderWrapper",value:function(){return y.default.createElement("div",{key:"group-header",className:u("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return y.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return y.default.createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget())}},{key:"showNot",value:function(){var d=this.props,c=d.config,P=d.selectedField,G=d.selectedOperator,q=(0,V.getFieldConfig)(c,P)||{};return q.showNot!=null?q.showNot:c.settings.showNot}},{key:"conjunctionOptions",value:function(){var d=this.props,c=d.config,P=d.selectedField,G=d.selectedOperator,q=(0,V.getFieldConfig)(c,P)||{},Z=(0,R.default)((0,I.default)(a.prototype),"conjunctionOptions",this).call(this);if(q.conjunctions){var j={},K=T(q.conjunctions),k;try{for(K.s();!(k=K.n()).done;){var Q=k.value;j[Q]=Z[Q]}}catch(ae){K.e(ae)}finally{K.f()}Z=j}return Z}},{key:"renderField",value:function(){var d=this.props,c=d.config,P=d.selectedField,G=d.setField,q=d.parentField,Z=d.id,j=d.groupId,K=d.isLocked,k=c.settings.immutableFieldsMode;return y.default.createElement(F.default,{key:"field",classname:"rule--field",config:c,selectedField:P,setField:G,parentField:q,readonly:k||K,id:Z,groupId:j})}},{key:"renderOperator",value:function(){var d=this.props,c=d.config,P=d.selectedField,G=d.selectedOperator,q=d.setField,Z=d.setOperator,j=d.isLocked,K=c.settings.immutableFieldsMode,k=(0,V.getFieldWidgetConfig)(c,P,G)||{},Q=k.hideOperator,ae=P&&Q&&k.operatorInlineLabel,oe=P&&!Q;return y.default.createElement(J.default,{key:"operator",classname:"group--operator",config:c,selectedField:P,selectedOperator:G,setField:q,setOperator:Z,selectedFieldPartsLabels:["group"],showOperator:oe,showOperatorLabel:ae,selectedFieldWidgetConfig:k,readonly:K||j,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var d=this.props,c=d.config,P=d.selectedField,G=d.selectedOperator,q=d.isLocked,Z=c.settings.immutableValuesMode,j=P&&G,K=j;if(!K)return null;var k=y.default.createElement(H.default,{key:"values",isForRuleGruop:!0,field:this.props.selectedField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:"value",valueError:null,config:c,setValue:Z?W.dummyFn:this.props.setValue,setValueSrc:W.dummyFn,readonly:Z||q,id:this.props.id,groupId:this.props.groupId});return y.default.createElement(W.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},k)}},{key:"renderActions",value:function(){var d=this.props,c=d.config,P=d.addRule,G=d.isLocked,q=d.isTrueLocked,Z=d.id;return y.default.createElement(x.RuleGroupExtActions,{config:c,addRule:P,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:G,isTrueLocked:q,id:Z})}},{key:"reordableNodesCntForItem",value:function(d){if(this.props.isLocked)return 0;var c=this.props.children1;return c.size}},{key:"extraPropsForItem",value:function(d){return{parentField:this.props.selectedField}}}]),a}(D.BasicGroup),_.propTypes=w(w({},D.BasicGroup.propTypes),{},{selectedField:C.default.string,selectedOperator:C.default.string,value:C.default.any,parentField:C.default.string,setField:C.default.func,setOperator:C.default.func,setValue:C.default.func}),_))||$)||$)||$),m=g;i.default=m},8369:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.RuleGroupExtActions=void 0;var S=n(e(52690)),o=n(e(86661)),N=n(e(99513)),R=n(e(70963)),L=n(e(11780)),A=y(e(39953));function I(D){if(typeof WeakMap!="function")return null;var x=new WeakMap,F=new WeakMap;return(I=function(U){return U?F:x})(D)}function y(D,x){if(!x&&D&&D.__esModule)return D;if(D===null||O(D)!=="object"&&typeof D!="function")return{default:D};var F=I(x);if(F&&F.has(D))return F.get(D);var J={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in D)if(W!=="default"&&Object.prototype.hasOwnProperty.call(D,W)){var V=U?Object.getOwnPropertyDescriptor(D,W):null;V&&(V.get||V.set)?Object.defineProperty(J,W,V):J[W]=D[W]}return J.default=D,F&&F.set(D,J),J}function C(D){var x=M();return function(){var J=(0,L.default)(D),U;if(x){var W=(0,L.default)(this).constructor;U=Reflect.construct(J,arguments,W)}else U=J.apply(this,arguments);return(0,R.default)(this,U)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b=function(D){(0,N.default)(F,D);var x=C(F);function F(){return(0,S.default)(this,F),x.apply(this,arguments)}return(0,o.default)(F,[{key:"render",value:function(){var U=this.props,W=U.config,V=U.addRule,H=U.canAddRule,z=U.canDeleteGroup,$=U.removeSelf,_=U.setLock,Y=U.isLocked,w=U.isTrueLocked,T=U.id,v=W.settings,l=v.immutableGroupsMode,p=v.addSubRuleLabel,s=v.delGroupLabel,u=v.renderButton,g=v.renderSwitch,m=v.renderButtonGroup,E=v.lockLabel,f=v.lockedLabel,a=v.showLock,r=v.canDeleteLocked,d=a&&!(Y&&!w)&&A.default.createElement(g,{type:"lock",id:T,value:Y,setValue:_,label:E,checkedLabel:f,config:W}),c=!l&&H&&!Y&&A.default.createElement(u,{type:"addRuleGroupExt",onClick:V,label:p,readonly:Y,config:W}),P=!l&&z&&(!Y||Y&&r)&&A.default.createElement(u,{type:"delRuleGroup",onClick:$,label:s,config:W});return A.default.createElement("div",{className:"group--actions group--actions--tr"},A.default.createElement(m,{config:W},d,c,P))}}]),F}(A.PureComponent);i.RuleGroupExtActions=b},90138:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(47552)),S=n(e(52690)),o=n(e(86661)),N=n(e(50757)),R=n(e(99513)),L=n(e(70963)),A=n(e(11780)),I=n(e(39953)),y=n(e(61240)),C=n(e(22611)),M=n(e(79528)),b=e(60755),D=e(99168),x=e(58479),F=e(87401),J=e(89479),U,W,V;function H(v,l){var p=Object.keys(v);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(v);l&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(v,u).enumerable})),p.push.apply(p,s)}return p}function z(v){for(var l=1;l<arguments.length;l++){var p=arguments[l]!=null?arguments[l]:{};l%2?H(Object(p),!0).forEach(function(s){(0,O.default)(v,s,p[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(p)):H(Object(p)).forEach(function(s){Object.defineProperty(v,s,Object.getOwnPropertyDescriptor(p,s))})}return v}function $(v){var l=_();return function(){var s=(0,A.default)(v),u;if(l){var g=(0,A.default)(this).constructor;u=Reflect.construct(s,arguments,g)}else u=s.apply(this,arguments);return(0,L.default)(this,u)}}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Y=e(95696),w=(U=(0,M.default)("group switch_group"),(0,C.default)(W=U(W=(0,F.ConfirmFn)(W=(V=function(v){(0,R.default)(p,v);var l=$(p);function p(s){var u;return(0,S.default)(this,p),u=l.call(this,s),u.childrenClassName=function(){return"switch_group--children"},u.renderFooterWrapper=function(){return null},u.hasDefaultCase=function(){return u.props.children1.size&&u.props.children1.filter(function(g){return g.get("children1")==null}).size>0},(0,x.useOnPropsChanged)((0,N.default)(u)),u.onPropsChanged(s),u}return(0,o.default)(p,[{key:"onPropsChanged",value:function(u){}},{key:"canAddGroup",value:function(){var u=this.props.config.settings.maxNumberOfCases,g=this.props.children1.size;return u?g<u:!0}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var u=this.props.children1.size,g=u;return this.hasDefaultCase()&&g--,g}},{key:"totalRulesCntForItem",value:function(u){return(0,J.getTotalRulesCountInTree)(u)}},{key:"reordableNodesCntForItem",value:function(u){if(this.props.isLocked)return 0;var g=this.props.config.settings,m=g.canLeaveEmptyCase,E=g.canRegroupCases,f=this.props.children1.size,a=f;this.hasDefaultCase()&&a--;var r=(0,J.getTotalReordableNodesCountInTree)(u),d=r;return d==1&&E&&m&&a>1&&(d=111),d}},{key:"renderHeaderWrapper",value:function(){return I.default.createElement("div",{key:"group-header",className:Y("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return I.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){var u=this.props.config.settings.renderSwitchPrefix;return u?u():null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var u=this.props,g=u.config,m=u.addCaseGroup,E=u.addDefaultCaseGroup,f=u.isLocked,a=u.isTrueLocked,r=u.id;return I.default.createElement(D.SwitchGroupActions,{config:g,addCaseGroup:m,addDefaultCaseGroup:E,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:f,isTrueLocked:a,id:r})}}]),p}(b.BasicGroup),V.propTypes=z({},b.BasicGroup.propTypes),V))||W)||W)||W),T=w;i.default=T},99168:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.SwitchGroupActions=void 0;var S=n(e(52690)),o=n(e(86661)),N=n(e(99513)),R=n(e(70963)),L=n(e(11780)),A=y(e(39953));function I(F){if(typeof WeakMap!="function")return null;var J=new WeakMap,U=new WeakMap;return(I=function(V){return V?U:J})(F)}function y(F,J){if(!J&&F&&F.__esModule)return F;if(F===null||O(F)!=="object"&&typeof F!="function")return{default:F};var U=I(J);if(U&&U.has(F))return U.get(F);var W={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in F)if(H!=="default"&&Object.prototype.hasOwnProperty.call(F,H)){var z=V?Object.getOwnPropertyDescriptor(F,H):null;z&&(z.get||z.set)?Object.defineProperty(W,H,z):W[H]=F[H]}return W.default=F,U&&U.set(F,W),W}function C(F){var J=M();return function(){var W=(0,L.default)(F),V;if(J){var H=(0,L.default)(this).constructor;V=Reflect.construct(W,arguments,H)}else V=W.apply(this,arguments);return(0,R.default)(this,V)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},D="topRight",x=function(F){(0,N.default)(U,F);var J=C(U);function U(){return(0,S.default)(this,U),J.apply(this,arguments)}return(0,o.default)(U,[{key:"render",value:function(){var V=this.props,H=V.config,z=V.addCaseGroup,$=V.addDefaultCaseGroup,_=V.setLock,Y=V.isLocked,w=V.isTrueLocked,T=V.id,v=V.canAddGroup,l=V.canAddDefault,p=H.settings,s=p.immutableGroupsMode,u=p.addCaseLabel,g=p.addDefaultCaseLabel,m=p.groupActionsPosition,E=p.renderButton,f=p.renderSwitch,a=p.renderButtonGroup,r=p.lockLabel,d=p.lockedLabel,c=p.showLock,P=b[m||D],G=c&&!(Y&&!w)&&A.default.createElement(f,{type:"lock",id:T,value:Y,setValue:_,label:r,checkedLabel:d,config:H}),q=!s&&v&&!Y&&A.default.createElement(E,{type:"addCaseGroup",onClick:z,label:u,readonly:Y,config:H}),Z=!s&&l&&!Y&&A.default.createElement(E,{type:"addDefaultCaseGroup",onClick:$,label:g,readonly:Y,config:H});return A.default.createElement("div",{className:"group--actions ".concat(P)},A.default.createElement(a,{config:H},G,q,Z))}}]),U}(A.PureComponent);i.SwitchGroupActions=x},11784:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(70764)),o=n(e(52690)),N=n(e(86661)),R=n(e(99513)),L=n(e(70963)),A=n(e(11780)),I=b(e(39953)),y=n(e(61240)),C=n(e(94794));function M(J){if(typeof WeakMap!="function")return null;var U=new WeakMap,W=new WeakMap;return(M=function(H){return H?W:U})(J)}function b(J,U){if(!U&&J&&J.__esModule)return J;if(J===null||O(J)!=="object"&&typeof J!="function")return{default:J};var W=M(U);if(W&&W.has(J))return W.get(J);var V={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var z in J)if(z!=="default"&&Object.prototype.hasOwnProperty.call(J,z)){var $=H?Object.getOwnPropertyDescriptor(J,z):null;$&&($.get||$.set)?Object.defineProperty(V,z,$):V[z]=J[z]}return V.default=J,W&&W.set(J,V),V}function D(J){var U=x();return function(){var V=(0,A.default)(J),H;if(U){var z=(0,A.default)(this).constructor;H=Reflect.construct(V,arguments,z)}else H=V.apply(this,arguments);return(0,L.default)(this,H)}}function x(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var F=function(J){(0,R.default)(W,J);var U=D(W);function W(){var V;(0,o.default)(this,W);for(var H=arguments.length,z=new Array(H),$=0;$<H;$++)z[$]=arguments[$];return V=U.call.apply(U,[this].concat(z)),V.handleChange=function(_){V.props.setOption("proximity",parseInt(_))},V}return(0,N.default)(W,[{key:"render",value:function(){var H=this.props,z=H.defaults,$=H.options,_=H.config,Y=H.optionLabel,w=H.optionPlaceholder,T=H.customProps,v=H.minProximity,l=H.maxProximity,p=H.optionTextBefore,s=H.readonly,u=_.settings,g=_.widgets,m=z?z.proximity:void 0,E=u.showLabels,f=$.get("proximity",m),a=(0,C.default)(v,l+1).map(function(d){return{title:d,value:d}}),r=g.select.factory;return I.default.createElement("div",{className:"operator--PROXIMITY"},I.default.createElement("div",{className:"operator--options"},E&&I.default.createElement("label",{className:"rule--label"},Y),!E&&p&&I.default.createElement("div",{className:"operator--options--sep"},I.default.createElement("span",null,p)),I.default.createElement(r,(0,S.default)({config:_,value:f,listValues:a,setValue:this.handleChange,readonly:s,placeholder:w},T))),I.default.createElement("div",{className:"operator--widgets"},this.props.children))}}]),W}(I.PureComponent);i.default=F,F.propTypes={config:y.default.object.isRequired,setOption:y.default.func.isRequired,options:y.default.any.isRequired,minProximity:y.default.number,maxProximity:y.default.number,optionPlaceholder:y.default.string,optionTextBefore:y.default.string,optionLabel:y.default.string,customProps:y.default.object,readonly:y.default.bool},F.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null}},46177:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"ProximityOperator",{enumerable:!0,get:function(){return O.default}});var O=n(e(11784))},44340:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(47552)),o=n(e(52690)),N=n(e(86661)),R=n(e(50757)),L=n(e(99513)),A=n(e(70963)),I=n(e(11780)),y=W(e(39953)),C=n(e(61240)),M=e(58560),b=e(1694),D=e(12461),x=e(58479),F=n(e(57312)),J=n(e(35174));function U(Y){if(typeof WeakMap!="function")return null;var w=new WeakMap,T=new WeakMap;return(U=function(l){return l?T:w})(Y)}function W(Y,w){if(!w&&Y&&Y.__esModule)return Y;if(Y===null||O(Y)!=="object"&&typeof Y!="function")return{default:Y};var T=U(w);if(T&&T.has(Y))return T.get(Y);var v={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in Y)if(p!=="default"&&Object.prototype.hasOwnProperty.call(Y,p)){var s=l?Object.getOwnPropertyDescriptor(Y,p):null;s&&(s.get||s.set)?Object.defineProperty(v,p,s):v[p]=Y[p]}return v.default=Y,T&&T.set(Y,v),v}function V(Y,w){var T=Object.keys(Y);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(Y);w&&(v=v.filter(function(l){return Object.getOwnPropertyDescriptor(Y,l).enumerable})),T.push.apply(T,v)}return T}function H(Y){for(var w=1;w<arguments.length;w++){var T=arguments[w]!=null?arguments[w]:{};w%2?V(Object(T),!0).forEach(function(v){(0,S.default)(Y,v,T[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(T)):V(Object(T)).forEach(function(v){Object.defineProperty(Y,v,Object.getOwnPropertyDescriptor(T,v))})}return Y}function z(Y){var w=$();return function(){var v=(0,I.default)(Y),l;if(w){var p=(0,I.default)(this).constructor;l=Reflect.construct(v,arguments,p)}else l=v.apply(this,arguments);return(0,A.default)(this,l)}}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _=function(Y){(0,L.default)(T,Y);var w=z(T);function T(v){var l;return(0,o.default)(this,T),l=w.call(this,v),(0,x.useOnPropsChanged)((0,R.default)(l)),l.onPropsChanged(v),l}return(0,N.default)(T,[{key:"onPropsChanged",value:function(l){var p=this.props,s=["selectedField","config","parentField"],u=!this.meta||s.map(function(g){return l[g]!==p[g]}).filter(function(g){return g}).length>0;u&&(this.meta=this.getMeta(l))}},{key:"getMeta",value:function(l){var p=l.selectedField,s=l.config,u=l.parentField,g=p,m=s.settings,E=m.maxLabelsLength,f=m.fieldSeparatorDisplay,a=m.fieldPlaceholder,r=m.fieldSeparator,d=!!p,c=d?null:(0,D.truncateString)(a,E),P=d?(0,M.getFieldConfig)(s,g):null,G=P||{},q=(0,b.getFieldPath)(g,s),Z=(0,b.getFieldPath)(g,s,!0),j=this.getFieldLabel(P,g,s),K=(0,b.getFieldPathLabels)(g,s),k=K?K.join(f):null;(k==j||u)&&(k=null);var Q=G.label2,ae=typeof u=="string"?u.split(r):u,oe=u?(0,M.getFieldConfig)(s,u):null,le=u?oe&&oe.subfields:s.fields,ue=this.buildOptions(ae,s,le,ae);return{placeholder:c,items:ue,parentField:u,selectedKey:g,selectedKeys:q,selectedPath:Z,selectedLabel:j,selectedOpts:G,selectedAltLabel:Q,selectedFullLabel:k}}},{key:"getFieldLabel",value:function(l,p,s){if(!p)return null;var u=s.settings.fieldSeparator,g=s.settings.maxLabelsLength,m=Array.isArray(p)?p:p.split(u),E=l&&l.label||(0,F.default)(m);return E=(0,D.truncateString)(E,g),E}},{key:"buildOptions",value:function(l,p,s){var u=this,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!s)return null;var E=p.settings,f=E.fieldSeparator,a=E.fieldSeparatorDisplay,r=g?g.join(f)+f:"";return(0,J.default)(s).map(function(d){var c=s[d],P=u.getFieldLabel(c,d,p),G=(0,b.getFieldPathLabels)(r+d,p),q=G.join(a);(q==P||l)&&(q=null);var Z=c.label2,j=c.tooltip,K=(g||[]).concat(d),k=c.disabled;if(!c.hideForSelect)return c.type=="!struct"?{disabled:k,key:d,path:r+d,label:P,fullLabel:q,altLabel:Z,tooltip:j,items:u.buildOptions(l,p,c.subfields,K,P)}:{disabled:k,key:d,path:r+d,label:P,fullLabel:q,altLabel:Z,tooltip:j,grouplabel:m}}).filter(function(d){return!!d})}},{key:"render",value:function(){var l=this.props,p=l.config,s=l.customProps,u=l.setField,g=l.readonly,m=l.id,E=l.groupId,f=p.settings.renderField,a=H({id:m,groupId:E,config:p,customProps:s,readonly:g,setField:u},this.meta);return f(a)}}]),T}(y.PureComponent);i.default=_,_.propTypes={id:C.default.string,groupId:C.default.string,config:C.default.object.isRequired,selectedField:C.default.string,parentField:C.default.string,customProps:C.default.object,readonly:C.default.bool,setField:C.default.func.isRequired}},15693:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(52690)),o=n(e(86661)),N=n(e(99513)),R=n(e(70963)),L=n(e(11780)),A=M(e(39953)),I=n(e(44340)),y=e(87401);function C(F){if(typeof WeakMap!="function")return null;var J=new WeakMap,U=new WeakMap;return(C=function(V){return V?U:J})(F)}function M(F,J){if(!J&&F&&F.__esModule)return F;if(F===null||O(F)!=="object"&&typeof F!="function")return{default:F};var U=C(J);if(U&&U.has(F))return U.get(F);var W={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in F)if(H!=="default"&&Object.prototype.hasOwnProperty.call(F,H)){var z=V?Object.getOwnPropertyDescriptor(F,H):null;z&&(z.get||z.set)?Object.defineProperty(W,H,z):W[H]=F[H]}return W.default=F,U&&U.set(F,W),W}function b(F){var J=D();return function(){var W=(0,L.default)(F),V;if(J){var H=(0,L.default)(this).constructor;V=Reflect.construct(W,arguments,H)}else V=W.apply(this,arguments);return(0,R.default)(this,V)}}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var x=function(F){(0,N.default)(U,F);var J=b(U);function U(){return(0,S.default)(this,U),J.apply(this,arguments)}return(0,o.default)(U,[{key:"render",value:function(){var V=this.props,H=V.config,z=V.selectedField,$=V.setField,_=V.parentField,Y=V.classname,w=V.readonly,T=V.id,v=V.groupId;return A.default.createElement(y.Col,{className:Y},H.settings.showLabels&&A.default.createElement("label",{className:"rule--label"},H.settings.fieldLabel),A.default.createElement(I.default,{config:H,selectedField:z,parentField:_,setField:$,customProps:H.settings.customFieldSelectProps,readonly:w,id:T,groupId:v}))}}]),U}(A.PureComponent);i.default=x},28310:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(47552)),o=n(e(98595)),N=n(e(52690)),R=n(e(86661)),L=n(e(50757)),A=n(e(99513)),I=n(e(70963)),y=n(e(11780)),C=H(e(39953)),M=n(e(61240)),b=e(58560),D=e(1694),x=e(12461),F=e(58479),J=n(e(57312)),U=n(e(35174)),W=n(e(80189));function V(T){if(typeof WeakMap!="function")return null;var v=new WeakMap,l=new WeakMap;return(V=function(s){return s?l:v})(T)}function H(T,v){if(!v&&T&&T.__esModule)return T;if(T===null||O(T)!=="object"&&typeof T!="function")return{default:T};var l=V(v);if(l&&l.has(T))return l.get(T);var p={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in T)if(u!=="default"&&Object.prototype.hasOwnProperty.call(T,u)){var g=s?Object.getOwnPropertyDescriptor(T,u):null;g&&(g.get||g.set)?Object.defineProperty(p,u,g):p[u]=T[u]}return p.default=T,l&&l.set(T,p),p}function z(T,v){var l=Object.keys(T);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(T);v&&(p=p.filter(function(s){return Object.getOwnPropertyDescriptor(T,s).enumerable})),l.push.apply(l,p)}return l}function $(T){for(var v=1;v<arguments.length;v++){var l=arguments[v]!=null?arguments[v]:{};v%2?z(Object(l),!0).forEach(function(p){(0,S.default)(T,p,l[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(l)):z(Object(l)).forEach(function(p){Object.defineProperty(T,p,Object.getOwnPropertyDescriptor(l,p))})}return T}function _(T){var v=Y();return function(){var p=(0,y.default)(T),s;if(v){var u=(0,y.default)(this).constructor;s=Reflect.construct(p,arguments,u)}else s=p.apply(this,arguments);return(0,I.default)(this,s)}}function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=function(T){(0,A.default)(l,T);var v=_(l);function l(p){var s;return(0,N.default)(this,l),s=v.call(this,p),(0,F.useOnPropsChanged)((0,L.default)(s)),s.onPropsChanged(p),s}return(0,R.default)(l,[{key:"onPropsChanged",value:function(s){var u=this.props,g=["config","field","operator","isFuncArg"],m=["config","field","value"],E=!this.items||g.map(function(a){return s[a]!==u[a]}).filter(function(a){return a}).length>0,f=!this.meta||m.map(function(a){return s[a]!==u[a]}).filter(function(a){return a}).length>0;f&&(this.meta=this.getMeta(s)),E&&(this.items=this.getItems(s))}},{key:"getItems",value:function(s){var u=s.config,g=s.field,m=s.operator,E=s.parentFuncs,f=s.fieldDefinition,a=s.isFuncArg,r=u.settings.canUseFuncForField,d=this.filterFuncs(u,u.funcs,g,m,r,E,a,f),c=this.buildOptions(u,d);return c}},{key:"getMeta",value:function(s){var u=s.config,g=s.field,m=s.value,E=u.settings,f=E.funcPlaceholder,a=E.fieldSeparatorDisplay,r=m,d=!!m,c=(0,b.getFieldConfig)(u,g),P=c.widgets.field,G=P&&P.widgetProps||{},q=d?null:f,Z=d?(0,b.getFuncConfig)(u,r):null,j=Z||{},K=(0,D.getFieldPath)(r,u),k=(0,D.getFieldPath)(r,u,!0),Q=this.getFuncLabel(Z,r,u),ae=(0,D.getFuncPathLabels)(r,u),oe=ae?ae.join(a):null;return oe==Q&&(oe=null),{placeholder:q,selectedKey:r,selectedKeys:K,selectedPath:k,selectedLabel:Q,selectedOpts:j,selectedFullLabel:oe}}},{key:"filterFuncs",value:function(s,u,g,m,E,f,a,r){u=(0,W.default)(u);var d=s.settings.fieldSeparator,c=(0,b.getFieldConfig)(s,g),P,G=c,q=(0,D.getWidgetForFieldOp)(s,g,m,"value");if(a&&r)G=r,P=r.type;else if(q){var Z=s.widgets[q],j=Z.type;P=j}else P=c.type;function K(k,Q){for(var ae in k){var oe=k[ae].subfields,le=(Q||[]).concat(ae),ue=le.join(d),he=(0,b.getFuncConfig)(s,ue);if(he.type=="!struct")K(oe,le)==0&&delete k[ae];else{var pe=he.returnType==P;G.funcs&&(pe=pe&&G.funcs.includes(ue)),E&&(pe=pe&&E(g,c,ue,he,m)),!he.allowSelfNesting&&f&&f.map(function(ye){var Re=(0,o.default)(ye,2),Ce=Re[0],Ae=Re[1];return Ce}).includes(ue)&&(pe=!1),pe||delete k[ae]}}return(0,U.default)(k).length}return K(u,[]),u}},{key:"buildOptions",value:function(s,u){var g=this,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(!u)return null;var f=s.settings,a=f.fieldSeparator,r=f.fieldSeparatorDisplay,d=m?m.join(a)+a:"";return(0,U.default)(u).map(function(c){var P=u[c],G=g.getFuncLabel(P,c,s),q=(0,D.getFuncPathLabels)(c,s),Z=q.join(r);Z==G&&(Z=null);var j=P.tooltip,K=(m||[]).concat(c);return P.type=="!struct"?{key:c,path:d+c,label:G,fullLabel:Z,tooltip:j,items:g.buildOptions(s,P.subfields,K,G)}:{key:c,path:d+c,label:G,fullLabel:Z,tooltip:j,grouplabel:E}})}},{key:"getFuncLabel",value:function(s,u,g){if(!u)return null;var m=g.settings.fieldSeparator,E=g.settings.maxLabelsLength,f=Array.isArray(u)?u:u.split(m),a=s.label||(0,J.default)(f);return a=(0,x.truncateString)(a,E),a}},{key:"render",value:function(){var s=this.props,u=s.config,g=s.customProps,m=s.setValue,E=s.readonly,f=s.id,a=s.groupId,r=u.settings.renderFunc,d=$({config:u,customProps:g,readonly:E,setField:m,items:this.items,id:f,groupId:a},this.meta);return r(d)}}]),l}(C.PureComponent);i.default=w,w.propTypes={id:M.default.string,groupId:M.default.string,config:M.default.object.isRequired,field:M.default.string.isRequired,operator:M.default.string,customProps:M.default.object,value:M.default.string,setValue:M.default.func.isRequired,readonly:M.default.bool,parentFuncs:M.default.array,fieldDefinition:M.default.object,isFuncArg:M.default.bool}},13219:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(70764)),o=n(e(68148)),N=n(e(52690)),R=n(e(86661)),L=n(e(50757)),A=n(e(99513)),I=n(e(70963)),y=n(e(11780)),C=V(e(39953)),M=n(e(61240)),b=n(e(28310)),D=e(58560),x=n(e(84098)),F=e(87401),J=e(84275),U=e(58479);function W(Y){if(typeof WeakMap!="function")return null;var w=new WeakMap,T=new WeakMap;return(W=function(l){return l?T:w})(Y)}function V(Y,w){if(!w&&Y&&Y.__esModule)return Y;if(Y===null||O(Y)!=="object"&&typeof Y!="function")return{default:Y};var T=W(w);if(T&&T.has(Y))return T.get(Y);var v={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in Y)if(p!=="default"&&Object.prototype.hasOwnProperty.call(Y,p)){var s=l?Object.getOwnPropertyDescriptor(Y,p):null;s&&(s.get||s.set)?Object.defineProperty(v,p,s):v[p]=Y[p]}return v.default=Y,T&&T.set(Y,v),v}function H(Y){var w=z();return function(){var v=(0,y.default)(Y),l;if(w){var p=(0,y.default)(this).constructor;l=Reflect.construct(v,arguments,p)}else l=v.apply(this,arguments);return(0,I.default)(this,l)}}function z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $=function(Y){(0,A.default)(T,Y);var w=H(T);function T(v){var l;return(0,N.default)(this,T),l=w.call(this,v),l.setFunc=function(p){l.props.setValue((0,J.setFunc)(l.props.value,p,l.props.config))},l.setArgValue=function(p,s){var u=l.props.config,g=l.meta.funcDefinition,m=g.args,E=m[p];l.props.setValue((0,J.setArgValue)(l.props.value,p,s,E,u))},l.setArgValueSrc=function(p,s){var u=l.props.config,g=l.meta.funcDefinition,m=g.args,E=m[p];l.props.setValue((0,J.setArgValueSrc)(l.props.value,p,s,E,u))},l.renderFuncSelect=function(){var p=l.props,s=p.config,u=p.field,g=p.operator,m=p.customProps,E=p.value,f=p.readonly,a=p.parentFuncs,r=p.id,d=p.groupId,c=p.isFuncArg,P=p.fieldDefinition,G=E?E.get("func"):null,q={value:G,setValue:l.setFunc,config:s,field:u,operator:g,customProps:m,readonly:f,parentFuncs:a,isFuncArg:c,fieldDefinition:P,id:r,groupId:d},Z=s.settings,j=Z.showLabels,K=Z.funcLabel,k=j?C.default.createElement("label",{className:"rule--label"},K):null;return C.default.createElement(F.Col,{key:"func",className:"rule--func"},k,C.default.createElement(b.default,q))},l.renderArgLabel=function(p,s){var u=s.valueSources,g=s.type,m=s.showPrefix,E=s.label,f=l.props.config,a=u&&u.length==1&&u[0]=="const",r=!f.settings.showLabels&&(g=="boolean"||a)&&m;return r?C.default.createElement(F.Col,{className:"rule--func--arg-label"},E||p):null},l.renderArgLabelSep=function(p,s){var u=s.valueSources,g=s.type,m=s.showPrefix,E=l.props.config,f=u&&u.length==1&&u[0]=="const",a=!E.settings.showLabels&&(g=="boolean"||f)&&m;return a?C.default.createElement(F.Col,{className:"rule--func--arg-label-sep"},":"):null},l.renderArgVal=function(p,s,u){var g=l.props,m=g.config,E=g.field,f=g.operator,a=g.value,r=g.readonly,d=g.parentFuncs,c=g.id,P=g.groupId,G=a?a.getIn(["args",s]):null,q=G?G.get("value"):void 0,Z=u.valueSources.length==1?u.valueSources[0]:void 0,j=G?G.get("valueSrc")||Z||"value":Z,K={config:m,fieldFunc:p,fieldArg:s,leftField:E,operator:null,value:q,valueSrc:j,setValue:l.setArgValue,setValueSrc:l.setArgValueSrc,funcKey:p,argKey:s,argDefinition:u,readonly:r,parentFuncs:d,id:c,groupId:P};return C.default.createElement(F.Col,{className:"rule--func--arg-value"},C.default.createElement(_,K))},l.renderArgSep=function(p,s,u,g){var m=g.renderSeps;return u?C.default.createElement(F.Col,{className:"rule--func--arg-sep"},m?m[u-1]:", "):null},l.renderBracketBefore=function(p){var s=p.renderBrackets;return C.default.createElement(F.Col,{key:"before_args",className:"rule--func--bracket-before"},s?s[0]:"(")},l.renderBracketAfter=function(p){var s=p.renderBrackets;return C.default.createElement(F.Col,{key:"after_args",className:"rule--func--bracket-after"},s?s[1]:")")},l.renderFuncArgs=function(){var p=l.meta,s=p.funcDefinition,u=p.funcKey;if(!u)return null;var g=s.args;return g?C.default.createElement(C.default.Fragment,null,l.renderBracketBefore(s),C.default.createElement(F.Col,{key:"args",className:"rule--func--args"},Object.keys(g).map(function(m,E){return C.default.createElement(F.Col,{key:"arg-".concat(m,"-").concat(E),className:"rule--func--arg"},l.renderArgSep(m,g[m],E,s),l.renderArgLabel(m,g[m]),l.renderArgLabelSep(m,g[m]),l.renderArgVal(u,m,g[m]))})),l.renderBracketAfter(s)):null},(0,U.useOnPropsChanged)((0,L.default)(l)),l.onPropsChanged(v),l}return(0,R.default)(T,[{key:"onPropsChanged",value:function(l){var p=this.props,s=["config","field","operator","value"],u=!this.meta||s.map(function(g){return l[g]!==p[g]}).filter(function(g){return g}).length>0;u&&(this.meta=this.getMeta(l))}},{key:"getMeta",value:function(l){var p=l.config,s=l.field,u=l.operator,g=l.value,m=g?g.get("func"):null,E=m?(0,D.getFuncConfig)(p,m):null;return{funcDefinition:E,funcKey:m}}},{key:"render",value:function(){return C.default.createElement(F.Col,{className:"rule--func--wrapper"},this.renderFuncSelect(),this.renderFuncArgs())}}]),T}(C.PureComponent);i.default=$,$.propTypes={id:M.default.string,groupId:M.default.string,config:M.default.object.isRequired,field:M.default.string.isRequired,operator:M.default.string,customProps:M.default.object,value:M.default.object,setValue:M.default.func.isRequired,readonly:M.default.bool,parentFuncs:M.default.array,fieldDefinition:M.default.object,isFuncArg:M.default.bool};var _=function(Y){(0,A.default)(T,Y);var w=H(T);function T(){var v;(0,N.default)(this,T);for(var l=arguments.length,p=new Array(l),s=0;s<l;s++)p[s]=arguments[s];return v=w.call.apply(w,[this].concat(p)),v.setValue=function(u,g,m){var E=v.props,f=E.setValue,a=E.argKey;f(a,g)},v.setValueSrc=function(u,g,m){var E=v.props,f=E.setValueSrc,a=E.argKey;f(a,g)},v}return(0,R.default)(T,[{key:"render",value:function(){var l=this.props,p=l.funcKey,s=l.argKey,u=l.parentFuncs;return C.default.createElement(x.default,(0,S.default)({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:[].concat((0,o.default)(u||[]),[[p,s]])}))}}]),T}(C.PureComponent);_.propTypes={funcKey:M.default.string.isRequired,argKey:M.default.string.isRequired,setValue:M.default.func.isRequired,setValueSrc:M.default.func.isRequired,readonly:M.default.bool,parentFuncs:M.default.array,id:M.default.string,groupId:M.default.string}},76267:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(47552)),o=n(e(52690)),N=n(e(86661)),R=n(e(50757)),L=n(e(99513)),A=n(e(70963)),I=n(e(11780)),y=U(e(39953)),C=n(e(61240)),M=e(58560),b=n(e(35174)),D=n(e(82925)),x=n(e(33973)),F=e(58479);function J(_){if(typeof WeakMap!="function")return null;var Y=new WeakMap,w=new WeakMap;return(J=function(v){return v?w:Y})(_)}function U(_,Y){if(!Y&&_&&_.__esModule)return _;if(_===null||O(_)!=="object"&&typeof _!="function")return{default:_};var w=J(Y);if(w&&w.has(_))return w.get(_);var T={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in _)if(l!=="default"&&Object.prototype.hasOwnProperty.call(_,l)){var p=v?Object.getOwnPropertyDescriptor(_,l):null;p&&(p.get||p.set)?Object.defineProperty(T,l,p):T[l]=_[l]}return T.default=_,w&&w.set(_,T),T}function W(_,Y){var w=Object.keys(_);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(_);Y&&(T=T.filter(function(v){return Object.getOwnPropertyDescriptor(_,v).enumerable})),w.push.apply(w,T)}return w}function V(_){for(var Y=1;Y<arguments.length;Y++){var w=arguments[Y]!=null?arguments[Y]:{};Y%2?W(Object(w),!0).forEach(function(T){(0,S.default)(_,T,w[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(w)):W(Object(w)).forEach(function(T){Object.defineProperty(_,T,Object.getOwnPropertyDescriptor(w,T))})}return _}function H(_){var Y=z();return function(){var T=(0,I.default)(_),v;if(Y){var l=(0,I.default)(this).constructor;v=Reflect.construct(T,arguments,l)}else v=T.apply(this,arguments);return(0,A.default)(this,v)}}function z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $=function(_){(0,L.default)(w,_);var Y=H(w);function w(T){var v;return(0,o.default)(this,w),v=Y.call(this,T),(0,F.useOnPropsChanged)((0,R.default)(v)),v.onPropsChanged(T),v}return(0,N.default)(w,[{key:"onPropsChanged",value:function(v){var l=this.props,p=["config","selectedField","selectedOperator"],s=!this.meta||p.map(function(u){return v[u]!==l[u]}).filter(function(u){return u}).length>0;s&&(this.meta=this.getMeta(v))}},{key:"getMeta",value:function(v){var l=v.config,p=v.selectedField,s=v.selectedOperator,u=(0,M.getFieldConfig)(l,p),g=u?.operators,m=(0,x.default)((0,D.default)(l.operators,function(Z,j){return g?.indexOf(j)!==-1}),function(Z,j){return(0,M.getOperatorConfig)(l,j,p)}),E=this.buildOptions(l,m,g),f=!!s,a=f?m[s]:null,r=a||{},d=this.props.config.settings.operatorPlaceholder,c=s,P=f?[c]:null,G=P,q=r.label;return{placeholder:d,items:E,selectedKey:c,selectedKeys:P,selectedPath:G,selectedLabel:q,selectedOpts:r,fieldConfig:u}}},{key:"buildOptions",value:function(v,l,p){return!l||!p?null:(0,b.default)(l).sort(function(s,u){return p.indexOf(s)-p.indexOf(u)}).map(function(s){var u=l[s],g=u.label;return{key:s,path:s,label:g}})}},{key:"render",value:function(){var v=this.props,l=v.config,p=v.customProps,s=v.setOperator,u=v.readonly,g=v.id,m=v.groupId,E=l.settings.renderOperator,f=V({id:g,groupId:m,config:l,customProps:p,readonly:u,setField:s},this.meta);return f.items?E(f):null}}]),w}(y.PureComponent);i.default=$,$.propTypes={id:C.default.string,groupId:C.default.string,config:C.default.object.isRequired,selectedField:C.default.string,selectedOperator:C.default.string,readonly:C.default.bool,setOperator:C.default.func.isRequired}},6103:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(73045)),o=n(e(52690)),N=n(e(86661)),R=n(e(99513)),L=n(e(70963)),A=n(e(11780)),I=D(e(39953)),y=n(e(61240)),C=e(58560),M=["factory"];function b(U){if(typeof WeakMap!="function")return null;var W=new WeakMap,V=new WeakMap;return(b=function(z){return z?V:W})(U)}function D(U,W){if(!W&&U&&U.__esModule)return U;if(U===null||O(U)!=="object"&&typeof U!="function")return{default:U};var V=b(W);if(V&&V.has(U))return V.get(U);var H={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in U)if($!=="default"&&Object.prototype.hasOwnProperty.call(U,$)){var _=z?Object.getOwnPropertyDescriptor(U,$):null;_&&(_.get||_.set)?Object.defineProperty(H,$,_):H[$]=U[$]}return H.default=U,V&&V.set(U,H),H}function x(U){var W=F();return function(){var H=(0,A.default)(U),z;if(W){var $=(0,A.default)(this).constructor;z=Reflect.construct(H,arguments,$)}else z=H.apply(this,arguments);return(0,L.default)(this,z)}}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=function(U){(0,R.default)(V,U);var W=x(V);function V(){return(0,o.default)(this,V),W.apply(this,arguments)}return(0,N.default)(V,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var z=(0,C.getOperatorConfig)(this.props.config,this.props.selectedOperator,this.props.selectedField);if(typeof z.options>"u")return null;var $=z.options,_=$.factory,Y=(0,S.default)($,M),w=Object.assign({},Y,{config:this.props.config,field:this.props.selectedField,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly}),T=_(w),v=this.props.selectedOperator;return I.default.createElement("div",{className:"rule--operator rule--operator--".concat(v.toUpperCase())},T)}}]),V}(I.PureComponent);i.default=J,J.propTypes={config:y.default.object.isRequired,operatorOptions:y.default.any.isRequired,selectedField:y.default.string.isRequired,selectedOperator:y.default.string.isRequired,readonly:y.default.bool,setOperatorOption:y.default.func.isRequired}},20215:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(52690)),o=n(e(86661)),N=n(e(99513)),R=n(e(70963)),L=n(e(11780)),A=M(e(39953)),I=n(e(76267)),y=e(87401);function C(F){if(typeof WeakMap!="function")return null;var J=new WeakMap,U=new WeakMap;return(C=function(V){return V?U:J})(F)}function M(F,J){if(!J&&F&&F.__esModule)return F;if(F===null||O(F)!=="object"&&typeof F!="function")return{default:F};var U=C(J);if(U&&U.has(F))return U.get(F);var W={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in F)if(H!=="default"&&Object.prototype.hasOwnProperty.call(F,H)){var z=V?Object.getOwnPropertyDescriptor(F,H):null;z&&(z.get||z.set)?Object.defineProperty(W,H,z):W[H]=F[H]}return W.default=F,U&&U.set(F,W),W}function b(F){var J=D();return function(){var W=(0,L.default)(F),V;if(J){var H=(0,L.default)(this).constructor;V=Reflect.construct(W,arguments,H)}else V=W.apply(this,arguments);return(0,R.default)(this,V)}}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var x=function(F){(0,N.default)(U,F);var J=b(U);function U(){return(0,S.default)(this,U),J.apply(this,arguments)}return(0,o.default)(U,[{key:"render",value:function(){var V=this.props,H=V.config,z=V.selectedField,$=V.selectedOperator,_=V.setOperator,Y=V.selectedFieldPartsLabels,w=V.showOperator,T=V.showOperatorLabel,v=V.selectedFieldWidgetConfig,l=V.readonly,p=V.id,s=V.groupId,u=w&&A.default.createElement(y.Col,{key:"operators-for-"+(Y||[]).join("_"),className:"rule--operator"},H.settings.showLabels&&A.default.createElement("label",{className:"rule--label"},H.settings.operatorLabel),A.default.createElement(I.default,{key:"operator",config:H,selectedField:z,selectedOperator:$,setOperator:_,readonly:l,id:p,groupId:s})),g=T&&A.default.createElement(y.Col,{key:"operators-for-"+(Y||[]).join("_"),className:"rule--operator"},A.default.createElement("div",{className:"rule--operator"},H.settings.showLabels?A.default.createElement("label",{className:"rule--label"},"\xA0"):null,A.default.createElement("span",null,v.operatorInlineLabel)));return[u,g]}}]),U}(A.PureComponent);i.default=x},98673:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(47552)),o=n(e(52690)),N=n(e(86661)),R=n(e(50757)),L=n(e(99513)),A=n(e(70963)),I=n(e(11780)),y=V(e(39953)),C=n(e(61240)),M=e(58560),b=e(1694),D=e(12461),x=e(58479),F=n(e(57312)),J=n(e(35174)),U=n(e(80189));function W(w){if(typeof WeakMap!="function")return null;var T=new WeakMap,v=new WeakMap;return(W=function(p){return p?v:T})(w)}function V(w,T){if(!T&&w&&w.__esModule)return w;if(w===null||O(w)!=="object"&&typeof w!="function")return{default:w};var v=W(T);if(v&&v.has(w))return v.get(w);var l={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in w)if(s!=="default"&&Object.prototype.hasOwnProperty.call(w,s)){var u=p?Object.getOwnPropertyDescriptor(w,s):null;u&&(u.get||u.set)?Object.defineProperty(l,s,u):l[s]=w[s]}return l.default=w,v&&v.set(w,l),l}function H(w,T){var v=Object.keys(w);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(w);T&&(l=l.filter(function(p){return Object.getOwnPropertyDescriptor(w,p).enumerable})),v.push.apply(v,l)}return v}function z(w){for(var T=1;T<arguments.length;T++){var v=arguments[T]!=null?arguments[T]:{};T%2?H(Object(v),!0).forEach(function(l){(0,S.default)(w,l,v[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(v)):H(Object(v)).forEach(function(l){Object.defineProperty(w,l,Object.getOwnPropertyDescriptor(v,l))})}return w}function $(w){var T=_();return function(){var l=(0,I.default)(w),p;if(T){var s=(0,I.default)(this).constructor;p=Reflect.construct(l,arguments,s)}else p=l.apply(this,arguments);return(0,A.default)(this,p)}}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Y=function(w){(0,L.default)(v,w);var T=$(v);function v(l){var p;return(0,o.default)(this,v),p=T.call(this,l),(0,x.useOnPropsChanged)((0,R.default)(p)),p.onPropsChanged(l),p}return(0,N.default)(v,[{key:"onPropsChanged",value:function(p){var s=this.props,u=["config","field","operator","isFuncArg","parentField"],g=["config","field","operator","value","placeholder","isFuncArg","parentField"],m=!this.items||u.map(function(f){return p[f]!==s[f]}).filter(function(f){return f}).length>0,E=!this.meta||g.map(function(f){return p[f]!==s[f]}).filter(function(f){return f}).length>0;m&&(this.items=this.getItems(p)),E&&(this.meta=this.getMeta(p))}},{key:"getItems",value:function(p){var s=p.config,u=p.field,g=p.operator,m=p.parentField,E=p.isFuncArg,f=p.fieldDefinition,a=s.settings.canCompareFieldWithField,r=s.settings.fieldSeparator,d=typeof m=="string"?m.split(r):m,c=m?(0,M.getFieldConfig)(s,m):null,P=m?c&&c.subfields:s.fields,G=this.filterFields(s,P,u,m,d,g,a,E,f),q=this.buildOptions(d,s,G,d);return q}},{key:"getMeta",value:function(p){var s=p.config,u=p.field,g=p.operator,m=p.value,E=p.placeholder,f=p.isFuncArg,a=p.parentField,r=s.settings,d=r.fieldPlaceholder,c=r.fieldSeparatorDisplay,P=m,G=!!m,q=(0,M.getFieldConfig)(s,u),Z=q.widgets.field,j=Z&&Z.widgetProps||{},K=G?null:f&&E||j.valuePlaceholder||d,k=G?(0,M.getFieldConfig)(s,P):null,Q=k||{},ae=(0,b.getFieldPath)(P,s),oe=(0,b.getFieldPath)(P,s,!0),le=this.getFieldLabel(k,P,s),ue=(0,b.getFieldPathLabels)(P,s),he=ue?ue.join(c):null;(he==le||a)&&(he=null);var pe=Q.label2;return{placeholder:K,selectedKey:P,selectedKeys:ae,selectedPath:oe,selectedLabel:le,selectedOpts:Q,selectedAltLabel:pe,selectedFullLabel:he}}},{key:"filterFields",value:function(p,s,u,g,m,E,f,a,r){s=(0,U.default)(s);var d=p.settings.fieldSeparator,c=(0,M.getFieldConfig)(p,u),P,G=(0,b.getWidgetForFieldOp)(p,u,E,"value");if(a&&r)P=r.type;else if(G){var q=p.widgets[G],Z=q.type;P=Z}else P=c.type;function j(K,k){for(var Q in K){var ae=K[Q].subfields,oe=(k||[]).concat(Q),le=oe.join(d),ue=(0,M.getFieldConfig)(p,le);if(!ue)delete K[Q];else if(ue.type=="!struct"||ue.type=="!group")j(ae,oe)==0&&delete K[Q];else{var he=ue.type==P&&(a?!0:le!=u),pe=f||p.settings.canCompareFieldWithField;pe&&(he=he&&pe(u,c,le,ue,E)),he||delete K[Q]}}return(0,J.default)(K).length}return j(s,m||[]),s}},{key:"buildOptions",value:function(p,s,u){var g=this,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,E=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!u)return null;var f=s.settings,a=f.fieldSeparator,r=f.fieldSeparatorDisplay,d=m?m.join(a)+a:"";return(0,J.default)(u).map(function(c){var P=u[c],G=g.getFieldLabel(P,c,s),q=(0,b.getFieldPathLabels)(c,s),Z=q.join(r);(Z==G||p)&&(Z=null);var j=P.label2,K=P.tooltip,k=(m||[]).concat(c);if(!P.hideForCompare)return P.type=="!struct"||P.type=="!group"?{key:c,path:d+c,label:G,fullLabel:Z,altLabel:j,tooltip:K,items:g.buildOptions(p,s,P.subfields,k,G)}:{key:c,path:d+c,label:G,fullLabel:Z,altLabel:j,tooltip:K,grouplabel:E}}).filter(function(c){return!!c})}},{key:"getFieldLabel",value:function(p,s,u){if(!s)return null;var g=u.settings.fieldSeparator,m=u.settings.maxLabelsLength,E=Array.isArray(s)?s:s.split(g),f=p.label||(0,F.default)(E);return f=(0,D.truncateString)(f,m),f}},{key:"render",value:function(){var p=this.props,s=p.config,u=p.customProps,g=p.setValue,m=p.readonly,E=p.id,f=p.groupId,a=s.settings.renderField,r=z({config:s,customProps:u,setField:g,readonly:m,items:this.items,id:E,groupId:f},this.meta);return a(r)}}]),v}(y.PureComponent);i.default=Y,Y.propTypes={id:C.default.string,groupId:C.default.string,setValue:C.default.func.isRequired,config:C.default.object.isRequired,field:C.default.string.isRequired,value:C.default.string,operator:C.default.string,customProps:C.default.object,readonly:C.default.bool,parentField:C.default.string,fieldDefinition:C.default.object,isFuncArg:C.default.bool}},84098:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(70764)),o=n(e(52690)),N=n(e(86661)),R=n(e(50757)),L=n(e(99513)),A=n(e(70963)),I=n(e(11780)),y=z(e(39953)),C=n(e(61240)),M=n(e(94794)),b=e(58560),D=e(1694),x=e(12461),F=e(58479),J=n(e(48289)),U=n(e(7134)),W=n(e(85350)),V=e(87401);function H(T){if(typeof WeakMap!="function")return null;var v=new WeakMap,l=new WeakMap;return(H=function(s){return s?l:v})(T)}function z(T,v){if(!v&&T&&T.__esModule)return T;if(T===null||O(T)!=="object"&&typeof T!="function")return{default:T};var l=H(v);if(l&&l.has(T))return l.get(T);var p={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in T)if(u!=="default"&&Object.prototype.hasOwnProperty.call(T,u)){var g=s?Object.getOwnPropertyDescriptor(T,u):null;g&&(g.get||g.set)?Object.defineProperty(p,u,g):p[u]=T[u]}return p.default=T,l&&l.set(T,p),p}function $(T){var v=_();return function(){var p=(0,I.default)(T),s;if(v){var u=(0,I.default)(this).constructor;s=Reflect.construct(p,arguments,u)}else s=p.apply(this,arguments);return(0,A.default)(this,s)}}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Y={cardinality:1},w=function(T){(0,L.default)(l,T);var v=$(l);function l(p){var s;return(0,o.default)(this,l),s=v.call(this,p),s._setValue=function(u,g,m,E,f,a){if(u&&Array.isArray(E)){var r=[s.props.value.get(0),s.props.value.get(1)];r[0]!=E[0]&&s.props.setValue(0,E[0],m,f,a),r[1]!=E[1]&&s.props.setValue(1,E[1],m,f,a)}else s.props.setValue(g,E,m,f,a)},s._onChangeValueSrc=function(u,g){s.props.setValueSrc(u,g)},s.renderWidget=function(u,g,m){var E=m.config,f=m.isFuncArg,a=m.leftField,r=m.operator,d=m.value,c=m.valueError,P=m.readonly,G=m.parentField,q=m.parentFuncs,Z=m.id,j=m.groupId,K=E.settings,k=g.widgets,Q=g.iValues,ae=g.aField,oe=f?Q:d,le=f?a:ae,ue=k[u],he=ue.valueSrc,pe=ue.valueLabel,ye=K.showLabels?y.default.createElement("label",{className:"rule--label"},pe.label):null;return y.default.createElement("div",{key:"widget-"+le+"-"+u,className:"widget--widget"},he=="func"?null:ye,y.default.createElement(W.default,(0,S.default)({id:Z,groupId:j,valueSrc:he,delta:u,value:oe,valueError:c,isFuncArg:f},(0,J.default)(g,["isSpecialRange","fieldDefinition","asyncListValues"]),(0,J.default)(k[u],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValueHandler"]),{config:E,field:le,parentField:G,parentFuncs:q,operator:r,readonly:P})))},s.renderValueSources=function(u,g,m){var E=m.config,f=m.isFuncArg,a=m.leftField,r=m.operator,d=m.readonly,c=E.settings,P=g.valueSources,G=g.widgets,q=g.aField,Z=f?a:q,j=G[u],K=j.valueSrc,k=j.setValueSrcHandler,Q=c.valueSourcesInfo,ae=c.renderValueSources,oe=P.map(function(ue){return[ue,{label:Q[ue].label}]}),le=c.showLabels?y.default.createElement("label",{className:"rule--label"},"\xA0"):null;return P.length>1&&!d&&y.default.createElement("div",{key:"valuesrc-"+Z+"-"+u,className:"widget--valuesrc"},le,y.default.createElement(ae,{key:"valuesrc-"+u,delta:u,valueSources:oe,valueSrc:K,config:E,field:Z,operator:r,setValueSrc:k,readonly:d,title:c.valueSourcesPopupTitle}))},s.renderSep=function(u,g,m){var E=m.config,f=g.widgets,a=E.settings,r=f[u].sepText,d=a.showLabels?y.default.createElement("label",{className:"rule--label"},"\xA0"):null;return r&&y.default.createElement("div",{key:"widget-separators-"+u,className:"widget--sep"},d,y.default.createElement("span",null,r))},s.renderWidgetDelta=function(u){var g=s.renderSep(u,s.meta,s.props),m=s.renderValueSources(u,s.meta,s.props),E=s.renderWidget(u,s.meta,s.props);return[g,m,E]},(0,F.useOnPropsChanged)((0,R.default)(s)),s.onPropsChanged(p),s}return(0,N.default)(l,[{key:"onPropsChanged",value:function(s){var u=this.props,g=["config","field","fieldFunc","fieldArg","leftField","operator","valueSrc","isFuncArg","asyncListValues"],m=!this.meta||g.map(function(E){return s[E]!==u[E]||E=="isFuncArg"&&s.isFuncArg&&s.value!==u.value}).filter(function(E){return E}).length>0;m&&(this.meta=this.getMeta(s))}},{key:"getMeta",value:function(s){var u=this,g=s.config,m=s.field,E=s.fieldFunc,f=s.fieldArg,a=s.operator,r=s.valueSrc,d=s.value,c=s.isForRuleGruop,P=s.isCaseValue,G=s.isFuncArg,q=s.leftField,Z=s.asyncListValues,j=G?{func:E,arg:f}:m,K=r,k=d;(G||c||P)&&(K=U.default.List([r]),k=U.default.List([d]));var Q=(0,b.getFieldConfig)(g,j),ae=(0,D.getWidgetForFieldOp)(g,j,a),oe=(0,D.getWidgetsForFieldOp)(g,j,a),le=G?Y:(0,b.getOperatorConfig)(g,a,j);if((Q==null||le==null)&&!P)return null;var ue=le?.isSpecialRange,he=ue&&(K.get(0)=="field"||K.get(1)=="field"),pe=ue&&!he,ye=pe?1:(0,x.defaultValue)(le?.cardinality,1);if(ye===0)return null;var Re=(0,D.getValueSourcesForFieldOp)(g,j,a,Q,G?q:null),Ce=(0,M.default)(0,ye).map(function(Ae){var Te,be=K.get(Ae)||null,We=(0,D.getWidgetForFieldOp)(g,j,a,be),je=(0,b.getFieldWidgetConfig)(g,j,a,We,be);he&&(We=je.singleWidget,je=(0,b.getFieldWidgetConfig)(g,j,a,We,be));var He=(Te=je)===null||Te===void 0?void 0:Te.type,De=(0,D.getValueLabel)(g,j,a,Ae,be,pe),Ye=(0,D.getValueLabel)(g,j,a,Ae,null,pe),nt=le!=null&&le.textSeparators?le?.textSeparators[Ae]:null,ke=u._onChangeValueSrc.bind(u,Ae),ve=null,Ee=null;ue&&(ve=[(0,D.getValueLabel)(g,j,a,0),(0,D.getValueLabel)(g,j,a,1)],ve={placeholder:[ve[0].placeholder,ve[1].placeholder],label:[ve[0].label,ve[1].label]},Ee=le?.textSeparators);var Ie=u._setValue.bind(u,ue,Ae,He);return{valueSrc:be,valueLabel:De,widget:We,sepText:nt,setValueSrcHandler:ke,widgetDefinition:je,widgetValueLabel:Ye,valueLabels:ve,textSeparators:Ee,setValueHandler:Ie}});return{defaultWidget:ae,fieldDefinition:Q,operatorDefinition:le,isSpecialRange:pe,cardinality:ye,valueSources:Re,widgets:Ce,iValues:k,aField:j,asyncListValues:Z}}},{key:"render",value:function(){if(!this.meta)return null;var s=this.meta,u=s.defaultWidget,g=s.cardinality;if(!u)return null;var m=u;return y.default.createElement(V.Col,{className:"rule--widget rule--widget--".concat(m.toUpperCase()),key:"widget-col-"+m},(0,M.default)(0,g).map(this.renderWidgetDelta))}}]),l}(y.PureComponent);i.default=w,w.propTypes={config:C.default.object.isRequired,value:C.default.any,valueSrc:C.default.any,valueError:C.default.any,field:C.default.string,operator:C.default.string,readonly:C.default.bool,asyncListValues:C.default.array,id:C.default.string,groupId:C.default.string,setValue:C.default.func,setValueSrc:C.default.func,isFuncArg:C.default.bool,fieldFunc:C.default.string,fieldArg:C.default.string,leftField:C.default.string,isForRuleGruop:C.default.bool,parentField:C.default.string,parentFuncs:C.default.array,isCaseValue:C.default.bool}},85350:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(73045)),S=n(e(39953)),o=e(12461),N=["factory"],R=function(A){var I=A.delta,y=A.isFuncArg,C=A.valueSrc,M=A.value,b=A.valueError,D=A.asyncListValues,x=A.isSpecialRange,F=A.fieldDefinition,J=A.widget,U=A.widgetDefinition,W=A.widgetValueLabel,V=A.valueLabels,H=A.textSeparators,z=A.setValueHandler,$=A.config,_=A.field,Y=A.operator,w=A.readonly,T=A.parentField,v=A.parentFuncs,l=A.id,p=A.groupId,s=U.factory,u=(0,O.default)(U,N),g=y&&F.valueSources&&F.valueSources.length==1&&F.valueSources[0]=="const",m=F.defaultValue;if(!s)return"?";var E=x?[M.get(0),M.get(1)]:M?M.get(I):void 0,f=b&&(x?[b.get(0),b.get(1)]:b.get(I))||null;x&&E[0]===void 0&&E[1]===void 0&&(E=void 0);var a=F||{},r=a.fieldSettings,d=Object.assign({},u,r,{config:$,field:_,parentField:T,parentFuncs:v,fieldDefinition:F,operator:Y,delta:I,isSpecialRange:x,isFuncArg:y,value:E,valueError:f,label:W.label,placeholder:W.placeholder,placeholders:V?V.placeholder:null,textSeparators:H,setValue:z,readonly:w,asyncListValues:D,id:l,groupId:p});return J=="field",g&&m?typeof m=="boolean"?m?d.labelYes||"YES":d.labelNo||"NO":r.listValues?Array.isArray(m)?m.map(function(c){return(0,o.getTitleInListValues)(r.listValues,c)||c}).join(", "):(0,o.getTitleInListValues)(r.listValues,m)||m:""+m:s(d)};i.default=R},87401:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.dummyFn=i.DragIcon=i.ConfirmFn=i.Col=void 0;var O=n(e(70764)),S=n(e(73045)),o=n(e(39953)),N=["children"],R=function(C){var M=C.children,b=(0,S.default)(C,N);return o.default.createElement("div",b,M)};i.Col=R;var L=function(){};i.dummyFn=L;var A=function(){return o.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},o.default.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),o.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))};i.DragIcon=A;var I=function(C){return function(M){var b=M.config.settings.useConfirm,D=b?b():null;return o.default.createElement(C,(0,O.default)({},M,{confirmFn:D}))}};i.ConfirmFn=I},77731:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0});var O={ValueFieldWidget:!0,FuncWidget:!0};Object.defineProperty(i,"FuncWidget",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(i,"ValueFieldWidget",{enumerable:!0,get:function(){return S.default}});var S=n(e(98673)),o=n(e(13219)),N=e(42848);Object.keys(N).forEach(function(R){R==="default"||R==="__esModule"||Object.prototype.hasOwnProperty.call(O,R)||R in i&&i[R]===N[R]||Object.defineProperty(i,R,{enumerable:!0,get:function(){return N[R]}})})},54517:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(39953)),S=function(N){var R=N.type,L=N.label,A=N.onClick,I=N.readonly,y=N.config,C={addRuleGroup:"+",addRuleGroupExt:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"},M=L||C[R];return O.default.createElement("button",{onClick:A,type:"button",disabled:I},M)};i.default=S},807:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(39953)),S=function(N){var R=N.children,L=N.config;return O.default.createElement(O.default.Fragment,null,R)};i.default=S},22485:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(39953)),S=function(N){var R=N.id,L=N.not,A=N.setNot,I=N.conjunctionOptions,y=N.setConjunction,C=N.disabled,M=N.readonly,b=N.config,D=N.showNot,x=N.notLabel,F=Object.keys(I).length,J=C,U=b.settings.forceShowConj,W=U||F>1&&!J,V=function(){return Object.keys(I).map(function(Y){var w=I[Y],T=w.id,v=w.name,l=w.label,p=w.checked,s=y.isDummyFn?"__dummy":"";return(M||C)&&!p?null:[O.default.createElement("input",{key:T+s,type:"radio",id:T+s,name:v+s,checked:p,disabled:M||C,value:Y,onChange:z}),O.default.createElement("label",{key:T+s+"label",htmlFor:T+s},l)]})},H=function(){var Y="not";return[O.default.createElement("input",{key:R+Y,type:"checkbox",id:R+Y,checked:L,disabled:M,onChange:$}),O.default.createElement("label",{key:R+Y+"label",htmlFor:R+Y},x||"NOT")]},z=function(Y){return y(Y.target.value)},$=function(Y){return A(Y.target.checked)};return[D&&H(),W&&V()]};i.default=S},65733:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(39953)),S=function(N){var R=N.items,L=N.setField,A=N.selectedKey,I=N.readonly,y=function b(D){return D.map(function(x){var F=x.items,J=x.path,U=x.label,W=x.disabled;return F?O.default.createElement("optgroup",{disabled:W,key:J,label:U},b(F)):O.default.createElement("option",{disabled:W,key:J,value:J},U)})},C=function(D){return L(D.target.value)},M=A!=null;return O.default.createElement("select",{onChange:C,value:M?A:"",disabled:I},!M&&O.default.createElement("option",{disabled:!0,value:""}),y(R))};i.default=S},79389:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(39953)),S=function(N){var R=N.value,L=N.setValue,A=N.label,I=N.id,y=N.config,C=N.type,M=function(x){return L(x.target.checked)},b=C;return[O.default.createElement("input",{key:I+b,type:"checkbox",id:I+b,checked:!!R,onChange:M}),O.default.createElement("label",{key:I+b+"label",htmlFor:I+b},A)]};i.default=S},57842:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(98595)),S=n(e(39953)),o=function(R){var L=R.config,A=R.valueSources,I=R.valueSrc,y=R.title,C=R.setValueSrc,M=R.readonly,b=function(F){return F.map(function(J){var U=(0,O.default)(J,2),W=U[0],V=U[1];return S.default.createElement("option",{key:W,value:W},V.label)})},D=function(F){return C(F.target.value)};return S.default.createElement("select",{onChange:D,value:I,disabled:M},b(A))};i.default=o},24230:(re,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=function(O){var S=O.onOk,o=O.okText,N=O.cancelText,R=O.title;confirm(R)&&S()};i.default=e},42848:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"VanillaBooleanWidget",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(i,"VanillaButton",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(i,"VanillaButtonGroup",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(i,"VanillaConjs",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(i,"VanillaDateTimeWidget",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(i,"VanillaDateWidget",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(i,"VanillaFieldSelect",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(i,"VanillaMultiSelectWidget",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(i,"VanillaNumberWidget",{enumerable:!0,get:function(){return C.default}}),i.VanillaProvider=void 0,Object.defineProperty(i,"VanillaSelectWidget",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(i,"VanillaSliderWidget",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(i,"VanillaSwitch",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(i,"VanillaTextAreaWidget",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(i,"VanillaTextWidget",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(i,"VanillaTimeWidget",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(i,"VanillaValueSources",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(i,"vanillaConfirm",{enumerable:!0,get:function(){return W.default}});var O=n(e(39953)),S=n(e(77464)),o=n(e(32481)),N=n(e(76435)),R=n(e(64621)),L=n(e(23888)),A=n(e(95420)),I=n(e(60847)),y=n(e(66327)),C=n(e(73288)),M=n(e(90071)),b=n(e(65733)),D=n(e(22485)),x=n(e(54517)),F=n(e(807)),J=n(e(57842)),U=n(e(79389)),W=n(e(24230)),V=function(z){var $=z.config,_=z.children;return _};i.VanillaProvider=V},77464:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(70764)),S=n(e(39953)),o=n(e(14850)),N=function(L){var A=L.value,I=L.setValue,y=L.config,C=L.labelYes,M=L.labelNo,b=L.readonly,D=L.customProps,x=D===void 0?{}:D,F=x.radioYes||{},J=x.radioNo||{},U=function($){return I($.target.checked)},W=function($){return I($.target.value=="true")},V=(0,o.default)(),H=(0,o.default)();return S.default.createElement(S.default.Fragment,null,S.default.createElement("input",(0,O.default)({key:V,type:"radio",id:V,value:!0,checked:!!A,disabled:b,onChange:W},F)),S.default.createElement("label",{style:{display:"inline"},key:V+"label",htmlFor:V},C),S.default.createElement("input",(0,O.default)({key:H,type:"radio",id:H,value:!1,checked:!A,disabled:b,onChange:W},J)),S.default.createElement("label",{style:{display:"inline"},key:H+"label",htmlFor:H},M))};i.default=N},64621:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(70764)),S=n(e(39953)),o=n(e(52291)),N=function(L){var A=L.value,I=L.setValue,y=L.config,C=L.valueFormat,M=L.readonly,b=L.customProps,D=function(F){var J=F.target.value;J==""&&(J=void 0),I(J)};return S.default.createElement("input",(0,O.default)({type:"date",value:A||"",disabled:M,onChange:D},b))};i.default=N},95420:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(70764)),S=n(e(39953)),o=n(e(52291)),N=function(L){var A=L.value,I=L.setValue,y=L.config,C=L.valueFormat,M=L.use12Hours,b=L.readonly,D=L.customProps,x=function(U){var W=U.target.value;W==""?W=void 0:W=(0,o.default)(new Date(W)).format(C),I(W)},F=A;return A?F=(0,o.default)(A).format("YYYY-MM-DDTHH:mm"):F="",S.default.createElement("input",(0,O.default)({type:"datetime-local",value:F,disabled:b,onChange:x},D))};i.default=N},60847:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(70764)),S=n(e(39953)),o=e(12461),N=n(e(96406)),R=function(A){var I=A.listValues,y=A.value,C=A.setValue,M=A.allowCustomValues,b=A.readonly,D=A.customProps,x=function(){return(0,o.mapListValues)(I,function(W){var V=W.title,H=W.value;return S.default.createElement("option",{key:H,value:H},V)})},F=function(W){for(var V=[],H=W.options,z=0;z<H.length;z++){var $=H[z];$.selected&&V.push($.value)}return V.length||(V=void 0),V},J=function(W){return C(F(W.target))};return S.default.createElement("select",(0,O.default)({multiple:!0,onChange:J,value:y,disabled:b},(0,N.default)(D,["showSearch","input","showCheckboxes"])),x())};i.default=R},73288:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(70764)),S=n(e(39953)),o=function(R){var L=R.value,A=R.setValue,I=R.config,y=R.readonly,C=R.min,M=R.max,b=R.step,D=R.placeholder,x=R.customProps,F=function(W){var V=W.target.value;V===""||V===null?V=void 0:V=Number(V),A(V)},J=L??"";return S.default.createElement("input",(0,O.default)({type:"number",value:J,placeholder:D,disabled:y,min:C,max:M,step:b,onChange:F},x))};i.default=o},66327:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(70764)),S=n(e(39953)),o=e(12461),N=n(e(96406)),R=function(A){var I=A.listValues,y=A.value,C=A.setValue,M=A.allowCustomValues,b=A.readonly,D=A.customProps,x=function(){return(0,o.mapListValues)(I,function(W){var V=W.title,H=W.value;return S.default.createElement("option",{key:H,value:H},V)})},F=function(W){return C(W.target.value)},J=y!=null;return S.default.createElement("select",(0,O.default)({onChange:F,value:J?y:"",disabled:b},(0,N.default)(D,["showSearch","input"])),!J&&S.default.createElement("option",{disabled:!0,value:""}),x())};i.default=R},90071:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(70764)),S=n(e(39953)),o=function(R){var L=R.value,A=R.setValue,I=R.config,y=R.readonly,C=R.min,M=R.max,b=R.step,D=R.placeholder,x=R.customProps,F=x===void 0?{}:x,J=F.input||{},U=F.slider||F,W=function(z){var $=z.target.value;$===""||$===null?$=void 0:$=Number($),A($)},V=L??"";return[S.default.createElement("input",(0,O.default)({key:"number",type:"number",value:V,placeholder:D,disabled:y,min:C,max:M,step:b,onChange:W},J)),S.default.createElement("input",(0,O.default)({key:"range",type:"range",value:V,disabled:y,min:C,max:M,step:b,onChange:W},U))]};i.default=o},32481:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(70764)),S=n(e(39953)),o=function(R){var L=R.value,A=R.setValue,I=R.config,y=R.readonly,C=R.placeholder,M=R.maxLength,b=R.customProps,D=function(J){var U=J.target.value;U===""&&(U=void 0),A(U)},x=L||"";return S.default.createElement("input",(0,O.default)({type:"text",value:x,placeholder:C,disabled:y,onChange:D,maxLength:M},b))};i.default=o},76435:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(70764)),S=n(e(39953)),o=function(R){var L=R.value,A=R.setValue,I=R.config,y=R.readonly,C=R.placeholder,M=R.maxLength,b=R.maxRows,D=R.fullWidth,x=R.customProps,F=function(W){var V=W.target.value;V===""&&(V=void 0),A(V)},J=L||"";return S.default.createElement("textarea",(0,O.default)({value:J,placeholder:C,disabled:y,onChange:F,maxLength:M,style:{width:D?"100%":void 0}},x))};i.default=o},23888:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(70764)),S=n(e(39953)),o=function(R){var L=R.value,A=R.setValue,I=R.config,y=R.valueFormat,C=R.use12Hours,M=R.readonly,b=R.customProps,D=function(F){var J=F.target.value;J==""&&(J=void 0),A(J)};return S.default.createElement("input",(0,O.default)({type:"time",value:L||"",disabled:M,onChange:D},b))};i.default=o},51305:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.stringifyForDisplay=i.mongoFormatOp2=i.mongoFormatOp1=i.default=void 0;var S=n(e(47552)),o=n(e(39953)),N=M(e(77731)),R=M(e(46177)),L=e(19302),A=e(12461),I=n(e(52291)),y=e(22821);function C(a){if(typeof WeakMap!="function")return null;var r=new WeakMap,d=new WeakMap;return(C=function(P){return P?d:r})(a)}function M(a,r){if(!r&&a&&a.__esModule)return a;if(a===null||O(a)!=="object"&&typeof a!="function")return{default:a};var d=C(r);if(d&&d.has(a))return d.get(a);var c={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in a)if(G!=="default"&&Object.prototype.hasOwnProperty.call(a,G)){var q=P?Object.getOwnPropertyDescriptor(a,G):null;q&&(q.get||q.set)?Object.defineProperty(c,G,q):c[G]=a[G]}return c.default=a,d&&d.set(a,c),c}function b(a,r){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);r&&(c=c.filter(function(P){return Object.getOwnPropertyDescriptor(a,P).enumerable})),d.push.apply(d,c)}return d}function D(a){for(var r=1;r<arguments.length;r++){var d=arguments[r]!=null?arguments[r]:{};r%2?b(Object(d),!0).forEach(function(c){(0,S.default)(a,c,d[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):b(Object(d)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(d,c))})}return a}var x=N.VanillaBooleanWidget,F=N.VanillaTextWidget,J=N.VanillaTextAreaWidget,U=N.VanillaDateWidget,W=N.VanillaTimeWidget,V=N.VanillaDateTimeWidget,H=N.VanillaMultiSelectWidget,z=N.VanillaSelectWidget,$=N.VanillaNumberWidget,_=N.VanillaSliderWidget,Y=N.ValueFieldWidget,w=N.FuncWidget,T=R.ProximityOperator,v={AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(r,d,c,P){return r.size>1?(c?"NOT ":"")+"("+r.join(" "+(P?"AND":"&&")+" ")+")":(c?"NOT (":"")+r.first()+(c?")":"")},sqlFormatConj:function(r,d,c){return r.size>1?(c?"NOT ":"")+"("+r.join(" AND ")+")":(c?"NOT (":"")+r.first()+(c?")":"")},spelFormatConj:function(r,d,c,P){return c&&(P=!1),r.size>1?(c?"!":"")+(P?"":"(")+r.join(" && ")+(P?"":")"):(c?"!(":"")+r.first()+(c?")":"")}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(r,d,c,P){return r.size>1?(c?"NOT ":"")+"("+r.join(" "+(P?"OR":"||")+" ")+")":(c?"NOT (":"")+r.first()+(c?")":"")},sqlFormatConj:function(r,d,c){return r.size>1?(c?"NOT ":"")+"("+r.join(" OR ")+")":(c?"NOT (":"")+r.first()+(c?")":"")},spelFormatConj:function(r,d,c,P){return c&&(P=!1),r.size>1?(c?"!":"")+(P?"":"(")+r.join(" || ")+(P?"":")"):(c?"!(":"")+r.first()+(c?")":"")}}},l=function(r,d,c,P,G,q,Z,j,K,k,Q,ae){var oe=typeof P=="string"&&!P.startsWith("$")?"$"+P:P,le=d(q,ae);if(le!==void 0)return c?!Z&&(!r||r=="$eq")?(0,S.default)({},P,{$ne:le}):Z?{$not:(0,S.default)({},r,[oe,le])}:(0,S.default)({},P,{$not:(0,S.default)({},r,le)}):!Z&&(!r||r=="$eq")?(0,S.default)({},P,le):Z?(0,S.default)({},r,[oe,le]):(0,S.default)({},P,(0,S.default)({},r,le))};i.mongoFormatOp1=l;var p=function(r,d,c,P,G,q,Z,j,K,k,Q){var ae=typeof c=="string"&&!c.startsWith("$")?"$"+c:c;if(d){var oe;return q?{$not:{$and:[(0,S.default)({},r[0],[ae,G[0]]),(0,S.default)({},r[1],[ae,G[1]])]}}:(0,S.default)({},c,{$not:(oe={},(0,S.default)(oe,r[0],G[0]),(0,S.default)(oe,r[1],G[1]),oe)})}else{var le;return q?{$and:[(0,S.default)({},r[0],[ae,G[0]]),(0,S.default)({},r[1],[ae,G[1]])]}:(0,S.default)({},c,(le={},(0,S.default)(le,r[0],G[0]),(0,S.default)(le,r[1],G[1]),le))}};i.mongoFormatOp2=p;var s={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(r,d,c,P,G,q,Z,j,K){var k=j?"=":q.label;return G=="boolean"&&j?c=="No"?"NOT ".concat(r):"".concat(r):"".concat(r," ").concat(k," ").concat(c)},mongoFormatOp:l.bind(null,"$eq",function(a){return a},!1),jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(r,d,c,P,G,q,Z,j,K){return G=="boolean"&&j?c=="No"?"".concat(r):"NOT ".concat(r):"".concat(r," ").concat(q.label," ").concat(c)},mongoFormatOp:l.bind(null,"$ne",function(a){return a},!1),jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:l.bind(null,"$lt",function(a){return a},!1),jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:l.bind(null,"$lte",function(a){return a},!1),jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:l.bind(null,"$gt",function(a){return a},!1),jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:l.bind(null,"$gte",function(a){return a},!1),jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:".contains",spelOps:["matches",".contains"],mongoFormatOp:l.bind(null,"$regex",function(a){return typeof a=="string"?(0,A.escapeRegExp)(a):void 0},!1),jsonLogic:"in",_jsonLogicIsRevArgs:!0,valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:l.bind(null,"$regex",function(a){return typeof a=="string"?(0,A.escapeRegExp)(a):void 0},!0),valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:".startsWith",spelOps:["matches",".startsWith"],mongoFormatOp:l.bind(null,"$regex",function(a){return typeof a=="string"?"^"+(0,A.escapeRegExp)(a):void 0},!1),jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:".endsWith",spelOps:["matches",".endsWith"],mongoFormatOp:l.bind(null,"$regex",function(a){return typeof a=="string"?(0,A.escapeRegExp)(a)+"$":void 0},!1),jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(r,d,c,P,G,q,Z,j){var K=c.first(),k=c.get(1);return j?"".concat(r," BETWEEN ").concat(K," AND ").concat(k):"".concat(r," >= ").concat(K," && ").concat(r," <= ").concat(k)},spelFormatOp:function(r,d,c,P,G,q,Z,j){var K=c[0],k=c[1];return"".concat(r," >= ").concat(K," && ").concat(r," <= ").concat(k)},mongoFormatOp:p.bind(null,["$gte","$lte"],!1),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(r){return r[0]!=null&&r[1]!=null?r[0]<=r[1]?null:"Invalid range":null},elasticSearchQueryType:function(r){return r==="time"?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(r,d,c,P,G,q,Z,j){var K=c.first(),k=c.get(1);return j?"".concat(r," NOT BETWEEN ").concat(K," AND ").concat(k):"(".concat(r," < ").concat(K," || ").concat(r," > ").concat(k,")")},spelFormatOp:function(r,d,c,P,G,q,Z,j){var K=c[0],k=c[1];return"(".concat(r," < ").concat(K," || ").concat(r," > ").concat(k,")")},mongoFormatOp:p.bind(null,["$gte","$lte"],!0),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",validateValues:function(r){return r[0]!=null&&r[1]!=null?r[0]<=r[1]?null:"Invalid range":null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(r,d,c,P,G,q,Z,j){return j?"".concat(r," IS EMPTY"):"!".concat(r)},sqlFormatOp:function(r,d,c,P,G,q,Z,j){var K=(0,L.sqlEmptyValue)(j);return"COALESCE(".concat(r,", ").concat(K,") = ").concat(K)},spelFormatOp:function(r,d,c,P,G,q,Z,j){return"".concat(r," <= ''")},mongoFormatOp:l.bind(null,"$in",function(a,r){return[(0,L.mongoEmptyValue)(r),null]},!1),jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(r,d,c,P,G,q,Z,j){return j?"".concat(r," IS NOT EMPTY"):"!!".concat(r)},sqlFormatOp:function(r,d,c,P,G,q,Z,j){var K=(0,L.sqlEmptyValue)(j);return"COALESCE(".concat(r,", ").concat(K,") <> ").concat(K)},spelFormatOp:function(r,d,c,P,G,q,Z,j){return"".concat(r," > ''")},mongoFormatOp:l.bind(null,"$nin",function(a,r){return[(0,L.mongoEmptyValue)(r),null]},!1),jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(r,d,c,P,G,q,Z,j){return j?"".concat(r," IS NULL"):"!".concat(r)},spelFormatOp:function(r,d,c,P,G,q,Z,j){return"".concat(r," == null")},mongoFormatOp:l.bind(null,"$eq",function(a){return null},!1),jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(r,d,c,P,G,q,Z,j){return j?"".concat(r," IS NOT NULL"):"!!".concat(r)},spelFormatOp:function(r,d,c,P,G,q,Z,j){return"".concat(r," != null")},mongoFormatOp:l.bind(null,"$ne",function(a){return null},!1),jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(r,d,c,P,G,q,Z,j){var K=j?"=":"==";return"".concat(r," ").concat(K," ").concat(c)},spelOp:"==",spelOps:["==","eq"],mongoFormatOp:l.bind(null,"$eq",function(a){return a},!1),reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(r,d,c,P,G,q,Z,j){return"".concat(r," != ").concat(c)},spelOp:"!=",spelOps:["!=","ne"],mongoFormatOp:l.bind(null,"$ne",function(a){return a},!1),reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(r,d,c,P,G,q,Z,j){return P=="value"?"".concat(r," IN (").concat(c.join(", "),")"):"".concat(r," IN (").concat(c,")")},sqlFormatOp:function(r,d,c,P,G,q,Z,j){if(P=="value")return"".concat(r," IN (").concat(c.join(", "),")")},spelOp:"$contains",mongoFormatOp:l.bind(null,"$in",function(a){return a},!1),reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(r,d,c,P,G,q,Z,j){return P=="value"?"".concat(r," NOT IN (").concat(c.join(", "),")"):"".concat(r," NOT IN (").concat(c,")")},sqlFormatOp:function(r,d,c,P,G,q,Z,j){if(P=="value")return"".concat(r," NOT IN (").concat(c.join(", "),")")},mongoFormatOp:l.bind(null,"$nin",function(a){return a},!1),reversedOp:"select_any_in"},multiselect_contains:{label:"Contains",labelForFormat:"CONTAINS",formatOp:function(r,d,c,P,G,q,Z,j){return P=="value"?"".concat(r," CONTAINS [").concat(c.join(", "),"]"):"".concat(r," CONTAINS ").concat(c)},reversedOp:"multiselect_not_contains",jsonLogic2:"some-in",jsonLogic:function(r,d,c){return{some:[r,{in:[{var:""},c]}]}},spelOp:"CollectionUtils.containsAny()",elasticSearchQueryType:"term",mongoFormatOp:l.bind(null,"$in",function(a){return a},!1)},multiselect_not_contains:{isNotOp:!0,label:"Not contains",labelForFormat:"NOT CONTAINS",formatOp:function(r,d,c,P,G,q,Z,j){return P=="value"?"".concat(r," NOT CONTAINS [").concat(c.join(", "),"]"):"".concat(r," NOT CONTAINS ").concat(c)},reversedOp:"multiselect_contains"},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(r,d,c,P,G,q,Z,j){var K=j?"=":"==";return P=="value"?"".concat(r," ").concat(K," [").concat(c.join(", "),"]"):"".concat(r," ").concat(K," ").concat(c)},sqlFormatOp:function(r,d,c,P,G,q,Z,j){if(P=="value")return"".concat(r," = '").concat(c.map(function(K){return L.SqlString.trim(K)}).join(","),"'")},spelOp:".equals",mongoFormatOp:l.bind(null,"$eq",function(a){return a},!1),reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(r,d,c){return{all:[r,{in:[{var:""},c]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(r,d,c,P,G,q,Z,j){return P=="value"?"".concat(r," != [").concat(c.join(", "),"]"):"".concat(r," != ").concat(c)},sqlFormatOp:function(r,d,c,P,G,q,Z,j){if(P=="value")return"".concat(r," != '").concat(c.map(function(K){return L.SqlString.trim(K)}).join(","),"'")},mongoFormatOp:l.bind(null,"$ne",function(a){return a},!1),reversedOp:"multiselect_equals"},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(r,d,c,P,G,q,Z,j){var K=c.first(),k=c.get(1),Q=Z.get("proximity");return"".concat(r," ").concat(K," NEAR/").concat(Q," ").concat(k)},sqlFormatOp:function(r,d,c,P,G,q,Z,j){var K=c.first(),k=c.get(1),Q=L.SqlString.trim(K),ae=L.SqlString.trim(k),oe=Z.get("proximity");return"CONTAINS(".concat(r,", 'NEAR((").concat(Q,", ").concat(ae,"), ").concat(oe,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",factory:function(r){return o.default.createElement(T,r)},minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(r){return"".concat(r," > 0")},mongoFormatOp:l.bind(null,"$gt",function(a){return 0},!1)},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(r,d,c){return"".concat(r," == ").concat(c)},mongoFormatOp:l.bind(null,"$eq",function(a){return a},!1)},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(r){return"".concat(r," == 0")},mongoFormatOp:l.bind(null,"$eq",function(a){return 0},!1)}},u=function(r){return r==null?"NULL":r.toString()};i.stringifyForDisplay=u;var g={text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",factory:function(r){return o.default.createElement(F,r)},formatValue:function(r,d,c,P){return P?u(r):JSON.stringify(r)},spelFormatValue:function(r,d,c,P,G){if(G.spelOp=="matches"&&P!="regex"){var q;return P=="starts_with"?q="(?s)^".concat((0,A.escapeRegExp)(r),".*"):P=="ends_with"?q="(?s).*".concat((0,A.escapeRegExp)(r),"$"):q="(?s).*".concat((0,A.escapeRegExp)(r),".*"),(0,L.spelEscape)(q)}else return(0,L.spelEscape)(r)},sqlFormatValue:function(r,d,c,P,G){return G.sqlOp=="LIKE"||G.sqlOp=="NOT LIKE"?L.SqlString.escapeLike(r,P!="starts_with",P!="ends_with"):L.SqlString.escape(r)},toJS:function(r,d){return r},mongoFormatValue:function(r,d,c){return r}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",factory:function(r){return o.default.createElement(J,r)},formatValue:function(r,d,c,P){return P?u(r):JSON.stringify(r)},sqlFormatValue:function(r,d,c,P,G){return G.sqlOp=="LIKE"||G.sqlOp=="NOT LIKE"?L.SqlString.escapeLike(r,P!="starts_with",P!="ends_with"):L.SqlString.escape(r)},spelFormatValue:function(r){return(0,L.spelEscape)(r)},toJS:function(r,d){return r},mongoFormatValue:function(r,d,c){return r},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",factory:function(r){return o.default.createElement($,r)},valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(r,d,c,P){return P?u(r):JSON.stringify(r)},sqlFormatValue:function(r,d,c,P,G){return L.SqlString.escape(r)},spelFormatValue:function(r,d,c){var P=c.step&&!Number.isInteger(c.step);return(0,L.spelEscape)(r,P)},toJS:function(r,d){return r},mongoFormatValue:function(r,d,c){return r}},slider:{type:"number",jsType:"number",valueSrc:"value",factory:function(r){return o.default.createElement(_,r)},valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(r,d,c,P){return P?u(r):JSON.stringify(r)},sqlFormatValue:function(r,d,c,P,G){return L.SqlString.escape(r)},spelFormatValue:function(r){return(0,L.spelEscape)(r)},toJS:function(r,d){return r},mongoFormatValue:function(r,d,c){return r}},select:{type:"select",jsType:"string",valueSrc:"value",factory:function(r){return o.default.createElement(z,r)},valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(r,d,c,P){var G=(0,A.getTitleInListValues)(d.fieldSettings.listValues||d.asyncListValues,r);return P?u(G):JSON.stringify(r)},sqlFormatValue:function(r,d,c,P,G){return L.SqlString.escape(r)},spelFormatValue:function(r){return(0,L.spelEscape)(r)},toJS:function(r,d){return r},mongoFormatValue:function(r,d,c){return r}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",factory:function(r){return o.default.createElement(H,r)},valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(r,d,c,P){var G=r.map(function(q){return(0,A.getTitleInListValues)(d.fieldSettings.listValues||d.asyncListValues,q)});return P?G.map(u):r.map(JSON.stringify)},sqlFormatValue:function(r,d,c,P,G){return r.map(function(q){return L.SqlString.escape(q)})},spelFormatValue:function(r,d,c,P,G){var q=G.spelOp&&G.spelOp[0]=="$",Z=(0,L.spelEscape)(r);return q&&(Z=(0,L.spelFixList)(Z)),Z},toJS:function(r,d){return r},mongoFormatValue:function(r,d,c){return r}},date:{type:"date",jsType:"string",valueSrc:"value",factory:function(r){return o.default.createElement(U,r)},dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",useKeyboard:!0,valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(r,d,c,P){var G=(0,I.default)(r,c.valueFormat);return P?G.format(c.dateFormat):JSON.stringify(r)},sqlFormatValue:function(r,d,c,P,G){var q=(0,I.default)(r,c.valueFormat);return L.SqlString.escape(q.format("YYYY-MM-DD"))},spelFormatValue:function(r,d,c,P,G){var q=(0,I.default)(r,c.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd').parse('".concat(q.format("YYYY-MM-DD"),"')")},jsonLogic:function(r,d,c){return(0,I.default)(r,c.valueFormat).toDate()},toJS:function(r,d){var c=(0,I.default)(r,d.valueFormat);return c.isValid()?c.toDate():void 0},mongoFormatValue:function(r,d,c){var P=(0,I.default)(r,c.valueFormat);return P.isValid()?P.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",factory:function(r){return o.default.createElement(W,r)},timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(r,d,c,P){var G=(0,I.default)(r,c.valueFormat);return P?G.format(c.timeFormat):JSON.stringify(r)},sqlFormatValue:function(r,d,c,P,G){var q=(0,I.default)(r,c.valueFormat);return L.SqlString.escape(q.format("HH:mm:ss"))},spelFormatValue:function(r,d,c,P,G){var q=(0,I.default)(r,c.valueFormat);return"T(java.time.LocalTime).parse('".concat(q.format("HH:mm:ss"),"')")},jsonLogic:function(r,d,c){var P=(0,I.default)(r,c.valueFormat);return P.get("hour")*60*60+P.get("minute")*60+P.get("second")},toJS:function(r,d){var c=(0,I.default)(r,d.valueFormat);return c.isValid()?c.get("hour")*60*60+c.get("minute")*60+c.get("second"):void 0},mongoFormatValue:function(r,d,c){var P=(0,I.default)(r,c.valueFormat);return P.get("hour")*60*60+P.get("minute")*60+P.get("second")},elasticSearchFormatValue:function(r,d,c,P){return{script:{script:{source:"doc[".concat(P,"][0].getHour() >== params.min && doc[").concat(P,"][0].getHour() <== params.max"),params:{min:d[0],max:d[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",factory:function(r){return o.default.createElement(V,r)},timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(r,d,c,P){var G=(0,I.default)(r,c.valueFormat);return P?G.format(c.dateFormat+" "+c.timeFormat):JSON.stringify(r)},sqlFormatValue:function(r,d,c,P,G){var q=(0,I.default)(r,c.valueFormat);return L.SqlString.escape(q.toDate())},spelFormatValue:function(r,d,c,P,G){var q=(0,I.default)(r,c.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd HH:mm:ss').parse('".concat(q.format("YYYY-MM-DD HH:mm:ss"),"')")},jsonLogic:function(r,d,c){return(0,I.default)(r,c.valueFormat).toDate()},toJS:function(r,d){var c=(0,I.default)(r,d.valueFormat);return c.isValid()?c.toDate():void 0},mongoFormatValue:function(r,d,c){var P=(0,I.default)(r,c.valueFormat);return P.isValid()?P.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",factory:function(r){return o.default.createElement(x,r)},labelYes:"Yes",labelNo:"No",formatValue:function(r,d,c,P){return P?r?"Yes":"No":JSON.stringify(!!r)},sqlFormatValue:function(r,d,c,P,G){return L.SqlString.escape(r)},spelFormatValue:function(r,d,c,P,G){return(0,L.spelEscape)(r)},defaultValue:!1,toJS:function(r,d){return r},mongoFormatValue:function(r,d,c){return r}},field:{valueSrc:"field",factory:function(r){return o.default.createElement(Y,r)},formatValue:function(r,d,c,P,G,q,Z){return P&&Z.label||r},sqlFormatValue:function(r,d,c,P,G,q){return r},spelFormatValue:function(r,d,c,P,G){return r},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare",customProps:{showSearch:!0}},func:{valueSrc:"func",factory:function(r){return o.default.createElement(w,r)},valueLabel:"Function",valuePlaceholder:"Select function",customProps:{}},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(r){return(0,L.spelEscape)(r===""?null:r)},spelImportValue:function(r){return[r.value,[]]},factory:function(r){var d=r.value,c=r.setValue;return o.default.createElement("input",{type:"text",value:d||"",onChange:function(G){return c(G.target.value)}})}}},m={text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"],widgetProps:{customProps:{showSearch:!0}}},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_contains","multiselect_not_contains","multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{}}}},E=D(D({},y.settings),{},{formatField:function(r,d,c,P,G,q){return q?c:r},formatSpelField:function(r,d,c,P,G,q){var Z=P.map(function(j,K){var k=j.key,Q=j.parent;return K==0?Q=="[map]"?"#this[".concat((0,L.spelEscape)(k),"]"):(Q=="[class]",k):Q=="map"||Q=="[map]"?"[".concat((0,L.spelEscape)(k),"]"):(Q=="class"||Q=="[class]",".".concat(k))}).join("");return G.isSpelVariable&&(Z="#"+Z),Z},sqlFormatReverse:function(r){if(r!=null)return"NOT("+r+")"},spelFormatReverse:function(r){if(r!=null)return"!("+r+")"},formatReverse:function(r,d,c,P,G,q){if(r!=null)return q?"NOT ("+r+")":"!("+r+")"},formatAggr:function(r,d,c,P,G,q,Z,j,K,k){var Q=Z.labelForFormat,ae=Z.cardinality;if(ae==0){var oe=r?" HAVE ".concat(r):"";return"".concat(Q," OF ").concat(d).concat(oe)}else if(ae==null||ae==1){var le=r?" WHERE ".concat(r):"";return"COUNT OF ".concat(d).concat(le," ").concat(Q," ").concat(P)}else if(ae==2){var ue=r?" WHERE ".concat(r):"",he=P.first(),pe=P.get(1);return"COUNT OF ".concat(d).concat(ue," ").concat(Q," ").concat(he," AND ").concat(pe)}},canCompareFieldWithField:function(r,d,c,P){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}},customFieldSelectProps:{showSearch:!0},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5}),f={conjunctions:v,operators:s,widgets:g,types:m,settings:E};i.default=f},22821:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.settings=void 0;var S=R(e(77731)),o=n(e(39953));function N(F){if(typeof WeakMap!="function")return null;var J=new WeakMap,U=new WeakMap;return(N=function(V){return V?U:J})(F)}function R(F,J){if(!J&&F&&F.__esModule)return F;if(F===null||O(F)!=="object"&&typeof F!="function")return{default:F};var U=N(J);if(U&&U.has(F))return U.get(F);var W={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in F)if(H!=="default"&&Object.prototype.hasOwnProperty.call(F,H)){var z=V?Object.getOwnPropertyDescriptor(F,H):null;z&&(z.get||z.set)?Object.defineProperty(W,H,z):W[H]=F[H]}return W.default=F,U&&U.set(F,W),W}var L=S.VanillaFieldSelect,A=S.VanillaConjs,I=S.VanillaButton,y=S.VanillaButtonGroup,C=S.VanillaProvider,M=S.VanillaValueSources,b=S.vanillaConfirm,D=S.VanillaSwitch,x={formatField:function(J,U,W,V,H,z){return z?W:J},renderField:function(J){return o.default.createElement(L,J)},renderOperator:function(J){return o.default.createElement(L,J)},renderFunc:function(J){return o.default.createElement(L,J)},renderConjs:function(J){return o.default.createElement(A,J)},renderSwitch:function(J){return o.default.createElement(D,J)},renderButton:function(J){return o.default.createElement(I,J)},renderButtonGroup:function(J){return o.default.createElement(y,J)},renderProvider:function(J){return o.default.createElement(C,J)},renderValueSources:function(J){return o.default.createElement(M,J)},renderConfirm:b,renderSwitchPrefix:function(){return o.default.createElement(o.default.Fragment,null,"Conditions")},valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",renderSize:"small",maxLabelsLength:100,canReorder:!0,canRegroup:!0,showLock:!1,canDeleteLocked:!1,showNot:!0,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,forceShowConj:!1,canShortMongoQuery:!0,removeEmptyGroupsOnLoad:!0,removeIncompleteRulesOnLoad:!0,removeInvalidMultiSelectValuesOnLoad:!0,groupActionsPosition:"topRight",setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:null,addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",delGroupLabel:"",notLabel:"Not",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null,defaultGroupConjunction:"AND",jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"}};i.settings=x},34850:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.UPPER=i.RELATIVE_DATETIME=i.NOW=i.LOWER=i.LINEAR_REGRESSION=void 0;var O=n(e(52291)),S={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:function(){return new Date}},spelFunc:"new java.util.Date()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}};i.NOW=S;var o={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],jsonLogic:function(I){var y=I.date,C=I.op,M=I.val,b=I.dim;return{date_add:[y,M*(C=="minus"?-1:1),b]}},jsonLogicImport:function(I){var y=I.date_add[0],C=Math.abs(I.date_add[1]),M=I.date_add[1]>=0?"plus":"minus",b=I.date_add[2];return[y,M,C,b]},jsonLogicCustomOps:{date_add:function(I,y,C){return(0,O.default)(I).add(y,C).toDate()}},sqlFormatFunc:function(I){var y=I.date,C=I.op,M=I.val,b=I.dim;return"DATE_ADD(".concat(y,", INTERVAL ").concat(parseInt(M)*(C=="minus"?-1:1)," ").concat(b.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(I){var y=I.date,C=I.op,M=I.val,b=I.dim;return M?"".concat(y," ").concat(C=="minus"?"-":"+"," ").concat(M," ").concat(b):y},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field"]},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}}},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"]},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}}}}};i.RELATIVE_DATETIME=o;var N={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:".toLowerCase",jsonLogicCustomOps:{toLowerCase:function(I){return I.toLowerCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};i.LOWER=N;var R={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:".toUpperCase",jsonLogicCustomOps:{toUpperCase:function(I){return I.toUpperCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};i.UPPER=R;var L={label:"Linear regression",returnType:"number",formatFunc:function(I,y){var C=I.coef,M=I.bias,b=I.val;return"(".concat(C," * ").concat(b," + ").concat(M,")")},sqlFormatFunc:function(I){var y=I.coef,C=I.bias,M=I.val;return"(".concat(y," * ").concat(M," + ").concat(C,")")},spelFormatFunc:function(I){var y=I.coef,C=I.bias,M=I.val;return"(".concat(y," * ").concat(M," + ").concat(C,")")},mongoFormatFunc:function(I){var y=I.coef,C=I.bias,M=I.val;return{$sum:[{$multiply:[y,M]},C]}},jsonLogic:function(I){var y=I.coef,C=I.bias,M=I.val;return{"+":[{"*":[y,M]},C]}},jsonLogicImport:function(I){var y=I["+"][0]["*"][0],C=I["+"][0]["*"][1],M=I["+"][1];return[y,C,M]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}};i.LINEAR_REGRESSION=L},5166:(re,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SET_VALUE_SRC=i.SET_VALUE=i.SET_TREE=i.SET_OPERATOR_OPTION=i.SET_OPERATOR=i.SET_NOT=i.SET_LOCK=i.SET_FIELD=i.SET_DRAG_START=i.SET_DRAG_PROGRESS=i.SET_DRAG_END=i.SET_CONJUNCTION=i.REMOVE_RULE=i.REMOVE_GROUP=i.PLACEMENT_PREPEND=i.PLACEMENT_BEFORE=i.PLACEMENT_APPEND=i.PLACEMENT_AFTER=i.MOVE_ITEM=i.ADD_RULE=i.ADD_GROUP=i.ADD_CASE_GROUP=void 0;var e="ADD_GROUP";i.ADD_GROUP=e;var n="ADD_CASE_GROUP";i.ADD_CASE_GROUP=n;var O="REMOVE_GROUP";i.REMOVE_GROUP=O;var S="SET_CONJUNCTION";i.SET_CONJUNCTION=S;var o="SET_NOT";i.SET_NOT=o;var N="ADD_RULE";i.ADD_RULE=N;var R="REMOVE_RULE";i.REMOVE_RULE=R;var L="SET_FIELD";i.SET_FIELD=L;var A="SET_OPERATOR";i.SET_OPERATOR=A;var I="SET_VALUE";i.SET_VALUE=I;var y="SET_VALUE_SRC";i.SET_VALUE_SRC=y;var C="SET_OPERATOR_OPTION";i.SET_OPERATOR_OPTION=C;var M="SET_LOCK";i.SET_LOCK=M;var b="SET_TREE";i.SET_TREE=b;var D="MOVE_ITEM";i.MOVE_ITEM=D;var x="after";i.PLACEMENT_AFTER=x;var F="before";i.PLACEMENT_BEFORE=F;var J="append";i.PLACEMENT_APPEND=J;var U="prepend";i.PLACEMENT_PREPEND=U;var W="SET_DRAG_PROGRESS";i.SET_DRAG_PROGRESS=W;var V="SET_DRAG_START";i.SET_DRAG_START=V;var H="SET_DRAG_END";i.SET_DRAG_END=H},93905:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.elasticSearchFormat=J;var O=n(e(47552)),S=e(1694),o=e(26749);function N(U,W){var V=Object.keys(U);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(U);W&&(H=H.filter(function(z){return Object.getOwnPropertyDescriptor(U,z).enumerable})),V.push.apply(V,H)}return V}function R(U){for(var W=1;W<arguments.length;W++){var V=arguments[W]!=null?arguments[W]:{};W%2?N(Object(V),!0).forEach(function(H){(0,O.default)(U,H,V[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(V)):N(Object(V)).forEach(function(H){Object.defineProperty(U,H,Object.getOwnPropertyDescriptor(V,H))})}return U}function L(U){if(U==null)return null;var W=U.split(",").map(Number);return{top_left:{lat:W[0],lon:W[1]},bottom_right:{lat:W[2],lon:W[3]}}}function A(U,W){if(U.length>1)return{gte:"".concat(U[0]),lte:"".concat(U[1])};var V=U[0];switch(W){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(V,"||/d"),lte:"".concat(V,"||+1d")};case"less_or_equal":return{lte:"".concat(V)};case"greater_or_equal":return{gte:"".concat(V)};case"less":return{lt:"".concat(V)};case"greater":return{gt:"".concat(V)};default:return}}function I(U){return{value:"*"+U+"*"}}function y(U,W){switch(U){case"AND":return W?"must_not":"must";case"OR":return W?"should_not":"should";case"NOT":return W?"must":"must_not";default:return}}function C(U,W,V){if(U==="boolean")return W;switch(V){case"term":case"wildcard":return"".concat(W,".keyword");case"geo_bounding_box":case"range":case"match":return W;default:return console.error("Can't determine query field for query type ".concat(V)),null}}function M(U){return{value:U}}function b(U,W){return U}function D(U,W,V,H,z){var $=b(H,z);switch(U){case"filter":return{script:z.operators[V].elasticSearchScript(H,W)};case"exists":return{field:H};case"match":return(0,O.default)({},$,W[0]);case"term":return(0,O.default)({},H,W[0]);case"geo_bounding_box":return(0,O.default)({},H,L(W[0]));case"range":return(0,O.default)({},H,A(W,V));case"wildcard":return(0,O.default)({},H,I(W[0]));case"regexp":return(0,O.default)({},H,M(W[0]));default:return}}function x(U,W,V,H,z){if(!(!U||!V||W==null)){var $=V,_=H.operators[$];if(_){var Y=_,w=Y.elasticSearchQueryType,T=!1;if(!w&&_.reversedOp){T=!0,$=_.reversedOp,_=H.operators[$];var v=_;w=v.elasticSearchQueryType}var l=(0,S.getWidgetForFieldOp)(H,U,$,z),p=H.widgets[l];if(p){var s=p.elasticSearchFormatValue,u;if(typeof w=="function"?u=w(l):u=w,!!u){var g;return typeof s=="function"?g=s(u,W,$,U,H):g=D(u,W,$,U,H),T?{bool:{must_not:(0,O.default)({},u,R({},g))}}:(0,O.default)({},u,R({},g))}}}}}function F(U,W,V,H,z){if(!(!U||!U.size)){var $=U.valueSeq().toArray(),_=y(W,V),Y=$.map(function(T){return H(T,z)}).filter(function(T){return T!==void 0});if(Y.length){var w=Y.flat(1/0);return{bool:(0,O.default)({},_,w)}}}}function J(U,W){if(U){var V=U.get("type"),H=U.get("properties")||new Map;if(V==="rule"&&H.get("field")){var z,$,_=H.get("operator"),Y=H.get("field"),w=H.get("value").toJS(),T=(z=H.get("valueType"))===null||z===void 0?void 0:z.get(0),v=($=H.get("valueSrc"))===null||$===void 0?void 0:$.get(0);return v==="func"?void 0:w&&Array.isArray(w[0])?w[0].map(function(u){return x(Y,[u],_,W,v)}):x(Y,w,_,W,v)}if(V==="group"||V==="rule_group"){var l=H.get("not"),p=H.get("conjunction");p||(p=(0,o.defaultConjunction)(W));var s=U.get("children1");return F(s,p,l,J,W)}}}},66353:(re,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e(43799);Object.keys(n).forEach(function(A){A==="default"||A==="__esModule"||A in i&&i[A]===n[A]||Object.defineProperty(i,A,{enumerable:!0,get:function(){return n[A]}})});var O=e(45546);Object.keys(O).forEach(function(A){A==="default"||A==="__esModule"||A in i&&i[A]===O[A]||Object.defineProperty(i,A,{enumerable:!0,get:function(){return O[A]}})});var S=e(88224);Object.keys(S).forEach(function(A){A==="default"||A==="__esModule"||A in i&&i[A]===S[A]||Object.defineProperty(i,A,{enumerable:!0,get:function(){return S[A]}})});var o=e(4144);Object.keys(o).forEach(function(A){A==="default"||A==="__esModule"||A in i&&i[A]===o[A]||Object.defineProperty(i,A,{enumerable:!0,get:function(){return o[A]}})});var N=e(2778);Object.keys(N).forEach(function(A){A==="default"||A==="__esModule"||A in i&&i[A]===N[A]||Object.defineProperty(i,A,{enumerable:!0,get:function(){return N[A]}})});var R=e(83125);Object.keys(R).forEach(function(A){A==="default"||A==="__esModule"||A in i&&i[A]===R[A]||Object.defineProperty(i,A,{enumerable:!0,get:function(){return R[A]}})});var L=e(93905);Object.keys(L).forEach(function(A){A==="default"||A==="__esModule"||A in i&&i[A]===L[A]||Object.defineProperty(i,A,{enumerable:!0,get:function(){return L[A]}})})},45546:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.jsonLogicFormat=void 0;var O=n(e(68148)),S=n(e(47552)),o=e(12461),N=e(58560),R=e(1694),L=e(26749),A=e(84275),I=e(7134),y=n(e(96406)),C=n(e(48289));function M(T,v){var l=Object.keys(T);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(T);v&&(p=p.filter(function(s){return Object.getOwnPropertyDescriptor(T,s).enumerable})),l.push.apply(l,p)}return l}function b(T){for(var v=1;v<arguments.length;v++){var l=arguments[v]!=null?arguments[v]:{};v%2?M(Object(l),!0).forEach(function(p){(0,S.default)(T,p,l[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(l)):M(Object(l)).forEach(function(p){Object.defineProperty(T,p,Object.getOwnPropertyDescriptor(l,p))})}return T}function D(T,v){var l=typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(!l){if(Array.isArray(T)||(l=x(T))||v&&T&&typeof T.length=="number"){l&&(T=l);var p=0,s=function(){};return{s,n:function(){return p>=T.length?{done:!0}:{done:!1,value:T[p++]}},e:function(f){throw f},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,g=!1,m;return{s:function(){l=l.call(T)},n:function(){var f=l.next();return u=f.done,f},e:function(f){g=!0,m=f},f:function(){try{!u&&l.return!=null&&l.return()}finally{if(g)throw m}}}}function x(T,v){if(T){if(typeof T=="string")return F(T,v);var l=Object.prototype.toString.call(T).slice(8,-1);if(l==="Object"&&T.constructor&&(l=T.constructor.name),l==="Map"||l==="Set")return Array.from(T);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return F(T,v)}}function F(T,v){(v==null||v>T.length)&&(v=T.length);for(var l=0,p=new Array(v);l<v;l++)p[l]=T[l];return p}var J=function(v,l){var p={usedFields:[],errors:[]},s=U(v,l,p,!0),u=p.errors,g=p.usedFields,m=l.settings.fieldSeparator,E={},f=D(g),a;try{for(f.s();!(a=f.n()).done;)for(var r=a.value,d=(0,N.getFieldConfig)(l,r)||{},c=r.split(m),P=E,G=0;G<c.length;G++){var q=c[G],Z=(0,N.getFieldConfig)(l,c.slice(0,G+1))||{};G!=c.length-1?Z.type=="!group"&&Z.mode!="struct"?(P[q]||(P[q]=[{}]),P=P[q][0]):(P[q]||(P[q]={}),P=P[q]):P[q]||(P[q]=null)}}catch(j){f.e(j)}finally{f.f()}return{errors:u,logic:s,data:E}};i.jsonLogicFormat=J;var U=function(v,l,p,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(v){var g=v.get("type"),m=v.get("properties")||new I.Map,E=m.get("isLocked"),f=l.settings.jsonLogic.lockedOp,a;return g==="group"||g==="rule_group"?a=W(v,l,p,s,u):g==="rule"&&(a=V(v,l,p,u)),E&&a&&f&&(a=(0,S.default)({},f,a)),a}},W=function(v,l,p,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,g=v.get("type"),m=v.get("properties")||new I.Map,E=m.get("mode"),f=v.get("children1"),a=m.get("field");if(f){var r=m.get("conjunction");r||(r=(0,L.defaultConjunction)(l));var d=l.conjunctions[r],c=d.jsonLogicConj||r.toLowerCase(),P=m.get("not");if(c!="and"&&c!="or"){p.errors.push("Conjunction ".concat(c," is not supported"));return}var G=g==="rule_group"&&!s,q=G&&E!="struct"?a:u,Z=m.get("operator"),j=Z&&(0,N.getOperatorConfig)(l,Z,a)||null,K=H(l,m,p,Z,u),k=G&&(!Z||j.cardinality==0),Q=f.map(function(pe){return U(pe,l,p,!1,q)}).filter(function(pe){return typeof pe<"u"});if(G&&E!="struct"&&!k){if(K==null)return}else if(!Q.size)return;var ae={};if(Q.size==1&&!s?ae=Q.first():ae[c]=Q.toList().toJS(),P&&(ae={"!":ae}),G&&E!="struct"){var oe=_(p,l,a,u);if(k){var le=Z||"some";ae=(0,S.default)({},le,[oe,ae])}else{var ue=Q.size?{filter:[oe,ae]}:oe,he={reduce:[ue,{"+":[1,{var:"accumulator"}]},0]};ae=w(l,m,he,K,Z)}}return ae}},V=function(v,l,p){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=v.get("properties")||new I.Map,g=u.get("field"),m=u.get("operator"),E=u.get("operatorOptions");if(E=E?E.toJS():null,E&&!Object.keys(E).length&&(E=null),!(g==null||m==null)){var f=(0,N.getFieldConfig)(l,g)||{},a=(0,N.getOperatorConfig)(l,m,g)||{},r=a.reversedOp,d=(0,N.getOperatorConfig)(l,r,g)||{},c=!1;if(!a.jsonLogic&&!d.jsonLogic){p.errors.push("Operator ".concat(m," is not supported"));return}if(!a.jsonLogic&&d.jsonLogic){c=!0;var P=[r,m];m=P[0],r=P[1];var G=[d,a];a=G[0],d=G[1]}var q=H(l,u,p,m,s);if(q!==void 0){var Z=_(p,l,g,s);return w(l,u,Z,q,m,E,f,c)}}},H=function(v,l,p,s,u){var g=l.get("field"),m=l.get("valueSrc"),E=l.get("valueType"),f=(0,N.getFieldConfig)(v,g)||{},a=(0,N.getOperatorConfig)(v,s,g)||{},r=(0,o.defaultValue)(a.cardinality,1),d=l.get("value"),c=l.get("asyncListValues");if(d!=null){var P=[],G=[],q=p.usedFields,Z=d.map(function(K,k){var Q=m?m.get(k):null,ae=E?E.get(k):null,oe=(0,A.completeValue)(K,Q,v),le=(0,R.getWidgetForFieldOp)(v,g,s,Q),ue=(0,y.default)((0,N.getFieldWidgetConfig)(v,g,s,le,Q),["factory"]),he=z(p,v,oe,Q,ae,ue,f,s,a,u,c);return he!==void 0&&(P.push(Q),G.push(ae)),he}),j=Z.filter(function(K){return K===void 0}).size>0;if(Z.size<r||j){p.usedFields=q;return}return r>1?Z.toArray():r==1?Z.first():null}},z=function(v,l,p,s,u,g,m,E,f){var a=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,r=arguments.length>10?arguments[10]:void 0;if(p!==void 0){var d;if(s=="field")d=_(v,l,p,a);else if(s=="func")d=$(v,l,p,a);else if(typeof g.jsonLogic=="function"){var c=g.jsonLogic,P=[p,b(b({},(0,C.default)(m,["fieldSettings","listValues"])),{},{asyncListValues:r}),(0,y.default)(g,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];E&&(P.push(E),P.push(f)),d=c.apply(void 0,P)}else d=p;return d}},$=function(v,l,p){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=p.get("func"),g=p.get("args"),m=(0,N.getFuncConfig)(l,u);if(!m.jsonLogic){v.errors.push("Func ".concat(u," is not supported"));return}var E={};for(var f in m.args){var a=m.args[f],r=(0,N.getFieldConfig)(l,a),d=g?g.get(f):void 0,c=d?d.get("value"):void 0,P=d?d.get("valueSrc"):void 0,G=z(v,l,c,P,a.type,r,a,null,null,s);if(c!=null&&G===void 0){v.errors.push("Can't format value of arg ".concat(f," for func ").concat(u));return}G!==void 0&&(E[f]=G)}var q=Object.values(E),Z;if(typeof m.jsonLogic=="function"){var j=m.jsonLogic,K=[E];Z=j.apply(void 0,K)}else{var k=m.jsonLogic||u,Q=!!m.jsonLogicIsMethod;if(Q){var ae=q[0],oe=q.slice(1);oe.length?Z={method:[ae,k,oe]}:Z={method:[ae,k]}}else Z=(0,S.default)({},k,q)}return Z},_=function(v,l,p){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=l.settings,g=u.fieldSeparator,m=u.jsonLogic,E;if(p){Array.isArray(p)&&(p=p.join(g));var f=(0,N.getFieldConfig)(l,p)||{},a=p;if(f.fieldName&&(a=f.fieldName),s){var r=(0,N.getFieldConfig)(l,s)||{},d=s;r.fieldName&&(d=r.fieldName),a.indexOf(d+g)==0?a=a.slice((d+g).length):v.errors.push("Can't cut group ".concat(d," from field ").concat(a))}var c=f.jsonLogicVar||(f.type=="!group"?m.groupVarKey:"var");E=(0,S.default)({},c,a),v.usedFields.indexOf(p)==-1&&v.usedFields.push(p)}return E},Y=function(v,l,p,s){var u=v,g=(0,o.defaultValue)(l.cardinality,1),m=(0,o.defaultValue)(l._jsonLogicIsRevArgs,!1);typeof l.jsonLogic=="string"&&(u=l.jsonLogic);var E=["<","<=",">",">="],f=["==","!="],a=function(d,c,P,G,q){return g==0&&f.includes(u)?(0,S.default)({},u,[p,null]):g==0?(0,S.default)({},u,p):g==1&&m?(0,S.default)({},u,[s,p]):g==1?(0,S.default)({},u,[p,s]):g==2&&E.includes(u)?(0,S.default)({},u,[s[0],p,s[1]]):(0,S.default)({},u,[p].concat((0,O.default)(s)))};return a},w=function(v,l,p,s,u){var g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,m=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,E=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,f=l.get("field"),a=(0,N.getOperatorConfig)(v,u,f)||{},r=typeof a.jsonLogic=="function"?a.jsonLogic:Y(u,a,p,s),d=[p,u,s,(0,y.default)(a,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),g,m],c=r.apply(void 0,d);return E&&(c={"!":c}),c}},88224:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.mongodbFormat=i._mongodbFormat=void 0;var O=n(e(98595)),S=n(e(47552)),o=n(e(68148)),N=n(e(7818)),R=e(12461),L=e(58560),A=e(1694),I=e(26749),y=e(84275),C=n(e(96406)),M=n(e(48289)),b=e(7134),D=e(22821);function x(T,v){var l=Object.keys(T);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(T);v&&(p=p.filter(function(s){return Object.getOwnPropertyDescriptor(T,s).enumerable})),l.push.apply(l,p)}return l}function F(T){for(var v=1;v<arguments.length;v++){var l=arguments[v]!=null?arguments[v]:{};v%2?x(Object(l),!0).forEach(function(p){(0,S.default)(T,p,l[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(l)):x(Object(l)).forEach(function(p){Object.defineProperty(T,p,Object.getOwnPropertyDescriptor(l,p))})}return T}var J=function(v){return(0,N.default)(v)=="object"&&v!==null&&!Array.isArray(v)},U=function(v,l){return W(v,l,!1)};i.mongodbFormat=U;var W=function(v,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s={errors:[]},u=V([],v,l,s);return p?[u,s.errors]:(s.errors.length&&console.warn("Errors while exporting to MongoDb:",s.errors),u)};i._mongodbFormat=W;var V=function(v,l,p,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,m=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,E=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0;if(l){var f=l.get("type");if(f==="group"||f==="rule_group")return H(v,l,p,s,u,g,m,E);if(f==="rule")return z(v,l,p,s,u,g,m,E)}},H=function(v,l,p,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,m=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,E=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,f=l.get("type"),a=l.get("properties")||new b.Map,r=l.get("children1"),d=p.settings.canShortMongoQuery;if(r){var c=v.filter(function(Te){return Te.get("type")=="rule_group"}).length>0,P=v.filter(function(Te){return Te.get("type")=="rule_group"}).map(function(Te){return Te.get("properties").get("field")}).slice(-1).pop(),G=c&&P,q=f==="rule_group"?a.get("field"):null,Z=_(q,p,s,G),j=(0,L.getFieldConfig)(p,q)||{},K=j.mode,k=q&&K=="array",Q=u?!a.get("not"):a.get("not"),ae=r.map(function(Te){return V([].concat((0,o.default)(v),[l]),Te,p,s,Q,!0,K=="array"?function(be){return"$$el.".concat(be)}:void 0)}).filter(function(Te){return typeof Te<"u"});if(!(!k&&!ae.size)){var oe=a.get("conjunction");oe||(oe=(0,I.defaultConjunction)(p));var le=p.conjunctions[oe],ue=le.reversedConj;Q&&ue&&(oe=ue,le=p.conjunctions[oe]);var he=le.mongoConj,pe;if(ae.size==1)pe=ae.first();else if(ae.size>1){var ye=ae.toList().toJS(),Re=d&&he=="$and";Re&&(pe=ye.reduce(function(Te,be){if(Te){for(var We in be){if(We[0]=="$"){Te=void 0;break}if(Te[We]==null)Te[We]=be[We];else{var je=Te[We],He=be[We];J(je)||(je={$eq:je}),J(He)||(He={$eq:He});var De=Object.keys(je)[0],Ye=Object.keys(He)[0];if(De==Ye){Te=void 0;break}Te[We]=Object.assign({},je,He)}}return Te}},{})),pe||(pe=(0,S.default)({},he,ye))}if(q)if(K=="array"){var Ce={$size:Z},Ae=pe?{$size:{$filter:{input:"$"+Z,as:"el",cond:pe}}}:Ce;pe=V(v,l.set("type","rule"),p,s,!1,!1,function(Te){return Ae},Ce),pe={$expr:pe}}else pe=(0,S.default)({},Z,{$elemMatch:pe});return pe}}},z=function(v,l,p,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,m=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,E=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,f=l.get("properties")||new b.Map,a=v.filter(function(nt){return nt.get("type")=="rule_group"}).length>0,r=v.filter(function(nt){return nt.get("type")=="rule_group"}).map(function(nt){return nt.get("properties").get("field")}).slice(-1).pop(),d=a&&r,c=f.get("operator"),P=f.get("operatorOptions"),G=f.get("field"),q=f.get("value"),Z=f.get("valueSrc"),j=f.get("valueType"),K=f.get("asyncListValues");if(!(G==null||c==null||q===void 0)){var k=(0,L.getFieldConfig)(p,G)||{},Q=(0,L.getOperatorConfig)(p,c,G)||{},ae=Q.reversedOp,oe=(0,L.getOperatorConfig)(p,ae,G)||{},le=(0,R.defaultValue)(Q.cardinality,1),ue=u;if(ue&&ae){var he=[ae,c];c=he[0],ae=he[1];var pe=[oe,Q];Q=pe[0],oe=pe[1],ue=!1}var ye=_(G,p,s,d),Re=[],Ce=[],Ae=!1,Te=q.map(function(nt,ke){var ve=Z?Z.get(ke):null,Ee=j?j.get(ke):null,Ie=(0,y.completeValue)(nt,ve,p),we=(0,A.getWidgetForFieldOp)(p,G,c,ve),Ue=(0,C.default)((0,L.getFieldWidgetConfig)(p,G,c,we,ve),["factory"]),Ge=$(s,p,Ie,ve,Ee,Ue,k,d,c,Q,K),Ve=(0,O.default)(Ge,2),_e=Ve[0],ze=Ve[1];return _e!==void 0&&(Ae=Ae||ze,Re.push(ve),Ce.push(Ee)),_e});m&&(Ae=!0);var be=Ae&&g,We=Te.filter(function(nt){return nt===void 0}).size>0;if(!(Te.size<le||We)){var je=le>1?Te.toArray():le==1?Te.first():null,He=Q.mongoFormatOp;if(!He){s.errors.push("Operator ".concat(c," is not supported"));return}var De=[m?m(ye):ye,c,E!==void 0&&je==null?E:je,Ae,Re.length>1?Re:Re[0],Ce.length>1?Ce:Ce[0],(0,C.default)(Q,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),P,k],Ye=He.apply(void 0,De);return be&&(Ye={$expr:Ye}),ue&&(Ye={$not:Ye}),Ye}}},$=function(v,l,p,s,u,g,m,E,f,a,r){if(p===void 0)return[void 0,!1];var d,c=!1;if(s=="field"){var P=Y(v,l,p,E),G=(0,O.default)(P,2);d=G[0],c=G[1]}else if(s=="func"){var q=w(v,l,p,E),Z=(0,O.default)(q,2);d=Z[0],c=Z[1]}else if(typeof g.mongoFormatValue=="function"){var j=g.mongoFormatValue,K=[p,F(F({},(0,M.default)(m,["fieldSettings","listValues"])),{},{asyncListValues:r}),(0,C.default)(g,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];f&&(K.push(f),K.push(a)),d=j.apply(void 0,K)}else d=p;return[d,c]},_=function(v,l,p,s){if(v){var u=(0,L.getFieldConfig)(l,v)||{},g=l.settings.fieldSeparator,m=Array.isArray(v)?v:v.split(g),E=Array.isArray(v)?v.join(g):v;if(u.fieldName&&(E=u.fieldName),s){var f=(0,L.getFieldConfig)(l,s)||{},a=s;f.fieldName&&(a=f.fieldName),E.indexOf(a+".")==0?E=E.slice((a+".").length):p.errors.push("Can't cut group ".concat(a," from field ").concat(E))}return E}},Y=function(v,l,p,s){var u=l.settings.fieldSeparator,g,m=!0;if(p){var E=(0,L.getFieldConfig)(l,p)||{},f=Array.isArray(p)?p:p.split(u),a=(0,A.getFieldPath)(p,l),r=(0,A.getFieldPathLabels)(p,l),d=r?r.join(u):null,c=l.settings.formatField||D.settings.formatField,P=_(p,l,v,s),G=c(P,f,d,E,l,!1);g="$"+G}return[g,m]},w=function(v,l,p,s){var u=!0,g,m=p.get("func"),E=p.get("args"),f=(0,L.getFuncConfig)(l,m),a=f.mongoFunc||m,r=f.mongoArgsAsObject,d={},c=0,P=void 0;for(var G in f.args){var q=f.args[G],Z=(0,L.getFieldConfig)(l,q),j=E?E.get(G):void 0,K=j?j.get("value"):void 0,k=j?j.get("valueSrc"):void 0,Q=j?j.get("asyncListValues"):void 0,ae=(0,A.getWidgetForFieldOp)(l,Z,null,k),oe=(0,C.default)((0,L.getFieldWidgetConfig)(l,Z,null,ae,k),["factory"]),le=$(v,l,K,k,q.type,oe,Z,s,null,null,Q),ue=(0,O.default)(le,2),he=ue[0],pe=ue[1];if(K!=null&&he===void 0)return v.errors.push("Can't format value of arg ".concat(G," for func ").concat(m)),[void 0,!1];c++,he!==void 0&&(d[G]=he,P=he)}if(typeof f.mongoFormatFunc=="function"){var ye=f.mongoFormatFunc,Re=[d];g=ye.apply(void 0,Re)}else{if(f.mongoFormatFunc===null)return v.errors.push("Functon ".concat(a," is not supported")),[void 0,!1];r?g=(0,S.default)({},a,d):c==1&&P!==void 0?g=(0,S.default)({},a,P):g=(0,S.default)({},a,Object.values(d))}return[g,u]}},43799:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.queryBuilderFormat=void 0;var O=n(e(47552)),S=e(12461),o=e(58560),N=e(26749),R=e(1694),L=e(84275),A=e(7134);function I(x,F){var J=Object.keys(x);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(x);F&&(U=U.filter(function(W){return Object.getOwnPropertyDescriptor(x,W).enumerable})),J.push.apply(J,U)}return J}function y(x){for(var F=1;F<arguments.length;F++){var J=arguments[F]!=null?arguments[F]:{};F%2?I(Object(J),!0).forEach(function(U){(0,O.default)(x,U,J[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(J)):I(Object(J)).forEach(function(U){Object.defineProperty(x,U,Object.getOwnPropertyDescriptor(J,U))})}return x}var C=function(F,J){var U={usedFields:[]},W=M(F,J,U);if(W)return y(y({},W),U)};i.queryBuilderFormat=C;var M=function(F,J,U){if(F){var W=F.get("type"),V=F.get("children1");if((W==="group"||W==="rule_group")&&V&&V.size)return b(F,J,U);if(W==="rule")return D(F,J,U)}},b=function(F,J,U){var W=F.get("properties")||new A.Map,V=F.get("children1"),H=F.get("id"),z=V.map(function(w){return M(w,J,U)}).filter(function(w){return typeof w<"u"});if(z.size){var $=W.get("conjunction");$||($=(0,N.defaultConjunction)(J));var _=W.get("not"),Y={id:H,rules:z.toList(),condition:$.toUpperCase(),not:_};return Y}},D=function(F,J,U){var W=F.get("properties")||new A.Map,V=F.get("id"),H=W.get("operator"),z=W.get("operatorOptions"),$=W.get("field"),_=W.get("value"),Y=W.get("valueSrc"),w=W.get("valueType"),T=_.filter(function(c){return c===void 0}).size>0;if(!($==null||H==null||T)){var v=(0,o.getFieldConfig)(J,$)||{},l=(0,o.getOperatorConfig)(J,H,$)||{},p=v.type||"undefined",s=(0,S.defaultValue)(l.cardinality,1),u=J.types[v.type]||{},g=(0,R.formatFieldName)($,J,U);if(!(_.size<s)){U.usedFields.indexOf($)==-1&&U.usedFields.push($),_=_.toArray(),Y=Y.toArray(),w=w.toArray();for(var m=[],E=0;E<_.length;E++){var f={type:w[E],value:_[E]};if(m.push(f),Y[E]=="field"){var a=_[E];U.usedFields.indexOf(a)==-1&&U.usedFields.push(a)}}var r=z?z.toJS():null;r&&!Object.keys(r).length&&(r=null);var d={id:V,fieldName:g,type:p,input:u.mainWidget,operator:H};return r&&(d.operatorOptions=r),d.values=m,d}}}},83125:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.queryString=void 0;var O=n(e(47552)),S=n(e(98595)),o=n(e(68148)),N=e(58560),R=e(1694),L=n(e(96406)),A=n(e(48289)),I=e(12461),y=e(26749),C=e(22821),M=e(84275),b=e(7134);function D(Y,w){var T=Object.keys(Y);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(Y);w&&(v=v.filter(function(l){return Object.getOwnPropertyDescriptor(Y,l).enumerable})),T.push.apply(T,v)}return T}function x(Y){for(var w=1;w<arguments.length;w++){var T=arguments[w]!=null?arguments[w]:{};w%2?D(Object(T),!0).forEach(function(v){(0,O.default)(Y,v,T[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(T)):D(Object(T)).forEach(function(v){Object.defineProperty(Y,v,Object.getOwnPropertyDescriptor(T,v))})}return Y}var F=function(w,T){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l={errors:[]},p=J(w,T,l,v,null);return l.errors.length&&console.warn("Errors while exporting to string:",l.errors),p};i.queryString=F;var J=function(w,T,v){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(w){var s=w.get("type"),u=w.get("children1");if(s==="group"||s==="rule_group")return U(w,T,v,l,p);if(s==="rule")return H(w,T,v,l,p)}},U=function(w,T,v){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,s=w.get("type"),u=w.get("properties")||new b.Map,g=u.get("mode"),m=w.get("children1");if(m){var E=s==="rule_group",f=E&&g=="array"?u.get("field"):null,a=E&&g=="array",r=u.get("not"),d=m.map(function(Q){return J(Q,T,v,l,f)}).filter(function(Q){return typeof Q<"u"});if(!(!a&&!d.size)){var c=u.get("conjunction");c||(c=(0,y.defaultConjunction)(T));var P=T.conjunctions[c],G=d.size?P.formatConj(d,c,r,l):null,q;if(f){var Z=H(w,T,v,l,p,!0);if(Z){var j,K=Z.pop(),k=[G].concat((0,o.default)(Z));q=(j=T.settings).formatAggr.apply(j,(0,o.default)(k)),K&&(q=T.settings.formatReverse(q,null,null,null,null,l))}}else q=G;return q}}},W=function(w,T,v,l,p,s){var u=T.get("field"),g=T.get("valueSrc"),m=T.get("valueType"),E=(0,N.getFieldConfig)(w,u)||{},f=l||T.get("operator"),a=(0,N.getOperatorConfig)(w,f,u)||{},r=(0,I.defaultValue)(a.cardinality,1),d=T.get("value"),c=T.get("asyncListValues"),P=[],G=[],q;if(d!=null){var Z=d.map(function(K,k){var Q=g?g.get(k):null,ae=m?m.get(k):null,oe=(0,M.completeValue)(K,Q,w),le=(0,R.getWidgetForFieldOp)(w,u,f,Q),ue=(0,L.default)((0,N.getFieldWidgetConfig)(w,u,f,le,Q),["factory"]),he=z(w,v,oe,Q,ae,ue,E,f,a,p,s,c);return he!==void 0&&(P.push(Q),G.push(ae)),he}),j=Z.filter(function(K){return K===void 0}).size>0;j||Z.size<r||(q=r==1?Z.first():Z)}return[q,P.length>1?P:P[0],G.length>1?G:G[0]]},V=function(w,T){var v=T.labelForFormat||w,l=(0,I.defaultValue)(T.cardinality,1),p;return l==0?p=function(u,g,m,E,f,a,r,d){return"".concat(u," ").concat(v)}:l==1?p=function(u,g,m,E,f,a,r,d){return"".concat(u," ").concat(v," ").concat(m)}:l==2&&(p=function(u,g,m,E,f,a,r,d){var c=m.first(),P=m.get(1);return"".concat(u," ").concat(v," ").concat(c," AND ").concat(P)}),p},H=function(w,T,v){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,u=w.get("properties")||new b.Map,g=u.get("field"),m=u.get("operator"),E=u.get("operatorOptions");if(!(g==null||m==null)){var f=(0,N.getFieldConfig)(T,g)||{},a=(0,N.getOperatorConfig)(T,m,g)||{},r=a.reversedOp,d=(0,N.getOperatorConfig)(T,r,g)||{},c=!1,P=a.formatOp;if(!P&&r&&(P=d.formatOp,P)){c=!0;var G=[r,m];m=G[0],r=G[1];var q=[d,a];a=q[0],d=q[1]}if(P||(P=V(m,a)),!!P){var Z=$(T,v,g,l,p),j=W(T,u,v,m,l,p),K=(0,S.default)(j,3),k=K[0],Q=K[1],ae=K[2];if(k!==void 0){var oe=[Z,m,k,Q,ae,(0,L.default)(a,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),E,l,f,c];if(s)return oe;var le=P.apply(void 0,oe);return c&&(le=T.settings.formatReverse(le,m,r,a,d,l)),le}}}},z=function(w,T,v,l,p,s,u,g,m,E){var f=arguments.length>10&&arguments[10]!==void 0?arguments[10]:null,a=arguments.length>11?arguments[11]:void 0;if(v!==void 0){var r;if(l=="field")r=$(w,T,v,E,f);else if(l=="func")r=_(w,T,v,E,f);else if(typeof s.formatValue=="function"){var d=s.formatValue,c=[v,x(x({},(0,A.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:a}),(0,L.default)(s,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"]),E];if(g&&(c.push(g),c.push(m)),l=="field"){var P=(0,N.getFieldConfig)(w,v)||{};c.push(P)}r=d.apply(void 0,c)}else r=v;return r}},$=function(w,T,v,l){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,u=w.settings,g=u.fieldSeparator,m=u.fieldSeparatorDisplay,E=null;if(v){var f=(0,N.getFieldConfig)(w,v)||{},a=Array.isArray(v)?v:v.split(g),r=(0,R.getFieldPath)(v,w),d=(0,R.getFieldPathLabels)(v,w,s?p:null),c=d?d.join(m):null,P=f.label2||c,G=w.settings.formatField||C.settings.formatField,q=(0,R.formatFieldName)(v,w,T,s?p:null);E=G(q,a,P,f,w,l)}return E},_=function(w,T,v,l){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,s=v.get("func"),u=v.get("args"),g=(0,N.getFuncConfig)(w,s),m=l&&g.label||s,E={},f={};for(var a in g.args){var r=g.args[a],d=(0,N.getFieldConfig)(w,r),c=u?u.get(a):void 0,P=c?c.get("value"):void 0,G=c?c.get("valueSrc"):void 0,q=c?c.get("asyncListValues"):void 0,Z=z(w,T,P,G,r.type,d,r,null,null,l,p,q),j=l&&r.label||a;Z!==void 0&&(E[a]=Z,f[j]=Z)}var K=null;if(typeof g.formatFunc=="function"){var k=g.formatFunc,Q=[E,l];K=k.apply(void 0,Q)}else{var ae=Object.entries(f).map(function(oe){var le=(0,S.default)(oe,2),ue=le[0],he=le[1];return l?"".concat(ue,": ").concat(he):"".concat(he)}).join(", ");K="".concat(m,"(").concat(ae,")")}return K}},2778:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.spelFormat=i._spelFormat=void 0;var O=n(e(47960)),S=n(e(47552)),o=n(e(98595)),N=e(58560),R=e(1694),L=n(e(96406)),A=n(e(48289)),I=e(12461),y=e(26749),C=e(22821),M=e(84275),b=e(7134),D=e(19302);function x(s,u){var g=Object.keys(s);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(s);u&&(m=m.filter(function(E){return Object.getOwnPropertyDescriptor(s,E).enumerable})),g.push.apply(g,m)}return g}function F(s){for(var u=1;u<arguments.length;u++){var g=arguments[u]!=null?arguments[u]:{};u%2?x(Object(g),!0).forEach(function(m){(0,S.default)(s,m,g[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(g)):x(Object(g)).forEach(function(m){Object.defineProperty(s,m,Object.getOwnPropertyDescriptor(g,m))})}return s}var J=function(u,g){return U(u,g,!1)};i.spelFormat=J;var U=function(u,g){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,E={errors:[]},f=W(u,g,E,null);return m?[f,E.errors]:(E.errors.length&&console.warn("Errors while exporting to SpEL:",E.errors),f)};i._spelFormat=U;var W=function(u,g,m){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(u){var f=u.get("type");if(f==="group"||f==="rule_group")return z(u,g,m,E);if(f==="rule")return w(u,g,m,E);if(f=="switch_group")return H(u,g,m,E);if(f=="case_group")return V(u,g,m,E)}},V=function(u,g,m){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,f=u.get("type");if(f!="case_group"){m.errors.push("Unexpected child of type ".concat(f," inside switch"));return}var a=u.get("properties")||new b.Map,r=T(g,a,m,null,E,"!case_value"),d=(0,o.default)(r,3),c=d[0],P=d[1],G=d[2],q=z(u,g,m,E);return[q,c]},H=function(u,g,m){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,f=u.get("properties")||new b.Map,a=u.get("children1");if(a){var r=a.map(function(k){return V(k,g,m,null)}).filter(function(k){return typeof k<"u"}).toArray();if(r.length){if(r.length==1&&!r[0][0])return r[0][1];for(var d=[],c=0;c<r.length;c++)c!=r.length-1&&!r[c][0]?m.errors.push("No condition for case ".concat(c)):(d.push(r[c]),c==r.length-1&&r[c][0]&&d.push([void 0,null]));for(var P="",G="",q=0;q<d.length;q++){var Z=(0,o.default)(d[q],2),j=Z[0],K=Z[1];K==null&&(K="null"),j==null&&(j="true"),q!=d.length-1?(P+="(".concat(j," ? ").concat(K," : "),G+=")"):P+="".concat(K)}return P+G}}},z=function(u,g,m){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,f=u.get("type"),a=u.get("properties")||new b.Map,r=a.get("mode"),d=u.get("children1"),c=a.get("field");if(d){var P=a.get("conjunction");P||(P=(0,y.defaultConjunction)(g));var G=g.conjunctions[P],q=a.get("not"),Z=f==="rule_group",j=Z&&r!="struct",K=j?c:E,k=(0,N.getFieldConfig)(g,K)||{},Q=k.isSpelArray,ae=a.get("operator");!ae&&(!r||r=="some")&&(ae="some");var oe=Y(g,ae,c),le=oe!=ae,ue=ae&&(0,N.getOperatorConfig)(g,oe,c)||null,he=Z&&(!oe||ue.cardinality==0),pe=T(g,a,m,oe,E,null),ye=(0,o.default)(pe,3),Re=ye[0],Ce=ye[1],Ae=ye[2],Te=d.map(function(ve){return W(ve,g,m,K)}).filter(function(ve){return typeof ve<"u"});if(j&&!he){if(Re==null)return}else if(!Te.size)return;var be=Z,We=Te.size?G.spelFormatConj(Te,P,q,be):null,je;if(j){var He=l(m,g,c,E),De=Q?".length":".size()",Ye="".concat(He).concat(De),nt=We?"".concat(He,".?[").concat(We,"]").concat(De):Ye,ke=he?Ye:Re;je=_(m,g,a,nt,ke,oe,Ce,Ae,le)}else je=We;return je}},$=function(u,g){var m=g.spelOp;if(m){var E=m[0]=="$",f=m[0]=="."||E,a=m.substring(m.length-2)=="()",r=f?m.slice(1):a?m.substring(0,m.length-2):m,d,c=(0,I.defaultValue)(g.cardinality,1);return c==0?d=function(G,q,Z,j,K,k,Q,ae){return f?"".concat(G,".").concat(r,"()"):"".concat(G," ").concat(r)}:c==1&&(d=function(G,q,Z,j,K,k,Q,ae){return E?"".concat(Z,".").concat(r,"(").concat(G,")"):a?"".concat(r,"(").concat(G,", ").concat(Z,")"):f?"".concat(G,".").concat(r,"(").concat(Z,")"):"".concat(G," ").concat(r," ").concat(Z)}),d}},_=function(u,g,m,E,f,a,r,d){var c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,P=m.get("field"),G=(0,N.getOperatorConfig)(g,a,P)||{},q=(0,N.getFieldConfig)(g,P)||{},Z=m.get("operatorOptions"),j=G.spelFormatOp||$(a,G);if(!j){u.errors.push("Operator ".concat(a," is not supported"));return}var K=[E,a,f,r,d,(0,L.default)(G,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),Z,q],k;return k=j.apply(void 0,K),c&&(k=g.settings.spelFormatReverse(k)),k===void 0&&u.errors.push("Operator ".concat(a," is not supported for value source ").concat(r)),k},Y=function(u,g,m){if(g){var E=(0,N.getOperatorConfig)(u,g,m)||{},f=E.reversedOp,a=(0,N.getOperatorConfig)(u,f,m)||{},r=!1,d=E.spelOp||E.spelFormatOp,c=a.spelOp||a.spelFormatOp;if(!(!d&&!c)){if(!d&&c){r=!0;var P=[f,g];g=P[0],f=P[1];var G=[a,E];E=G[0],a=G[1]}return g}}},w=function(u,g,m){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,f=u.get("properties")||new b.Map,a=f.get("field"),r=f.get("operator");if(!(a==null||r==null)){var d=Y(g,r,a);if(!d){m.errors.push("Operator ".concat(r," is not supported"));return}var c=d!=r,P=T(g,f,m,d,E,null),G=(0,o.default)(P,3),q=G[0],Z=G[1],j=G[2];if(q!==void 0){var K=l(m,g,a,E),k=_(m,g,f,K,q,d,Z,j,c);return k}}},T=function(u,g,m,E,f){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,r=g.get("field"),d=g.get("valueSrc"),c=g.get("valueType");(a=="!case_value"||c&&c.get(0)=="case_value")&&(r="!case_value");var P=(0,N.getFieldConfig)(u,r)||{},G=(0,N.getOperatorConfig)(u,E,r)||{},q=(0,I.defaultValue)(G.cardinality,1),Z=g.get("value"),j=g.get("asyncListValues"),K=[],k=[],Q;if(Z!=null){var ae=Z.map(function(le,ue){var he=d?d.get(ue):null,pe=c?c.get(ue):null,ye=(0,M.completeValue)(le,he,u),Re=(0,R.getWidgetForFieldOp)(u,r,E,he),Ce=(0,L.default)((0,N.getFieldWidgetConfig)(u,r,E,Re,he),["factory"]),Ae=v(m,u,ye,he,pe,Ce,P,E,G,f,j);return Ae!==void 0&&(K.push(he),k.push(pe)),Ae}),oe=ae.filter(function(le){return le===void 0}).size>0;ae.size<q||oe||(Q=q>1?ae.toArray():q==1?ae.first():null)}return[Q,K.length>1?K:K[0],k.length>1?k:k[0]]},v=function(u,g,m,E,f,a,r,d,c){var P=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,G=arguments.length>10?arguments[10]:void 0;if(m!==void 0){var q;if(E=="field")q=l(u,g,m,P);else if(E=="func")q=p(u,g,m,P);else if(typeof a.spelFormatValue=="function"){var Z=a.spelFormatValue,j=[m,F(F({},(0,A.default)(r,["fieldSettings","listValues"])),{},{asyncListValues:G}),(0,L.default)(a,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(d&&(j.push(d),j.push(c)),E=="field"){var K=(0,N.getFieldConfig)(g,m)||{};j.push(K)}q=Z.apply(void 0,j)}else q=(0,D.spelEscape)(m);return q}},l=function(u,g,m){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(m){var f=g.settings.fieldSeparator,a=(0,N.getFieldConfig)(g,m)||{},r=Array.isArray(m)?m:m.split(f),d=(0,R.getFieldPath)(m,g,E),c=(0,R.getFieldPartsConfigs)(m,g,E),P=g.settings.formatSpelField,G=(0,R.formatFieldName)(m,g,u);if(E){var q=(0,N.getFieldConfig)(g,E)||{},Z=E;q.fieldName&&(Z=q.fieldName),G.indexOf(Z+f)==0?G=G.slice((Z+f).length):u.errors.push("Can't cut group ".concat(Z," from field ").concat(G))}var j=c.map(function(k){var Q=(0,o.default)(k,3),ae=Q[0],oe=Q[1],le=Q[2],ue;le&&(le.type=="!struct"||le.type=="!group"&&le.mode=="struct"?ue=oe.isSpelMap?"map":"class":le.type=="!group"?ue=oe.isSpelItemMap?"[map]":"[class]":ue="class");var he=oe?.isSpelVariable;return{key:ae,parent:ue,isSpelVariable:he}}),K=P(G,E,r,j,a,g);return K}},p=function(u,g,m){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,f=m.get("func"),a=m.get("args"),r=(0,N.getFuncConfig)(g,f),d=r.spelFunc||f,c={};for(var P in r.args){var G=r.args[P],q=(0,N.getFieldConfig)(g,G),Z=a?a.get(P):void 0,j=Z?Z.get("value"):void 0,K=Z?Z.get("valueSrc"):void 0,k=Z?Z.get("asyncListValues"):void 0,Q=v(u,g,j,K,G.type,q,G,null,null,E,k);if(j!=null&&Q===void 0){u.errors.push("Can't format value of arg ".concat(P," for func ").concat(f));return}Q!==void 0&&(c[P]=Q)}var ae;if(typeof r.spelFormatFunc=="function"){var oe=r.spelFormatFunc,le=[c];ae=oe.apply(void 0,le)}else{var ue=Object.entries(c).map(function(Re){var Ce=(0,o.default)(Re,2),Ae=Ce[0],Te=Ce[1];return Te});if(d[0]=="."&&ue.length){var he=(0,O.default)(ue),pe=he[0],ye=he.slice(1);ae="".concat(pe).concat(d,"(").concat(ye.join(", "),")")}else ae="".concat(d,"(").concat(ue.join(", "),")")}return ae}},4144:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.sqlFormat=i._sqlFormat=void 0;var O=n(e(98595)),S=n(e(47552)),o=e(58560),N=e(1694),R=n(e(96406)),L=n(e(48289)),A=e(12461),I=e(26749),y=e(22821),C=e(84275),M=e(7134),b=e(19302);function D(Y,w){var T=Object.keys(Y);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(Y);w&&(v=v.filter(function(l){return Object.getOwnPropertyDescriptor(Y,l).enumerable})),T.push.apply(T,v)}return T}function x(Y){for(var w=1;w<arguments.length;w++){var T=arguments[w]!=null?arguments[w]:{};w%2?D(Object(T),!0).forEach(function(v){(0,S.default)(Y,v,T[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(T)):D(Object(T)).forEach(function(v){Object.defineProperty(Y,v,Object.getOwnPropertyDescriptor(T,v))})}return Y}var F=function(w,T){return J(w,T,!1)};i.sqlFormat=F;var J=function(w,T){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l={errors:[]},p=U(w,T,l);return v?[p,l.errors]:(l.errors.length&&console.warn("Errors while exporting to SQL:",l.errors),p)};i._sqlFormat=J;var U=function(w,T,v){if(w){var l=w.get("type"),p=w.get("children1");if((l==="group"||l==="rule_group")&&p&&p.size)return W(w,T,v);if(l==="rule")return H(w,T,v)}},W=function(w,T,v){var l=w.get("type"),p=w.get("properties")||new M.Map,s=w.get("children1"),u=l==="rule_group"?p.get("field"):null,g=(0,o.getFieldConfig)(T,u)||{};g.mode=="array"&&v.errors.push("Aggregation is not supported for ".concat(u));var m=p.get("not"),E=s.map(function(r){return U(r,T,v)}).filter(function(r){return typeof r<"u"});if(E.size){var f=p.get("conjunction");f||(f=(0,I.defaultConjunction)(T));var a=T.conjunctions[f];return a.sqlFormatConj(E,f,m)}},V=function(w,T){var v=T.sqlOp||w,l=(0,A.defaultValue)(T.cardinality,1),p;return l==0?p=function(u,g,m,E,f,a,r,d){return"".concat(u," ").concat(v)}:l==1?p=function(u,g,m,E,f,a,r,d){return"".concat(u," ").concat(v," ").concat(m)}:l==2&&(p=function(u,g,m,E,f,a,r,d){var c=m.first(),P=m.get(1);return"".concat(u," ").concat(v," ").concat(c," AND ").concat(P)}),p},H=function(w,T,v){var l=w.get("properties")||new M.Map,p=l.get("field"),s=l.get("operator"),u=l.get("operatorOptions"),g=l.get("valueSrc"),m=l.get("valueType"),E=l.get("value"),f=l.get("asyncListValues");if(!(p==null||s==null)){var a=(0,o.getFieldConfig)(T,p)||{},r=(0,o.getOperatorConfig)(T,s,p)||{},d=r.reversedOp,c=(0,o.getOperatorConfig)(T,d,p)||{},P=(0,A.defaultValue)(r.cardinality,1),G=!1,q=r.sqlOp||r.sqlFormatOp,Z=c.sqlOp||c.sqlFormatOp;if(!q&&!Z){v.errors.push("Operator ".concat(s," is not supported"));return}if(!Z&&Z){G=!0;var j=[d,s];s=j[0],d=j[1];var K=[c,r];r=K[0],c=K[1]}var k=[],Q=[],ae=E.map(function(Re,Ce){var Ae=g?g.get(Ce):null,Te=m?m.get(Ce):null,be=(0,C.completeValue)(Re,Ae,T),We=(0,N.getWidgetForFieldOp)(T,p,s,Ae),je=(0,R.default)((0,o.getFieldWidgetConfig)(T,p,s,We,Ae),["factory"]),He=z(v,T,be,Ae,Te,je,a,s,r,f);return He!==void 0&&(k.push(Ae),Q.push(Te)),He}),oe=ae.filter(function(Re){return Re===void 0}).size>0;if(!(oe||ae.size<P)){var le=P==1?ae.first():ae,ue=r.sqlFormatOp||V(s,r);if(!ue){v.errors.push("Operator ".concat(s," is not supported"));return}var he=$(v,T,p),pe=[he,s,le,k.length>1?k:k[0],Q.length>1?Q:Q[0],(0,R.default)(r,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),u,a],ye;if(ye=ue.apply(void 0,pe),G&&(ye=T.settings.sqlFormatReverse(ye)),ye===void 0){v.errors.push("Operator ".concat(s," is not supported for value source ").concat(k.join(", ")));return}return ye}}},z=function(w,T,v,l,p,s,u,g,m,E){if(v!==void 0){var f;if(l=="field")f=$(w,T,v);else if(l=="func")f=_(w,T,v);else if(typeof s.sqlFormatValue=="function"){var a=s.sqlFormatValue,r=[v,x(x({},(0,L.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:E}),(0,R.default)(s,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(g&&(r.push(g),r.push(m)),l=="field"){var d=(0,o.getFieldConfig)(T,v)||{};r.push(d)}f=a.apply(void 0,r)}else Array.isArray(v)?f=v.map(function(c){return b.SqlString.escape(c)}):f=b.SqlString.escape(v);return f}},$=function(w,T,v){if(v){var l=T.settings.fieldSeparator,p=(0,o.getFieldConfig)(T,v)||{},s=Array.isArray(v)?v:v.split(l),u=(0,N.getFieldPath)(v,T),g=(0,N.getFieldPathLabels)(v,T),m=g?g.join(l):null,E=T.settings.formatField||y.settings.formatField,f=(0,N.formatFieldName)(v,T,w),a=E(f,s,m,p,T);return a}},_=function(w,T,v){var l=v.get("func"),p=v.get("args"),s=(0,o.getFuncConfig)(T,l),u=s.sqlFunc||l,g={};for(var m in s.args){var E=s.args[m],f=(0,o.getFieldConfig)(T,E),a=p?p.get(m):void 0,r=a?a.get("value"):void 0,d=a?a.get("valueSrc"):void 0,c=a?a.get("asyncListValues"):void 0,P=z(w,T,r,d,E.type,f,E,null,null,c);if(r!=null&&P===void 0){w.errors.push("Can't format value of arg ".concat(m," for func ").concat(l));return}P!==void 0&&(g[m]=P)}var G;if(typeof s.sqlFormatFunc=="function"){var q=s.sqlFormatFunc,Z=[g];G=q.apply(void 0,Z)}else{var j=Object.entries(g).map(function(K){var k=(0,O.default)(K,2),Q=k[0],ae=k[1];return ae}).join(", ");G="".concat(u,"(").concat(j,")")}return G}},34496:(re,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e(79788);Object.keys(n).forEach(function(o){o==="default"||o==="__esModule"||o in i&&i[o]===n[o]||Object.defineProperty(i,o,{enumerable:!0,get:function(){return n[o]}})});var O=e(79052);Object.keys(O).forEach(function(o){o==="default"||o==="__esModule"||o in i&&i[o]===O[o]||Object.defineProperty(i,o,{enumerable:!0,get:function(){return O[o]}})});var S=e(25179);Object.keys(S).forEach(function(o){o==="default"||o==="__esModule"||o in i&&i[o]===S[o]||Object.defineProperty(i,o,{enumerable:!0,get:function(){return S[o]}})})},79052:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.loadFromJsonLogic=i._loadFromJsonLogic=void 0;var O=n(e(68148)),S=n(e(47960)),o=n(e(47552)),N=n(e(98595)),R=n(e(14850)),L=e(12461),A=e(58560),I=e(1694),y=e(79788),C=e(26749),M=n(e(52291));function b(s,u){var g=Object.keys(s);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(s);u&&(m=m.filter(function(E){return Object.getOwnPropertyDescriptor(s,E).enumerable})),g.push.apply(g,m)}return g}function D(s){for(var u=1;u<arguments.length;u++){var g=arguments[u]!=null?arguments[u]:{};u%2?b(Object(g),!0).forEach(function(m){(0,o.default)(s,m,g[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(g)):b(Object(g)).forEach(function(m){Object.defineProperty(s,m,Object.getOwnPropertyDescriptor(g,m))})}return s}var x=function(u){return Array.from(new Set(u))},F=function(u){return u.reduce(function(g,m){var E=(0,N.default)(m,2),f=E[0],a=E[1];return D(D({},g),{},(0,o.default)({},f,a))},{})},J=function(u,g){return U(u,g,!1)};i.loadFromJsonLogic=J;var U=function(u,g){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,E={errors:[]},f=(0,A.extendConfig)(g),a=W(f),r=u?V(u,a,f,"rule",E):void 0;r&&r.type!="group"&&(r=T(r,f));var d=r?(0,y.loadTree)(r):void 0;return m?[d,E.errors]:(E.errors.length&&console.warn("Errors while importing from JsonLogic:",E.errors),d)};i._loadFromJsonLogic=U;var W=function(u){var g={};for(var m in u.operators){var E=u.operators[m];if(typeof E.jsonLogic=="string"){var f=(E._jsonLogicIsRevArgs?"#":"")+E.jsonLogic+"/"+(0,L.defaultValue)(E.cardinality,1);g[f]||(g[f]=[]),g[f].push(m)}else if(typeof E.jsonLogic2=="string"){var a=E.jsonLogic2+"/"+(0,L.defaultValue)(E.cardinality,1);g[a]||(g[a]=[]),g[a].push(m)}}var r={};for(var d in u.conjunctions){var c=u.conjunctions[d],P=c.jsonLogicConj||d.toLowerCase();r[P]=d}var G={};for(var q in u.funcs){var Z=u.funcs[q],j=void 0;Z.jsonLogicIsMethod?j="#"+Z.jsonLogic:typeof Z.jsonLogic=="string"&&(j=Z.jsonLogic),j&&(G[j]||(G[j]=[]),G[j].push(q))}var K=u.settings.jsonLogic,k=K.groupVarKey,Q=K.altVarKey;return{operators:g,conjunctions:r,funcs:G,varKeys:["var",k,Q]}},V=function s(u,g,m,E,f){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,r=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0,c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,P=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,G,q;(0,L.isJsonLogic)(u)&&(G=Object.keys(u)[0],q=u[G],Array.isArray(q)||(q=[q]));var Z,j=f.errors.length,K=m.settings.jsonLogic.lockedOp,k=G=="!"&&q.length==1&&q[0]&&(0,L.isJsonLogic)(q[0])&&g.varKeys.includes(Object.keys(q[0])[0]),Q=G=="!"&&!k,ae=K&&G==K;ae?Z=s(q[0],g,m,E,f,a,r,d,c,!0):Q?Z=s(q[0],g,m,E,f,!a,r,d,c):E=="val"?Z=z(G,q,g,m,a,f,c)||$(G,q,g,m,a,r,f,c)||H(u,r,d,m,f):E=="rule"&&(Z=_(G,q,g,m,a,f,c,!1)||p(G,q,g,m,a,f,c));var oe=f.errors.length;return G!="!"&&Z===void 0&&oe==j&&f.errors.push("Can't parse logic ".concat(JSON.stringify(u))),ae&&(Z.properties.isLocked=!0),Z},H=function(u,g,m,E,f){if(u!==void 0){var a=E.widgets[m||g.mainWidget];if(!a){f.errors.push("No widget for type ".concat(g.type));return}if((0,L.isJsonLogic)(u)){f.errors.push("Unexpected logic in value: ".concat(JSON.stringify(u)));return}if(g&&g.type=="time"&&typeof u=="number"){var r=Math.floor(u/60/60)%24,d=Math.floor(u/60)%60,c=u%60,P=a.valueFormat;if(P){var G=new Date(u);G.setMilliseconds(0),G.setHours(r),G.setMinutes(d),G.setSeconds(c),u=(0,M.default)(G).format(P)}else u="".concat(r,":").concat(d,":").concat(c)}if(g&&["date","datetime"].includes(g.type)&&u&&!(u instanceof Date))try{var q=new Date(u);q instanceof Date&&q.toISOString()===u&&(u=q)}catch{f.errors.push("Can't convert value ".concat(u," as Date")),u=void 0}if(u instanceof Date&&g){var Z=a.valueFormat;Z&&(u=(0,M.default)(u).format(Z))}var j;if(u&&g.fieldSettings&&g.fieldSettings.asyncFetch){var K=Array.isArray(u)?u:[u];j=K}return{valueSrc:"value",value:u,valueType:a.type,asyncListValues:j}}},z=function(u,g,m,E,f,a){var r=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,d=E.settings.fieldSeparator;if(m.varKeys.includes(u)&&typeof g[0]=="string"){var c=g[0];r&&(c=[r,c].join(d)),c=(0,A.normalizeField)(E,c);var P=(0,A.getFieldConfig)(E,c);if(!P){a.errors.push("No config for field ".concat(c));return}return{valueSrc:"field",value:c,valueType:P.type}}},$=function(u,g,m,E,f,a,r){var d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;if(u){var c,P,G,q=u=="method";if(q){var Z,j,K=(0,S.default)(g);Z=K[0],c=K[1],j=K.slice(2),P=[Z].concat((0,O.default)(j))}else c=u,P=g;var k=(q?"#":"")+c,Q=(m.funcs[k]||[]).filter(function(Te){return a?E.funcs[Te].returnType==a.type:!0});if(Q.length)G=Q[0];else for(var ae=(0,o.default)({},u,g),oe=0,le=Object.entries(E.funcs||{});oe<le.length;oe++){var ue=(0,N.default)(le[oe],2),he=ue[0],pe=ue[1];if(pe.jsonLogicImport&&pe.returnType==a.type){var ye=void 0;try{ye=pe.jsonLogicImport(ae)}catch{}ye&&(G=he,P=ye)}}if(G&&G){var Re=E.funcs[G],Ce=Object.keys(Re.args||{}),Ae=P.reduce(function(Te,be,We){var je=Ce[We],He=Re.args[je],De=V(be,m,E,"val",r,!1,He,null,d);if(De===void 0&&(De=He.defaultValue,De===void 0)){r.errors.push("No value for arg ".concat(je," of func ").concat(G));return}return D(D({},Te),{},(0,o.default)({},je,De))},{});return{valueSrc:"func",value:{func:G,args:Ae},valueType:Re.returnType}}}},_=function(u,g,m,E,f,a){var r=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,c=m.conjunctions[u],P=E.settings.fieldSeparator,G=r?(0,A.getFieldConfig)(E,r):null,q=G?.type=="!group";if(c){var Z="group",j=g.map(function(ye){return V(ye,m,E,"rule",a,!1,null,null,r)}).filter(function(ye){return ye!==void 0}).reduce(function(ye,Re){return D(D({},ye),{},(0,o.default)({},Re.id,Re))},{}),K=Object.values(j).map(function(ye){var Re;return ye==null||(Re=ye.properties)===null||Re===void 0?void 0:Re.field}).filter(function(ye){return ye&&ye.includes(P)}),k=Object.fromEntries(x(K).map(function(ye){var Re=ye.split(P),Ce=Object.fromEntries(Re.slice(0,-1).map(function(Ae,Te,be){return[].concat((0,O.default)(be.slice(0,Te)),[Ae])}).map(function(Ae){return[Ae.join(P),(0,A.getFieldConfig)(E,Ae)]}).filter(function(Ae){var Te=(0,N.default)(Ae,2),be=Te[0],We=Te[1];return We.type=="!group"}));return[ye,Object.keys(Ce)]})),Q=Object.values(j).map(function(ye){var Re;return ye==null||(Re=ye.properties)===null||Re===void 0?void 0:Re.field}).map(function(ye){return k[ye]}).filter(function(ye){return ye&&ye.length}),ae=x(Object.values(k).flat()),oe=Y(ae),le={conjunction:c,not:f},ue=(0,R.default)(),he={},pe={};return Object.entries(j).map(function(ye){var Re=(0,N.default)(ye,2),Ce=Re[0],Ae=Re[1];if(Ae.type=="group"||Ae.type=="rule_group")he[Ce]=Ae;else{var Te,be=Ae==null||(Te=Ae.properties)===null||Te===void 0?void 0:Te.field,We=k[be],je=We?.at(-1);if(!je)he[Ce]=Ae;else{var He=he,De=r?r.split(P):[],Ye=(0,L.shallowEqual)(De,je.split(P).slice(0,De.length));Ye||(De=[]);var nt=je.split(P).slice(De.length).map(function(ke,ve,Ee){return[].concat((0,O.default)(De),(0,O.default)(Ee.slice(0,ve)),[ke]).join(P)}).map(function(ke){return(0,A.normalizeField)(E,ke)}).map(function(ke){return{f:ke,fc:(0,A.getFieldConfig)(E,ke)||{}}}).filter(function(ke){var ve=ke.fc;return ve.type!="!struct"});nt.map(function(ke,ve){var Ee=ke.f,Ie=ke.fc,we=pe[Ee];we||(we=(0,R.default)(),pe[Ee]=we,He[we]={type:"rule_group",id:we,children1:{},properties:{conjunction:c,not:!1,field:Ee,mode:Ie.mode}}),He=He[we].children1}),He[Ce]=Ae}}}),{type:Z,id:ue,children1:he,properties:le}}},Y=function(u){for(var g=(0,O.default)(u).sort(function(f,a){return f.length-a.length}),m=0;m<g.length;m++)for(var E=m+1;E<g.length;E++)g[E].indexOf(g[m])==0&&(g.splice(E,1),E--);return g},w=function(u,g,m,E,f){if(u)return{type:"rule_group",id:(0,R.default)(),children1:(0,o.default)({},u.id,u),properties:{conjunction:f||(0,C.defaultGroupConjunction)(E,m),not:!1,field:g}}},T=function(u,g){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:(0,R.default)(),children1:(0,o.default)({},u.id,u),properties:{conjunction:(0,C.defaultConjunction)(g),not:m}}},v=function(u,g,m,E,f,a,r){var d=[],c=l(u,g,m,E,f,a,d,!1)||l(u,g,m,E,f,a,d,!0);if(!c){r.errors.push(d.join("; ")||"Unknown op ".concat(u,"/").concat(g));return}return c},l=function(u,g,m,E,f,a,r,d){var c=(u=="all"||u=="some")&&(0,L.isJsonLogic)(m[1])&&Object.keys(m[1])[0]=="in",P=!c&&a.settings.groupOperators.includes(u),G=["==","!="],q=P?0:g-1;(P||G.includes(u)&&q==1&&m[1]===null)&&(q=0);var Z=u+"/"+q,j=a.settings.fieldSeparator,K=f.operators[(d?"#":"")+Z];if(K){var k,Q=[],ae=["<","<=",">",">="];if(ae.includes(u)&&g==3)k=m[1],Q=[m[0],m[2]];else if(d)k=m[1],Q=[m[0]];else{var oe=(0,S.default)(m);k=oe[0],Q=oe.slice(1)}if(!(0,L.isJsonLogic)(k)){r.push("Incorrect operands for ".concat(u,": ").concat(JSON.stringify(m)));return}var le=Object.keys(k)[0],ue=Object.values(k)[0],he,pe,ye;if(f.varKeys.includes(le)&&typeof ue=="string"&&(he=ue),P&&(ye=!0,pe=Q[0],Q=[]),le=="reduce"&&Array.isArray(ue)&&ue.length==3){var Re=ue,Ce=(0,N.default)(Re,3),Ae=Ce[0],Te=Ce[1],be=Ce[2];if((0,L.isJsonLogic)(Ae)&&be==0&&(0,L.isJsonLogic)(Te)&&Array.isArray(Te["+"])&&Te["+"][0]==1&&(0,L.isJsonLogic)(Te["+"][1])&&Te["+"][1].var=="accumulator")if(le=Object.keys(Ae)[0],ue=Object.values(Ae)[0],le=="filter"){var We=ue,je=(0,N.default)(We,2),He=je[0],De=je[1];(0,L.isJsonLogic)(He)&&(le=Object.keys(He)[0],ue=Object.values(He)[0],f.varKeys.includes(le)&&typeof ue=="string"&&(he=ue,pe=De,ye=!0))}else f.varKeys.includes(le)&&typeof ue=="string"&&(he=ue,ye=!0)}if(!he){r.push("Unknown field ".concat(JSON.stringify(k)));return}E&&(he=[E,he].join(j)),he=(0,A.normalizeField)(a,he);var Ye=(0,A.getFieldConfig)(a,he);if(!Ye){r.push("No config for field ".concat(he));return}var nt=K[0];if(K.length>1&&Ye&&Ye.operators){if(K=K.filter(function(ke){return Ye.operators.includes(ke)}),K.length==0){r.push("No corresponding ops for field ".concat(he));return}nt=K[0]}return{field:he,fieldConfig:Ye,opKey:nt,args:Q,having:pe}}},p=function s(u,g,m,E,f,a){var r=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(u){var d=g.length;if((u=="all"||u=="some")&&(0,L.isJsonLogic)(g[1])){var c=Object.keys(g[1])[0];c=="in"&&(g=[g[0],g[1][c][1]],u=u+"-"+c)}var P=v(u,d,g,r,m,E,a);if(P){var G=P.field,q=P.fieldConfig,Z=P.opKey,j=P.args,K=P.having,k=E.operators[Z],Q=q.showNot!==void 0?q.showNot:E.settings.showNot,ae=!0,oe,le;if(q.type=="!group"&&K){oe=Object.keys(K)[0],le=K[oe],Array.isArray(le)||(le=[le]);var ue=oe=="!"&&le.length==1&&le[0]&&(0,L.isJsonLogic)(le[0])&&m.varKeys.includes(Object.keys(le[0])[0]);oe=="!"&&!ue&&(f=!f,K=K["!"],oe=Object.keys(K)[0],le=K[oe],Array.isArray(le)||(le=[le]))}f&&ae&&k.reversedOp&&(f=!1,Z=k.reversedOp,k=E.operators[Z]);var he=(0,I.getWidgetForFieldOp)(E,G,Z),pe=j.map(function(be){return V(be,m,E,"val",a,!1,q,he,r)});if(!pe.filter(function(be){return be===void 0}).length){var ye;if(q.type=="!group"&&K){if(m.conjunctions[oe]!==void 0)ye=_(oe,le,m,E,f,a,G,!0),f=!1;else{var Re,Ce=s(oe,le,m,E,f&&ae,a,G);f&&ae&&!(Ce!=null&&(Re=Ce.properties)!==null&&Re!==void 0&&Re.not)&&(f=!1),ye=w(Ce,G,q,E,m.conjunctions.and)}if(!ye)return;ye.type="rule_group",f&&Object.assign(ye.properties,{not:f}),Object.assign(ye.properties,{field:G,mode:q.mode,operator:Z}),q.mode=="array"&&Object.assign(ye.properties,{value:pe.map(function(be){return be.value}),valueSrc:pe.map(function(be){return be.valueSrc}),valueType:pe.map(function(be){return be.valueType})})}else if(q.type=="!group"&&!K)ye={type:"rule_group",id:(0,R.default)(),children1:{},properties:{conjunction:(0,C.defaultGroupConjunction)(E,q),not:f,mode:q.mode,field:G,operator:Z}},q.mode=="array"&&Object.assign(ye.properties,{value:pe.map(function(be){return be.value}),valueSrc:pe.map(function(be){return be.valueSrc}),valueType:pe.map(function(be){return be.valueType})});else{var Ae=pe.map(function(be){return be.asyncListValues}).filter(function(be){return be!=null}),Te=Ae.length?Ae[0]:void 0;ye={type:"rule",id:(0,R.default)(),properties:{field:G,operator:Z,value:pe.map(function(be){return be.value}),valueSrc:pe.map(function(be){return be.valueSrc}),valueType:pe.map(function(be){return be.valueType}),asyncListValues:Te}},f&&(ye=T(ye,E,f))}return ye}}}}},25179:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.loadFromSpel=i._loadFromSpel=void 0;var O=n(e(98595)),S=n(e(7818)),o=n(e(47552)),N=n(e(68148)),R=e(55825),L=n(e(14850)),A=e(58560),I=e(1694),y=e(79788),C=e(26749),M=e(12461),b=n(e(52291));function D(g,m){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(g);m&&(f=f.filter(function(a){return Object.getOwnPropertyDescriptor(g,a).enumerable})),E.push.apply(E,f)}return E}function x(g){for(var m=1;m<arguments.length;m++){var E=arguments[m]!=null?arguments[m]:{};m%2?D(Object(E),!0).forEach(function(f){(0,o.default)(g,f,E[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):D(Object(E)).forEach(function(f){Object.defineProperty(g,f,Object.getOwnPropertyDescriptor(E,f))})}return g}var F=function(m,E){return J(m,E,!0)};i.loadFromSpel=F;var J=function(m,E){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a={errors:[]},r=(0,A.extendConfig)(E),d=V(r),c,P,G=void 0;try{var q=R.SpelExpressionEvaluator.compile(m);c=q._compiledExpression}catch(j){a.errors.push(j)}c&&(M.logger.debug("compiledExpression:",c),P=U(c,a),M.logger.debug("convertedObj:",P,a),G=w(P,d,r,a),G&&G.type!="group"&&G.type!="switch_group"&&(G=u(G,r,P.not)),M.logger.debug("jsTree:",G));var Z=G?(0,y.loadTree)(G):void 0;return f?[Z,a.errors]:(a.errors.length&&console.warn("Errors while importing from SpEL:",a.errors),Z)};i._loadFromSpel=J;var U=function g(m,E){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=m.getType(),r=m.getChildren().map(function(Te){return g(Te,E,m)});if((a=="op-or"||a=="op-and")&&(r=r.reduce(function(Te,be){var We=be.type==a&&!be.not,je=We?be.children:[be];return[].concat((0,N.default)(Te),(0,N.default)(je))},[])),a=="op-not")return r.length!=1&&E.errors.push("Operator NOT should have 1 child, but got ".concat(r.length,"}")),x(x({},r[0]),{},{not:!r[0].not});if(a=="compound"){r=r.filter(function(Te){var be=Te.type=="selection"&&Te.children.length==1&&Te.children[0].type=="boolean"&&Te.children[0].val==!0;return!be});var d=r.find(function(Te){return Te.type=="selection"});d&&d.children.length!=1&&E.errors.push("Selection should have 1 child, but got ".concat(d.children.length));var c=d?d.children[0]:null,P=r[r.length-1],G=P.type=="method"&&P.val.methodName=="size"||P.type=="!func"&&P.methodName=="size",q=P.type=="property"&&P.val=="length",Z=r.filter(function(Te){return Te!==d&&Te!==P}),j={type:"compound",children:Z};if(G||q)return{type:"!aggr",filter:c,source:j};if(r=r.filter(function(Te){var be=Te.type=="variable"&&Te.val=="this",We=Te.type=="variable"&&Te.val=="root";return!(be||We)}),r=r.map(function(Te){return Te.type=="indexer"&&Te.children.length==1?{type:"indexer",val:Te.children[0].val,itype:Te.children[0].type}:Te}),P.type=="method"){var K=r.filter(function(Te){return Te!==P});return{type:"!func",obj:K,methodName:P.val.methodName,args:P.val.args}}if(P.type=="!func"){var k=r.filter(function(Te){return Te!==P});return x(x({},P),{},{obj:k})}}var Q;try{m.getRaw?Q=m.getRaw():m.getValue.length==0&&(Q=m.getValue())}catch(Te){M.logger.error("[spel2js] Error in getValue()",Te)}if(a=="ternary"&&(Q=W(r)),(0,S.default)(Q)==="object"&&Q!==null&&(Q.methodName||Q.functionName)&&(Q.args=Q.args.map(function(Te){return g(Te,E,m)})),a=="list"&&(Q=Q.map(function(Te){return g(Te,E,m)}),!f&&Q.length==1))return Q[0];if(a=="constructorref"){var ae=r.find(function(Te){return Te.type=="qualifiedidentifier"}),oe=ae?.val;if(!oe){E.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(r)));return}var le=r.filter(function(Te){return Te.type!="qualifiedidentifier"});return{type:"!new",cls:oe,args:le}}if(a=="typeref"){var ue=r.find(function(Te){return Te.type=="qualifiedidentifier"}),he=ue?.val;if(!he){E.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(r)));return}var pe=r.filter(function(Te){return Te.type!="qualifiedidentifier"});return{type:"!type",cls:he}}if(a=="function"||a=="method"){var ye=Q,Re=ye.functionName,Ce=ye.methodName,Ae=ye.args;return{type:"!func",methodName:Re||Ce,isVar:a=="function",args:Ae}}return{type:a,children:r,val:Q}},W=function(m){var E=[];function f(a){var r=(0,O.default)(a,3),d=r[0],c=r[1],P=r[2];E.push([d,c]),P?.type=="ternary"?f(P.children):E.push([void 0,P])}return f(m),E},V=function(m){var E={},f=function(k){var Q=m.operators[k];if(Q.spelOps)Q.spelOps.forEach(function(oe){var le=oe;E[le]||(E[le]=[]),E[le].push(k)});else if(Q.spelOp){var ae=Q.spelOp;E[ae]||(E[ae]=[]),E[ae].push(k)}else M.logger.log("[spel] No spelOp for operator ".concat(k))};for(var a in m.operators)f(a);var r={};for(var d in m.conjunctions){var c=m.conjunctions[d],P=c.spelConj||d.toLowerCase();r[P]=d}var G={};for(var q in m.funcs){var Z=m.funcs[q],j=void 0;typeof Z.spelFunc=="string"&&(j=Z.spelFunc),j&&(G[j]||(G[j]=[]),G[j].push(q))}return{operators:E,conjunctions:r,funcs:G}},H=function(m,E){var f=!1,a=m.map(function(r){if(r.type=="variable"||r.type=="property"||r.type=="indexer"&&r.itype=="string")return r.val;f=!0,E.errors.push("Unexpected item in compound: ".concat(JSON.stringify(r)))});return f?void 0:a},z=function g(m,E,f,a,r){if(m!=null){var d=f.settings.fieldSeparator,c={number:"number",string:"text",boolean:"boolean",null:"null"},P=r!=null&&r._groupField?[r?._groupField]:[];if(m.type=="compound"){var G,q,Z=H(m.children,a);if(!Z)return;var j=[].concat(P,(0,N.default)(Z)),K=((G=m.children)===null||G===void 0||(q=G[0])===null||q===void 0?void 0:q.type)=="variable";return{valueSrc:"field",isVariable:K,value:j.join(d)}}else if(m.type=="variable"||m.type=="property"){var k=[].concat(P,[m.val]),Q=m.type=="variable";return{valueSrc:"field",isVariable:Q,value:k.join(d)}}else if(c[m.type]){var ae=m.val,oe=c[m.type];return r!=null&&r.isUnary&&(ae=-ae),{valueSrc:"value",valueType:oe,value:ae}}else if(m.type=="list"){var le,ue=m.val.map(function(It){return g(It,E,f,a,m)}),he=ue.length?(le=ue[0])===null||le===void 0?void 0:le.valueType:null,pe=ue.map(function(It){return It?.value}),ye="multiselect";return{valueSrc:"value",valueType:ye,value:pe}}else if(m.type=="!func"){var Re,Ce=m.obj,Ae=m.methodName,Te=m.args,be=m.isVar,We=(Re={},(0,o.default)(Re,".contains","like"),(0,o.default)(Re,".startsWith","starts_with"),(0,o.default)(Re,".endsWith","ends_with"),(0,o.default)(Re,"$contains","select_any_in"),(0,o.default)(Re,".equals","multiselect_equals"),(0,o.default)(Re,"CollectionUtils.containsAny()","multiselect_contains"),Re),je=Te.map(function(It){return g(It,E,f,a,x(x({},m),{},{_groupField:r?._groupField}))});if(Ae=="contains"&&Ce&&Ce[0].type=="list"){var He=Ce.map(function(It){return g(It,E,f,a,m)});if(!(je.length==1&&je[0].valueSrc=="field")){a.errors.push("Expected arg to method ".concat(Ae," to be field but got: ").concat(JSON.stringify(je)));return}var De=je[0].value;if(!(He.length==1&&He[0].valueType=="multiselect")){a.errors.push("Expected object of method ".concat(Ae," to be inline list but got: ").concat(JSON.stringify(He)));return}var Ye=We["$"+Ae],nt=He[0];return $(f,a,De,Ye,[nt])}else if(Ce&&Ce[0].type=="property"&&We[Ce[0].val+"."+Ae+"()"]){var ke=We[Ce[0].val+"."+Ae+"()"],ve=je[0].value,Ee=je.slice(1);return $(f,a,ve,ke,Ee)}else if(We["."+Ae]){var Ie=We["."+Ae],we=H(Ce,a);if(we&&je.length==1){var Ue=[].concat(P,(0,N.default)(we)),Ge=Ue.join(d);return $(f,a,Ge,Ie,je)}}else if(Ae=="parse"&&Ce&&Ce[0].type=="!new"&&Ce[0].cls.at(-1)=="SimpleDateFormat"){var Ve=Ce[0].args.map(function(It){return g(It,E,f,a,x(x({},m),{},{_groupField:r?._groupField}))});if(!(Ve.length==1&&Ve[0].valueType=="text")){a.errors.push("Expected args of ".concat(Ce[0].cls.join("."),".").concat(Ae," to be 1 string but got: ").concat(JSON.stringify(Ve)));return}if(!(je.length==1&&je[0].valueType=="text")){a.errors.push("Expected args of ".concat(Ce[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(je)));return}var _e=Ve[0].value,ze=je[0].value,ot=_e.includes(" ")?"datetime":"date",Qe=null,ut=ot,pt=(0,A.getFieldConfig)(f,Qe),et=f.widgets[ut||pt?.mainWidget],vt=et.valueFormat,Et=(0,b.default)(ze,b.default.ISO_8601),Pt=Et.isValid()?Et.format(vt):void 0;return{valueSrc:"value",valueType:ot,value:Pt}}else if(Ae=="parse"&&Ce&&Ce[0].type=="!type"&&Ce[0].cls.at(-1)=="LocalTime"){if(!(je.length==1&&je[0].valueType=="text")){a.errors.push("Expected args of ".concat(Ce[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(je)));return}var Ct=je[0].value,lt="time",Rt=null,Ft=lt,bt=(0,A.getFieldConfig)(f,Rt),Bt=f.widgets[Ft||bt?.mainWidget],st=Bt.valueFormat,Ot=(0,b.default)(Ct,"HH:mm:ss"),Vt=Ot.isValid()?Ot.format(st):void 0;return{valueSrc:"value",valueType:lt,value:Vt}}else a.errors.push("Unsupported method ".concat(Ae))}else{if(m.type=="op-plus"&&r?.type=="ternary")return l(m,E,f,a);a.errors.push("Can't convert arg of type ".concat(m.type))}}},$=function(m,E,f,a,r){if(!r.filter(function(j){return j===void 0}).length){var d=(0,A.getFieldConfig)(m,f);if(!d){E.errors.push("No config for field ".concat(f));return}var c=(0,I.getWidgetForFieldOp)(m,f,a),P=m.widgets[c||d.mainWidget],G=r.map(function(j){return j.asyncListValues}).filter(function(j){return j!=null}),q=G.length?G[0]:void 0,Z={type:"rule",id:(0,L.default)(),properties:{field:f,operator:a,value:r.map(function(j){return j.value}),valueSrc:r.map(function(j){return j.valueSrc}),valueType:r.map(function(j){return j.valueSrc=="value"&&(P?.type||d?.type)||j.valueType}),asyncListValues:q}};return Z}},_=function(m,E,f,a,r){var d=m.groupFilter,c=m.groupFieldValue;if(c.valueSrc!="field")throw"Bad groupFieldValue: ".concat(JSON.stringify(c));var P=c.value,G=$(a,r,P,E,f);if(G){var q=(0,A.getFieldConfig)(a,P),Z=q?.mode,j=x(x({},d||{}),{},{type:"rule_group",properties:x(x(x({},G.properties),d?.properties||{}),{},{mode:Z})});return j.id||(j.id=(0,L.default)()),j}},Y=function(m,E,f,a,r,d){var c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(m.type==E.type)if(m.type=="!aggr"){var P=[m.source,E.source].map(function(ae){return z(ae,a,r,d,x(x({},f),{},{_groupField:c?._groupField}))}),G=(0,O.default)(P,2),q=G[0],Z=G[1];return q.value==Z.value}else{var j=[m,E].map(function(ae){return z(ae,a,r,d,x(x({},f),{},{_groupField:c?._groupField}))}),K=(0,O.default)(j,2),k=K[0],Q=K[1];return k.value==Q.value}return!1},w=function g(m,E,f,a){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(m){var d;if(m.type.indexOf("op-")==0){var c=m.type.slice(3),P=(c=="minus"||c=="plus")&&m.children.length==1;if(P)return m.isUnary=!0,g(m.children[0],E,f,a,m);var G=c=="and"&&m.children.length==2&&m.children[0].type=="op-ge"&&m.children[1].type=="op-le",q=c=="or"&&m.children.length==2&&m.children[0].type=="op-lt"&&m.children[1].type=="op-gt",Z=G||q;if(Z){var j=(0,O.default)(m.children[0].children,2),K=j[0],k=j[1],Q=(0,O.default)(m.children[1].children,2),ae=Q[0],oe=Q[1],le=k.type=="number"&&oe.type=="number",ue=Y(K,ae,m,E,f,a,r);if(le&&ue){var he=k.val,pe=oe.val,ye={type:"op-between",children:[K,k,oe]};return g(ye,E,f,a,r)}}var Re=E.operators[c],Ce;c=="eq"&&m.children[1].type=="null"?Ce="is_null":c=="ne"&&m.children[1].type=="null"?Ce="is_not_null":c=="le"&&m.children[1].type=="string"&&m.children[1].val==""?(Ce="is_empty",Re=["is_empty"]):c=="gt"&&m.children[1].type=="string"&&m.children[1].val==""?(Ce="is_not_empty",Re=["is_not_empty"]):c=="between"&&(Ce="between",Re=["between"]);var Ae=function(){return m.children.map(function(_e){return g(_e,E,f,a,x(x({},m),{},{_groupField:r?._groupField}))})};if(c=="and"||c=="or"){var Te={},be=Ae();be.forEach(function(Ve){if(Ve){var _e=(0,L.default)();Ve.id=_e,Ve.type!=null?Te[_e]=Ve:a.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(Ve)))}}),d={type:"group",id:(0,L.default)(),children1:Te,properties:{conjunction:E.conjunctions[c],not:m.not}}}else if(Re){var We=Ae(),je=We[0],He=We.slice(1);if(Ce=Re[0],je)if(je.groupFieldValue){je.groupFieldValue.valueSrc!="field"&&a.errors.push("Expected group field ".concat(JSON.stringify(je)));var De=je.groupFieldValue.value,Ye=He[0];Ye&&Ye.groupFieldValue&&Ye.groupFieldValue.valueSrc=="field"&&Ye.groupFieldValue.value==De?(Ce="all",He=[]):Ce=="equal"&&Ye.valueSrc=="value"&&Ye.valueType=="number"&&Ye.value==0?(Ce="none",He=[]):Ce=="greater"&&Ye.valueSrc=="value"&&Ye.valueType=="number"&&Ye.value==0&&(Ce="some",He=[]),d=_(je,Ce,He,f,a)}else{je.valueSrc!="field"&&a.errors.push("Expected field ".concat(JSON.stringify(je)));var nt=je.value;if(Re.length>1){M.logger.warn("[spel] Spel operator ".concat(c," can be mapped to ").concat(Re));var ke=Re.map(function(Ve){return{op:Ve,widget:(0,I.getWidgetForFieldOp)(f,nt,Ve)}});if(c=="eq"||c=="ne"){var ve=ke.find(function(Ve){var _e=Ve.op,ze=Ve.widget;return ze&&ze!="field"});Ce=ve.op}}d=$(f,a,nt,Ce,He)}}else r||(d=T(m,E,f,a)),d||a.errors.push("Can't convert op ".concat(c))}else if(m.type=="!aggr"){var Ee,Ie=g(m.source,E,f,a,x(x({},m),{},{_groupField:r?._groupField})),we=g(m.filter,E,f,a,x(x({},m),{},{_groupField:Ie?.value}));((Ee=we)===null||Ee===void 0?void 0:Ee.type)=="rule"&&(we=u(we,f)),d={groupFilter:we,groupFieldValue:Ie},r||(d=void 0,a.errors.push("Unexpected !aggr in root"))}else if(m.type=="ternary"){var Ue={};m.val.forEach(function(Ve){var _e=(0,O.default)(Ve,2),ze=_e[0],ot=_e[1],Qe=v(ze,ot,E,f,a,m);Qe&&(Ue[Qe.id]=Qe)}),d={type:"switch_group",id:(0,L.default)(),children1:Ue,properties:{}}}else if(d=z(m,E,f,a,r),d&&!d.type&&!r){var Ge=T(m,E,f,a);Ge?d=Ge:(d=void 0,a.errors.push("Can't convert rule of type ".concat(m.type,", it looks like var/literal")))}return d}},T=function(m,E,f,a){var r={},d=null,c=v(d,m,E,f,a);c&&(r[c.id]=c);var P={type:"switch_group",id:(0,L.default)(),children1:r,properties:{}};return P},v=function(m,E,f,a,r){var d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,c=p(a,r,f,E,d),P;return m?(P=w(m,f,a,r,d),P&&P.type?(P.type!="group"&&(P=u(P,a)),P.type="case_group"):(r.errors.push("Unexpected case: ".concat(JSON.stringify(P))),P=void 0)):P={id:(0,L.default)(),type:"case_group",properties:{}},P&&(P.properties=x(x({},P.properties),c)),P},l=function(m,E,f,a){var r=[];function d(c){c.map(function(P){if(P.type=="op-plus")d(P.children);else{var G=z(P,E,f,a,m);G?r.push(G):a.errors.push("Can't convert ".concat(P.type," in concatenation"))}})}return d(m.children),{valueSrc:"value",valueType:"case_value",value:r}},p=function(m,E,f,a){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,d={},c;a?.type=="op-plus"?c=l(a,f,m,E):c=z(a,f,m,E,r);var P=m.widgets.case_value,G=P?.spelImportValue;if(G){var q=G(c),Z=(0,O.default)(q,2),j=Z[0],K=Z[1];K.map(function(k){return E.errors.push(k)}),j&&(d={value:[j],valueSrc:["value"],valueType:["case_value"]})}else E.errors.push("No fucntion to import case value");return d},s=function(m,E,f,a,r){if(m)return{type:"rule_group",id:(0,L.default)(),children1:(0,o.default)({},m.id,m),properties:{conjunction:r||(0,C.defaultGroupConjunction)(a,f),not:!1,field:E}}},u=function(m,E){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:(0,L.default)(),children1:(0,o.default)({},m.id,m),properties:{conjunction:(0,C.defaultConjunction)(E),not:f||!1}}}},79788:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.isImmutableTree=i.getTree=i.checkTree=void 0,Object.defineProperty(i,"isJsonLogic",{enumerable:!0,get:function(){return A.isJsonLogic}}),i.loadTree=i.isValidTree=i.isTree=void 0;var S=n(e(7818)),o=y(e(7134)),N=e(46286),R=e(58560),L=e(89479),A=e(12461);function I(U){if(typeof WeakMap!="function")return null;var W=new WeakMap,V=new WeakMap;return(I=function(z){return z?V:W})(U)}function y(U,W){if(!W&&U&&U.__esModule)return U;if(U===null||O(U)!=="object"&&typeof U!="function")return{default:U};var V=I(W);if(V&&V.has(U))return V.get(U);var H={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in U)if($!=="default"&&Object.prototype.hasOwnProperty.call(U,$)){var _=z?Object.getOwnPropertyDescriptor(U,$):null;_&&(_.get||_.set)?Object.defineProperty(H,$,_):H[$]=U[$]}return H.default=U,V&&V.set(U,H),H}var C=function(W){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(W){var z=W;return z=z.toJS(),V&&(z=(0,L.getLightTree)(z,H)),z}};i.getTree=C;var M=function(W){if(x(W))return W;if(F(W))return J(W);if(typeof W=="string"&&W.startsWith('["~#iM"'))throw"You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17";if(typeof W=="string")return J(JSON.parse(W));throw"Can't load tree!"};i.loadTree=M;var b=function(W,V){if(W){var H=(0,R.extendConfig)(V);return(0,N.validateTree)(W,null,H,H)}};i.checkTree=b;var D=function(W){return(0,L.getTreeBadFields)(W).length==0};i.isValidTree=D;var x=function(W){return o.Map.isMap(W)};i.isImmutableTree=x;var F=function(W){return(0,S.default)(W)=="object"&&(W.type=="group"||W.type=="switch_group")};i.isTree=F;function J(U){return(0,o.fromJS)(U,function(W,V){var H;if(W=="properties"){H=V.toOrderedMap();for(var z=0;z<2;z++){var $;(($=H.get("value"))===null||$===void 0?void 0:$.get(z))===null&&(H=H.setIn(["value",z],void 0))}}else if(W=="value"&&V.get(0)&&V.get(0).toJS!==void 0){var _=V.get(0).toJS();_.func?H=V.toOrderedMap():H=o.default.List.of(_)}else W=="asyncListValues"?H=V.toJS():W=="children1"&&o.default.Iterable.isIndexed(V)?H=new o.default.OrderedMap(V.map(function(Y){return[Y.get("id"),Y]})):H=o.default.Iterable.isIndexed(V)?V.toList():V.toOrderedMap();return H})}},17351:(re,i,e)=>{"use strict";var n,O=e(87481),S=e(7818);n={value:!0},Object.defineProperty(i,"I4",{enumerable:!0,get:function(){return b.default}}),n=void 0,Object.defineProperty(i,"Ib",{enumerable:!0,get:function(){return R.default}}),n=n=n=void 0,Object.defineProperty(i,"AE",{enumerable:!0,get:function(){return N.default}}),n=i.cQ=void 0;var o=O(e(47552)),N=O(e(17026)),R=O(e(87375)),L=x(e(66353));n=L;var A=x(e(34496));n=A;var I=x(e(77731));n=I;var y=x(e(46177));n=y;var C=x(e(51868)),M=x(e(34850));n=M;var b=O(e(51305));function D(W){if(typeof WeakMap!="function")return null;var V=new WeakMap,H=new WeakMap;return(D=function($){return $?H:V})(W)}function x(W,V){if(!V&&W&&W.__esModule)return W;if(W===null||S(W)!=="object"&&typeof W!="function")return{default:W};var H=D(V);if(H&&H.has(W))return H.get(W);var z={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in W)if(_!=="default"&&Object.prototype.hasOwnProperty.call(W,_)){var Y=$?Object.getOwnPropertyDescriptor(W,_):null;Y&&(Y.get||Y.set)?Object.defineProperty(z,_,Y):z[_]=W[_]}return z.default=W,H&&H.set(W,z),z}function F(W,V){var H=Object.keys(W);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(W);V&&(z=z.filter(function($){return Object.getOwnPropertyDescriptor(W,$).enumerable})),H.push.apply(H,z)}return H}function J(W){for(var V=1;V<arguments.length;V++){var H=arguments[V]!=null?arguments[V]:{};V%2?F(Object(H),!0).forEach(function(z){(0,o.default)(W,z,H[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(H)):F(Object(H)).forEach(function(z){Object.defineProperty(W,z,Object.getOwnPropertyDescriptor(H,z))})}return W}var U=J(J(J({},C),L),A);i.cQ=U},59169:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=n(e(39953)),S=O.default.createContext();i.default=S},42889:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var S=n(e(98595)),o=n(e(47552)),N=n(e(7134)),R=e(89479),L=e(26749),A=J(e(5166)),I=n(e(14850)),y=e(58560),C=e(1694),M=e(12461),b=e(46286),D=n(e(96406)),x=n(e(33973));function F(Z){if(typeof WeakMap!="function")return null;var j=new WeakMap,K=new WeakMap;return(F=function(Q){return Q?K:j})(Z)}function J(Z,j){if(!j&&Z&&Z.__esModule)return Z;if(Z===null||O(Z)!=="object"&&typeof Z!="function")return{default:Z};var K=F(j);if(K&&K.has(Z))return K.get(Z);var k={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in Z)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(Z,ae)){var oe=Q?Object.getOwnPropertyDescriptor(Z,ae):null;oe&&(oe.get||oe.set)?Object.defineProperty(k,ae,oe):k[ae]=Z[ae]}return k.default=Z,K&&K.set(Z,k),k}function U(Z,j){var K=typeof Symbol<"u"&&Z[Symbol.iterator]||Z["@@iterator"];if(!K){if(Array.isArray(Z)||(K=W(Z))||j&&Z&&typeof Z.length=="number"){K&&(Z=K);var k=0,Q=function(){};return{s:Q,n:function(){return k>=Z.length?{done:!0}:{done:!1,value:Z[k++]}},e:function(he){throw he},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,oe=!1,le;return{s:function(){K=K.call(Z)},n:function(){var he=K.next();return ae=he.done,he},e:function(he){oe=!0,le=he},f:function(){try{!ae&&K.return!=null&&K.return()}finally{if(oe)throw le}}}}function W(Z,j){if(Z){if(typeof Z=="string")return V(Z,j);var K=Object.prototype.toString.call(Z).slice(8,-1);if(K==="Object"&&Z.constructor&&(K=Z.constructor.name),K==="Map"||K==="Set")return Array.from(Z);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return V(Z,j)}}function V(Z,j){(j==null||j>Z.length)&&(j=Z.length);for(var K=0,k=new Array(j);K<j;K++)k[K]=Z[K];return k}function H(Z,j){var K=Object.keys(Z);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(Z);j&&(k=k.filter(function(Q){return Object.getOwnPropertyDescriptor(Z,Q).enumerable})),K.push.apply(K,k)}return K}function z(Z){for(var j=1;j<arguments.length;j++){var K=arguments[j]!=null?arguments[j]:{};j%2?H(Object(K),!0).forEach(function(k){(0,o.default)(Z,k,K[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(K)):H(Object(K)).forEach(function(k){Object.defineProperty(Z,k,Object.getOwnPropertyDescriptor(K,k))})}return Z}var $=function(j,K,k,Q,ae,oe){var le=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,ue=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},he=oe.settings.shouldCreateEmptyGroup,pe=K.push(Q),ye=!he,Re=!!(ue!=null&&ue.isDefaultCase),Ce=j;return j=p(j,K,k,Q,(0,L.defaultGroupProperties)(oe).merge(ae||{}),oe,le),j!==Ce&&(!le&&!Re&&(j=j.setIn((0,R.expandTreePath)(pe,"children1"),new N.default.OrderedMap),ye&&(j=p(j,pe,"rule",(0,I.default)(),(0,L.defaultRuleProperties)(oe),oe))),j=(0,R.fixPathsInTree)(j)),j},_=function(j,K,k){j=s(j,K);var Q=k.settings.canLeaveEmptyGroup,ae=K.slice(0,-1),oe=!(0,R.hasChildren)(j,ae);return oe&&!Q&&(j=(0,R.fixEmptyGroupsInTree)(j),(0,R.isEmptyTree)(j)&&!Q&&(j=p(j,new N.default.List,"rule",(0,I.default)(),(0,L.defaultRuleProperties)(k),k))),j=(0,R.fixPathsInTree)(j),j},Y=function(j,K,k){j=s(j,K);var Q=k.settings.canLeaveEmptyGroup,ae=K.pop(),oe=j.getIn((0,R.expandTreePath)(ae)),le=oe.getIn(["properties","field"]),ue=oe.getIn(["properties","operator"]),he=oe.getIn(["properties","value",0]),pe=le?(0,y.getFieldConfig)(k,le):null,ye=ue?(0,y.getOperatorConfig)(k,ue,le):null,Re=le&&ue&&ye.cardinality!=0,Ce=oe.get("type")=="rule_group",Ae=!(0,R.hasChildren)(j,ae),Te=Ce?Re&&pe.initialEmptyWhere:Q;return Ae&&!Te&&(Ce&&(j=j.deleteIn((0,R.expandTreePath)(ae))),j=(0,R.fixEmptyGroupsInTree)(j),(0,R.isEmptyTree)(j)&&!Q&&(j=p(j,new N.default.List,"rule",(0,I.default)(),(0,L.defaultRuleProperties)(k),k))),j=(0,R.fixPathsInTree)(j),j},w=function(j,K,k){return j.setIn((0,R.expandTreePath)(K,"properties","not"),k)},T=function(j,K,k){return(0,R.removeIsLockedInTree)(j.setIn((0,R.expandTreePath)(K,"properties","isLocked"),k))},v=function(j,K,k){return j.setIn((0,R.expandTreePath)(K,"properties","conjunction"),k)},l=function Z(j,K,k){k&&Array.isArray(k)&&(K.children1=new N.default.OrderedMap(k.reduce(function(Q,ae){var oe=(0,I.default)(),le=z(z({},ae),{},{properties:(0,L.defaultItemProperties)(j,ae).merge(ae.properties||{}),id:oe});return Z(j,le,le.children1),z(z({},Q),{},(0,o.default)({},oe,new N.default.Map(le)))},{})))},p=function(j,K,k,Q,ae,oe){var le=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(k=="switch_group")throw new Error("Can't add switch_group programmatically");var ue=oe.settings,he=ue.maxNumberOfCases,pe=ue.maxNumberOfRules,ye=ue.maxNesting,Re=j.get("type"),Ce=Re=="switch_group",Ae=j.getIn((0,R.expandTreePath)(K)),Te=Ce?j.getIn((0,R.expandTreePath)(K.take(2))):null,be=(0,R.expandTreePath)(K,"children1"),We=j.getIn(be),je=!!We&&We.size,He=je?We.size:null,De,Ye;k=="case_group"?(De=He,Ye=he):k=="group"?(De=K.size,Ye=ye):Ae?.get("type")=="rule_group"||(De=Ce?(0,R.getTotalRulesCountInTree)(Te):(0,R.getTotalRulesCountInTree)(j),Ye=pe);var nt=Ye&&De?De<Ye:!0,ke={type:k,id:Q,properties:ae};l(oe,ke,le);var ve=k=="case_group"&&je&&We.last().get("children1")==null;if(nt){var Ee=new N.default.OrderedMap((0,o.default)({},Q,new N.default.Map(ke)));if(!je)j=j.setIn(be,Ee);else if(ve){var Ie,we=We.last(),Ue=new N.default.OrderedMap((Ie={},(0,o.default)(Ie,Q,new N.default.Map(ke)),(0,o.default)(Ie,we.get("id"),we),Ie));j=j.deleteIn((0,R.expandTreePath)(be,"children1",we.get("id"))),j=j.mergeIn(be,Ue)}else j=j.mergeIn(be,Ee);j=(0,R.fixPathsInTree)(j)}return j},s=function(j,K){return j=j.deleteIn((0,R.expandTreePath)(K)),j=(0,R.fixPathsInTree)(j),j},u=function(j,K,k,Q,ae){var oe=(0,R.getItemByPath)(j,K),le=K.pop(),ue=K.size>1?(0,R.getItemByPath)(j,le):null,he=ue?ue.get("children1"):null,pe=(0,R.getItemByPath)(j,k),ye=Q==A.PLACEMENT_APPEND||Q==A.PLACEMENT_PREPEND?k:k.pop(),Re=Q==A.PLACEMENT_APPEND||Q==A.PLACEMENT_PREPEND?pe:k.size>1?(0,R.getItemByPath)(j,ye):null,Ce=Re?Re.get("children1"):null;if(!ue||!Re||!oe)return j;var Ae=ue.get("id")==Re.get("id"),Te=ye.size<le.size&&(0,M.deepEqual)(ye.toArray(),le.toArray().slice(0,ye.size)),be=ye.size>le.size&&(0,M.deepEqual)(le.toArray(),ye.toArray().slice(0,le.size)),We=null,je=null;Te?We=N.default.List(le.toArray().slice(ye.size)):be&&(je=N.default.List(ye.toArray().slice(le.size)));var He=Ce,De=he;return be||(De=De.delete(oe.get("id"))),Ae?He=De:Te&&(He=He.updateIn((0,R.expandTreeSubpath)(We,"children1"),function(Ye){return De})),Q==A.PLACEMENT_BEFORE||Q==A.PLACEMENT_AFTER?He=N.default.OrderedMap().withMutations(function(Ye){var nt=U(He.entries()),ke;try{for(nt.s();!(ke=nt.n()).done;){var ve=(0,S.default)(ke.value,2),Ee=ve[0],Ie=ve[1];Ee==pe.get("id")&&Q==A.PLACEMENT_BEFORE&&Ye.set(oe.get("id"),oe),Ye.set(Ee,Ie),Ee==pe.get("id")&&Q==A.PLACEMENT_AFTER&&Ye.set(oe.get("id"),oe)}}catch(we){nt.e(we)}finally{nt.f()}}):Q==A.PLACEMENT_APPEND?He=He.merge((0,o.default)({},oe.get("id"),oe)):Q==A.PLACEMENT_PREPEND&&(He=N.default.OrderedMap((0,o.default)({},oe.get("id"),oe)).merge(He)),be&&(De=De.updateIn((0,R.expandTreeSubpath)(je,"children1"),function(Ye){return He}),De=De.delete(oe.get("id"))),!Ae&&!Te&&(j=j.updateIn((0,R.expandTreePath)(le,"children1"),function(Ye){return De})),be||(j=j.updateIn((0,R.expandTreePath)(ye,"children1"),function(Ye){return He})),j=(0,R.fixPathsInTree)(j),j},g=function(j,K,k,Q){if(!k)return s(j,K);var ae=Q.settings,oe=ae.fieldSeparator,le=ae.setOpOnChangeField,ue=ae.showErrorMessage;Array.isArray(k)&&(k=k.join(oe));var he=j.getIn((0,R.expandTreePath)(K,"type")),pe=j.getIn((0,R.expandTreePath)(K,"properties")),ye=he=="rule_group",Re=(0,y.getFieldConfig)(Q,k),Ce=Re.type=="!group",Ae=Ce&&Re.mode=="array",Te=ye!=Ce,be=pe.get("operator"),We=pe.get("operatorOptions"),je=pe.get("field"),He=pe.get("value"),De=pe.get("valueSrc",new N.default.List),Ye=pe.get("valueType",new N.default.List),nt=Re&&Re.operators.indexOf(be)!==-1?be:null,ke=null,ve=(0,C.getOperatorsForField)(Q,k);if(ve&&ve.length==1)ke=ve[0];else if(ve&&ve.length>1){var Ee=U(le||[]),Ie;try{for(Ee.s();!(Ie=Ee.n()).done;){var we=Ie.value;if(we=="keep"&&!Te?ke=nt:we=="default"?ke=(0,L.defaultOperator)(Q,k,!1):we=="first"&&(ke=(0,C.getFirstOperator)(Q,k)),ke)break}}catch(ut){Ee.e(ut)}finally{Ee.f()}}if(!Ce&&!Re.operators)return console.warn("Type ".concat(Re.type," is not supported")),j;if(ye&&!Ce&&(j=j.setIn((0,R.expandTreePath)(K,"type"),"rule"),j=j.deleteIn((0,R.expandTreePath)(K,"children1")),j=j.setIn((0,R.expandTreePath)(K,"properties"),new N.default.OrderedMap)),Ce){j=j.setIn((0,R.expandTreePath)(K,"type"),"rule_group");var Ue=(0,C.getNewValueForFieldOp)(Q,Q,pe,k,ke,"field",!0),Ge=Ue.canReuseValue,Ve=Ue.newValue,_e=Ue.newValueSrc,ze=Ue.newValueType,ot=Ue.operatorCardinality,Qe=(0,L.defaultGroupProperties)(Q,Re).merge({field:k,mode:Re.mode});return Ae&&(Qe=Qe.merge({operator:ke,value:Ve,valueSrc:_e,valueType:ze})),j=j.setIn((0,R.expandTreePath)(K,"children1"),new N.default.OrderedMap),j=j.setIn((0,R.expandTreePath)(K,"properties"),Qe),Re.initialEmptyWhere&&ot==1||(j=p(j,K,"rule",(0,I.default)(),(0,L.defaultRuleProperties)(Q,k),Q)),j=(0,R.fixPathsInTree)(j),j}return j.updateIn((0,R.expandTreePath)(K,"properties"),function(ut){return ut.withMutations(function(pt){var et=(0,C.getNewValueForFieldOp)(Q,Q,pt,k,ke,"field",!0),vt=et.canReuseValue,Et=et.newValue,Pt=et.newValueSrc,Ct=et.newValueType,lt=et.newValueError;ue&&(pt=pt.set("valueError",lt));var Rt=vt?We:(0,L.defaultOperatorOptions)(Q,ke,k);return pt.set("field",k).set("operator",ke).set("operatorOptions",Rt).set("value",Et).set("valueSrc",Pt).set("valueType",Ct).delete("asyncListValues")})})},m=function(j,K,k,Q){var ae=Q.settings.showErrorMessage,oe=j.getIn((0,R.expandTreePath)(K,"properties")),le=j.getIn((0,R.expandTreePath)(K,"children1")),ue=oe.get("field"),he=(0,y.getFieldConfig)(Q,ue),pe=he.type=="!group",ye=(0,y.getOperatorConfig)(Q,k,ue),Re=ye?(0,M.defaultValue)(ye.cardinality,1):null;return j=j.updateIn((0,R.expandTreePath)(K,"properties"),function(Ce){return Ce.withMutations(function(Ae){var Te=Ae.get("field"),be=Ae.get("operatorOptions"),We=Ae.get("value",new N.default.List),je=Ae.get("valueSrc",new N.default.List),He=Ae.get("operator"),De=(0,C.getNewValueForFieldOp)(Q,Q,Ae,Te,k,"operator",!0),Ye=De.canReuseValue,nt=De.newValue,ke=De.newValueSrc,ve=De.newValueType,Ee=De.newValueError;ae&&(Ae=Ae.set("valueError",Ee));var Ie=Ye?be:(0,L.defaultOperatorOptions)(Q,k,Te);return Ye||(Ae=Ae.delete("asyncListValues")),Ae.set("operator",k).set("operatorOptions",Ie).set("value",nt).set("valueSrc",ke).set("valueType",ve)})}),pe&&Re==0&&le.size==0&&(j=p(j,K,"rule",(0,I.default)(),(0,L.defaultRuleProperties)(Q,ue),Q)),j},E=function(j,K,k,Q,ae,oe,le,ue){var he=oe.settings,pe=he.fieldSeparator,ye=he.showErrorMessage,Re,Ce=j.getIn((0,R.expandTreePath)(K,"properties","valueSrc",k+""))||null;Ce==="field"&&Array.isArray(Q)&&(Q=Q.join(pe));var Ae=j.getIn((0,R.expandTreePath)(K,"properties","field"))||null,Te=j.getIn((0,R.expandTreePath)(K,"properties","operator"))||null,be=(0,y.getOperatorConfig)(oe,Te,Ae),We=Te?(0,M.defaultValue)(be.cardinality,1):null,je=!1,He=ae||d(Q,Ce,oe),De=!1,Ye=(0,b.validateValue)(oe,Ae,Ae,Te,Q,He,Ce,le,De,je),nt=(0,S.default)(Ye,2),ke=nt[0],ve=nt[1],Ee=!ke;if(ve!==Q&&(Q=ve),ye){var Ie=(0,C.getWidgetForFieldOp)(oe,Ae,Te,Ce),we=(0,y.getFieldWidgetConfig)(oe,Ae,Te,Ie,Ce),Ue=Array.from({length:We},function(et,vt){return j.getIn((0,R.expandTreePath)(K,"properties","valueSrc",vt+""))||null});if(be&&be.validateValues&&Ue.filter(function(et){return et=="value"||et==null}).length==We){var Ge=Array.from({length:We},function(et,vt){return vt==k?Q:j.getIn((0,R.expandTreePath)(K,"properties","value",vt+""))||null}),Ve=we&&we.toJS?Ge.map(function(et){return we.toJS(et,we)}):Ge,_e=be.validateValues(Ve);j=j.setIn((0,R.expandTreePath)(K,"properties","valueError",We),_e)}}var ze=j.getIn((0,R.expandTreePath)(K,"properties","value"));ze||(j=j.setIn((0,R.expandTreePath)(K,"properties","value"),new N.default.List(new Array(We))).setIn((0,R.expandTreePath)(K,"properties","valueType"),new N.default.List(new Array(We))).setIn((0,R.expandTreePath)(K,"properties","valueError"),new N.default.List(new Array(We))));var ot=j.getIn((0,R.expandTreePath)(K,"properties","value",k+"")),Qe=j.getIn((0,R.expandTreePath)(K,"properties","valueError",k)),ut=ot==null,pt=!!Qe;return(Ee||ye)&&(j=j.deleteIn((0,R.expandTreePath)(K,"properties","asyncListValues")),typeof Q>"u"?(j=j.setIn((0,R.expandTreePath)(K,"properties","value",k+""),void 0),j=j.setIn((0,R.expandTreePath)(K,"properties","valueType",k+""),null)):(le&&(j=j.setIn((0,R.expandTreePath)(K,"properties","asyncListValues"),le)),j=j.setIn((0,R.expandTreePath)(K,"properties","value",k+""),Q),j=j.setIn((0,R.expandTreePath)(K,"properties","valueType",k+""),He),Re=ue&&!ut&&!pt)),ye&&(j=j.setIn((0,R.expandTreePath)(K,"properties","valueError",k),ke)),ue&&(Ee&&pt||!Ee&&!pt)&&(j=j.setIn((0,R.expandTreePath)(K,"properties","valueError",k),ke),Re=!1),{tree:j,isInternalValueChange:Re}},f=function(j,K,k,Q,ae){var oe=ae.settings.showErrorMessage,le=j.getIn((0,R.expandTreePath)(K,"properties","field"))||null,ue=j.getIn((0,R.expandTreePath)(K,"properties","operator"))||null;if(j=j.setIn((0,R.expandTreePath)(K,"properties","value",k+""),void 0),j=j.setIn((0,R.expandTreePath)(K,"properties","valueType",k+""),null),j=j.deleteIn((0,R.expandTreePath)(K,"properties","asyncListValues")),oe){j=j.setIn((0,R.expandTreePath)(K,"properties","valueError",k),null);var he=(0,y.getOperatorConfig)(ae,ue,le),pe=ue?(0,M.defaultValue)(he.cardinality,1):null;he.validateValues&&(j=j.setIn((0,R.expandTreePath)(K,"properties","valueError",pe),null))}if(typeof Q>"u"?j=j.setIn((0,R.expandTreePath)(K,"properties","valueSrc",k+""),null):j=j.setIn((0,R.expandTreePath)(K,"properties","valueSrc",k+""),Q),Q){var ye=j.getIn((0,R.expandTreePath)(K,"properties")),Re=(0,C.getNewValueForFieldOp)(ae,ae,ye,le,ue,"valueSrc",!0),Ce=Re.canReuseValue,Ae=Re.newValue,Te=Re.newValueSrc,be=Re.newValueType,We=Re.newValueError;!Ce&&Te.get(k)==Q&&(j=j.setIn((0,R.expandTreePath)(K,"properties","value",k+""),Ae.get(k)),j=j.setIn((0,R.expandTreePath)(K,"properties","valueType",k+""),be.get(k)))}return j},a=function(j,K,k,Q){return j.setIn((0,R.expandTreePath)(K,"properties","operatorOptions",k),Q)},r=function(j,K){var k=K.settings.canLeaveEmptyGroup;return k||(j=(0,R.fixEmptyGroupsInTree)(j)),j},d=function(j,K,k){var Q=null;if(j){if(K==="field"){var ae=(0,y.getFieldConfig)(k,j);ae&&(Q=ae.type)}else if(K==="func"){var oe=j.get("func");if(oe){var le=(0,y.getFuncConfig)(k,oe);le&&(Q=le.returnType)}}}return Q},c=function(j,K){var k=j.getIn((0,R.expandTreePath)(K,"properties","field"))||null;return k},P={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}},G=function(j,K){var k=["config","asyncListValues","__isInternal"],Q=[A.SET_TREE,A.SET_DRAG_START,A.SET_DRAG_PROGRESS,A.SET_DRAG_END],ae=(0,x.default)((0,D.default)(j,k),M.applyToJS),oe=j.path&&c(K.tree,j.path)||j.field;return oe&&(ae.affectedField=oe),(Q.includes(j.type)||j.type.indexOf("@@redux")==0)&&(ae=null),ae},q=function(j,K,k){var Q=(0,L.defaultRoot)(j),ae=K||Q,oe=z({tree:ae},P);return function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oe,ue=arguments.length>1?arguments[1]:void 0,he={__isInternalValueChange:void 0,__lastAction:void 0},pe={},ye=G(ue,le);switch(ue.type){case A.SET_TREE:{var Re=k(ue.config,ue.tree);pe.tree=Re;break}case A.ADD_CASE_GROUP:{pe.tree=$(le.tree,ue.path,"case_group",ue.id,ue.properties,ue.config,ue.children,ue.meta);break}case A.ADD_GROUP:{pe.tree=$(le.tree,ue.path,"group",ue.id,ue.properties,ue.config,ue.children,ue.meta);break}case A.REMOVE_GROUP:{pe.tree=_(le.tree,ue.path,ue.config);break}case A.ADD_RULE:{pe.tree=p(le.tree,ue.path,ue.ruleType,ue.id,ue.properties,ue.config,ue.children);break}case A.REMOVE_RULE:{pe.tree=Y(le.tree,ue.path,ue.config);break}case A.SET_CONJUNCTION:{pe.tree=v(le.tree,ue.path,ue.conjunction);break}case A.SET_NOT:{pe.tree=w(le.tree,ue.path,ue.not);break}case A.SET_FIELD:{pe.tree=g(le.tree,ue.path,ue.field,ue.config);break}case A.SET_LOCK:{pe.tree=T(le.tree,ue.path,ue.lock);break}case A.SET_OPERATOR:{pe.tree=m(le.tree,ue.path,ue.operator,ue.config);break}case A.SET_VALUE:{var Ce=E(le.tree,ue.path,ue.delta,ue.value,ue.valueType,ue.config,ue.asyncListValues,ue.__isInternal),Ae=Ce.tree,Te=Ce.isInternalValueChange;pe.__isInternalValueChange=Te,pe.tree=Ae;break}case A.SET_VALUE_SRC:{pe.tree=f(le.tree,ue.path,ue.delta,ue.srcKey,ue.config);break}case A.SET_OPERATOR_OPTION:{pe.tree=a(le.tree,ue.path,ue.name,ue.value);break}case A.MOVE_ITEM:{pe.tree=u(le.tree,ue.fromPath,ue.toPath,ue.placement,ue.config);break}case A.SET_DRAG_START:{pe.dragStart=ue.dragStart,pe.dragging=ue.dragging,pe.mousePos=ue.mousePos;break}case A.SET_DRAG_PROGRESS:{pe.mousePos=ue.mousePos,pe.dragging=ue.dragging;break}case A.SET_DRAG_END:{pe.tree=r(le.tree,j),pe=z(z({},pe),P);break}default:break}return ye&&(pe.__lastAction=ye),z(z(z({},le),he),pe)}};i.default=q},87754:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.simulateAsyncFetch=i.mergeListValues=i.listValueToOption=i.getListValue=void 0;var O=n(e(80341)),S=n(e(68148)),o=n(e(2376)),N=e(12461),R=function(C){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;return function(){var D=(0,o.default)(O.default.mark(function x(F,J,U){var W,V,H,z,$,_,Y,w;return O.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return W=U.pageSize!=null?U.pageSize:M,V=(0,N.listValuesToArray)(C).filter(function(l){var p=l.title;return F==null?!0:p.toUpperCase().indexOf(F.toUpperCase())!=-1}),H=W?Math.ceil(V.length/W):0,z=J||0,$=W?Math.ceil(z/W):null,_=W?V.slice(z,z+W):V,Y=W?z+_.length:null,w=W?Y<V.length:!1,console.debug("simulateAsyncFetch",{search:F,offset:J,values:_,hasMore:w,filtered:V}),v.next=11,(0,N.sleep)(b);case 11:return v.abrupt("return",{values:_,hasMore:w});case 12:case"end":return v.stop()}},x)}));return function(x,F,J){return D.apply(this,arguments)}}()};i.simulateAsyncFetch=R;var L=function(C,M){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!M)return C;var D=C||[],x=M.filter(function(J){return D.find(function(U){return U.value==J.value})==null}),F=b?[].concat((0,S.default)(x),(0,S.default)(D)):[].concat((0,S.default)(D),(0,S.default)(x));return F};i.mergeListValues=L;var A=function(C){if(C==null)return null;var M=C.title,b=C.value,D=C.disabled,x=C.groupTitle,F=C.renderTitle,J={title:M,value:b};return D&&(J.disabled=D),x&&(J.groupTitle=x),F&&(J.renderTitle=F),J};i.listValueToOption=A;var I=function(C,M){return(0,N.mapListValues)(M,function(b){return b.value===C?b:null}).filter(function(b){return b!==null}).shift()};i.getListValue=I},58560:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.normalizeField=i.getOperatorConfig=i.getFuncConfig=i.getFuncArgConfig=i.getFieldWidgetConfig=i.getFieldRawConfig=i.getFieldConfig=i.extendConfig=i.createConfigMemo=void 0;var O=n(e(68148)),S=n(e(47552)),o=n(e(7818)),N=n(e(82564)),R=n(e(14850)),L=n(e(44362)),A=e(22821),I=n(e(52291)),y=e(12461),C=e(1694),M=n(e(80189)),b=n(e(48289));function D(f,a){var r=Object.keys(f);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(f);a&&(d=d.filter(function(c){return Object.getOwnPropertyDescriptor(f,c).enumerable})),r.push.apply(r,d)}return r}function x(f){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?D(Object(r),!0).forEach(function(d){(0,S.default)(f,d,r[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(d){Object.defineProperty(f,d,Object.getOwnPropertyDescriptor(r,d))})}return f}function F(f,a){var r=typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(!r){if(Array.isArray(f)||(r=J(f))||a&&f&&typeof f.length=="number"){r&&(f=r);var d=0,c=function(){};return{s:c,n:function(){return d>=f.length?{done:!0}:{done:!1,value:f[d++]}},e:function(j){throw j},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var P=!0,G=!1,q;return{s:function(){r=r.call(f)},n:function(){var j=r.next();return P=j.done,j},e:function(j){G=!0,q=j},f:function(){try{!P&&r.return!=null&&r.return()}finally{if(G)throw q}}}}function J(f,a){if(f){if(typeof f=="string")return U(f,a);var r=Object.prototype.toString.call(f).slice(8,-1);if(r==="Object"&&f.constructor&&(r=f.constructor.name),r==="Map"||r==="Set")return Array.from(f);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(f,a)}}function U(f,a){(a==null||a>f.length)&&(a=f.length);for(var r=0,d=new Array(a);r<a;r++)d[r]=f[r];return d}var W=["conjunctions","fields","types","operators","widgets","settings","funcs"],V=function(a){return(0,b.default)(a,W)},H=function(){var a=new Map,r=2,d=0,c=function(Z){var j=z(Z,++d);return a.size+1>r&&a.delete(a.keys()[0]),a.set(Z,j),j},P=function(Z){var j=F(a.keys()),K;try{var k=function(){var pe=K.value,ye=W.map(function(Re){return pe[Re]===Z[Re]}).filter(function(Re){return!Re}).length===0;if(ye)return{v:a.get(pe)}};for(j.s();!(K=j.n()).done;){var Q=k();if((0,o.default)(Q)==="object")return Q.v}}catch(he){j.e(he)}finally{j.f()}var ae=F(a.values()),oe;try{var le=function(){var pe=oe.value,ye=W.map(function(Re){return pe[Re]===Z[Re]}).filter(function(Re){return!Re}).length===0;if(ye)return{v:pe}};for(ae.s();!(oe=ae.n()).done;){var ue=le();if((0,o.default)(ue)==="object")return ue.v}}catch(he){ae.e(he)}finally{ae.f()}return null},G=function(Z){return P(Z)||c(Z)};return function(q){return G(V(q))}};i.createConfigMemo=H;var z=function(a,r){return a.__configId||(a=x({},a),a.settings=(0,N.default)({},A.settings,a.settings),a._fieldsCntByType={},a._funcsCntByType={},a.types=(0,M.default)(a.types),$(a.types,a),a.fields=(0,M.default)(a.fields),a.__fieldNames={},Y(a.fields,a),a.funcs=(0,M.default)(a.funcs),w(a.funcs,a),I.default.locale(a.settings.locale.moment),Object.defineProperty(a,"__configId",{enumerable:!1,writable:!1,value:r||(0,R.default)()})),a};i.extendConfig=z;function $(f,a){for(var r in f){var d=f[r];_(r,d,a)}}function _(f,a,r){var d=null,c=null;a.mainWidget=a.mainWidget||Object.keys(a.widgets).filter(function(k){return k!="field"&&k!="func"})[0];for(var P in a.widgets){var G=a.widgets[P];if(G.operators){var q=G.operators;a.excludeOperators&&(q=q.filter(function(k){return!a.excludeOperators.includes(k)})),d=(0,y.mergeArraysSmart)(d,q)}G.defaultOperator&&(c=G.defaultOperator),P==a.mainWidget&&(G=(0,N.default)({},{widgetProps:a.mainWidgetProps||{}},G)),a.widgets[P]=G}a.valueSources||(a.valueSources=Object.keys(r.settings.valueSourcesInfo));var Z=F(a.valueSources),j;try{for(Z.s();!(j=Z.n()).done;){var K=j.value;K!="value"&&!a.widgets[K]&&(a.widgets[K]={})}}catch(k){Z.e(k)}finally{Z.f()}!a.operators&&d&&(a.operators=Array.from(new Set(d))),!a.defaultOperator&&c&&(a.defaultOperator=c)}function Y(f,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];for(var d in f)T(f[d],a,[].concat((0,O.default)(r),[d])),f[d].subfields&&Y(f[d].subfields,a,[].concat((0,O.default)(r),[d]))}function w(f,a){if(f)for(var r in f){var d=f[r];d.returnType&&(a._funcsCntByType[d.returnType]||(a._funcsCntByType[d.returnType]=0),a._funcsCntByType[d.returnType]++);for(var c in d.args)T(d.args[c],a,null,!0);if(d.args){var P=Object.keys(d.args),G=!0,q=F(P.reverse()),Z;try{for(q.s();!(Z=q.n()).done;){var j=Z.value,K=d.args[j];!G&&K.isOptional&&delete K.isOptional,K.isOptional||(G=!1)}}catch(k){q.e(k)}finally{q.f()}}d.subfields&&w(d.subfields,a)}}function T(f,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=null,P=null,G=a.types[f.type],q=f.excludeOperators||[];if(f.type!="!struct"&&f.type!="!group"){var Z=["listValues","allowCustomValues","validateValue"];f.fieldSettings||(f.fieldSettings={});for(var j=0,K=Z;j<K.length;j++){var k=K[j];f[k]&&(f.fieldSettings[k]=f[k],delete f[k])}if(f.fieldSettings.listValues&&(f.fieldSettings.listValues=(0,y.normalizeListValues)(f.fieldSettings.listValues,f.type,f.fieldSettings)),!G){f.disabled=!0;return}d||(a._fieldsCntByType[f.type]||(a._fieldsCntByType[f.type]=0),a._fieldsCntByType[f.type]++),f.widgets||(f.widgets={}),d&&(f._isFuncArg=!0),f.mainWidget=f.mainWidget||G.mainWidget,f.valueSources=f.valueSources||G.valueSources;var Q=G.excludeOperators||[];for(var ae in G.widgets){var oe=f.widgets[ae]||{},le=G.widgets[ae]||{};d||function(){var he=[].concat((0,O.default)(q),(0,O.default)(Q)),pe=f.preferWidgets&&(ae=="field"||f.preferWidgets.includes(ae))||he.length>0;if(oe.operators){var ye=oe.operators.filter(function(Ce){return!he.includes(Ce)});c=[].concat((0,O.default)(c||[]),(0,O.default)(ye))}else if(pe&&le.operators){var Re=le.operators.filter(function(Ce){return!he.includes(Ce)});c=[].concat((0,O.default)(c||[]),(0,O.default)(Re))}oe.defaultOperator&&(P=oe.defaultOperator)}(),ae==f.mainWidget&&(oe=(0,N.default)({},{widgetProps:f.mainWidgetProps||{}},oe)),f.widgets[ae]=oe}d||(!f.operators&&c&&(f.operators=Array.from(new Set(c))),!f.defaultOperator&&P&&(f.defaultOperator=P))}var ue=l(a,r);ue&&(f.fieldName=ue),r&&f.fieldName&&(a.__fieldNames[f.fieldName]=r)}var v=function(a,r){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"fields",c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"subfields";if(!r)return null;if(r=="!case_value")return{type:"case_value",mainWidget:"case_value",widgets:{case_value:a.widgets.case_value}};var P=a.settings.fieldSeparator,G=Array.isArray(r)?r:r.split(P),q=a[d];if(!q)return null;for(var Z=q,j=null,K=[],k=0;k<G.length;k++){var Q=G[k];K.push(Q);var ae=K.join(P);j=Z[ae],k<G.length-1&&(j&&j[c]?(Z=j[c],K=[]):j=null)}return j};i.getFieldRawConfig=v;var l=function(a,r){if(!r)return null;for(var d=a.settings.fieldSeparator,c=(0,O.default)(r),P=[],G,q;(G=c.pop())!==void 0&&c.length>0;)if(P.unshift(G),q=v(a,c),q.fieldName)return[q.fieldName].concat(P).join(d);return null},p=function(a,r){var d=a.settings.fieldSeparator,c=Array.isArray(r)?r.join(d):r;return a.__fieldNames[c]?a.__fieldNames[c].join(d):c};i.normalizeField=p;var s=function(a,r){if(!r)return null;var d=v(a,r,"funcs","subfields");return d||null};i.getFuncConfig=s;var u=function(a,r,d){var c=s(a,r);if(!c)return null;var P=c.args&&c.args[d]||null;if(!P)return null;var G=a.types[P.type]||{},q=(0,L.default)({},G,P||{},function(Z,j,K,k,Q,ae){if(Array.isArray(Z))return j});return q};i.getFuncArgConfig=u;var g=function(a,r){if(!r)return null;if((0,o.default)(r)=="object"&&!r.func&&r.type)return r;if((0,o.default)(r)=="object"&&r.func&&r.arg)return u(a,r.func,r.arg);var d=v(a,r);if(!d)return null;var c=a.types[d.type]||{},P=(0,L.default)({},c,d||{},function(G,q,Z,j,K,k){if(Array.isArray(G))return q});return P};i.getFieldConfig=g;var m=function(a,r){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!r)return null;var c=a.operators[r];if(d){var P=g(a,d),G=(0,C.getWidgetForFieldOp)(a,d,r),q=a.widgets[G]||{},Z=(P&&P.widgets?P.widgets[G]:{})||{},j=(q.opProps||{})[r],K=(Z.opProps||{})[r],k=(0,N.default)({},c,j,K);return k}else return c};i.getOperatorConfig=m;var E=function(a,r,d){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,P=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!r||!(d||c)&&P!="const"&&r!="!case_value")return null;var G=g(a,r);c||(c=(0,C.getWidgetForFieldOp)(a,r,d,P));var q=a.widgets[c]||{},Z=(G&&G.widgets?G.widgets[c]:{})||{},j=Z.widgetProps||{},K=(P=="value"||!P)&&G&&G.fieldSettings||{},k=(0,N.default)({},q,j,K);return k};i.getFieldWidgetConfig=E},26749:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.defaultRuleProperties=i.defaultRule=i.defaultRoot=i.defaultOperatorOptions=i.defaultOperator=i.defaultItemProperties=i.defaultGroupProperties=i.defaultGroupConjunction=i.defaultField=i.defaultConjunction=void 0;var O=n(e(47552)),S=n(e(7134)),o=n(e(14850)),N=e(58560),R=e(1694);function L(W,V){var H=Object.keys(W);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(W);V&&(z=z.filter(function($){return Object.getOwnPropertyDescriptor(W,$).enumerable})),H.push.apply(H,z)}return H}function A(W){for(var V=1;V<arguments.length;V++){var H=arguments[V]!=null?arguments[V]:{};V%2?L(Object(H),!0).forEach(function(z){(0,O.default)(W,z,H[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(H)):L(Object(H)).forEach(function(z){Object.defineProperty(W,z,Object.getOwnPropertyDescriptor(H,z))})}return W}var I=function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return typeof V.settings.defaultField=="function"?V.settings.defaultField(z):V.settings.defaultField||(H?(0,R.getFirstField)(V,z):null)};i.defaultField=I;var y=function(V,H){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,$=(0,N.getFieldConfig)(V,H),_=$&&$.operators||[],Y=$&&$.defaultOperator;_.includes(Y)||(Y=null),!Y&&z&&(Y=(0,R.getFirstOperator)(V,H));var w=typeof V.settings.defaultOperator=="function"?V.settings.defaultOperator(H,$):Y;return w};i.defaultOperator=y;var C=function(V,H,z){var $=H?(0,N.getOperatorConfig)(V,H,z):null;return $&&$.options?new S.default.Map($.options&&$.options.defaults||{}):null};i.defaultOperatorOptions=C;var M=function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,$=null,_=null,Y=V.settings,w=Y.setDefaultFieldAndOp,T=Y.showErrorMessage;if(z){var v,l;$=z==null||(v=z.properties)===null||v===void 0?void 0:v.field,_=z==null||(l=z.properties)===null||l===void 0?void 0:l.operator}else w&&($=I(V,!0,H),_=y(V,$));var p=new S.default.Map({field:$,operator:_,value:new S.default.List,valueSrc:new S.default.List,operatorOptions:C(V,_,$)});if(T&&(p=p.set("valueError",new S.default.List)),$&&_){var s=(0,R.getNewValueForFieldOp)(V,V,p,$,_,"operator",!1),u=s.newValue,g=s.newValueSrc,m=s.newValueType,E=s.newValueError;p=p.set("value",u).set("valueSrc",g).set("valueType",m),T&&(p=p.set("valueError",E))}return p};i.defaultRuleProperties=M;var b=function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;H=(0,N.getFieldConfig)(V,H);var z=H&&H.conjunctions||Object.keys(V.conjunctions);return z.length==1?z[0]:V.settings.defaultGroupConjunction||V.settings.defaultConjunction||z[0]};i.defaultGroupConjunction=b;var D=function(V){return V.settings.defaultConjunction||Object.keys(V.conjunctions)[0]};i.defaultConjunction=D;var x=function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new S.default.Map({conjunction:b(V,H),not:!1})};i.defaultGroupProperties=x;var F=function(V,H){var z;return H&&H.type=="group"?x(V,H==null||(z=H.properties)===null||z===void 0?void 0:z.field):M(V,null,H)};i.defaultItemProperties=F;var J=function(V,H){return(0,O.default)({},V,new S.default.Map({type:"rule",id:V,properties:M(H)}))};i.defaultRule=J;var U=function(V){return new S.default.Map({type:"group",id:(0,o.default)(),children1:new S.default.OrderedMap(A({},J((0,o.default)(),V))),properties:x(V)})};i.defaultRoot=U},19302:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.sqlEmptyValue=i.spelImportConcat=i.spelFormatConcat=i.spelFixList=i.spelEscape=i.mongoEmptyValue=i.SqlString=void 0;var O=n(e(7818)),S=e(6804);i.SqlString=S,S.trim=function(M){return M.charAt(0)=="'"?M.substring(1,M.length-1):M},S.escapeLike=function(M){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,x=S.escape(M);return x=S.trim(x),x=x.replace(/[%_]/g,"\\$&"),x=(b?"%":"")+x+(D?"%":""),x="'"+x+"'",x};var o=function(b){var D="''",x=b?.type;return x=="date"?D="'0000-00-00'":x=="datetime"?D="'0000-00-00 00:00'":x=="time"?D="'00:00'":x=="number"&&(D="0"),D};i.sqlEmptyValue=o;var N=function(b){var D="",x=b?.type;return x=="number"&&(D=0),D};i.mongoEmptyValue=N;var R=function(b){return"'"+b.replace(/'/g,"''")+"'"},L=function(b){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x,F,J=["int","float"];b.map(function(V){if(V!=null){if(typeof V=="string")F="String";else if(typeof V=="number")F=Number.isInteger(V)?"int":"float";else throw new Error("spelEscape: Can't use value ".concat(V," in array"));if(!x)x=F;else if(x!=F)if(J.includes(x)&&J.includes(F))x="float";else throw new Error("spelEscape: Can't use different types in array: found ".concat(x," and ").concat(F))}}),x||(x="String");var U;x=="float"?U=b.map(function(V){return I(V,!0)}):U=b.map(function(V){return I(V)});var W;return D?W="new ".concat(x,"[]{").concat(U.join(", "),"}"):W="{".concat(U.join(", "),"}"),W},A=function(b){return"".concat(b,".?[true]")};i.spelFixList=A;var I=function(b){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(b==null)return"null";switch((0,O.default)(b)){case"boolean":return b?"true":"false";case"number":return!Number.isFinite(b)||isNaN(b)?void 0:b+(!Number.isInteger(b)||D?"f":"");case"object":if(Array.isArray(b))return L(b,x);throw new Error("spelEscape: Object is not supported");default:return R(b)}};i.spelEscape=I;var y=function(b){return b&&Array.isArray(b)&&b.length?b.map(function(D){if(D.type=="const")return I(D.value);if(D.type=="property")return""+D.value;if(D.type=="variable")return"#"+D.value}).filter(function(D){return D!=null}).join(" + "):"null"};i.spelFormatConcat=y;var C=function(b){if(b==null)return[void 0,[]];var D=[],x=b.valueType=="case_value"?b.value:[b],F=x.map(function(J){if(J.valueSrc=="value")return J.value===null?void 0:{type:"const",value:J.value};if(J.valueSrc=="field")return{type:J.isVariable?"variable":"property",value:J.value};D.push("Unsupported valueSrc ".concat(J.valueSrc," in concatenation"))}).filter(function(J){return J!=null});return[F,D]};i.spelImportConcat=C},84275:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.setFunc=i.setArgValueSrc=i.setArgValue=i.completeValue=i.completeFuncValue=void 0;var O=n(e(7818)),S=e(58560),o=e(1694),N=n(e(7134));function R(J,U){var W=typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(!W){if(Array.isArray(J)||(W=L(J))||U&&J&&typeof J.length=="number"){W&&(J=W);var V=0,H=function(){};return{s:H,n:function(){return V>=J.length?{done:!0}:{done:!1,value:J[V++]}},e:function(w){throw w},f:H}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var z=!0,$=!1,_;return{s:function(){W=W.call(J)},n:function(){var w=W.next();return z=w.done,w},e:function(w){$=!0,_=w},f:function(){try{!z&&W.return!=null&&W.return()}finally{if($)throw _}}}}function L(J,U){if(J){if(typeof J=="string")return A(J,U);var W=Object.prototype.toString.call(J).slice(8,-1);if(W==="Object"&&J.constructor&&(W=J.constructor.name),W==="Map"||W==="Set")return Array.from(J);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return A(J,U)}}function A(J,U){(U==null||U>J.length)&&(U=J.length);for(var W=0,V=new Array(U);W<U;W++)V[W]=J[W];return V}var I=function(U){return(0,O.default)(U)=="object"&&U!==null&&!Array.isArray(U)},y=function(U,W,V){return W=="func"?C(U,V):U};i.completeValue=y;var C=function(U,W){var V=function(z){if(z){var $=z.get("func"),_=$&&(0,S.getFuncConfig)(W,$);if(_){var Y=z,w=!1;for(var T in _.args){var v=_.args[T],l=v.valueSources,p=v.isOptional,s=v.defaultValue,u=(0,o.filterValueSourcesForField)(W,l,v),g=Y.get("args"),m=u.length==1?u[0]:void 0,E=g?g.get(T):void 0,f=E?E.get("value"):void 0,a=(E?E.get("valueSrc"):void 0)||m;if(f!==void 0){var r=y(f,a,W);if(r===void 0||(r!==f&&(Y=Y.setIn(["args",T,"value"],r)),w))return}else if(s!==void 0&&!I(s))Y=Y.setIn(["args",T,"value"],D(v)),Y=Y.setIn(["args",T,"valueSrc"],"value");else if(p)w=!0;else return}return Y}}};return V(U)};i.completeFuncValue=C;var M=function(U,W){var V=[],H=[],z=function $(_){var Y=_&&_.get("args");if(Y){var w=R(Y.values()),T;try{for(w.s();!(T=w.n()).done;){var v=T.value;if(v.get("valueSrc")=="field"){var l=v.get("value");if(l){var p=W?(0,S.getFieldConfig)(W,l):void 0;W&&!p?H.push(l):V.push(l)}}else v.get("valueSrc")=="func"&&$(v.get("value"))}}catch(s){w.e(s)}finally{w.f()}}};return z(U),[V,H]},b=function(U,W,V){var H=V.settings.fieldSeparator;U=U||new N.default.Map,Array.isArray(W)&&(W=W.join(H)),U=U.set("func",W),U=U.set("args",new N.default.Map);var z=W&&(0,S.getFuncConfig)(V,W);if(z)for(var $ in z.args){var _=z.args[$],Y=_.valueSources,w=_.defaultValue,T=(0,o.filterValueSourcesForField)(V,Y,_),v=T.length?T[0]:void 0,l=w?I(w)&&w.func?"func":"value":void 0,p=l||v;w!==void 0&&(U=U.setIn(["args",$,"value"],D(_))),p&&(U=U.setIn(["args",$,"valueSrc"],p))}return U};i.setFunc=b;var D=function(U){var W=U.defaultValue;return I(W)&&!N.default.Map.isMap(W)&&W.func?N.default.fromJS(W,function(V,H){return N.default.Iterable.isIndexed(H)?H.toList():H.toOrderedMap()}):W},x=function(U,W,V,H,z){if(U&&U.get("func")){U=U.setIn(["args",W,"value"],V);var $=H.valueSources,_=(0,o.filterValueSourcesForField)(z,$,H),Y=_.length==1?_[0]:void 0;Y&&(U=U.setIn(["args",W,"valueSrc"],Y))}return U};i.setArgValue=x;var F=function(U,W,V,H,z){return U&&U.get("func")&&(U=U.setIn(["args",W],new N.default.Map({valueSrc:V}))),U};i.setArgValueSrc=F},51868:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.TreeUtils=i.ExportUtils=i.DefaultUtils=i.ConfigUtils=void 0,Object.defineProperty(i,"getSwitchValues",{enumerable:!0,get:function(){return A.getSwitchValues}}),Object.defineProperty(i,"simulateAsyncFetch",{enumerable:!0,get:function(){return o.simulateAsyncFetch}}),Object.defineProperty(i,"uuid",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(i,"validateTree",{enumerable:!0,get:function(){return S.validateTree}});var S=e(46286),o=e(87754),N=n(e(14850)),R=C(e(58560));i.ConfigUtils=R;var L=C(e(26749));i.DefaultUtils=L;var A=C(e(89479));i.TreeUtils=A;var I=C(e(19302));i.ExportUtils=I;function y(M){if(typeof WeakMap!="function")return null;var b=new WeakMap,D=new WeakMap;return(y=function(F){return F?D:b})(M)}function C(M,b){if(!b&&M&&M.__esModule)return M;if(M===null||O(M)!=="object"&&typeof M!="function")return{default:M};var D=y(b);if(D&&D.has(M))return D.get(M);var x={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var J in M)if(J!=="default"&&Object.prototype.hasOwnProperty.call(M,J)){var U=F?Object.getOwnPropertyDescriptor(M,J):null;U&&(U.get||U.set)?Object.defineProperty(x,J,U):x[J]=M[J]}return x.default=M,D&&D.set(M,x),x}},58479:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.useOnPropsChanged=i.pureShouldComponentUpdate=i.liteShouldComponentUpdate=i.isUsingLegacyReactDomRender=i.bindActionCreators=void 0;var O=n(e(39953)),S=n(e(33973)),o=e(12461),N=function(D){if(D._reactRootContainer)return"root";if(Object.getOwnPropertyNames(D).filter(function(x){return x.startsWith("__reactContainer")}).length>0)return"container"},R=function b(D){if(D){var x=N(D);return x!==void 0?x:b(D.parentNode)}},L=function(D){return R(D)==="root"};i.isUsingLegacyReactDomRender=L;var A=function(D,x){return function(F,J){var U=D.props,W=D.state,V=F!=U||J!=W;if(V&&W==J&&U!=F){var H=[];for(var z in F){var $=F[z]!=U[z];$&&(x[z]=="ignore"?$=!1:x[z]=="shallow_deep"?$=!(0,o.shallowEqual)(F[z],U[z],!0):x[z]=="shallow"?$=!(0,o.shallowEqual)(F[z],U[z]):typeof x[z]=="function"&&($=x[z](F[z],U[z],J))),$&&H.push(z)}H.length||(V=!1)}return V}};i.liteShouldComponentUpdate=A;var I=function(D){return function(x,F){return!(0,o.shallowEqual)(D.props,x)||!(0,o.shallowEqual)(D.state,F)}};i.pureShouldComponentUpdate=I;var y=function(){var D=O.default.version.split(".").map(parseInt.bind(null,10));return D[0]==16&&D[1]>=3||D[0]>16},C=function(D){y?D.UNSAFE_componentWillReceiveProps=function(x){D.onPropsChanged(x)}:D.componentWillReceiveProps=function(x){D.onPropsChanged(x)}};i.useOnPropsChanged=C;var M=function(D,x,F){return(0,S.default)(D,function(J){return function(){for(var U=arguments.length,W=new Array(U),V=0;V<U;V++)W[V]=arguments[V];return F(J.apply(void 0,[x].concat(W)))}})};i.bindActionCreators=M},1694:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.getWidgetsForFieldOp=i.getWidgetForFieldOp=i.getValueSourcesForFieldOp=i.getValueLabel=i.getOperatorsForField=i.getNewValueForFieldOp=i.getFuncPathLabels=i.getFirstOperator=i.getFirstField=i.getFieldPathLabels=i.getFieldPath=i.getFieldPartsConfigs=i.formatFieldName=i.filterValueSourcesForField=void 0;var O=n(e(7818)),S=n(e(68148)),o=n(e(98595)),N=e(58560),R=e(12461),L=n(e(7134)),A=e(46286),I=n(e(57312)),y=["select","multiselect","treeselect","treemultiselect"],C=function(T){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=arguments.length>2?arguments[2]:void 0,p=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0,m=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;v||(v=T);var E=l.get("field"),f=l.get("operator"),a=l.get("value"),r=l.get("valueSrc",new L.default.List),d=l.get("valueType",new L.default.List),c=l.get("asyncListValues"),P=T.settings,G=P.convertableWidgets,q=P.clearValueOnChangeField,Z=P.clearValueOnChangeOp,j=P.showErrorMessage,K=(0,N.getOperatorConfig)(T,s,p),k=s?(0,R.defaultValue)(K.cardinality,1):null,Q=(0,N.getFieldConfig)(v,E),ae=(0,N.getFieldConfig)(T,p),oe=E&&f&&s&&a!=null&&(!u||u=="field"&&!q||u=="operator"&&!Z)&&Q&&ae&&Q.type==ae.type;oe&&y.includes(Q.type)&&u=="field"&&(oe=!1);for(var le=0;le<k;le++){var ue=r.get(le)||null,he=_(v,E,f,ue),pe=_(T,p,s,ue),ye=ue=="value"?he:_(v,E,f,"value"),Re=ue=="value"?pe:_(T,p,s,"value"),Ce=Re==ye||(G[ye]||[]).includes(Re);Ce||(oe=!1)}f!=s&&[f,s].includes("proximity")&&(oe=!1);var Ae=(0,N.getFieldWidgetConfig)(T,p,s,null,r.first()),Te=$(T,p,s),be={},We=Array.from({length:k},function(){return null});if(oe)for(var je=function(Ue){var Ge=a.get(Ue),Ve=d.get(Ue)||null,_e=r.get(Ue)||null,ze=Te.find(function(lt){return lt==_e})!=null;!ze&&Ue>0&&_e==null&&(ze=!0);var ot=c,Qe=(0,A.validateValue)(T,p,p,s,Ge,Ve,_e,ot,g,m),ut=(0,o.default)(Qe,2),pt=ut[0],et=ut[1],vt=!pt,Et=et!==Ge,Pt=!ze||!vt&&(u=="field"||!j&&!Et),Ct=!!pt&&j&&!Pt&&!Et;if(Ct&&(We[Ue]=pt),Et&&(be[Ue]=et),Pt)return oe=!1,"break"},He=0;He<k;He++){var De=je(He);if(De==="break")break}var Ye=null,nt=null,ke=null,ve=null;if(Ye=new L.default.List(Array.from({length:k},function(we,Ue){var Ge=void 0;if(oe)Ue<a.size&&(Ge=a.get(Ue),be[Ue]!==void 0&&(Ge=be[Ue]));else if(k==1){var Ve;Ge=(0,R.getFirstDefined)([ae?.defaultValue,ae==null||(Ve=ae.fieldSettings)===null||Ve===void 0?void 0:Ve.defaultValue,Ae?.defaultValue])}return Ge})),nt=new L.default.List(Array.from({length:k},function(we,Ue){var Ge=null;return oe?Ue<r.size&&(Ge=r.get(Ue)):(Te.length==1||Te.length>1)&&(Ge=Te[0]),Ge})),j){if(K&&K.validateValues&&nt.toJS().filter(function(we){return we=="value"||we==null}).length==k){var Ee=Ae&&Ae.toJS?Ye.toJS().map(function(we){return Ae.toJS(we,Ae)}):Ye.toJS(),Ie=K.validateValues(Ee);j&&We.push(Ie)}ve=new L.default.List(We)}return ke=new L.default.List(Array.from({length:k},function(we,Ue){var Ge=null;return oe?Ue<d.size&&(Ge=d.get(Ue)):k==1&&Ae&&Ae.type!==void 0?Ge=Ae.type:k==1&&ae&&ae.type!==void 0&&(Ge=ae.type=="!group"?"number":ae.type),Ge})),{canReuseValue:oe,newValue:Ye,newValueSrc:nt,newValueType:ke,newValueError:ve,operatorCardinality:k}};i.getNewValueForFieldOp=C;var M=function(T){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=T.settings.fieldSeparator,p=typeof v=="string"?v.split(l):v,s=v?(0,N.getFieldRawConfig)(T,v):T,u=s,g=null,m=[];do{var E=u===T?T.fields:u.subfields;if(!E||!Object.keys(E).length){u=g=null;break}g=Object.keys(E)[0],m.push(g),u=E[g]}while(u.type=="!struct"||u.type=="!group");return(p||[]).concat(m).join(l)};i.getFirstField=M;var b=function(T,v){var l=(0,N.getFieldConfig)(T,v),p=l?l.operators:[];return p};i.getOperatorsForField=b;var D=function(T,v){var l=b(T,v);return l?l[0]:null};i.getFirstOperator=D;var x=function(T,v){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!T)return null;var p=v.settings.fieldSeparator,s=Array.isArray(T)?T:T.split(p);return l?s:s.map(function(u,g,m){return m.slice(0,g+1)}).map(function(u){return u.join(p)})};i.getFieldPath=x;var F=function(T,v){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return J(T,v,l,"funcs","subfields")};i.getFuncPathLabels=F;var J=function(T,v){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"fields",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"subfields";if(!T)return null;var u=v.settings.fieldSeparator,g=Array.isArray(T)?T:T.split(u),m=l?Array.isArray(l)?l:l.split(u):[];return g.slice(m.length).map(function(E,f,a){return a.slice(0,f+1)}).map(function(E){return[].concat((0,S.default)(m),(0,S.default)(E)).join(u)}).map(function(E){var f=(0,N.getFieldRawConfig)(v,E,p,s);return f&&f.label||f&&(0,I.default)(E.split(u))}).filter(function(E){return E!=null})};i.getFieldPathLabels=J;var U=function(T,v){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!T)return null;var p=l&&(0,N.getFieldRawConfig)(v,l)||null,s=v.settings.fieldSeparator,u=Array.isArray(T)?T:T.split(s),g=l?Array.isArray(l)?l:l.split(s):[];return u.slice(g.length).map(function(m,E,f){return f.slice(0,E+1)}).map(function(m){return{part:[].concat((0,S.default)(g),(0,S.default)(m)).join(s),key:m[m.length-1]}}).map(function(m){var E=m.part,f=m.key,a=(0,N.getFieldRawConfig)(v,E);return{key:f,cnf:a}}).map(function(m,E,f){var a=m.key,r=m.cnf,d=E>0?f[E-1].cnf:p;return[a,r,d]})};i.getFieldPartsConfigs=U;var W=function(T,v,l,p){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,g=v&&(0,O.default)(v)=="object"&&!!v.func&&!!v.arg,m=T.settings.showLabels,E=(0,N.getFieldConfig)(T,v),f=(0,N.getFieldWidgetConfig)(T,v,l,null,s)||{},a=(0,N.getOperatorConfig)(T,l,v)||{},r=u?1:a.cardinality,d=null;if(r>1){var c=f.valueLabels||a.valueLabels;c&&(d=c[p]),d&&(0,O.default)(d)!="object"&&(d={label:d,placeholder:d}),d||(d={label:T.settings.valueLabel+" "+(p+1),placeholder:T.settings.valuePlaceholder+" "+(p+1)})}else{var P=f.valueLabel,G=f.valuePlaceholder;g&&(P||(P=E.label||v.arg),!G&&!m&&(G=E.label||v.arg)),d={label:P||T.settings.valueLabel,placeholder:G||T.settings.valuePlaceholder}}return d};i.getValueLabel=W;function V(w,T){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=[],s=[];if(!T)return{widgets:p,valueSrcs:s};var u=(0,O.default)(T)=="object"&&(!!T.func&&!!T.arg||T._isFuncArg),g=(0,N.getFieldConfig)(w,T),m=v?w.operators[v]:null;if(g&&g.widgets){var E=function(d){var c=g.widgets[d],P=w.widgets[d].valueSrc||"value",G=!0;if(d=="field"&&(G=G&&z(w,["field"],g).length>0),d=="func"&&(G=G&&z(w,["func"],g).length>0),l=="value"&&!c.operators&&!u&&T!="!case_value"&&(G=!1),c.operators&&v&&(G=G&&c.operators.indexOf(v)!=-1),l&&l!=P&&l!="const"&&(G=!1),m&&m.cardinality==0&&P!="value"&&(G=!1),G){p.push(d);var q=g.valueSources&&g.valueSources.indexOf(P)!=-1;m&&m.valueSources&&m.valueSources.indexOf(P)==-1&&(q=!1),q&&!s.find(function(Z){return Z==P})&&s.push(P)}};for(var f in g.widgets)E(f)}var a=function(d){var c=0;return g.preferWidgets?g.preferWidgets.includes(d)&&(c+=10-g.preferWidgets.indexOf(d)):d==g.mainWidget&&(c+=100),d=="field"&&(c-=1),d=="func"&&(c-=2),c};return p.sort(function(r,d){return a(d)-a(r)}),{widgets:p,valueSrcs:s}}var H=function(T,v,l){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=V(T,v,l,p),u=s.widgets;return u};i.getWidgetsForFieldOp=H;var z=function(T,v,l){return l?v.filter(function(p){var s=!0;if(p=="field"&&T._fieldsCntByType){var u=l._isFuncArg?0:1;s=s&&T._fieldsCntByType[l.type]>u}return p=="func"&&(T._funcsCntByType&&(s=s&&!!T._funcsCntByType[l.type]),l.funcs&&(s=s&&l.funcs.length>0)),s}):v};i.filterValueSourcesForField=z;var $=function(T,v,l){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=V(T,v,l,null),g=u.valueSrcs,m=z(T,g,p);return m};i.getValueSourcesForFieldOp=$;var _=function(T,v,l){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=V(T,v,l,p),u=s.widgets,g=null;return u.length&&(g=u[0]),g};i.getWidgetForFieldOp=_;var Y=function(T,v,l){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(T){var s=(0,N.getFieldConfig)(v,T)||{},u=v.settings.fieldSeparator,g=Array.isArray(T)?T:T.split(u),m=Array.isArray(T)?T.join(u):T;if(s.tableName){var E=(0,S.default)(g);E[0]=s.tableName,m=E.join(u)}if(s.fieldName&&(m=s.fieldName),p){var f=(0,N.getFieldConfig)(v,p)||{},a=p;f.fieldName&&(a=f.fieldName),m.indexOf(a+u)==0?m=m.slice((a+u).length):l.errors.push("Can't cut group ".concat(a," from field ").concat(m))}return m}};i.formatFieldName=Y},12461:(re,i,e)=>{"use strict";var n=e(87481),O=e(7818);Object.defineProperty(i,"__esModule",{value:!0}),i.applyToJS=d,i.mapListValues=i.logger=i.listValuesToArray=i.isJsonLogic=i.isImmutable=i.immutableEqual=i.getValueInListValues=i.getTitleInListValues=i.getLogger=i.getItemInListValues=i.getFirstDefined=i.flatizeTreeData=i.escapeRegExp=i.eqSet=i.eqArrSet=i.defaultValue=i.defaultTreeDataMap=i.deepEqual=void 0,i.mergeArraysSmart=P,i.shallowEqual=i.removePrefixPath=i.normalizeListValues=void 0,i.sleep=a,i.toImmutableList=c,i.truncateString=void 0;var S=n(e(98595)),o=n(e(68148)),N=n(e(7818)),R=A(e(7134));function L(K){if(typeof WeakMap!="function")return null;var k=new WeakMap,Q=new WeakMap;return(L=function(oe){return oe?Q:k})(K)}function A(K,k){if(!k&&K&&K.__esModule)return K;if(K===null||O(K)!=="object"&&typeof K!="function")return{default:K};var Q=L(k);if(Q&&Q.has(K))return Q.get(K);var ae={},oe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in K)if(le!=="default"&&Object.prototype.hasOwnProperty.call(K,le)){var ue=oe?Object.getOwnPropertyDescriptor(K,le):null;ue&&(ue.get||ue.set)?Object.defineProperty(ae,le,ue):ae[le]=K[le]}return ae.default=K,Q&&Q.set(K,ae),ae}function I(K,k){var Q=typeof Symbol<"u"&&K[Symbol.iterator]||K["@@iterator"];if(!Q){if(Array.isArray(K)||(Q=y(K))||k&&K&&typeof K.length=="number"){Q&&(K=Q);var ae=0,oe=function(){};return{s:oe,n:function(){return ae>=K.length?{done:!0}:{done:!1,value:K[ae++]}},e:function(ye){throw ye},f:oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le=!0,ue=!1,he;return{s:function(){Q=Q.call(K)},n:function(){var ye=Q.next();return le=ye.done,ye},e:function(ye){ue=!0,he=ye},f:function(){try{!le&&Q.return!=null&&Q.return()}finally{if(ue)throw he}}}}function y(K,k){if(K){if(typeof K=="string")return C(K,k);var Q=Object.prototype.toString.call(K).slice(8,-1);if(Q==="Object"&&K.constructor&&(Q=K.constructor.name),Q==="Map"||Q==="Set")return Array.from(K);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return C(K,k)}}function C(K,k){(k==null||k>K.length)&&(k=K.length);for(var Q=0,ae=new Array(k);Q<k;Q++)ae[Q]=K[Q];return ae}var M=function(k,Q){return typeof k>"u"?Q:k};i.defaultValue=M;var b=function(k,Q,ae){if(!Q||k.length<=Q)return k;var oe=k.substr(0,Q-1);return(ae?oe.substr(0,oe.lastIndexOf(" ")):oe)+"..."};i.truncateString=b;var D=function(k,Q){return k===Q?!0:k.equals(Q)};i.immutableEqual=D;var x=function(k,Q){return k===Q?!0:R.Map.isMap(k)?k.equals(Q):JSON.stringify(k)==JSON.stringify(Q)};i.deepEqual=x;var F=function(k,Q){if(k.size!==Q.size)return!1;var ae=I(k),oe;try{for(ae.s();!(oe=ae.n()).done;){var le=oe.value;if(!Q.has(le))return!1}}catch(ue){ae.e(ue)}finally{ae.f()}return!0};i.eqSet=F;var J=function(k,Q){return F(new Set(k),new Set(Q))};i.eqArrSet=J;var U=function(k,Q){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return k===Q?!0:Array.isArray(k)?W(k,Q,ae):R.Map.isMap(k)?k.equals(Q):(0,N.default)(k)=="object"?V(k,Q,ae):k===Q};i.shallowEqual=U;function W(K,k){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(K===k)return!0;if(!K||!k)return!1;var ae=K.length;if(k.length!==ae)return!1;for(var oe=0;oe<ae;oe++){var le=Q?U(K[oe],k[oe],Q):K[oe]===k[oe];if(!le)return!1}return!0}function V(K,k){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(K===k)return!0;if(!K||!k)return!1;var ae=Object.keys(K),oe=Object.keys(k),le=ae.length;if(oe.length!==le)return!1;for(var ue=0;ue<le;ue++){var he=ae[ue],pe=Q?U(K[he],k[he],Q):K[he]===k[he];if(!pe)return!1}return!0}var H=function(k){return k.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")};i.escapeRegExp=H;var z=function(k){return(0,N.default)(k)=="object"&&k!==null},$=function(k,Q){return z(k)?k:{value:k,title:Q!==void 0?Q:k}},_=function(k){if(!z(k))return k;if(Array.isArray(k))return k.map(function(le){return $(le)});var Q=[];for(var ae in k){var oe=k[ae];Q.push($(ae,oe))}return Q};i.listValuesToArray=_;var Y=function(k,Q){if(Array.isArray(k)){var ae=k.map(function(oe){return $(oe)});return ae.find(function(oe){return oe.value===Q})||ae.find(function(oe){return"".concat(oe.value)===Q})}else return k[Q]!==void 0?$(Q,k[Q]):void 0};i.getItemInListValues=Y;var w=function(k,Q){if(k==null)return Q;var ae=Y(k,Q);return ae!==void 0?ae.title:Q};i.getTitleInListValues=w;var T=function(k,Q){if(k==null)return Q;var ae=Y(k,Q);return ae!==void 0?ae.value:Q};i.getValueInListValues=T;var v=function(k,Q){var ae=[];if(Array.isArray(k)){var oe=I(k),le;try{for(oe.s();!(le=oe.n()).done;){var ue=le.value,he=Q($(ue));he!=null&&ae.push(he)}}catch(Re){oe.e(Re)}finally{oe.f()}}else for(var pe in k){var ye=Q($(pe,k[pe]));ye!=null&&ae.push(ye)}return ae};i.mapListValues=v;var l={id:"value",pId:"parent",rootPId:void 0};i.defaultTreeDataMap=l;var p=function(k){var Q=l,ae,oe,le=function he(pe,ye,Re){if(pe.children){Re==1&&(pe[Q.pId]=Q.rootPId);var Ce=pe.children.length,Ae=I(pe.children),Te;try{for(Ae.s();!(Te=Ae.n()).done;){var be=Te.value;be[Q.pId]=pe[Q.id],ae++,ye.splice(ae,0,be),oe++,he(be,ye,Re+1)}}catch(We){Ae.e(We)}finally{Ae.f()}delete pe.children,Ce==0&&(ye.splice(ae,1),ae--,oe--)}};if(Array.isArray(k))for(oe=k.length,ae=0;ae<oe;ae++){var ue=k[ae];z(ue)&&(ue[Q.pId]!==void 0&&ue[Q.pId]!=Q.rootPId||le(ue,k,1))}return k};i.flatizeTreeData=p;var s=function K(k,Q){var ae=l,oe=Y(k,Q),le=oe?oe[ae.pId]:void 0,ue=le?k.find(function(he){return he[ae.id]===le}):void 0;return ue?[ue.value].concat((0,o.default)(K(k,ue.value))):[]},u=function(k,Q){var ae=l,oe=Y(k,Q);return oe?k.filter(function(le){return le[ae.pId]===oe[ae.id]}).map(function(le){return le.value}):[]},g=function(k,Q,ae){var oe=I(k),le;try{for(oe.s();!(le=oe.n()).done;){var ue=le.value;if(ue.path=s(k,ue.value),Q.treeSelectOnlyLeafs!=!1){var he=u(k,ue.value);ae||(ue.selectable=he.length==0)}}}catch(pe){oe.e(pe)}finally{oe.f()}return k},m=function(k,Q,ae){var oe=["treeselect","treemultiselect"].includes(Q),le=["multiselect","treemultiselect"].includes(Q);return oe&&(k=_(k),k=p(k),k=g(k,ae,le)),k};i.normalizeListValues=m;var E=function(k,Q){if(!k)return k;for(var ae=!0,oe=0;oe<Q.length;oe++){var le=Q[oe];if(!(k[oe]!==void 0&&le==k[oe])){ae=!1;break}}return ae?k.slice(Q.length):k};i.removePrefixPath=E;var f=function(k){return(0,N.default)(k)==="object"&&k!==null&&!Array.isArray(k)&&Object.keys(k).length===1};i.isJsonLogic=f;function a(K){return new Promise(function(k){setTimeout(k,K)})}var r=function(k){return(0,N.default)(k)==="object"&&k!==null&&typeof k.toJS=="function"};i.isImmutable=r;function d(K){return r(K)?K.toJS():K}function c(K){return r(K)?K:new R.default.List(K)}function P(K,k){return K||(K=[]),k||(k=[]),k.map(function(Q){return[Q,K.indexOf(Q)]}).map(function(Q,ae,oe){var le=(0,S.default)(Q,2),ue=le[0],he=le[1];if(he==-1){var pe=oe.slice(ae+1),ye=oe.slice(0,ae),Re=ye.reverse().find(function(Ae){var Te=(0,S.default)(Ae,2),be=Te[0],We=Te[1];return We!=-1}),Ce=pe.find(function(Ae){var Te=(0,S.default)(Ae,2),be=Te[0],We=Te[1];return We!=-1});return Ce?[ue,"before",Ce[0]]:Re?[ue,"after",Re[0]]:[ue,"append",null]}else return null}).filter(function(Q){return Q!==null}).reduce(function(Q,ae){var oe=(0,S.default)(ae,3),le=oe[0],ue=oe[1],he=oe[2],pe=Q.indexOf(he);return Q.indexOf(le)==-1&&(pe>-1?Q.splice(pe+(ue=="after"?1:0),0,le):Q.splice(ue=="append"?1/0:0,0,le)),Q},K.slice())}var G=function(){return typeof process<"u"&&process.env&&!1},q=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Q=k??G();return Q?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}};i.getLogger=q;var Z=function(){for(var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Q,ae=0;ae<k.length;ae++){var oe=k[ae];if(oe!==void 0){Q=oe;break}}return Q};i.getFirstDefined=Z;var j=q();i.logger=j},89479:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.removePathsInTree=i.removeIsLockedInTree=i.isEmptyTree=i.hasChildren=i.getTreeBadFields=i.getTotalRulesCountInTree=i.getTotalReordableNodesCountInTree=i.getSwitchValues=i.getLightTree=i.getItemByPath=i.getFlatTree=i.fixPathsInTree=i.fixEmptyGroupsInTree=i.expandTreeSubpath=i.expandTreePath=void 0;var O=n(e(68148)),S=n(e(47552)),o=n(e(7134)),N=function(H){for(var z=arguments.length,$=new Array(z>1?z-1:0),_=1;_<z;_++)$[_-1]=arguments[_];return H.interpose("children1").withMutations(function(Y){return Y.skip(1),Y.push.apply(Y,$),Y})};i.expandTreePath=N;var R=function(H){for(var z=arguments.length,$=new Array(z>1?z-1:0),_=1;_<z;_++)$[_-1]=arguments[_];return H.interpose("children1").withMutations(function(Y){return Y.push.apply(Y,$),Y})};i.expandTreeSubpath=R;var L=function(H,z){var $=new o.default.OrderedMap((0,S.default)({},H.get("id"),H)),_=H;return z.forEach(function(Y){_=$.get(Y),$=_.get("children1")}),_};i.getItemByPath=L;var A=function(H){var z=H;function $(_,Y){var w=Y.push(_.get("id"));_.get("path")&&(z=z.removeIn(N(w,"path")));var T=_.get("children1");T&&T.map(function(v,l){$(v,w)})}return $(H,new o.default.List),z};i.removePathsInTree=A;var I=function(H){var z=H;function $(_,Y){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,T=Y.push(_.get("id")),v=_.getIn(["properties","isLocked"]);w&&v&&(z=z.deleteIn(N(T,"properties","isLocked")));var l=_.get("children1");l&&l.map(function(p,s){$(p,T,v||w)})}return $(H,new o.default.List),z};i.removeIsLockedInTree=I;var y=function(H){var z=H;function $(_,Y,w,T){if(_){var v=_.get("path"),l=_.get("id"),p=l||T,s=Y.push(p);(!v||!v.equals(s))&&(z=z.setIn(N(s,"path"),s)),l||(z=z.setIn(N(s,"id"),p));var u=_.get("children1");u&&(u.constructor.name=="Map"&&(z=z.setIn(N(s,"children1"),new o.default.OrderedMap(u))),u.map(function(g,m){$(g,s,w+1,m)}))}}return $(H,new o.default.List,0),z};i.fixPathsInTree=y;var C=function(H){var z=H;function $(_,Y,w,T){if(!_)return!1;var v=_.get("id")||T,l=Y.push(v),p=_.get("children1");if(p){var s=p.map(function(u,g){return $(u,l,w+1,g)}).reduce(function(u,g){return u&&g},!0);if((p.size==0||s)&&w>0)return z=z.deleteIn(N(l)),!0}return!1}return $(H,new o.default.List,0),z};i.fixEmptyGroupsInTree=C;var M=function(H){var z=[],$={},_=0;function Y(p,s,u,g,m,E,f,a,r){var d=p.get("type"),c=p.get("collapsed"),P=p.get("id"),G=p.get("children1"),q=p.getIn(["properties","isLocked"]),Z=G?G.map(function(he,pe){return pe}):null,j=d=="rule_group",K=!m&&(!G||j),k=z.length,Q=_;if(z.push(P),u||(_+=1),f.height=(f.height||0)+1,$[P]={type:d,parent:s.length?s[s.length-1]:null,parentType:a,caseId:d=="case_group"?P:r,isDefaultCase:d=="case_group"&&!G,path:s.concat(P),lev:E,leaf:!G,index:k,id:P,children:Z,leafsCount:0,_top:k,_height:oe-k,top:u?null:Q,height:ue,bottom:(u?null:Q)+ue,collapsed:c,node:p,isLocked:q||g},G){var ae={};G.map(function(he,pe){Y(he,s.concat(P),u||c,g||q,m||j,E+1,ae,d,d=="case_group"?P:r)}),c||(f.height=(f.height||0)+(ae.height||0))}r&&K&&$[r].leafsCount++;var oe=z.length,le=_,ue=f.height;Object.assign($[P],{_height:oe-k,height:ue,bottom:(u?null:Q)+ue})}Y(H,[],!1,!1,!1,0,{},null,null);for(var w=0;w<z.length;w++){var T=w>0?z[w-1]:null,v=w<z.length-1?z[w+1]:null,l=$[z[w]];l.prev=T,l.next=v}return{flat:z,items:$}};i.getFlatTree=M;var b=function(H){if(!H)return-1;var z=0;function $(_,Y,w){var T,v,l;typeof _.get=="function"?(T=_.get("id"),v=_.get("children1"),l=_.get("type")):(T=_.id,v=_.children1,l=_.type);var p=l=="rule_group";z++,v&&!p&&v.map(function(s,u){$(s,Y.concat(T),w+1)})}return $(H,[],0),z-1};i.getTotalReordableNodesCountInTree=b;var D=function(H){if(!H)return-1;var z=0;function $(_,Y,w){var T,v,l;typeof _.get=="function"?(T=_.get("id"),v=_.get("children1"),l=_.get("type")):(T=_.id,v=_.children1,l=_.type),l=="rule"||l=="rule_group"?z++:v&&v.map(function(p,s){$(p,Y.concat(T),w+1)})}return $(H,[],0),z};i.getTotalRulesCountInTree=D;var x=function(H){var z=[];function $(_,Y,w){var T=_.get("id"),v=_.get("children1"),l=_.getIn(["properties","valueError"]),p=_.getIn(["properties","field"]);l&&l.size>0&&l.filter(function(s){return s!=null}).size>0&&z.push(p),v&&v.map(function(s,u){$(s,Y.concat(T),w+1)})}return H&&$(H,[],0),Array.from(new Set(z))};i.getTreeBadFields=x;var F=function(H){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,$=H;function _(Y,w){Y.path&&delete Y.path,!z&&w&&delete Y.id;var T=Y.properties;T&&T.operatorOptions==null&&delete T.operatorOptions;var v=Y.children1;if(v){for(var l in v)_(v[l],l);z&&(Y.children1=Object.values(v))}}return _(H,null),$};i.getLightTree=F;var J=function(H){var z=[],$=H.get("children1");return $&&$.map(function(_){var Y=_.getIn(["properties","value"]),w;Y&&Y.size==1?(w=Y.get(0),Array.isArray(w)&&w.length==0&&(w=null)):w=null,z=[].concat((0,O.default)(z),[w])}),z};i.getSwitchValues=J;var U=function(H){return!H.get("children1")||H.get("children1").size==0};i.isEmptyTree=U;var W=function(H,z){return H.getIn(N(z,"children1")).size>0};i.hasChildren=W},14850:(re,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=0,n=function(){var S=(new Date().getTime().toString(16)+"FF").substr(0,11),o="ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,function(N){var R=N==="s"?Math.floor(Math.random()*16):e++&15,L=N==="x"?R:R&3|8;return L.toString(16)});return o+S};i.default=n},46286:(re,i,e)=>{"use strict";var n=e(87481);Object.defineProperty(i,"__esModule",{value:!0}),i.validateValue=i.validateTree=i.validateAndFixTree=i.createValidationMemo=void 0;var O=n(e(68148)),S=n(e(98595)),o=n(e(7818)),N=e(58560),R=e(1694),L=e(12461),A=e(26749),I=e(89479),y=n(e(96406)),C=e(7134),M=function(w){return(0,o.default)(w)=="object"&&w!==null&&Array.isArray(w)?"array":(0,o.default)(w)},b=function(w,T){return M(w)==T||T=="number"&&!isNaN(w)},D=function(){var w,T,v;return function(l,p,s){return p?(l.__configId===v&&((0,L.immutableEqual)(p,w)||(0,L.immutableEqual)(p,T))||(v=l.__configId,w=p,T=x(p,null,l,s||l)),T):null}};i.createValidationMemo=D;var x=function(w,T,v,l){var p=F(w,T,v,l);return p=(0,I.fixPathsInTree)(p),p};i.validateAndFixTree=x;var F=function(w,T,v,l,p,s){p===void 0&&(p=v.settings.removeEmptyGroupsOnLoad),s===void 0&&(s=v.settings.removeIncompleteRulesOnLoad);var u={config:v,oldConfig:l,removeEmptyGroups:p,removeIncompleteRules:s};return J(w,[],null,{},u)};i.validateTree=F;function J(Y,w,T,v,l){var p=Y.get("type"),s=Y.get("children1");return(p==="group"||p==="rule_group"||p=="case_group"||p=="switch_group")&&s&&s.size?U(Y,w,T,v,l):p==="rule"?W(Y,w,T,v,l):Y}function U(Y,w,T,v,l){var p=l.removeEmptyGroups,s=Y.get("id"),u=Y.get("children1"),g=u;!s&&T&&(s=T,Y=Y.set("id",s),v.sanitized=!0);var m={};u=u.map(function(f,a){return J(f,w.concat(s),a,m,l)}),p&&(u=u.filter(function(f){return f!=null}));var E=m.sanitized||g.size!=u.size;return!u.size&&p&&w.length&&(E=!0,Y=void 0),E&&(v.sanitized=!0),E&&Y&&(Y=Y.set("children1",u)),Y}function W(Y,w,T,v,l){var p=l.removeIncompleteRules,s=l.config,u=l.oldConfig,g=s.settings.showErrorMessage,m=Y.get("id"),E=Y.get("properties"),f=E.get("field")||null,a=E.get("operator")||null,r=E.get("operatorOptions"),d=E.get("valueSrc"),c=E.get("value"),P=E.get("valueError"),G={field:f,operator:a,operatorOptions:r?r.toJS():{},valueSrc:d?d.toJS():null,value:c?c.toJS():null,valueError:P?P.toJS():null},q=f&&a&&c&&!c.includes(void 0);!m&&T&&(m=T,Y=Y.set("id",m),v.sanitized=!0);var Z=f?(0,N.getFieldConfig)(s,f):null;f&&!Z&&(L.logger.warn("No config for field ".concat(f)),f=null),f==null&&(E=["operator","operatorOptions","valueSrc","value"].reduce(function(Ce,Ae){return Ce.delete(Ae)},E),a=null),(a=="range_between"||a=="range_not_between")&&(a=a=="range_between"?"between":"not_between",console.info("Fixed operator ".concat(E.get("operator")," to ").concat(a)),E=E.set("operator",a));var j=a?(0,N.getOperatorConfig)(s,a,f):null;a&&!j&&(console.warn("No config for operator ".concat(a)),a=null);var K=f?(0,R.getOperatorsForField)(s,f):[];K?a&&K.indexOf(a)==-1&&(a=="is_empty"||a=="is_not_empty"?(a=a=="is_empty"?"is_null":"is_not_null",console.info("Fixed operator ".concat(E.get("operator")," to ").concat(a," for ").concat(f)),E=E.set("operator",a)):(console.warn("Operator ".concat(a," is not supported for field ").concat(f)),a=null)):(console.warn("Type of field ".concat(f," is not supported")),a=null),a==null&&(E=E.delete("operatorOptions"),E=E.delete("valueSrc"),E=E.delete("value")),r=E.get("operatorOptions");var k=a?(0,L.defaultValue)(j.cardinality,1):null;!a||r&&!j.options?(r=null,E=E.delete("operatorOptions")):a&&!r&&j.options&&(r=(0,A.defaultOperatorOptions)(s,a,f),E=E.set("operatorOptions",r)),d=E.get("valueSrc"),c=E.get("value");var Q=!g,ae=!0,oe=(0,R.getNewValueForFieldOp)(s,u,E,f,a,null,Q,ae),le=oe.newValue,ue=oe.newValueSrc,he=oe.newValueError;c=le,d=ue,P=he,E=E.set("value",c),E=E.set("valueSrc",d),g&&(E=E.set("valueError",P));var pe={field:f,operator:a,operatorOptions:r?r.toJS():{},valueSrc:d?d.toJS():null,value:c?c.toJS():null,valueError:P?P.toJS():null},ye=!(0,L.deepEqual)(G,pe),Re=f&&a&&c&&!c.includes(void 0);return ye&&(v.sanitized=!0),!Re&&p?Y=void 0:ye&&(Y=Y.set("properties",E)),Y}var V=function(w,T,v,l,p,s,u,g){var m=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,E=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,f=arguments.length>10&&arguments[10]!==void 0?arguments[10]:!0,a=null,r=p;if(p!=null){if(u=="field"){var d=$(T,v,p,u,s,g,w,l,E,m),c=(0,S.default)(d,2);a=c[0],r=c[1]}else if(u=="func"){var P=_(T,v,p,u,s,g,w,l,E,m),G=(0,S.default)(P,2);a=G[0],r=G[1]}else if(u=="value"||!u){var q=z(T,v,p,u,s,g,w,l,E,m),Z=(0,S.default)(q,2);a=Z[0],r=Z[1]}if(!a){var j=(0,N.getFieldConfig)(w,v),K=(0,R.getWidgetForFieldOp)(w,v,l,u),k=l?(0,N.getOperatorConfig)(w,l,v):null,Q=(0,y.default)((0,N.getFieldWidgetConfig)(w,v,l,K,u),["factory"]),ae=u=="field"?(0,N.getFieldConfig)(w,p):null,oe=Q,le=Q.validateValue;if(typeof le=="function"){var ue=[r,oe,l,k];u=="field"&&ue.push(ae);var he=le.apply(void 0,ue);typeof he=="boolean"?he==!1&&(a="Invalid value"):a=he}}}return f&&a&&console.warn("[RAQB validate]","Field ".concat(v,": ").concat(a)),[a,r]};i.validateValue=V;var H=function(w,T,v,l,p){var s=C.List.isList(w)?w.toJS():w instanceof Array?(0,O.default)(w):void 0;if(s){var u=s.reduce(function(d,c){var P=(0,S.default)(d,2),G=P[0],q=P[1],Z=(0,L.getItemInListValues)(T,c);return Z==null?[G,[].concat((0,O.default)(q),[c])]:[[].concat((0,O.default)(G),[Z.value]),q]},[[],[]]),g=(0,S.default)(u,2),m=g[0],E=g[1],f=E.length>1,a=E.length?"".concat(f?"Values":"Value"," ").concat(E.join(", ")," ").concat(f?"are":"is"," not in list of values"):null;return p!==void 0?v=p:v=v||l,[a,v?m:w]}else{var r=(0,L.getItemInListValues)(T,w);return r==null?["Value ".concat(w," is not in list of values"),w]:(w=r.value,[null,w])}},z=function(w,T,v,l,p,s,u){var g=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,m=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,E=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1;if(T){var f=(0,N.getFieldConfig)(u,T),a=(0,R.getWidgetForFieldOp)(u,T,g,l),r=u.widgets[a],d=r.type,c=r.jsType,P=f.fieldSettings;if(p!=d)return["Value should have type ".concat(d,", but got value of type ").concat(p),v];if(c&&!b(v,c)&&!P.listValues)return["Value should have JS type ".concat(c,", but got value of type ").concat((0,o.default)(v)),v];if(P){var G=s||P.listValues;if(G&&!P.allowCustomValues)return H(v,G,E,m,u.settings.removeInvalidMultiSelectValuesOnLoad);if(P.min!=null&&v<P.min)return["Value ".concat(v," < min ").concat(P.min),E?P.min:v];if(P.max!=null&&v>P.max)return["Value ".concat(v," > max ").concat(P.max),E?P.max:v]}}return[null,v]},$=function(w,T,v,l,p,s,u){var g=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,m=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,E=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,f=u.settings.fieldSeparator,a=(0,o.default)(T)=="object"&&T?._isFuncArg,r=Array.isArray(w)?w.join(f):w,d=Array.isArray(v)?v.join(f):v,c=(0,N.getFieldConfig)(u,v);return c?d==r&&!a?["Can't compare field ".concat(w," with itself"),v]:p&&p!=c.type?["Field ".concat(v," is of type ").concat(c.type,", but expected ").concat(p),v]:[null,v]:["Unknown field ".concat(v),v]},_=function(w,T,v,l,p,s,u){var g=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,m=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,E=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,f=v;if(v){var a=v.get("func");if(a){var r=(0,N.getFuncConfig)(u,a);if(r){if(p&&r.returnType!=p)return["Function ".concat(a," should return value of type ").concat(r.returnType,", but got ").concat(p),v];for(var d in r.args){var c=r.args[d],P=f.get("args"),G=P?P.get(d):void 0,q=(0,N.getFieldConfig)(u,c),Z=G?G.get("value"):void 0,j=G?G.get("valueSrc"):void 0;if(Z!==void 0){var K=V(u,w,q,g,Z,c.type,j,s,E,m,!1),k=(0,S.default)(K,2),Q=k[0],ae=k[1];if(Q!==null)if(E)f=f.deleteIn(["args",d]),c.defaultValue!==void 0&&(f=f.setIn(["args",d,"value"],c.defaultValue),f=f.setIn(["args",d,"valueSrc"],"value"));else return["Invalid value of arg ".concat(d," for func ").concat(a,": ").concat(Q),v];else ae!==Z&&(f=f.setIn(["args",d,"value"],ae))}else if(m&&c.defaultValue===void 0&&!E)return["Value of arg ".concat(d," for func ").concat(a," is required"),v]}}else return["Unknown function ".concat(a),v]}}return[null,f]}},84811:(re,i,e)=>{"use strict";e.r(i),e.d(i,{Provider:()=>D,ReactReduxContext:()=>S,batch:()=>ke.unstable_batchedUpdates,connect:()=>Ce,connectAdvanced:()=>p,createDispatchHook:()=>We,createSelectorHook:()=>Ye,createStoreHook:()=>Te,shallowEqual:()=>u,useDispatch:()=>je,useSelector:()=>nt,useStore:()=>be});var n=e(39953),O=e(61240),S=n.createContext(null);const o=null;function N(ve){ve()}var R=N,L=function(Ee){return R=Ee},A=function(){return R};function I(){var ve=A(),Ee=null,Ie=null;return{clear:function(){Ee=null,Ie=null},notify:function(){ve(function(){for(var Ue=Ee;Ue;)Ue.callback(),Ue=Ue.next})},get:function(){for(var Ue=[],Ge=Ee;Ge;)Ue.push(Ge),Ge=Ge.next;return Ue},subscribe:function(Ue){var Ge=!0,Ve=Ie={callback:Ue,next:null,prev:Ie};return Ve.prev?Ve.prev.next=Ve:Ee=Ve,function(){!Ge||Ee===null||(Ge=!1,Ve.next?Ve.next.prev=Ve.prev:Ie=Ve.prev,Ve.prev?Ve.prev.next=Ve.next:Ee=Ve.next)}}}}var y={notify:function(){},get:function(){return[]}};function C(ve,Ee){var Ie,we=y;function Ue(ut){return ze(),we.subscribe(ut)}function Ge(){we.notify()}function Ve(){Qe.onStateChange&&Qe.onStateChange()}function _e(){return!!Ie}function ze(){Ie||(Ie=Ee?Ee.addNestedSub(Ve):ve.subscribe(Ve),we=I())}function ot(){Ie&&(Ie(),Ie=void 0,we.clear(),we=y)}var Qe={addNestedSub:Ue,notifyNestedSubs:Ge,handleChangeWrapper:Ve,isSubscribed:_e,trySubscribe:ze,tryUnsubscribe:ot,getListeners:function(){return we}};return Qe}var M=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?n.useLayoutEffect:n.useEffect;function b(ve){var Ee=ve.store,Ie=ve.context,we=ve.children,Ue=(0,n.useMemo)(function(){var _e=C(Ee);return{store:Ee,subscription:_e}},[Ee]),Ge=(0,n.useMemo)(function(){return Ee.getState()},[Ee]);M(function(){var _e=Ue.subscription;return _e.onStateChange=_e.notifyNestedSubs,_e.trySubscribe(),Ge!==Ee.getState()&&_e.notifyNestedSubs(),function(){_e.tryUnsubscribe(),_e.onStateChange=null}},[Ue,Ge]);var Ve=Ie||S;return n.createElement(Ve.Provider,{value:Ue},we)}const D=b;var x=e(855),F=e(55659),J=e(16976),U=e.n(J),W=e(34319),V=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],H=["reactReduxForwardedRef"],z=[],$=[null,null],_=function(Ee){try{return JSON.stringify(Ee)}catch{return String(Ee)}};function Y(ve,Ee){var Ie=ve[1];return[Ee.payload,Ie+1]}function w(ve,Ee,Ie){M(function(){return ve.apply(void 0,Ee)},Ie)}function T(ve,Ee,Ie,we,Ue,Ge,Ve){ve.current=we,Ee.current=Ue,Ie.current=!1,Ge.current&&(Ge.current=null,Ve())}function v(ve,Ee,Ie,we,Ue,Ge,Ve,_e,ze,ot){if(ve){var Qe=!1,ut=null,pt=function(){if(!Qe){var Et=Ee.getState(),Pt,Ct;try{Pt=we(Et,Ue.current)}catch(lt){Ct=lt,ut=lt}Ct||(ut=null),Pt===Ge.current?Ve.current||ze():(Ge.current=Pt,_e.current=Pt,Ve.current=!0,ot({type:"STORE_UPDATED",payload:{error:Ct}}))}};Ie.onStateChange=pt,Ie.trySubscribe(),pt();var et=function(){if(Qe=!0,Ie.tryUnsubscribe(),Ie.onStateChange=null,ut)throw ut};return et}}var l=function(){return[null,0]};function p(ve,Ee){Ee===void 0&&(Ee={});var Ie=Ee,we=Ie.getDisplayName,Ue=we===void 0?function(Bt){return"ConnectAdvanced("+Bt+")"}:we,Ge=Ie.methodName,Ve=Ge===void 0?"connectAdvanced":Ge,_e=Ie.renderCountProp,ze=_e===void 0?void 0:_e,ot=Ie.shouldHandleStateChanges,Qe=ot===void 0?!0:ot,ut=Ie.storeKey,pt=ut===void 0?"store":ut,et=Ie.withRef,vt=et===void 0?!1:et,Et=Ie.forwardRef,Pt=Et===void 0?!1:Et,Ct=Ie.context,lt=Ct===void 0?S:Ct,Rt=(0,F.Z)(Ie,V);if(!1)var Ft;var bt=lt;return function(st){var Ot=st.displayName||st.name||"Component",Vt=Ue(Ot),It=(0,x.Z)({},Rt,{getDisplayName:Ue,methodName:Ve,renderCountProp:ze,shouldHandleStateChanges:Qe,storeKey:pt,displayName:Vt,wrappedComponentName:Ot,WrappedComponent:st}),Ht=Rt.pure;function Ut(yt){return ve(yt.dispatch,It)}var $e=Ht?n.useMemo:function(yt){return yt()};function dt(yt){var xt=(0,n.useMemo)(function(){var lr=yt.reactReduxForwardedRef,rr=(0,F.Z)(yt,H);return[yt.context,lr,rr]},[yt]),jt=xt[0],$t=xt[1],Je=xt[2],kt=(0,n.useMemo)(function(){return jt&&jt.Consumer&&(0,W.isContextConsumer)(n.createElement(jt.Consumer,null))?jt:bt},[jt,bt]),ce=(0,n.useContext)(kt),Se=!!yt.store&&!!yt.store.getState&&!!yt.store.dispatch,Be=!!ce&&!!ce.store,it=Se?yt.store:ce.store,Lt=(0,n.useMemo)(function(){return Ut(it)},[it]),Yt=(0,n.useMemo)(function(){if(!Qe)return $;var lr=C(it,Se?null:ce.subscription),rr=lr.notifyNestedSubs.bind(lr);return[lr,rr]},[it,Se,ce]),qt=Yt[0],Sr=Yt[1],sr=(0,n.useMemo)(function(){return Se?ce:(0,x.Z)({},ce,{subscription:qt})},[Se,ce,qt]),Rr=(0,n.useReducer)(Y,z,l),br=Rr[0],fr=br[0],cr=Rr[1];if(fr&&fr.error)throw fr.error;var dr=(0,n.useRef)(),pr=(0,n.useRef)(Je),ur=(0,n.useRef)(),Cr=(0,n.useRef)(!1),vr=$e(function(){return ur.current&&Je===pr.current?ur.current:Lt(it.getState(),Je)},[it,fr,Je]);w(T,[pr,dr,Cr,Je,vr,ur,Sr]),w(v,[Qe,it,qt,Lt,pr,dr,Cr,ur,Sr,cr],[it,qt,Lt]);var gr=(0,n.useMemo)(function(){return n.createElement(st,(0,x.Z)({},vr,{ref:$t}))},[$t,st,vr]),Mr=(0,n.useMemo)(function(){return Qe?n.createElement(kt.Provider,{value:sr},gr):gr},[kt,gr,sr]);return Mr}var gt=Ht?n.memo(dt):dt;if(gt.WrappedComponent=st,gt.displayName=dt.displayName=Vt,Pt){var Ze=n.forwardRef(function(xt,jt){return n.createElement(gt,(0,x.Z)({},xt,{reactReduxForwardedRef:jt}))});return Ze.displayName=Vt,Ze.WrappedComponent=st,U()(Ze,st)}return U()(gt,st)}}function s(ve,Ee){return ve===Ee?ve!==0||Ee!==0||1/ve===1/Ee:ve!==ve&&Ee!==Ee}function u(ve,Ee){if(s(ve,Ee))return!0;if(typeof ve!="object"||ve===null||typeof Ee!="object"||Ee===null)return!1;var Ie=Object.keys(ve),we=Object.keys(Ee);if(Ie.length!==we.length)return!1;for(var Ue=0;Ue<Ie.length;Ue++)if(!Object.prototype.hasOwnProperty.call(Ee,Ie[Ue])||!s(ve[Ie[Ue]],Ee[Ie[Ue]]))return!1;return!0}function g(ve,Ee){var Ie={},we=function(Ve){var _e=ve[Ve];typeof _e=="function"&&(Ie[Ve]=function(){return Ee(_e.apply(void 0,arguments))})};for(var Ue in ve)we(Ue);return Ie}function m(ve){return function(Ie,we){var Ue=ve(Ie,we);function Ge(){return Ue}return Ge.dependsOnOwnProps=!1,Ge}}function E(ve){return ve.dependsOnOwnProps!==null&&ve.dependsOnOwnProps!==void 0?!!ve.dependsOnOwnProps:ve.length!==1}function f(ve,Ee){return function(we,Ue){var Ge=Ue.displayName,Ve=function(ze,ot){return Ve.dependsOnOwnProps?Ve.mapToProps(ze,ot):Ve.mapToProps(ze)};return Ve.dependsOnOwnProps=!0,Ve.mapToProps=function(ze,ot){Ve.mapToProps=ve,Ve.dependsOnOwnProps=E(ve);var Qe=Ve(ze,ot);return typeof Qe=="function"&&(Ve.mapToProps=Qe,Ve.dependsOnOwnProps=E(Qe),Qe=Ve(ze,ot)),Qe},Ve}}function a(ve){return typeof ve=="function"?f(ve,"mapDispatchToProps"):void 0}function r(ve){return ve?void 0:m(function(Ee){return{dispatch:Ee}})}function d(ve){return ve&&typeof ve=="object"?m(function(Ee){return g(ve,Ee)}):void 0}const c=[a,r,d];function P(ve){return typeof ve=="function"?f(ve,"mapStateToProps"):void 0}function G(ve){return ve?void 0:m(function(){return{}})}const q=[P,G];function Z(ve,Ee,Ie){return(0,x.Z)({},Ie,ve,Ee)}function j(ve){return function(Ie,we){var Ue=we.displayName,Ge=we.pure,Ve=we.areMergedPropsEqual,_e=!1,ze;return function(Qe,ut,pt){var et=ve(Qe,ut,pt);return _e?(!Ge||!Ve(et,ze))&&(ze=et):(_e=!0,ze=et),ze}}}function K(ve){return typeof ve=="function"?j(ve):void 0}function k(ve){return ve?void 0:function(){return Z}}const Q=[K,k];var ae=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function oe(ve,Ee,Ie,we){return function(Ge,Ve){return Ie(ve(Ge,Ve),Ee(we,Ve),Ve)}}function le(ve,Ee,Ie,we,Ue){var Ge=Ue.areStatesEqual,Ve=Ue.areOwnPropsEqual,_e=Ue.areStatePropsEqual,ze=!1,ot,Qe,ut,pt,et;function vt(Rt,Ft){return ot=Rt,Qe=Ft,ut=ve(ot,Qe),pt=Ee(we,Qe),et=Ie(ut,pt,Qe),ze=!0,et}function Et(){return ut=ve(ot,Qe),Ee.dependsOnOwnProps&&(pt=Ee(we,Qe)),et=Ie(ut,pt,Qe),et}function Pt(){return ve.dependsOnOwnProps&&(ut=ve(ot,Qe)),Ee.dependsOnOwnProps&&(pt=Ee(we,Qe)),et=Ie(ut,pt,Qe),et}function Ct(){var Rt=ve(ot,Qe),Ft=!_e(Rt,ut);return ut=Rt,Ft&&(et=Ie(ut,pt,Qe)),et}function lt(Rt,Ft){var bt=!Ve(Ft,Qe),Bt=!Ge(Rt,ot);return ot=Rt,Qe=Ft,bt&&Bt?Et():bt?Pt():Bt?Ct():et}return function(Ft,bt){return ze?lt(Ft,bt):vt(Ft,bt)}}function ue(ve,Ee){var Ie=Ee.initMapStateToProps,we=Ee.initMapDispatchToProps,Ue=Ee.initMergeProps,Ge=(0,F.Z)(Ee,ae),Ve=Ie(ve,Ge),_e=we(ve,Ge),ze=Ue(ve,Ge),ot=Ge.pure?le:oe;return ot(Ve,_e,ze,ve,Ge)}var he=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function pe(ve,Ee,Ie){for(var we=Ee.length-1;we>=0;we--){var Ue=Ee[we](ve);if(Ue)return Ue}return function(Ge,Ve){throw new Error("Invalid value of type "+typeof ve+" for "+Ie+" argument when connecting component "+Ve.wrappedComponentName+".")}}function ye(ve,Ee){return ve===Ee}function Re(ve){var Ee=ve===void 0?{}:ve,Ie=Ee.connectHOC,we=Ie===void 0?p:Ie,Ue=Ee.mapStateToPropsFactories,Ge=Ue===void 0?q:Ue,Ve=Ee.mapDispatchToPropsFactories,_e=Ve===void 0?c:Ve,ze=Ee.mergePropsFactories,ot=ze===void 0?Q:ze,Qe=Ee.selectorFactory,ut=Qe===void 0?ue:Qe;return function(et,vt,Et,Pt){Pt===void 0&&(Pt={});var Ct=Pt,lt=Ct.pure,Rt=lt===void 0?!0:lt,Ft=Ct.areStatesEqual,bt=Ft===void 0?ye:Ft,Bt=Ct.areOwnPropsEqual,st=Bt===void 0?u:Bt,Ot=Ct.areStatePropsEqual,Vt=Ot===void 0?u:Ot,It=Ct.areMergedPropsEqual,Ht=It===void 0?u:It,Ut=(0,F.Z)(Ct,he),$e=pe(et,Ge,"mapStateToProps"),dt=pe(vt,_e,"mapDispatchToProps"),gt=pe(Et,ot,"mergeProps");return we(ut,(0,x.Z)({methodName:"connect",getDisplayName:function(yt){return"Connect("+yt+")"},shouldHandleStateChanges:!!et,initMapStateToProps:$e,initMapDispatchToProps:dt,initMergeProps:gt,pure:Rt,areStatesEqual:bt,areOwnPropsEqual:st,areStatePropsEqual:Vt,areMergedPropsEqual:Ht},Ut))}}const Ce=Re();function Ae(){var ve=(0,n.useContext)(S);return ve}function Te(ve){ve===void 0&&(ve=S);var Ee=ve===S?Ae:function(){return(0,n.useContext)(ve)};return function(){var we=Ee(),Ue=we.store;return Ue}}var be=Te();function We(ve){ve===void 0&&(ve=S);var Ee=ve===S?be:Te(ve);return function(){var we=Ee();return we.dispatch}}var je=We(),He=function(Ee,Ie){return Ee===Ie};function De(ve,Ee,Ie,we){var Ue=(0,n.useReducer)(function(vt){return vt+1},0),Ge=Ue[1],Ve=(0,n.useMemo)(function(){return C(Ie,we)},[Ie,we]),_e=(0,n.useRef)(),ze=(0,n.useRef)(),ot=(0,n.useRef)(),Qe=(0,n.useRef)(),ut=Ie.getState(),pt;try{if(ve!==ze.current||ut!==ot.current||_e.current){var et=ve(ut);Qe.current===void 0||!Ee(et,Qe.current)?pt=et:pt=Qe.current}else pt=Qe.current}catch(vt){throw _e.current&&(vt.message+=`
The error may be correlated with this previous error:
`+_e.current.stack+`

`),vt}return M(function(){ze.current=ve,ot.current=ut,Qe.current=pt,_e.current=void 0}),M(function(){function vt(){try{var Et=Ie.getState();if(Et===ot.current)return;var Pt=ze.current(Et);if(Ee(Pt,Qe.current))return;Qe.current=Pt,ot.current=Et}catch(Ct){_e.current=Ct}Ge()}return Ve.onStateChange=vt,Ve.trySubscribe(),vt(),function(){return Ve.tryUnsubscribe()}},[Ie,Ve]),pt}function Ye(ve){ve===void 0&&(ve=S);var Ee=ve===S?Ae:function(){return(0,n.useContext)(ve)};return function(we,Ue){Ue===void 0&&(Ue=He);var Ge=Ee(),Ve=Ge.store,_e=Ge.subscription,ze=De(we,Ue,Ve,_e);return(0,n.useDebugValue)(ze),ze}}var nt=Ye(),ke=e(49065);L(ke.unstable_batchedUpdates)},99292:(re,i,e)=>{"use strict";var n;n={value:!0};var O=e(58145),S=e(39953),o=O.__importDefault(e(95681));function N(R,L){L===void 0&&(L=[]);var A=o.default(R,L,{loading:!0}),I=A[0],y=A[1];return S.useEffect(function(){y()},[y]),I}i.Z=N},80189:(re,i,e)=>{var n=e(20770).Buffer,O=function(){"use strict";function S(b,D){return D!=null&&b instanceof D}var o;try{o=Map}catch{o=function(){}}var N;try{N=Set}catch{N=function(){}}var R;try{R=Promise}catch{R=function(){}}function L(b,D,x,F,J){typeof D=="object"&&(x=D.depth,F=D.prototype,J=D.includeNonEnumerable,D=D.circular);var U=[],W=[],V=typeof n<"u";typeof D>"u"&&(D=!0),typeof x>"u"&&(x=1/0);function H(z,$){if(z===null)return null;if($===0)return z;var _,Y;if(typeof z!="object")return z;if(S(z,o))_=new o;else if(S(z,N))_=new N;else if(S(z,R))_=new R(function(m,E){z.then(function(f){m(H(f,$-1))},function(f){E(H(f,$-1))})});else if(L.__isArray(z))_=[];else if(L.__isRegExp(z))_=new RegExp(z.source,M(z)),z.lastIndex&&(_.lastIndex=z.lastIndex);else if(L.__isDate(z))_=new Date(z.getTime());else{if(V&&n.isBuffer(z))return n.allocUnsafe?_=n.allocUnsafe(z.length):_=new n(z.length),z.copy(_),_;S(z,Error)?_=Object.create(z):typeof F>"u"?(Y=Object.getPrototypeOf(z),_=Object.create(Y)):(_=Object.create(F),Y=F)}if(D){var w=U.indexOf(z);if(w!=-1)return W[w];U.push(z),W.push(_)}S(z,o)&&z.forEach(function(m,E){var f=H(E,$-1),a=H(m,$-1);_.set(f,a)}),S(z,N)&&z.forEach(function(m){var E=H(m,$-1);_.add(E)});for(var T in z){var v;Y&&(v=Object.getOwnPropertyDescriptor(Y,T)),!(v&&v.set==null)&&(_[T]=H(z[T],$-1))}if(Object.getOwnPropertySymbols)for(var l=Object.getOwnPropertySymbols(z),T=0;T<l.length;T++){var p=l[T],s=Object.getOwnPropertyDescriptor(z,p);s&&!s.enumerable&&!J||(_[p]=H(z[p],$-1),s.enumerable||Object.defineProperty(_,p,{enumerable:!1}))}if(J)for(var u=Object.getOwnPropertyNames(z),T=0;T<u.length;T++){var g=u[T],s=Object.getOwnPropertyDescriptor(z,g);s&&s.enumerable||(_[g]=H(z[g],$-1),Object.defineProperty(_,g,{enumerable:!1}))}return _}return H(b,x)}L.clonePrototype=function(D){if(D===null)return null;var x=function(){};return x.prototype=D,new x};function A(b){return Object.prototype.toString.call(b)}L.__objToStr=A;function I(b){return typeof b=="object"&&A(b)==="[object Date]"}L.__isDate=I;function y(b){return typeof b=="object"&&A(b)==="[object Array]"}L.__isArray=y;function C(b){return typeof b=="object"&&A(b)==="[object RegExp]"}L.__isRegExp=C;function M(b){var D="";return b.global&&(D+="g"),b.ignoreCase&&(D+="i"),b.multiline&&(D+="m"),D}return L.__getRegExpFlags=M,L}();re.exports&&(re.exports=O)},96977:(re,i,e)=>{"use strict";var n=e(16945),O={"text/plain":"Text","text/html":"Url",default:"Text"},S="Copy to clipboard: #{key}, Enter";function o(R){var L=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return R.replace(/#{\s*key\s*}/g,L)}function N(R,L){var A,I,y,C,M,b,D=!1;L||(L={}),A=L.debug||!1;try{y=n(),C=document.createRange(),M=document.getSelection(),b=document.createElement("span"),b.textContent=R,b.style.all="unset",b.style.position="fixed",b.style.top=0,b.style.clip="rect(0, 0, 0, 0)",b.style.whiteSpace="pre",b.style.webkitUserSelect="text",b.style.MozUserSelect="text",b.style.msUserSelect="text",b.style.userSelect="text",b.addEventListener("copy",function(F){if(F.stopPropagation(),L.format)if(F.preventDefault(),typeof F.clipboardData>"u"){A&&console.warn("unable to use e.clipboardData"),A&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var J=O[L.format]||O.default;window.clipboardData.setData(J,R)}else F.clipboardData.clearData(),F.clipboardData.setData(L.format,R);L.onCopy&&(F.preventDefault(),L.onCopy(F.clipboardData))}),document.body.appendChild(b),C.selectNodeContents(b),M.addRange(C);var x=document.execCommand("copy");if(!x)throw new Error("copy command was unsuccessful");D=!0}catch(F){A&&console.error("unable to copy using execCommand: ",F),A&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(L.format||"text",R),L.onCopy&&L.onCopy(window.clipboardData),D=!0}catch(J){A&&console.error("unable to copy using clipboardData: ",J),A&&console.error("falling back to prompt"),I=o("message"in L?L.message:S),window.prompt(I,R)}}finally{M&&(typeof M.removeRange=="function"?M.removeRange(C):M.removeAllRanges()),b&&document.body.removeChild(b),y()}return D}re.exports=N},7134:function(re){(function(i,e){re.exports=e()})(this,function(){"use strict";var i=Array.prototype.slice;function e(t,h){h&&(t.prototype=Object.create(h.prototype)),t.prototype.constructor=t}function n(t){return N(t)?t:K(t)}e(O,n);function O(t){return R(t)?t:k(t)}e(S,n);function S(t){return L(t)?t:Q(t)}e(o,n);function o(t){return N(t)&&!A(t)?t:ae(t)}function N(t){return!!(t&&t[y])}function R(t){return!!(t&&t[C])}function L(t){return!!(t&&t[M])}function A(t){return R(t)||L(t)}function I(t){return!!(t&&t[b])}n.isIterable=N,n.isKeyed=R,n.isIndexed=L,n.isAssociative=A,n.isOrdered=I,n.Keyed=O,n.Indexed=S,n.Set=o;var y="@@__IMMUTABLE_ITERABLE__@@",C="@@__IMMUTABLE_KEYED__@@",M="@@__IMMUTABLE_INDEXED__@@",b="@@__IMMUTABLE_ORDERED__@@",D="delete",x=5,F=1<<x,J=F-1,U={},W={value:!1},V={value:!1};function H(t){return t.value=!1,t}function z(t){t&&(t.value=!0)}function $(){}function _(t,h){h=h||0;for(var B=Math.max(0,t.length-h),X=new Array(B),ee=0;ee<B;ee++)X[ee]=t[ee+h];return X}function Y(t){return t.size===void 0&&(t.size=t.__iterate(T)),t.size}function w(t,h){if(typeof h!="number"){var B=h>>>0;if(""+B!==h||B===4294967295)return NaN;h=B}return h<0?Y(t)+h:h}function T(){return!0}function v(t,h,B){return(t===0||B!==void 0&&t<=-B)&&(h===void 0||B!==void 0&&h>=B)}function l(t,h){return s(t,h,0)}function p(t,h){return s(t,h,h)}function s(t,h,B){return t===void 0?B:t<0?Math.max(0,h+t):h===void 0?t:Math.min(h,t)}var u=0,g=1,m=2,E=typeof Symbol=="function"&&Symbol.iterator,f="@@iterator",a=E||f;function r(t){this.next=t}r.prototype.toString=function(){return"[Iterator]"},r.KEYS=u,r.VALUES=g,r.ENTRIES=m,r.prototype.inspect=r.prototype.toSource=function(){return this.toString()},r.prototype[a]=function(){return this};function d(t,h,B,X){var ee=t===0?h:t===1?B:[h,B];return X?X.value=ee:X={value:ee,done:!1},X}function c(){return{value:void 0,done:!0}}function P(t){return!!Z(t)}function G(t){return t&&typeof t.next=="function"}function q(t){var h=Z(t);return h&&h.call(t)}function Z(t){var h=t&&(E&&t[E]||t[f]);if(typeof h=="function")return h}function j(t){return t&&typeof t.length=="number"}e(K,n);function K(t){return t==null?Ce():N(t)?t.toSeq():be(t)}K.of=function(){return K(arguments)},K.prototype.toSeq=function(){return this},K.prototype.toString=function(){return this.__toString("Seq {","}")},K.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},K.prototype.__iterate=function(t,h){return je(this,t,h,!0)},K.prototype.__iterator=function(t,h){return He(this,t,h,!0)},e(k,K);function k(t){return t==null?Ce().toKeyedSeq():N(t)?R(t)?t.toSeq():t.fromEntrySeq():Ae(t)}k.prototype.toKeyedSeq=function(){return this},e(Q,K);function Q(t){return t==null?Ce():N(t)?R(t)?t.entrySeq():t.toIndexedSeq():Te(t)}Q.of=function(){return Q(arguments)},Q.prototype.toIndexedSeq=function(){return this},Q.prototype.toString=function(){return this.__toString("Seq [","]")},Q.prototype.__iterate=function(t,h){return je(this,t,h,!1)},Q.prototype.__iterator=function(t,h){return He(this,t,h,!1)},e(ae,K);function ae(t){return(t==null?Ce():N(t)?R(t)?t.entrySeq():t:Te(t)).toSetSeq()}ae.of=function(){return ae(arguments)},ae.prototype.toSetSeq=function(){return this},K.isSeq=ye,K.Keyed=k,K.Set=ae,K.Indexed=Q;var oe="@@__IMMUTABLE_SEQ__@@";K.prototype[oe]=!0,e(le,Q);function le(t){this._array=t,this.size=t.length}le.prototype.get=function(t,h){return this.has(t)?this._array[w(this,t)]:h},le.prototype.__iterate=function(t,h){for(var B=this._array,X=B.length-1,ee=0;ee<=X;ee++)if(t(B[h?X-ee:ee],ee,this)===!1)return ee+1;return ee},le.prototype.__iterator=function(t,h){var B=this._array,X=B.length-1,ee=0;return new r(function(){return ee>X?c():d(t,ee,B[h?X-ee++:ee++])})},e(ue,k);function ue(t){var h=Object.keys(t);this._object=t,this._keys=h,this.size=h.length}ue.prototype.get=function(t,h){return h!==void 0&&!this.has(t)?h:this._object[t]},ue.prototype.has=function(t){return this._object.hasOwnProperty(t)},ue.prototype.__iterate=function(t,h){for(var B=this._object,X=this._keys,ee=X.length-1,se=0;se<=ee;se++){var fe=X[h?ee-se:se];if(t(B[fe],fe,this)===!1)return se+1}return se},ue.prototype.__iterator=function(t,h){var B=this._object,X=this._keys,ee=X.length-1,se=0;return new r(function(){var fe=X[h?ee-se:se];return se++>ee?c():d(t,fe,B[fe])})},ue.prototype[b]=!0,e(he,Q);function he(t){this._iterable=t,this.size=t.length||t.size}he.prototype.__iterateUncached=function(t,h){if(h)return this.cacheResult().__iterate(t,h);var B=this._iterable,X=q(B),ee=0;if(G(X))for(var se;!(se=X.next()).done&&t(se.value,ee++,this)!==!1;);return ee},he.prototype.__iteratorUncached=function(t,h){if(h)return this.cacheResult().__iterator(t,h);var B=this._iterable,X=q(B);if(!G(X))return new r(c);var ee=0;return new r(function(){var se=X.next();return se.done?se:d(t,ee++,se.value)})},e(pe,Q);function pe(t){this._iterator=t,this._iteratorCache=[]}pe.prototype.__iterateUncached=function(t,h){if(h)return this.cacheResult().__iterate(t,h);for(var B=this._iterator,X=this._iteratorCache,ee=0;ee<X.length;)if(t(X[ee],ee++,this)===!1)return ee;for(var se;!(se=B.next()).done;){var fe=se.value;if(X[ee]=fe,t(fe,ee++,this)===!1)break}return ee},pe.prototype.__iteratorUncached=function(t,h){if(h)return this.cacheResult().__iterator(t,h);var B=this._iterator,X=this._iteratorCache,ee=0;return new r(function(){if(ee>=X.length){var se=B.next();if(se.done)return se;X[ee]=se.value}return d(t,ee,X[ee++])})};function ye(t){return!!(t&&t[oe])}var Re;function Ce(){return Re||(Re=new le([]))}function Ae(t){var h=Array.isArray(t)?new le(t).fromEntrySeq():G(t)?new pe(t).fromEntrySeq():P(t)?new he(t).fromEntrySeq():typeof t=="object"?new ue(t):void 0;if(!h)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return h}function Te(t){var h=We(t);if(!h)throw new TypeError("Expected Array or iterable object of values: "+t);return h}function be(t){var h=We(t)||typeof t=="object"&&new ue(t);if(!h)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return h}function We(t){return j(t)?new le(t):G(t)?new pe(t):P(t)?new he(t):void 0}function je(t,h,B,X){var ee=t._cache;if(ee){for(var se=ee.length-1,fe=0;fe<=se;fe++){var ge=ee[B?se-fe:fe];if(h(ge[1],X?ge[0]:fe,t)===!1)return fe+1}return fe}return t.__iterateUncached(h,B)}function He(t,h,B,X){var ee=t._cache;if(ee){var se=ee.length-1,fe=0;return new r(function(){var ge=ee[B?se-fe:fe];return fe++>se?c():d(h,X?ge[0]:fe-1,ge[1])})}return t.__iteratorUncached(h,B)}function De(t,h){return h?Ye(h,t,"",{"":t}):nt(t)}function Ye(t,h,B,X){return Array.isArray(h)?t.call(X,B,Q(h).map(function(ee,se){return Ye(t,ee,se,h)})):ke(h)?t.call(X,B,k(h).map(function(ee,se){return Ye(t,ee,se,h)})):h}function nt(t){return Array.isArray(t)?Q(t).map(nt).toList():ke(t)?k(t).map(nt).toMap():t}function ke(t){return t&&(t.constructor===Object||t.constructor===void 0)}function ve(t,h){if(t===h||t!==t&&h!==h)return!0;if(!t||!h)return!1;if(typeof t.valueOf=="function"&&typeof h.valueOf=="function"){if(t=t.valueOf(),h=h.valueOf(),t===h||t!==t&&h!==h)return!0;if(!t||!h)return!1}return!!(typeof t.equals=="function"&&typeof h.equals=="function"&&t.equals(h))}function Ee(t,h){if(t===h)return!0;if(!N(h)||t.size!==void 0&&h.size!==void 0&&t.size!==h.size||t.__hash!==void 0&&h.__hash!==void 0&&t.__hash!==h.__hash||R(t)!==R(h)||L(t)!==L(h)||I(t)!==I(h))return!1;if(t.size===0&&h.size===0)return!0;var B=!A(t);if(I(t)){var X=t.entries();return h.every(function(Pe,Ne){var Me=X.next().value;return Me&&ve(Me[1],Pe)&&(B||ve(Me[0],Ne))})&&X.next().done}var ee=!1;if(t.size===void 0)if(h.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{ee=!0;var se=t;t=h,h=se}var fe=!0,ge=h.__iterate(function(Pe,Ne){if(B?!t.has(Pe):ee?!ve(Pe,t.get(Ne,U)):!ve(t.get(Ne,U),Pe))return fe=!1,!1});return fe&&t.size===ge}e(Ie,Q);function Ie(t,h){if(!(this instanceof Ie))return new Ie(t,h);if(this._value=t,this.size=h===void 0?1/0:Math.max(0,h),this.size===0){if(we)return we;we=this}}Ie.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Ie.prototype.get=function(t,h){return this.has(t)?this._value:h},Ie.prototype.includes=function(t){return ve(this._value,t)},Ie.prototype.slice=function(t,h){var B=this.size;return v(t,h,B)?this:new Ie(this._value,p(h,B)-l(t,B))},Ie.prototype.reverse=function(){return this},Ie.prototype.indexOf=function(t){return ve(this._value,t)?0:-1},Ie.prototype.lastIndexOf=function(t){return ve(this._value,t)?this.size:-1},Ie.prototype.__iterate=function(t,h){for(var B=0;B<this.size;B++)if(t(this._value,B,this)===!1)return B+1;return B},Ie.prototype.__iterator=function(t,h){var B=this,X=0;return new r(function(){return X<B.size?d(t,X++,B._value):c()})},Ie.prototype.equals=function(t){return t instanceof Ie?ve(this._value,t._value):Ee(t)};var we;function Ue(t,h){if(!t)throw new Error(h)}e(Ge,Q);function Ge(t,h,B){if(!(this instanceof Ge))return new Ge(t,h,B);if(Ue(B!==0,"Cannot step a Range by 0"),t=t||0,h===void 0&&(h=1/0),B=B===void 0?1:Math.abs(B),h<t&&(B=-B),this._start=t,this._end=h,this._step=B,this.size=Math.max(0,Math.ceil((h-t)/B-1)+1),this.size===0){if(Ve)return Ve;Ve=this}}Ge.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},Ge.prototype.get=function(t,h){return this.has(t)?this._start+w(this,t)*this._step:h},Ge.prototype.includes=function(t){var h=(t-this._start)/this._step;return h>=0&&h<this.size&&h===Math.floor(h)},Ge.prototype.slice=function(t,h){return v(t,h,this.size)?this:(t=l(t,this.size),h=p(h,this.size),h<=t?new Ge(0,0):new Ge(this.get(t,this._end),this.get(h,this._end),this._step))},Ge.prototype.indexOf=function(t){var h=t-this._start;if(h%this._step===0){var B=h/this._step;if(B>=0&&B<this.size)return B}return-1},Ge.prototype.lastIndexOf=function(t){return this.indexOf(t)},Ge.prototype.__iterate=function(t,h){for(var B=this.size-1,X=this._step,ee=h?this._start+B*X:this._start,se=0;se<=B;se++){if(t(ee,se,this)===!1)return se+1;ee+=h?-X:X}return se},Ge.prototype.__iterator=function(t,h){var B=this.size-1,X=this._step,ee=h?this._start+B*X:this._start,se=0;return new r(function(){var fe=ee;return ee+=h?-X:X,se>B?c():d(t,se++,fe)})},Ge.prototype.equals=function(t){return t instanceof Ge?this._start===t._start&&this._end===t._end&&this._step===t._step:Ee(this,t)};var Ve;e(_e,n);function _e(){throw TypeError("Abstract")}e(ze,_e);function ze(){}e(ot,_e);function ot(){}e(Qe,_e);function Qe(){}_e.Keyed=ze,_e.Indexed=ot,_e.Set=Qe;var ut=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(h,B){h=h|0,B=B|0;var X=h&65535,ee=B&65535;return X*ee+((h>>>16)*ee+X*(B>>>16)<<16>>>0)|0};function pt(t){return t>>>1&1073741824|t&3221225471}function et(t){if(t===!1||t===null||t===void 0||typeof t.valueOf=="function"&&(t=t.valueOf(),t===!1||t===null||t===void 0))return 0;if(t===!0)return 1;var h=typeof t;if(h==="number"){if(t!==t||t===1/0)return 0;var B=t|0;for(B!==t&&(B^=t*4294967295);t>4294967295;)t/=4294967295,B^=t;return pt(B)}if(h==="string")return t.length>Ot?vt(t):Et(t);if(typeof t.hashCode=="function")return t.hashCode();if(h==="object")return Pt(t);if(typeof t.toString=="function")return Et(t.toString());throw new Error("Value type "+h+" cannot be hashed.")}function vt(t){var h=Ht[t];return h===void 0&&(h=Et(t),It===Vt&&(It=0,Ht={}),It++,Ht[t]=h),h}function Et(t){for(var h=0,B=0;B<t.length;B++)h=31*h+t.charCodeAt(B)|0;return pt(h)}function Pt(t){var h;if(Ft&&(h=bt.get(t),h!==void 0)||(h=t[st],h!==void 0)||!lt&&(h=t.propertyIsEnumerable&&t.propertyIsEnumerable[st],h!==void 0||(h=Rt(t),h!==void 0)))return h;if(h=++Bt,Bt&1073741824&&(Bt=0),Ft)bt.set(t,h);else{if(Ct!==void 0&&Ct(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(lt)Object.defineProperty(t,st,{enumerable:!1,configurable:!1,writable:!1,value:h});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[st]=h;else if(t.nodeType!==void 0)t[st]=h;else throw new Error("Unable to set a non-enumerable property on object.")}return h}var Ct=Object.isExtensible,lt=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Rt(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var Ft=typeof WeakMap=="function",bt;Ft&&(bt=new WeakMap);var Bt=0,st="__immutablehash__";typeof Symbol=="function"&&(st=Symbol(st));var Ot=16,Vt=255,It=0,Ht={};function Ut(t){Ue(t!==1/0,"Cannot perform this action with an infinite size.")}e($e,ze);function $e(t){return t==null?Lt():dt(t)&&!I(t)?t:Lt().withMutations(function(h){var B=O(t);Ut(B.size),B.forEach(function(X,ee){return h.set(ee,X)})})}$e.of=function(){var t=i.call(arguments,0);return Lt().withMutations(function(h){for(var B=0;B<t.length;B+=2){if(B+1>=t.length)throw new Error("Missing value for key: "+t[B]);h.set(t[B],t[B+1])}})},$e.prototype.toString=function(){return this.__toString("Map {","}")},$e.prototype.get=function(t,h){return this._root?this._root.get(0,void 0,t,h):h},$e.prototype.set=function(t,h){return Yt(this,t,h)},$e.prototype.setIn=function(t,h){return this.updateIn(t,U,function(){return h})},$e.prototype.remove=function(t){return Yt(this,t,U)},$e.prototype.deleteIn=function(t){return this.updateIn(t,function(){return U})},$e.prototype.update=function(t,h,B){return arguments.length===1?t(this):this.updateIn([t],h,B)},$e.prototype.updateIn=function(t,h,B){B||(B=h,h=void 0);var X=Cr(this,Ke(t),h,B);return X===U?void 0:X},$e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Lt()},$e.prototype.merge=function(){return cr(this,void 0,arguments)},$e.prototype.mergeWith=function(t){var h=i.call(arguments,1);return cr(this,t,h)},$e.prototype.mergeIn=function(t){var h=i.call(arguments,1);return this.updateIn(t,Lt(),function(B){return typeof B.merge=="function"?B.merge.apply(B,h):h[h.length-1]})},$e.prototype.mergeDeep=function(){return cr(this,dr,arguments)},$e.prototype.mergeDeepWith=function(t){var h=i.call(arguments,1);return cr(this,pr(t),h)},$e.prototype.mergeDeepIn=function(t){var h=i.call(arguments,1);return this.updateIn(t,Lt(),function(B){return typeof B.mergeDeep=="function"?B.mergeDeep.apply(B,h):h[h.length-1]})},$e.prototype.sort=function(t){return Kt(Tr(this,t))},$e.prototype.sortBy=function(t,h){return Kt(Tr(this,h,t))},$e.prototype.withMutations=function(t){var h=this.asMutable();return t(h),h.wasAltered()?h.__ensureOwner(this.__ownerID):this},$e.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new $)},$e.prototype.asImmutable=function(){return this.__ensureOwner()},$e.prototype.wasAltered=function(){return this.__altered},$e.prototype.__iterator=function(t,h){return new kt(this,t,h)},$e.prototype.__iterate=function(t,h){var B=this,X=0;return this._root&&this._root.iterate(function(ee){return X++,t(ee[1],ee[0],B)},h),X},$e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Be(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)};function dt(t){return!!(t&&t[gt])}$e.isMap=dt;var gt="@@__IMMUTABLE_MAP__@@",Ze=$e.prototype;Ze[gt]=!0,Ze[D]=Ze.remove,Ze.removeIn=Ze.deleteIn;function yt(t,h){this.ownerID=t,this.entries=h}yt.prototype.get=function(t,h,B,X){for(var ee=this.entries,se=0,fe=ee.length;se<fe;se++)if(ve(B,ee[se][0]))return ee[se][1];return X},yt.prototype.update=function(t,h,B,X,ee,se,fe){for(var ge=ee===U,Pe=this.entries,Ne=0,Me=Pe.length;Ne<Me&&!ve(X,Pe[Ne][0]);Ne++);var Xe=Ne<Me;if(Xe?Pe[Ne][1]===ee:ge)return this;if(z(fe),(ge||!Xe)&&z(se),!(ge&&Pe.length===1)){if(!Xe&&!ge&&Pe.length>=rr)return Rr(t,Pe,X,ee);var tt=t&&t===this.ownerID,mt=tt?Pe:_(Pe);return Xe?ge?Ne===Me-1?mt.pop():mt[Ne]=mt.pop():mt[Ne]=[X,ee]:mt.push([X,ee]),tt?(this.entries=mt,this):new yt(t,mt)}};function xt(t,h,B){this.ownerID=t,this.bitmap=h,this.nodes=B}xt.prototype.get=function(t,h,B,X){h===void 0&&(h=et(B));var ee=1<<((t===0?h:h>>>t)&J),se=this.bitmap;return se&ee?this.nodes[vr(se&ee-1)].get(t+x,h,B,X):X},xt.prototype.update=function(t,h,B,X,ee,se,fe){B===void 0&&(B=et(X));var ge=(h===0?B:B>>>h)&J,Pe=1<<ge,Ne=this.bitmap,Me=(Ne&Pe)!==0;if(!Me&&ee===U)return this;var Xe=vr(Ne&Pe-1),tt=this.nodes,mt=Me?tt[Xe]:void 0,St=qt(mt,t,h+x,B,X,ee,se,fe);if(St===mt)return this;if(!Me&&St&&tt.length>=on)return fr(t,tt,Ne,ge,St);if(Me&&!St&&tt.length===2&&Sr(tt[Xe^1]))return tt[Xe^1];if(Me&&St&&tt.length===1&&Sr(St))return St;var Wt=t&&t===this.ownerID,tr=Me?St?Ne:Ne^Pe:Ne|Pe,or=Me?St?gr(tt,Xe,St,Wt):lr(tt,Xe,Wt):Mr(tt,Xe,St,Wt);return Wt?(this.bitmap=tr,this.nodes=or,this):new xt(t,tr,or)};function jt(t,h,B){this.ownerID=t,this.count=h,this.nodes=B}jt.prototype.get=function(t,h,B,X){h===void 0&&(h=et(B));var ee=(t===0?h:h>>>t)&J,se=this.nodes[ee];return se?se.get(t+x,h,B,X):X},jt.prototype.update=function(t,h,B,X,ee,se,fe){B===void 0&&(B=et(X));var ge=(h===0?B:B>>>h)&J,Pe=ee===U,Ne=this.nodes,Me=Ne[ge];if(Pe&&!Me)return this;var Xe=qt(Me,t,h+x,B,X,ee,se,fe);if(Xe===Me)return this;var tt=this.count;if(!Me)tt++;else if(!Xe&&(tt--,tt<xr))return br(t,Ne,tt,ge);var mt=t&&t===this.ownerID,St=gr(Ne,ge,Xe,mt);return mt?(this.count=tt,this.nodes=St,this):new jt(t,tt,St)};function $t(t,h,B){this.ownerID=t,this.keyHash=h,this.entries=B}$t.prototype.get=function(t,h,B,X){for(var ee=this.entries,se=0,fe=ee.length;se<fe;se++)if(ve(B,ee[se][0]))return ee[se][1];return X},$t.prototype.update=function(t,h,B,X,ee,se,fe){B===void 0&&(B=et(X));var ge=ee===U;if(B!==this.keyHash)return ge?this:(z(fe),z(se),sr(this,t,h,B,[X,ee]));for(var Pe=this.entries,Ne=0,Me=Pe.length;Ne<Me&&!ve(X,Pe[Ne][0]);Ne++);var Xe=Ne<Me;if(Xe?Pe[Ne][1]===ee:ge)return this;if(z(fe),(ge||!Xe)&&z(se),ge&&Me===2)return new Je(t,this.keyHash,Pe[Ne^1]);var tt=t&&t===this.ownerID,mt=tt?Pe:_(Pe);return Xe?ge?Ne===Me-1?mt.pop():mt[Ne]=mt.pop():mt[Ne]=[X,ee]:mt.push([X,ee]),tt?(this.entries=mt,this):new $t(t,this.keyHash,mt)};function Je(t,h,B){this.ownerID=t,this.keyHash=h,this.entry=B}Je.prototype.get=function(t,h,B,X){return ve(B,this.entry[0])?this.entry[1]:X},Je.prototype.update=function(t,h,B,X,ee,se,fe){var ge=ee===U,Pe=ve(X,this.entry[0]);if(Pe?ee===this.entry[1]:ge)return this;if(z(fe),ge){z(se);return}return Pe?t&&t===this.ownerID?(this.entry[1]=ee,this):new Je(t,this.keyHash,[X,ee]):(z(se),sr(this,t,h,et(X),[X,ee]))},yt.prototype.iterate=$t.prototype.iterate=function(t,h){for(var B=this.entries,X=0,ee=B.length-1;X<=ee;X++)if(t(B[h?ee-X:X])===!1)return!1},xt.prototype.iterate=jt.prototype.iterate=function(t,h){for(var B=this.nodes,X=0,ee=B.length-1;X<=ee;X++){var se=B[h?ee-X:X];if(se&&se.iterate(t,h)===!1)return!1}},Je.prototype.iterate=function(t,h){return t(this.entry)},e(kt,r);function kt(t,h,B){this._type=h,this._reverse=B,this._stack=t._root&&Se(t._root)}kt.prototype.next=function(){for(var t=this._type,h=this._stack;h;){var B=h.node,X=h.index++,ee;if(B.entry){if(X===0)return ce(t,B.entry)}else if(B.entries){if(ee=B.entries.length-1,X<=ee)return ce(t,B.entries[this._reverse?ee-X:X])}else if(ee=B.nodes.length-1,X<=ee){var se=B.nodes[this._reverse?ee-X:X];if(se){if(se.entry)return ce(t,se.entry);h=this._stack=Se(se,h)}continue}h=this._stack=this._stack.__prev}return c()};function ce(t,h){return d(t,h[0],h[1])}function Se(t,h){return{node:t,index:0,__prev:h}}function Be(t,h,B,X){var ee=Object.create(Ze);return ee.size=t,ee._root=h,ee.__ownerID=B,ee.__hash=X,ee.__altered=!1,ee}var it;function Lt(){return it||(it=Be(0))}function Yt(t,h,B){var X,ee;if(t._root){var se=H(W),fe=H(V);if(X=qt(t._root,t.__ownerID,0,void 0,h,B,se,fe),!fe.value)return t;ee=t.size+(se.value?B===U?-1:1:0)}else{if(B===U)return t;ee=1,X=new yt(t.__ownerID,[[h,B]])}return t.__ownerID?(t.size=ee,t._root=X,t.__hash=void 0,t.__altered=!0,t):X?Be(ee,X):Lt()}function qt(t,h,B,X,ee,se,fe,ge){return t?t.update(h,B,X,ee,se,fe,ge):se===U?t:(z(ge),z(fe),new Je(h,X,[ee,se]))}function Sr(t){return t.constructor===Je||t.constructor===$t}function sr(t,h,B,X,ee){if(t.keyHash===X)return new $t(h,X,[t.entry,ee]);var se=(B===0?t.keyHash:t.keyHash>>>B)&J,fe=(B===0?X:X>>>B)&J,ge,Pe=se===fe?[sr(t,h,B+x,X,ee)]:(ge=new Je(h,X,ee),se<fe?[t,ge]:[ge,t]);return new xt(h,1<<se|1<<fe,Pe)}function Rr(t,h,B,X){t||(t=new $);for(var ee=new Je(t,et(B),[B,X]),se=0;se<h.length;se++){var fe=h[se];ee=ee.update(t,0,void 0,fe[0],fe[1])}return ee}function br(t,h,B,X){for(var ee=0,se=0,fe=new Array(B),ge=0,Pe=1,Ne=h.length;ge<Ne;ge++,Pe<<=1){var Me=h[ge];Me!==void 0&&ge!==X&&(ee|=Pe,fe[se++]=Me)}return new xt(t,ee,fe)}function fr(t,h,B,X,ee){for(var se=0,fe=new Array(F),ge=0;B!==0;ge++,B>>>=1)fe[ge]=B&1?h[se++]:void 0;return fe[X]=ee,new jt(t,se+1,fe)}function cr(t,h,B){for(var X=[],ee=0;ee<B.length;ee++){var se=B[ee],fe=O(se);N(se)||(fe=fe.map(function(ge){return De(ge)})),X.push(fe)}return ur(t,h,X)}function dr(t,h,B){return t&&t.mergeDeep&&N(h)?t.mergeDeep(h):ve(t,h)?t:h}function pr(t){return function(h,B,X){if(h&&h.mergeDeepWith&&N(B))return h.mergeDeepWith(t,B);var ee=t(h,B,X);return ve(h,ee)?h:ee}}function ur(t,h,B){return B=B.filter(function(X){return X.size!==0}),B.length===0?t:t.size===0&&!t.__ownerID&&B.length===1?t.constructor(B[0]):t.withMutations(function(X){for(var ee=h?function(fe,ge){X.update(ge,U,function(Pe){return Pe===U?fe:h(Pe,fe,ge)})}:function(fe,ge){X.set(ge,fe)},se=0;se<B.length;se++)B[se].forEach(ee)})}function Cr(t,h,B,X){var ee=t===U,se=h.next();if(se.done){var fe=ee?B:t,ge=X(fe);return ge===fe?t:ge}Ue(ee||t&&t.set,"invalid keyPath");var Pe=se.value,Ne=ee?U:t.get(Pe,U),Me=Cr(Ne,h,B,X);return Me===Ne?t:Me===U?t.remove(Pe):(ee?Lt():t).set(Pe,Me)}function vr(t){return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t=t+(t>>8),t=t+(t>>16),t&127}function gr(t,h,B,X){var ee=X?t:_(t);return ee[h]=B,ee}function Mr(t,h,B,X){var ee=t.length+1;if(X&&h+1===ee)return t[h]=B,t;for(var se=new Array(ee),fe=0,ge=0;ge<ee;ge++)ge===h?(se[ge]=B,fe=-1):se[ge]=t[ge+fe];return se}function lr(t,h,B){var X=t.length-1;if(B&&h===X)return t.pop(),t;for(var ee=new Array(X),se=0,fe=0;fe<X;fe++)fe===h&&(se=1),ee[fe]=t[fe+se];return ee}var rr=F/4,on=F/2,xr=F/4;e(Mt,ot);function Mt(t){var h=wr();if(t==null)return h;if(Kr(t))return t;var B=S(t),X=B.size;return X===0?h:(Ut(X),X>0&&X<F?Ar(0,X,x,null,new Xt(B.toArray())):h.withMutations(function(ee){ee.setSize(X),B.forEach(function(se,fe){return ee.set(fe,se)})}))}Mt.of=function(){return this(arguments)},Mt.prototype.toString=function(){return this.__toString("List [","]")},Mt.prototype.get=function(t,h){if(t=w(this,t),t>=0&&t<this.size){t+=this._origin;var B=$r(this,t);return B&&B.array[t&J]}return h},Mt.prototype.set=function(t,h){return zr(this,t,h)},Mt.prototype.remove=function(t){return this.has(t)?t===0?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Mt.prototype.insert=function(t,h){return this.splice(t,0,h)},Mt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=x,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):wr()},Mt.prototype.push=function(){var t=arguments,h=this.size;return this.withMutations(function(B){ar(B,0,h+t.length);for(var X=0;X<t.length;X++)B.set(h+X,t[X])})},Mt.prototype.pop=function(){return ar(this,0,-1)},Mt.prototype.unshift=function(){var t=arguments;return this.withMutations(function(h){ar(h,-t.length);for(var B=0;B<t.length;B++)h.set(B,t[B])})},Mt.prototype.shift=function(){return ar(this,1)},Mt.prototype.merge=function(){return Lr(this,void 0,arguments)},Mt.prototype.mergeWith=function(t){var h=i.call(arguments,1);return Lr(this,t,h)},Mt.prototype.mergeDeep=function(){return Lr(this,dr,arguments)},Mt.prototype.mergeDeepWith=function(t){var h=i.call(arguments,1);return Lr(this,pr(t),h)},Mt.prototype.setSize=function(t){return ar(this,0,t)},Mt.prototype.slice=function(t,h){var B=this.size;return v(t,h,B)?this:ar(this,l(t,B),p(h,B))},Mt.prototype.__iterator=function(t,h){var B=0,X=kr(this,h);return new r(function(){var ee=X();return ee===nr?c():d(t,B++,ee)})},Mt.prototype.__iterate=function(t,h){for(var B=0,X=kr(this,h),ee;(ee=X())!==nr&&t(ee,B++,this)!==!1;);return B},Mt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ar(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)};function Kr(t){return!!(t&&t[Hr])}Mt.isList=Kr;var Hr="@@__IMMUTABLE_LIST__@@",Qt=Mt.prototype;Qt[Hr]=!0,Qt[D]=Qt.remove,Qt.setIn=Ze.setIn,Qt.deleteIn=Qt.removeIn=Ze.removeIn,Qt.update=Ze.update,Qt.updateIn=Ze.updateIn,Qt.mergeIn=Ze.mergeIn,Qt.mergeDeepIn=Ze.mergeDeepIn,Qt.withMutations=Ze.withMutations,Qt.asMutable=Ze.asMutable,Qt.asImmutable=Ze.asImmutable,Qt.wasAltered=Ze.wasAltered;function Xt(t,h){this.array=t,this.ownerID=h}Xt.prototype.removeBefore=function(t,h,B){if(B===h?1<<h:this.array.length===0)return this;var X=B>>>h&J;if(X>=this.array.length)return new Xt([],t);var ee=X===0,se;if(h>0){var fe=this.array[X];if(se=fe&&fe.removeBefore(t,h-x,B),se===fe&&ee)return this}if(ee&&!se)return this;var ge=hr(this,t);if(!ee)for(var Pe=0;Pe<X;Pe++)ge.array[Pe]=void 0;return se&&(ge.array[X]=se),ge},Xt.prototype.removeAfter=function(t,h,B){if(B===(h?1<<h:0)||this.array.length===0)return this;var X=B-1>>>h&J;if(X>=this.array.length)return this;var ee;if(h>0){var se=this.array[X];if(ee=se&&se.removeAfter(t,h-x,B),ee===se&&X===this.array.length-1)return this}var fe=hr(this,t);return fe.array.splice(X+1),ee&&(fe.array[X]=ee),fe};var nr={};function kr(t,h){var B=t._origin,X=t._capacity,ee=Ir(X),se=t._tail;return fe(t._root,t._level,0);function fe(Ne,Me,Xe){return Me===0?ge(Ne,Xe):Pe(Ne,Me,Xe)}function ge(Ne,Me){var Xe=Me===ee?se&&se.array:Ne&&Ne.array,tt=Me>B?0:B-Me,mt=X-Me;return mt>F&&(mt=F),function(){if(tt===mt)return nr;var St=h?--mt:tt++;return Xe&&Xe[St]}}function Pe(Ne,Me,Xe){var tt,mt=Ne&&Ne.array,St=Xe>B?0:B-Xe>>Me,Wt=(X-Xe>>Me)+1;return Wt>F&&(Wt=F),function(){do{if(tt){var tr=tt();if(tr!==nr)return tr;tt=null}if(St===Wt)return nr;var or=h?--Wt:St++;tt=fe(mt&&mt[or],Me-x,Xe+(or<<Me))}while(!0)}}}function Ar(t,h,B,X,ee,se,fe){var ge=Object.create(Qt);return ge.size=h-t,ge._origin=t,ge._capacity=h,ge._level=B,ge._root=X,ge._tail=ee,ge.__ownerID=se,ge.__hash=fe,ge.__altered=!1,ge}var Yr;function wr(){return Yr||(Yr=Ar(0,0,x))}function zr(t,h,B){if(h=w(t,h),h!==h)return t;if(h>=t.size||h<0)return t.withMutations(function(fe){h<0?ar(fe,h).set(0,B):ar(fe,0,h+1).set(h,B)});h+=t._origin;var X=t._tail,ee=t._root,se=H(V);return h>=Ir(t._capacity)?X=Pr(X,t.__ownerID,0,h,B,se):ee=Pr(ee,t.__ownerID,t._level,h,B,se),se.value?t.__ownerID?(t._root=ee,t._tail=X,t.__hash=void 0,t.__altered=!0,t):Ar(t._origin,t._capacity,t._level,ee,X):t}function Pr(t,h,B,X,ee,se){var fe=X>>>B&J,ge=t&&fe<t.array.length;if(!ge&&ee===void 0)return t;var Pe;if(B>0){var Ne=t&&t.array[fe],Me=Pr(Ne,h,B-x,X,ee,se);return Me===Ne?t:(Pe=hr(t,h),Pe.array[fe]=Me,Pe)}return ge&&t.array[fe]===ee?t:(z(se),Pe=hr(t,h),ee===void 0&&fe===Pe.array.length-1?Pe.array.pop():Pe.array[fe]=ee,Pe)}function hr(t,h){return h&&t&&h===t.ownerID?t:new Xt(t?t.array.slice():[],h)}function $r(t,h){if(h>=Ir(t._capacity))return t._tail;if(h<1<<t._level+x){for(var B=t._root,X=t._level;B&&X>0;)B=B.array[h>>>X&J],X-=x;return B}}function ar(t,h,B){h!==void 0&&(h=h|0),B!==void 0&&(B=B|0);var X=t.__ownerID||new $,ee=t._origin,se=t._capacity,fe=ee+h,ge=B===void 0?se:B<0?se+B:ee+B;if(fe===ee&&ge===se)return t;if(fe>=ge)return t.clear();for(var Pe=t._level,Ne=t._root,Me=0;fe+Me<0;)Ne=new Xt(Ne&&Ne.array.length?[void 0,Ne]:[],X),Pe+=x,Me+=1<<Pe;Me&&(fe+=Me,ee+=Me,ge+=Me,se+=Me);for(var Xe=Ir(se),tt=Ir(ge);tt>=1<<Pe+x;)Ne=new Xt(Ne&&Ne.array.length?[Ne]:[],X),Pe+=x;var mt=t._tail,St=tt<Xe?$r(t,ge-1):tt>Xe?new Xt([],X):mt;if(mt&&tt>Xe&&fe<se&&mt.array.length){Ne=hr(Ne,X);for(var Wt=Ne,tr=Pe;tr>x;tr-=x){var or=Xe>>>tr&J;Wt=Wt.array[or]=hr(Wt.array[or],X)}Wt.array[Xe>>>x&J]=mt}if(ge<se&&(St=St&&St.removeAfter(X,0,ge)),fe>=tt)fe-=tt,ge-=tt,Pe=x,Ne=null,St=St&&St.removeBefore(X,0,fe);else if(fe>ee||tt<Xe){for(Me=0;Ne;){var an=fe>>>Pe&J;if(an!==tt>>>Pe&J)break;an&&(Me+=(1<<Pe)*an),Pe-=x,Ne=Ne.array[an]}Ne&&fe>ee&&(Ne=Ne.removeBefore(X,Pe,fe-Me)),Ne&&tt<Xe&&(Ne=Ne.removeAfter(X,Pe,tt-Me)),Me&&(fe-=Me,ge-=Me)}return t.__ownerID?(t.size=ge-fe,t._origin=fe,t._capacity=ge,t._level=Pe,t._root=Ne,t._tail=St,t.__hash=void 0,t.__altered=!0,t):Ar(fe,ge,Pe,Ne,St)}function Lr(t,h,B){for(var X=[],ee=0,se=0;se<B.length;se++){var fe=B[se],ge=S(fe);ge.size>ee&&(ee=ge.size),N(fe)||(ge=ge.map(function(Pe){return De(Pe)})),X.push(ge)}return ee>t.size&&(t=t.setSize(ee)),ur(t,h,X)}function Ir(t){return t<F?0:t-1>>>x<<x}e(Kt,$e);function Kt(t){return t==null?mr():wt(t)?t:mr().withMutations(function(h){var B=O(t);Ut(B.size),B.forEach(function(X,ee){return h.set(ee,X)})})}Kt.of=function(){return this(arguments)},Kt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Kt.prototype.get=function(t,h){var B=this._map.get(t);return B!==void 0?this._list.get(B)[1]:h},Kt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):mr()},Kt.prototype.set=function(t,h){return un(this,t,h)},Kt.prototype.remove=function(t){return un(this,t,U)},Kt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Kt.prototype.__iterate=function(t,h){var B=this;return this._list.__iterate(function(X){return X&&t(X[1],X[0],B)},h)},Kt.prototype.__iterator=function(t,h){return this._list.fromEntrySeq().__iterator(t,h)},Kt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var h=this._map.__ensureOwner(t),B=this._list.__ensureOwner(t);return t?Vr(h,B,t,this.__hash):(this.__ownerID=t,this._map=h,this._list=B,this)};function wt(t){return dt(t)&&I(t)}Kt.isOrderedMap=wt,Kt.prototype[b]=!0,Kt.prototype[D]=Kt.prototype.remove;function Vr(t,h,B,X){var ee=Object.create(Kt.prototype);return ee.size=t?t.size:0,ee._map=t,ee._list=h,ee.__ownerID=B,ee.__hash=X,ee}var _r;function mr(){return _r||(_r=Vr(Lt(),wr()))}function un(t,h,B){var X=t._map,ee=t._list,se=X.get(h),fe=se!==void 0,ge,Pe;if(B===U){if(!fe)return t;ee.size>=F&&ee.size>=X.size*2?(Pe=ee.filter(function(Ne,Me){return Ne!==void 0&&se!==Me}),ge=Pe.toKeyedSeq().map(function(Ne){return Ne[0]}).flip().toMap(),t.__ownerID&&(ge.__ownerID=Pe.__ownerID=t.__ownerID)):(ge=X.remove(h),Pe=se===ee.size-1?ee.pop():ee.set(se,void 0))}else if(fe){if(B===ee.get(se)[1])return t;ge=X,Pe=ee.set(se,[h,B])}else ge=X.set(h,ee.size),Pe=ee.set(ee.size,[h,B]);return t.__ownerID?(t.size=ge.size,t._map=ge,t._list=Pe,t.__hash=void 0,t):Vr(ge,Pe)}e(Jt,k);function Jt(t,h){this._iter=t,this._useKeys=h,this.size=t.size}Jt.prototype.get=function(t,h){return this._iter.get(t,h)},Jt.prototype.has=function(t){return this._iter.has(t)},Jt.prototype.valueSeq=function(){return this._iter.valueSeq()},Jt.prototype.reverse=function(){var t=this,h=Gr(this,!0);return this._useKeys||(h.valueSeq=function(){return t._iter.toSeq().reverse()}),h},Jt.prototype.map=function(t,h){var B=this,X=Ur(this,t,h);return this._useKeys||(X.valueSeq=function(){return B._iter.toSeq().map(t,h)}),X},Jt.prototype.__iterate=function(t,h){var B=this,X;return this._iter.__iterate(this._useKeys?function(ee,se){return t(ee,se,B)}:(X=h?de(this):0,function(ee){return t(ee,h?--X:X++,B)}),h)},Jt.prototype.__iterator=function(t,h){if(this._useKeys)return this._iter.__iterator(t,h);var B=this._iter.__iterator(g,h),X=h?de(this):0;return new r(function(){var ee=B.next();return ee.done?ee:d(t,h?--X:X++,ee.value,ee)})},Jt.prototype[b]=!0,e(yr,Q);function yr(t){this._iter=t,this.size=t.size}yr.prototype.includes=function(t){return this._iter.includes(t)},yr.prototype.__iterate=function(t,h){var B=this,X=0;return this._iter.__iterate(function(ee){return t(ee,X++,B)},h)},yr.prototype.__iterator=function(t,h){var B=this._iter.__iterator(g,h),X=0;return new r(function(){var ee=B.next();return ee.done?ee:d(t,X++,ee.value,ee)})},e(Er,ae);function Er(t){this._iter=t,this.size=t.size}Er.prototype.has=function(t){return this._iter.includes(t)},Er.prototype.__iterate=function(t,h){var B=this;return this._iter.__iterate(function(X){return t(X,X,B)},h)},Er.prototype.__iterator=function(t,h){var B=this._iter.__iterator(g,h);return new r(function(){var X=B.next();return X.done?X:d(t,X.value,X.value,X)})},e(Or,k);function Or(t){this._iter=t,this.size=t.size}Or.prototype.entrySeq=function(){return this._iter.toSeq()},Or.prototype.__iterate=function(t,h){var B=this;return this._iter.__iterate(function(X){if(X){ie(X);var ee=N(X);return t(ee?X.get(1):X[1],ee?X.get(0):X[0],B)}},h)},Or.prototype.__iterator=function(t,h){var B=this._iter.__iterator(g,h);return new r(function(){for(;;){var X=B.next();if(X.done)return X;var ee=X.value;if(ee){ie(ee);var se=N(ee);return d(t,se?ee.get(0):ee[0],se?ee.get(1):ee[1],X)}}})},yr.prototype.cacheResult=Jt.prototype.cacheResult=Er.prototype.cacheResult=Or.prototype.cacheResult=Le;function Qr(t){var h=Oe(t);return h._iter=t,h.size=t.size,h.flip=function(){return t},h.reverse=function(){var B=t.reverse.apply(this);return B.flip=function(){return t.reverse()},B},h.has=function(B){return t.includes(B)},h.includes=function(B){return t.has(B)},h.cacheResult=Le,h.__iterateUncached=function(B,X){var ee=this;return t.__iterate(function(se,fe){return B(fe,se,ee)!==!1},X)},h.__iteratorUncached=function(B,X){if(B===m){var ee=t.__iterator(B,X);return new r(function(){var se=ee.next();if(!se.done){var fe=se.value[0];se.value[0]=se.value[1],se.value[1]=fe}return se})}return t.__iterator(B===g?u:g,X)},h}function Ur(t,h,B){var X=Oe(t);return X.size=t.size,X.has=function(ee){return t.has(ee)},X.get=function(ee,se){var fe=t.get(ee,U);return fe===U?se:h.call(B,fe,ee,t)},X.__iterateUncached=function(ee,se){var fe=this;return t.__iterate(function(ge,Pe,Ne){return ee(h.call(B,ge,Pe,Ne),Pe,fe)!==!1},se)},X.__iteratorUncached=function(ee,se){var fe=t.__iterator(m,se);return new r(function(){var ge=fe.next();if(ge.done)return ge;var Pe=ge.value,Ne=Pe[0];return d(ee,Ne,h.call(B,Pe[1],Ne,t),ge)})},X}function Gr(t,h){var B=Oe(t);return B._iter=t,B.size=t.size,B.reverse=function(){return t},t.flip&&(B.flip=function(){var X=Qr(t);return X.reverse=function(){return t.flip()},X}),B.get=function(X,ee){return t.get(h?X:-1-X,ee)},B.has=function(X){return t.has(h?X:-1-X)},B.includes=function(X){return t.includes(X)},B.cacheResult=Le,B.__iterate=function(X,ee){var se=this;return t.__iterate(function(fe,ge){return X(fe,ge,se)},!ee)},B.__iterator=function(X,ee){return t.__iterator(X,!ee)},B}function Xr(t,h,B,X){var ee=Oe(t);return X&&(ee.has=function(se){var fe=t.get(se,U);return fe!==U&&!!h.call(B,fe,se,t)},ee.get=function(se,fe){var ge=t.get(se,U);return ge!==U&&h.call(B,ge,se,t)?ge:fe}),ee.__iterateUncached=function(se,fe){var ge=this,Pe=0;return t.__iterate(function(Ne,Me,Xe){if(h.call(B,Ne,Me,Xe))return Pe++,se(Ne,X?Me:Pe-1,ge)},fe),Pe},ee.__iteratorUncached=function(se,fe){var ge=t.__iterator(m,fe),Pe=0;return new r(function(){for(;;){var Ne=ge.next();if(Ne.done)return Ne;var Me=Ne.value,Xe=Me[0],tt=Me[1];if(h.call(B,tt,Xe,t))return d(se,X?Xe:Pe++,tt,Ne)}})},ee}function ln(t,h,B){var X=$e().asMutable();return t.__iterate(function(ee,se){X.update(h.call(B,ee,se,t),0,function(fe){return fe+1})}),X.asImmutable()}function sn(t,h,B){var X=R(t),ee=(I(t)?Kt():$e()).asMutable();t.__iterate(function(fe,ge){ee.update(h.call(B,fe,ge,t),function(Pe){return Pe=Pe||[],Pe.push(X?[ge,fe]:fe),Pe})});var se=me(t);return ee.map(function(fe){return te(t,se(fe))})}function jr(t,h,B,X){var ee=t.size;if(h!==void 0&&(h=h|0),B!==void 0&&(B===1/0?B=ee:B=B|0),v(h,B,ee))return t;var se=l(h,ee),fe=p(B,ee);if(se!==se||fe!==fe)return jr(t.toSeq().cacheResult(),h,B,X);var ge=fe-se,Pe;ge===ge&&(Pe=ge<0?0:ge);var Ne=Oe(t);return Ne.size=Pe===0?Pe:t.size&&Pe||void 0,!X&&ye(t)&&Pe>=0&&(Ne.get=function(Me,Xe){return Me=w(this,Me),Me>=0&&Me<Pe?t.get(Me+se,Xe):Xe}),Ne.__iterateUncached=function(Me,Xe){var tt=this;if(Pe===0)return 0;if(Xe)return this.cacheResult().__iterate(Me,Xe);var mt=0,St=!0,Wt=0;return t.__iterate(function(tr,or){if(!(St&&(St=mt++<se)))return Wt++,Me(tr,X?or:Wt-1,tt)!==!1&&Wt!==Pe}),Wt},Ne.__iteratorUncached=function(Me,Xe){if(Pe!==0&&Xe)return this.cacheResult().__iterator(Me,Xe);var tt=Pe!==0&&t.__iterator(Me,Xe),mt=0,St=0;return new r(function(){for(;mt++<se;)tt.next();if(++St>Pe)return c();var Wt=tt.next();return X||Me===g?Wt:Me===u?d(Me,St-1,void 0,Wt):d(Me,St-1,Wt.value[1],Wt)})},Ne}function Jr(t,h,B){var X=Oe(t);return X.__iterateUncached=function(ee,se){var fe=this;if(se)return this.cacheResult().__iterate(ee,se);var ge=0;return t.__iterate(function(Pe,Ne,Me){return h.call(B,Pe,Ne,Me)&&++ge&&ee(Pe,Ne,fe)}),ge},X.__iteratorUncached=function(ee,se){var fe=this;if(se)return this.cacheResult().__iterator(ee,se);var ge=t.__iterator(m,se),Pe=!0;return new r(function(){if(!Pe)return c();var Ne=ge.next();if(Ne.done)return Ne;var Me=Ne.value,Xe=Me[0],tt=Me[1];return h.call(B,tt,Xe,fe)?ee===m?Ne:d(ee,Xe,tt,Ne):(Pe=!1,c())})},X}function Zr(t,h,B,X){var ee=Oe(t);return ee.__iterateUncached=function(se,fe){var ge=this;if(fe)return this.cacheResult().__iterate(se,fe);var Pe=!0,Ne=0;return t.__iterate(function(Me,Xe,tt){if(!(Pe&&(Pe=h.call(B,Me,Xe,tt))))return Ne++,se(Me,X?Xe:Ne-1,ge)}),Ne},ee.__iteratorUncached=function(se,fe){var ge=this;if(fe)return this.cacheResult().__iterator(se,fe);var Pe=t.__iterator(m,fe),Ne=!0,Me=0;return new r(function(){var Xe,tt,mt;do{if(Xe=Pe.next(),Xe.done)return X||se===g?Xe:se===u?d(se,Me++,void 0,Xe):d(se,Me++,Xe.value[1],Xe);var St=Xe.value;tt=St[0],mt=St[1],Ne&&(Ne=h.call(B,mt,tt,ge))}while(Ne);return se===m?Xe:d(se,tt,mt,Xe)})},ee}function Nr(t,h){var B=R(t),X=[t].concat(h).map(function(fe){return N(fe)?B&&(fe=O(fe)):fe=B?Ae(fe):Te(Array.isArray(fe)?fe:[fe]),fe}).filter(function(fe){return fe.size!==0});if(X.length===0)return t;if(X.length===1){var ee=X[0];if(ee===t||B&&R(ee)||L(t)&&L(ee))return ee}var se=new le(X);return B?se=se.toKeyedSeq():L(t)||(se=se.toSetSeq()),se=se.flatten(!0),se.size=X.reduce(function(fe,ge){if(fe!==void 0){var Pe=ge.size;if(Pe!==void 0)return fe+Pe}},0),se}function qr(t,h,B){var X=Oe(t);return X.__iterateUncached=function(ee,se){var fe=0,ge=!1;function Pe(Ne,Me){var Xe=this;Ne.__iterate(function(tt,mt){return(!h||Me<h)&&N(tt)?Pe(tt,Me+1):ee(tt,B?mt:fe++,Xe)===!1&&(ge=!0),!ge},se)}return Pe(t,0),fe},X.__iteratorUncached=function(ee,se){var fe=t.__iterator(ee,se),ge=[],Pe=0;return new r(function(){for(;fe;){var Ne=fe.next();if(Ne.done!==!1){fe=ge.pop();continue}var Me=Ne.value;if(ee===m&&(Me=Me[1]),(!h||ge.length<h)&&N(Me))ge.push(fe),fe=Me.__iterator(ee,se);else return B?Ne:d(ee,Pe++,Me,Ne)}return c()})},X}function fn(t,h,B){var X=me(t);return t.toSeq().map(function(ee,se){return X(h.call(B,ee,se,t))}).flatten(!0)}function cn(t,h){var B=Oe(t);return B.size=t.size&&t.size*2-1,B.__iterateUncached=function(X,ee){var se=this,fe=0;return t.__iterate(function(ge,Pe){return(!fe||X(h,fe++,se)!==!1)&&X(ge,fe++,se)!==!1},ee),fe},B.__iteratorUncached=function(X,ee){var se=t.__iterator(g,ee),fe=0,ge;return new r(function(){return(!ge||fe%2)&&(ge=se.next(),ge.done)?ge:fe%2?d(X,fe++,h):d(X,fe++,ge.value,ge)})},B}function Tr(t,h,B){h||(h=Fe);var X=R(t),ee=0,se=t.toSeq().map(function(fe,ge){return[ge,fe,ee++,B?B(fe,ge,t):fe]}).toArray();return se.sort(function(fe,ge){return h(fe[3],ge[3])||fe[2]-ge[2]}).forEach(X?function(fe,ge){se[ge].length=2}:function(fe,ge){se[ge]=fe[1]}),X?k(se):L(t)?Q(se):ae(se)}function Fr(t,h,B){if(h||(h=Fe),B){var X=t.toSeq().map(function(ee,se){return[ee,B(ee,se,t)]}).reduce(function(ee,se){return en(h,ee[1],se[1])?se:ee});return X&&X[0]}else return t.reduce(function(ee,se){return en(h,ee,se)?se:ee})}function en(t,h,B){var X=t(B,h);return X===0&&B!==h&&(B==null||B!==B)||X>0}function ne(t,h,B){var X=Oe(t);return X.size=new le(B).map(function(ee){return ee.size}).min(),X.__iterate=function(ee,se){for(var fe=this.__iterator(g,se),ge,Pe=0;!(ge=fe.next()).done&&ee(ge.value,Pe++,this)!==!1;);return Pe},X.__iteratorUncached=function(ee,se){var fe=B.map(function(Ne){return Ne=n(Ne),q(se?Ne.reverse():Ne)}),ge=0,Pe=!1;return new r(function(){var Ne;return Pe||(Ne=fe.map(function(Me){return Me.next()}),Pe=Ne.some(function(Me){return Me.done})),Pe?c():d(ee,ge++,h.apply(null,Ne.map(function(Me){return Me.value})))})},X}function te(t,h){return ye(t)?h:t.constructor(h)}function ie(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function de(t){return Ut(t.size),Y(t)}function me(t){return R(t)?O:L(t)?S:o}function Oe(t){return Object.create((R(t)?k:L(t)?Q:ae).prototype)}function Le(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):K.prototype.cacheResult.call(this)}function Fe(t,h){return t>h?1:t<h?-1:0}function Ke(t){var h=q(t);if(!h){if(!j(t))throw new TypeError("Expected iterable or array-like: "+t);h=q(n(t))}return h}e(xe,ze);function xe(t,h){var B,X=function(fe){if(fe instanceof X)return fe;if(!(this instanceof X))return new X(fe);if(!B){B=!0;var ge=Object.keys(t);rt(ee,ge),ee.size=ge.length,ee._name=h,ee._keys=ge,ee._defaultValues=t}this._map=$e(fe)},ee=X.prototype=Object.create(qe);return ee.constructor=X,X}xe.prototype.toString=function(){return this.__toString(Tt(this)+" {","}")},xe.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},xe.prototype.get=function(t,h){if(!this.has(t))return h;var B=this._defaultValues[t];return this._map?this._map.get(t,B):B},xe.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=ct(this,Lt()))},xe.prototype.set=function(t,h){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Tt(this));if(this._map&&!this._map.has(t)){var B=this._defaultValues[t];if(h===B)return this}var X=this._map&&this._map.set(t,h);return this.__ownerID||X===this._map?this:ct(this,X)},xe.prototype.remove=function(t){if(!this.has(t))return this;var h=this._map&&this._map.remove(t);return this.__ownerID||h===this._map?this:ct(this,h)},xe.prototype.wasAltered=function(){return this._map.wasAltered()},xe.prototype.__iterator=function(t,h){var B=this;return O(this._defaultValues).map(function(X,ee){return B.get(ee)}).__iterator(t,h)},xe.prototype.__iterate=function(t,h){var B=this;return O(this._defaultValues).map(function(X,ee){return B.get(ee)}).__iterate(t,h)},xe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var h=this._map&&this._map.__ensureOwner(t);return t?ct(this,h,t):(this.__ownerID=t,this._map=h,this)};var qe=xe.prototype;qe[D]=qe.remove,qe.deleteIn=qe.removeIn=Ze.removeIn,qe.merge=Ze.merge,qe.mergeWith=Ze.mergeWith,qe.mergeIn=Ze.mergeIn,qe.mergeDeep=Ze.mergeDeep,qe.mergeDeepWith=Ze.mergeDeepWith,qe.mergeDeepIn=Ze.mergeDeepIn,qe.setIn=Ze.setIn,qe.update=Ze.update,qe.updateIn=Ze.updateIn,qe.withMutations=Ze.withMutations,qe.asMutable=Ze.asMutable,qe.asImmutable=Ze.asImmutable;function ct(t,h,B){var X=Object.create(Object.getPrototypeOf(t));return X._map=h,X.__ownerID=B,X}function Tt(t){return t._name||t.constructor.name||"Record"}function rt(t,h){try{h.forEach(ft.bind(void 0,t))}catch{}}function ft(t,h){Object.defineProperty(t,h,{get:function(){return this.get(h)},set:function(B){Ue(this.__ownerID,"Cannot set on an immutable record."),this.set(h,B)}})}e(at,Qe);function at(t){return t==null?Wr():Dt(t)&&!I(t)?t:Wr().withMutations(function(h){var B=o(t);Ut(B.size),B.forEach(function(X){return h.add(X)})})}at.of=function(){return this(arguments)},at.fromKeys=function(t){return this(O(t).keySeq())},at.prototype.toString=function(){return this.__toString("Set {","}")},at.prototype.has=function(t){return this._map.has(t)},at.prototype.add=function(t){return Gt(this,this._map.set(t,!0))},at.prototype.remove=function(t){return Gt(this,this._map.remove(t))},at.prototype.clear=function(){return Gt(this,this._map.clear())},at.prototype.union=function(){var t=i.call(arguments,0);return t=t.filter(function(h){return h.size!==0}),t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(h){for(var B=0;B<t.length;B++)o(t[B]).forEach(function(X){return h.add(X)})})},at.prototype.intersect=function(){var t=i.call(arguments,0);if(t.length===0)return this;t=t.map(function(B){return o(B)});var h=this;return this.withMutations(function(B){h.forEach(function(X){t.every(function(ee){return ee.includes(X)})||B.remove(X)})})},at.prototype.subtract=function(){var t=i.call(arguments,0);if(t.length===0)return this;t=t.map(function(B){return o(B)});var h=this;return this.withMutations(function(B){h.forEach(function(X){t.some(function(ee){return ee.includes(X)})&&B.remove(X)})})},at.prototype.merge=function(){return this.union.apply(this,arguments)},at.prototype.mergeWith=function(t){var h=i.call(arguments,1);return this.union.apply(this,h)},at.prototype.sort=function(t){return er(Tr(this,t))},at.prototype.sortBy=function(t,h){return er(Tr(this,h,t))},at.prototype.wasAltered=function(){return this._map.wasAltered()},at.prototype.__iterate=function(t,h){var B=this;return this._map.__iterate(function(X,ee){return t(ee,ee,B)},h)},at.prototype.__iterator=function(t,h){return this._map.map(function(B,X){return X}).__iterator(t,h)},at.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var h=this._map.__ensureOwner(t);return t?this.__make(h,t):(this.__ownerID=t,this._map=h,this)};function Dt(t){return!!(t&&t[zt])}at.isSet=Dt;var zt="@@__IMMUTABLE_SET__@@",At=at.prototype;At[zt]=!0,At[D]=At.remove,At.mergeDeep=At.merge,At.mergeDeepWith=At.mergeWith,At.withMutations=Ze.withMutations,At.asMutable=Ze.asMutable,At.asImmutable=Ze.asImmutable,At.__empty=Wr,At.__make=ht;function Gt(t,h){return t.__ownerID?(t.size=h.size,t._map=h,t):h===t._map?t:h.size===0?t.__empty():t.__make(h)}function ht(t,h){var B=Object.create(At);return B.size=t?t.size:0,B._map=t,B.__ownerID=h,B}var Nt;function Wr(){return Nt||(Nt=ht(Lt()))}e(er,at);function er(t){return t==null?dn():vn(t)?t:dn().withMutations(function(h){var B=o(t);Ut(B.size),B.forEach(function(X){return h.add(X)})})}er.of=function(){return this(arguments)},er.fromKeys=function(t){return this(O(t).keySeq())},er.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function vn(t){return Dt(t)&&I(t)}er.isOrderedSet=vn;var tn=er.prototype;tn[b]=!0,tn.__empty=dn,tn.__make=gn;function gn(t,h){var B=Object.create(tn);return B.size=t?t.size:0,B._map=t,B.__ownerID=h,B}var hn;function dn(){return hn||(hn=gn(mr()))}e(_t,ot);function _t(t){return t==null?pn():mn(t)?t:pn().unshiftAll(t)}_t.of=function(){return this(arguments)},_t.prototype.toString=function(){return this.__toString("Stack [","]")},_t.prototype.get=function(t,h){var B=this._head;for(t=w(this,t);B&&t--;)B=B.next;return B?B.value:h},_t.prototype.peek=function(){return this._head&&this._head.value},_t.prototype.push=function(){if(arguments.length===0)return this;for(var t=this.size+arguments.length,h=this._head,B=arguments.length-1;B>=0;B--)h={value:arguments[B],next:h};return this.__ownerID?(this.size=t,this._head=h,this.__hash=void 0,this.__altered=!0,this):Br(t,h)},_t.prototype.pushAll=function(t){if(t=S(t),t.size===0)return this;Ut(t.size);var h=this.size,B=this._head;return t.reverse().forEach(function(X){h++,B={value:X,next:B}}),this.__ownerID?(this.size=h,this._head=B,this.__hash=void 0,this.__altered=!0,this):Br(h,B)},_t.prototype.pop=function(){return this.slice(1)},_t.prototype.unshift=function(){return this.push.apply(this,arguments)},_t.prototype.unshiftAll=function(t){return this.pushAll(t)},_t.prototype.shift=function(){return this.pop.apply(this,arguments)},_t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):pn()},_t.prototype.slice=function(t,h){if(v(t,h,this.size))return this;var B=l(t,this.size),X=p(h,this.size);if(X!==this.size)return ot.prototype.slice.call(this,t,h);for(var ee=this.size-B,se=this._head;B--;)se=se.next;return this.__ownerID?(this.size=ee,this._head=se,this.__hash=void 0,this.__altered=!0,this):Br(ee,se)},_t.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Br(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},_t.prototype.__iterate=function(t,h){if(h)return this.reverse().__iterate(t);for(var B=0,X=this._head;X&&t(X.value,B++,this)!==!1;)X=X.next;return B},_t.prototype.__iterator=function(t,h){if(h)return this.reverse().__iterator(t);var B=0,X=this._head;return new r(function(){if(X){var ee=X.value;return X=X.next,d(t,B++,ee)}return c()})};function mn(t){return!!(t&&t[yn])}_t.isStack=mn;var yn="@@__IMMUTABLE_STACK__@@",Dr=_t.prototype;Dr[yn]=!0,Dr.withMutations=Ze.withMutations,Dr.asMutable=Ze.asMutable,Dr.asImmutable=Ze.asImmutable,Dr.wasAltered=Ze.wasAltered;function Br(t,h,B,X){var ee=Object.create(Dr);return ee.size=t,ee._head=h,ee.__ownerID=B,ee.__hash=X,ee.__altered=!1,ee}var En;function pn(){return En||(En=Br(0))}function ir(t,h){var B=function(X){t.prototype[X]=h[X]};return Object.keys(h).forEach(B),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(h).forEach(B),t}n.Iterator=r,ir(n,{toArray:function(){Ut(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(h,B){t[B]=h}),t},toIndexedSeq:function(){return new yr(this)},toJS:function(){return this.toSeq().map(function(t){return t&&typeof t.toJS=="function"?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&typeof t.toJSON=="function"?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new Jt(this,!0)},toMap:function(){return $e(this.toKeyedSeq())},toObject:function(){Ut(this.size);var t={};return this.__iterate(function(h,B){t[B]=h}),t},toOrderedMap:function(){return Kt(this.toKeyedSeq())},toOrderedSet:function(){return er(R(this)?this.valueSeq():this)},toSet:function(){return at(R(this)?this.valueSeq():this)},toSetSeq:function(){return new Er(this)},toSeq:function(){return L(this)?this.toIndexedSeq():R(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return _t(R(this)?this.valueSeq():this)},toList:function(){return Mt(R(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,h){return this.size===0?t+h:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+h},concat:function(){var t=i.call(arguments,0);return te(this,Nr(this,t))},includes:function(t){return this.some(function(h){return ve(h,t)})},entries:function(){return this.__iterator(m)},every:function(t,h){Ut(this.size);var B=!0;return this.__iterate(function(X,ee,se){if(!t.call(h,X,ee,se))return B=!1,!1}),B},filter:function(t,h){return te(this,Xr(this,t,h,!0))},find:function(t,h,B){var X=this.findEntry(t,h);return X?X[1]:B},forEach:function(t,h){return Ut(this.size),this.__iterate(h?t.bind(h):t)},join:function(t){Ut(this.size),t=t!==void 0?""+t:",";var h="",B=!0;return this.__iterate(function(X){B?B=!1:h+=t,h+=X!=null?X.toString():""}),h},keys:function(){return this.__iterator(u)},map:function(t,h){return te(this,Ur(this,t,h))},reduce:function(t,h,B){Ut(this.size);var X,ee;return arguments.length<2?ee=!0:X=h,this.__iterate(function(se,fe,ge){ee?(ee=!1,X=se):X=t.call(B,X,se,fe,ge)}),X},reduceRight:function(t,h,B){var X=this.toKeyedSeq().reverse();return X.reduce.apply(X,arguments)},reverse:function(){return te(this,Gr(this,!0))},slice:function(t,h){return te(this,jr(this,t,h,!0))},some:function(t,h){return!this.every(nn(t),h)},sort:function(t){return te(this,Tr(this,t))},values:function(){return this.__iterator(g)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,h){return Y(t?this.toSeq().filter(t,h):this)},countBy:function(t,h){return ln(this,t,h)},equals:function(t){return Ee(this,t)},entrySeq:function(){var t=this;if(t._cache)return new le(t._cache);var h=t.toSeq().map(An).toIndexedSeq();return h.fromEntrySeq=function(){return t.toSeq()},h},filterNot:function(t,h){return this.filter(nn(t),h)},findEntry:function(t,h,B){var X=B;return this.__iterate(function(ee,se,fe){if(t.call(h,ee,se,fe))return X=[se,ee],!1}),X},findKey:function(t,h){var B=this.findEntry(t,h);return B&&B[0]},findLast:function(t,h,B){return this.toKeyedSeq().reverse().find(t,h,B)},findLastEntry:function(t,h,B){return this.toKeyedSeq().reverse().findEntry(t,h,B)},findLastKey:function(t,h){return this.toKeyedSeq().reverse().findKey(t,h)},first:function(){return this.find(T)},flatMap:function(t,h){return te(this,fn(this,t,h))},flatten:function(t){return te(this,qr(this,t,!0))},fromEntrySeq:function(){return new Or(this)},get:function(t,h){return this.find(function(B,X){return ve(X,t)},void 0,h)},getIn:function(t,h){for(var B=this,X=Ke(t),ee;!(ee=X.next()).done;){var se=ee.value;if(B=B&&B.get?B.get(se,U):U,B===U)return h}return B},groupBy:function(t,h){return sn(this,t,h)},has:function(t){return this.get(t,U)!==U},hasIn:function(t){return this.getIn(t,U)!==U},isSubset:function(t){return t=typeof t.includes=="function"?t:n(t),this.every(function(h){return t.includes(h)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:n(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(h){return ve(h,t)})},keySeq:function(){return this.toSeq().map(Cn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Fr(this,t)},maxBy:function(t,h){return Fr(this,h,t)},min:function(t){return Fr(this,t?On(t):Sn)},minBy:function(t,h){return Fr(this,h?On(h):Sn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return te(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,h){return te(this,Zr(this,t,h,!0))},skipUntil:function(t,h){return this.skipWhile(nn(t),h)},sortBy:function(t,h){return te(this,Tr(this,h,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return te(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,h){return te(this,Jr(this,t,h))},takeUntil:function(t,h){return this.takeWhile(nn(t),h)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=In(this))}});var Zt=n.prototype;Zt[y]=!0,Zt[a]=Zt.values,Zt.__toJS=Zt.toArray,Zt.__toStringMapper=Tn,Zt.inspect=Zt.toSource=function(){return this.toString()},Zt.chain=Zt.flatMap,Zt.contains=Zt.includes,ir(O,{flip:function(){return te(this,Qr(this))},mapEntries:function(t,h){var B=this,X=0;return te(this,this.toSeq().map(function(ee,se){return t.call(h,[se,ee],X++,B)}).fromEntrySeq())},mapKeys:function(t,h){var B=this;return te(this,this.toSeq().flip().map(function(X,ee){return t.call(h,X,ee,B)}).flip())}});var rn=O.prototype;rn[C]=!0,rn[a]=Zt.entries,rn.__toJS=Zt.toObject,rn.__toStringMapper=function(t,h){return JSON.stringify(h)+": "+Tn(t)},ir(S,{toKeyedSeq:function(){return new Jt(this,!1)},filter:function(t,h){return te(this,Xr(this,t,h,!1))},findIndex:function(t,h){var B=this.findEntry(t,h);return B?B[0]:-1},indexOf:function(t){var h=this.keyOf(t);return h===void 0?-1:h},lastIndexOf:function(t){var h=this.lastKeyOf(t);return h===void 0?-1:h},reverse:function(){return te(this,Gr(this,!1))},slice:function(t,h){return te(this,jr(this,t,h,!1))},splice:function(t,h){var B=arguments.length;if(h=Math.max(h|0,0),B===0||B===2&&!h)return this;t=l(t,t<0?this.count():this.size);var X=this.slice(0,t);return te(this,B===1?X:X.concat(_(arguments,2),this.slice(t+h)))},findLastIndex:function(t,h){var B=this.findLastEntry(t,h);return B?B[0]:-1},first:function(){return this.get(0)},flatten:function(t){return te(this,qr(this,t,!1))},get:function(t,h){return t=w(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?h:this.find(function(B,X){return X===t},void 0,h)},has:function(t){return t=w(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return te(this,cn(this,t))},interleave:function(){var t=[this].concat(_(arguments)),h=ne(this.toSeq(),Q.of,t),B=h.flatten(!0);return h.size&&(B.size=h.size*t.length),te(this,B)},keySeq:function(){return Ge(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,h){return te(this,Zr(this,t,h,!1))},zip:function(){var t=[this].concat(_(arguments));return te(this,ne(this,Pn,t))},zipWith:function(t){var h=_(arguments);return h[0]=this,te(this,ne(this,t,h))}}),S.prototype[M]=!0,S.prototype[b]=!0,ir(o,{get:function(t,h){return this.has(t)?t:h},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),o.prototype.has=Zt.includes,o.prototype.contains=o.prototype.includes,ir(k,O.prototype),ir(Q,S.prototype),ir(ae,o.prototype),ir(ze,O.prototype),ir(ot,S.prototype),ir(Qe,o.prototype);function Cn(t,h){return h}function An(t,h){return[h,t]}function nn(t){return function(){return!t.apply(this,arguments)}}function On(t){return function(){return-t.apply(this,arguments)}}function Tn(t){return typeof t=="string"?JSON.stringify(t):String(t)}function Pn(){return _(arguments)}function Sn(t,h){return t<h?1:t>h?-1:0}function In(t){if(t.size===1/0)return 0;var h=I(t),B=R(t),X=h?1:0,ee=t.__iterate(B?h?function(se,fe){X=31*X+Rn(et(se),et(fe))|0}:function(se,fe){X=X+Rn(et(se),et(fe))|0}:h?function(se){X=31*X+et(se)|0}:function(se){X=X+et(se)|0});return Ln(ee,X)}function Ln(t,h){return h=ut(h,3432918353),h=ut(h<<15|h>>>-15,461845907),h=ut(h<<13|h>>>-13,5),h=(h+3864292196|0)^t,h=ut(h^h>>>16,2246822507),h=ut(h^h>>>13,3266489909),h=pt(h^h>>>16),h}function Rn(t,h){return t^h+2654435769+(t<<6)+(t>>2)|0}var Nn={Iterable:n,Seq:K,Collection:_e,Map:$e,OrderedMap:Kt,List:Mt,Stack:_t,Set:at,OrderedSet:er,Record:xe,Range:Ge,Repeat:Ie,is:ve,fromJS:De};return Nn})},70370:(re,i,e)=>{var n=e(24655),O=e(60648);function S(o,N,R){(R!==void 0&&!O(o[N],R)||R===void 0&&!(N in o))&&n(o,N,R)}re.exports=S},21033:(re,i,e)=>{var n=e(70253),O=e(70370),S=e(99997),o=e(11368),N=e(52259),R=e(66373),L=e(41788);function A(I,y,C,M,b){I!==y&&S(y,function(D,x){if(b||(b=new n),N(D))o(I,y,x,C,A,M,b);else{var F=M?M(L(I,x),D,x+"",I,y,b):void 0;F===void 0&&(F=D),O(I,x,F)}},R)}re.exports=A},11368:(re,i,e)=>{var n=e(70370),O=e(54562),S=e(74194),o=e(60566),N=e(62587),R=e(11710),L=e(75821),A=e(66260),I=e(3521),y=e(51144),C=e(52259),M=e(2556),b=e(34403),D=e(41788),x=e(13044);function F(J,U,W,V,H,z,$){var _=D(J,W),Y=D(U,W),w=$.get(Y);if(w){n(J,W,w);return}var T=z?z(_,Y,W+"",J,U,$):void 0,v=T===void 0;if(v){var l=L(Y),p=!l&&I(Y),s=!l&&!p&&b(Y);T=Y,l||p||s?L(_)?T=_:A(_)?T=o(_):p?(v=!1,T=O(Y,!0)):s?(v=!1,T=S(Y,!0)):T=[]:M(Y)||R(Y)?(T=_,R(_)?T=x(_):(!C(_)||y(_))&&(T=N(Y))):v=!1}v&&($.set(Y,T),H(T,Y,V,z,$),$.delete(Y)),n(J,W,T)}re.exports=F},45585:re=>{var i=9007199254740991,e=Math.floor;function n(O,S){var o="";if(!O||S<1||S>i)return o;do S%2&&(o+=O),S=e(S/2),S&&(O+=O);while(S);return o}re.exports=n},99021:(re,i,e)=>{var n=e(37174),O=e(69336),S=e(55719);function o(N,R){return S(O(N,R,n),N+"")}re.exports=o},71398:(re,i,e)=>{var n=e(26400);function O(S,o){return n(o,function(N){return S[N]})}re.exports=O},44419:(re,i,e)=>{var n=e(99021),O=e(20894);function S(o){return n(function(N,R){var L=-1,A=R.length,I=A>1?R[A-1]:void 0,y=A>2?R[2]:void 0;for(I=o.length>3&&typeof I=="function"?(A--,I):void 0,y&&O(R[0],R[1],y)&&(I=A<3?void 0:I,A=1),N=Object(N);++L<A;){var C=R[L];C&&o(N,C,L,I)}return N})}re.exports=S},41788:re=>{function i(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}re.exports=i},85222:(re,i,e)=>{var n=e(39207),O=/[\\^$.*+?()[\]{}|]/g,S=RegExp(O.source);function o(N){return N=n(N),N&&S.test(N)?N.replace(O,"\\$&"):N}re.exports=o},421:(re,i,e)=>{var n=e(22421),O=e(94434),S=e(87600),o=e(63437),N=e(33119),R=Math.max;function L(A,I,y,C){A=O(A)?A:N(A),y=y&&!C?o(y):0;var M=A.length;return y<0&&(y=R(M+y,0)),S(A)?y<=M&&A.indexOf(I,y)>-1:!!M&&n(A,I,y)>-1}re.exports=L},66260:(re,i,e)=>{var n=e(94434),O=e(84007);function S(o){return O(o)&&n(o)}re.exports=S},94818:(re,i,e)=>{var n=e(61703),O=e(75217),S=e(11710),o=e(75821),N=e(94434),R=e(3521),L=e(36561),A=e(34403),I="[object Map]",y="[object Set]",C=Object.prototype,M=C.hasOwnProperty;function b(D){if(D==null)return!0;if(N(D)&&(o(D)||typeof D=="string"||typeof D.splice=="function"||R(D)||A(D)||S(D)))return!D.length;var x=O(D);if(x==I||x==y)return!D.size;if(L(D))return!n(D).length;for(var F in D)if(M.call(D,F))return!1;return!0}re.exports=b},87600:(re,i,e)=>{var n=e(20009),O=e(75821),S=e(84007),o="[object String]";function N(R){return typeof R=="string"||!O(R)&&S(R)&&n(R)==o}re.exports=N},33973:(re,i,e)=>{var n=e(24655),O=e(4768),S=e(98968);function o(N,R){var L={};return R=S(R,3),O(N,function(A,I,y){n(L,I,R(A,I,y))}),L}re.exports=o},82564:(re,i,e)=>{var n=e(21033),O=e(44419),S=O(function(o,N,R){n(o,N,R)});re.exports=S},44362:(re,i,e)=>{var n=e(21033),O=e(44419),S=O(function(o,N,R,L){n(o,N,R,L)});re.exports=S},82925:(re,i,e)=>{var n=e(26400),O=e(98968),S=e(85874),o=e(41381);function N(R,L){if(R==null)return{};var A=n(o(R),function(I){return[I]});return L=O(L),S(R,A,function(I,y){return L(I,y[0])})}re.exports=N},52400:(re,i,e)=>{var n=e(45585),O=e(20894),S=e(63437),o=e(39207);function N(R,L,A){return(A?O(R,L,A):L===void 0)?L=1:L=S(L),n(o(R),L)}re.exports=N},33604:(re,i,e)=>{var n=e(93089),O=e(48771),S=e(63437),o=e(39207);function N(R,L,A){return R=o(R),A=A==null?0:n(S(A),0,R.length),L=O(L),R.slice(A,A+L.length)==L}re.exports=N},63437:(re,i,e)=>{var n=e(36634);function O(S){var o=n(S),N=o%1;return o===o?N?o-N:o:0}re.exports=O},13044:(re,i,e)=>{var n=e(60645),O=e(66373);function S(o){return n(o,O(o))}re.exports=S},33119:(re,i,e)=>{var n=e(71398),O=e(35174);function S(o){return o==null?[]:n(o,O(o))}re.exports=S},53508:(re,i,e)=>{"use strict";e.r(i),e.d(i,{__DO_NOT_USE__ActionTypes:()=>N,applyMiddleware:()=>H,bindActionCreators:()=>W,combineReducers:()=>J,compose:()=>V,createStore:()=>M,legacy_createStore:()=>b});var n=e(98013);function O($){return"Minified Redux error #"+$+"; visit https://redux.js.org/Errors?code="+$+" for the full message or use the non-minified dev environment for full errors. "}var S=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},N={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function R($){if(typeof $!="object"||$===null)return!1;for(var _=$;Object.getPrototypeOf(_)!==null;)_=Object.getPrototypeOf(_);return Object.getPrototypeOf($)===_}function L($){if($===void 0)return"undefined";if($===null)return"null";var _=typeof $;switch(_){case"boolean":case"string":case"number":case"symbol":case"function":return _}if(Array.isArray($))return"array";if(y($))return"date";if(I($))return"error";var Y=A($);switch(Y){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return Y}return _.slice(8,-1).toLowerCase().replace(/\s/g,"")}function A($){return typeof $.constructor=="function"?$.constructor.name:null}function I($){return $ instanceof Error||typeof $.message=="string"&&$.constructor&&typeof $.constructor.stackTraceLimit=="number"}function y($){return $ instanceof Date?!0:typeof $.toDateString=="function"&&typeof $.getDate=="function"&&typeof $.setDate=="function"}function C($){var _=typeof $;return _}function M($,_,Y){var w;if(typeof _=="function"&&typeof Y=="function"||typeof Y=="function"&&typeof arguments[3]=="function")throw new Error(O(0));if(typeof _=="function"&&typeof Y>"u"&&(Y=_,_=void 0),typeof Y<"u"){if(typeof Y!="function")throw new Error(O(1));return Y(M)($,_)}if(typeof $!="function")throw new Error(O(2));var T=$,v=_,l=[],p=l,s=!1;function u(){p===l&&(p=l.slice())}function g(){if(s)throw new Error(O(3));return v}function m(r){if(typeof r!="function")throw new Error(O(4));if(s)throw new Error(O(5));var d=!0;return u(),p.push(r),function(){if(d){if(s)throw new Error(O(6));d=!1,u();var P=p.indexOf(r);p.splice(P,1),l=null}}}function E(r){if(!R(r))throw new Error(O(7));if(typeof r.type>"u")throw new Error(O(8));if(s)throw new Error(O(9));try{s=!0,v=T(v,r)}finally{s=!1}for(var d=l=p,c=0;c<d.length;c++){var P=d[c];P()}return r}function f(r){if(typeof r!="function")throw new Error(O(10));T=r,E({type:N.REPLACE})}function a(){var r,d=m;return r={subscribe:function(P){if(typeof P!="object"||P===null)throw new Error(O(11));function G(){P.next&&P.next(g())}G();var q=d(G);return{unsubscribe:q}}},r[S]=function(){return this},r}return E({type:N.INIT}),w={dispatch:E,subscribe:m,getState:g,replaceReducer:f},w[S]=a,w}var b=M;function D($){typeof console<"u"&&typeof console.error=="function"&&console.error($);try{throw new Error($)}catch{}}function x($,_,Y,w){var T=Object.keys(_),v=Y&&Y.type===N.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(T.length===0)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!R($))return"The "+v+' has unexpected type of "'+C($)+'". Expected argument to be an object with the following '+('keys: "'+T.join('", "')+'"');var l=Object.keys($).filter(function(p){return!_.hasOwnProperty(p)&&!w[p]});if(l.forEach(function(p){w[p]=!0}),!(Y&&Y.type===N.REPLACE)&&l.length>0)return"Unexpected "+(l.length>1?"keys":"key")+" "+('"'+l.join('", "')+'" found in '+v+". ")+"Expected to find one of the known reducer keys instead: "+('"'+T.join('", "')+'". Unexpected keys will be ignored.')}function F($){Object.keys($).forEach(function(_){var Y=$[_],w=Y(void 0,{type:N.INIT});if(typeof w>"u")throw new Error(O(12));if(typeof Y(void 0,{type:N.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(O(13))})}function J($){for(var _=Object.keys($),Y={},w=0;w<_.length;w++){var T=_[w];typeof $[T]=="function"&&(Y[T]=$[T])}var v=Object.keys(Y),l,p;try{F(Y)}catch(s){p=s}return function(u,g){if(u===void 0&&(u={}),p)throw p;if(!1)var m;for(var E=!1,f={},a=0;a<v.length;a++){var r=v[a],d=Y[r],c=u[r],P=d(c,g);if(typeof P>"u"){var G=g&&g.type;throw new Error(O(14))}f[r]=P,E=E||P!==c}return E=E||v.length!==Object.keys(u).length,E?f:u}}function U($,_){return function(){return _($.apply(this,arguments))}}function W($,_){if(typeof $=="function")return U($,_);if(typeof $!="object"||$===null)throw new Error(O(16));var Y={};for(var w in $){var T=$[w];typeof T=="function"&&(Y[w]=U(T,_))}return Y}function V(){for(var $=arguments.length,_=new Array($),Y=0;Y<$;Y++)_[Y]=arguments[Y];return _.length===0?function(w){return w}:_.length===1?_[0]:_.reduce(function(w,T){return function(){return w(T.apply(void 0,arguments))}})}function H(){for(var $=arguments.length,_=new Array($),Y=0;Y<$;Y++)_[Y]=arguments[Y];return function(w){return function(){var T=w.apply(void 0,arguments),v=function(){throw new Error(O(15))},l={getState:T.getState,dispatch:function(){return v.apply(void 0,arguments)}},p=_.map(function(s){return s(l)});return v=V.apply(void 0,p)(T.dispatch),(0,n.Z)((0,n.Z)({},T),{},{dispatch:v})}}}function z(){}},55825:function(re){(function(e,n){re.exports=n()})(this,function(){return function(i){var e={};function n(O){if(e[O])return e[O].exports;var S=e[O]={i:O,l:!1,exports:{}};return i[O].call(S.exports,S,S.exports,n),S.l=!0,S.exports}return n.m=i,n.c=e,n.d=function(O,S,o){n.o(O,S)||Object.defineProperty(O,S,{configurable:!1,enumerable:!0,get:o})},n.n=function(O){var S=O&&O.__esModule?function(){return O.default}:function(){return O};return n.d(S,"a",S),S},n.o=function(O,S){return Object.prototype.hasOwnProperty.call(O,S)},n.p="",n(n.s=3)}([function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function O(o,N){var R={},L=o||"Abstract",A=[],I=null,y;if(R._type=L,R.getType=function(){return L},R.setType=function(D){L=D},R.getChildren=function(){return A},R.addChild=function(D){if(D){if(!D.setParent)throw{name:"Error",message:"Trying to add a child which is not a node: "+JSON.stringify(D)};D.setParent(R),A.push(D)}},R.getParent=function(){return I},R.setParent=function(D){I=D},R.getContext=function(D){return y||D.activeContext.peek()},R.setContext=function(D){y=D},R.getStartPosition=function(){return N>>16},R.getEndPosition=function(){return N&65535},R.getValue=function(){throw{name:"MethodNotImplementedException",message:"SpelNode#getValue() must be overridden."}},R.toString=function(){var D="Kind: "+R.getType();D+=", Children: [";for(var x=0,F=R.getChildren().length;x<F;x+=1)D+="{"+R.getChildren()[x]+"}, ";return D+="]",D},N===0)throw{name:"Error",message:"Position cannot be 0"};for(var C=arguments.length,M=Array(C>2?C-2:0),b=2;b<C;b++)M[b-2]=arguments[b];return M&&M.forEach(function(D){R.addChild(D)}),R}var S=e.SpelNode={create:O}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stack=O;function O(S){this.elements=S||[]}O.prototype.push=function(S){return this.elements.push(S),S},O.prototype.pop=function(){return this.elements.pop()},O.prototype.peek=function(){return this.elements[this.elements.length-1]},O.prototype.empty=function(){return this.elements.length>0},O.prototype.search=function(S){return this.elements.length-this.elements.indexOf(S)}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var O={LITERAL_INT:1,LITERAL_LONG:2,LITERAL_HEXINT:3,LITERAL_HEXLONG:4,LITERAL_STRING:5,LITERAL_REAL:6,LITERAL_REAL_FLOAT:7,LPAREN:"(",RPAREN:")",COMMA:",",IDENTIFIER:0,COLON:":",HASH:"#",RSQUARE:"]",LSQUARE:"[",LCURLY:"{",RCURLY:"}",DOT:".",PLUS:"+",STAR:"*",MINUS:"-",SELECT_FIRST:"^[",SELECT_LAST:"$[",QMARK:"?",PROJECT:"![",DIV:"/",GE:">=",GT:">",LE:"<=",LT:"<",EQ:"==",NE:"!=",MOD:"%",NOT:"!",ASSIGN:"=",INSTANCEOF:"instanceof",MATCHES:"matches",BETWEEN:"between",SELECT:"?[",POWER:"^",ELVIS:"?:",SAFE_NAVI:"?.",BEAN_REF:"@",SYMBOLIC_OR:"||",SYMBOLIC_AND:"&&",INC:"++",DEC:"--"};function S(N){this.type=N,this.tokenChars=O[N],this._hasPayload=typeof O[N]!="string",typeof O[N]=="number"&&(this._ordinal=O[N])}for(var o in O)O.hasOwnProperty(o)&&(S[o]=new S(o));S.prototype.toString=function(){return this.type+(this.tokenChars.length!==0?"("+this.tokenChars+")":"")},S.prototype.getLength=function(){return this.tokenChars.length},S.prototype.hasPayload=function(){return this._hasPayload},S.prototype.valueOf=function(N){for(var R in O)if(O.hasOwnProperty(R)&&O[R]===N)return S[R]},S.prototype.ordinal=function(){return this._ordinal},e.TokenKind=S},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandardContext=e.SpelExpressionEvaluator=void 0;var O=n(4),S=n(50);e.SpelExpressionEvaluator=O.SpelExpressionEvaluator,e.StandardContext=S.StandardContext},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpelExpressionEvaluator=void 0;var O=n(5),S=n(1),o={};function N(R,L,A){var I=new S.Stack,y;return L||(L={}),I.push(L),y={rootContext:L,activeContext:I,locals:A},R.getValue(y)}o.compile=function(R){var L=(0,O.SpelExpressionParser)().parse(R);return{eval:function(I,y){return N(L,I,y)},_compiledExpression:L}},o.eval=function(R,L,A){return o.compile(R).eval(L,A)},e.SpelExpressionEvaluator=o},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpelExpressionParser=void 0;var O=n(2),S=n(6),o=n(8),N=n(9),R=n(10),L=n(11),A=n(12),I=n(13),y=n(14),C=n(15),M=n(16),b=n(17),D=n(18),x=n(19),F=n(20),J=n(21),U=n(22),W=n(23),V=n(24),H=n(25),z=n(26),$=n(27),_=n(28),Y=n(29),w=n(30),T=n(31),v=n(32),l=n(33),p=n(34),s=n(35),u=n(36),g=n(37),m=n(38),E=n(39),f=n(40),a=n(41),r=n(42),d=n(43),c=n(44),P=n(45),G=n(46),q=n(47),Z=n(48),j=n(49),K=e.SpelExpressionParser=function(){var Q=new RegExp("[\\p{L}\\p{N}_$]+"),ae,oe=[],le,ue,he,pe;function ye(ce){ae=ce}function Re(ce,Se){try{le=ce,ue=S.Tokenizer.tokenize(ce),he=ue.length,pe=0,oe=[];var Be=Ce();return $e()&&Ze(gt().startPos,"MORE_INPUT",dt().toString()),Be}catch(it){throw it.message}}function Ce(){var ce=Ae();if($e()){var Se=gt();if(Se.getKind()===O.TokenKind.ASSIGN){ce===null&&(ce=L.NullLiteral.create(kt(Se.startPos-1,Se.endPos-1))),dt();var Be=Ae();return D.Assign.create(Je(Se),ce,Be)}if(Se.getKind()===O.TokenKind.ELVIS){ce===null&&(ce=L.NullLiteral.create(kt(Se.startPos-1,Se.endPos-2))),dt();var it=Ce();return it===null&&(it=L.NullLiteral.create(kt(Se.startPos+1,Se.endPos+1))),m.Elvis.create(Je(Se),ce,it)}if(Se.getKind()===O.TokenKind.QMARK){ce===null&&(ce=L.NullLiteral.create(kt(Se.startPos-1,Se.endPos-1))),dt();var Lt=Ce();st(O.TokenKind.COLON);var Yt=Ce();return g.Ternary.create(Je(Se),ce,Lt,Yt)}}return ce}function Ae(){for(var ce=Te();Ht("or")||Ot(O.TokenKind.SYMBOLIC_OR);){var Se=dt(),Be=Te();xt(Se,ce,Be),ce=s.OpOr.create(Je(Se),ce,Be)}return ce}function Te(){for(var ce=be();Ht("and")||Ot(O.TokenKind.SYMBOLIC_AND);){var Se=dt(),Be=be();xt(Se,ce,Be),ce=p.OpAnd.create(Je(Se),ce,Be)}return ce}function be(){var ce=We(),Se=Bt();if(Se!==null){var Be=dt(),it=We();xt(Be,ce,it);var Lt=Se.kind;if(Se.isNumericRelationalOperator()){var Yt=Je(Be);return Lt===O.TokenKind.GT?U.OpGT.create(Yt,ce,it):Lt===O.TokenKind.LT?V.OpLT.create(Yt,ce,it):Lt===O.TokenKind.LE?W.OpLE.create(Yt,ce,it):Lt===O.TokenKind.GE?J.OpGE.create(Yt,ce,it):Lt===O.TokenKind.EQ?x.OpEQ.create(Yt,ce,it):F.OpNE.create(Yt,ce,it)}return Lt===O.TokenKind.INSTANCEOF?d.OpInstanceof.create(Je(Be),ce,it):Lt===O.TokenKind.MATCHES?u.OpMatches.create(Je(Be),ce,it):c.OpBetween.create(Je(Be),ce,it)}return ce}function We(){for(var ce=je();It(O.TokenKind.PLUS,O.TokenKind.MINUS,O.TokenKind.INC);){var Se=dt(),Be=je();$t(Se,Be),Se.getKind()===O.TokenKind.PLUS?ce=H.OpPlus.create(Je(Se),ce,Be):Se.getKind()===O.TokenKind.MINUS&&(ce=z.OpMinus.create(Je(Se),ce,Be))}return ce}function je(){for(var ce=He();It(O.TokenKind.STAR,O.TokenKind.DIV,O.TokenKind.MOD);){var Se=dt(),Be=He();xt(Se,ce,Be),Se.getKind()===O.TokenKind.STAR?ce=$.OpMultiply.create(Je(Se),ce,Be):Se.getKind()===O.TokenKind.DIV?ce=_.OpDivide.create(Je(Se),ce,Be):ce=Y.OpModulus.create(Je(Se),ce,Be)}return ce}function He(){var ce=De(),Se;if(Ot(O.TokenKind.POWER)){Se=dt();var Be=De();return $t(Se,Be),w.OpPower.create(Je(Se),ce,Be)}return ce!==null&&It(O.TokenKind.INC,O.TokenKind.DEC)?(Se=dt(),Se.getKind()===O.TokenKind.INC?T.OpInc.create(Je(Se),!0,ce):v.OpDec.create(Je(Se),!0,ce)):ce}function De(){var ce,Se;return It(O.TokenKind.PLUS,O.TokenKind.MINUS,O.TokenKind.NOT)?(ce=dt(),Se=De(),ce.getKind()===O.TokenKind.NOT?l.OpNot.create(Je(ce),Se):ce.getKind()===O.TokenKind.PLUS?H.OpPlus.create(Je(ce),Se):z.OpMinus.create(Je(ce),Se)):It(O.TokenKind.INC,O.TokenKind.DEC)?(ce=dt(),Se=De(),ce.getKind()===O.TokenKind.INC?T.OpInc.create(Je(ce),!1,Se):v.OpDec.create(Je(ce),!1,Se)):Ye()}function Ye(){var ce=[],Se=Ve();for(ce.push(Se);nt();)ce.push(Rt());return ce.length===1?ce[0]:M.CompoundExpression.create(kt(Se.getStartPosition(),ce[ce.length-1].getEndPosition()),ce)}function nt(){var ce=null;return It(O.TokenKind.DOT,O.TokenKind.SAFE_NAVI)?ce=ve():ce=ke(),ce===null?!1:(lt(ce),!0)}function ke(){return Ot(O.TokenKind.LSQUARE)&&pt()?Rt():null}function ve(){var ce=dt(),Se=ce.getKind()===O.TokenKind.SAFE_NAVI;return Pt(Se)||Ee()||Qe(Se)||et(Se)?Rt():(gt()===null?Ze(ce.startPos,"OOD"):Ze(ce.startPos,"UNEXPECTED_DATA_AFTER_DOT",yt(gt())),null)}function Ee(){if(!Ot(O.TokenKind.HASH))return!1;var ce=dt(),Se=st(O.TokenKind.IDENTIFIER),Be=Ie();return Be===null?(lt(C.VariableReference.create(Se.data,kt(ce.startPos,Se.endPos))),!0):(lt(A.FunctionReference.create(Se.data,kt(ce.startPos,Se.endPos),Be)),!0)}function Ie(){if(!Ot(O.TokenKind.LPAREN))return null;var ce=[];return Ue(ce),st(O.TokenKind.RPAREN),ce}function we(ce){Ot(O.TokenKind.LPAREN)||Ze(Je(gt()),"MISSING_CONSTRUCTOR_ARGS"),Ue(ce),st(O.TokenKind.RPAREN)}function Ue(ce){var Se=gt().startPos,Be;do{dt();var it=gt();it===null&&Ze(Se,"RUN_OUT_OF_ARGUMENTS"),it.getKind()!==O.TokenKind.RPAREN&&ce.push(Ce()),Be=gt()}while(Be!==null&&Be.kind===O.TokenKind.COMMA);Be===null&&Ze(Se,"RUN_OUT_OF_ARGUMENTS")}function Ge(ce){return ce===null?le.length:ce.startPos}function Ve(){return Ft()||bt()||ze()||ot()||Ct()||Pt(!1)||Ee()||_e()||Qe(!1)||et(!1)||pt()||ut()?Rt():null}function _e(){if(Ot(O.TokenKind.BEAN_REF)){var ce=dt(),Se=null,Be=null;Ot(O.TokenKind.IDENTIFIER)?(Se=st(O.TokenKind.IDENTIFIER),Be=Se.data):Ot(O.TokenKind.LITERAL_STRING)?(Se=st(O.TokenKind.LITERAL_STRING),Be=Se.stringValue(),Be=Be.substring(1,Be.length()-1)):Ze(ce.startPos,"INVALID_BEAN_REFERENCE");var it=G.BeanReference.create(Je(Se),Be);return lt(it),!0}return!1}function ze(){if(Ot(O.TokenKind.IDENTIFIER)){var ce=gt();if(ce.stringValue()!=="T")return!1;var Se=dt();if(Ot(O.TokenKind.RSQUARE))return lt(y.PropertyReference.create(Se.stringValue(),Je(Se))),!0;st(O.TokenKind.LPAREN);for(var Be=vt(),it=0;Vt(O.TokenKind.LSQUARE,!0);)st(O.TokenKind.RSQUARE),it++;return st(O.TokenKind.RPAREN),lt(P.TypeReference.create(Je(ce),Be,it)),!0}return!1}function ot(){if(Ot(O.TokenKind.IDENTIFIER)){var ce=gt();return ce.stringValue().toLowerCase()!=="null"?!1:(dt(),lt(L.NullLiteral.create(Je(ce))),!0)}return!1}function Qe(ce){var Se=gt();if(!Vt(O.TokenKind.PROJECT,!0))return!1;var Be=Ce();return st(O.TokenKind.RSQUARE),lt(r.Projection.create(ce,Je(Se),Be)),!0}function ut(){var ce=gt(),Se=[];if(!Vt(O.TokenKind.LCURLY,!0))return!1;var Be=null,it=gt();if(Vt(O.TokenKind.RCURLY,!0))Be=E.InlineList.create(kt(ce.startPos,it.endPos));else if(Vt(O.TokenKind.COLON,!0))it=st(O.TokenKind.RCURLY),Be=f.InlineMap.create(kt(ce.startPos,it.endPos));else{var Lt=Ce();if(Ot(O.TokenKind.RCURLY))Se.push(Lt),it=st(O.TokenKind.RCURLY),Be=E.InlineList.create(kt(ce.startPos,it.endPos),Se);else if(Vt(O.TokenKind.COMMA,!0)){Se.push(Lt);do Se.push(Ce());while(Vt(O.TokenKind.COMMA,!0));it=st(O.TokenKind.RCURLY),Be=E.InlineList.create(Je(ce.startPos,it.endPos),Se)}else if(Vt(O.TokenKind.COLON,!0)){var Yt=[];for(Yt.push(Lt),Yt.push(Ce());Vt(O.TokenKind.COMMA,!0);)Yt.push(Ce()),st(O.TokenKind.COLON),Yt.push(Ce());it=st(O.TokenKind.RCURLY),Be=f.InlineMap.create(kt(ce.startPos,it.endPos),Yt)}else Ze(ce.startPos,"OOD")}return lt(Be),!0}function pt(){var ce=gt();if(!Vt(O.TokenKind.LSQUARE,!0))return!1;var Se=Ce();return st(O.TokenKind.RSQUARE),lt(b.Indexer.create(Je(ce),Se)),!0}function et(ce){var Se=gt();if(!Ut())return!1;dt();var Be=Ce();return Be===null&&Ze(Je(Se),"MISSING_SELECTION_EXPRESSION"),st(O.TokenKind.RSQUARE),Se.getKind()===O.TokenKind.SELECT_FIRST?lt(a.Selection.create(ce,a.Selection.FIRST,Je(Se),Be)):Se.getKind()===O.TokenKind.SELECT_LAST?lt(a.Selection.create(ce,a.Selection.LAST,Je(Se),Be)):lt(a.Selection.create(ce,a.Selection.ALL,Je(Se),Be)),!0}function vt(){for(var ce=[],Se=gt();Et(Se);)dt(),Se.kind!==O.TokenKind.DOT&&ce.push(q.Identifier.create(Se.stringValue(),Je(Se))),Se=gt();ce.length||(Se===null&&Ze(le.length(),"OOD"),Ze(Se.startPos,"NOT_EXPECTED_TOKEN","qualified ID",Se.getKind().toString().toLowerCase()));var Be=kt(ce[0].getStartPosition(),ce[ce.length-1].getEndPosition());return Z.QualifiedIdentifier.create(Be,ce)}function Et(ce){if(ce===null||ce.kind===O.TokenKind.LITERAL_STRING)return!1;if(ce.kind===O.TokenKind.DOT||ce.kind===O.TokenKind.IDENTIFIER)return!0;var Se=ce.stringValue();return Se&&Se.length&&Q.test(Se)}function Pt(ce){if(Ot(O.TokenKind.IDENTIFIER)){var Se=dt(),Be=Ie();return Be===null?(lt(y.PropertyReference.create(ce,Se.stringValue(),Je(Se))),!0):(lt(I.MethodReference.create(ce,Se.stringValue(),Je(Se),Be)),!0)}return!1}function Ct(){if(Ht("new")){var ce=dt();if(Ot(O.TokenKind.RSQUARE))return lt(y.PropertyReference.create(ce.stringValue(),Je(ce))),!0;var Se=vt(),Be=[];if(Be.push(Se),Ot(O.TokenKind.LSQUARE)){for(var it=[];Vt(O.TokenKind.LSQUARE,!0);)Ot(O.TokenKind.RSQUARE)?it.push(null):it.push(Ce()),st(O.TokenKind.RSQUARE);ut()&&Be.push(Rt()),lt(j.ConstructorReference.create(Je(ce),it,Be))}else we(Be),lt(j.ConstructorReference.create(Je(ce),Be));return!0}return!1}function lt(ce){oe.push(ce)}function Rt(){return oe.pop()}function Ft(){var ce=gt();if(ce===null)return!1;if(ce.getKind()===O.TokenKind.LITERAL_INT||ce.getKind()===O.TokenKind.LITERAL_LONG)lt(N.NumberLiteral.create(parseInt(ce.stringValue(),10),Je(ce)));else if(ce.getKind()===O.TokenKind.LITERAL_REAL||ce.getKind()===O.TokenKind.LITERAL_REAL_FLOAT)lt(N.NumberLiteral.create(parseFloat(ce.stringValue()),Je(ce)));else if(ce.getKind()===O.TokenKind.LITERAL_HEXINT||ce.getKind()===O.TokenKind.LITERAL_HEXLONG)lt(N.NumberLiteral.create(parseInt(ce.stringValue(),16),Je(ce)));else if(Ht("true"))lt(o.BooleanLiteral.create(!0,Je(ce)));else if(Ht("false"))lt(o.BooleanLiteral.create(!1,Je(ce)));else if(ce.getKind()===O.TokenKind.LITERAL_STRING)lt(R.StringLiteral.create(ce.stringValue(),Je(ce)));else return!1;return dt(),!0}function bt(){if(Ot(O.TokenKind.LPAREN)){dt();var ce=Ce();return st(O.TokenKind.RPAREN),lt(ce),!0}else return!1}function Bt(){var ce=gt();if(ce===null)return null;if(ce.isNumericRelationalOperator())return ce;if(ce.isIdentifier()){var Se=ce.stringValue();if(Se.toLowerCase()==="instanceof")return ce.asInstanceOfToken();if(Se.toLowerCase()==="matches")return ce.asMatchesToken();if(Se.toLowerCase()==="between")return ce.asBetweenToken()}return null}function st(ce){var Se=dt();return Se===null&&Ze(le.length,"OOD"),Se.getKind()!==ce&&Ze(Se.startPos,"NOT_EXPECTED_TOKEN",ce.toString().toLowerCase(),Se.getKind().toString().toLowerCase()),Se}function Ot(ce){return Vt(ce,!1)}function Vt(ce,Se){if(!$e())return!1;var Be=gt();return Be.getKind()===ce?(Se&&pe++,!0):ce===O.TokenKind.IDENTIFIER&&Be.getKind().ordinal()>=O.TokenKind.DIV.ordinal()&&Be.getKind().ordinal()<=O.TokenKind.NOT.ordinal()&&Be.data!==null}function It(){if(!$e())return!1;for(var ce=gt(),Se=Array.prototype.slice.call(arguments),Be=0,it=Se.length;Be<it;Be+=1)if(ce.getKind()===Se[Be])return!0;return!1}function Ht(ce){if(!$e())return!1;var Se=gt();return Se.getKind()===O.TokenKind.IDENTIFIER&&Se.stringValue().toLowerCase()===ce.toLowerCase()}function Ut(){if(!$e())return!1;var ce=gt();return ce.getKind()===O.TokenKind.SELECT||ce.getKind()===O.TokenKind.SELECT_FIRST||ce.getKind()===O.TokenKind.SELECT_LAST}function $e(){return pe<ue.length}function dt(){return pe>=he?null:ue[pe++]}function gt(){return pe>=he?null:ue[pe]}function Ze(ce,Se,Be,it){throw Be&&(Se+=`
Expected: `+Be),it&&(Se+=`
Actual: `+it),{name:"InternalParseException",message:"Error occurred while attempting to parse expression '"+le+"' at position "+ce+". Message: "+Se}}function yt(ce){return ce.getKind().hasPayload()?ce.stringValue():ce.getKind().toString().toLowerCase()}function xt(ce,Se,Be){jt(ce,Se),$t(ce,Be)}function jt(ce,Se){Se===null&&Ze(ce.startPos,"LEFT_OPERAND_PROBLEM")}function $t(ce,Se){Se===null&&Ze(ce.startPos,"RIGHT_OPERAND_PROBLEM")}function Je(ce){return(ce.startPos<<16)+ce.endPos}function kt(ce,Se){return(ce<<16)+Se}return{setConfiguration:ye,parse:Re}}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tokenizer=void 0;var O=n(7),S=n(2),o=["DIV","EQ","GE","GT","LE","LT","MOD","NE","NOT"],N=[],R=1,L=2,A=4;function I(){var M;for(M="0".charCodeAt(0);M<="9".charCodeAt(0);M+=1)N[M]|=R|L;for(M="A".charCodeAt(0);M<="F".charCodeAt(0);M+=1)N[M]|=L;for(M="a".charCodeAt(0);M<="f".charCodeAt(0);M+=1)N[M]|=L;for(M="A".charCodeAt(0);M<="Z".charCodeAt(0);M+=1)N[M]|=A;for(M="a".charCodeAt(0);M<="z".charCodeAt(0);M+=1)N[M]|=A}I();function y(M){var b=M,D=M+"\0",x=D.length,F=0,J=[];function U(){for(var c;F<x;)if(c=D[F],r(c))z();else switch(c){case"+":T(S.TokenKind.INC)?l(S.TokenKind.INC):v(S.TokenKind.PLUS);break;case"_":z();break;case"-":T(S.TokenKind.DEC)?l(S.TokenKind.DEC):v(S.TokenKind.MINUS);break;case":":v(S.TokenKind.COLON);break;case".":v(S.TokenKind.DOT);break;case",":v(S.TokenKind.COMMA);break;case"*":v(S.TokenKind.STAR);break;case"/":v(S.TokenKind.DIV);break;case"%":v(S.TokenKind.MOD);break;case"(":v(S.TokenKind.LPAREN);break;case")":v(S.TokenKind.RPAREN);break;case"[":v(S.TokenKind.LSQUARE);break;case"#":v(S.TokenKind.HASH);break;case"]":v(S.TokenKind.RSQUARE);break;case"{":v(S.TokenKind.LCURLY);break;case"}":v(S.TokenKind.RCURLY);break;case"@":v(S.TokenKind.BEAN_REF);break;case"^":T(S.TokenKind.SELECT_FIRST)?l(S.TokenKind.SELECT_FIRST):v(S.TokenKind.POWER);break;case"!":T(S.TokenKind.NE)?l(S.TokenKind.NE):T(S.TokenKind.PROJECT)?l(S.TokenKind.PROJECT):v(S.TokenKind.NOT);break;case"=":T(S.TokenKind.EQ)?l(S.TokenKind.EQ):v(S.TokenKind.ASSIGN);break;case"&":if(!T(S.TokenKind.SYMBOLIC_AND))throw{name:"SpelParseException",message:"Missing character '&' in expression ("+b+") at position "+F};l(S.TokenKind.SYMBOLIC_AND);break;case"|":if(!T(S.TokenKind.SYMBOLIC_OR))throw{name:"SpelParseException",message:"Missing character '|' in expression ("+b+") at position "+F};l(S.TokenKind.SYMBOLIC_OR);break;case"?":T(S.TokenKind.SELECT)?l(S.TokenKind.SELECT):T(S.TokenKind.ELVIS)?l(S.TokenKind.ELVIS):T(S.TokenKind.SAFE_NAVI)?l(S.TokenKind.SAFE_NAVI):v(S.TokenKind.QMARK);break;case"$":T(S.TokenKind.SELECT_LAST)?l(S.TokenKind.SELECT_LAST):z();break;case">":T(S.TokenKind.GE)?l(S.TokenKind.GE):v(S.TokenKind.GT);break;case"<":T(S.TokenKind.LE)?l(S.TokenKind.LE):v(S.TokenKind.LT);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":H(c==="0");break;case" ":case"	":case"\r":case`
`:F+=1;break;case"'":W();break;case'"':V();break;case"\0":F+=1;break;case"\\":throw{name:"SpelParseException",message:"Unexpected escape character in expression ("+b+") at position "+F};default:throw{name:"SpelParseException",message:"Cannot handle character '"+c+"' in expression ("+b+") at position "+F}}}function W(){for(var c=F,P=!1,G;!P;)if(F+=1,G=D[F],G==="'"&&(D[F+1]==="'"?F+=1:P=!0),G.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating quoted string in expression ("+b+") at position "+F};F+=1,J.push(new O.Token(S.TokenKind.LITERAL_STRING,w(c,F),c,F))}function V(){for(var c=F,P=!1,G;!P;)if(F+=1,G=D[F],G==='"'&&(D[F+1]==='"'?F+=1:P=!0),G.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating double-quoted string in expression ("+b+") at position "+F};F+=1,J.push(new O.Token(S.TokenKind.LITERAL_STRING,w(c,F),c,F))}function H(c){var P=!1,G=F,q=D[F+1],Z=q==="x"||q==="X",j,K,k,Q;if(c&&Z){F=F+1;do F+=1;while(d(D[F]));u("L","l")?(_(w(G+2,F),!0,G,F),F+=1):_(w(G+2,F),!1,G,F);return}do F+=1;while(a(D[F]));if(q=D[F],q==="."){P=!0,j=F;do F+=1;while(a(D[F]));if(F===j+1){F=j,$(w(G,F),!1,G,F);return}}if(K=F,u("L","l")){if(P)throw{name:"SpelParseException",message:"Real cannot be long in expression ("+b+") at position "+F};$(w(G,K),!0,G,K),F+=1}else if(g(D[F])){P=!0,F+=1,k=D[F],f(k)&&(F+=1);do F+=1;while(a(D[F]));Q=!1,m(D[F])?(Q=!0,F+=1,K=F):E(D[F])&&(F+=1,K=F),Y(w(G,F),Q,G,F)}else q=D[F],Q=!1,m(q)?(P=!0,Q=!0,F+=1,K=F):E(q)&&(P=!0,F+=1,K=F),P?Y(w(G,K),Q,G,K):$(w(G,K),!1,G,K)}function z(){var c=F,P,G,q;do F+=1;while(s(D[F]));if(P=w(c,F),(F-c===2||F-c===3)&&(G=P.toUpperCase(),q=o.indexOf(G),q>=0)){p(S.TokenKind.valueOf(G),c,P);return}J.push(new O.Token(S.TokenKind.IDENTIFIER,P.replace("\0",""),c,F))}function $(c,P,G,q){P?J.push(new O.Token(S.TokenKind.LITERAL_LONG,c,G,q)):J.push(new O.Token(S.TokenKind.LITERAL_INT,c,G,q))}function _(c,P,G,q){if(c.length===0)throw P?{name:"SpelParseException",message:"Not a long in expression ("+b+") at position "+F}:{name:"SpelParseException",message:"Not an int in expression ("+b+") at position "+F};P?J.push(new O.Token(S.TokenKind.LITERAL_HEXLONG,c,G,q)):J.push(new O.Token(S.TokenKind.LITERAL_HEXINT,c,G,q))}function Y(c,P,G,q){P?J.push(new O.Token(S.TokenKind.LITERAL_REAL_FLOAT,c,G,q)):J.push(new O.Token(S.TokenKind.LITERAL_REAL,c,G,q))}function w(c,P){return D.substring(c,P)}function T(c){return c.tokenChars.length===2&&D[F]===c.tokenChars[0]?D[F+1]===c.tokenChars[1]:!1}function v(c){J.push(new O.Token(c,null,F,F+1)),F+=1}function l(c){J.push(new O.Token(c,null,F,F+2)),F+=2}function p(c,P,G){J.push(new O.Token(c,G,P,P+c.getLength()))}function s(c){return r(c)||a(c)||c==="_"||c==="$"}function u(c,P){var G=D[F];return G===c||G===P}function g(c){return c==="e"||c==="E"}function m(c){return c==="f"||c==="F"}function E(c){return c==="d"||c==="D"}function f(c){return c==="+"||c==="-"}function a(c){return c.charCodeAt(0)>255?!1:(N[c.charCodeAt(0)]&R)!==0}function r(c){return c.charCodeAt(0)>255?!1:(N[c.charCodeAt(0)]&A)!==0}function d(c){return c.charCodeAt(0)>255?!1:(N[c.charCodeAt(0)]&L)!==0}return U(),J}var C=e.Tokenizer={tokenize:y}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Token=void 0;var O=n(2);function S(o,N,R,L){this.kind=o,this.startPos=R,this.endPos=L,N&&(this.data=N)}S.prototype.getKind=function(){return this.kind},S.prototype.toString=function(){var o="[";return o+=this.kind.toString(),this.kind.hasPayload()&&(o+=":"+this.data),o+="]",o+="("+this.startPos+","+this.endPos+")",o},S.prototype.isIdentifier=function(){return this.kind===O.TokenKind.IDENTIFIER},S.prototype.isNumericRelationalOperator=function(){return this.kind===O.TokenKind.GT||this.kind===O.TokenKind.GE||this.kind===O.TokenKind.LT||this.kind===O.TokenKind.LE||this.kind===O.TokenKind.EQ||this.kind===O.TokenKind.NE},S.prototype.stringValue=function(){return this.data},S.prototype.asInstanceOfToken=function(){return new S(O.TokenKind.INSTANCEOF,this.startPos,this.endPos)},S.prototype.asMatchesToken=function(){return new S(O.TokenKind.MATCHES,this.startPos,this.endPos)},S.prototype.asBetweenToken=function(){return new S(O.TokenKind.BETWEEN,this.startPos,this.endPos)},S.prototype.getStartPosition=function(){return this.startPos},S.prototype.getEndPosition=function(){return this.endPos},e.Token=S},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanLiteral=void 0;var O=n(0);function S(N,R){var L=O.SpelNode.create("boolean",R);return L.getValue=function(){return N},L.setValue=function(A){return N=A},L}var o=e.BooleanLiteral={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberLiteral=void 0;var O=n(0);function S(N,R){var L=O.SpelNode.create("number",R);return L.getValue=function(){return N},L.setValue=function(A){return N=A},L}var o=e.NumberLiteral={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringLiteral=void 0;var O=n(0);function S(N,R){var L=O.SpelNode.create("string",R);function A(I){return(I[0]==="'"&&I[I.length-1]==="'"||I[0]==='"'&&I[I.length-1]==='"')&&(I=I.substring(1,I.length-1)),I.replace(/''/g,"'").replace(/""/g,'"')}return N=A(N),L.getValue=function(){return N},L.setValue=function(I){return N=I},L}var o=e.StringLiteral={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NullLiteral=void 0;var O=n(0);function S(N,R){var L=O.SpelNode.create("null",R);return L.getValue=function(){return null},L}var o=e.NullLiteral={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionReference=void 0;var O=n(0),S=n(1);function o(R,L,A){var I=O.SpelNode.create("function",L);return I.getRaw=function(){return{functionName:R,args:A}},I.getValue=function(y){var C=y.locals||{},M=y.rootContext,b=[];if(A.forEach(function(D){var x=y.activeContext;y.activeContext=new S.Stack,y.activeContext.push(y.rootContext),b.push(D.getValue(y)),y.activeContext=x}),C[R])return C[R].apply(M,b);throw{name:"FunctionDoesNotExistException",message:"Function '"+R+"' does not exist."}},I}var N=e.FunctionReference={create:o}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MethodReference=void 0;var O=n(0),S=n(1);function o(R,L,A,I){var y=O.SpelNode.create("method",A);return y.getRaw=function(){return{methodName:L,args:I}},y.getValue=function(C){var M=C.activeContext.peek(),b=[],D;if(!M)throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+L+"' for an undefined context."};function x(F){if(F==null){if(R)return null;throw{name:"NullPointerException",message:"Method "+L+" does not exist."}}return F}if(I.forEach(function(F){var J=C.activeContext;C.activeContext=new S.Stack,C.activeContext.push(C.rootContext),b.push(F.getValue(C)),C.activeContext=J}),L.substr(0,3)==="get"&&!M[L])return x(M[L.charAt(3).toLowerCase()+L.substring(4)]);if(L.substr(0,3)==="set"&&!M[L])return M[L.charAt(3).toLowerCase()+L.substring(4)]=b[0];if(Array.isArray(M)){if(L==="size")return M.length;if(L==="contains")return M.includes(b[0])}return D=x(M[L]),D?D.apply(M,b):null},y}var N=e.MethodReference={create:o}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyReference=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("property",L);return A.getRaw=function(){return R},A.getValue=function(I){var y=I.activeContext.peek();if(!y){if(N)return null;throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+R+"' for an undefined context."}}if(y[R]===void 0||y[R]===null){if(N)return null;if(R==="size"&&Array.isArray(y))return y.length;throw{name:"NullPointerException",message:"Property '"+R+"' does not exist."}}return y[R]},A.setValue=function(I,y){var C=y.activeContext.peek();if(!C)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+R+"' for an undefined context."};return C[R]=I},A.getName=function(){return R},A}var o=e.PropertyReference={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VariableReference=void 0;var O=n(0);function S(N,R){var L=O.SpelNode.create("variable",R);return L.getRaw=function(){return N},L.getValue=function(A){var I=A.activeContext.peek(),y=A.locals;if(!I)throw{name:"ContextDoesNotExistException",message:"Attempting to look up variable '"+N+"' for an undefined context."};return N==="this"?I:N==="root"?A.rootContext:y[N]},L.setValue=function(A,I){var y=I.locals;return y[N]=A},L}var o=e.VariableReference={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompoundExpression=void 0;var O=n(0);function S(N,R){var L=O.SpelNode.create.apply(null,["compound",N].concat(R));function A(I){var y=L.getChildren().length,C;for(C=0;C<y;C+=1)L.getChildren()[C].getType()==="indexer"?I.activeContext.push(I.activeContext.peek()[L.getChildren()[C].getValue(I)]):I.activeContext.push(L.getChildren()[C].getValue(I));return function(){for(C=0;C<y;C+=1)I.activeContext.pop()}}return L.getValue=function(I){var y=I.activeContext.peek(),C;if(!y)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};var M=A(I);return C=I.activeContext.peek(),M(),C},L.setValue=function(I,y){var C=A(y),M=L.getChildren().length;return y.activeContext.pop(),I=L.getChildren()[M-1].setValue(I,y),y.activeContext.push(null),C(),I},L}var o=e.CompoundExpression={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Indexer=void 0;var O=n(0),S=n(1);function o(R,L){var A=O.SpelNode.create.apply(null,["indexer",R].concat(L));return A.getValue=function(I){var y=I.activeContext,C,M=A.getChildren().length,b,D;if(I.activeContext=new S.Stack,I.activeContext.push(I.rootContext),C=I.activeContext.peek(),!C)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};for(b=0;b<M;b+=1)I.activeContext.push(A.getChildren()[b].getValue(I));for(D=I.activeContext.peek(),b=0;b<M;b+=1)I.activeContext.pop();return I.activeContext=y,D},A}var N=e.Indexer={create:o}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Assign=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("assign",N,R,L);return A.getValue=function(I){var y=I.activeContext.peek();if(!y)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+R.getValue(I)+"' for an undefined context."};return R.setValue(L.getValue(I),I)},A}var o=e.Assign={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpEQ=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-eq",N,R,L);return A.getValue=function(I){return R.getValue(I)===L.getValue(I)},A}var o=e.OpEQ={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpNE=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-ne",N,R,L);return A.getValue=function(I){return R.getValue(I)!==L.getValue(I)},A}var o=e.OpNE={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpGE=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-ge",N,R,L);return A.getValue=function(I){return R.getValue(I)>=L.getValue(I)},A}var o=e.OpGE={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpGT=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-gt",N,R,L);return A.getValue=function(I){return R.getValue(I)>L.getValue(I)},A}var o=e.OpGT={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpLE=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-le",N,R,L);return A.getValue=function(I){return R.getValue(I)<=L.getValue(I)},A}var o=e.OpLE={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpLT=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-lt",N,R,L);return A.getValue=function(I){return R.getValue(I)<L.getValue(I)},A}var o=e.OpLT={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpPlus=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-plus",N,R,L);return A.getValue=function(I){return L?R.getValue(I)+L.getValue(I):+R.getValue(I)},A}var o=e.OpPlus={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMinus=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-minus",N,R,L);return A.getValue=function(I){return L?R.getValue(I)-L.getValue(I):-R.getValue(I)},A}var o=e.OpMinus={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMultiply=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-multiply",N,R,L);return A.getValue=function(I){var y=R.getValue(I),C=L.getValue(I);if(typeof y=="number"&&typeof C=="number")return y*C;if(typeof y=="string"&&typeof C=="number"){for(var M="",b=0;b<C;b+=1)M+=y;return M}return null},A}var o=e.OpMultiply={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpDivide=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-divide",N,R,L);return A.getValue=function(I){return R.getValue(I)/L.getValue(I)},A}var o=e.OpDivide={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpModulus=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-modulus",N,R,L);return A.getValue=function(I){return R.getValue(I)%L.getValue(I)},A}var o=e.OpModulus={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpPower=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-power",N,R,L);return A.getValue=function(I){return Math.pow(R.getValue(I),L.getValue(I))},A}var o=e.OpPower={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpInc=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-inc",N,L);return A.getValue=function(I){var y=L.getValue(I);return L.setValue(y+1,I),R?y:y+1},A}var o=e.OpInc={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpDec=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-dec",N,L);return A.getValue=function(I){var y=L.getValue(I);return L.setValue(y-1,I),R?y:y-1},A}var o=e.OpDec={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpNot=void 0;var O=n(0);function S(N,R){var L=O.SpelNode.create("op-not",N,R);return L.getValue=function(A){return!R.getValue(A)},L}var o=e.OpNot={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpAnd=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-and",N,R,L);return A.getValue=function(I){return!!R.getValue(I)&&!!L.getValue(I)},A}var o=e.OpAnd={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpOr=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("op-or",N,R,L);return A.getValue=function(I){return!!R.getValue(I)||!!L.getValue(I)},A}var o=e.OpOr={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMatches=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("matches",N,R,L);return A.getValue=function(I){var y=R.getValue(I),C=L.getValue(I);try{var M=new RegExp(C);return!!M.exec(y)}catch(b){throw{name:"EvaluationException",message:b.toString()}}},A}var o=e.OpMatches={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ternary=void 0;var O=n(0);function S(N,R,L,A){var I=O.SpelNode.create("ternary",N,R,L,A);return I.getValue=function(y){return R.getValue(y)?L.getValue(y):A.getValue(y)},I}var o=e.Ternary={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Elvis=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("elvis",N,R,L);return A.getValue=function(I){return R.getValue(I)!==null?R.getValue(I):L.getValue(I)},A}var o=e.Elvis={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineList=void 0;var O=n(0);function S(N,R){var L=O.SpelNode.create("list",N),A=[].concat(R||[]);return L.getRaw=function(){return A},L.getValue=function(I){return A.map(function(y){return y.getValue(I)})},L}var o=e.InlineList={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineMap=void 0;var O=n(0);function S(N,R){var L=O.SpelNode.create("map",N),A=[].concat(R||[]);return L.getValue=function(I){var y=!0,C=null,M={};return A.forEach(function(b){y?b.getType()==="property"?C=b.getName():C=b.getValue(I):M[C]=b.getValue(I),y=!y}),M},L}var o=e.InlineMap={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Selection=void 0;var O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},S=n(0);function o(I,y,C){var M=!1;return C.activeContext.push(I),M=y.getValue(C),C.activeContext.pop(),M}function N(I,y,C,M){var b=I.filter(function(D){return o(D,C,M)});switch(y){case"ALL":return b;case"FIRST":return b[0]||null;case"LAST":return b.length?b[b.length-1]:null}}function R(I,y,C,M){var b={},D,x,F=[],J={};for(x in I)I.hasOwnProperty(x)&&(D={key:x,value:I[x]},o(D,C,M)&&F.push(D));switch(y){case"ALL":return F.forEach(function(U){b[U.key]=U.value}),b;case"FIRST":return F.length?(J[F[0].key]=F[0].value,J):null;case"LAST":return F.length?(J[F[F.length-1].key]=F[F.length-1].value,J):null}F.forEach(function(U){b[U.key]=U.value})}function L(I,y,C,M){var b=S.SpelNode.create("selection",C,M);return b.getValue=function(D){var x=D.activeContext.peek();if(x){if(Array.isArray(x))return N(x,y,M,D);if((typeof x>"u"?"undefined":O(x))==="object")return R(x,y,M,D)}return null},b}var A=e.Selection={create:L,FIRST:"FIRST",LAST:"LAST",ALL:"ALL"}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Projection=void 0;var O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},S=n(0);function o(L,A,I){return L.map(function(y){var C;return I.activeContext.push(y),C=A.getValue(I),I.activeContext.pop(),C})}function N(L,A,I){var y=S.SpelNode.create("projection",A,I);return y.getValue=function(C){var M=C.activeContext.peek(),b=[],D;if(Array.isArray(M))return o(M,I,C);if((typeof M>"u"?"undefined":O(M))==="object"){for(D in M)M.hasOwnProperty(D)&&b.push(M[D]);return o(b,I,C)}return null},y}var R=e.Projection={create:N}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpInstanceof=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("instanceof",N,R,L);return A.getValue=function(I){throw{name:"MethodNotImplementedException",message:"OpInstanceOf: Not implemented"}},A}var o=e.OpInstanceof={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpBetween=void 0;var O=n(0);function S(N,R,L){var A=O.SpelNode.create("between",N,R,L);return A.getValue=function(I){throw{name:"MethodNotImplementedException",message:"OpBetween: Not implemented"}},A}var o=e.OpBetween={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypeReference=void 0;var O=n(0);function S(N,A,L){var A=O.SpelNode.create("typeref",N,A);return A.getValue=function(I){throw{name:"MethodNotImplementedException",message:"TypeReference: Not implemented"}},A}var o=e.TypeReference={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BeanReference=void 0;var O=n(0);function S(N,R){var L=O.SpelNode.create("beanref",N);return L.getValue=function(A){throw{name:"MethodNotImplementedException",message:"BeanReference: Not implemented"}},L}var o=e.BeanReference={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Identifier=void 0;var O=n(0);function S(N,R){var L=O.SpelNode.create("identifier",R);return L.getRaw=function(){return N},L.getValue=function(A){throw{name:"MethodNotImplementedException",message:"Identifier: Not implemented"}},L}var o=e.Identifier={create:S}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QualifiedIdentifier=void 0;var O=n(0);function S(R){if(Array.isArray(R)){for(var L=0,A=Array(R.length);L<R.length;L++)A[L]=R[L];return A}else return Array.from(R)}function o(R,L){var A=O.SpelNode.create.apply(O.SpelNode,["qualifiedidentifier",R].concat(S(L)));return A.getRaw=function(){return L.map(function(I){return I.getRaw()})},A.getValue=function(I){throw{name:"MethodNotImplementedException",message:"QualifiedIdentifier: Not implemented"}},A}var N=e.QualifiedIdentifier={create:o}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConstructorReference=void 0;var O=n(0),S=n(1);function o(A){if(Array.isArray(A)){for(var I=0,y=Array(A.length);I<A.length;I++)y[I]=A[I];return y}else return Array.from(A)}function N(A){return Array.isArray(A)?A:Array.from(A)}function R(A,I,y){var C=y!==void 0,M;C?M=I.length&&I[0]&&I[0].getType()==="number"?I[0].getValue():null:(y=I,I=void 0);var b=y,D=N(b),x=D[0],F=D.slice(1),J=O.SpelNode.create.apply(O.SpelNode,["constructorref",A].concat(o(y)));return J.getRaw=function(){return M},J.getValue=function(U){if(C&&F.length<=1){var W=[];return F.forEach(function(V){var H=U.activeContext;U.activeContext=new S.Stack,U.activeContext.push(U.rootContext),W.push(V.getValue(U)),U.activeContext=H}),F.length===1?W[0]:M?new Array(M):[]}throw{name:"MethodNotImplementedException",message:"ConstructorReference: Not implemented"}},J}var L=e.ConstructorReference={create:R}},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function O(o,N){var R={};return R.authentication=o||{},R.principal=N||{},R.hasRole=function(L){var A=!1;return!L||!R.authentication&&!Array.isArray(R.authentication.authorities)?!1:(R.authentication.authorities.forEach(function(I){I.authority.toLowerCase()===L.toLowerCase()&&(A=!0)}),A)},R.hasPermission=function(){var L=Array.prototype.slice.call(arguments);if(L.length===1)return R.hasRole(L[0])},R}var S=e.StandardContext={create:O}}])})},75700:(re,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=R(e(421)),O=R(e(25767)),S=R(e(48009)),o=R(e(70540)),N=R(e(423));function R(M){return M&&M.__esModule?M:{default:M}}function L(M,b){if(!(M instanceof b))throw new TypeError("Cannot call a class as a function")}function A(M,b){for(var D=0;D<b.length;D++){var x=b[D];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(M,x.key,x)}}function I(M,b,D){return b&&A(M.prototype,b),D&&A(M,D),M}var y=function(b){return b.replace(/[\t ]+$/,"")},C=function(){function M(b,D,x){L(this,M),this.cfg=b||{},this.indentation=new S.default(this.cfg.indent),this.inlineBlock=new o.default,this.params=new N.default(this.cfg.params),this.tokenizer=D,this.tokenOverride=x,this.previousReservedWord={},this.tokens=[],this.index=0}return I(M,[{key:"format",value:function(D){this.tokens=this.tokenizer.tokenize(D);var x=this.getFormattedQueryFromTokens();return x.trim()}},{key:"getFormattedQueryFromTokens",value:function(){var D=this,x="";return this.tokens.forEach(function(F,J){D.index=J,D.tokenOverride&&(F=D.tokenOverride(F,D.previousReservedWord)||F),F.type===O.default.WHITESPACE||(F.type===O.default.LINE_COMMENT?x=D.formatLineComment(F,x):F.type===O.default.BLOCK_COMMENT?x=D.formatBlockComment(F,x):F.type===O.default.RESERVED_TOP_LEVEL?(x=D.formatTopLevelReservedWord(F,x),D.previousReservedWord=F):F.type===O.default.RESERVED_TOP_LEVEL_NO_INDENT?(x=D.formatTopLevelReservedWordNoIndent(F,x),D.previousReservedWord=F):F.type===O.default.RESERVED_NEWLINE?(x=D.formatNewlineReservedWord(F,x),D.previousReservedWord=F):F.type===O.default.RESERVED?(x=D.formatWithSpaces(F,x),D.previousReservedWord=F):F.type===O.default.OPEN_PAREN?x=D.formatOpeningParentheses(F,x):F.type===O.default.CLOSE_PAREN?x=D.formatClosingParentheses(F,x):F.type===O.default.PLACEHOLDER?x=D.formatPlaceholder(F,x):F.value===","?x=D.formatComma(F,x):F.value===":"?x=D.formatWithSpaceAfter(F,x):F.value==="."?x=D.formatWithoutSpaces(F,x):F.value===";"?x=D.formatQuerySeparator(F,x):x=D.formatWithSpaces(F,x))}),x}},{key:"formatLineComment",value:function(D,x){return this.addNewline(x+D.value)}},{key:"formatBlockComment",value:function(D,x){return this.addNewline(this.addNewline(x)+this.indentComment(D.value))}},{key:"indentComment",value:function(D){return D.replace(/\n[\t ]*/g,`
`+this.indentation.getIndent()+" ")}},{key:"formatTopLevelReservedWordNoIndent",value:function(D,x){return this.indentation.decreaseTopLevel(),x=this.addNewline(x)+this.equalizeWhitespace(this.formatReservedWord(D.value)),this.addNewline(x)}},{key:"formatTopLevelReservedWord",value:function(D,x){return this.indentation.decreaseTopLevel(),x=this.addNewline(x),this.indentation.increaseTopLevel(),x+=this.equalizeWhitespace(this.formatReservedWord(D.value)),this.addNewline(x)}},{key:"formatNewlineReservedWord",value:function(D,x){return this.addNewline(x)+this.equalizeWhitespace(this.formatReservedWord(D.value))+" "}},{key:"equalizeWhitespace",value:function(D){return D.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/g," ")}},{key:"formatOpeningParentheses",value:function(D,x){var F=[O.default.WHITESPACE,O.default.OPEN_PAREN,O.default.LINE_COMMENT];return(0,n.default)(F,this.previousToken().type)||(x=y(x)),x+=this.cfg.uppercase?D.value.toUpperCase():D.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),x=this.addNewline(x)),x}},{key:"formatClosingParentheses",value:function(D,x){return D.value=this.cfg.uppercase?D.value.toUpperCase():D.value,this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(D,x)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(D,this.addNewline(x)))}},{key:"formatPlaceholder",value:function(D,x){return x+this.params.get(D)+" "}},{key:"formatComma",value:function(D,x){return x=y(x)+D.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?x:this.addNewline(x)}},{key:"formatWithSpaceAfter",value:function(D,x){return y(x)+D.value+" "}},{key:"formatWithoutSpaces",value:function(D,x){return y(x)+D.value}},{key:"formatWithSpaces",value:function(D,x){var F=D.type==="reserved"?this.formatReservedWord(D.value):D.value;return x+F+" "}},{key:"formatReservedWord",value:function(D){return this.cfg.uppercase?D.toUpperCase():D}},{key:"formatQuerySeparator",value:function(D,x){return this.indentation.resetIndentation(),y(x)+D.value+`
`.repeat(this.cfg.linesBetweenQueries||1)}},{key:"addNewline",value:function(D){return D=y(D),D.endsWith(`
`)||(D+=`
`),D+this.indentation.getIndent()}},{key:"previousToken",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.tokens[this.index-D]||{}}}]),M}();i.default=C,re.exports=i.default},48009:(re,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=S(e(52400)),O=S(e(57312));function S(y){return y&&y.__esModule?y:{default:y}}function o(y,C){if(!(y instanceof C))throw new TypeError("Cannot call a class as a function")}function N(y,C){for(var M=0;M<C.length;M++){var b=C[M];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}function R(y,C,M){return C&&N(y.prototype,C),M&&N(y,M),y}var L="top-level",A="block-level",I=function(){function y(C){o(this,y),this.indent=C||"  ",this.indentTypes=[]}return R(y,[{key:"getIndent",value:function(){return(0,n.default)(this.indent,this.indentTypes.length)}},{key:"increaseTopLevel",value:function(){this.indentTypes.push(L)}},{key:"increaseBlockLevel",value:function(){this.indentTypes.push(A)}},{key:"decreaseTopLevel",value:function(){(0,O.default)(this.indentTypes)===L&&this.indentTypes.pop()}},{key:"decreaseBlockLevel",value:function(){for(;this.indentTypes.length>0;){var M=this.indentTypes.pop();if(M!==L)break}}},{key:"resetIndentation",value:function(){this.indentTypes=[]}}]),y}();i.default=I,re.exports=i.default},70540:(re,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=O(e(25767));function O(A){return A&&A.__esModule?A:{default:A}}function S(A,I){if(!(A instanceof I))throw new TypeError("Cannot call a class as a function")}function o(A,I){for(var y=0;y<I.length;y++){var C=I[y];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(A,C.key,C)}}function N(A,I,y){return I&&o(A.prototype,I),y&&o(A,y),A}var R=50,L=function(){function A(){S(this,A),this.level=0}return N(A,[{key:"beginIfPossible",value:function(y,C){this.level===0&&this.isInlineBlock(y,C)?this.level=1:this.level>0?this.level++:this.level=0}},{key:"end",value:function(){this.level--}},{key:"isActive",value:function(){return this.level>0}},{key:"isInlineBlock",value:function(y,C){for(var M=0,b=0,D=C;D<y.length;D++){var x=y[D];if(M+=x.value.length,M>R)return!1;if(x.type===n.default.OPEN_PAREN)b++;else if(x.type===n.default.CLOSE_PAREN&&(b--,b===0))return!0;if(this.isForbiddenToken(x))return!1}return!1}},{key:"isForbiddenToken",value:function(y){var C=y.type,M=y.value;return C===n.default.RESERVED_TOP_LEVEL||C===n.default.RESERVED_NEWLINE||C===n.default.COMMENT||C===n.default.BLOCK_COMMENT||M===";"}}]),A}();i.default=L,re.exports=i.default},423:(re,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;function e(o,N){if(!(o instanceof N))throw new TypeError("Cannot call a class as a function")}function n(o,N){for(var R=0;R<N.length;R++){var L=N[R];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(o,L.key,L)}}function O(o,N,R){return N&&n(o.prototype,N),R&&n(o,R),o}var S=function(){function o(N){e(this,o),this.params=N,this.index=0}return O(o,[{key:"get",value:function(R){var L=R.key,A=R.value;return this.params?L?this.params[L]:this.params[this.index++]:A}}]),o}();i.default=S,re.exports=i.default},21723:(re,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=o(e(94818)),O=o(e(85222)),S=o(e(25767));function o(I){return I&&I.__esModule?I:{default:I}}function N(I,y){if(!(I instanceof y))throw new TypeError("Cannot call a class as a function")}function R(I,y){for(var C=0;C<y.length;C++){var M=y[C];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(I,M.key,M)}}function L(I,y,C){return y&&R(I.prototype,y),C&&R(I,C),I}var A=function(){function I(y){N(this,I),this.WHITESPACE_REGEX=/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)/,this.NUMBER_REGEX=/^((\x2D[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?[0-9]+(\.[0-9]+)?|0x[0-9A-Fa-f]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|\x2D>>|\x2D>|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|:=|(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/,this.BLOCK_COMMENT_REGEX=/^(\/\*(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(y.lineCommentTypes),this.RESERVED_TOP_LEVEL_REGEX=this.createReservedWordRegex(y.reservedTopLevelWords),this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX=this.createReservedWordRegex(y.reservedTopLevelWordsNoIndent),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(y.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(y.reservedWords),this.WORD_REGEX=this.createWordRegex(y.specialWordChars),this.STRING_REGEX=this.createStringRegex(y.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(y.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(y.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(y.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(y.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(y.namedPlaceholderTypes,this.createStringPattern(y.stringTypes))}return L(I,[{key:"createLineCommentRegex",value:function(C){return new RegExp("^((?:".concat(C.map(function(M){return(0,O.default)(M)}).join("|"),`).*?(?:\r
|\r|
|$))`),"u")}},{key:"createReservedWordRegex",value:function(C){var M=C.join("|").replace(/ /g,"\\s+");return new RegExp("^(".concat(M,")\\b"),"iu")}},{key:"createWordRegex",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return new RegExp("^([\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}".concat(C.join(""),"]+)"),"u")}},{key:"createStringRegex",value:function(C){return new RegExp("^("+this.createStringPattern(C)+")","u")}},{key:"createStringPattern",value:function(C){var M={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return C.map(function(b){return M[b]}).join("|")}},{key:"createParenRegex",value:function(C){var M=this;return new RegExp("^("+C.map(function(b){return M.escapeParen(b)}).join("|")+")","iu")}},{key:"escapeParen",value:function(C){return C.length===1?(0,O.default)(C):"\\b"+C+"\\b"}},{key:"createPlaceholderRegex",value:function(C,M){if((0,n.default)(C))return!1;var b=C.map(O.default).join("|");return new RegExp("^((?:".concat(b,")(?:").concat(M,"))"),"u")}},{key:"tokenize",value:function(C){if(!C)return[];for(var M=[],b;C.length;)b=this.getNextToken(C,b),C=C.substring(b.value.length),M.push(b);return M}},{key:"getNextToken",value:function(C,M){return this.getWhitespaceToken(C)||this.getCommentToken(C)||this.getStringToken(C)||this.getOpenParenToken(C)||this.getCloseParenToken(C)||this.getPlaceholderToken(C)||this.getNumberToken(C)||this.getReservedWordToken(C,M)||this.getWordToken(C)||this.getOperatorToken(C)}},{key:"getWhitespaceToken",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.WHITESPACE,regex:this.WHITESPACE_REGEX})}},{key:"getCommentToken",value:function(C){return this.getLineCommentToken(C)||this.getBlockCommentToken(C)}},{key:"getLineCommentToken",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}},{key:"getBlockCommentToken",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}},{key:"getStringToken",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.STRING,regex:this.STRING_REGEX})}},{key:"getOpenParenToken",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}},{key:"getCloseParenToken",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}},{key:"getPlaceholderToken",value:function(C){return this.getIdentNamedPlaceholderToken(C)||this.getStringNamedPlaceholderToken(C)||this.getIndexedPlaceholderToken(C)}},{key:"getIdentNamedPlaceholderToken",value:function(C){return this.getPlaceholderTokenWithKey({input:C,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(b){return b.slice(1)}})}},{key:"getStringNamedPlaceholderToken",value:function(C){var M=this;return this.getPlaceholderTokenWithKey({input:C,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(D){return M.getEscapedPlaceholderKey({key:D.slice(2,-1),quoteChar:D.slice(-1)})}})}},{key:"getIndexedPlaceholderToken",value:function(C){return this.getPlaceholderTokenWithKey({input:C,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(b){return b.slice(1)}})}},{key:"getPlaceholderTokenWithKey",value:function(C){var M=C.input,b=C.regex,D=C.parseKey,x=this.getTokenOnFirstMatch({input:M,regex:b,type:S.default.PLACEHOLDER});return x&&(x.key=D(x.value)),x}},{key:"getEscapedPlaceholderKey",value:function(C){var M=C.key,b=C.quoteChar;return M.replace(new RegExp((0,O.default)("\\"+b),"gu"),b)}},{key:"getNumberToken",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.NUMBER,regex:this.NUMBER_REGEX})}},{key:"getOperatorToken",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.OPERATOR,regex:this.OPERATOR_REGEX})}},{key:"getReservedWordToken",value:function(C,M){if(!(M&&M.value&&M.value==="."))return this.getTopLevelReservedToken(C)||this.getNewlineReservedToken(C)||this.getTopLevelReservedTokenNoIndent(C)||this.getPlainReservedToken(C)}},{key:"getTopLevelReservedToken",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.RESERVED_TOP_LEVEL,regex:this.RESERVED_TOP_LEVEL_REGEX})}},{key:"getNewlineReservedToken",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}},{key:"getTopLevelReservedTokenNoIndent",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.RESERVED_TOP_LEVEL_NO_INDENT,regex:this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX})}},{key:"getPlainReservedToken",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}},{key:"getWordToken",value:function(C){return this.getTokenOnFirstMatch({input:C,type:S.default.WORD,regex:this.WORD_REGEX})}},{key:"getTokenOnFirstMatch",value:function(C){var M=C.input,b=C.type,D=C.regex,x=M.match(D);if(x)return{type:b,value:x[1]}}}]),I}();i.default=A,re.exports=i.default},25767:(re,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOP_LEVEL:"reserved-top-level",RESERVED_TOP_LEVEL_NO_INDENT:"reserved-top-level-no-indent",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"};i.default=e,re.exports=i.default},26689:(re,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=S(e(75700)),O=S(e(21723));function S(b){return b&&b.__esModule?b:{default:b}}function o(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")}function N(b,D){for(var x=0;x<D.length;x++){var F=D[x];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(b,F.key,F)}}function R(b,D,x){return D&&N(b.prototype,D),x&&N(b,x),b}var L=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],A=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],I=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],y=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],C,M=function(){function b(D){o(this,b),this.cfg=D}return R(b,[{key:"format",value:function(x){return C||(C=new O.default({reservedWords:L,reservedTopLevelWords:A,reservedNewlineWords:y,reservedTopLevelWordsNoIndent:I,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new n.default(this.cfg,C).format(x)}}]),b}();i.default=M,re.exports=i.default},79493:(re,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=S(e(75700)),O=S(e(21723));function S(b){return b&&b.__esModule?b:{default:b}}function o(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")}function N(b,D){for(var x=0;x<D.length;x++){var F=D[x];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(b,F.key,F)}}function R(b,D,x){return D&&N(b.prototype,D),x&&N(b,x),b}var L=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],A=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],I=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],y=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],C,M=function(){function b(D){o(this,b),this.cfg=D}return R(b,[{key:"format",value:function(x){return C||(C=new O.default({reservedWords:L,reservedTopLevelWords:A,reservedNewlineWords:y,reservedTopLevelWordsNoIndent:I,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new n.default(this.cfg,C).format(x)}}]),b}();i.default=M,re.exports=i.default},82116:(re,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=o(e(75700)),O=o(e(21723)),S=o(e(25767));function o(x){return x&&x.__esModule?x:{default:x}}function N(x,F){if(!(x instanceof F))throw new TypeError("Cannot call a class as a function")}function R(x,F){for(var J=0;J<F.length;J++){var U=F[J];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(x,U.key,U)}}function L(x,F,J){return F&&R(x.prototype,F),J&&R(x,J),x}var A=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BREADTH","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DEPTH","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","END","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SEARCH","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],I=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UPDATE","VALUES","WHERE"],y=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],C=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],M=function(F,J){if(F.type===S.default.RESERVED_TOP_LEVEL&&F.value==="SET"&&J.value==="BY")return F.type=S.default.RESERVED,F},b,D=function(){function x(F){N(this,x),this.cfg=F}return L(x,[{key:"format",value:function(J){return b||(b=new O.default({reservedWords:A,reservedTopLevelWords:I,reservedNewlineWords:C,reservedTopLevelWordsNoIndent:y,stringTypes:['""',"N''","''","``"],openParens:["(","CASE","BEGIN"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new n.default(this.cfg,b,M).format(J)}}]),x}();i.default=D,re.exports=i.default},96914:(re,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=S(e(75700)),O=S(e(21723));function S(b){return b&&b.__esModule?b:{default:b}}function o(b,D){if(!(b instanceof D))throw new TypeError("Cannot call a class as a function")}function N(b,D){for(var x=0;x<D.length;x++){var F=D[x];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(b,F.key,F)}}function R(b,D,x){return D&&N(b.prototype,D),x&&N(b,x),b}var L=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],A=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],I=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],y=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],C,M=function(){function b(D){o(this,b),this.cfg=D}return R(b,[{key:"format",value:function(x){return C||(C=new O.default({reservedWords:L,reservedTopLevelWords:A,reservedNewlineWords:y,reservedTopLevelWordsNoIndent:I,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new n.default(this.cfg,C).format(x)}}]),b}();i.default=M,re.exports=i.default},4662:(re,i,e)=>{"use strict";var n;n={value:!0},i.ZP=n=void 0;var O=R(e(26689)),S=R(e(79493)),o=R(e(82116)),N=R(e(96914));function R(I){return I&&I.__esModule?I:{default:I}}var L=function(y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(C.language){case"db2":return new O.default(C).format(y);case"n1ql":return new S.default(C).format(y);case"pl/sql":return new o.default(C).format(y);case"sql":case void 0:return new N.default(C).format(y);default:throw Error("Unsupported SQL dialect: ".concat(C.language))}};n=L;var A={format:L};i.ZP=A},6804:(re,i,e)=>{re.exports=e(88650)},88650:(re,i,e)=>{var n=e(58228).Buffer,O=i,S=/`/g,o=/\./g,N=/[\0\b\t\n\r\x1a\"\'\\]/g,R={"\0":"\\0","\b":"\\b","	":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};O.escapeId=function(C,M){if(Array.isArray(C)){for(var b="",D=0;D<C.length;D++)b+=(D===0?"":", ")+O.escapeId(C[D],M);return b}else return M?"`"+String(C).replace(S,"``")+"`":"`"+String(C).replace(S,"``").replace(o,"`.`")+"`"},O.escape=function(C,M,b){if(C==null)return"NULL";switch(typeof C){case"boolean":return C?"true":"false";case"number":return C+"";case"object":return Object.prototype.toString.call(C)==="[object Date]"?O.dateToString(C,b||"local"):Array.isArray(C)?O.arrayToList(C,b):n.isBuffer(C)?O.bufferToString(C):typeof C.toSqlString=="function"?String(C.toSqlString()):M?L(C.toString()):O.objectToValues(C,b);default:return L(C)}},O.arrayToList=function(C,M){for(var b="",D=0;D<C.length;D++){var x=C[D];Array.isArray(x)?b+=(D===0?"":", ")+"("+O.arrayToList(x,M)+")":b+=(D===0?"":", ")+O.escape(x,!0,M)}return b},O.format=function(C,M,b,D){if(M==null)return C;Array.isArray(M)||(M=[M]);for(var x=0,F=/\?+/g,J="",U=0,W;U<M.length&&(W=F.exec(C));){var V=W[0].length;if(!(V>2)){var H=V===2?O.escapeId(M[U]):O.escape(M[U],b,D);J+=C.slice(x,W.index)+H,x=F.lastIndex,U++}}return x===0?C:x<C.length?J+C.slice(x):J},O.dateToString=function(C,M){var b=new Date(C);if(isNaN(b.getTime()))return"NULL";var D,x,F,J,U,W,V;if(M==="local")D=b.getFullYear(),x=b.getMonth()+1,F=b.getDate(),J=b.getHours(),U=b.getMinutes(),W=b.getSeconds(),V=b.getMilliseconds();else{var H=I(M);H!==!1&&H!==0&&b.setTime(b.getTime()+H*6e4),D=b.getUTCFullYear(),x=b.getUTCMonth()+1,F=b.getUTCDate(),J=b.getUTCHours(),U=b.getUTCMinutes(),W=b.getUTCSeconds(),V=b.getUTCMilliseconds()}var z=A(D,4)+"-"+A(x,2)+"-"+A(F,2)+" "+A(J,2)+":"+A(U,2)+":"+A(W,2)+"."+A(V,3);return L(z)},O.bufferToString=function(C){return"X"+L(C.toString("hex"))},O.objectToValues=function(C,M){var b="";for(var D in C){var x=C[D];typeof x!="function"&&(b+=(b.length===0?"":", ")+O.escapeId(D)+" = "+O.escape(x,!0,M))}return b},O.raw=function(C){if(typeof C!="string")throw new TypeError("argument sql must be a string");return{toSqlString:function(){return C}}};function L(y){for(var C=N.lastIndex=0,M="",b;b=N.exec(y);)M+=y.slice(C,b.index)+R[b[0]],C=N.lastIndex;return C===0?"'"+y+"'":C<y.length?"'"+M+y.slice(C)+"'":"'"+M+"'"}function A(y,C){for(y=y.toString();y.length<C;)y="0"+y;return y}function I(y){if(y==="Z")return 0;var C=y.match(/([\+\-\s])(\d\d):?(\d\d)?/);return C?(C[1]==="-"?-1:1)*(parseInt(C[2],10)+(C[3]?parseInt(C[3],10):0)/60)*60:!1}},16945:re=>{re.exports=function(){var i=document.getSelection();if(!i.rangeCount)return function(){};for(var e=document.activeElement,n=[],O=0;O<i.rangeCount;O++)n.push(i.getRangeAt(O));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return i.removeAllRanges(),function(){i.type==="Caret"&&i.removeAllRanges(),i.rangeCount||n.forEach(function(S){i.addRange(S)}),e&&e.focus()}}},39163:re=>{function i(e,n){(n==null||n>e.length)&&(n=e.length);for(var O=0,S=new Array(n);O<n;O++)S[O]=e[O];return S}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},75324:re=>{function i(e){if(Array.isArray(e))return e}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},46841:(re,i,e)=>{var n=e(39163);function O(S){if(Array.isArray(S))return n(S)}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},50757:re=>{function i(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},2376:re=>{function i(n,O,S,o,N,R,L){try{var A=n[R](L),I=A.value}catch(y){S(y);return}A.done?O(I):Promise.resolve(I).then(o,N)}function e(n){return function(){var O=this,S=arguments;return new Promise(function(o,N){var R=n.apply(O,S);function L(I){i(R,o,N,L,A,"next",I)}function A(I){i(R,o,N,L,A,"throw",I)}L(void 0)})}}re.exports=e,re.exports.__esModule=!0,re.exports.default=re.exports},52690:re=>{function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},86661:(re,i,e)=>{var n=e(18846);function O(o,N){for(var R=0;R<N.length;R++){var L=N[R];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(o,n(L.key),L)}}function S(o,N,R){return N&&O(o.prototype,N),R&&O(o,R),Object.defineProperty(o,"prototype",{writable:!1}),o}re.exports=S,re.exports.__esModule=!0,re.exports.default=re.exports},47552:(re,i,e)=>{var n=e(18846);function O(S,o,N){return o=n(o),o in S?Object.defineProperty(S,o,{value:N,enumerable:!0,configurable:!0,writable:!0}):S[o]=N,S}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},70764:re=>{function i(){return re.exports=i=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var O=arguments[n];for(var S in O)Object.prototype.hasOwnProperty.call(O,S)&&(e[S]=O[S])}return e},re.exports.__esModule=!0,re.exports.default=re.exports,i.apply(this,arguments)}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},39314:(re,i,e)=>{var n=e(79977);function O(){return typeof Reflect<"u"&&Reflect.get?(re.exports=O=Reflect.get.bind(),re.exports.__esModule=!0,re.exports.default=re.exports):(re.exports=O=function(o,N,R){var L=n(o,N);if(L){var A=Object.getOwnPropertyDescriptor(L,N);return A.get?A.get.call(arguments.length<3?o:R):A.value}},re.exports.__esModule=!0,re.exports.default=re.exports),O.apply(this,arguments)}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},11780:re=>{function i(e){return re.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},re.exports.__esModule=!0,re.exports.default=re.exports,i(e)}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},99513:(re,i,e)=>{var n=e(40925);function O(S,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(o&&o.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),o&&n(S,o)}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},87481:re=>{function i(e){return e&&e.__esModule?e:{default:e}}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},18832:re=>{function i(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},25461:re=>{function i(e,n){var O=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(O!=null){var S,o,N,R,L=[],A=!0,I=!1;try{if(N=(O=O.call(e)).next,n===0){if(Object(O)!==O)return;A=!1}else for(;!(A=(S=N.call(O)).done)&&(L.push(S.value),L.length!==n);A=!0);}catch(y){I=!0,o=y}finally{try{if(!A&&O.return!=null&&(R=O.return(),Object(R)!==R))return}finally{if(I)throw o}}return L}}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},99111:re=>{function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},31533:re=>{function i(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},73045:(re,i,e)=>{var n=e(56469);function O(S,o){if(S==null)return{};var N=n(S,o),R,L;if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(S);for(L=0;L<A.length;L++)R=A[L],!(o.indexOf(R)>=0)&&Object.prototype.propertyIsEnumerable.call(S,R)&&(N[R]=S[R])}return N}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},56469:re=>{function i(e,n){if(e==null)return{};var O={},S=Object.keys(e),o,N;for(N=0;N<S.length;N++)o=S[N],!(n.indexOf(o)>=0)&&(O[o]=e[o]);return O}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},70963:(re,i,e)=>{var n=e(7818).default,O=e(50757);function S(o,N){if(N&&(n(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(o)}re.exports=S,re.exports.__esModule=!0,re.exports.default=re.exports},82441:(re,i,e)=>{var n=e(7818).default;function O(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */re.exports=O=function(){return o},re.exports.__esModule=!0,re.exports.default=re.exports;var S,o={},N=Object.prototype,R=N.hasOwnProperty,L=Object.defineProperty||function(E,f,a){E[f]=a.value},A=typeof Symbol=="function"?Symbol:{},I=A.iterator||"@@iterator",y=A.asyncIterator||"@@asyncIterator",C=A.toStringTag||"@@toStringTag";function M(E,f,a){return Object.defineProperty(E,f,{value:a,enumerable:!0,configurable:!0,writable:!0}),E[f]}try{M({},"")}catch{M=function(a,r,d){return a[r]=d}}function b(E,f,a,r){var d=f&&f.prototype instanceof V?f:V,c=Object.create(d.prototype),P=new g(r||[]);return L(c,"_invoke",{value:l(E,a,P)}),c}function D(E,f,a){try{return{type:"normal",arg:E.call(f,a)}}catch(r){return{type:"throw",arg:r}}}o.wrap=b;var x="suspendedStart",F="suspendedYield",J="executing",U="completed",W={};function V(){}function H(){}function z(){}var $={};M($,I,function(){return this});var _=Object.getPrototypeOf,Y=_&&_(_(m([])));Y&&Y!==N&&R.call(Y,I)&&($=Y);var w=z.prototype=V.prototype=Object.create($);function T(E){["next","throw","return"].forEach(function(f){M(E,f,function(a){return this._invoke(f,a)})})}function v(E,f){function a(d,c,P,G){var q=D(E[d],E,c);if(q.type!=="throw"){var Z=q.arg,j=Z.value;return j&&n(j)=="object"&&R.call(j,"__await")?f.resolve(j.__await).then(function(K){a("next",K,P,G)},function(K){a("throw",K,P,G)}):f.resolve(j).then(function(K){Z.value=K,P(Z)},function(K){return a("throw",K,P,G)})}G(q.arg)}var r;L(this,"_invoke",{value:function(c,P){function G(){return new f(function(q,Z){a(c,P,q,Z)})}return r=r?r.then(G,G):G()}})}function l(E,f,a){var r=x;return function(d,c){if(r===J)throw new Error("Generator is already running");if(r===U){if(d==="throw")throw c;return{value:S,done:!0}}for(a.method=d,a.arg=c;;){var P=a.delegate;if(P){var G=p(P,a);if(G){if(G===W)continue;return G}}if(a.method==="next")a.sent=a._sent=a.arg;else if(a.method==="throw"){if(r===x)throw r=U,a.arg;a.dispatchException(a.arg)}else a.method==="return"&&a.abrupt("return",a.arg);r=J;var q=D(E,f,a);if(q.type==="normal"){if(r=a.done?U:F,q.arg===W)continue;return{value:q.arg,done:a.done}}q.type==="throw"&&(r=U,a.method="throw",a.arg=q.arg)}}}function p(E,f){var a=f.method,r=E.iterator[a];if(r===S)return f.delegate=null,a==="throw"&&E.iterator.return&&(f.method="return",f.arg=S,p(E,f),f.method==="throw")||a!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+a+"' method")),W;var d=D(r,E.iterator,f.arg);if(d.type==="throw")return f.method="throw",f.arg=d.arg,f.delegate=null,W;var c=d.arg;return c?c.done?(f[E.resultName]=c.value,f.next=E.nextLoc,f.method!=="return"&&(f.method="next",f.arg=S),f.delegate=null,W):c:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,W)}function s(E){var f={tryLoc:E[0]};1 in E&&(f.catchLoc=E[1]),2 in E&&(f.finallyLoc=E[2],f.afterLoc=E[3]),this.tryEntries.push(f)}function u(E){var f=E.completion||{};f.type="normal",delete f.arg,E.completion=f}function g(E){this.tryEntries=[{tryLoc:"root"}],E.forEach(s,this),this.reset(!0)}function m(E){if(E||E===""){var f=E[I];if(f)return f.call(E);if(typeof E.next=="function")return E;if(!isNaN(E.length)){var a=-1,r=function d(){for(;++a<E.length;)if(R.call(E,a))return d.value=E[a],d.done=!1,d;return d.value=S,d.done=!0,d};return r.next=r}}throw new TypeError(n(E)+" is not iterable")}return H.prototype=z,L(w,"constructor",{value:z,configurable:!0}),L(z,"constructor",{value:H,configurable:!0}),H.displayName=M(z,C,"GeneratorFunction"),o.isGeneratorFunction=function(E){var f=typeof E=="function"&&E.constructor;return!!f&&(f===H||(f.displayName||f.name)==="GeneratorFunction")},o.mark=function(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,z):(E.__proto__=z,M(E,C,"GeneratorFunction")),E.prototype=Object.create(w),E},o.awrap=function(E){return{__await:E}},T(v.prototype),M(v.prototype,y,function(){return this}),o.AsyncIterator=v,o.async=function(E,f,a,r,d){d===void 0&&(d=Promise);var c=new v(b(E,f,a,r),d);return o.isGeneratorFunction(f)?c:c.next().then(function(P){return P.done?P.value:c.next()})},T(w),M(w,C,"Generator"),M(w,I,function(){return this}),M(w,"toString",function(){return"[object Generator]"}),o.keys=function(E){var f=Object(E),a=[];for(var r in f)a.push(r);return a.reverse(),function d(){for(;a.length;){var c=a.pop();if(c in f)return d.value=c,d.done=!1,d}return d.done=!0,d}},o.values=m,g.prototype={constructor:g,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=S,this.done=!1,this.delegate=null,this.method="next",this.arg=S,this.tryEntries.forEach(u),!f)for(var a in this)a.charAt(0)==="t"&&R.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=S)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var a=this;function r(Z,j){return P.type="throw",P.arg=f,a.next=Z,j&&(a.method="next",a.arg=S),!!j}for(var d=this.tryEntries.length-1;d>=0;--d){var c=this.tryEntries[d],P=c.completion;if(c.tryLoc==="root")return r("end");if(c.tryLoc<=this.prev){var G=R.call(c,"catchLoc"),q=R.call(c,"finallyLoc");if(G&&q){if(this.prev<c.catchLoc)return r(c.catchLoc,!0);if(this.prev<c.finallyLoc)return r(c.finallyLoc)}else if(G){if(this.prev<c.catchLoc)return r(c.catchLoc,!0)}else{if(!q)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return r(c.finallyLoc)}}}},abrupt:function(f,a){for(var r=this.tryEntries.length-1;r>=0;--r){var d=this.tryEntries[r];if(d.tryLoc<=this.prev&&R.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var c=d;break}}c&&(f==="break"||f==="continue")&&c.tryLoc<=a&&a<=c.finallyLoc&&(c=null);var P=c?c.completion:{};return P.type=f,P.arg=a,c?(this.method="next",this.next=c.finallyLoc,W):this.complete(P)},complete:function(f,a){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&a&&(this.next=a),W},finish:function(f){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.finallyLoc===f)return this.complete(r.completion,r.afterLoc),u(r),W}},catch:function(f){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc===f){var d=r.completion;if(d.type==="throw"){var c=d.arg;u(r)}return c}}throw new Error("illegal catch attempt")},delegateYield:function(f,a,r){return this.delegate={iterator:m(f),resultName:a,nextLoc:r},this.method==="next"&&(this.arg=S),W}},o}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},40925:re=>{function i(e,n){return re.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,o){return S.__proto__=o,S},re.exports.__esModule=!0,re.exports.default=re.exports,i(e,n)}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},98595:(re,i,e)=>{var n=e(75324),O=e(25461),S=e(5340),o=e(99111);function N(R,L){return n(R)||O(R,L)||S(R,L)||o()}re.exports=N,re.exports.__esModule=!0,re.exports.default=re.exports},79977:(re,i,e)=>{var n=e(11780);function O(S,o){for(;!Object.prototype.hasOwnProperty.call(S,o)&&(S=n(S),S!==null););return S}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},47960:(re,i,e)=>{var n=e(75324),O=e(18832),S=e(5340),o=e(99111);function N(R){return n(R)||O(R)||S(R)||o()}re.exports=N,re.exports.__esModule=!0,re.exports.default=re.exports},68148:(re,i,e)=>{var n=e(46841),O=e(18832),S=e(5340),o=e(31533);function N(R){return n(R)||O(R)||S(R)||o()}re.exports=N,re.exports.__esModule=!0,re.exports.default=re.exports},62935:(re,i,e)=>{var n=e(7818).default;function O(S,o){if(n(S)!=="object"||S===null)return S;var N=S[Symbol.toPrimitive];if(N!==void 0){var R=N.call(S,o||"default");if(n(R)!=="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(S)}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},18846:(re,i,e)=>{var n=e(7818).default,O=e(62935);function S(o){var N=O(o,"string");return n(N)==="symbol"?N:String(N)}re.exports=S,re.exports.__esModule=!0,re.exports.default=re.exports},7818:re=>{function i(e){"@babel/helpers - typeof";return re.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},re.exports.__esModule=!0,re.exports.default=re.exports,i(e)}re.exports=i,re.exports.__esModule=!0,re.exports.default=re.exports},5340:(re,i,e)=>{var n=e(39163);function O(S,o){if(S){if(typeof S=="string")return n(S,o);var N=Object.prototype.toString.call(S).slice(8,-1);if(N==="Object"&&S.constructor&&(N=S.constructor.name),N==="Map"||N==="Set")return Array.from(S);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return n(S,o)}}re.exports=O,re.exports.__esModule=!0,re.exports.default=re.exports},80341:(re,i,e)=>{var n=e(82441)();re.exports=n;try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}}]);

//# sourceMappingURL=4755.js.map